function T1(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();function _1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zb={exports:{}},kc={},ey={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qo=Symbol.for("react.element"),I1=Symbol.for("react.portal"),P1=Symbol.for("react.fragment"),A1=Symbol.for("react.strict_mode"),E1=Symbol.for("react.profiler"),M1=Symbol.for("react.provider"),R1=Symbol.for("react.context"),L1=Symbol.for("react.forward_ref"),D1=Symbol.for("react.suspense"),O1=Symbol.for("react.memo"),F1=Symbol.for("react.lazy"),of=Symbol.iterator;function U1(e){return e===null||typeof e!="object"?null:(e=of&&e[of]||e["@@iterator"],typeof e=="function"?e:null)}var ty={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ry=Object.assign,sy={};function mi(e,t,s){this.props=e,this.context=t,this.refs=sy,this.updater=s||ty}mi.prototype.isReactComponent={};mi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};mi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ny(){}ny.prototype=mi.prototype;function Wh(e,t,s){this.props=e,this.context=t,this.refs=sy,this.updater=s||ty}var qh=Wh.prototype=new ny;qh.constructor=Wh;ry(qh,mi.prototype);qh.isPureReactComponent=!0;var lf=Array.isArray,ay=Object.prototype.hasOwnProperty,Hh={current:null},iy={key:!0,ref:!0,__self:!0,__source:!0};function oy(e,t,s){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)ay.call(t,n)&&!iy.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];a.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Qo,type:e,key:i,ref:o,props:a,_owner:Hh.current}}function B1(e,t){return{$$typeof:Qo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Qo}function V1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var df=/\/+/g;function lu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?V1(""+e.key):t.toString(36)}function rd(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Qo:case I1:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+lu(o,0):n,lf(a)?(s="",e!=null&&(s=e.replace(df,"$&/")+"/"),rd(a,t,s,"",function(c){return c})):a!=null&&(Gh(a)&&(a=B1(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(df,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",lf(e))for(var l=0;l<e.length;l++){i=e[l];var d=n+lu(i,l);o+=rd(i,t,s,d,a)}else if(d=U1(e),typeof d=="function")for(e=d.call(e),l=0;!(i=e.next()).done;)i=i.value,d=n+lu(i,l++),o+=rd(i,t,s,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(e,t,s){if(e==null)return e;var n=[],a=0;return rd(e,n,"","",function(i){return t.call(s,i,a++)}),n}function z1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Dt={current:null},sd={transition:null},$1={ReactCurrentDispatcher:Dt,ReactCurrentBatchConfig:sd,ReactCurrentOwner:Hh};function ly(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Il,forEach:function(e,t,s){Il(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Il(e,function(){t++}),t},toArray:function(e){return Il(e,function(t){return t})||[]},only:function(e){if(!Gh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ue.Component=mi;ue.Fragment=P1;ue.Profiler=E1;ue.PureComponent=Wh;ue.StrictMode=A1;ue.Suspense=D1;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$1;ue.act=ly;ue.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ry({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Hh.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)ay.call(t,d)&&!iy.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=s;else if(1<d){l=Array(d);for(var c=0;c<d;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Qo,type:e.type,key:a,ref:i,props:n,_owner:o}};ue.createContext=function(e){return e={$$typeof:R1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:M1,_context:e},e.Consumer=e};ue.createElement=oy;ue.createFactory=function(e){var t=oy.bind(null,e);return t.type=e,t};ue.createRef=function(){return{current:null}};ue.forwardRef=function(e){return{$$typeof:L1,render:e}};ue.isValidElement=Gh;ue.lazy=function(e){return{$$typeof:F1,_payload:{_status:-1,_result:e},_init:z1}};ue.memo=function(e,t){return{$$typeof:O1,type:e,compare:t===void 0?null:t}};ue.startTransition=function(e){var t=sd.transition;sd.transition={};try{e()}finally{sd.transition=t}};ue.unstable_act=ly;ue.useCallback=function(e,t){return Dt.current.useCallback(e,t)};ue.useContext=function(e){return Dt.current.useContext(e)};ue.useDebugValue=function(){};ue.useDeferredValue=function(e){return Dt.current.useDeferredValue(e)};ue.useEffect=function(e,t){return Dt.current.useEffect(e,t)};ue.useId=function(){return Dt.current.useId()};ue.useImperativeHandle=function(e,t,s){return Dt.current.useImperativeHandle(e,t,s)};ue.useInsertionEffect=function(e,t){return Dt.current.useInsertionEffect(e,t)};ue.useLayoutEffect=function(e,t){return Dt.current.useLayoutEffect(e,t)};ue.useMemo=function(e,t){return Dt.current.useMemo(e,t)};ue.useReducer=function(e,t,s){return Dt.current.useReducer(e,t,s)};ue.useRef=function(e){return Dt.current.useRef(e)};ue.useState=function(e){return Dt.current.useState(e)};ue.useSyncExternalStore=function(e,t,s){return Dt.current.useSyncExternalStore(e,t,s)};ue.useTransition=function(){return Dt.current.useTransition()};ue.version="18.3.1";ey.exports=ue;var p=ey.exports;const Qr=_1(p),W1=T1({__proto__:null,default:Qr},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q1=p,H1=Symbol.for("react.element"),G1=Symbol.for("react.fragment"),Q1=Object.prototype.hasOwnProperty,K1=q1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y1={key:!0,ref:!0,__self:!0,__source:!0};function dy(e,t,s){var n,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Q1.call(t,n)&&!Y1.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:H1,type:e,key:i,ref:o,props:a,_owner:K1.current}}kc.Fragment=G1;kc.jsx=dy;kc.jsxs=dy;Zb.exports=kc;var r=Zb.exports,bm={},cy={exports:{}},ar={},uy={exports:{}},my={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,E){var B=z.length;z.push(E);e:for(;0<B;){var q=B-1>>>1,ce=z[q];if(0<a(ce,E))z[q]=E,z[B]=ce,B=q;else break e}}function s(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var E=z[0],B=z.pop();if(B!==E){z[0]=B;e:for(var q=0,ce=z.length,He=ce>>>1;q<He;){var ee=2*(q+1)-1,me=z[ee],fe=ee+1,yt=z[fe];if(0>a(me,B))fe<ce&&0>a(yt,me)?(z[q]=yt,z[fe]=B,q=fe):(z[q]=me,z[ee]=B,q=ee);else if(fe<ce&&0>a(yt,B))z[q]=yt,z[fe]=B,q=fe;else break e}}return E}function a(z,E){var B=z.sortIndex-E.sortIndex;return B!==0?B:z.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],c=[],u=1,m=null,h=3,x=!1,g=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(z){for(var E=s(c);E!==null;){if(E.callback===null)n(c);else if(E.startTime<=z)n(c),E.sortIndex=E.expirationTime,t(d,E);else break;E=s(c)}}function k(z){if(v=!1,y(z),!g)if(s(d)!==null)g=!0,Q(j);else{var E=s(c);E!==null&&de(k,E.startTime-z)}}function j(z,E){g=!1,v&&(v=!1,f(R),R=-1),x=!0;var B=h;try{for(y(E),m=s(d);m!==null&&(!(m.expirationTime>E)||z&&!I());){var q=m.callback;if(typeof q=="function"){m.callback=null,h=m.priorityLevel;var ce=q(m.expirationTime<=E);E=e.unstable_now(),typeof ce=="function"?m.callback=ce:m===s(d)&&n(d),y(E)}else n(d);m=s(d)}if(m!==null)var He=!0;else{var ee=s(c);ee!==null&&de(k,ee.startTime-E),He=!1}return He}finally{m=null,h=B,x=!1}}var S=!1,P=null,R=-1,L=5,N=-1;function I(){return!(e.unstable_now()-N<L)}function A(){if(P!==null){var z=e.unstable_now();N=z;var E=!0;try{E=P(!0,z)}finally{E?W():(S=!1,P=null)}}else S=!1}var W;if(typeof b=="function")W=function(){b(A)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,se=G.port2;G.port1.onmessage=A,W=function(){se.postMessage(null)}}else W=function(){w(A,0)};function Q(z){P=z,S||(S=!0,W())}function de(z,E){R=w(function(){z(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){g||x||(g=!0,Q(j))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function(z){switch(h){case 1:case 2:case 3:var E=3;break;default:E=h}var B=h;h=E;try{return z()}finally{h=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,E){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var B=h;h=z;try{return E()}finally{h=B}},e.unstable_scheduleCallback=function(z,E,B){var q=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?q+B:q):B=q,z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=B+ce,z={id:u++,callback:E,priorityLevel:z,startTime:B,expirationTime:ce,sortIndex:-1},B>q?(z.sortIndex=B,t(c,z),s(d)===null&&z===s(c)&&(v?(f(R),R=-1):v=!0,de(k,B-q))):(z.sortIndex=ce,t(d,z),g||x||(g=!0,Q(j))),z},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(z){var E=h;return function(){var B=h;h=E;try{return z.apply(this,arguments)}finally{h=B}}}})(my);uy.exports=my;var J1=uy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=p,tr=J1;function $(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var hy=new Set,xo={};function oa(e,t){Ja(e,t),Ja(e+"Capture",t)}function Ja(e,t){for(xo[e]=t,e=0;e<t.length;e++)hy.add(t[e])}var ps=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ym=Object.prototype.hasOwnProperty,Z1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cf={},uf={};function e2(e){return ym.call(uf,e)?!0:ym.call(cf,e)?!1:Z1.test(e)?uf[e]=!0:(cf[e]=!0,!1)}function t2(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function r2(e,t,s,n){if(t===null||typeof t>"u"||t2(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ot(e,t,s,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xt[e]=new Ot(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xt[t]=new Ot(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){xt[e]=new Ot(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){xt[e]=new Ot(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xt[e]=new Ot(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){xt[e]=new Ot(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){xt[e]=new Ot(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){xt[e]=new Ot(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){xt[e]=new Ot(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qh=/[\-:]([a-z])/g;function Kh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qh,Kh);xt[t]=new Ot(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qh,Kh);xt[t]=new Ot(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qh,Kh);xt[t]=new Ot(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){xt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!1,!1)});xt.xlinkHref=new Ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){xt[e]=new Ot(e,1,!1,e.toLowerCase(),null,!0,!0)});function Yh(e,t,s,n){var a=xt.hasOwnProperty(t)?xt[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(r2(t,s,a,n)&&(s=null),n||a===null?e2(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var Ss=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pl=Symbol.for("react.element"),wa=Symbol.for("react.portal"),ka=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),vm=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),py=Symbol.for("react.context"),Xh=Symbol.for("react.forward_ref"),wm=Symbol.for("react.suspense"),km=Symbol.for("react.suspense_list"),Zh=Symbol.for("react.memo"),Fs=Symbol.for("react.lazy"),fy=Symbol.for("react.offscreen"),mf=Symbol.iterator;function _i(e){return e===null||typeof e!="object"?null:(e=mf&&e[mf]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,du;function zi(e){if(du===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);du=t&&t[1]||""}return`
`+du+e}var cu=!1;function uu(e,t){if(!e||cu)return"";cu=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=l);break}}}finally{cu=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?zi(e):""}function s2(e){switch(e.tag){case 5:return zi(e.type);case 16:return zi("Lazy");case 13:return zi("Suspense");case 19:return zi("SuspenseList");case 0:case 2:case 15:return e=uu(e.type,!1),e;case 11:return e=uu(e.type.render,!1),e;case 1:return e=uu(e.type,!0),e;default:return""}}function jm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ka:return"Fragment";case wa:return"Portal";case vm:return"Profiler";case Jh:return"StrictMode";case wm:return"Suspense";case km:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case py:return(e.displayName||"Context")+".Consumer";case xy:return(e._context.displayName||"Context")+".Provider";case Xh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Zh:return t=e.displayName||null,t!==null?t:jm(e.type)||"Memo";case Fs:t=e._payload,e=e._init;try{return jm(e(t))}catch{}}return null}function n2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jm(t);case 8:return t===Jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function dn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gy(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function a2(e){var t=gy(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Al(e){e._valueTracker||(e._valueTracker=a2(e))}function by(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=gy(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function Nd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Nm(e,t){var s=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function hf(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=dn(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function yy(e,t){t=t.checked,t!=null&&Yh(e,"checked",t,!1)}function Sm(e,t){yy(e,t);var s=dn(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Cm(e,t.type,s):t.hasOwnProperty("defaultValue")&&Cm(e,t.type,dn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xf(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Cm(e,t,s){(t!=="number"||Nd(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var $i=Array.isArray;function Fa(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+dn(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Tm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error($(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function pf(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error($(92));if($i(s)){if(1<s.length)throw Error($(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:dn(s)}}function vy(e,t){var s=dn(t.value),n=dn(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function ff(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _m(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var El,ky=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=El.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function po(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},i2=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(e){i2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qi[t]=Qi[e]})});function jy(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Qi.hasOwnProperty(e)&&Qi[e]?(""+t).trim():t+"px"}function Ny(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=jy(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var o2=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Im(e,t){if(t){if(o2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error($(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error($(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error($(61))}if(t.style!=null&&typeof t.style!="object")throw Error($(62))}}function Pm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Am=null;function ex(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Em=null,Ua=null,Ba=null;function gf(e){if(e=Jo(e)){if(typeof Em!="function")throw Error($(280));var t=e.stateNode;t&&(t=Tc(t),Em(e.stateNode,e.type,t))}}function Sy(e){Ua?Ba?Ba.push(e):Ba=[e]:Ua=e}function Cy(){if(Ua){var e=Ua,t=Ba;if(Ba=Ua=null,gf(e),t)for(e=0;e<t.length;e++)gf(t[e])}}function Ty(e,t){return e(t)}function _y(){}var mu=!1;function Iy(e,t,s){if(mu)return e(t,s);mu=!0;try{return Ty(e,t,s)}finally{mu=!1,(Ua!==null||Ba!==null)&&(_y(),Cy())}}function fo(e,t){var s=e.stateNode;if(s===null)return null;var n=Tc(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error($(231,t,typeof s));return s}var Mm=!1;if(ps)try{var Ii={};Object.defineProperty(Ii,"passive",{get:function(){Mm=!0}}),window.addEventListener("test",Ii,Ii),window.removeEventListener("test",Ii,Ii)}catch{Mm=!1}function l2(e,t,s,n,a,i,o,l,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(u){this.onError(u)}}var Ki=!1,Sd=null,Cd=!1,Rm=null,d2={onError:function(e){Ki=!0,Sd=e}};function c2(e,t,s,n,a,i,o,l,d){Ki=!1,Sd=null,l2.apply(d2,arguments)}function u2(e,t,s,n,a,i,o,l,d){if(c2.apply(this,arguments),Ki){if(Ki){var c=Sd;Ki=!1,Sd=null}else throw Error($(198));Cd||(Cd=!0,Rm=c)}}function la(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Py(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function bf(e){if(la(e)!==e)throw Error($(188))}function m2(e){var t=e.alternate;if(!t){if(t=la(e),t===null)throw Error($(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return bf(a),e;if(i===n)return bf(a),t;i=i.sibling}throw Error($(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o)throw Error($(189))}}if(s.alternate!==n)throw Error($(190))}if(s.tag!==3)throw Error($(188));return s.stateNode.current===s?e:t}function Ay(e){return e=m2(e),e!==null?Ey(e):null}function Ey(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Ey(e);if(t!==null)return t;e=e.sibling}return null}var My=tr.unstable_scheduleCallback,yf=tr.unstable_cancelCallback,h2=tr.unstable_shouldYield,x2=tr.unstable_requestPaint,ze=tr.unstable_now,p2=tr.unstable_getCurrentPriorityLevel,tx=tr.unstable_ImmediatePriority,Ry=tr.unstable_UserBlockingPriority,Td=tr.unstable_NormalPriority,f2=tr.unstable_LowPriority,Ly=tr.unstable_IdlePriority,jc=null,zr=null;function g2(e){if(zr&&typeof zr.onCommitFiberRoot=="function")try{zr.onCommitFiberRoot(jc,e,void 0,(e.current.flags&128)===128)}catch{}}var Cr=Math.clz32?Math.clz32:v2,b2=Math.log,y2=Math.LN2;function v2(e){return e>>>=0,e===0?32:31-(b2(e)/y2|0)|0}var Ml=64,Rl=4194304;function Wi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function _d(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?n=Wi(l):(i&=o,i!==0&&(n=Wi(i)))}else o=s&~a,o!==0?n=Wi(o):i!==0&&(n=Wi(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-Cr(t),a=1<<s,n|=e[s],t&=~a;return n}function w2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k2(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Cr(i),l=1<<o,d=a[o];d===-1?(!(l&s)||l&n)&&(a[o]=w2(l,t)):d<=t&&(e.expiredLanes|=l),i&=~l}}function Lm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Dy(){var e=Ml;return Ml<<=1,!(Ml&4194240)&&(Ml=64),e}function hu(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ko(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Cr(t),e[t]=s}function j2(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-Cr(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function rx(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-Cr(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var je=0;function Oy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Fy,sx,Uy,By,Vy,Dm=!1,Ll=[],Ys=null,Js=null,Xs=null,go=new Map,bo=new Map,Vs=[],N2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vf(e,t){switch(e){case"focusin":case"focusout":Ys=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Xs=null;break;case"pointerover":case"pointerout":go.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(t.pointerId)}}function Pi(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Jo(t),t!==null&&sx(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function S2(e,t,s,n,a){switch(t){case"focusin":return Ys=Pi(Ys,e,t,s,n,a),!0;case"dragenter":return Js=Pi(Js,e,t,s,n,a),!0;case"mouseover":return Xs=Pi(Xs,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return go.set(i,Pi(go.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,bo.set(i,Pi(bo.get(i)||null,e,t,s,n,a)),!0}return!1}function zy(e){var t=Ln(e.target);if(t!==null){var s=la(t);if(s!==null){if(t=s.tag,t===13){if(t=Py(s),t!==null){e.blockedOn=t,Vy(e.priority,function(){Uy(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Om(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);Am=n,s.target.dispatchEvent(n),Am=null}else return t=Jo(s),t!==null&&sx(t),e.blockedOn=s,!1;t.shift()}return!0}function wf(e,t,s){nd(e)&&s.delete(t)}function C2(){Dm=!1,Ys!==null&&nd(Ys)&&(Ys=null),Js!==null&&nd(Js)&&(Js=null),Xs!==null&&nd(Xs)&&(Xs=null),go.forEach(wf),bo.forEach(wf)}function Ai(e,t){e.blockedOn===t&&(e.blockedOn=null,Dm||(Dm=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,C2)))}function yo(e){function t(a){return Ai(a,e)}if(0<Ll.length){Ai(Ll[0],e);for(var s=1;s<Ll.length;s++){var n=Ll[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Ys!==null&&Ai(Ys,e),Js!==null&&Ai(Js,e),Xs!==null&&Ai(Xs,e),go.forEach(t),bo.forEach(t),s=0;s<Vs.length;s++)n=Vs[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Vs.length&&(s=Vs[0],s.blockedOn===null);)zy(s),s.blockedOn===null&&Vs.shift()}var Va=Ss.ReactCurrentBatchConfig,Id=!0;function T2(e,t,s,n){var a=je,i=Va.transition;Va.transition=null;try{je=1,nx(e,t,s,n)}finally{je=a,Va.transition=i}}function _2(e,t,s,n){var a=je,i=Va.transition;Va.transition=null;try{je=4,nx(e,t,s,n)}finally{je=a,Va.transition=i}}function nx(e,t,s,n){if(Id){var a=Om(e,t,s,n);if(a===null)ju(e,t,n,Pd,s),vf(e,n);else if(S2(a,e,t,s,n))n.stopPropagation();else if(vf(e,n),t&4&&-1<N2.indexOf(e)){for(;a!==null;){var i=Jo(a);if(i!==null&&Fy(i),i=Om(e,t,s,n),i===null&&ju(e,t,n,Pd,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else ju(e,t,n,null,s)}}var Pd=null;function Om(e,t,s,n){if(Pd=null,e=ex(n),e=Ln(e),e!==null)if(t=la(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Py(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Pd=e,null}function $y(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p2()){case tx:return 1;case Ry:return 4;case Td:case f2:return 16;case Ly:return 536870912;default:return 16}default:return 16}}var Hs=null,ax=null,ad=null;function Wy(){if(ad)return ad;var e,t=ax,s=t.length,n,a="value"in Hs?Hs.value:Hs.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[i-n];n++);return ad=a.slice(e,1<n?1-n:void 0)}function id(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dl(){return!0}function kf(){return!1}function ir(e){function t(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dl:kf,this.isPropagationStopped=kf,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),t}var hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ix=ir(hi),Yo=Ue({},hi,{view:0,detail:0}),I2=ir(Yo),xu,pu,Ei,Nc=Ue({},Yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ox,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ei&&(Ei&&e.type==="mousemove"?(xu=e.screenX-Ei.screenX,pu=e.screenY-Ei.screenY):pu=xu=0,Ei=e),xu)},movementY:function(e){return"movementY"in e?e.movementY:pu}}),jf=ir(Nc),P2=Ue({},Nc,{dataTransfer:0}),A2=ir(P2),E2=Ue({},Yo,{relatedTarget:0}),fu=ir(E2),M2=Ue({},hi,{animationName:0,elapsedTime:0,pseudoElement:0}),R2=ir(M2),L2=Ue({},hi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),D2=ir(L2),O2=Ue({},hi,{data:0}),Nf=ir(O2),F2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},U2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=B2[e])?!!t[e]:!1}function ox(){return V2}var z2=Ue({},Yo,{key:function(e){if(e.key){var t=F2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=id(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?U2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ox,charCode:function(e){return e.type==="keypress"?id(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?id(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$2=ir(z2),W2=Ue({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sf=ir(W2),q2=Ue({},Yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ox}),H2=ir(q2),G2=Ue({},hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q2=ir(G2),K2=Ue({},Nc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Y2=ir(K2),J2=[9,13,27,32],lx=ps&&"CompositionEvent"in window,Yi=null;ps&&"documentMode"in document&&(Yi=document.documentMode);var X2=ps&&"TextEvent"in window&&!Yi,qy=ps&&(!lx||Yi&&8<Yi&&11>=Yi),Cf=" ",Tf=!1;function Hy(e,t){switch(e){case"keyup":return J2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ja=!1;function Z2(e,t){switch(e){case"compositionend":return Gy(t);case"keypress":return t.which!==32?null:(Tf=!0,Cf);case"textInput":return e=t.data,e===Cf&&Tf?null:e;default:return null}}function e5(e,t){if(ja)return e==="compositionend"||!lx&&Hy(e,t)?(e=Wy(),ad=ax=Hs=null,ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return qy&&t.locale!=="ko"?null:t.data;default:return null}}var t5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _f(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!t5[e.type]:t==="textarea"}function Qy(e,t,s,n){Sy(n),t=Ad(t,"onChange"),0<t.length&&(s=new ix("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var Ji=null,vo=null;function r5(e){av(e,0)}function Sc(e){var t=Ca(e);if(by(t))return e}function s5(e,t){if(e==="change")return t}var Ky=!1;if(ps){var gu;if(ps){var bu="oninput"in document;if(!bu){var If=document.createElement("div");If.setAttribute("oninput","return;"),bu=typeof If.oninput=="function"}gu=bu}else gu=!1;Ky=gu&&(!document.documentMode||9<document.documentMode)}function Pf(){Ji&&(Ji.detachEvent("onpropertychange",Yy),vo=Ji=null)}function Yy(e){if(e.propertyName==="value"&&Sc(vo)){var t=[];Qy(t,vo,e,ex(e)),Iy(r5,t)}}function n5(e,t,s){e==="focusin"?(Pf(),Ji=t,vo=s,Ji.attachEvent("onpropertychange",Yy)):e==="focusout"&&Pf()}function a5(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sc(vo)}function i5(e,t){if(e==="click")return Sc(t)}function o5(e,t){if(e==="input"||e==="change")return Sc(t)}function l5(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pr=typeof Object.is=="function"?Object.is:l5;function wo(e,t){if(Pr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!ym.call(t,a)||!Pr(e[a],t[a]))return!1}return!0}function Af(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ef(e,t){var s=Af(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Af(s)}}function Jy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Xy(){for(var e=window,t=Nd();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Nd(e.document)}return t}function dx(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function d5(e){var t=Xy(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Jy(s.ownerDocument.documentElement,s)){if(n!==null&&dx(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Ef(s,i);var o=Ef(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var c5=ps&&"documentMode"in document&&11>=document.documentMode,Na=null,Fm=null,Xi=null,Um=!1;function Mf(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Um||Na==null||Na!==Nd(n)||(n=Na,"selectionStart"in n&&dx(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Xi&&wo(Xi,n)||(Xi=n,n=Ad(Fm,"onSelect"),0<n.length&&(t=new ix("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=Na)))}function Ol(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Sa={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},yu={},Zy={};ps&&(Zy=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function Cc(e){if(yu[e])return yu[e];if(!Sa[e])return e;var t=Sa[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Zy)return yu[e]=t[s];return e}var ev=Cc("animationend"),tv=Cc("animationiteration"),rv=Cc("animationstart"),sv=Cc("transitionend"),nv=new Map,Rf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(e,t){nv.set(e,t),oa(t,[e])}for(var vu=0;vu<Rf.length;vu++){var wu=Rf[vu],u5=wu.toLowerCase(),m5=wu[0].toUpperCase()+wu.slice(1);fn(u5,"on"+m5)}fn(ev,"onAnimationEnd");fn(tv,"onAnimationIteration");fn(rv,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(sv,"onTransitionEnd");Ja("onMouseEnter",["mouseout","mouseover"]);Ja("onMouseLeave",["mouseout","mouseover"]);Ja("onPointerEnter",["pointerout","pointerover"]);Ja("onPointerLeave",["pointerout","pointerover"]);oa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oa("onBeforeInput",["compositionend","keypress","textInput","paste"]);oa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h5=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function Lf(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,u2(n,t,void 0,e),e.currentTarget=null}function av(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],d=l.instance,c=l.currentTarget;if(l=l.listener,d!==i&&a.isPropagationStopped())break e;Lf(a,l,c),i=d}else for(o=0;o<n.length;o++){if(l=n[o],d=l.instance,c=l.currentTarget,l=l.listener,d!==i&&a.isPropagationStopped())break e;Lf(a,l,c),i=d}}}if(Cd)throw e=Rm,Cd=!1,Rm=null,e}function Ae(e,t){var s=t[Wm];s===void 0&&(s=t[Wm]=new Set);var n=e+"__bubble";s.has(n)||(iv(t,e,2,!1),s.add(n))}function ku(e,t,s){var n=0;t&&(n|=4),iv(s,e,n,t)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function ko(e){if(!e[Fl]){e[Fl]=!0,hy.forEach(function(s){s!=="selectionchange"&&(h5.has(s)||ku(s,!1,e),ku(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Fl]||(t[Fl]=!0,ku("selectionchange",!1,t))}}function iv(e,t,s,n){switch($y(t)){case 1:var a=T2;break;case 4:a=_2;break;default:a=nx}s=a.bind(null,t,s,e),a=void 0,!Mm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function ju(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ln(l),o===null)return;if(d=o.tag,d===5||d===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Iy(function(){var c=i,u=ex(s),m=[];e:{var h=nv.get(e);if(h!==void 0){var x=ix,g=e;switch(e){case"keypress":if(id(s)===0)break e;case"keydown":case"keyup":x=$2;break;case"focusin":g="focus",x=fu;break;case"focusout":g="blur",x=fu;break;case"beforeblur":case"afterblur":x=fu;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=jf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=A2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=H2;break;case ev:case tv:case rv:x=R2;break;case sv:x=Q2;break;case"scroll":x=I2;break;case"wheel":x=Y2;break;case"copy":case"cut":case"paste":x=D2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Sf}var v=(t&4)!==0,w=!v&&e==="scroll",f=v?h!==null?h+"Capture":null:h;v=[];for(var b=c,y;b!==null;){y=b;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,f!==null&&(k=fo(b,f),k!=null&&v.push(jo(b,k,y)))),w)break;b=b.return}0<v.length&&(h=new x(h,g,null,s,u),m.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&s!==Am&&(g=s.relatedTarget||s.fromElement)&&(Ln(g)||g[fs]))break e;if((x||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,x?(g=s.relatedTarget||s.toElement,x=c,g=g?Ln(g):null,g!==null&&(w=la(g),g!==w||g.tag!==5&&g.tag!==6)&&(g=null)):(x=null,g=c),x!==g)){if(v=jf,k="onMouseLeave",f="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=Sf,k="onPointerLeave",f="onPointerEnter",b="pointer"),w=x==null?h:Ca(x),y=g==null?h:Ca(g),h=new v(k,b+"leave",x,s,u),h.target=w,h.relatedTarget=y,k=null,Ln(u)===c&&(v=new v(f,b+"enter",g,s,u),v.target=y,v.relatedTarget=w,k=v),w=k,x&&g)t:{for(v=x,f=g,b=0,y=v;y;y=fa(y))b++;for(y=0,k=f;k;k=fa(k))y++;for(;0<b-y;)v=fa(v),b--;for(;0<y-b;)f=fa(f),y--;for(;b--;){if(v===f||f!==null&&v===f.alternate)break t;v=fa(v),f=fa(f)}v=null}else v=null;x!==null&&Df(m,h,x,v,!1),g!==null&&w!==null&&Df(m,w,g,v,!0)}}e:{if(h=c?Ca(c):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=s5;else if(_f(h))if(Ky)j=o5;else{j=a5;var S=n5}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=i5);if(j&&(j=j(e,c))){Qy(m,j,s,u);break e}S&&S(e,h,c),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Cm(h,"number",h.value)}switch(S=c?Ca(c):window,e){case"focusin":(_f(S)||S.contentEditable==="true")&&(Na=S,Fm=c,Xi=null);break;case"focusout":Xi=Fm=Na=null;break;case"mousedown":Um=!0;break;case"contextmenu":case"mouseup":case"dragend":Um=!1,Mf(m,s,u);break;case"selectionchange":if(c5)break;case"keydown":case"keyup":Mf(m,s,u)}var P;if(lx)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else ja?Hy(e,s)&&(R="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(R="onCompositionStart");R&&(qy&&s.locale!=="ko"&&(ja||R!=="onCompositionStart"?R==="onCompositionEnd"&&ja&&(P=Wy()):(Hs=u,ax="value"in Hs?Hs.value:Hs.textContent,ja=!0)),S=Ad(c,R),0<S.length&&(R=new Nf(R,e,null,s,u),m.push({event:R,listeners:S}),P?R.data=P:(P=Gy(s),P!==null&&(R.data=P)))),(P=X2?Z2(e,s):e5(e,s))&&(c=Ad(c,"onBeforeInput"),0<c.length&&(u=new Nf("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:c}),u.data=P))}av(m,t)})}function jo(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Ad(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=fo(e,s),i!=null&&n.unshift(jo(e,i,a)),i=fo(e,t),i!=null&&n.push(jo(e,i,a))),e=e.return}return n}function fa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Df(e,t,s,n,a){for(var i=t._reactName,o=[];s!==null&&s!==n;){var l=s,d=l.alternate,c=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&c!==null&&(l=c,a?(d=fo(s,i),d!=null&&o.unshift(jo(s,d,l))):a||(d=fo(s,i),d!=null&&o.push(jo(s,d,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var x5=/\r\n?/g,p5=/\u0000|\uFFFD/g;function Of(e){return(typeof e=="string"?e:""+e).replace(x5,`
`).replace(p5,"")}function Ul(e,t,s){if(t=Of(t),Of(e)!==t&&s)throw Error($(425))}function Ed(){}var Bm=null,Vm=null;function zm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $m=typeof setTimeout=="function"?setTimeout:void 0,f5=typeof clearTimeout=="function"?clearTimeout:void 0,Ff=typeof Promise=="function"?Promise:void 0,g5=typeof queueMicrotask=="function"?queueMicrotask:typeof Ff<"u"?function(e){return Ff.resolve(null).then(e).catch(b5)}:$m;function b5(e){setTimeout(function(){throw e})}function Nu(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),yo(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);yo(t)}function Zs(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Uf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var xi=Math.random().toString(36).slice(2),Fr="__reactFiber$"+xi,No="__reactProps$"+xi,fs="__reactContainer$"+xi,Wm="__reactEvents$"+xi,y5="__reactListeners$"+xi,v5="__reactHandles$"+xi;function Ln(e){var t=e[Fr];if(t)return t;for(var s=e.parentNode;s;){if(t=s[fs]||s[Fr]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Uf(e);e!==null;){if(s=e[Fr])return s;e=Uf(e)}return t}e=s,s=e.parentNode}return null}function Jo(e){return e=e[Fr]||e[fs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ca(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error($(33))}function Tc(e){return e[No]||null}var qm=[],Ta=-1;function gn(e){return{current:e}}function Ee(e){0>Ta||(e.current=qm[Ta],qm[Ta]=null,Ta--)}function _e(e,t){Ta++,qm[Ta]=e.current,e.current=t}var cn={},Tt=gn(cn),qt=gn(!1),Kn=cn;function Xa(e,t){var s=e.type.contextTypes;if(!s)return cn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ht(e){return e=e.childContextTypes,e!=null}function Md(){Ee(qt),Ee(Tt)}function Bf(e,t,s){if(Tt.current!==cn)throw Error($(168));_e(Tt,t),_e(qt,s)}function ov(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error($(108,n2(e)||"Unknown",a));return Ue({},s,n)}function Rd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||cn,Kn=Tt.current,_e(Tt,e),_e(qt,qt.current),!0}function Vf(e,t,s){var n=e.stateNode;if(!n)throw Error($(169));s?(e=ov(e,t,Kn),n.__reactInternalMemoizedMergedChildContext=e,Ee(qt),Ee(Tt),_e(Tt,e)):Ee(qt),_e(qt,s)}var rs=null,_c=!1,Su=!1;function lv(e){rs===null?rs=[e]:rs.push(e)}function w5(e){_c=!0,lv(e)}function bn(){if(!Su&&rs!==null){Su=!0;var e=0,t=je;try{var s=rs;for(je=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}rs=null,_c=!1}catch(a){throw rs!==null&&(rs=rs.slice(e+1)),My(tx,bn),a}finally{je=t,Su=!1}}return null}var _a=[],Ia=0,Ld=null,Dd=0,mr=[],hr=0,Yn=null,as=1,is="";function _n(e,t){_a[Ia++]=Dd,_a[Ia++]=Ld,Ld=e,Dd=t}function dv(e,t,s){mr[hr++]=as,mr[hr++]=is,mr[hr++]=Yn,Yn=e;var n=as;e=is;var a=32-Cr(n)-1;n&=~(1<<a),s+=1;var i=32-Cr(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,as=1<<32-Cr(t)+a|s<<a|n,is=i+e}else as=1<<i|s<<a|n,is=e}function cx(e){e.return!==null&&(_n(e,1),dv(e,1,0))}function ux(e){for(;e===Ld;)Ld=_a[--Ia],_a[Ia]=null,Dd=_a[--Ia],_a[Ia]=null;for(;e===Yn;)Yn=mr[--hr],mr[hr]=null,is=mr[--hr],mr[hr]=null,as=mr[--hr],mr[hr]=null}var Zt=null,Xt=null,Re=!1,Nr=null;function cv(e,t){var s=xr(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function zf(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Zt=e,Xt=Zs(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Zt=e,Xt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Yn!==null?{id:as,overflow:is}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=xr(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Zt=e,Xt=null,!0):!1;default:return!1}}function Hm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Gm(e){if(Re){var t=Xt;if(t){var s=t;if(!zf(e,t)){if(Hm(e))throw Error($(418));t=Zs(s.nextSibling);var n=Zt;t&&zf(e,t)?cv(n,s):(e.flags=e.flags&-4097|2,Re=!1,Zt=e)}}else{if(Hm(e))throw Error($(418));e.flags=e.flags&-4097|2,Re=!1,Zt=e}}}function $f(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Zt=e}function Bl(e){if(e!==Zt)return!1;if(!Re)return $f(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!zm(e.type,e.memoizedProps)),t&&(t=Xt)){if(Hm(e))throw uv(),Error($(418));for(;t;)cv(e,t),t=Zs(t.nextSibling)}if($f(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error($(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Xt=Zs(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Xt=null}}else Xt=Zt?Zs(e.stateNode.nextSibling):null;return!0}function uv(){for(var e=Xt;e;)e=Zs(e.nextSibling)}function Za(){Xt=Zt=null,Re=!1}function mx(e){Nr===null?Nr=[e]:Nr.push(e)}var k5=Ss.ReactCurrentBatchConfig;function Mi(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error($(309));var n=s.stateNode}if(!n)throw Error($(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error($(284));if(!s._owner)throw Error($(290,e))}return e}function Vl(e,t){throw e=Object.prototype.toString.call(t),Error($(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wf(e){var t=e._init;return t(e._payload)}function mv(e){function t(f,b){if(e){var y=f.deletions;y===null?(f.deletions=[b],f.flags|=16):y.push(b)}}function s(f,b){if(!e)return null;for(;b!==null;)t(f,b),b=b.sibling;return null}function n(f,b){for(f=new Map;b!==null;)b.key!==null?f.set(b.key,b):f.set(b.index,b),b=b.sibling;return f}function a(f,b){return f=sn(f,b),f.index=0,f.sibling=null,f}function i(f,b,y){return f.index=y,e?(y=f.alternate,y!==null?(y=y.index,y<b?(f.flags|=2,b):y):(f.flags|=2,b)):(f.flags|=1048576,b)}function o(f){return e&&f.alternate===null&&(f.flags|=2),f}function l(f,b,y,k){return b===null||b.tag!==6?(b=Eu(y,f.mode,k),b.return=f,b):(b=a(b,y),b.return=f,b)}function d(f,b,y,k){var j=y.type;return j===ka?u(f,b,y.props.children,k,y.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Fs&&Wf(j)===b.type)?(k=a(b,y.props),k.ref=Mi(f,b,y),k.return=f,k):(k=hd(y.type,y.key,y.props,null,f.mode,k),k.ref=Mi(f,b,y),k.return=f,k)}function c(f,b,y,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==y.containerInfo||b.stateNode.implementation!==y.implementation?(b=Mu(y,f.mode,k),b.return=f,b):(b=a(b,y.children||[]),b.return=f,b)}function u(f,b,y,k,j){return b===null||b.tag!==7?(b=Wn(y,f.mode,k,j),b.return=f,b):(b=a(b,y),b.return=f,b)}function m(f,b,y){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Eu(""+b,f.mode,y),b.return=f,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Pl:return y=hd(b.type,b.key,b.props,null,f.mode,y),y.ref=Mi(f,null,b),y.return=f,y;case wa:return b=Mu(b,f.mode,y),b.return=f,b;case Fs:var k=b._init;return m(f,k(b._payload),y)}if($i(b)||_i(b))return b=Wn(b,f.mode,y,null),b.return=f,b;Vl(f,b)}return null}function h(f,b,y,k){var j=b!==null?b.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return j!==null?null:l(f,b,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Pl:return y.key===j?d(f,b,y,k):null;case wa:return y.key===j?c(f,b,y,k):null;case Fs:return j=y._init,h(f,b,j(y._payload),k)}if($i(y)||_i(y))return j!==null?null:u(f,b,y,k,null);Vl(f,y)}return null}function x(f,b,y,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return f=f.get(y)||null,l(b,f,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Pl:return f=f.get(k.key===null?y:k.key)||null,d(b,f,k,j);case wa:return f=f.get(k.key===null?y:k.key)||null,c(b,f,k,j);case Fs:var S=k._init;return x(f,b,y,S(k._payload),j)}if($i(k)||_i(k))return f=f.get(y)||null,u(b,f,k,j,null);Vl(b,k)}return null}function g(f,b,y,k){for(var j=null,S=null,P=b,R=b=0,L=null;P!==null&&R<y.length;R++){P.index>R?(L=P,P=null):L=P.sibling;var N=h(f,P,y[R],k);if(N===null){P===null&&(P=L);break}e&&P&&N.alternate===null&&t(f,P),b=i(N,b,R),S===null?j=N:S.sibling=N,S=N,P=L}if(R===y.length)return s(f,P),Re&&_n(f,R),j;if(P===null){for(;R<y.length;R++)P=m(f,y[R],k),P!==null&&(b=i(P,b,R),S===null?j=P:S.sibling=P,S=P);return Re&&_n(f,R),j}for(P=n(f,P);R<y.length;R++)L=x(P,f,R,y[R],k),L!==null&&(e&&L.alternate!==null&&P.delete(L.key===null?R:L.key),b=i(L,b,R),S===null?j=L:S.sibling=L,S=L);return e&&P.forEach(function(I){return t(f,I)}),Re&&_n(f,R),j}function v(f,b,y,k){var j=_i(y);if(typeof j!="function")throw Error($(150));if(y=j.call(y),y==null)throw Error($(151));for(var S=j=null,P=b,R=b=0,L=null,N=y.next();P!==null&&!N.done;R++,N=y.next()){P.index>R?(L=P,P=null):L=P.sibling;var I=h(f,P,N.value,k);if(I===null){P===null&&(P=L);break}e&&P&&I.alternate===null&&t(f,P),b=i(I,b,R),S===null?j=I:S.sibling=I,S=I,P=L}if(N.done)return s(f,P),Re&&_n(f,R),j;if(P===null){for(;!N.done;R++,N=y.next())N=m(f,N.value,k),N!==null&&(b=i(N,b,R),S===null?j=N:S.sibling=N,S=N);return Re&&_n(f,R),j}for(P=n(f,P);!N.done;R++,N=y.next())N=x(P,f,R,N.value,k),N!==null&&(e&&N.alternate!==null&&P.delete(N.key===null?R:N.key),b=i(N,b,R),S===null?j=N:S.sibling=N,S=N);return e&&P.forEach(function(A){return t(f,A)}),Re&&_n(f,R),j}function w(f,b,y,k){if(typeof y=="object"&&y!==null&&y.type===ka&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Pl:e:{for(var j=y.key,S=b;S!==null;){if(S.key===j){if(j=y.type,j===ka){if(S.tag===7){s(f,S.sibling),b=a(S,y.props.children),b.return=f,f=b;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Fs&&Wf(j)===S.type){s(f,S.sibling),b=a(S,y.props),b.ref=Mi(f,S,y),b.return=f,f=b;break e}s(f,S);break}else t(f,S);S=S.sibling}y.type===ka?(b=Wn(y.props.children,f.mode,k,y.key),b.return=f,f=b):(k=hd(y.type,y.key,y.props,null,f.mode,k),k.ref=Mi(f,b,y),k.return=f,f=k)}return o(f);case wa:e:{for(S=y.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===y.containerInfo&&b.stateNode.implementation===y.implementation){s(f,b.sibling),b=a(b,y.children||[]),b.return=f,f=b;break e}else{s(f,b);break}else t(f,b);b=b.sibling}b=Mu(y,f.mode,k),b.return=f,f=b}return o(f);case Fs:return S=y._init,w(f,b,S(y._payload),k)}if($i(y))return g(f,b,y,k);if(_i(y))return v(f,b,y,k);Vl(f,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,b!==null&&b.tag===6?(s(f,b.sibling),b=a(b,y),b.return=f,f=b):(s(f,b),b=Eu(y,f.mode,k),b.return=f,f=b),o(f)):s(f,b)}return w}var ei=mv(!0),hv=mv(!1),Od=gn(null),Fd=null,Pa=null,hx=null;function xx(){hx=Pa=Fd=null}function px(e){var t=Od.current;Ee(Od),e._currentValue=t}function Qm(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function za(e,t){Fd=e,hx=Pa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(zt=!0),e.firstContext=null)}function gr(e){var t=e._currentValue;if(hx!==e)if(e={context:e,memoizedValue:t,next:null},Pa===null){if(Fd===null)throw Error($(308));Pa=e,Fd.dependencies={lanes:0,firstContext:e}}else Pa=Pa.next=e;return t}var Dn=null;function fx(e){Dn===null?Dn=[e]:Dn.push(e)}function xv(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,fx(t)):(s.next=a.next,a.next=s),t.interleaved=s,gs(e,n)}function gs(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Us=!1;function gx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pv(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function en(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,he&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,gs(e,s)}return a=n.interleaved,a===null?(t.next=t,fx(n)):(t.next=a.next,a.next=t),n.interleaved=t,gs(e,s)}function od(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,rx(e,s)}}function qf(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Ud(e,t,s,n){var a=e.updateQueue;Us=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var d=l,c=d.next;d.next=null,o===null?i=c:o.next=c,o=d;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=d))}if(i!==null){var m=a.baseState;o=0,u=c=d=null,l=i;do{var h=l.lane,x=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,x=s,v.tag){case 1:if(g=v.payload,typeof g=="function"){m=g.call(x,m,h);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(x,m,h):g,h==null)break e;m=Ue({},m,h);break e;case 2:Us=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else x={eventTime:x,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=x,d=m):u=u.next=x,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(d=m),a.baseState=d,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Xn|=o,e.lanes=o,e.memoizedState=m}}function Hf(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error($(191,a));a.call(n)}}}var Xo={},$r=gn(Xo),So=gn(Xo),Co=gn(Xo);function On(e){if(e===Xo)throw Error($(174));return e}function bx(e,t){switch(_e(Co,t),_e(So,e),_e($r,Xo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:_m(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=_m(t,e)}Ee($r),_e($r,t)}function ti(){Ee($r),Ee(So),Ee(Co)}function fv(e){On(Co.current);var t=On($r.current),s=_m(t,e.type);t!==s&&(_e(So,e),_e($r,s))}function yx(e){So.current===e&&(Ee($r),Ee(So))}var Le=gn(0);function Bd(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cu=[];function vx(){for(var e=0;e<Cu.length;e++)Cu[e]._workInProgressVersionPrimary=null;Cu.length=0}var ld=Ss.ReactCurrentDispatcher,Tu=Ss.ReactCurrentBatchConfig,Jn=0,Fe=null,Ye=null,rt=null,Vd=!1,Zi=!1,To=0,j5=0;function vt(){throw Error($(321))}function wx(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Pr(e[s],t[s]))return!1;return!0}function kx(e,t,s,n,a,i){if(Jn=i,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ld.current=e===null||e.memoizedState===null?T5:_5,e=s(n,a),Zi){i=0;do{if(Zi=!1,To=0,25<=i)throw Error($(301));i+=1,rt=Ye=null,t.updateQueue=null,ld.current=I5,e=s(n,a)}while(Zi)}if(ld.current=zd,t=Ye!==null&&Ye.next!==null,Jn=0,rt=Ye=Fe=null,Vd=!1,t)throw Error($(300));return e}function jx(){var e=To!==0;return To=0,e}function Or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?Fe.memoizedState=rt=e:rt=rt.next=e,rt}function br(){if(Ye===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=rt===null?Fe.memoizedState:rt.next;if(t!==null)rt=t,Ye=e;else{if(e===null)throw Error($(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},rt===null?Fe.memoizedState=rt=e:rt=rt.next=e}return rt}function _o(e,t){return typeof t=="function"?t(e):t}function _u(e){var t=br(),s=t.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=e;var n=Ye,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,d=null,c=i;do{var u=c.lane;if((Jn&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var m={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(l=d=m,o=n):d=d.next=m,Fe.lanes|=u,Xn|=u}c=c.next}while(c!==null&&c!==i);d===null?o=n:d.next=l,Pr(n,t.memoizedState)||(zt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Fe.lanes|=i,Xn|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Iu(e){var t=br(),s=t.queue;if(s===null)throw Error($(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Pr(i,t.memoizedState)||(zt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function gv(){}function bv(e,t){var s=Fe,n=br(),a=t(),i=!Pr(n.memoizedState,a);if(i&&(n.memoizedState=a,zt=!0),n=n.queue,Nx(wv.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||rt!==null&&rt.memoizedState.tag&1){if(s.flags|=2048,Io(9,vv.bind(null,s,n,a,t),void 0,null),at===null)throw Error($(349));Jn&30||yv(s,t,a)}return a}function yv(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function vv(e,t,s,n){t.value=s,t.getSnapshot=n,kv(t)&&jv(e)}function wv(e,t,s){return s(function(){kv(t)&&jv(e)})}function kv(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Pr(e,s)}catch{return!0}}function jv(e){var t=gs(e,1);t!==null&&Tr(t,e,1,-1)}function Gf(e){var t=Or();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:e},t.queue=e,e=e.dispatch=C5.bind(null,Fe,e),[t.memoizedState,e]}function Io(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function Nv(){return br().memoizedState}function dd(e,t,s,n){var a=Or();Fe.flags|=e,a.memoizedState=Io(1|t,s,void 0,n===void 0?null:n)}function Ic(e,t,s,n){var a=br();n=n===void 0?null:n;var i=void 0;if(Ye!==null){var o=Ye.memoizedState;if(i=o.destroy,n!==null&&wx(n,o.deps)){a.memoizedState=Io(t,s,i,n);return}}Fe.flags|=e,a.memoizedState=Io(1|t,s,i,n)}function Qf(e,t){return dd(8390656,8,e,t)}function Nx(e,t){return Ic(2048,8,e,t)}function Sv(e,t){return Ic(4,2,e,t)}function Cv(e,t){return Ic(4,4,e,t)}function Tv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _v(e,t,s){return s=s!=null?s.concat([e]):null,Ic(4,4,Tv.bind(null,t,e),s)}function Sx(){}function Iv(e,t){var s=br();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&wx(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function Pv(e,t){var s=br();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&wx(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function Av(e,t,s){return Jn&21?(Pr(s,t)||(s=Dy(),Fe.lanes|=s,Xn|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,zt=!0),e.memoizedState=s)}function N5(e,t){var s=je;je=s!==0&&4>s?s:4,e(!0);var n=Tu.transition;Tu.transition={};try{e(!1),t()}finally{je=s,Tu.transition=n}}function Ev(){return br().memoizedState}function S5(e,t,s){var n=rn(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Mv(e))Rv(t,s);else if(s=xv(e,t,s,n),s!==null){var a=Rt();Tr(s,e,n,a),Lv(s,t,n)}}function C5(e,t,s){var n=rn(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Mv(e))Rv(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,Pr(l,o)){var d=t.interleaved;d===null?(a.next=a,fx(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}s=xv(e,t,a,n),s!==null&&(a=Rt(),Tr(s,e,n,a),Lv(s,t,n))}}function Mv(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Rv(e,t){Zi=Vd=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Lv(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,rx(e,s)}}var zd={readContext:gr,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},T5={readContext:gr,useCallback:function(e,t){return Or().memoizedState=[e,t===void 0?null:t],e},useContext:gr,useEffect:Qf,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,dd(4194308,4,Tv.bind(null,t,e),s)},useLayoutEffect:function(e,t){return dd(4194308,4,e,t)},useInsertionEffect:function(e,t){return dd(4,2,e,t)},useMemo:function(e,t){var s=Or();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Or();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=S5.bind(null,Fe,e),[n.memoizedState,e]},useRef:function(e){var t=Or();return e={current:e},t.memoizedState=e},useState:Gf,useDebugValue:Sx,useDeferredValue:function(e){return Or().memoizedState=e},useTransition:function(){var e=Gf(!1),t=e[0];return e=N5.bind(null,e[1]),Or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Fe,a=Or();if(Re){if(s===void 0)throw Error($(407));s=s()}else{if(s=t(),at===null)throw Error($(349));Jn&30||yv(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Qf(wv.bind(null,n,i,e),[e]),n.flags|=2048,Io(9,vv.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=Or(),t=at.identifierPrefix;if(Re){var s=is,n=as;s=(n&~(1<<32-Cr(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=To++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=j5++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},_5={readContext:gr,useCallback:Iv,useContext:gr,useEffect:Nx,useImperativeHandle:_v,useInsertionEffect:Sv,useLayoutEffect:Cv,useMemo:Pv,useReducer:_u,useRef:Nv,useState:function(){return _u(_o)},useDebugValue:Sx,useDeferredValue:function(e){var t=br();return Av(t,Ye.memoizedState,e)},useTransition:function(){var e=_u(_o)[0],t=br().memoizedState;return[e,t]},useMutableSource:gv,useSyncExternalStore:bv,useId:Ev,unstable_isNewReconciler:!1},I5={readContext:gr,useCallback:Iv,useContext:gr,useEffect:Nx,useImperativeHandle:_v,useInsertionEffect:Sv,useLayoutEffect:Cv,useMemo:Pv,useReducer:Iu,useRef:Nv,useState:function(){return Iu(_o)},useDebugValue:Sx,useDeferredValue:function(e){var t=br();return Ye===null?t.memoizedState=e:Av(t,Ye.memoizedState,e)},useTransition:function(){var e=Iu(_o)[0],t=br().memoizedState;return[e,t]},useMutableSource:gv,useSyncExternalStore:bv,useId:Ev,unstable_isNewReconciler:!1};function wr(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Km(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Ue({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Pc={isMounted:function(e){return(e=e._reactInternals)?la(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=Rt(),a=rn(e),i=cs(n,a);i.payload=t,s!=null&&(i.callback=s),t=en(e,i,a),t!==null&&(Tr(t,e,a,n),od(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=Rt(),a=rn(e),i=cs(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=en(e,i,a),t!==null&&(Tr(t,e,a,n),od(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Rt(),n=rn(e),a=cs(s,n);a.tag=2,t!=null&&(a.callback=t),t=en(e,a,n),t!==null&&(Tr(t,e,n,s),od(t,e,n))}};function Kf(e,t,s,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!wo(s,n)||!wo(a,i):!0}function Dv(e,t,s){var n=!1,a=cn,i=t.contextType;return typeof i=="object"&&i!==null?i=gr(i):(a=Ht(t)?Kn:Tt.current,n=t.contextTypes,i=(n=n!=null)?Xa(e,a):cn),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Pc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Yf(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&Pc.enqueueReplaceState(t,t.state,null)}function Ym(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},gx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=gr(i):(i=Ht(t)?Kn:Tt.current,a.context=Xa(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Km(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Pc.enqueueReplaceState(a,a.state,null),Ud(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function ri(e,t){try{var s="",n=t;do s+=s2(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Pu(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Jm(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var P5=typeof WeakMap=="function"?WeakMap:Map;function Ov(e,t,s){s=cs(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Wd||(Wd=!0,oh=n),Jm(e,t)},s}function Fv(e,t,s){s=cs(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Jm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Jm(e,t),typeof n!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Jf(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new P5;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=W5.bind(null,e,t,s),t.then(e,e))}function Xf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zf(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=cs(-1,1),t.tag=2,en(s,t,1))),s.lanes|=1),e)}var A5=Ss.ReactCurrentOwner,zt=!1;function At(e,t,s,n){t.child=e===null?hv(t,null,s,n):ei(t,e.child,s,n)}function eg(e,t,s,n,a){s=s.render;var i=t.ref;return za(t,a),n=kx(e,t,s,n,i,a),s=jx(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bs(e,t,a)):(Re&&s&&cx(t),t.flags|=1,At(e,t,n,a),t.child)}function tg(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!Mx(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,Uv(e,t,i,n,a)):(e=hd(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:wo,s(o,n)&&e.ref===t.ref)return bs(e,t,a)}return t.flags|=1,e=sn(i,n),e.ref=t.ref,e.return=t,t.child=e}function Uv(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(wo(i,n)&&e.ref===t.ref)if(zt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(zt=!0);else return t.lanes=e.lanes,bs(e,t,a)}return Xm(e,t,s,n,a)}function Bv(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(Ea,Jt),Jt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(Ea,Jt),Jt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,_e(Ea,Jt),Jt|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,_e(Ea,Jt),Jt|=n;return At(e,t,a,s),t.child}function Vv(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Xm(e,t,s,n,a){var i=Ht(s)?Kn:Tt.current;return i=Xa(t,i),za(t,a),s=kx(e,t,s,n,i,a),n=jx(),e!==null&&!zt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,bs(e,t,a)):(Re&&n&&cx(t),t.flags|=1,At(e,t,s,a),t.child)}function rg(e,t,s,n,a){if(Ht(s)){var i=!0;Rd(t)}else i=!1;if(za(t,a),t.stateNode===null)cd(e,t),Dv(t,s,n),Ym(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var d=o.context,c=s.contextType;typeof c=="object"&&c!==null?c=gr(c):(c=Ht(s)?Kn:Tt.current,c=Xa(t,c));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||d!==c)&&Yf(t,o,n,c),Us=!1;var h=t.memoizedState;o.state=h,Ud(t,n,o,a),d=t.memoizedState,l!==n||h!==d||qt.current||Us?(typeof u=="function"&&(Km(t,s,u,n),d=t.memoizedState),(l=Us||Kf(t,s,l,n,h,d,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,pv(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:wr(t.type,l),o.props=c,m=t.pendingProps,h=o.context,d=s.contextType,typeof d=="object"&&d!==null?d=gr(d):(d=Ht(s)?Kn:Tt.current,d=Xa(t,d));var x=s.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==d)&&Yf(t,o,n,d),Us=!1,h=t.memoizedState,o.state=h,Ud(t,n,o,a);var g=t.memoizedState;l!==m||h!==g||qt.current||Us?(typeof x=="function"&&(Km(t,s,x,n),g=t.memoizedState),(c=Us||Kf(t,s,c,n,h,g,d)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=d,n=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Zm(e,t,s,n,i,a)}function Zm(e,t,s,n,a,i){Vv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Vf(t,s,!1),bs(e,t,i);n=t.stateNode,A5.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=ei(t,e.child,null,i),t.child=ei(t,null,l,i)):At(e,t,l,i),t.memoizedState=n.state,a&&Vf(t,s,!0),t.child}function zv(e){var t=e.stateNode;t.pendingContext?Bf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bf(e,t.context,!1),bx(e,t.containerInfo)}function sg(e,t,s,n,a){return Za(),mx(a),t.flags|=256,At(e,t,s,n),t.child}var eh={dehydrated:null,treeContext:null,retryLane:0};function th(e){return{baseLanes:e,cachePool:null,transitions:null}}function $v(e,t,s){var n=t.pendingProps,a=Le.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),_e(Le,a&1),e===null)return Gm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mc(o,n,0,null),e=Wn(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=th(s),t.memoizedState=eh,e):Cx(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return E5(e,t,o,n,l,a,s);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=sn(a,d),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=sn(l,i):(i=Wn(i,o,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?th(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=eh,n}return i=e.child,e=i.sibling,n=sn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function Cx(e,t){return t=Mc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zl(e,t,s,n){return n!==null&&mx(n),ei(t,e.child,null,s),e=Cx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function E5(e,t,s,n,a,i,o){if(s)return t.flags&256?(t.flags&=-257,n=Pu(Error($(422))),zl(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Mc({mode:"visible",children:n.children},a,0,null),i=Wn(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&ei(t,e.child,null,o),t.child.memoizedState=th(o),t.memoizedState=eh,i);if(!(t.mode&1))return zl(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error($(419)),n=Pu(i,n,void 0),zl(e,t,o,n)}if(l=(o&e.childLanes)!==0,zt||l){if(n=at,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,gs(e,a),Tr(n,e,a,-1))}return Ex(),n=Pu(Error($(421))),zl(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=q5.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Xt=Zs(a.nextSibling),Zt=t,Re=!0,Nr=null,e!==null&&(mr[hr++]=as,mr[hr++]=is,mr[hr++]=Yn,as=e.id,is=e.overflow,Yn=t),t=Cx(t,n.children),t.flags|=4096,t)}function ng(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Qm(e.return,t,s)}function Au(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function Wv(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(At(e,t,n.children,s),n=Le.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ng(e,s,t);else if(e.tag===19)ng(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_e(Le,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&Bd(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),Au(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Bd(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}Au(t,!0,s,null,i);break;case"together":Au(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Xn|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error($(153));if(t.child!==null){for(e=t.child,s=sn(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=sn(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function M5(e,t,s){switch(t.tag){case 3:zv(t),Za();break;case 5:fv(t);break;case 1:Ht(t.type)&&Rd(t);break;case 4:bx(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;_e(Od,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(_e(Le,Le.current&1),t.flags|=128,null):s&t.child.childLanes?$v(e,t,s):(_e(Le,Le.current&1),e=bs(e,t,s),e!==null?e.sibling:null);_e(Le,Le.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return Wv(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),_e(Le,Le.current),n)break;return null;case 22:case 23:return t.lanes=0,Bv(e,t,s)}return bs(e,t,s)}var qv,rh,Hv,Gv;qv=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};rh=function(){};Hv=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,On($r.current);var i=null;switch(s){case"input":a=Nm(e,a),n=Nm(e,n),i=[];break;case"select":a=Ue({},a,{value:void 0}),n=Ue({},n,{value:void 0}),i=[];break;case"textarea":a=Tm(e,a),n=Tm(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ed)}Im(s,n);var o;s=null;for(c in a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var l=a[c];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var d=n[c];if(l=a!=null?a[c]:void 0,n.hasOwnProperty(c)&&d!==l&&(d!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(s||(s={}),s[o]=d[o])}else s||(i||(i=[]),i.push(c,s)),s=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xo.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&Ae("scroll",e),i||l===d||(i=[])):(i=i||[]).push(c,d))}s&&(i=i||[]).push("style",s);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Gv=function(e,t,s,n){s!==n&&(t.flags|=4)};function Ri(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function R5(e,t,s){var n=t.pendingProps;switch(ux(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return Ht(t.type)&&Md(),wt(t),null;case 3:return n=t.stateNode,ti(),Ee(qt),Ee(Tt),vx(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Bl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nr!==null&&(ch(Nr),Nr=null))),rh(e,t),wt(t),null;case 5:yx(t);var a=On(Co.current);if(s=t.type,e!==null&&t.stateNode!=null)Hv(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error($(166));return wt(t),null}if(e=On($r.current),Bl(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[Fr]=t,n[No]=i,e=(t.mode&1)!==0,s){case"dialog":Ae("cancel",n),Ae("close",n);break;case"iframe":case"object":case"embed":Ae("load",n);break;case"video":case"audio":for(a=0;a<qi.length;a++)Ae(qi[a],n);break;case"source":Ae("error",n);break;case"img":case"image":case"link":Ae("error",n),Ae("load",n);break;case"details":Ae("toggle",n);break;case"input":hf(n,i),Ae("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",n);break;case"textarea":pf(n,i),Ae("invalid",n)}Im(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ul(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ul(n.textContent,l,e),a=["children",""+l]):xo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ae("scroll",n)}switch(s){case"input":Al(n),xf(n,i,!0);break;case"textarea":Al(n),ff(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Ed)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wy(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Fr]=t,e[No]=n,qv(e,t,!1,!1),t.stateNode=e;e:{switch(o=Pm(s,n),s){case"dialog":Ae("cancel",e),Ae("close",e),a=n;break;case"iframe":case"object":case"embed":Ae("load",e),a=n;break;case"video":case"audio":for(a=0;a<qi.length;a++)Ae(qi[a],e);a=n;break;case"source":Ae("error",e),a=n;break;case"img":case"image":case"link":Ae("error",e),Ae("load",e),a=n;break;case"details":Ae("toggle",e),a=n;break;case"input":hf(e,n),a=Nm(e,n),Ae("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ue({},n,{value:void 0}),Ae("invalid",e);break;case"textarea":pf(e,n),a=Tm(e,n),Ae("invalid",e);break;default:a=n}Im(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="style"?Ny(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&ky(e,d)):i==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&po(e,d):typeof d=="number"&&po(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xo.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Ae("scroll",e):d!=null&&Yh(e,i,d,o))}switch(s){case"input":Al(e),xf(e,n,!1);break;case"textarea":Al(e),ff(e);break;case"option":n.value!=null&&e.setAttribute("value",""+dn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Fa(e,!!n.multiple,i,!1):n.defaultValue!=null&&Fa(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ed)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)Gv(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error($(166));if(s=On(Co.current),On($r.current),Bl(t)){if(n=t.stateNode,s=t.memoizedProps,n[Fr]=t,(i=n.nodeValue!==s)&&(e=Zt,e!==null))switch(e.tag){case 3:Ul(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ul(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Fr]=t,t.stateNode=n}return wt(t),null;case 13:if(Ee(Le),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&Xt!==null&&t.mode&1&&!(t.flags&128))uv(),Za(),t.flags|=98560,i=!1;else if(i=Bl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error($(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error($(317));i[Fr]=t}else Za(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;wt(t),i=!1}else Nr!==null&&(ch(Nr),Nr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Xe===0&&(Xe=3):Ex())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return ti(),rh(e,t),e===null&&ko(t.stateNode.containerInfo),wt(t),null;case 10:return px(t.type._context),wt(t),null;case 17:return Ht(t.type)&&Md(),wt(t),null;case 19:if(Ee(Le),i=t.memoizedState,i===null)return wt(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ri(i,!1);else{if(Xe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Bd(e),o!==null){for(t.flags|=128,Ri(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return _e(Le,Le.current&1|2),t.child}e=e.sibling}i.tail!==null&&ze()>si&&(t.flags|=128,n=!0,Ri(i,!1),t.lanes=4194304)}else{if(!n)if(e=Bd(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ri(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return wt(t),null}else 2*ze()-i.renderingStartTime>si&&s!==1073741824&&(t.flags|=128,n=!0,Ri(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ze(),t.sibling=null,s=Le.current,_e(Le,n?s&1|2:s&1),t):(wt(t),null);case 22:case 23:return Ax(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Jt&1073741824&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error($(156,t.tag))}function L5(e,t){switch(ux(t),t.tag){case 1:return Ht(t.type)&&Md(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ti(),Ee(qt),Ee(Tt),vx(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yx(t),null;case 13:if(Ee(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error($(340));Za()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Le),null;case 4:return ti(),null;case 10:return px(t.type._context),null;case 22:case 23:return Ax(),null;case 24:return null;default:return null}}var $l=!1,jt=!1,D5=typeof WeakSet=="function"?WeakSet:Set,K=null;function Aa(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ve(e,t,n)}else s.current=null}function sh(e,t,s){try{s()}catch(n){Ve(e,t,n)}}var ag=!1;function O5(e,t){if(Bm=Id,e=Xy(),dx(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,d=-1,c=0,u=0,m=e,h=null;t:for(;;){for(var x;m!==s||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(d=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===e)break t;if(h===s&&++c===a&&(l=o),h===i&&++u===n&&(d=o),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}s=l===-1||d===-1?null:{start:l,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(Vm={focusedElem:e,selectionRange:s},Id=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,w=g.memoizedState,f=t.stateNode,b=f.getSnapshotBeforeUpdate(t.elementType===t.type?v:wr(t.type,v),w);f.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(k){Ve(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return g=ag,ag=!1,g}function eo(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&sh(t,s,i)}a=a.next}while(a!==n)}}function Ac(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function nh(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Qv(e){var t=e.alternate;t!==null&&(e.alternate=null,Qv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fr],delete t[No],delete t[Wm],delete t[y5],delete t[v5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kv(e){return e.tag===5||e.tag===3||e.tag===4}function ig(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ah(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ed));else if(n!==4&&(e=e.child,e!==null))for(ah(e,t,s),e=e.sibling;e!==null;)ah(e,t,s),e=e.sibling}function ih(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ih(e,t,s),e=e.sibling;e!==null;)ih(e,t,s),e=e.sibling}var dt=null,kr=!1;function Es(e,t,s){for(s=s.child;s!==null;)Yv(e,t,s),s=s.sibling}function Yv(e,t,s){if(zr&&typeof zr.onCommitFiberUnmount=="function")try{zr.onCommitFiberUnmount(jc,s)}catch{}switch(s.tag){case 5:jt||Aa(s,t);case 6:var n=dt,a=kr;dt=null,Es(e,t,s),dt=n,kr=a,dt!==null&&(kr?(e=dt,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):dt.removeChild(s.stateNode));break;case 18:dt!==null&&(kr?(e=dt,s=s.stateNode,e.nodeType===8?Nu(e.parentNode,s):e.nodeType===1&&Nu(e,s),yo(e)):Nu(dt,s.stateNode));break;case 4:n=dt,a=kr,dt=s.stateNode.containerInfo,kr=!0,Es(e,t,s),dt=n,kr=a;break;case 0:case 11:case 14:case 15:if(!jt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sh(s,t,o),a=a.next}while(a!==n)}Es(e,t,s);break;case 1:if(!jt&&(Aa(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ve(s,t,l)}Es(e,t,s);break;case 21:Es(e,t,s);break;case 22:s.mode&1?(jt=(n=jt)||s.memoizedState!==null,Es(e,t,s),jt=n):Es(e,t,s);break;default:Es(e,t,s)}}function og(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new D5),t.forEach(function(n){var a=H5.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function vr(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:dt=l.stateNode,kr=!1;break e;case 3:dt=l.stateNode.containerInfo,kr=!0;break e;case 4:dt=l.stateNode.containerInfo,kr=!0;break e}l=l.return}if(dt===null)throw Error($(160));Yv(i,o,a),dt=null,kr=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(c){Ve(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Jv(t,e),t=t.sibling}function Jv(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vr(t,e),Rr(e),n&4){try{eo(3,e,e.return),Ac(3,e)}catch(v){Ve(e,e.return,v)}try{eo(5,e,e.return)}catch(v){Ve(e,e.return,v)}}break;case 1:vr(t,e),Rr(e),n&512&&s!==null&&Aa(s,s.return);break;case 5:if(vr(t,e),Rr(e),n&512&&s!==null&&Aa(s,s.return),e.flags&32){var a=e.stateNode;try{po(a,"")}catch(v){Ve(e,e.return,v)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&yy(a,i),Pm(l,o);var c=Pm(l,i);for(o=0;o<d.length;o+=2){var u=d[o],m=d[o+1];u==="style"?Ny(a,m):u==="dangerouslySetInnerHTML"?ky(a,m):u==="children"?po(a,m):Yh(a,u,m,c)}switch(l){case"input":Sm(a,i);break;case"textarea":vy(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Fa(a,!!i.multiple,x,!1):h!==!!i.multiple&&(i.defaultValue!=null?Fa(a,!!i.multiple,i.defaultValue,!0):Fa(a,!!i.multiple,i.multiple?[]:"",!1))}a[No]=i}catch(v){Ve(e,e.return,v)}}break;case 6:if(vr(t,e),Rr(e),n&4){if(e.stateNode===null)throw Error($(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){Ve(e,e.return,v)}}break;case 3:if(vr(t,e),Rr(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{yo(t.containerInfo)}catch(v){Ve(e,e.return,v)}break;case 4:vr(t,e),Rr(e);break;case 13:vr(t,e),Rr(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Ix=ze())),n&4&&og(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(jt=(c=jt)||u,vr(t,e),jt=c):vr(t,e),Rr(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(K=e,u=e.child;u!==null;){for(m=K=u;K!==null;){switch(h=K,x=h.child,h.tag){case 0:case 11:case 14:case 15:eo(4,h,h.return);break;case 1:Aa(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,s=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Ve(n,s,v)}}break;case 5:Aa(h,h.return);break;case 22:if(h.memoizedState!==null){dg(m);continue}}x!==null?(x.return=h,K=x):dg(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=jy("display",o))}catch(v){Ve(e,e.return,v)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(v){Ve(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:vr(t,e),Rr(e),n&4&&og(e);break;case 21:break;default:vr(t,e),Rr(e)}}function Rr(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Kv(s)){var n=s;break e}s=s.return}throw Error($(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(po(a,""),n.flags&=-33);var i=ig(e);ih(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=ig(e);ah(e,l,o);break;default:throw Error($(161))}}catch(d){Ve(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function F5(e,t,s){K=e,Xv(e)}function Xv(e,t,s){for(var n=(e.mode&1)!==0;K!==null;){var a=K,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||$l;if(!o){var l=a.alternate,d=l!==null&&l.memoizedState!==null||jt;l=$l;var c=jt;if($l=o,(jt=d)&&!c)for(K=a;K!==null;)o=K,d=o.child,o.tag===22&&o.memoizedState!==null?cg(a):d!==null?(d.return=o,K=d):cg(a);for(;i!==null;)K=i,Xv(i),i=i.sibling;K=a,$l=l,jt=c}lg(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,K=i):lg(e)}}function lg(e){for(;K!==null;){var t=K;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:jt||Ac(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!jt)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:wr(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Hf(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Hf(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&yo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}jt||t.flags&512&&nh(t)}catch(h){Ve(t,t.return,h)}}if(t===e){K=null;break}if(s=t.sibling,s!==null){s.return=t.return,K=s;break}K=t.return}}function dg(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var s=t.sibling;if(s!==null){s.return=t.return,K=s;break}K=t.return}}function cg(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ac(4,t)}catch(d){Ve(t,s,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){Ve(t,a,d)}}var i=t.return;try{nh(t)}catch(d){Ve(t,i,d)}break;case 5:var o=t.return;try{nh(t)}catch(d){Ve(t,o,d)}}}catch(d){Ve(t,t.return,d)}if(t===e){K=null;break}var l=t.sibling;if(l!==null){l.return=t.return,K=l;break}K=t.return}}var U5=Math.ceil,$d=Ss.ReactCurrentDispatcher,Tx=Ss.ReactCurrentOwner,pr=Ss.ReactCurrentBatchConfig,he=0,at=null,Ke=null,ht=0,Jt=0,Ea=gn(0),Xe=0,Po=null,Xn=0,Ec=0,_x=0,to=null,Vt=null,Ix=0,si=1/0,es=null,Wd=!1,oh=null,tn=null,Wl=!1,Gs=null,qd=0,ro=0,lh=null,ud=-1,md=0;function Rt(){return he&6?ze():ud!==-1?ud:ud=ze()}function rn(e){return e.mode&1?he&2&&ht!==0?ht&-ht:k5.transition!==null?(md===0&&(md=Dy()),md):(e=je,e!==0||(e=window.event,e=e===void 0?16:$y(e.type)),e):1}function Tr(e,t,s,n){if(50<ro)throw ro=0,lh=null,Error($(185));Ko(e,s,n),(!(he&2)||e!==at)&&(e===at&&(!(he&2)&&(Ec|=s),Xe===4&&zs(e,ht)),Gt(e,n),s===1&&he===0&&!(t.mode&1)&&(si=ze()+500,_c&&bn()))}function Gt(e,t){var s=e.callbackNode;k2(e,t);var n=_d(e,e===at?ht:0);if(n===0)s!==null&&yf(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&yf(s),t===1)e.tag===0?w5(ug.bind(null,e)):lv(ug.bind(null,e)),g5(function(){!(he&6)&&bn()}),s=null;else{switch(Oy(n)){case 1:s=tx;break;case 4:s=Ry;break;case 16:s=Td;break;case 536870912:s=Ly;break;default:s=Td}s=iw(s,Zv.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Zv(e,t){if(ud=-1,md=0,he&6)throw Error($(327));var s=e.callbackNode;if($a()&&e.callbackNode!==s)return null;var n=_d(e,e===at?ht:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Hd(e,n);else{t=n;var a=he;he|=2;var i=tw();(at!==e||ht!==t)&&(es=null,si=ze()+500,$n(e,t));do try{z5();break}catch(l){ew(e,l)}while(!0);xx(),$d.current=i,he=a,Ke!==null?t=0:(at=null,ht=0,t=Xe)}if(t!==0){if(t===2&&(a=Lm(e),a!==0&&(n=a,t=dh(e,a))),t===1)throw s=Po,$n(e,0),zs(e,n),Gt(e,ze()),s;if(t===6)zs(e,n);else{if(a=e.current.alternate,!(n&30)&&!B5(a)&&(t=Hd(e,n),t===2&&(i=Lm(e),i!==0&&(n=i,t=dh(e,i))),t===1))throw s=Po,$n(e,0),zs(e,n),Gt(e,ze()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error($(345));case 2:In(e,Vt,es);break;case 3:if(zs(e,n),(n&130023424)===n&&(t=Ix+500-ze(),10<t)){if(_d(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Rt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=$m(In.bind(null,e,Vt,es),t);break}In(e,Vt,es);break;case 4:if(zs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-Cr(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*U5(n/1960))-n,10<n){e.timeoutHandle=$m(In.bind(null,e,Vt,es),n);break}In(e,Vt,es);break;case 5:In(e,Vt,es);break;default:throw Error($(329))}}}return Gt(e,ze()),e.callbackNode===s?Zv.bind(null,e):null}function dh(e,t){var s=to;return e.current.memoizedState.isDehydrated&&($n(e,t).flags|=256),e=Hd(e,t),e!==2&&(t=Vt,Vt=s,t!==null&&ch(t)),e}function ch(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function B5(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Pr(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zs(e,t){for(t&=~_x,t&=~Ec,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Cr(t),n=1<<s;e[s]=-1,t&=~n}}function ug(e){if(he&6)throw Error($(327));$a();var t=_d(e,0);if(!(t&1))return Gt(e,ze()),null;var s=Hd(e,t);if(e.tag!==0&&s===2){var n=Lm(e);n!==0&&(t=n,s=dh(e,n))}if(s===1)throw s=Po,$n(e,0),zs(e,t),Gt(e,ze()),s;if(s===6)throw Error($(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,In(e,Vt,es),Gt(e,ze()),null}function Px(e,t){var s=he;he|=1;try{return e(t)}finally{he=s,he===0&&(si=ze()+500,_c&&bn())}}function Zn(e){Gs!==null&&Gs.tag===0&&!(he&6)&&$a();var t=he;he|=1;var s=pr.transition,n=je;try{if(pr.transition=null,je=1,e)return e()}finally{je=n,pr.transition=s,he=t,!(he&6)&&bn()}}function Ax(){Jt=Ea.current,Ee(Ea)}function $n(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,f5(s)),Ke!==null)for(s=Ke.return;s!==null;){var n=s;switch(ux(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Md();break;case 3:ti(),Ee(qt),Ee(Tt),vx();break;case 5:yx(n);break;case 4:ti();break;case 13:Ee(Le);break;case 19:Ee(Le);break;case 10:px(n.type._context);break;case 22:case 23:Ax()}s=s.return}if(at=e,Ke=e=sn(e.current,null),ht=Jt=t,Xe=0,Po=null,_x=Ec=Xn=0,Vt=to=null,Dn!==null){for(t=0;t<Dn.length;t++)if(s=Dn[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}s.pending=n}Dn=null}return e}function ew(e,t){do{var s=Ke;try{if(xx(),ld.current=zd,Vd){for(var n=Fe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Vd=!1}if(Jn=0,rt=Ye=Fe=null,Zi=!1,To=0,Tx.current=null,s===null||s.return===null){Xe=1,Po=t,Ke=null;break}e:{var i=e,o=s.return,l=s,d=t;if(t=ht,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Xf(o);if(x!==null){x.flags&=-257,Zf(x,o,l,i,t),x.mode&1&&Jf(i,c,t),t=x,d=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(d),t.updateQueue=v}else g.add(d);break e}else{if(!(t&1)){Jf(i,c,t),Ex();break e}d=Error($(426))}}else if(Re&&l.mode&1){var w=Xf(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Zf(w,o,l,i,t),mx(ri(d,l));break e}}i=d=ri(d,l),Xe!==4&&(Xe=2),to===null?to=[i]:to.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var f=Ov(i,d,t);qf(i,f);break e;case 1:l=d;var b=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(tn===null||!tn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=Fv(i,l,t);qf(i,k);break e}}i=i.return}while(i!==null)}sw(s)}catch(j){t=j,Ke===s&&s!==null&&(Ke=s=s.return);continue}break}while(!0)}function tw(){var e=$d.current;return $d.current=zd,e===null?zd:e}function Ex(){(Xe===0||Xe===3||Xe===2)&&(Xe=4),at===null||!(Xn&268435455)&&!(Ec&268435455)||zs(at,ht)}function Hd(e,t){var s=he;he|=2;var n=tw();(at!==e||ht!==t)&&(es=null,$n(e,t));do try{V5();break}catch(a){ew(e,a)}while(!0);if(xx(),he=s,$d.current=n,Ke!==null)throw Error($(261));return at=null,ht=0,Xe}function V5(){for(;Ke!==null;)rw(Ke)}function z5(){for(;Ke!==null&&!h2();)rw(Ke)}function rw(e){var t=aw(e.alternate,e,Jt);e.memoizedProps=e.pendingProps,t===null?sw(e):Ke=t,Tx.current=null}function sw(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=L5(s,t),s!==null){s.flags&=32767,Ke=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xe=6,Ke=null;return}}else if(s=R5(s,t,Jt),s!==null){Ke=s;return}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Xe===0&&(Xe=5)}function In(e,t,s){var n=je,a=pr.transition;try{pr.transition=null,je=1,$5(e,t,s,n)}finally{pr.transition=a,je=n}return null}function $5(e,t,s,n){do $a();while(Gs!==null);if(he&6)throw Error($(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error($(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(j2(e,i),e===at&&(Ke=at=null,ht=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Wl||(Wl=!0,iw(Td,function(){return $a(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=pr.transition,pr.transition=null;var o=je;je=1;var l=he;he|=4,Tx.current=null,O5(e,s),Jv(s,e),d5(Vm),Id=!!Bm,Vm=Bm=null,e.current=s,F5(s),x2(),he=l,je=o,pr.transition=i}else e.current=s;if(Wl&&(Wl=!1,Gs=e,qd=a),i=e.pendingLanes,i===0&&(tn=null),g2(s.stateNode),Gt(e,ze()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Wd)throw Wd=!1,e=oh,oh=null,e;return qd&1&&e.tag!==0&&$a(),i=e.pendingLanes,i&1?e===lh?ro++:(ro=0,lh=e):ro=0,bn(),null}function $a(){if(Gs!==null){var e=Oy(qd),t=pr.transition,s=je;try{if(pr.transition=null,je=16>e?16:e,Gs===null)var n=!1;else{if(e=Gs,Gs=null,qd=0,he&6)throw Error($(331));var a=he;for(he|=4,K=e.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var d=0;d<l.length;d++){var c=l[d];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:eo(8,u,i)}var m=u.child;if(m!==null)m.return=u,K=m;else for(;K!==null;){u=K;var h=u.sibling,x=u.return;if(Qv(u),u===c){K=null;break}if(h!==null){h.return=x,K=h;break}K=x}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:eo(9,i,i.return)}var f=i.sibling;if(f!==null){f.return=i.return,K=f;break e}K=i.return}}var b=e.current;for(K=b;K!==null;){o=K;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,K=y;else e:for(o=b;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ac(9,l)}}catch(j){Ve(l,l.return,j)}if(l===o){K=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,K=k;break e}K=l.return}}if(he=a,bn(),zr&&typeof zr.onPostCommitFiberRoot=="function")try{zr.onPostCommitFiberRoot(jc,e)}catch{}n=!0}return n}finally{je=s,pr.transition=t}}return!1}function mg(e,t,s){t=ri(s,t),t=Ov(e,t,1),e=en(e,t,1),t=Rt(),e!==null&&(Ko(e,1,t),Gt(e,t))}function Ve(e,t,s){if(e.tag===3)mg(e,e,s);else for(;t!==null;){if(t.tag===3){mg(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(tn===null||!tn.has(n))){e=ri(s,e),e=Fv(t,e,1),t=en(t,e,1),e=Rt(),t!==null&&(Ko(t,1,e),Gt(t,e));break}}t=t.return}}function W5(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&s,at===e&&(ht&s)===s&&(Xe===4||Xe===3&&(ht&130023424)===ht&&500>ze()-Ix?$n(e,0):_x|=s),Gt(e,t)}function nw(e,t){t===0&&(e.mode&1?(t=Rl,Rl<<=1,!(Rl&130023424)&&(Rl=4194304)):t=1);var s=Rt();e=gs(e,t),e!==null&&(Ko(e,t,s),Gt(e,s))}function q5(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),nw(e,s)}function H5(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error($(314))}n!==null&&n.delete(t),nw(e,s)}var aw;aw=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||qt.current)zt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return zt=!1,M5(e,t,s);zt=!!(e.flags&131072)}else zt=!1,Re&&t.flags&1048576&&dv(t,Dd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;cd(e,t),e=t.pendingProps;var a=Xa(t,Tt.current);za(t,s),a=kx(null,t,n,e,a,s);var i=jx();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ht(n)?(i=!0,Rd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,gx(t),a.updater=Pc,t.stateNode=a,a._reactInternals=t,Ym(t,n,e,s),t=Zm(null,t,n,!0,i,s)):(t.tag=0,Re&&i&&cx(t),At(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(cd(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=Q5(n),e=wr(n,e),a){case 0:t=Xm(null,t,n,e,s);break e;case 1:t=rg(null,t,n,e,s);break e;case 11:t=eg(null,t,n,e,s);break e;case 14:t=tg(null,t,n,wr(n.type,e),s);break e}throw Error($(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wr(n,a),Xm(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wr(n,a),rg(e,t,n,a,s);case 3:e:{if(zv(t),e===null)throw Error($(387));n=t.pendingProps,i=t.memoizedState,a=i.element,pv(e,t),Ud(t,n,null,s);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=ri(Error($(423)),t),t=sg(e,t,n,s,a);break e}else if(n!==a){a=ri(Error($(424)),t),t=sg(e,t,n,s,a);break e}else for(Xt=Zs(t.stateNode.containerInfo.firstChild),Zt=t,Re=!0,Nr=null,s=hv(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Za(),n===a){t=bs(e,t,s);break e}At(e,t,n,s)}t=t.child}return t;case 5:return fv(t),e===null&&Gm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,zm(n,a)?o=null:i!==null&&zm(n,i)&&(t.flags|=32),Vv(e,t),At(e,t,o,s),t.child;case 6:return e===null&&Gm(t),null;case 13:return $v(e,t,s);case 4:return bx(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ei(t,null,n,s):At(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wr(n,a),eg(e,t,n,a,s);case 7:return At(e,t,t.pendingProps,s),t.child;case 8:return At(e,t,t.pendingProps.children,s),t.child;case 12:return At(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,_e(Od,n._currentValue),n._currentValue=o,i!==null)if(Pr(i.value,o)){if(i.children===a.children&&!qt.current){t=bs(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=cs(-1,s&-s),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=s,d=i.alternate,d!==null&&(d.lanes|=s),Qm(i.return,s,t),l.lanes|=s;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error($(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Qm(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}At(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,za(t,s),a=gr(a),n=n(a),t.flags|=1,At(e,t,n,s),t.child;case 14:return n=t.type,a=wr(n,t.pendingProps),a=wr(n.type,a),tg(e,t,n,a,s);case 15:return Uv(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:wr(n,a),cd(e,t),t.tag=1,Ht(n)?(e=!0,Rd(t)):e=!1,za(t,s),Dv(t,n,a),Ym(t,n,a,s),Zm(null,t,n,!0,e,s);case 19:return Wv(e,t,s);case 22:return Bv(e,t,s)}throw Error($(156,t.tag))};function iw(e,t){return My(e,t)}function G5(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(e,t,s,n){return new G5(e,t,s,n)}function Mx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Q5(e){if(typeof e=="function")return Mx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Xh)return 11;if(e===Zh)return 14}return 2}function sn(e,t){var s=e.alternate;return s===null?(s=xr(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function hd(e,t,s,n,a,i){var o=2;if(n=e,typeof e=="function")Mx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ka:return Wn(s.children,a,i,t);case Jh:o=8,a|=8;break;case vm:return e=xr(12,s,t,a|2),e.elementType=vm,e.lanes=i,e;case wm:return e=xr(13,s,t,a),e.elementType=wm,e.lanes=i,e;case km:return e=xr(19,s,t,a),e.elementType=km,e.lanes=i,e;case fy:return Mc(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xy:o=10;break e;case py:o=9;break e;case Xh:o=11;break e;case Zh:o=14;break e;case Fs:o=16,n=null;break e}throw Error($(130,e==null?e:typeof e,""))}return t=xr(o,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Wn(e,t,s,n){return e=xr(7,e,n,t),e.lanes=s,e}function Mc(e,t,s,n){return e=xr(22,e,n,t),e.elementType=fy,e.lanes=s,e.stateNode={isHidden:!1},e}function Eu(e,t,s){return e=xr(6,e,null,t),e.lanes=s,e}function Mu(e,t,s){return t=xr(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function K5(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=hu(0),this.expirationTimes=hu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hu(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Rx(e,t,s,n,a,i,o,l,d){return e=new K5(e,t,s,l,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=xr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},gx(i),e}function Y5(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function ow(e){if(!e)return cn;e=e._reactInternals;e:{if(la(e)!==e||e.tag!==1)throw Error($(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ht(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error($(171))}if(e.tag===1){var s=e.type;if(Ht(s))return ov(e,s,t)}return t}function lw(e,t,s,n,a,i,o,l,d){return e=Rx(s,n,!0,e,a,i,o,l,d),e.context=ow(null),s=e.current,n=Rt(),a=rn(s),i=cs(n,a),i.callback=t??null,en(s,i,a),e.current.lanes=a,Ko(e,a,n),Gt(e,n),e}function Rc(e,t,s,n){var a=t.current,i=Rt(),o=rn(a);return s=ow(s),t.context===null?t.context=s:t.pendingContext=s,t=cs(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=en(a,t,o),e!==null&&(Tr(e,a,o,i),od(e,a,o)),o}function Gd(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Lx(e,t){hg(e,t),(e=e.alternate)&&hg(e,t)}function J5(){return null}var dw=typeof reportError=="function"?reportError:function(e){console.error(e)};function Dx(e){this._internalRoot=e}Lc.prototype.render=Dx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error($(409));Rc(e,t,null,null)};Lc.prototype.unmount=Dx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Zn(function(){Rc(null,e,null,null)}),t[fs]=null}};function Lc(e){this._internalRoot=e}Lc.prototype.unstable_scheduleHydration=function(e){if(e){var t=By();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Vs.length&&t!==0&&t<Vs[s].priority;s++);Vs.splice(s,0,e),s===0&&zy(e)}};function Ox(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Dc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xg(){}function X5(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var c=Gd(o);i.call(c)}}var o=lw(t,n,e,0,null,!1,!1,"",xg);return e._reactRootContainer=o,e[fs]=o.current,ko(e.nodeType===8?e.parentNode:e),Zn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var c=Gd(d);l.call(c)}}var d=Rx(e,0,!1,null,null,!1,!1,"",xg);return e._reactRootContainer=d,e[fs]=d.current,ko(e.nodeType===8?e.parentNode:e),Zn(function(){Rc(t,d,s,n)}),d}function Oc(e,t,s,n,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var d=Gd(o);l.call(d)}}Rc(t,o,e,a)}else o=X5(s,t,e,a,n);return Gd(o)}Fy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Wi(t.pendingLanes);s!==0&&(rx(t,s|1),Gt(t,ze()),!(he&6)&&(si=ze()+500,bn()))}break;case 13:Zn(function(){var n=gs(e,1);if(n!==null){var a=Rt();Tr(n,e,1,a)}}),Lx(e,1)}};sx=function(e){if(e.tag===13){var t=gs(e,134217728);if(t!==null){var s=Rt();Tr(t,e,134217728,s)}Lx(e,134217728)}};Uy=function(e){if(e.tag===13){var t=rn(e),s=gs(e,t);if(s!==null){var n=Rt();Tr(s,e,t,n)}Lx(e,t)}};By=function(){return je};Vy=function(e,t){var s=je;try{return je=e,t()}finally{je=s}};Em=function(e,t,s){switch(t){case"input":if(Sm(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=Tc(n);if(!a)throw Error($(90));by(n),Sm(n,a)}}}break;case"textarea":vy(e,s);break;case"select":t=s.value,t!=null&&Fa(e,!!s.multiple,t,!1)}};Ty=Px;_y=Zn;var Z5={usingClientEntryPoint:!1,Events:[Jo,Ca,Tc,Sy,Cy,Px]},Li={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eS={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ay(e),e===null?null:e.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||J5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{jc=ql.inject(eS),zr=ql}catch{}}ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z5;ar.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ox(t))throw Error($(200));return Y5(e,t,null,s)};ar.createRoot=function(e,t){if(!Ox(e))throw Error($(299));var s=!1,n="",a=dw;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Rx(e,1,!1,null,null,s,!1,n,a),e[fs]=t.current,ko(e.nodeType===8?e.parentNode:e),new Dx(t)};ar.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error($(188)):(e=Object.keys(e).join(","),Error($(268,e)));return e=Ay(t),e=e===null?null:e.stateNode,e};ar.flushSync=function(e){return Zn(e)};ar.hydrate=function(e,t,s){if(!Dc(t))throw Error($(200));return Oc(null,e,t,!0,s)};ar.hydrateRoot=function(e,t,s){if(!Ox(e))throw Error($(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",o=dw;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=lw(t,null,e,1,s??null,a,!1,i,o),e[fs]=t.current,ko(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new Lc(t)};ar.render=function(e,t,s){if(!Dc(t))throw Error($(200));return Oc(null,e,t,!1,s)};ar.unmountComponentAtNode=function(e){if(!Dc(e))throw Error($(40));return e._reactRootContainer?(Zn(function(){Oc(null,null,e,!1,function(){e._reactRootContainer=null,e[fs]=null})}),!0):!1};ar.unstable_batchedUpdates=Px;ar.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!Dc(s))throw Error($(200));if(e==null||e._reactInternals===void 0)throw Error($(38));return Oc(e,t,s,!1,n)};ar.version="18.3.1-next-f1338f8080-20240426";function cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cw)}catch(e){console.error(e)}}cw(),cy.exports=ar;var uw=cy.exports,pg=uw;bm.createRoot=pg.createRoot,bm.hydrateRoot=pg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ao(){return Ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Ao.apply(this,arguments)}var Qs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Qs||(Qs={}));const fg="popstate";function tS(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return uh("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:Qd(a)}return sS(t,s,null,e)}function We(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Fx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rS(){return Math.random().toString(36).substr(2,8)}function gg(e,t){return{usr:e.state,key:e.key,idx:t}}function uh(e,t,s,n){return s===void 0&&(s=null),Ao({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?pi(t):t,{state:s,key:t&&t.key||n||rS()})}function Qd(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function pi(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function sS(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Qs.Pop,d=null,c=u();c==null&&(c=0,o.replaceState(Ao({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=Qs.Pop;let w=u(),f=w==null?null:w-c;c=w,d&&d({action:l,location:v.location,delta:f})}function h(w,f){l=Qs.Push;let b=uh(v.location,w,f);c=u()+1;let y=gg(b,c),k=v.createHref(b);try{o.pushState(y,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(k)}i&&d&&d({action:l,location:v.location,delta:1})}function x(w,f){l=Qs.Replace;let b=uh(v.location,w,f);c=u();let y=gg(b,c),k=v.createHref(b);o.replaceState(y,"",k),i&&d&&d({action:l,location:v.location,delta:0})}function g(w){let f=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof w=="string"?w:Qd(w);return b=b.replace(/ $/,"%20"),We(f,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,f)}let v={get action(){return l},get location(){return e(a,o)},listen(w){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(fg,m),d=w,()=>{a.removeEventListener(fg,m),d=null}},createHref(w){return t(a,w)},createURL:g,encodeLocation(w){let f=g(w);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:h,replace:x,go(w){return o.go(w)}};return v}var bg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bg||(bg={}));function nS(e,t,s){return s===void 0&&(s="/"),aS(e,t,s)}function aS(e,t,s,n){let a=typeof t=="string"?pi(t):t,i=Ux(a.pathname||"/",s);if(i==null)return null;let o=mw(e);iS(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let c=bS(i);l=pS(o[d],c)}return l}function mw(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(We(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let c=nn([n,d.relativePath]),u=s.concat(d);i.children&&i.children.length>0&&(We(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),mw(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:hS(c,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let d of hw(i.path))a(i,o,d)}),t}function hw(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=hw(n.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function iS(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:xS(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const oS=/^:[\w-]+$/,lS=3,dS=2,cS=1,uS=10,mS=-2,yg=e=>e==="*";function hS(e,t){let s=e.split("/"),n=s.length;return s.some(yg)&&(n+=mS),t&&(n+=dS),s.filter(a=>!yg(a)).reduce((a,i)=>a+(oS.test(i)?lS:i===""?cS:uS),n)}function xS(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function pS(e,t,s){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let d=n[l],c=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=fS({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},u),h=d.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:nn([i,m.pathname]),pathnameBase:jS(nn([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=nn([i,m.pathnameBase]))}return o}function fS(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=gS(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((c,u,m)=>{let{paramName:h,isOptional:x}=u;if(h==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[m];return x&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function gS(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Fx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(n.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function bS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Fx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ux(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}const yS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vS=e=>yS.test(e);function wS(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?pi(e):e,i;if(s)if(vS(s))i=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Fx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?i=vg(s.substring(1),"/"):i=vg(s,t)}else i=t;return{pathname:i,search:NS(n),hash:SS(a)}}function vg(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function Ru(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kS(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Bx(e,t){let s=kS(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function Vx(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=pi(e):(a=Ao({},e),We(!a.pathname||!a.pathname.includes("?"),Ru("?","pathname","search",a)),We(!a.pathname||!a.pathname.includes("#"),Ru("#","pathname","hash",a)),We(!a.search||!a.search.includes("#"),Ru("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let m=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let d=wS(a,l),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(c||u)&&(d.pathname+="/"),d}const nn=e=>e.join("/").replace(/\/\/+/g,"/"),jS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),NS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,SS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function CS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const xw=["post","put","patch","delete"];new Set(xw);const TS=["get",...xw];new Set(TS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eo(){return Eo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},Eo.apply(this,arguments)}const zx=p.createContext(null),_S=p.createContext(null),yn=p.createContext(null),Fc=p.createContext(null),Cs=p.createContext({outlet:null,matches:[],isDataRoute:!1}),pw=p.createContext(null);function IS(e,t){let{relative:s}=t===void 0?{}:t;fi()||We(!1);let{basename:n,navigator:a}=p.useContext(yn),{hash:i,pathname:o,search:l}=gw(e,{relative:s}),d=o;return n!=="/"&&(d=o==="/"?n:nn([n,o])),a.createHref({pathname:d,search:l,hash:i})}function fi(){return p.useContext(Fc)!=null}function bt(){return fi()||We(!1),p.useContext(Fc).location}function fw(e){p.useContext(yn).static||p.useLayoutEffect(e)}function le(){let{isDataRoute:e}=p.useContext(Cs);return e?zS():PS()}function PS(){fi()||We(!1);let e=p.useContext(zx),{basename:t,future:s,navigator:n}=p.useContext(yn),{matches:a}=p.useContext(Cs),{pathname:i}=bt(),o=JSON.stringify(Bx(a,s.v7_relativeSplatPath)),l=p.useRef(!1);return fw(()=>{l.current=!0}),p.useCallback(function(c,u){if(u===void 0&&(u={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let m=Vx(c,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:nn([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}function da(){let{matches:e}=p.useContext(Cs),t=e[e.length-1];return t?t.params:{}}function gw(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=p.useContext(yn),{matches:a}=p.useContext(Cs),{pathname:i}=bt(),o=JSON.stringify(Bx(a,n.v7_relativeSplatPath));return p.useMemo(()=>Vx(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function AS(e,t){return ES(e,t)}function ES(e,t,s,n){fi()||We(!1);let{navigator:a}=p.useContext(yn),{matches:i}=p.useContext(Cs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let c=bt(),u;if(t){var m;let w=typeof t=="string"?pi(t):t;d==="/"||(m=w.pathname)!=null&&m.startsWith(d)||We(!1),u=w}else u=c;let h=u.pathname||"/",x=h;if(d!=="/"){let w=d.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let g=nS(e,{pathname:x}),v=OS(g&&g.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:nn([d,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?d:nn([d,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,s,n);return t&&v?p.createElement(Fc.Provider,{value:{location:Eo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Qs.Pop}},v):v}function MS(){let e=VS(),t=CS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),s?p.createElement("pre",{style:a},s):null,null)}const RS=p.createElement(MS,null);class LS extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?p.createElement(Cs.Provider,{value:this.props.routeContext},p.createElement(pw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DS(e){let{routeContext:t,match:s,children:n}=e,a=p.useContext(zx);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),p.createElement(Cs.Provider,{value:t},n)}function OS(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||We(!1),o=o.slice(0,Math.min(o.length,u+1))}let d=!1,c=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=u),m.route.id){let{loaderData:h,errors:x}=s,g=m.route.loader&&h[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||g){d=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let x,g=!1,v=null,w=null;s&&(x=l&&m.route.id?l[m.route.id]:void 0,v=m.route.errorElement||RS,d&&(c<0&&h===0?($S("route-fallback"),g=!0,w=null):c===h&&(g=!0,w=m.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,h+1)),b=()=>{let y;return x?y=v:g?y=w:m.route.Component?y=p.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=u,p.createElement(DS,{match:m,routeContext:{outlet:u,matches:f,isDataRoute:s!=null},children:y})};return s&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?p.createElement(LS,{location:s.location,revalidation:s.revalidation,component:v,error:x,children:b(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):b()},null)}var bw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(bw||{}),yw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(yw||{});function FS(e){let t=p.useContext(zx);return t||We(!1),t}function US(e){let t=p.useContext(_S);return t||We(!1),t}function BS(e){let t=p.useContext(Cs);return t||We(!1),t}function vw(e){let t=BS(),s=t.matches[t.matches.length-1];return s.route.id||We(!1),s.route.id}function VS(){var e;let t=p.useContext(pw),s=US(),n=vw();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function zS(){let{router:e}=FS(bw.UseNavigateStable),t=vw(yw.UseNavigateStable),s=p.useRef(!1);return fw(()=>{s.current=!0}),p.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Eo({fromRouteId:t},i)))},[e,t])}const wg={};function $S(e,t,s){wg[e]||(wg[e]=!0)}function WS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Me(e){let{to:t,replace:s,state:n,relative:a}=e;fi()||We(!1);let{future:i,static:o}=p.useContext(yn),{matches:l}=p.useContext(Cs),{pathname:d}=bt(),c=le(),u=Vx(t,Bx(l,i.v7_relativeSplatPath),d,a==="path"),m=JSON.stringify(u);return p.useEffect(()=>c(JSON.parse(m),{replace:s,state:n,relative:a}),[c,m,a,s,n]),null}function Z(e){We(!1)}function qS(e){let{basename:t="/",children:s=null,location:n,navigationType:a=Qs.Pop,navigator:i,static:o=!1,future:l}=e;fi()&&We(!1);let d=t.replace(/^\/*/,"/"),c=p.useMemo(()=>({basename:d,navigator:i,static:o,future:Eo({v7_relativeSplatPath:!1},l)}),[d,l,i,o]);typeof n=="string"&&(n=pi(n));let{pathname:u="/",search:m="",hash:h="",state:x=null,key:g="default"}=n,v=p.useMemo(()=>{let w=Ux(u,d);return w==null?null:{location:{pathname:w,search:m,hash:h,state:x,key:g},navigationType:a}},[d,u,m,h,x,g,a]);return v==null?null:p.createElement(yn.Provider,{value:c},p.createElement(Fc.Provider,{children:s,value:v}))}function Lu(e){let{children:t,location:s}=e;return AS(mh(t),s)}new Promise(()=>{});function mh(e,t){t===void 0&&(t=[]);let s=[];return p.Children.forEach(e,(n,a)=>{if(!p.isValidElement(n))return;let i=[...t,a];if(n.type===p.Fragment){s.push.apply(s,mh(n.props.children,i));return}n.type!==Z&&We(!1),!n.props.index||!n.props.children||We(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=mh(n.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hh(){return hh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},hh.apply(this,arguments)}function HS(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function GS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function QS(e,t){return e.button===0&&(!t||t==="_self")&&!GS(e)}function xh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function KS(e,t){let s=xh(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(i=>{s.append(a,i)})}),s}const YS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],JS="6";try{window.__reactRouterVersion=JS}catch{}const XS="startTransition",kg=W1[XS];function ZS(e){let{basename:t,children:s,future:n,window:a}=e,i=p.useRef();i.current==null&&(i.current=tS({window:a,v5Compat:!0}));let o=i.current,[l,d]=p.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=p.useCallback(m=>{c&&kg?kg(()=>d(m)):d(m)},[d,c]);return p.useLayoutEffect(()=>o.listen(u),[o,u]),p.useEffect(()=>WS(n),[n]),p.createElement(qS,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const e4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",t4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,re=p.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:d,to:c,preventScrollReset:u,viewTransition:m}=t,h=HS(t,YS),{basename:x}=p.useContext(yn),g,v=!1;if(typeof c=="string"&&t4.test(c)&&(g=c,e4))try{let y=new URL(window.location.href),k=c.startsWith("//")?new URL(y.protocol+c):new URL(c),j=Ux(k.pathname,x);k.origin===y.origin&&j!=null?c=j+k.search+k.hash:v=!0}catch{}let w=IS(c,{relative:a}),f=r4(c,{replace:o,state:l,target:d,preventScrollReset:u,relative:a,viewTransition:m});function b(y){n&&n(y),y.defaultPrevented||f(y)}return p.createElement("a",hh({},h,{href:g||w,onClick:v||i?n:b,ref:s,target:d}))});var jg;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(jg||(jg={}));var Ng;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ng||(Ng={}));function r4(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,d=le(),c=bt(),u=gw(e,{relative:o});return p.useCallback(m=>{if(QS(m,s)){m.preventDefault();let h=n!==void 0?n:Qd(c)===Qd(u);d(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[c,d,u,n,a,s,e,i,o,l])}function $x(e){let t=p.useRef(xh(e)),s=p.useRef(!1),n=bt(),a=p.useMemo(()=>KS(n.search,s.current?null:t.current),[n.search]),i=le(),o=p.useCallback((l,d)=>{const c=xh(typeof l=="function"?l(a):l);s.current=!0,i("?"+c,d)},[i,a]);return[a,o]}var Ur=[],ur=[],s4=Uint8Array,Du="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var ga=0,n4=Du.length;ga<n4;++ga)Ur[ga]=Du[ga],ur[Du.charCodeAt(ga)]=ga;ur[45]=62;ur[95]=63;function a4(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");s===-1&&(s=t);var n=s===t?0:4-s%4;return[s,n]}function i4(e,t,s){return(t+s)*3/4-s}function Mo(e){var t,s=a4(e),n=s[0],a=s[1],i=new s4(i4(e,n,a)),o=0,l=a>0?n-4:n,d;for(d=0;d<l;d+=4)t=ur[e.charCodeAt(d)]<<18|ur[e.charCodeAt(d+1)]<<12|ur[e.charCodeAt(d+2)]<<6|ur[e.charCodeAt(d+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=ur[e.charCodeAt(d)]<<2|ur[e.charCodeAt(d+1)]>>4,i[o++]=t&255),a===1&&(t=ur[e.charCodeAt(d)]<<10|ur[e.charCodeAt(d+1)]<<4|ur[e.charCodeAt(d+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function o4(e){return Ur[e>>18&63]+Ur[e>>12&63]+Ur[e>>6&63]+Ur[e&63]}function l4(e,t,s){for(var n,a=[],i=t;i<s;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(o4(n));return a.join("")}function Ro(e){for(var t,s=e.length,n=s%3,a=[],i=16383,o=0,l=s-n;o<l;o+=i)a.push(l4(e,o,o+i>l?l:o+i));return n===1?(t=e[s-1],a.push(Ur[t>>2]+Ur[t<<4&63]+"==")):n===2&&(t=(e[s-2]<<8)+e[s-1],a.push(Ur[t>>10]+Ur[t>>4&63]+Ur[t<<2&63]+"=")),a.join("")}function ss(e){if(e===void 0)return{};if(!ww(e))throw new Error(`The arguments to a Convex function must be an object. Received: ${e}`);return e}function d4(e){if(typeof e>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof e!="string")throw new Error(`Invalid deployment address: found ${e}".`);if(!(e.startsWith("http:")||e.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${e}".`);try{new URL(e)}catch{throw new Error(`Invalid deployment address: "${e}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(e.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${e}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function ww(e){var a;const t=typeof e=="object",s=Object.getPrototypeOf(e),n=s===null||s===Object.prototype||((a=s==null?void 0:s.constructor)==null?void 0:a.name)==="Object";return t&&n}const kw=!0,ni=BigInt("-9223372036854775808"),Wx=BigInt("9223372036854775807"),ph=BigInt("0"),c4=BigInt("8"),u4=BigInt("256");function jw(e){return Number.isNaN(e)||!Number.isFinite(e)||Object.is(e,-0)}function m4(e){e<ph&&(e-=ni+ni);let t=e.toString(16);t.length%2===1&&(t="0"+t);const s=new Uint8Array(new ArrayBuffer(8));let n=0;for(const a of t.match(/.{2}/g).reverse())s.set([parseInt(a,16)],n++),e>>=c4;return Ro(s)}function h4(e){const t=Mo(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);let s=ph,n=ph;for(const a of t)s+=BigInt(a)*u4**n,n++;return s>Wx&&(s+=ni+ni),s}function x4(e){if(e<ni||Wx<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);const t=new ArrayBuffer(8);return new DataView(t).setBigInt64(0,e,!0),Ro(new Uint8Array(t))}function p4(e){const t=Mo(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);return new DataView(t.buffer).getBigInt64(0,!0)}const f4=DataView.prototype.setBigInt64?x4:m4,g4=DataView.prototype.getBigInt64?p4:h4,Sg=1024;function Nw(e){if(e.length>Sg)throw new Error(`Field name ${e} exceeds maximum field name length ${Sg}.`);if(e.startsWith("$"))throw new Error(`Field name ${e} starts with a '$', which is reserved.`);for(let t=0;t<e.length;t+=1){const s=e.charCodeAt(t);if(s<32||s>=127)throw new Error(`Field name ${e} has invalid character '${e[t]}': Field names can only contain non-control ASCII characters`)}}function ai(e){if(e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string")return e;if(Array.isArray(e))return e.map(n=>ai(n));if(typeof e!="object")throw new Error(`Unexpected type of ${e}`);const t=Object.entries(e);if(t.length===1){const n=t[0][0];if(n==="$bytes"){if(typeof e.$bytes!="string")throw new Error(`Malformed $bytes field on ${e}`);return Mo(e.$bytes).buffer}if(n==="$integer"){if(typeof e.$integer!="string")throw new Error(`Malformed $integer field on ${e}`);return g4(e.$integer)}if(n==="$float"){if(typeof e.$float!="string")throw new Error(`Malformed $float field on ${e}`);const a=Mo(e.$float);if(a.byteLength!==8)throw new Error(`Received ${a.byteLength} bytes, expected 8 for $float`);const o=new DataView(a.buffer).getFloat64(0,kw);if(!jw(o))throw new Error(`Float ${o} should be encoded as a number`);return o}if(n==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(n==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const s={};for(const[n,a]of Object.entries(e))Nw(n),s[n]=ai(a);return s}const Cg=16384;function so(e){const t=JSON.stringify(e,(s,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n);if(t.length>Cg){const s="[...truncated]";let n=Cg-s.length;const a=t.codePointAt(n-1);return a!==void 0&&a>65535&&(n-=1),t.substring(0,n)+s}return t}function fh(e,t,s,n){var o;if(e===void 0){const l=s&&` (present at path ${s} in original object ${so(t)})`;throw new Error(`undefined is not a valid Convex value${l}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(e===null)return e;if(typeof e=="bigint"){if(e<ni||Wx<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);return{$integer:f4(e)}}if(typeof e=="number")if(jw(e)){const l=new ArrayBuffer(8);return new DataView(l).setFloat64(0,e,kw),{$float:Ro(new Uint8Array(l))}}else return e;if(typeof e=="boolean"||typeof e=="string")return e;if(e instanceof ArrayBuffer)return{$bytes:Ro(new Uint8Array(e))};if(Array.isArray(e))return e.map((l,d)=>fh(l,t,s+`[${d}]`));if(e instanceof Set)throw new Error(Ou(s,"Set",[...e],t));if(e instanceof Map)throw new Error(Ou(s,"Map",[...e],t));if(!ww(e)){const l=(o=e==null?void 0:e.constructor)==null?void 0:o.name,d=l?`${l} `:"";throw new Error(Ou(s,d,e,t))}const a={},i=Object.entries(e);i.sort(([l,d],[c,u])=>l===c?0:l<c?-1:1);for(const[l,d]of i)d!==void 0&&(Nw(l),a[l]=fh(d,t,s+`.${l}`));return a}function Ou(e,t,s,n){return e?`${t}${so(s)} is not a supported Convex type (present at path ${e} in original object ${so(n)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${t}${so(s)} is not a supported Convex type.`}function er(e){return fh(e,e,"")}var b4=Object.defineProperty,y4=(e,t,s)=>t in e?b4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Fu=(e,t,s)=>y4(e,typeof t!="symbol"?t+"":t,s),Tg,_g;const v4=Symbol.for("ConvexError");class Kd extends(_g=Error,Tg=v4,_g){constructor(t){super(typeof t=="string"?t:so(t)),Fu(this,"name","ConvexError"),Fu(this,"data"),Fu(this,Tg,!0),this.data=t}}const Sw=()=>Array.from({length:4},()=>0);Sw();Sw();const Ig="1.30.0";var w4=Object.defineProperty,k4=(e,t,s)=>t in e?w4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Pg=(e,t,s)=>k4(e,typeof t!="symbol"?t+"":t,s);const j4="color:rgb(0, 145, 255)";function Cw(e){switch(e){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class Tw{constructor(t){Pg(this,"_onLogLineFuncs"),Pg(this,"_verbose"),this._onLogLineFuncs={},this._verbose=t.verbose}addLogLineListener(t){let s=Math.random().toString(36).substring(2,15);for(let n=0;n<10&&this._onLogLineFuncs[s]!==void 0;n++)s=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[s]=t,()=>{delete this._onLogLineFuncs[s]}}logVerbose(...t){if(this._verbose)for(const s of Object.values(this._onLogLineFuncs))s("debug",`${new Date().toISOString()}`,...t)}log(...t){for(const s of Object.values(this._onLogLineFuncs))s("info",...t)}warn(...t){for(const s of Object.values(this._onLogLineFuncs))s("warn",...t)}error(...t){for(const s of Object.values(this._onLogLineFuncs))s("error",...t)}}function _w(e){const t=new Tw(e);return t.addLogLineListener((s,...n)=>{switch(s){case"debug":console.debug(...n);break;case"info":console.log(...n);break;case"warn":console.warn(...n);break;case"error":console.error(...n);break;default:console.log(...n)}}),t}function Iw(e){return new Tw(e)}function Yd(e,t,s,n,a){const i=Cw(s);if(typeof a=="object"&&(a=`ConvexError ${JSON.stringify(a.errorData,null,2)}`),t==="info"){const o=a.match(/^\[.*?\] /);if(o===null){e.error(`[CONVEX ${i}(${n})] Could not parse console.log`);return}const l=a.slice(1,o[0].length-2),d=a.slice(o[0].length);e.log(`%c[CONVEX ${i}(${n})] [${l}]`,j4,d)}else e.error(`[CONVEX ${i}(${n})] ${a}`)}function N4(e,t){const s=`[CONVEX FATAL ERROR] ${t}`;return e.error(s),new Error(s)}function Ma(e,t,s){return`[CONVEX ${Cw(e)}(${t})] ${s.errorMessage}
  Called by client`}function gh(e,t){return t.data=e.errorData,t}function ea(e){const t=e.split(":");let s,n;return t.length===1?(s=t[0],n="default"):(s=t.slice(0,t.length-1).join(":"),n=t[t.length-1]),s.endsWith(".js")&&(s=s.slice(0,-3)),`${s}:${n}`}function qn(e,t){return JSON.stringify({udfPath:ea(e),args:er(t)})}function Ag(e,t,s){const{initialNumItems:n,id:a}=s;return JSON.stringify({type:"paginated",udfPath:ea(e),args:er(t),options:er({initialNumItems:n,id:a})})}var S4=Object.defineProperty,C4=(e,t,s)=>t in e?S4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Lr=(e,t,s)=>C4(e,typeof t!="symbol"?t+"":t,s);class T4{constructor(){Lr(this,"nextQueryId"),Lr(this,"querySetVersion"),Lr(this,"querySet"),Lr(this,"queryIdToToken"),Lr(this,"identityVersion"),Lr(this,"auth"),Lr(this,"outstandingQueriesOlderThanRestart"),Lr(this,"outstandingAuthOlderThanRestart"),Lr(this,"paused"),Lr(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(t,s,n,a){const i=ea(t),o=qn(i,s),l=this.querySet.get(o);if(l!==void 0)return l.numSubscribers+=1,{queryToken:o,modification:null,unsubscribe:()=>this.removeSubscriber(o)};{const d=this.nextQueryId++,c={id:d,canonicalizedUdfPath:i,args:s,numSubscribers:1,journal:n,componentPath:a};this.querySet.set(o,c),this.queryIdToToken.set(d,o);const u=this.querySetVersion,m=this.querySetVersion+1,h={type:"Add",queryId:d,udfPath:i,args:[er(s)],journal:n,componentPath:a};return this.paused?this.pendingQuerySetModifications.set(d,h):this.querySetVersion=m,{queryToken:o,modification:{type:"ModifyQuerySet",baseVersion:u,newVersion:m,modifications:[h]},unsubscribe:()=>this.removeSubscriber(o)}}}transition(t){for(const s of t.modifications)switch(s.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(s.queryId);const n=s.journal;if(n!==void 0){const a=this.queryIdToToken.get(s.queryId);a!==void 0&&(this.querySet.get(a).journal=n)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(s.queryId);break}default:throw new Error(`Invalid modification ${s.type}`)}}queryId(t,s){const n=ea(t),a=qn(n,s),i=this.querySet.get(a);return i!==void 0?i.id:null}isCurrentOrNewerAuthVersion(t){return t>=this.identityVersion}getAuth(){return this.auth}setAuth(t){this.auth={tokenType:"User",value:t};const s=this.identityVersion;return this.paused||(this.identityVersion=s+1),{type:"Authenticate",baseVersion:s,...this.auth}}setAdminAuth(t,s){const n={tokenType:"Admin",value:t,impersonating:s};this.auth=n;const a=this.identityVersion;return this.paused||(this.identityVersion=a+1),{type:"Authenticate",baseVersion:a,...n}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",tokenType:"None",baseVersion:t}}hasAuth(){return!!this.auth}isNewAuth(t){var s;return((s=this.auth)==null?void 0:s.value)!==t}queryPath(t){const s=this.queryIdToToken.get(t);return s?this.querySet.get(s).canonicalizedUdfPath:null}queryArgs(t){const s=this.queryIdToToken.get(t);return s?this.querySet.get(s).args:null}queryToken(t){return this.queryIdToToken.get(t)??null}queryJournal(t){var s;return(s=this.querySet.get(t))==null?void 0:s.journal}restart(t){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const s=[];for(const i of this.querySet.values()){const o={type:"Add",queryId:i.id,udfPath:i.canonicalizedUdfPath,args:[er(i.args)],journal:i.journal,componentPath:i.componentPath};s.push(o),t.has(i.id)||this.outstandingQueriesOlderThanRestart.add(i.id)}this.querySetVersion=1;const n={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:s};if(!this.auth)return this.identityVersion=0,[n,void 0];this.outstandingAuthOlderThanRestart=!0;const a={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[n,a]}pause(){this.paused=!0}resume(){const t=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,s=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[t,s]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(t){const s=this.querySet.get(t);if(s.numSubscribers>1)return s.numSubscribers-=1,null;{this.querySet.delete(t),this.queryIdToToken.delete(s.id),this.outstandingQueriesOlderThanRestart.delete(s.id);const n=this.querySetVersion,a=this.querySetVersion+1,i={type:"Remove",queryId:s.id};return this.paused?this.pendingQuerySetModifications.has(s.id)?this.pendingQuerySetModifications.delete(s.id):this.pendingQuerySetModifications.set(s.id,i):this.querySetVersion=a,{type:"ModifyQuerySet",baseVersion:n,newVersion:a,modifications:[i]}}}}var _4=Object.defineProperty,I4=(e,t,s)=>t in e?_4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Hl=(e,t,s)=>I4(e,typeof t!="symbol"?t+"":t,s);class P4{constructor(t,s){this.logger=t,this.markConnectionStateDirty=s,Hl(this,"inflightRequests"),Hl(this,"requestsOlderThanRestart"),Hl(this,"inflightMutationsCount",0),Hl(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(t,s){const n=new Promise(a=>{const i=s?"Requested":"NotSent";this.inflightRequests.set(t.requestId,{message:t,status:{status:i,requestedAt:new Date,onResult:a}}),t.type==="Mutation"?this.inflightMutationsCount++:t.type==="Action"&&this.inflightActionsCount++});return this.markConnectionStateDirty(),n}onResponse(t){const s=this.inflightRequests.get(t.requestId);if(s===void 0||s.status.status==="Completed")return null;const n=s.message.type==="Mutation"?"mutation":"action",a=s.message.udfPath;for(const d of t.logLines)Yd(this.logger,"info",n,a,d);const i=s.status;let o,l;if(t.success)o={success:!0,logLines:t.logLines,value:ai(t.result)},l=()=>i.onResult(o);else{const d=t.result,{errorData:c}=t;Yd(this.logger,"error",n,a,d),o={success:!1,errorMessage:d,errorData:c!==void 0?ai(c):void 0,logLines:t.logLines},l=()=>i.onResult(o)}return t.type==="ActionResponse"||!t.success?(l(),this.inflightRequests.delete(t.requestId),this.requestsOlderThanRestart.delete(t.requestId),s.message.type==="Action"?this.inflightActionsCount--:s.message.type==="Mutation"&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:t.requestId,result:o}):(s.status={status:"Completed",result:o,ts:t.ts,onResolve:l},null)}removeCompleted(t){const s=new Map;for(const[n,a]of this.inflightRequests.entries()){const i=a.status;i.status==="Completed"&&i.ts.lessThanOrEqual(t)&&(i.onResolve(),s.set(n,i.result),a.message.type==="Mutation"?this.inflightMutationsCount--:a.message.type==="Action"&&this.inflightActionsCount--,this.inflightRequests.delete(n),this.requestsOlderThanRestart.delete(n))}return s.size>0&&this.markConnectionStateDirty(),s}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const t=[];for(const[s,n]of this.inflightRequests){if(n.status.status==="NotSent"){n.status.status="Requested",t.push(n.message);continue}if(n.message.type==="Mutation")t.push(n.message);else if(n.message.type==="Action"){if(this.inflightRequests.delete(s),this.requestsOlderThanRestart.delete(s),this.inflightActionsCount--,n.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");n.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),t}resume(){const t=[];for(const[,s]of this.inflightRequests)if(s.status.status==="NotSent"){s.status.status="Requested",t.push(s.message);continue}return t}hasIncompleteRequests(){for(const t of this.inflightRequests.values())if(t.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let t=Date.now();for(const s of this.inflightRequests.values())s.status.status!=="Completed"&&s.status.requestedAt.getTime()<t&&(t=s.status.requestedAt.getTime());return new Date(t)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}const Lo=Symbol.for("functionName"),Pw=Symbol.for("toReferencePath");function A4(e){return e[Pw]??null}function E4(e){return e.startsWith("function://")}function M4(e){let t;if(typeof e=="string")E4(e)?t={functionHandle:e}:t={name:e};else if(e[Lo])t={name:e[Lo]};else{const s=A4(e);if(!s)throw new Error(`${e} is not a functionReference`);t={reference:s}}return t}function st(e){const t=M4(e);if(t.name===void 0)throw t.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${t.functionHandle}`):t.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${t.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(t)}`);if(typeof e=="string")return e;const s=e[Lo];if(!s)throw new Error(`${e} is not a functionReference`);return s}function qx(e){return{[Lo]:e}}function Aw(e=[]){const t={get(s,n){if(typeof n=="string"){const a=[...e,n];return Aw(a)}else if(n===Lo){if(e.length<2){const o=["api",...e].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${o}\``)}const a=e.slice(0,-1).join("/"),i=e[e.length-1];return i==="default"?a:a+":"+i}else return n===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},t)}const R4=Aw();var L4=Object.defineProperty,D4=(e,t,s)=>t in e?L4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Jd=(e,t,s)=>D4(e,typeof t!="symbol"?t+"":t,s);class Do{constructor(t){Jd(this,"queryResults"),Jd(this,"modifiedQueries"),this.queryResults=t,this.modifiedQueries=[]}getQuery(t,...s){const n=ss(s[0]),a=st(t),i=this.queryResults.get(qn(a,n));if(i!==void 0)return Do.queryValue(i.result)}getAllQueries(t){const s=[],n=st(t);for(const a of this.queryResults.values())a.udfPath===ea(n)&&s.push({args:a.args,value:Do.queryValue(a.result)});return s}setQuery(t,s,n){const a=ss(s),i=st(t),o=qn(i,a);let l;n===void 0?l=void 0:l={success:!0,value:n,logLines:[]};const d={udfPath:i,args:a,result:l};this.queryResults.set(o,d),this.modifiedQueries.push(o)}static queryValue(t){if(t!==void 0)return t.success?t.value:void 0}}class O4{constructor(){Jd(this,"queryResults"),Jd(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(t,s){this.optimisticUpdates=this.optimisticUpdates.filter(o=>!s.has(o.mutationId));const n=this.queryResults;this.queryResults=new Map(t);const a=new Do(this.queryResults);for(const o of this.optimisticUpdates)o.update(a);const i=[];for(const[o,l]of this.queryResults){const d=n.get(o);(d===void 0||d.result!==l.result)&&i.push(o)}return i}applyOptimisticUpdate(t,s){this.optimisticUpdates.push({update:t,mutationId:s});const n=new Do(this.queryResults);return t(n),n.modifiedQueries}rawQueryResult(t){const s=this.queryResults.get(t);if(s!==void 0)return s.result}queryResult(t){const s=this.queryResults.get(t);if(s===void 0)return;const n=s.result;if(n!==void 0){if(n.success)return n.value;throw n.errorData!==void 0?gh(n,new Kd(Ma("query",s.udfPath,n))):new Error(Ma("query",s.udfPath,n))}}hasQueryResult(t){return this.queryResults.get(t)!==void 0}queryLogs(t){var n;const s=this.queryResults.get(t);return(n=s==null?void 0:s.result)==null?void 0:n.logLines}}var F4=Object.defineProperty,U4=(e,t,s)=>t in e?F4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Uu=(e,t,s)=>U4(e,typeof t!="symbol"?t+"":t,s);class Bt{constructor(t,s){Uu(this,"low"),Uu(this,"high"),Uu(this,"__isUnsignedLong__"),this.low=t|0,this.high=s|0,this.__isUnsignedLong__=!0}static isLong(t){return(t&&t.__isUnsignedLong__)===!0}static fromBytesLE(t){return new Bt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24)}toBytesLE(){const t=this.high,s=this.low;return[s&255,s>>>8&255,s>>>16&255,s>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]}static fromNumber(t){return isNaN(t)||t<0?Eg:t>=B4?V4:new Bt(t%no|0,t/no|0)}toString(){return(BigInt(this.high)*BigInt(no)+BigInt(this.low)).toString()}equals(t){return Bt.isLong(t)||(t=Bt.fromValue(t)),this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low}notEquals(t){return!this.equals(t)}comp(t){return Bt.isLong(t)||(t=Bt.fromValue(t)),this.equals(t)?0:t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(t){return this.comp(t)<=0}static fromValue(t){return typeof t=="number"?Bt.fromNumber(t):new Bt(t.low,t.high)}}const Eg=new Bt(0,0),Mg=65536,no=Mg*Mg,B4=no*no,V4=new Bt(-1,-1);var z4=Object.defineProperty,$4=(e,t,s)=>t in e?z4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Gl=(e,t,s)=>$4(e,typeof t!="symbol"?t+"":t,s);class Rg{constructor(t,s){Gl(this,"version"),Gl(this,"remoteQuerySet"),Gl(this,"queryPath"),Gl(this,"logger"),this.version={querySet:0,ts:Bt.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=t,this.logger=s}transition(t){const s=t.startVersion;if(this.version.querySet!==s.querySet||this.version.ts.notEquals(s.ts)||this.version.identity!==s.identity)throw new Error(`Invalid start version: ${s.ts.toString()}:${s.querySet}:${s.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);for(const n of t.modifications)switch(n.type){case"QueryUpdated":{const a=this.queryPath(n.queryId);if(a)for(const o of n.logLines)Yd(this.logger,"info","query",a,o);const i=ai(n.value??null);this.remoteQuerySet.set(n.queryId,{success:!0,value:i,logLines:n.logLines});break}case"QueryFailed":{const a=this.queryPath(n.queryId);if(a)for(const o of n.logLines)Yd(this.logger,"info","query",a,o);const{errorData:i}=n;this.remoteQuerySet.set(n.queryId,{success:!1,errorMessage:n.errorMessage,errorData:i!==void 0?ai(i):void 0,logLines:n.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(n.queryId);break}default:throw new Error(`Invalid modification ${n.type}`)}this.version=t.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Bu(e){const t=Mo(e);return Bt.fromBytesLE(Array.from(t))}function W4(e){const t=new Uint8Array(e.toBytesLE());return Ro(t)}function Lg(e){switch(e.type){case"FatalError":case"AuthError":case"ActionResponse":case"TransitionChunk":case"Ping":return{...e};case"MutationResponse":return e.success?{...e,ts:Bu(e.ts)}:{...e};case"Transition":return{...e,startVersion:{...e.startVersion,ts:Bu(e.startVersion.ts)},endVersion:{...e.endVersion,ts:Bu(e.endVersion.ts)}}}}function q4(e){switch(e.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...e};case"Connect":return e.maxObservedTimestamp!==void 0?{...e,maxObservedTimestamp:W4(e.maxObservedTimestamp)}:{...e,maxObservedTimestamp:void 0}}}var H4=Object.defineProperty,G4=(e,t,s)=>t in e?H4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,lt=(e,t,s)=>G4(e,typeof t!="symbol"?t+"":t,s);const Q4=1e3,K4=1001,Y4=1005,J4=4040;let xd;function pd(){return xd===void 0&&(xd=Date.now()),typeof performance>"u"||!performance.now?Date.now():Math.round(xd+performance.now())}function Dg(){return`t=${Math.round((pd()-xd)/100)/10}s`}const Ew={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};function X4(e){if(e===void 0)return"Unknown";for(const t of Object.keys(Ew))if(e.startsWith(t))return t;return"Unknown"}class Z4{constructor(t,s,n,a,i,o){this.markConnectionStateDirty=i,this.debug=o,lt(this,"socket"),lt(this,"connectionCount"),lt(this,"_hasEverConnected",!1),lt(this,"lastCloseReason"),lt(this,"transitionChunkBuffer",null),lt(this,"defaultInitialBackoff"),lt(this,"maxBackoff"),lt(this,"retries"),lt(this,"serverInactivityThreshold"),lt(this,"reconnectDueToServerInactivityTimeout"),lt(this,"uri"),lt(this,"onOpen"),lt(this,"onResume"),lt(this,"onMessage"),lt(this,"webSocketConstructor"),lt(this,"logger"),lt(this,"onServerDisconnectError"),this.webSocketConstructor=n,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=t,this.onOpen=s.onOpen,this.onResume=s.onResume,this.onMessage=s.onMessage,this.onServerDisconnectError=s.onServerDisconnectError,this.logger=a,this.connect()}setSocketState(t){this.socket=t,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}assembleTransition(t){if(t.partNumber<0||t.partNumber>=t.totalParts||t.totalParts===0||this.transitionChunkBuffer&&(this.transitionChunkBuffer.totalParts!==t.totalParts||this.transitionChunkBuffer.transitionId!==t.transitionId))throw this.transitionChunkBuffer=null,new Error("Invalid TransitionChunk");if(this.transitionChunkBuffer===null&&(this.transitionChunkBuffer={chunks:[],totalParts:t.totalParts,transitionId:t.transitionId}),t.partNumber!==this.transitionChunkBuffer.chunks.length){const s=this.transitionChunkBuffer.chunks.length;throw this.transitionChunkBuffer=null,new Error(`TransitionChunk received out of order: expected part ${s}, got ${t.partNumber}`)}if(this.transitionChunkBuffer.chunks.push(t.chunk),this.transitionChunkBuffer.chunks.length===t.totalParts){const s=this.transitionChunkBuffer.chunks.join("");this.transitionChunkBuffer=null;const n=Lg(JSON.parse(s));if(n.type!=="Transition")throw new Error(`Expected Transition, got ${n.type} after assembling chunks`);return n}return null}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const t=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:t,paused:"no"}),this.resetServerInactivityTimeout(),t.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:t,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:pd()})),this.lastCloseReason!=="InitialConnect"&&(this.lastCloseReason?this.logger.log("WebSocket reconnected at",Dg(),"after disconnect due to",this.lastCloseReason):this.logger.log("WebSocket reconnected at",Dg())),this.connectionCount+=1,this.lastCloseReason=null},t.onerror=s=>{this.transitionChunkBuffer=null;const n=s.message;n&&this.logger.log(`WebSocket error message: ${n}`)},t.onmessage=s=>{this.resetServerInactivityTimeout();const n=s.data.length;let a=Lg(JSON.parse(s.data));if(this._logVerbose(`received ws message with type ${a.type}`),a.type==="Ping")return;if(a.type==="TransitionChunk"){const o=this.assembleTransition(a);if(!o)return;a=o,this._logVerbose(`assembled full ws message of type ${a.type}`)}this.transitionChunkBuffer!==null&&(this.transitionChunkBuffer=null,this.logger.log(`Received unexpected ${a.type} while buffering TransitionChunks`)),a.type==="Transition"&&this.reportLargeTransition({messageLength:n,transition:a}),this.onMessage(a).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())},t.onclose=s=>{if(this._logVerbose("begin ws.onclose"),this.transitionChunkBuffer=null,this.lastCloseReason===null&&(this.lastCloseReason=s.reason||`closed with code ${s.code}`),s.code!==Q4&&s.code!==K4&&s.code!==Y4&&s.code!==J4){let a=`WebSocket closed with code ${s.code}`;s.reason&&(a+=`: ${s.reason}`),this.logger.log(a),this.onServerDisconnectError&&s.reason&&this.onServerDisconnectError(a)}const n=X4(s.reason);this.scheduleReconnect(n)}}socketState(){return this.socket.state}sendMessage(t){const s={type:t.type,...t.type==="Authenticate"&&t.tokenType==="User"?{value:`...${t.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const n=q4(t),a=JSON.stringify(n);let i=!1;try{this.socket.ws.send(a),i=!0}catch(o){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${o}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`${i?"sent":"failed to send"} message with type ${t.type}: ${JSON.stringify(s)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(s)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(t){this.socket={state:"disconnected"};const s=this.nextBackoff(t);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${Math.round(s)}ms`),setTimeout(()=>this.connect(),s)}closeAndReconnect(t){switch(this._logVerbose(`begin closeAndReconnect with reason ${t}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=t,this.close(),this.scheduleReconnect("client");return}default:this.socket}}close(){switch(this.transitionChunkBuffer=null,this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const t=this.socket.ws;return t.onmessage=s=>{this._logVerbose("Ignoring message received after close")},new Promise(s=>{t.onclose=()=>{this._logVerbose("Closed after connecting"),s()},t.onopen=()=>{this._logVerbose("Opened after connecting"),t.close()}})}case"ready":{this._logVerbose("ws.close called");const t=this.socket.ws;t.onmessage=n=>{this._logVerbose("Ignoring message received after close")};const s=new Promise(n=>{t.onclose=()=>{n()}});return t.close(),s}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const t=this.close();return this.setSocketState({state:"terminated"}),t}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const t=this.close();return this.socket={state:"stopped"},t}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:pd()})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(t){this.logger.logVerbose(t)}nextBackoff(t){const n=(t==="client"?100:t==="Unknown"?this.defaultInitialBackoff:Ew[t].timeout)*Math.pow(2,this.retries);this.retries+=1;const a=Math.min(n,this.maxBackoff),i=a*(Math.random()-.5);return a+i}reportLargeTransition({transition:t,messageLength:s}){if(t.clientClockSkew===void 0||t.serverTs===void 0)return;const n=pd()-t.clientClockSkew-t.serverTs/1e6,a=`${Math.round(n)}ms`,i=`${Math.round(s/1e4)/100}MB`,o=s/(n/1e3),l=`${Math.round(o/1e4)/100}MB per second`;this._logVerbose(`received ${i} transition in ${a} at ${l}`),s>2e7?this.logger.log(`received query results totaling more that 20MB (${i}) which will take a long time to download on slower connections`):n>2e4&&this.logger.log(`received query results totaling ${i} which took more than 20s to arrive (${a})`),this.debug&&this.sendMessage({type:"Event",eventType:"ClientReceivedTransition",event:{transitionTransitTime:n,messageLength:s}})}}function eC(){return tC()}function tC(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}class Hi extends Error{}Hi.prototype.name="InvalidTokenError";function rC(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,s)=>{let n=s.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function sC(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return rC(t)}catch{return atob(t)}}function Mw(e,t){if(typeof e!="string")throw new Hi("Invalid token specified: must be a string");t||(t={});const s=t.header===!0?0:1,n=e.split(".")[s];if(typeof n!="string")throw new Hi(`Invalid token specified: missing part #${s+1}`);let a;try{a=sC(n)}catch(i){throw new Hi(`Invalid token specified: invalid base64 for part #${s+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new Hi(`Invalid token specified: invalid json for part #${s+1} (${i.message})`)}}var nC=Object.defineProperty,aC=(e,t,s)=>t in e?nC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,lr=(e,t,s)=>aC(e,typeof t!="symbol"?t+"":t,s);const iC=20*24*60*60*1e3,Og=2;class oC{constructor(t,s,n){lr(this,"authState",{state:"noAuth"}),lr(this,"configVersion",0),lr(this,"syncState"),lr(this,"authenticate"),lr(this,"stopSocket"),lr(this,"tryRestartSocket"),lr(this,"pauseSocket"),lr(this,"resumeSocket"),lr(this,"clearAuth"),lr(this,"logger"),lr(this,"refreshTokenLeewaySeconds"),lr(this,"tokenConfirmationAttempts",0),this.syncState=t,this.authenticate=s.authenticate,this.stopSocket=s.stopSocket,this.tryRestartSocket=s.tryRestartSocket,this.pauseSocket=s.pauseSocket,this.resumeSocket=s.resumeSocket,this.clearAuth=s.clearAuth,this.logger=n.logger,this.refreshTokenLeewaySeconds=n.refreshTokenLeewaySeconds}async setConfig(t,s){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const n=await this.fetchTokenAndGuardAgainstRace(t,{forceRefreshToken:!1});n.isFromOutdatedConfig||(n.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:t,onAuthChange:s},hasRetried:!1}),this.authenticate(n.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:t,onAuthChange:s}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(t){if(this.syncState.isCurrentOrNewerAuthVersion(t.endVersion.identity)&&!(t.endVersion.identity<=t.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(t){if(t.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:s}=t;if(!this.syncState.isCurrentOrNewerAuthVersion(s+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(t)}async tryToReauthenticate(t){if(this._logVerbose(`attempting to reauthenticate: ${t.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=Og){this.logger.error(`Failed to authenticate: "${t.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${Og-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const s=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});s.isFromOutdatedConfig||(s.value&&this.syncState.isNewAuth(s.value)?(this.authenticate(s.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:s.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value?this.syncState.isNewAuth(t.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:t.value,config:this.authState.config}),this.authenticate(t.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(t){if(this.authState.state==="noAuth")return;const s=this.decodeToken(t);if(!s){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:n,exp:a}=s;if(!n||!a){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const i=a-n;if(i<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let o=Math.min(iC,(i-this.refreshTokenLeewaySeconds)*1e3);o<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${i}s`),o=0);const l=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},o);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:l,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${o}ms`)}async fetchTokenAndGuardAgainstRace(t,s){const n=++this.configVersion;this._logVerbose(`fetching token with config version ${n}`);const a=await t(s);return this.configVersion!==n?(this._logVerbose(`stale config version, expected ${n}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:a}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(t){t(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(t){const s=t.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:t.hadAuth,state:t.state,token:`...${t.token.slice(-7)}`}:{state:t.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(s)}`),t.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=t}decodeToken(t){try{return Mw(t)}catch(s){return this._logVerbose(`Error decoding token: ${s instanceof Error?s.message:"Unknown error"}`),null}}_logVerbose(t){this.logger.logVerbose(`${t} [v${this.configVersion}]`)}}const lC=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function dC(e,t){const s={sessionId:t};typeof performance>"u"||!performance.mark||performance.mark(e,{detail:s})}function cC(e){let t=e.name.slice(6);return t=t.charAt(0).toLowerCase()+t.slice(1),{name:t,startTime:e.startTime}}function uC(e){if(typeof performance>"u"||!performance.getEntriesByName)return[];const t=[];for(const s of lC){const n=performance.getEntriesByName(s).filter(a=>a.entryType==="mark").filter(a=>a.detail.sessionId===e);t.push(...n)}return t.map(cC)}var mC=Object.defineProperty,hC=(e,t,s)=>t in e?mC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ge=(e,t,s)=>hC(e,typeof t!="symbol"?t+"":t,s);class xC{constructor(t,s,n){if(Ge(this,"address"),Ge(this,"state"),Ge(this,"requestManager"),Ge(this,"webSocketManager"),Ge(this,"authenticationManager"),Ge(this,"remoteQuerySet"),Ge(this,"optimisticQueryResults"),Ge(this,"_transitionHandlerCounter",0),Ge(this,"_nextRequestId"),Ge(this,"_onTransitionFns",new Map),Ge(this,"_sessionId"),Ge(this,"firstMessageReceived",!1),Ge(this,"debug"),Ge(this,"logger"),Ge(this,"maxObservedTimestamp"),Ge(this,"connectionStateSubscribers",new Map),Ge(this,"nextConnectionStateSubscriberId",0),Ge(this,"_lastPublishedConnectionState"),Ge(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{const x=this.connectionState();if(JSON.stringify(x)!==JSON.stringify(this._lastPublishedConnectionState)){this._lastPublishedConnectionState=x;for(const g of this.connectionStateSubscribers.values())g(x)}})}),Ge(this,"mark",x=>{this.debug&&dC(x,this.sessionId)}),typeof t=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(n==null?void 0:n.skipConvexDeploymentUrlCheck)!==!0&&d4(t),n={...n};const a=n.authRefreshTokenLeewaySeconds??2;let i=n.webSocketConstructor;if(!i&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");i=i||WebSocket,this.debug=n.reportDebugInfoToConvex??!1,this.address=t,this.logger=n.logger===!1?Iw({verbose:n.verbose??!1}):n.logger!==!0&&n.logger?n.logger:_w({verbose:n.verbose??!1});const o=t.search("://");if(o===-1)throw new Error("Provided address was not an absolute URL.");const l=t.substring(o+3),d=t.substring(0,o);let c;if(d==="http")c="ws";else if(d==="https")c="wss";else throw new Error(`Unknown parent protocol ${d}`);const u=`${c}://${l}/api/${Ig}/sync`;this.state=new T4,this.remoteQuerySet=new Rg(x=>this.state.queryPath(x),this.logger),this.requestManager=new P4(this.logger,this.markConnectionStateDirty);const m=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new oC(this.state,{authenticate:x=>{const g=this.state.setAuth(x);return this.webSocketManager.sendMessage(g),g.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:m,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:a}),this.optimisticQueryResults=new O4,this.addOnTransitionHandler(x=>{s(x.queries.map(g=>g.token))}),this._nextRequestId=0,this._sessionId=eC();const{unsavedChangesWarning:h}=n;if(typeof window>"u"||typeof window.addEventListener>"u"){if(h===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else h!==!1&&window.addEventListener("beforeunload",x=>{if(this.requestManager.hasIncompleteRequests()){x.preventDefault();const g="Are you sure you want to leave? Your changes may not be saved.";return(x||window.event).returnValue=g,g}});this.webSocketManager=new Z4(u,{onOpen:x=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...x,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const g=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new Rg(f=>this.state.queryPath(f),this.logger);const[v,w]=this.state.restart(g);w&&this.webSocketManager.sendMessage(w),this.webSocketManager.sendMessage(v);for(const f of this.requestManager.restart())this.webSocketManager.sendMessage(f)},onResume:()=>{const[x,g]=this.state.resume();g&&this.webSocketManager.sendMessage(g),x&&this.webSocketManager.sendMessage(x);for(const v of this.requestManager.resume())this.webSocketManager.sendMessage(v)},onMessage:x=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),x.type){case"Transition":{this.observedTimestamp(x.endVersion.ts),this.authenticationManager.onTransition(x),this.remoteQuerySet.transition(x),this.state.transition(x);const g=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(g);break}case"MutationResponse":{x.success&&this.observedTimestamp(x.ts);const g=this.requestManager.onResponse(x);g!==null&&this.notifyOnQueryResultChanges(new Map([[g.requestId,g.result]]));break}case"ActionResponse":{this.requestManager.onResponse(x);break}case"AuthError":{this.authenticationManager.onAuthError(x);break}case"FatalError":{const g=N4(this.logger,x.error);throw this.webSocketManager.terminate(),g}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:n.onServerDisconnectError},i,this.logger,this.markConnectionStateDirty,this.debug),this.mark("convexClientConstructed"),n.expectAuth&&m()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(t){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(t))&&(this.maxObservedTimestamp=t)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(t){const s=this.remoteQuerySet.remoteQueryResults(),n=new Map;for(const[i,o]of s){const l=this.state.queryToken(i);if(l!==null){const d={result:o,udfPath:this.state.queryPath(i),args:this.state.queryArgs(i)};n.set(l,d)}}const a=this.optimisticQueryResults.ingestQueryResultsFromServer(n,new Set(t.keys()));this.handleTransition({queries:a.map(i=>{const o=this.optimisticQueryResults.rawQueryResult(i);return{token:i,modification:{kind:"Updated",result:o}}}),reflectedMutations:Array.from(t).map(([i,o])=>({requestId:i,result:o})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(t){for(const s of this._onTransitionFns.values())s(t)}addOnTransitionHandler(t){const s=this._transitionHandlerCounter++;return this._onTransitionFns.set(s,t),()=>this._onTransitionFns.delete(s)}getCurrentAuthClaims(){const t=this.state.getAuth();let s={};if(t&&t.tokenType==="User")try{s=t?Mw(t.value):{}}catch{s={}}else return;return{token:t.value,decoded:s}}setAuth(t,s){this.authenticationManager.setConfig(t,s)}hasAuth(){return this.state.hasAuth()}setAdminAuth(t,s){const n=this.state.setAdminAuth(t,s);this.webSocketManager.sendMessage(n)}clearAuth(){const t=this.state.clearAuth();this.webSocketManager.sendMessage(t)}subscribe(t,s,n){const a=ss(s),{modification:i,queryToken:o,unsubscribe:l}=this.state.subscribe(t,a,n==null?void 0:n.journal,n==null?void 0:n.componentPath);return i!==null&&this.webSocketManager.sendMessage(i),{queryToken:o,unsubscribe:()=>{const d=l();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(t,s){const n=ss(s),a=qn(t,n);return this.optimisticQueryResults.queryResult(a)}localQueryResultByToken(t){return this.optimisticQueryResults.queryResult(t)}hasLocalQueryResultByToken(t){return this.optimisticQueryResults.hasQueryResult(t)}localQueryLogs(t,s){const n=ss(s),a=qn(t,n);return this.optimisticQueryResults.queryLogs(a)}queryJournal(t,s){const n=ss(s),a=qn(t,n);return this.state.queryJournal(a)}connectionState(){const t=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:t.isConnected,hasEverConnected:t.hasEverConnected,connectionCount:t.connectionCount,connectionRetries:t.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(t){const s=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(s,t),()=>{this.connectionStateSubscribers.delete(s)}}async mutation(t,s,n){const a=await this.mutationInternal(t,s,n);if(!a.success)throw a.errorData!==void 0?gh(a,new Kd(Ma("mutation",t,a))):new Error(Ma("mutation",t,a));return a.value}async mutationInternal(t,s,n,a){const{mutationPromise:i}=this.enqueueMutation(t,s,n,a);return i}enqueueMutation(t,s,n,a){const i=ss(s);this.tryReportLongDisconnect();const o=this.nextRequestId;if(this._nextRequestId++,n!==void 0){const u=n.optimisticUpdate;if(u!==void 0){const m=g=>{u(g,i)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},x=this.optimisticQueryResults.applyOptimisticUpdate(m,o).map(g=>{const v=this.localQueryResultByToken(g);return{token:g,modification:{kind:"Updated",result:v===void 0?void 0:{success:!0,value:v,logLines:[]}}}});this.handleTransition({queries:x,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const l={type:"Mutation",requestId:o,udfPath:t,componentPath:a,args:[er(i)]},d=this.webSocketManager.sendMessage(l),c=this.requestManager.request(l,d);return{requestId:o,mutationPromise:c}}async action(t,s){const n=await this.actionInternal(t,s);if(!n.success)throw n.errorData!==void 0?gh(n,new Kd(Ma("action",t,n))):new Error(Ma("action",t,n));return n.value}async actionInternal(t,s,n){const a=ss(s),i=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const o={type:"Action",requestId:i,udfPath:t,componentPath:n,args:[er(a)]},l=this.webSocketManager.sendMessage(o);return this.requestManager.request(o,l)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const t=uC(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:t})}}tryReportLongDisconnect(){if(!this.debug)return;const t=this.connectionState().timeOfOldestInflightRequest;if(t===null||Date.now()-t.getTime()<=60*1e3)return;const s=`${this.address}/api/debug_event`;fetch(s,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${Ig}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(n=>{n.ok||this.logger.warn("Analytics request failed with response:",n.body)}).catch(n=>{this.logger.warn("Analytics response failed with error:",n)})}}function Vu(e){if(typeof e!="object"||e===null||!Array.isArray(e.page)||typeof e.isDone!="boolean"||typeof e.continueCursor!="string")throw new Error(`Not a valid paginated query result: ${e==null?void 0:e.toString()}`);return e}var pC=Object.defineProperty,fC=(e,t,s)=>t in e?pC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Fg=(e,t,s)=>fC(e,typeof t!="symbol"?t+"":t,s);class gC{constructor(t,s){this.client=t,this.onTransition=s,Fg(this,"paginatedQuerySet",new Map),Fg(this,"lastTransitionTs"),this.lastTransitionTs=Bt.fromNumber(0),this.client.addOnTransitionHandler(n=>this.onBaseTransition(n))}subscribe(t,s,n){const a=ea(t),i=Ag(a,s,n),o=()=>this.removePaginatedQuerySubscriber(i),l=this.paginatedQuerySet.get(i);return l?(l.numSubscribers+=1,{paginatedQueryToken:i,unsubscribe:o}):(this.paginatedQuerySet.set(i,{token:i,canonicalizedUdfPath:a,args:s,numSubscribers:1,options:{initialNumItems:n.initialNumItems},nextPageKey:0,pageKeys:[],pageKeyToQuery:new Map,ongoingSplits:new Map,skip:!1,id:n.id}),this.addPageToPaginatedQuery(i,null,n.initialNumItems),{paginatedQueryToken:i,unsubscribe:o})}localQueryResult(t,s,n){const a=ea(t),i=Ag(a,s,n);return this.localQueryResultByToken(i)}localQueryResultByToken(t){const s=this.paginatedQuerySet.get(t);if(!s)return;const n=this.activePageQueryTokens(s);if(n.length===0)return{results:[],status:"LoadingFirstPage",loadMore:d=>this.loadMoreOfPaginatedQuery(t,d)};let a=[],i=!1,o=!1;for(const d of n){const c=this.client.localQueryResultByToken(d);if(c===void 0){i=!0,o=!1;continue}const u=Vu(c);a=a.concat(u.page),o=!!u.isDone}let l;return i?l=a.length===0?"LoadingFirstPage":"LoadingMore":o?l="Exhausted":l="CanLoadMore",{results:a,status:l,loadMore:d=>this.loadMoreOfPaginatedQuery(t,d)}}onBaseTransition(t){const s=t.queries.map(o=>o.token),n=this.queriesContainingTokens(s);let a=[];n.length>0&&(this.processPaginatedQuerySplits(n,o=>this.client.localQueryResultByToken(o)),a=n.map(o=>({token:o,modification:{kind:"Updated",result:this.localQueryResultByToken(o)}})));const i={...t,paginatedQueries:a};this.onTransition(i)}loadMoreOfPaginatedQuery(t,s){this.mustGetPaginatedQuery(t);const n=this.queryTokenForLastPageOfPaginatedQuery(t),a=this.client.localQueryResultByToken(n);if(!a)return!1;const i=Vu(a);if(i.isDone)return!1;this.addPageToPaginatedQuery(t,i.continueCursor,s);const o={timestamp:this.lastTransitionTs,reflectedMutations:[],queries:[],paginatedQueries:[{token:t,modification:{kind:"Updated",result:this.localQueryResultByToken(t)}}]};return this.onTransition(o),!0}queriesContainingTokens(t){if(t.length===0)return[];const s=[],n=new Set(t);for(const[a,i]of this.paginatedQuerySet)for(const o of this.allQueryTokens(i))if(n.has(o)){s.push(a);break}return s}processPaginatedQuerySplits(t,s){for(const n of t){const a=this.mustGetPaginatedQuery(n),{ongoingSplits:i,pageKeyToQuery:o,pageKeys:l}=a;for(const[d,[c,u]]of i)s(o.get(c).queryToken)!==void 0&&s(o.get(u).queryToken)!==void 0&&this.completePaginatedQuerySplit(a,d,c,u);for(const d of l){if(i.has(d))continue;const c=o.get(d).queryToken,u=s(c);if(!u)continue;const m=Vu(u);m.splitCursor&&(m.pageStatus==="SplitRecommended"||m.pageStatus==="SplitRequired"||m.page.length>a.options.initialNumItems*2)&&this.splitPaginatedQueryPage(a,d,m.splitCursor,m.continueCursor)}}}splitPaginatedQueryPage(t,s,n,a){const i=t.nextPageKey++,o=t.nextPageKey++,l={cursor:a,numItems:t.options.initialNumItems,id:t.id},d=this.client.subscribe(t.canonicalizedUdfPath,{...t.args,paginationOpts:{...l,cursor:null,endCursor:n}});t.pageKeyToQuery.set(i,d);const c=this.client.subscribe(t.canonicalizedUdfPath,{...t.args,paginationOpts:{...l,cursor:n,endCursor:a}});t.pageKeyToQuery.set(o,c),t.ongoingSplits.set(s,[i,o])}addPageToPaginatedQuery(t,s,n){const a=this.mustGetPaginatedQuery(t),i=a.nextPageKey++,o={cursor:s,numItems:n,id:a.id},l={...a.args,paginationOpts:o},d=this.client.subscribe(a.canonicalizedUdfPath,l);return a.pageKeys.push(i),a.pageKeyToQuery.set(i,d),d}removePaginatedQuerySubscriber(t){const s=this.paginatedQuerySet.get(t);if(s&&(s.numSubscribers-=1,!(s.numSubscribers>0))){for(const n of s.pageKeyToQuery.values())n.unsubscribe();this.paginatedQuerySet.delete(t)}}completePaginatedQuerySplit(t,s,n,a){const i=t.pageKeyToQuery.get(s);t.pageKeyToQuery.delete(s);const o=t.pageKeys.indexOf(s);t.pageKeys.splice(o,1,n,a),t.ongoingSplits.delete(s),i.unsubscribe()}activePageQueryTokens(t){return t.pageKeys.map(s=>t.pageKeyToQuery.get(s).queryToken)}allQueryTokens(t){return Array.from(t.pageKeyToQuery.values()).map(s=>s.queryToken)}queryTokenForLastPageOfPaginatedQuery(t){const s=this.mustGetPaginatedQuery(t),n=s.pageKeys[s.pageKeys.length-1];if(n===void 0)throw new Error(`No pages for paginated query ${t}`);return s.pageKeyToQuery.get(n).queryToken}mustGetPaginatedQuery(t){const s=this.paginatedQuerySet.get(t);if(!s)throw new Error("paginated query no longer exists for token "+t);return s}}function bC({getCurrentValue:e,subscribe:t}){const[s,n]=p.useState(()=>({getCurrentValue:e,subscribe:t,value:e()}));let a=s.value;return(s.getCurrentValue!==e||s.subscribe!==t)&&(a=e(),n({getCurrentValue:e,subscribe:t,value:a})),p.useEffect(()=>{let i=!1;const o=()=>{i||n(d=>{if(d.getCurrentValue!==e||d.subscribe!==t)return d;const c=e();return d.value===c?d:{...d,value:c}})},l=t(o);return o(),()=>{i=!0,l()}},[e,t]),a}var yC=Object.defineProperty,vC=(e,t,s)=>t in e?yC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Xr=(e,t,s)=>vC(e,typeof t!="symbol"?t+"":t,s);const wC=5e3;if(typeof Qr>"u")throw new Error("Required dependency 'react' not found");function Rw(e,t,s){function n(a){return CC(a),t.mutation(e,a,{optimisticUpdate:s})}return n.withOptimisticUpdate=function(i){if(s!==void 0)throw new Error(`Already specified optimistic update for mutation ${st(e)}`);return Rw(e,t,i)},n}function kC(e,t){return function(s){return t.action(e,s)}}class jC{constructor(t,s){if(Xr(this,"address"),Xr(this,"cachedSync"),Xr(this,"cachedPaginatedQueryClient"),Xr(this,"listeners"),Xr(this,"options"),Xr(this,"closed",!1),Xr(this,"_logger"),Xr(this,"adminAuth"),Xr(this,"fakeUserIdentity"),t===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof t!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof t} instead.`);if(!t.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=t,this.listeners=new Map,this._logger=(s==null?void 0:s.logger)===!1?Iw({verbose:(s==null?void 0:s.verbose)??!1}):(s==null?void 0:s.logger)!==!0&&(s!=null&&s.logger)?s.logger:_w({verbose:(s==null?void 0:s.verbose)??!1}),this.options={...s,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new xC(this.address,()=>{},this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedPaginatedQueryClient=new gC(this.cachedSync,t=>this.handleTransition(t)),this.cachedSync)}get paginatedQueryClient(){if(this.sync,this.cachedPaginatedQueryClient)return this.cachedPaginatedQueryClient;throw new Error("Should already be instantiated")}setAuth(t,s){if(typeof t=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(t,s??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(t,s){if(this.adminAuth=t,this.fakeUserIdentity=s,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(t,s)}watchQuery(t,...s){const[n,a]=s,i=st(t);return{onUpdate:o=>{const{queryToken:l,unsubscribe:d}=this.sync.subscribe(i,n,a),c=this.listeners.get(l);return c!==void 0?c.add(o):this.listeners.set(l,new Set([o])),()=>{if(this.closed)return;const u=this.listeners.get(l);u.delete(o),u.size===0&&this.listeners.delete(l),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(i,n)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(i,n)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(i,n)}}}prewarmQuery(t){const s=t.extendSubscriptionFor??wC,a=this.watchQuery(t.query,t.args||{}).onUpdate(()=>{});setTimeout(a,s)}watchPaginatedQuery(t,s,n){const a=st(t);return{onUpdate:i=>{const{paginatedQueryToken:o,unsubscribe:l}=this.paginatedQueryClient.subscribe(a,s||{},n),d=this.listeners.get(o);return d!==void 0?d.add(i):this.listeners.set(o,new Set([i])),()=>{if(this.closed)return;const c=this.listeners.get(o);c.delete(i),c.size===0&&this.listeners.delete(o),l()}},localQueryResult:()=>this.paginatedQueryClient.localQueryResult(a,s,n)}}mutation(t,...s){const[n,a]=s,i=st(t);return this.sync.mutation(i,n,a)}action(t,...s){const n=st(t);return this.sync.action(n,...s)}query(t,...s){const n=this.watchQuery(t,...s),a=n.localQueryResult();return a!==void 0?Promise.resolve(a):new Promise((i,o)=>{const l=n.onUpdate(()=>{l();try{i(n.localQueryResult())}catch(d){o(d)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(t){return this.sync.subscribeToConnectionState(t)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedPaginatedQueryClient&&(this.cachedPaginatedQueryClient=void 0),this.cachedSync){const t=this.cachedSync;this.cachedSync=void 0,await t.close()}}handleTransition(t){const s=t.queries.map(a=>a.token),n=t.paginatedQueries.map(a=>a.token);this.transition([...s,...n])}transition(t){for(const s of t){const n=this.listeners.get(s);if(n)for(const a of n)a()}}}const Uc=Qr.createContext(void 0);function Lw(){return p.useContext(Uc)}const NC=({client:e,children:t})=>Qr.createElement(Uc.Provider,{value:e},t);function O(e,...t){const s=t[0]==="skip",n=t[0]==="skip"?{}:ss(t[0]),a=typeof e=="string"?qx(e):e,i=st(a),o=p.useMemo(()=>s?{}:{query:{query:a,args:n}},[JSON.stringify(er(n)),i,s]),d=Dw(o).query;if(d instanceof Error)throw d;return d}function V(e){const t=typeof e=="string"?qx(e):e,s=p.useContext(Uc);if(s===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return p.useMemo(()=>Rw(t,s),[s,st(t)])}function SC(e){const t=p.useContext(Uc),s=typeof e=="string"?qx(e):e;if(t===void 0)throw new Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return p.useMemo(()=>kC(s,t),[t,st(s)])}function CC(e){if(typeof e=="object"&&e!==null&&"bubbles"in e&&"persist"in e&&"isDefaultPrevented"in e)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var TC=Object.defineProperty,_C=(e,t,s)=>t in e?TC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,zu=(e,t,s)=>_C(e,typeof t!="symbol"?t+"":t,s);class IC{constructor(t){zu(this,"createWatch"),zu(this,"queries"),zu(this,"listeners"),this.createWatch=t,this.queries={},this.listeners=new Set}setQueries(t){for(const s of Object.keys(t)){const{query:n,args:a,paginationOptions:i}=t[s];if(st(n),this.queries[s]===void 0)this.addQuery(s,n,a,i?{paginationOptions:i}:{});else{const o=this.queries[s];(st(n)!==st(o.query)||JSON.stringify(er(a))!==JSON.stringify(er(o.args))||JSON.stringify(i)!==JSON.stringify(o.paginationOptions))&&(this.removeQuery(s),this.addQuery(s,n,a,i?{paginationOptions:i}:{}))}}for(const s of Object.keys(this.queries))t[s]===void 0&&this.removeQuery(s)}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}getLocalResults(t){const s={};for(const n of Object.keys(t)){const{query:a,args:i}=t[n],o=t[n].paginationOptions;st(a);const l=this.createWatch(a,i,o?{paginationOptions:o}:{});let d;try{d=l.localQueryResult()}catch(c){if(c instanceof Error)d=c;else throw c}s[n]=d}return s}setCreateWatch(t){this.createWatch=t;for(const s of Object.keys(this.queries)){const{query:n,args:a,watch:i,paginationOptions:o}=this.queries[s],l="journal"in i?i.journal():void 0;this.removeQuery(s),this.addQuery(s,n,a,{...l?{journal:l}:[],...o?{paginationOptions:o}:{}})}}destroy(){for(const t of Object.keys(this.queries))this.removeQuery(t);this.listeners=new Set}addQuery(t,s,n,{paginationOptions:a,journal:i}){if(this.queries[t]!==void 0)throw new Error(`Tried to add a new query with identifier ${t} when it already exists.`);const o=this.createWatch(s,n,{...i?{journal:i}:[],...a?{paginationOptions:a}:{}}),l=o.onUpdate(()=>this.notifyListeners());this.queries[t]={query:s,args:n,watch:o,unsubscribe:l,...a?{paginationOptions:a}:{}}}removeQuery(t){const s=this.queries[t];if(s===void 0)throw new Error(`No query found with identifier ${t}.`);s.unsubscribe(),delete this.queries[t]}notifyListeners(){for(const t of this.listeners)t()}}function Dw(e){const t=Lw();if(t===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const s=p.useMemo(()=>(n,a,{journal:i,paginationOptions:o})=>o?t.watchPaginatedQuery(n,a,o):t.watchQuery(n,a,i?{journal:i}:{}),[t]);return PC(e,s)}function PC(e,t){const[s]=p.useState(()=>new IC(t));s.createWatch!==t&&s.setCreateWatch(t),p.useEffect(()=>()=>s.destroy(),[s]);const n=p.useMemo(()=>({getCurrentValue:()=>s.getLocalResults(e),subscribe:a=>(s.setQueries(e),s.subscribe(a))}),[s,e]);return bC(n)}const AC=(e,t,s)=>n=>{const a={...n.queries},i=n.nextPageKey,o=n.nextPageKey+1,l=n.nextPageKey+2;a[i]={query:n.query,args:{...n.args,paginationOpts:{...n.queries[e].args.paginationOpts,endCursor:t}}},a[o]={query:n.query,args:{...n.args,paginationOpts:{...n.queries[e].args.paginationOpts,cursor:t,endCursor:s}}};const d={...n.ongoingSplits};return d[e]=[i,o],{...n,nextPageKey:l,queries:a,ongoingSplits:d}},EC=e=>t=>{const s=t.ongoingSplits[e];if(s===void 0)return t;const n={...t.queries};delete n[e];const a={...t.ongoingSplits};delete a[e];let i=t.pageKeys.slice();const o=t.pageKeys.findIndex(l=>l===e);return o>=0&&(i=[...t.pageKeys.slice(0,o),...s,...t.pageKeys.slice(o+1)]),{...t,queries:n,pageKeys:i,ongoingSplits:a}};function MC(e,t,s){const{user:n}=DC(e,t,s);return n}const RC=Symbol("includePageKeys"),LC=Symbol("page");function DC(e,t,s){if(typeof(s==null?void 0:s.initialNumItems)!="number"||s.initialNumItems<0)throw new Error(`\`options.initialNumItems\` must be a positive number. Received \`${s==null?void 0:s.initialNumItems}\`.`);const n=t==="skip",a=n?{}:t,i=st(e),o=p.useMemo(()=>()=>{const f=OC();return{query:e,args:a,id:f,nextPageKey:1,pageKeys:n?[]:[0],queries:n?{}:{0:{query:e,args:{...a,paginationOpts:{numItems:s.initialNumItems,cursor:null,id:f}}}},ongoingSplits:{},skip:n}},[JSON.stringify(er(a)),i,s.initialNumItems,n]),[l,d]=p.useState(o);let c=l;(st(e)!==st(l.query)||JSON.stringify(er(a))!==JSON.stringify(er(l.args))||n!==l.skip)&&(c=o(),d(c));const m=Lw().logger,h=Dw(c.queries),x=s[RC]??!1,[g,v]=p.useMemo(()=>{var y,k;let f;const b=[];for(const j of c.pageKeys){if(f=h[j],f===void 0)break;if(f instanceof Error){if(f.message.includes("InvalidCursor")||f instanceof Kd&&typeof f.data=="object"&&((y=f.data)==null?void 0:y.isConvexSystemError)===!0&&((k=f.data)==null?void 0:k.paginationError)==="InvalidCursor")return m.warn("usePaginatedQuery hit error, resetting pagination state: "+f.message),d(o),[[],void 0];throw f}const S=c.ongoingSplits[j];if(S!==void 0?h[S[0]]!==void 0&&h[S[1]]!==void 0&&d(EC(j)):f.splitCursor&&(f.pageStatus==="SplitRecommended"||f.pageStatus==="SplitRequired"||f.page.length>s.initialNumItems*2)&&d(AC(j,f.splitCursor,f.continueCursor)),f.pageStatus==="SplitRequired")return[b,void 0];b.push(...x?f.page.map(P=>({...P,[LC]:j.toString()})):f.page)}return[b,f]},[h,c.pageKeys,c.ongoingSplits,s.initialNumItems,o,m,x]),w=p.useMemo(()=>{if(v===void 0)return c.nextPageKey===1?{status:"LoadingFirstPage",isLoading:!0,loadMore:y=>{}}:{status:"LoadingMore",isLoading:!0,loadMore:y=>{}};if(v.isDone)return{status:"Exhausted",isLoading:!1,loadMore:y=>{}};const f=v.continueCursor;let b=!1;return{status:"CanLoadMore",isLoading:!1,loadMore:y=>{b||(b=!0,d(k=>{const j=[...k.pageKeys,k.nextPageKey],S={...k.queries};return S[k.nextPageKey]={query:k.query,args:{...k.args,paginationOpts:{numItems:y,cursor:f,id:k.id}}},{...k,nextPageKey:k.nextPageKey+1,pageKeys:j,queries:S}}))}}},[v,c.nextPageKey]);return{user:{results:g,...w},internal:{state:c}}}let Ug=0;function OC(){return Ug++,Ug}const Ow=p.createContext(void 0);function FC({children:e}){const[t,s]=p.useState(()=>{const i=localStorage.getItem("baptizo-theme");return i==="dark"||i==="light"?i:"light"});p.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(t),localStorage.setItem("baptizo-theme",t)},[t]);const n=()=>{s(i=>i==="light"?"dark":"light")},a=i=>{s(i)};return r.jsx(Ow.Provider,{value:{theme:t,toggleTheme:n,setTheme:a},children:e})}function Bc(){const e=p.useContext(Ow);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function Fw(e,t){const s={get(n,a){if(typeof a=="string"){const i=[...t,a];return Fw(e,i)}else if(a===Pw){if(t.length<1){const i=[e,...t].join(".");throw new Error(`API path is expected to be of the form \`${e}.childComponent.functionName\`. Found: \`${i}\``)}return"_reference/childComponent/"+t.join("/")}else return}};return new Proxy({},s)}const UC=()=>Fw("components",[]),C=R4;UC();const Uw=p.createContext(void 0),ba="baptizo-auth-user";function BC({children:e}){const[t,s]=p.useState(null),[n,a]=p.useState(!0);p.useEffect(()=>{const c=localStorage.getItem(ba);if(c)try{const u=JSON.parse(c);!(u!=null&&u._id)||typeof u._id!="string"?(console.warn("Corrupt auth session detected (missing _id). Clearing."),localStorage.removeItem(ba)):s(u)}catch(u){console.error("Failed to parse stored user:",u),localStorage.removeItem(ba)}a(!1)},[]);const i=O(C.users.getUser,t!=null&&t._id?{userId:t._id}:"skip");p.useEffect(()=>{if(i===null&&t){console.warn("Session user not found in DB. Clearing stale session."),localStorage.removeItem(ba),s(null);return}if(i&&t&&(i.role!==t.role||i.name!==t.name||i.avatarUrl!==t.avatarUrl||i.coverImageUrl!==t.coverImageUrl||i.lastViewedCommunityChatAt!==t.lastViewedCommunityChatAt||i.lastViewedBanking!==t.lastViewedBanking||i.lastViewedLeaderboard!==t.lastViewedLeaderboard||i.lastViewedNotifications!==t.lastViewedNotifications)){const u={...t,...i};s(u)}},[i,t]),p.useEffect(()=>{t?localStorage.setItem(ba,JSON.stringify(t)):localStorage.removeItem(ba)},[t]);const o=c=>{s(c)},l=()=>{s(null)},d=c=>{t&&s({...t,...c})};return r.jsx(Uw.Provider,{value:{user:t,isLoading:n,login:o,logout:l,updateUser:d},children:e})}function VC(){const e=p.useContext(Uw);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),F=(e,t)=>{const s=p.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:d,...c},u)=>p.createElement("svg",{ref:u,...zC,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${$C(e)}`,l].join(" "),...c},[...t.map(([m,h])=>p.createElement(m,h)),...Array.isArray(d)?d:[d]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=F("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=F("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=F("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=F("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=F("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=F("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=F("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=F("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=F("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=F("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=F("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=F("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=F("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hx=F("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bg=F("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=F("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=F("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=F("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=F("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=F("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=F("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=F("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=F("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=F("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=F("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=F("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=F("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=F("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bh=F("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=F("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=F("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $w=F("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=F("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zo=F("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=F("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=F("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=F("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=F("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=F("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=F("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=F("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=F("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qx=F("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=F("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=F("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=F("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=F("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hw=F("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=F("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gw=F("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=F("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=F("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=F("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=F("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qw=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=F("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=F("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fd=F("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=F("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=F("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=F("MessageCircleOff",[["path",{d:"M20.5 14.9A9 9 0 0 0 9.1 3.5",key:"1iebmn"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.6 5.6C3 8.3 2.2 12.5 4 16l-2 6 6-2c3.4 1.8 7.6 1.1 10.3-1.7",key:"1ov8ce"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=F("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=F("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=F("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=F("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=F("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=F("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=F("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=F("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=F("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tc=F("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=F("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oi=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=F("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vg=F("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=F("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=F("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kw=F("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=F("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=F("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=F("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=F("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=F("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=F("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yw=F("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zc=F("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=F("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=F("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=F("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=F("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=F("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=F("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=F("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=F("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=F("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=F("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=F("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=F("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=F("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tl=F("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=F("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=F("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=F("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Zw=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),$c=p.createContext({}),Wc=p.createContext(null),qc=typeof document<"u",Xx=qc?p.useLayoutEffect:p.useEffect,ek=p.createContext({strict:!1}),Zx=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),v3="framerAppearId",tk="data-"+Zx(v3);function w3(e,t,s,n){const{visualElement:a}=p.useContext($c),i=p.useContext(ek),o=p.useContext(Wc),l=p.useContext(Zw).reducedMotion,d=p.useRef();n=n||i.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:a,props:s,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;p.useInsertionEffect(()=>{c&&c.update(s,o)});const u=p.useRef(!!(s[tk]&&!window.HandoffComplete));return Xx(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),p.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ra(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function k3(e,t,s){return p.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Ra(s)&&(s.current=n))},[t])}function Uo(e){return typeof e=="string"||Array.isArray(e)}function Hc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const ep=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tp=["initial",...ep];function Gc(e){return Hc(e.animate)||tp.some(t=>Uo(e[t]))}function rk(e){return!!(Gc(e)||e.variants)}function j3(e,t){if(Gc(e)){const{initial:s,animate:n}=e;return{initial:s===!1||Uo(s)?s:void 0,animate:Uo(n)?n:void 0}}return e.inherit!==!1?t:{}}function N3(e){const{initial:t,animate:s}=j3(e,p.useContext($c));return p.useMemo(()=>({initial:t,animate:s}),[zg(t),zg(s)])}function zg(e){return Array.isArray(e)?e.join(" "):e}const $g={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Bo={};for(const e in $g)Bo[e]={isEnabled:t=>$g[e].some(s=>!!t[s])};function S3(e){for(const t in e)Bo[t]={...Bo[t],...e[t]}}const rp=p.createContext({}),sk=p.createContext({}),C3=Symbol.for("motionComponentSymbol");function T3({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:a}){e&&S3(e);function i(l,d){let c;const u={...p.useContext(Zw),...l,layoutId:_3(l)},{isStatic:m}=u,h=N3(l),x=n(l,m);if(!m&&qc){h.visualElement=w3(a,x,u,t);const g=p.useContext(sk),v=p.useContext(ek).strict;h.visualElement&&(c=h.visualElement.loadFeatures(u,v,e,g))}return p.createElement($c.Provider,{value:h},c&&h.visualElement?p.createElement(c,{visualElement:h.visualElement,...u}):null,s(a,l,k3(x,h.visualElement,d),x,m,h.visualElement))}const o=p.forwardRef(i);return o[C3]=a,o}function _3({layoutId:e}){const t=p.useContext(rp).id;return t&&e!==void 0?t+"-"+e:e}function I3(e){function t(n,a={}){return T3(e(n,a))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(n,a)=>(s.has(a)||s.set(a,t(a)),s.get(a))})}const P3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sp(e){return typeof e!="string"||e.includes("-")?!1:!!(P3.indexOf(e)>-1||/[A-Z]/.test(e))}const nc={};function A3(e){Object.assign(nc,e)}const rl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ca=new Set(rl);function nk(e,{layout:t,layoutId:s}){return ca.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!nc[e]||e==="opacity")}const Kt=e=>!!(e&&e.getVelocity),E3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},M3=rl.length;function R3(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},n,a){let i="";for(let o=0;o<M3;o++){const l=rl[o];if(e[l]!==void 0){const d=E3[l]||l;i+=`${d}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):s&&n&&(i="none"),i}const ak=e=>t=>typeof t=="string"&&t.startsWith(e),ik=ak("--"),wh=ak("var(--"),L3=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,D3=(e,t)=>t&&typeof e=="number"?t.transform(e):e,hn=(e,t,s)=>Math.min(Math.max(s,e),t),ua={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},io={...ua,transform:e=>hn(0,1,e)},Ql={...ua,default:1},oo=e=>Math.round(e*1e5)/1e5,Qc=/(-)?([\d]*\.?[\d])+/g,ok=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,O3=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function sl(e){return typeof e=="string"}const nl=e=>({test:t=>sl(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Os=nl("deg"),qr=nl("%"),ne=nl("px"),F3=nl("vh"),U3=nl("vw"),Wg={...qr,parse:e=>qr.parse(e)/100,transform:e=>qr.transform(e*100)},qg={...ua,transform:Math.round},lk={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,size:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,rotate:Os,rotateX:Os,rotateY:Os,rotateZ:Os,scale:Ql,scaleX:Ql,scaleY:Ql,scaleZ:Ql,skew:Os,skewX:Os,skewY:Os,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:io,originX:Wg,originY:Wg,originZ:ne,zIndex:qg,fillOpacity:io,strokeOpacity:io,numOctaves:qg};function np(e,t,s,n){const{style:a,vars:i,transform:o,transformOrigin:l}=e;let d=!1,c=!1,u=!0;for(const m in t){const h=t[m];if(ik(m)){i[m]=h;continue}const x=lk[m],g=D3(h,x);if(ca.has(m)){if(d=!0,o[m]=g,!u)continue;h!==(x.default||0)&&(u=!1)}else m.startsWith("origin")?(c=!0,l[m]=g):a[m]=g}if(t.transform||(d||n?a.transform=R3(e.transform,s,u,n):a.transform&&(a.transform="none")),c){const{originX:m="50%",originY:h="50%",originZ:x=0}=l;a.transformOrigin=`${m} ${h} ${x}`}}const ap=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function dk(e,t,s){for(const n in t)!Kt(t[n])&&!nk(n,s)&&(e[n]=t[n])}function B3({transformTemplate:e},t,s){return p.useMemo(()=>{const n=ap();return np(n,t,{enableHardwareAcceleration:!s},e),Object.assign({},n.vars,n.style)},[t])}function V3(e,t,s){const n=e.style||{},a={};return dk(a,n,e),Object.assign(a,B3(e,t,s)),e.transformValues?e.transformValues(a):a}function z3(e,t,s){const n={},a=V3(e,t,s);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const $3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ac(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||$3.has(e)}let ck=e=>!ac(e);function W3(e){e&&(ck=t=>t.startsWith("on")?!ac(t):e(t))}try{W3(require("@emotion/is-prop-valid").default)}catch{}function q3(e,t,s){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(ck(a)||s===!0&&ac(a)||!t&&!ac(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function Hg(e,t,s){return typeof e=="string"?e:ne.transform(t+s*e)}function H3(e,t,s){const n=Hg(t,e.x,e.width),a=Hg(s,e.y,e.height);return`${n} ${a}`}const G3={offset:"stroke-dashoffset",array:"stroke-dasharray"},Q3={offset:"strokeDashoffset",array:"strokeDasharray"};function K3(e,t,s=1,n=0,a=!0){e.pathLength=1;const i=a?G3:Q3;e[i.offset]=ne.transform(-n);const o=ne.transform(t),l=ne.transform(s);e[i.array]=`${o} ${l}`}function ip(e,{attrX:t,attrY:s,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...c},u,m,h){if(np(e,c,u,h),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:g,dimensions:v}=e;x.transform&&(v&&(g.transform=x.transform),delete x.transform),v&&(a!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=H3(v,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(x.x=t),s!==void 0&&(x.y=s),n!==void 0&&(x.scale=n),o!==void 0&&K3(x,o,l,d,!1)}const uk=()=>({...ap(),attrs:{}}),op=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Y3(e,t,s,n){const a=p.useMemo(()=>{const i=uk();return ip(i,t,{enableHardwareAcceleration:!1},op(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};dk(i,e.style,e),a.style={...i,...a.style}}return a}function J3(e=!1){return(s,n,a,{latestValues:i},o)=>{const d=(sp(s)?Y3:z3)(n,i,o,s),u={...q3(n,typeof s=="string",e),...d,ref:a},{children:m}=n,h=p.useMemo(()=>Kt(m)?m.get():m,[m]);return p.createElement(s,{...u,children:h})}}function mk(e,{style:t,vars:s},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in s)e.style.setProperty(i,s[i])}const hk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xk(e,t,s,n){mk(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(hk.has(a)?a:Zx(a),t.attrs[a])}function lp(e,t){const{style:s}=e,n={};for(const a in s)(Kt(s[a])||t.style&&Kt(t.style[a])||nk(a,e))&&(n[a]=s[a]);return n}function pk(e,t){const s=lp(e,t);for(const n in e)if(Kt(e[n])||Kt(t[n])){const a=rl.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[a]=e[n]}return s}function dp(e,t,s,n={},a={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,a)),t}function fk(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const ic=e=>Array.isArray(e),X3=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Z3=e=>ic(e)?e[e.length-1]||0:e;function gd(e){const t=Kt(e)?e.get():e;return X3(t)?t.toValue():t}function eT({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},n,a,i){const o={latestValues:tT(n,a,i,e),renderState:t()};return s&&(o.mount=l=>s(n,l,o)),o}const gk=e=>(t,s)=>{const n=p.useContext($c),a=p.useContext(Wc),i=()=>eT(e,t,n,a);return s?i():fk(i)};function tT(e,t,s,n){const a={},i=n(e,{});for(const h in i)a[h]=gd(i[h]);let{initial:o,animate:l}=e;const d=Gc(e),c=rk(e);t&&c&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const m=u?l:o;return m&&typeof m!="boolean"&&!Hc(m)&&(Array.isArray(m)?m:[m]).forEach(x=>{const g=dp(e,x);if(!g)return;const{transitionEnd:v,transition:w,...f}=g;for(const b in f){let y=f[b];if(Array.isArray(y)){const k=u?y.length-1:0;y=y[k]}y!==null&&(a[b]=y)}for(const b in v)a[b]=v[b]}),a}const $e=e=>e;class Gg{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function rT(e){let t=new Gg,s=new Gg,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(d,c=!1,u=!1)=>{const m=u&&a,h=m?t:s;return c&&o.add(d),h.add(d)&&m&&a&&(n=t.order.length),d},cancel:d=>{s.remove(d),o.delete(d)},process:d=>{if(a){i=!0;return}if(a=!0,[t,s]=[s,t],s.clear(),n=t.order.length,n)for(let c=0;c<n;c++){const u=t.order[c];u(d),o.has(u)&&(l.schedule(u),e())}a=!1,i&&(i=!1,l.process(d))}};return l}const Kl=["prepare","read","update","preRender","render","postRender"],sT=40;function nT(e,t){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=Kl.reduce((m,h)=>(m[h]=rT(()=>s=!0),m),{}),o=m=>i[m].process(a),l=()=>{const m=performance.now();s=!1,a.delta=n?1e3/60:Math.max(Math.min(m-a.timestamp,sT),1),a.timestamp=m,a.isProcessing=!0,Kl.forEach(o),a.isProcessing=!1,s&&t&&(n=!1,e(l))},d=()=>{s=!0,n=!0,a.isProcessing||e(l)};return{schedule:Kl.reduce((m,h)=>{const x=i[h];return m[h]=(g,v=!1,w=!1)=>(s||d(),x.schedule(g,v,w)),m},{}),cancel:m=>Kl.forEach(h=>i[h].cancel(m)),state:a,steps:i}}const{schedule:Ie,cancel:vs,state:kt,steps:$u}=nT(typeof requestAnimationFrame<"u"?requestAnimationFrame:$e,!0),aT={useVisualState:gk({scrapeMotionValuesFromProps:pk,createRenderState:uk,onMount:(e,t,{renderState:s,latestValues:n})=>{Ie.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),Ie.render(()=>{ip(s,n,{enableHardwareAcceleration:!1},op(t.tagName),e.transformTemplate),xk(t,s)})}})},iT={useVisualState:gk({scrapeMotionValuesFromProps:lp,createRenderState:ap})};function oT(e,{forwardMotionProps:t=!1},s,n){return{...sp(e)?aT:iT,preloadedFeatures:s,useRender:J3(t),createVisualElement:n,Component:e}}function os(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const bk=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Kc(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const lT=e=>t=>bk(t)&&e(t,Kc(t));function us(e,t,s,n){return os(e,t,lT(s),n)}const dT=(e,t)=>s=>t(e(s)),on=(...e)=>e.reduce(dT);function yk(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const Qg=yk("dragHorizontal"),Kg=yk("dragVertical");function vk(e){let t=!1;if(e==="y")t=Kg();else if(e==="x")t=Qg();else{const s=Qg(),n=Kg();s&&n?t=()=>{s(),n()}:(s&&s(),n&&n())}return t}function wk(){const e=vk(!0);return e?(e(),!1):!0}class wn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Yg(e,t){const s="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||wk())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Ie.update(()=>l[n](i,o))};return us(e.current,s,a,{passive:!e.getProps()[n]})}class cT extends wn{mount(){this.unmount=on(Yg(this.node,!0),Yg(this.node,!1))}unmount(){}}class uT extends wn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=on(os(this.node.current,"focus",()=>this.onFocus()),os(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kk=(e,t)=>t?e===t?!0:kk(e,t.parentElement):!1;function Wu(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,Kc(s))}class mT extends wn{constructor(){super(...arguments),this.removeStartListeners=$e,this.removeEndListeners=$e,this.removeAccessibleListeners=$e,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=us(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:m}=this.node.getProps();Ie.update(()=>{!m&&!kk(this.node.current,l.target)?u&&u(l,d):c&&c(l,d)})},{passive:!(n.onTap||n.onPointerUp)}),o=us(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=on(i,o),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Wu("up",(d,c)=>{const{onTap:u}=this.node.getProps();u&&Ie.update(()=>u(d,c))})};this.removeEndListeners(),this.removeEndListeners=os(this.node.current,"keyup",o),Wu("down",(l,d)=>{this.startPress(l,d)})},s=os(this.node.current,"keydown",t),n=()=>{this.isPressing&&Wu("cancel",(i,o)=>this.cancelPress(i,o))},a=os(this.node.current,"blur",n);this.removeAccessibleListeners=on(s,a)}}startPress(t,s){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ie.update(()=>n(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!wk()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ie.update(()=>n(t,s))}mount(){const t=this.node.getProps(),s=us(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=os(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=on(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const kh=new WeakMap,qu=new WeakMap,hT=e=>{const t=kh.get(e.target);t&&t(e)},xT=e=>{e.forEach(hT)};function pT({root:e,...t}){const s=e||document;qu.has(s)||qu.set(s,{});const n=qu.get(s),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(xT,{root:e,...t})),n[a]}function fT(e,t,s){const n=pT(t);return kh.set(e,s),n.observe(e),()=>{kh.delete(e),n.unobserve(e)}}const gT={some:0,all:1};class bT extends wn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:i}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:gT[a]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),h=c?u:m;h&&h(d)};return fT(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(yT(t,s))&&this.startObserver()}unmount(){}}function yT({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const vT={inView:{Feature:bT},tap:{Feature:mT},focus:{Feature:uT},hover:{Feature:cT}};function jk(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function wT(e){const t={};return e.values.forEach((s,n)=>t[n]=s.get()),t}function kT(e){const t={};return e.values.forEach((s,n)=>t[n]=s.getVelocity()),t}function Yc(e,t,s){const n=e.getProps();return dp(n,t,s!==void 0?s:n.custom,wT(e),kT(e))}let cp=$e;const Gn=e=>e*1e3,ms=e=>e/1e3,jT={current:!1},Nk=e=>Array.isArray(e)&&typeof e[0]=="number";function Sk(e){return!!(!e||typeof e=="string"&&Ck[e]||Nk(e)||Array.isArray(e)&&e.every(Sk))}const Gi=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,Ck={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gi([0,.65,.55,1]),circOut:Gi([.55,0,1,.45]),backIn:Gi([.31,.01,.66,-.59]),backOut:Gi([.33,1.53,.69,.99])};function Tk(e){if(e)return Nk(e)?Gi(e):Array.isArray(e)?e.map(Tk):Ck[e]}function NT(e,t,s,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:d}={}){const c={[t]:s};d&&(c.offset=d);const u=Tk(l);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function ST(e,{repeat:t,repeatType:s="loop"}){const n=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[n]}const _k=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,CT=1e-7,TT=12;function _T(e,t,s,n,a){let i,o,l=0;do o=t+(s-t)/2,i=_k(o,n,a)-e,i>0?s=o:t=o;while(Math.abs(i)>CT&&++l<TT);return o}function al(e,t,s,n){if(e===t&&s===n)return $e;const a=i=>_T(i,0,1,e,s);return i=>i===0||i===1?i:_k(a(i),t,n)}const IT=al(.42,0,1,1),PT=al(0,0,.58,1),Ik=al(.42,0,.58,1),AT=e=>Array.isArray(e)&&typeof e[0]!="number",Pk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ak=e=>t=>1-e(1-t),up=e=>1-Math.sin(Math.acos(e)),Ek=Ak(up),ET=Pk(up),Mk=al(.33,1.53,.69,.99),mp=Ak(Mk),MT=Pk(mp),RT=e=>(e*=2)<1?.5*mp(e):.5*(2-Math.pow(2,-10*(e-1))),LT={linear:$e,easeIn:IT,easeInOut:Ik,easeOut:PT,circIn:up,circInOut:ET,circOut:Ek,backIn:mp,backInOut:MT,backOut:Mk,anticipate:RT},Jg=e=>{if(Array.isArray(e)){cp(e.length===4);const[t,s,n,a]=e;return al(t,s,n,a)}else if(typeof e=="string")return LT[e];return e},hp=(e,t)=>s=>!!(sl(s)&&O3.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),Rk=(e,t,s)=>n=>{if(!sl(n))return n;const[a,i,o,l]=n.match(Qc);return{[e]:parseFloat(a),[t]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},DT=e=>hn(0,255,e),Hu={...ua,transform:e=>Math.round(DT(e))},Un={test:hp("rgb","red"),parse:Rk("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+Hu.transform(e)+", "+Hu.transform(t)+", "+Hu.transform(s)+", "+oo(io.transform(n))+")"};function OT(e){let t="",s="",n="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const jh={test:hp("#"),parse:OT,transform:Un.transform},La={test:hp("hsl","hue"),parse:Rk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+qr.transform(oo(t))+", "+qr.transform(oo(s))+", "+oo(io.transform(n))+")"},Pt={test:e=>Un.test(e)||jh.test(e)||La.test(e),parse:e=>Un.test(e)?Un.parse(e):La.test(e)?La.parse(e):jh.parse(e),transform:e=>sl(e)?e:e.hasOwnProperty("red")?Un.transform(e):La.transform(e)},De=(e,t,s)=>-s*e+s*t+e;function Gu(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function FT({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let a=0,i=0,o=0;if(!t)a=i=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,d=2*s-l;a=Gu(d,l,e+1/3),i=Gu(d,l,e),o=Gu(d,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Qu=(e,t,s)=>{const n=e*e;return Math.sqrt(Math.max(0,s*(t*t-n)+n))},UT=[jh,Un,La],BT=e=>UT.find(t=>t.test(e));function Xg(e){const t=BT(e);let s=t.parse(e);return t===La&&(s=FT(s)),s}const Lk=(e,t)=>{const s=Xg(e),n=Xg(t),a={...s};return i=>(a.red=Qu(s.red,n.red,i),a.green=Qu(s.green,n.green,i),a.blue=Qu(s.blue,n.blue,i),a.alpha=De(s.alpha,n.alpha,i),Un.transform(a))};function VT(e){var t,s;return isNaN(e)&&sl(e)&&(((t=e.match(Qc))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(ok))===null||s===void 0?void 0:s.length)||0)>0}const Dk={regex:L3,countKey:"Vars",token:"${v}",parse:$e},Ok={regex:ok,countKey:"Colors",token:"${c}",parse:Pt.parse},Fk={regex:Qc,countKey:"Numbers",token:"${n}",parse:ua.parse};function Ku(e,{regex:t,countKey:s,token:n,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+s]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(a)))}function oc(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&Ku(s,Dk),Ku(s,Ok),Ku(s,Fk),s}function Uk(e){return oc(e).values}function Bk(e){const{values:t,numColors:s,numVars:n,tokenised:a}=oc(e),i=t.length;return o=>{let l=a;for(let d=0;d<i;d++)d<n?l=l.replace(Dk.token,o[d]):d<n+s?l=l.replace(Ok.token,Pt.transform(o[d])):l=l.replace(Fk.token,oo(o[d]));return l}}const zT=e=>typeof e=="number"?0:e;function $T(e){const t=Uk(e);return Bk(e)(t.map(zT))}const xn={test:VT,parse:Uk,createTransformer:Bk,getAnimatableNone:$T},Vk=(e,t)=>s=>`${s>0?t:e}`;function zk(e,t){return typeof e=="number"?s=>De(e,t,s):Pt.test(e)?Lk(e,t):e.startsWith("var(")?Vk(e,t):Wk(e,t)}const $k=(e,t)=>{const s=[...e],n=s.length,a=e.map((i,o)=>zk(i,t[o]));return i=>{for(let o=0;o<n;o++)s[o]=a[o](i);return s}},WT=(e,t)=>{const s={...e,...t},n={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(n[a]=zk(e[a],t[a]));return a=>{for(const i in n)s[i]=n[i](a);return s}},Wk=(e,t)=>{const s=xn.createTransformer(t),n=oc(e),a=oc(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?on($k(n.values,a.values),s):Vk(e,t)},Vo=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},Zg=(e,t)=>s=>De(e,t,s);function qT(e){return typeof e=="number"?Zg:typeof e=="string"?Pt.test(e)?Lk:Wk:Array.isArray(e)?$k:typeof e=="object"?WT:Zg}function HT(e,t,s){const n=[],a=s||qT(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||$e:t;l=on(d,l)}n.push(l)}return n}function qk(e,t,{clamp:s=!0,ease:n,mixer:a}={}){const i=e.length;if(cp(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=HT(t,n,a),l=o.length,d=c=>{let u=0;if(l>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const m=Vo(e[u],e[u+1],c);return o[u](m)};return s?c=>d(hn(e[0],e[i-1],c)):d}function GT(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const a=Vo(0,t,n);e.push(De(s,1,a))}}function QT(e){const t=[0];return GT(t,e.length-1),t}function KT(e,t){return e.map(s=>s*t)}function YT(e,t){return e.map(()=>t||Ik).splice(0,e.length-1)}function lc({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const a=AT(n)?n.map(Jg):Jg(n),i={done:!1,value:t[0]},o=KT(s&&s.length===t.length?s:QT(t),e),l=qk(o,t,{ease:Array.isArray(a)?a:YT(t,a)});return{calculatedDuration:e,next:d=>(i.value=l(d),i.done=d>=e,i)}}function Hk(e,t){return t?e*(1e3/t):0}const JT=5;function Gk(e,t,s){const n=Math.max(t-JT,0);return Hk(s-e(n),t-n)}const Yu=.001,XT=.01,ZT=10,e_=.05,t_=1;function r_({duration:e=800,bounce:t=.25,velocity:s=0,mass:n=1}){let a,i,o=1-t;o=hn(e_,t_,o),e=hn(XT,ZT,ms(e)),o<1?(a=c=>{const u=c*o,m=u*e,h=u-s,x=Nh(c,o),g=Math.exp(-m);return Yu-h/x*g},i=c=>{const m=c*o*e,h=m*s+s,x=Math.pow(o,2)*Math.pow(c,2)*e,g=Math.exp(-m),v=Nh(Math.pow(c,2),o);return(-a(c)+Yu>0?-1:1)*((h-x)*g)/v}):(a=c=>{const u=Math.exp(-c*e),m=(c-s)*e+1;return-Yu+u*m},i=c=>{const u=Math.exp(-c*e),m=(s-c)*(e*e);return u*m});const l=5/e,d=n_(a,i,l);if(e=Gn(e),isNaN(d))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(d,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const s_=12;function n_(e,t,s){let n=s;for(let a=1;a<s_;a++)n=n-e(n)/t(n);return n}function Nh(e,t){return e*Math.sqrt(1-t*t)}const a_=["duration","bounce"],i_=["stiffness","damping","mass"];function e0(e,t){return t.some(s=>e[s]!==void 0)}function o_(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!e0(e,i_)&&e0(e,a_)){const s=r_(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function Qk({keyframes:e,restDelta:t,restSpeed:s,...n}){const a=e[0],i=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:d,mass:c,duration:u,velocity:m,isResolvedFromDuration:h}=o_({...n,velocity:-ms(n.velocity||0)}),x=m||0,g=d/(2*Math.sqrt(l*c)),v=i-a,w=ms(Math.sqrt(l/c)),f=Math.abs(v)<5;s||(s=f?.01:2),t||(t=f?.005:.5);let b;if(g<1){const y=Nh(w,g);b=k=>{const j=Math.exp(-g*w*k);return i-j*((x+g*w*v)/y*Math.sin(y*k)+v*Math.cos(y*k))}}else if(g===1)b=y=>i-Math.exp(-w*y)*(v+(x+w*v)*y);else{const y=w*Math.sqrt(g*g-1);b=k=>{const j=Math.exp(-g*w*k),S=Math.min(y*k,300);return i-j*((x+g*w*v)*Math.sinh(S)+y*v*Math.cosh(S))/y}}return{calculatedDuration:h&&u||null,next:y=>{const k=b(y);if(h)o.done=y>=u;else{let j=x;y!==0&&(g<1?j=Gk(b,y,k):j=0);const S=Math.abs(j)<=s,P=Math.abs(i-k)<=t;o.done=S&&P}return o.value=o.done?i:k,o}}}function t0({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:d,restDelta:c=.5,restSpeed:u}){const m=e[0],h={done:!1,value:m},x=R=>l!==void 0&&R<l||d!==void 0&&R>d,g=R=>l===void 0?d:d===void 0||Math.abs(l-R)<Math.abs(d-R)?l:d;let v=s*t;const w=m+v,f=o===void 0?w:o(w);f!==w&&(v=f-m);const b=R=>-v*Math.exp(-R/n),y=R=>f+b(R),k=R=>{const L=b(R),N=y(R);h.done=Math.abs(L)<=c,h.value=h.done?f:N};let j,S;const P=R=>{x(h.value)&&(j=R,S=Qk({keyframes:[h.value,g(h.value)],velocity:Gk(y,R,h.value),damping:a,stiffness:i,restDelta:c,restSpeed:u}))};return P(0),{calculatedDuration:null,next:R=>{let L=!1;return!S&&j===void 0&&(L=!0,k(R),P(R)),j!==void 0&&R>j?S.next(R-j):(!L&&k(R),h)}}}const l_=e=>{const t=({timestamp:s})=>e(s);return{start:()=>Ie.update(t,!0),stop:()=>vs(t),now:()=>kt.isProcessing?kt.timestamp:performance.now()}},r0=2e4;function s0(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<r0;)t+=s,n=e.next(t);return t>=r0?1/0:t}const d_={decay:t0,inertia:t0,tween:lc,keyframes:lc,spring:Qk};function dc({autoplay:e=!0,delay:t=0,driver:s=l_,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:u,onUpdate:m,...h}){let x=1,g=!1,v,w;const f=()=>{w=new Promise(q=>{v=q})};f();let b;const y=d_[a]||lc;let k;y!==lc&&typeof n[0]!="number"&&(k=qk([0,100],n,{clamp:!1}),n=[0,100]);const j=y({...h,keyframes:n});let S;l==="mirror"&&(S=y({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let P="idle",R=null,L=null,N=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=s0(j));const{calculatedDuration:I}=j;let A=1/0,W=1/0;I!==null&&(A=I+o,W=A*(i+1)-o);let G=0;const se=q=>{if(L===null)return;x>0&&(L=Math.min(L,q)),x<0&&(L=Math.min(q-W/x,L)),R!==null?G=R:G=Math.round(q-L)*x;const ce=G-t*(x>=0?1:-1),He=x>=0?ce<0:ce>W;G=Math.max(ce,0),P==="finished"&&R===null&&(G=W);let ee=G,me=j;if(i){const Ft=Math.min(G,W)/A;let ot=Math.floor(Ft),Yt=Ft%1;!Yt&&Ft>=1&&(Yt=1),Yt===1&&ot--,ot=Math.min(ot,i+1),!!(ot%2)&&(l==="reverse"?(Yt=1-Yt,o&&(Yt-=o/A)):l==="mirror"&&(me=S)),ee=hn(0,1,Yt)*A}const fe=He?{done:!1,value:n[0]}:me.next(ee);k&&(fe.value=k(fe.value));let{done:yt}=fe;!He&&I!==null&&(yt=x>=0?G>=W:G<=0);const it=R===null&&(P==="finished"||P==="running"&&yt);return m&&m(fe.value),it&&z(),fe},Q=()=>{b&&b.stop(),b=void 0},de=()=>{P="idle",Q(),v(),f(),L=N=null},z=()=>{P="finished",u&&u(),Q(),v()},E=()=>{if(g)return;b||(b=s(se));const q=b.now();d&&d(),R!==null?L=q-R:(!L||P==="finished")&&(L=q),P==="finished"&&f(),N=L,R=null,P="running",b.start()};e&&E();const B={then(q,ce){return w.then(q,ce)},get time(){return ms(G)},set time(q){q=Gn(q),G=q,R!==null||!b||x===0?R=q:L=b.now()-q/x},get duration(){const q=j.calculatedDuration===null?s0(j):j.calculatedDuration;return ms(q)},get speed(){return x},set speed(q){q===x||!b||(x=q,B.time=ms(G))},get state(){return P},play:E,pause:()=>{P="paused",R=G},stop:()=>{g=!0,P!=="idle"&&(P="idle",c&&c(),de())},cancel:()=>{N!==null&&se(N),de()},complete:()=>{P="finished"},sample:q=>(L=0,se(q))};return B}function c_(e){let t;return()=>(t===void 0&&(t=e()),t)}const u_=c_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),m_=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Yl=10,h_=2e4,x_=(e,t)=>t.type==="spring"||e==="backgroundColor"||!Sk(t.ease);function p_(e,t,{onUpdate:s,onComplete:n,...a}){if(!(u_()&&m_.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,d,c=!1;const u=()=>{d=new Promise(y=>{l=y})};u();let{keyframes:m,duration:h=300,ease:x,times:g}=a;if(x_(t,a)){const y=dc({...a,repeat:0,delay:0});let k={done:!1,value:m[0]};const j=[];let S=0;for(;!k.done&&S<h_;)k=y.sample(S),j.push(k.value),S+=Yl;g=void 0,m=j,h=S-Yl,x="linear"}const v=NT(e.owner.current,t,m,{...a,duration:h,ease:x,times:g}),w=()=>{c=!1,v.cancel()},f=()=>{c=!0,Ie.update(w),l(),u()};return v.onfinish=()=>{c||(e.set(ST(m,a)),n&&n(),f())},{then(y,k){return d.then(y,k)},attachTimeline(y){return v.timeline=y,v.onfinish=null,$e},get time(){return ms(v.currentTime||0)},set time(y){v.currentTime=Gn(y)},get speed(){return v.playbackRate},set speed(y){v.playbackRate=y},get duration(){return ms(h)},play:()=>{o||(v.play(),vs(w))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:y}=v;if(y){const k=dc({...a,autoplay:!1});e.setWithVelocity(k.sample(y-Yl).value,k.sample(y).value,Yl)}f()},complete:()=>{c||v.finish()},cancel:f}}function f_({keyframes:e,delay:t,onUpdate:s,onComplete:n}){const a=()=>(s&&s(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:$e,pause:$e,stop:$e,then:i=>(i(),Promise.resolve()),cancel:$e,complete:$e});return t?dc({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const g_={type:"spring",stiffness:500,damping:25,restSpeed:10},b_=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),y_={type:"keyframes",duration:.8},v_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},w_=(e,{keyframes:t})=>t.length>2?y_:ca.has(e)?e.startsWith("scale")?b_(t[1]):g_:v_,Sh=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(xn.test(t)||t==="0")&&!t.startsWith("url(")),k_=new Set(["brightness","contrast","saturate","opacity"]);function j_(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(Qc)||[];if(!n)return e;const a=s.replace(n,"");let i=k_.has(t)?1:0;return n!==s&&(i*=100),t+"("+i+a+")"}const N_=/([a-z-]*)\(.*?\)/g,Ch={...xn,getAnimatableNone:e=>{const t=e.match(N_);return t?t.map(j_).join(" "):e}},S_={...lk,color:Pt,backgroundColor:Pt,outlineColor:Pt,fill:Pt,stroke:Pt,borderColor:Pt,borderTopColor:Pt,borderRightColor:Pt,borderBottomColor:Pt,borderLeftColor:Pt,filter:Ch,WebkitFilter:Ch},xp=e=>S_[e];function Kk(e,t){let s=xp(e);return s!==Ch&&(s=xn),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const Yk=e=>/^0[^.\s]+$/.test(e);function C_(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Yk(e)}function T_(e,t,s,n){const a=Sh(t,s);let i;Array.isArray(s)?i=[...s]:i=[null,s];const o=n.from!==void 0?n.from:e.get();let l;const d=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),C_(i[c])&&d.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(a&&d.length&&l)for(let c=0;c<d.length;c++){const u=d[c];i[u]=Kk(t,l)}return i}function __({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}function pp(e,t){return e[t]||e.default||e}const I_={skipAnimations:!1},fp=(e,t,s,n={})=>a=>{const i=pp(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Gn(o);const d=T_(t,e,s,i),c=d[0],u=d[d.length-1],m=Sh(e,c),h=Sh(e,u);let x={keyframes:d,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(__(i)||(x={...x,...w_(e,x)}),x.duration&&(x.duration=Gn(x.duration)),x.repeatDelay&&(x.repeatDelay=Gn(x.repeatDelay)),!m||!h||jT.current||i.type===!1||I_.skipAnimations)return f_(x);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=p_(t,e,x);if(g)return g}return dc(x)};function cc(e){return!!(Kt(e)&&e.add)}const Jk=e=>/^\-?\d*\.?\d+$/.test(e);function gp(e,t){e.indexOf(t)===-1&&e.push(t)}function bp(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class yp{constructor(){this.subscriptions=[]}add(t){return gp(this.subscriptions,t),()=>bp(this.subscriptions,t)}notify(t,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const P_=e=>!isNaN(parseFloat(e));class A_{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=kt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Ie.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ie.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=P_(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new yp);const n=this.events[t].add(s);return t==="change"?()=>{n(),Ie.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Hk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function li(e,t){return new A_(e,t)}const Xk=e=>t=>t.test(e),E_={test:e=>e==="auto",parse:e=>e},Zk=[ua,ne,qr,Os,U3,F3,E_],Di=e=>Zk.find(Xk(e)),M_=[...Zk,Pt,xn],R_=e=>M_.find(Xk(e));function L_(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,li(s))}function D_(e,t){const s=Yc(e,t);let{transitionEnd:n={},transition:a={},...i}=s?e.makeTargetAnimatable(s,!1):{};i={...i,...n};for(const o in i){const l=Z3(i[o]);L_(e,o,l)}}function O_(e,t,s){var n,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const d=i[l],c=t[d];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(a=(n=s[d])!==null&&n!==void 0?n:e.readValue(d))!==null&&a!==void 0?a:t[d]),u!=null&&(typeof u=="string"&&(Jk(u)||Yk(u))?u=parseFloat(u):!R_(u)&&xn.test(c)&&(u=Kk(d,c)),e.addValue(d,li(u,{owner:e})),s[d]===void 0&&(s[d]=u),u!==null&&e.setBaseTarget(d,u))}}function F_(e,t){return t?(t[e]||t.default||t).from:void 0}function U_(e,t,s){const n={};for(const a in e){const i=F_(a,t);if(i!==void 0)n[a]=i;else{const o=s.getValue(a);o&&(n[a]=o.get())}}return n}function B_({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function V_(e,t){const s=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}else return s!==t}function ej(e,t,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const d=e.getValue("willChange");n&&(i=n);const c=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const m in l){const h=e.getValue(m),x=l[m];if(!h||x===void 0||u&&B_(u,m))continue;const g={delay:s,elapsed:0,...pp(i||{},m)};if(window.HandoffAppearAnimations){const f=e.getProps()[tk];if(f){const b=window.HandoffAppearAnimations(f,m,h,Ie);b!==null&&(g.elapsed=b,g.isHandoff=!0)}}let v=!g.isHandoff&&!V_(h,x);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(v=!1),h.animation&&(v=!1),v)continue;h.start(fp(m,h,x,e.shouldReduceMotion&&ca.has(m)?{type:!1}:g));const w=h.animation;cc(d)&&(d.add(m),w.then(()=>d.remove(m))),c.push(w)}return o&&Promise.all(c).then(()=>{o&&D_(e,o)}),c}function Th(e,t,s={}){const n=Yc(e,t,s.custom);let{transition:a=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const i=n?()=>Promise.all(ej(e,n,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:m}=a;return z_(e,t,c+d,u,m,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,c]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>c())}else return Promise.all([i(),o(s.delay)])}function z_(e,t,s=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,d=a===1?(c=0)=>c*n:(c=0)=>l-c*n;return Array.from(e.variantChildren).sort($_).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(Th(c,t,{...i,delay:s+d(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function $_(e,t){return e.sortNodePosition(t)}function W_(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>Th(e,i,s));n=Promise.all(a)}else if(typeof t=="string")n=Th(e,t,s);else{const a=typeof t=="function"?Yc(e,t,s.custom):t;n=Promise.all(ej(e,a,s))}return n.then(()=>e.notify("AnimationComplete",t))}const q_=[...ep].reverse(),H_=ep.length;function G_(e){return t=>Promise.all(t.map(({animation:s,options:n})=>W_(e,s,n)))}function Q_(e){let t=G_(e);const s=Y_();let n=!0;const a=(d,c)=>{const u=Yc(e,c);if(u){const{transition:m,transitionEnd:h,...x}=u;d={...d,...x,...h}}return d};function i(d){t=d(e)}function o(d,c){const u=e.getProps(),m=e.getVariantContext(!0)||{},h=[],x=new Set;let g={},v=1/0;for(let f=0;f<H_;f++){const b=q_[f],y=s[b],k=u[b]!==void 0?u[b]:m[b],j=Uo(k),S=b===c?y.isActive:null;S===!1&&(v=f);let P=k===m[b]&&k!==u[b]&&j;if(P&&n&&e.manuallyAnimateOnMount&&(P=!1),y.protectedKeys={...g},!y.isActive&&S===null||!k&&!y.prevProp||Hc(k)||typeof k=="boolean")continue;let L=K_(y.prevProp,k)||b===c&&y.isActive&&!P&&j||f>v&&j,N=!1;const I=Array.isArray(k)?k:[k];let A=I.reduce(a,{});S===!1&&(A={});const{prevResolvedValues:W={}}=y,G={...W,...A},se=Q=>{L=!0,x.has(Q)&&(N=!0,x.delete(Q)),y.needsAnimating[Q]=!0};for(const Q in G){const de=A[Q],z=W[Q];if(g.hasOwnProperty(Q))continue;let E=!1;ic(de)&&ic(z)?E=!jk(de,z):E=de!==z,E?de!==void 0?se(Q):x.add(Q):de!==void 0&&x.has(Q)?se(Q):y.protectedKeys[Q]=!0}y.prevProp=k,y.prevResolvedValues=A,y.isActive&&(g={...g,...A}),n&&e.blockInitialAnimation&&(L=!1),L&&(!P||N)&&h.push(...I.map(Q=>({animation:Q,options:{type:b,...d}})))}if(x.size){const f={};x.forEach(b=>{const y=e.getBaseTarget(b);y!==void 0&&(f[b]=y)}),h.push({animation:f})}let w=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(w=!1),n=!1,w?t(h):Promise.resolve()}function l(d,c,u){var m;if(s[d].isActive===c)return Promise.resolve();(m=e.variantChildren)===null||m===void 0||m.forEach(x=>{var g;return(g=x.animationState)===null||g===void 0?void 0:g.setActive(d,c)}),s[d].isActive=c;const h=o(u,d);for(const x in s)s[x].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s}}function K_(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jk(t,e):!1}function Tn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Y_(){return{animate:Tn(!0),whileInView:Tn(),whileHover:Tn(),whileTap:Tn(),whileDrag:Tn(),whileFocus:Tn(),exit:Tn()}}class J_ extends wn{constructor(t){super(t),t.animationState||(t.animationState=Q_(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),Hc(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let X_=0;class Z_ extends wn{constructor(){super(...arguments),this.id=X_++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});s&&!t&&i.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const eI={animation:{Feature:J_},exit:{Feature:Z_}},n0=(e,t)=>Math.abs(e-t);function tI(e,t){const s=n0(e.x,t.x),n=n0(e.y,t.y);return Math.sqrt(s**2+n**2)}class tj{constructor(t,s,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Xu(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,x=tI(m.offset,{x:0,y:0})>=3;if(!h&&!x)return;const{point:g}=m,{timestamp:v}=kt;this.history.push({...g,timestamp:v});const{onStart:w,onMove:f}=this.handlers;h||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),f&&f(this.lastMoveEvent,m)},this.handlePointerMove=(m,h)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Ju(h,this.transformPagePoint),Ie.update(this.updatePoint,!0)},this.handlePointerUp=(m,h)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Xu(m.type==="pointercancel"?this.lastMoveEventInfo:Ju(h,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,w),g&&g(m,w)},!bk(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.contextWindow=a||window;const o=Kc(t),l=Ju(o,this.transformPagePoint),{point:d}=l,{timestamp:c}=kt;this.history=[{...d,timestamp:c}];const{onSessionStart:u}=s;u&&u(t,Xu(l,this.history)),this.removeListeners=on(us(this.contextWindow,"pointermove",this.handlePointerMove),us(this.contextWindow,"pointerup",this.handlePointerUp),us(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),vs(this.updatePoint)}}function Ju(e,t){return t?{point:t(e.point)}:e}function a0(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Xu({point:e},t){return{point:e,delta:a0(e,rj(t)),offset:a0(e,rI(t)),velocity:sI(t,.1)}}function rI(e){return e[0]}function rj(e){return e[e.length-1]}function sI(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const a=rj(e);for(;s>=0&&(n=e[s],!(a.timestamp-n.timestamp>Gn(t)));)s--;if(!n)return{x:0,y:0};const i=ms(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function sr(e){return e.max-e.min}function _h(e,t=0,s=.01){return Math.abs(e-t)<=s}function i0(e,t,s,n=.5){e.origin=n,e.originPoint=De(t.min,t.max,e.origin),e.scale=sr(s)/sr(t),(_h(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=De(s.min,s.max,e.origin)-e.originPoint,(_h(e.translate)||isNaN(e.translate))&&(e.translate=0)}function lo(e,t,s,n){i0(e.x,t.x,s.x,n?n.originX:void 0),i0(e.y,t.y,s.y,n?n.originY:void 0)}function o0(e,t,s){e.min=s.min+t.min,e.max=e.min+sr(t)}function nI(e,t,s){o0(e.x,t.x,s.x),o0(e.y,t.y,s.y)}function l0(e,t,s){e.min=t.min-s.min,e.max=e.min+sr(t)}function co(e,t,s){l0(e.x,t.x,s.x),l0(e.y,t.y,s.y)}function aI(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?De(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?De(s,e,n.max):Math.min(e,s)),e}function d0(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function iI(e,{top:t,left:s,bottom:n,right:a}){return{x:d0(e.x,s,a),y:d0(e.y,t,n)}}function c0(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function oI(e,t){return{x:c0(e.x,t.x),y:c0(e.y,t.y)}}function lI(e,t){let s=.5;const n=sr(e),a=sr(t);return a>n?s=Vo(t.min,t.max-n,e.min):n>a&&(s=Vo(e.min,e.max-a,t.min)),hn(0,1,s)}function dI(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const Ih=.35;function cI(e=Ih){return e===!1?e=0:e===!0&&(e=Ih),{x:u0(e,"left","right"),y:u0(e,"top","bottom")}}function u0(e,t,s){return{min:m0(e,t),max:m0(e,s)}}function m0(e,t){return typeof e=="number"?e:e[t]||0}const h0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Da=()=>({x:h0(),y:h0()}),x0=()=>({min:0,max:0}),Qe=()=>({x:x0(),y:x0()});function cr(e){return[e("x"),e("y")]}function sj({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function uI({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function mI(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Zu(e){return e===void 0||e===1}function Ph({scale:e,scaleX:t,scaleY:s}){return!Zu(e)||!Zu(t)||!Zu(s)}function Pn(e){return Ph(e)||nj(e)||e.z||e.rotate||e.rotateX||e.rotateY}function nj(e){return p0(e.x)||p0(e.y)}function p0(e){return e&&e!=="0%"}function uc(e,t,s){const n=e-s,a=t*n;return s+a}function f0(e,t,s,n,a){return a!==void 0&&(e=uc(e,a,n)),uc(e,s,n)+t}function Ah(e,t=0,s=1,n,a){e.min=f0(e.min,t,s,n,a),e.max=f0(e.max,t,s,n,a)}function aj(e,{x:t,y:s}){Ah(e.x,t.translate,t.scale,t.originPoint),Ah(e.y,s.translate,s.scale,s.originPoint)}function hI(e,t,s,n=!1){const a=s.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Oa(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,aj(e,o)),n&&Pn(i.latestValues)&&Oa(e,i.latestValues))}t.x=g0(t.x),t.y=g0(t.y)}function g0(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Bs(e,t){e.min=e.min+t,e.max=e.max+t}function b0(e,t,[s,n,a]){const i=t[a]!==void 0?t[a]:.5,o=De(e.min,e.max,i);Ah(e,t[s],t[n],o,t.scale)}const xI=["x","scaleX","originX"],pI=["y","scaleY","originY"];function Oa(e,t){b0(e.x,t,xI),b0(e.y,t,pI)}function ij(e,t){return sj(mI(e.getBoundingClientRect(),t))}function fI(e,t,s){const n=ij(e,s),{scroll:a}=t;return a&&(Bs(n.x,a.offset.x),Bs(n.y,a.offset.y)),n}const oj=({current:e})=>e?e.ownerDocument.defaultView:null,gI=new WeakMap;class bI{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Qe(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Kc(u,"page").point)},i=(u,m)=>{const{drag:h,dragPropagation:x,onDragStart:g}=this.getProps();if(h&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=vk(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cr(w=>{let f=this.getAxisMotionValue(w).get()||0;if(qr.test(f)){const{projection:b}=this.visualElement;if(b&&b.layout){const y=b.layout.layoutBox[w];y&&(f=sr(y)*(parseFloat(f)/100))}}this.originPoint[w]=f}),g&&Ie.update(()=>g(u,m),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,m)=>{const{dragPropagation:h,dragDirectionLock:x,onDirectionLock:g,onDrag:v}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:w}=m;if(x&&this.currentDirection===null){this.currentDirection=yI(w),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),v&&v(u,m)},l=(u,m)=>this.stop(u,m),d=()=>cr(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new tj(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:oj(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Ie.update(()=>i(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:a}=this.getProps();if(!n||!Jl(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=aI(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;s&&Ra(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=iI(a.layoutBox,s):this.constraints=!1,this.elastic=cI(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&cr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=dI(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ra(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=fI(n,a.root,this.visualElement.getTransformPagePoint());let o=oI(a.layout.layoutBox,i);if(s){const l=s(uI(o));this.hasMutatedConstraints=!!l,l&&(o=sj(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=cr(u=>{if(!Jl(u,s,this.currentDirection))return;let m=d&&d[u]||{};o&&(m={min:0,max:0});const h=a?200:1e6,x=a?40:1e7,g={type:"inertia",velocity:n?t[u]:0,bounceStiffness:h,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return n.start(fp(t,n,0,s))}stopAnimation(){cr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){cr(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){cr(s=>{const{drag:n}=this.getProps();if(!Jl(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(t[s]-De(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ra(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};cr(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();a[o]=lI({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),cr(o=>{if(!Jl(o,t,null))return;const l=this.getAxisMotionValue(o),{min:d,max:c}=this.constraints[o];l.set(De(d,c,a[o]))})}addListeners(){if(!this.visualElement.current)return;gI.set(this.visualElement,this);const t=this.visualElement.current,s=us(t,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Ra(d)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=os(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(cr(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=d[u].translate,m.set(m.get()+d[u].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=Ih,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Jl(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function yI(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class vI extends wn{constructor(t){super(t),this.removeGroupControls=$e,this.removeListeners=$e,this.controls=new bI(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$e}unmount(){this.removeGroupControls(),this.removeListeners()}}const y0=e=>(t,s)=>{e&&Ie.update(()=>e(t,s))};class wI extends wn{constructor(){super(...arguments),this.removePointerDownListener=$e}onPointerDown(t){this.session=new tj(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:oj(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:y0(t),onStart:y0(s),onMove:n,onEnd:(i,o)=>{delete this.session,a&&Ie.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=us(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function kI(){const e=p.useContext(Wc);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,a=p.useId();return p.useEffect(()=>n(a),[]),!t&&s?[!1,()=>s&&s(a)]:[!0]}const bd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function v0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Oi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ne.test(e))e=parseFloat(e);else return e;const s=v0(e,t.target.x),n=v0(e,t.target.y);return`${s}% ${n}%`}},jI={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,a=xn.parse(e);if(a.length>5)return n;const i=xn.createTransformer(e),o=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,d=s.y.scale*t.y;a[0+o]/=l,a[1+o]/=d;const c=De(l,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=c),typeof a[3+o]=="number"&&(a[3+o]/=c),i(a)}};class NI extends Qr.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;A3(SI),i&&(s.group&&s.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),bd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Ie.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function lj(e){const[t,s]=kI(),n=p.useContext(rp);return Qr.createElement(NI,{...e,layoutGroup:n,switchLayoutGroup:p.useContext(sk),isPresent:t,safeToRemove:s})}const SI={borderRadius:{...Oi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oi,borderTopRightRadius:Oi,borderBottomLeftRadius:Oi,borderBottomRightRadius:Oi,boxShadow:jI},dj=["TopLeft","TopRight","BottomLeft","BottomRight"],CI=dj.length,w0=e=>typeof e=="string"?parseFloat(e):e,k0=e=>typeof e=="number"||ne.test(e);function TI(e,t,s,n,a,i){a?(e.opacity=De(0,s.opacity!==void 0?s.opacity:1,_I(n)),e.opacityExit=De(t.opacity!==void 0?t.opacity:1,0,II(n))):i&&(e.opacity=De(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<CI;o++){const l=`border${dj[o]}Radius`;let d=j0(t,l),c=j0(s,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||k0(d)===k0(c)?(e[l]=Math.max(De(w0(d),w0(c),n),0),(qr.test(c)||qr.test(d))&&(e[l]+="%")):e[l]=c}(t.rotate||s.rotate)&&(e.rotate=De(t.rotate||0,s.rotate||0,n))}function j0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const _I=cj(0,.5,Ek),II=cj(.5,.95,$e);function cj(e,t,s){return n=>n<e?0:n>t?1:s(Vo(e,t,n))}function N0(e,t){e.min=t.min,e.max=t.max}function dr(e,t){N0(e.x,t.x),N0(e.y,t.y)}function S0(e,t,s,n,a){return e-=t,e=uc(e,1/s,n),a!==void 0&&(e=uc(e,1/a,n)),e}function PI(e,t=0,s=1,n=.5,a,i=e,o=e){if(qr.test(t)&&(t=parseFloat(t),t=De(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=De(i.min,i.max,n);e===i&&(l-=t),e.min=S0(e.min,t,s,l,a),e.max=S0(e.max,t,s,l,a)}function C0(e,t,[s,n,a],i,o){PI(e,t[s],t[n],t[a],t.scale,i,o)}const AI=["x","scaleX","originX"],EI=["y","scaleY","originY"];function T0(e,t,s,n){C0(e.x,t,AI,s?s.x:void 0,n?n.x:void 0),C0(e.y,t,EI,s?s.y:void 0,n?n.y:void 0)}function _0(e){return e.translate===0&&e.scale===1}function uj(e){return _0(e.x)&&_0(e.y)}function MI(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function mj(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function I0(e){return sr(e.x)/sr(e.y)}class RI{constructor(){this.members=[]}add(t){gp(this.members,t),t.scheduleRender()}remove(t){if(bp(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function P0(e,t,s){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:d,rotateX:c,rotateY:u}=s;d&&(n+=`rotate(${d}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const LI=(e,t)=>e.depth-t.depth;class DI{constructor(){this.children=[],this.isDirty=!1}add(t){gp(this.children,t),this.isDirty=!0}remove(t){bp(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LI),this.isDirty=!1,this.children.forEach(t)}}function OI(e,t){const s=performance.now(),n=({timestamp:a})=>{const i=a-s;i>=t&&(vs(n),e(i-t))};return Ie.read(n,!0),()=>vs(n)}function FI(e){window.MotionDebug&&window.MotionDebug.record(e)}function UI(e){return e instanceof SVGElement&&e.tagName!=="svg"}function BI(e,t,s){const n=Kt(e)?e:li(e);return n.start(fp("",n,t,s)),n.animation}const A0=["","X","Y","Z"],VI={visibility:"hidden"},E0=1e3;let zI=0;const An={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function hj({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=zI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,An.totalNodes=An.resolvedTargetDeltas=An.recalculatedProjection=0,this.nodes.forEach(qI),this.nodes.forEach(YI),this.nodes.forEach(JI),this.nodes.forEach(HI),FI(An)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new DI)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new yp),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=UI(o),this.instance=o;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),e){let m;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=OI(h,250),bd.hasAnimatedSinceResize&&(bd.hasAnimatedSinceResize=!1,this.nodes.forEach(R0))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeTargetChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||rP,{onLayoutAnimationStart:w,onLayoutAnimationComplete:f}=u.getProps(),b=!this.targetLayout||!mj(this.targetLayout,g)||x,y=!h&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,y);const k={...pp(v,"layout"),onPlay:w,onComplete:f};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else h||R0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,vs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(XI),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(M0);return}this.isUpdating||this.nodes.forEach(QI),this.isUpdating=!1,this.nodes.forEach(KI),this.nodes.forEach($I),this.nodes.forEach(WI),this.clearAllSnapshots();const l=performance.now();kt.delta=hn(0,1e3/60,l-kt.timestamp),kt.timestamp=l,kt.isProcessing=!0,$u.update.process(kt),$u.preRender.process(kt),$u.render.process(kt),kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(GI),this.sharedNodes.forEach(ZI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Qe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!uj(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||Pn(this.latestValues)||u)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),sP(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Qe();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(Bs(l.x,d.offset.x),Bs(l.y,d.offset.y)),l}removeElementScroll(o){const l=Qe();dr(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:u,options:m}=c;if(c!==this.root&&u&&m.layoutScroll){if(u.isRoot){dr(l,o);const{scroll:h}=this.root;h&&(Bs(l.x,-h.offset.x),Bs(l.y,-h.offset.y))}Bs(l.x,u.offset.x),Bs(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const d=Qe();dr(d,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Oa(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Pn(u.latestValues)&&Oa(d,u.latestValues)}return Pn(this.latestValues)&&Oa(d,this.latestValues),d}removeTransform(o){const l=Qe();dr(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!Pn(c.latestValues))continue;Ph(c.latestValues)&&c.updateSnapshot();const u=Qe(),m=c.measurePageBox();dr(u,m),T0(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Pn(this.latestValues)&&T0(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=kt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qe(),this.relativeTargetOrigin=Qe(),co(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Qe(),this.targetWithTransforms=Qe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nI(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),aj(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Qe(),this.relativeTargetOrigin=Qe(),co(this.relativeTargetOrigin,this.target,x.target),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}An.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Ph(this.parent.latestValues)||nj(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===kt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;dr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,x=this.treeScale.y;hI(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=Da(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Da(),this.projectionDeltaWithTransform=Da());const v=this.projectionTransform;lo(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=P0(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==h||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),An.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},m=Da();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=Qe(),x=d?d.source:void 0,g=this.layout?this.layout.source:void 0,v=x!==g,w=this.getStack(),f=!w||w.members.length<=1,b=!!(v&&!f&&this.options.crossfade===!0&&!this.path.some(tP));this.animationProgress=0;let y;this.mixTargetDelta=k=>{const j=k/1e3;L0(m.x,o.x,j),L0(m.y,o.y,j),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(co(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),eP(this.relativeTarget,this.relativeTargetOrigin,h,j),y&&MI(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=Qe()),dr(y,this.relativeTarget)),v&&(this.animationValues=u,TI(u,c,this.latestValues,j,b,f)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(vs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ie.update(()=>{bd.hasAnimatedSinceResize=!0,this.currentAnimation=BI(0,E0,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(E0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=o;if(!(!l||!d||!c)){if(this!==o&&this.layout&&c&&xj(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||Qe();const m=sr(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+m;const h=sr(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+h}dr(l,d),Oa(l,u),lo(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new RI),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<A0.length;u++){const m="rotate"+A0[u];d[m]&&(c[m]=d[m],o.setStaticValue(m,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return VI;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=gd(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=gd(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Pn(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const h=m.animationValues||m.latestValues;this.applyTransformsToTarget(),c.transform=P0(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x,y:g}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,m.animationValues?c.opacity=m===this?(d=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=m===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in nc){if(h[v]===void 0)continue;const{correct:w,applyTo:f}=nc[v],b=c.transform==="none"?h[v]:w(h[v],m);if(f){const y=f.length;for(let k=0;k<y;k++)c[f[k]]=b}else c[v]=b}return this.options.layoutId&&(c.pointerEvents=m===this?gd(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(M0),this.root.sharedNodes.clear()}}}function $I(e){e.updateLayout()}function WI(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=s.source!==e.layout.source;i==="size"?cr(m=>{const h=o?s.measuredBox[m]:s.layoutBox[m],x=sr(h);h.min=n[m].min,h.max=h.min+x}):xj(i,s.layoutBox,n)&&cr(m=>{const h=o?s.measuredBox[m]:s.layoutBox[m],x=sr(n[m]);h.max=h.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+x)});const l=Da();lo(l,n,s.layoutBox);const d=Da();o?lo(d,e.applyTransform(a,!0),s.measuredBox):lo(d,n,s.layoutBox);const c=!uj(l);let u=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:x}=m;if(h&&x){const g=Qe();co(g,s.layoutBox,h.layoutBox);const v=Qe();co(v,n,x.layoutBox),mj(g,v)||(u=!0),m.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function qI(e){An.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function HI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function GI(e){e.clearSnapshot()}function M0(e){e.clearMeasurements()}function QI(e){e.isLayoutDirty=!1}function KI(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function R0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function YI(e){e.resolveTargetDelta()}function JI(e){e.calcProjection()}function XI(e){e.resetRotation()}function ZI(e){e.removeLeadSnapshot()}function L0(e,t,s){e.translate=De(t.translate,0,s),e.scale=De(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function D0(e,t,s,n){e.min=De(t.min,s.min,n),e.max=De(t.max,s.max,n)}function eP(e,t,s,n){D0(e.x,t.x,s.x,n),D0(e.y,t.y,s.y,n)}function tP(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const rP={duration:.45,ease:[.4,0,.1,1]},O0=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),F0=O0("applewebkit/")&&!O0("chrome/")?Math.round:$e;function U0(e){e.min=F0(e.min),e.max=F0(e.max)}function sP(e){U0(e.x),U0(e.y)}function xj(e,t,s){return e==="position"||e==="preserve-aspect"&&!_h(I0(t),I0(s),.2)}const nP=hj({attachResizeListener:(e,t)=>os(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),em={current:void 0},pj=hj({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!em.current){const e=new nP({});e.mount(window),e.setOptions({layoutScroll:!0}),em.current=e}return em.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),aP={pan:{Feature:wI},drag:{Feature:vI,ProjectionNode:pj,MeasureLayout:lj}},iP=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function oP(e){const t=iP.exec(e);if(!t)return[,];const[,s,n]=t;return[s,n]}function Eh(e,t,s=1){const[n,a]=oP(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return Jk(o)?parseFloat(o):o}else return wh(a)?Eh(a,t,s+1):a}function lP(e,{...t},s){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(a=>{const i=a.get();if(!wh(i))return;const o=Eh(i,n);o&&a.set(o)});for(const a in t){const i=t[a];if(!wh(i))continue;const o=Eh(i,n);o&&(t[a]=o,s||(s={}),s[a]===void 0&&(s[a]=i))}return{target:t,transitionEnd:s}}const dP=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),fj=e=>dP.has(e),cP=e=>Object.keys(e).some(fj),B0=e=>e===ua||e===ne,V0=(e,t)=>parseFloat(e.split(", ")[t]),z0=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return V0(a[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?V0(i[1],e):0}},uP=new Set(["x","y","z"]),mP=rl.filter(e=>!uP.has(e));function hP(e){const t=[];return mP.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const di={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:z0(4,13),y:z0(5,14)};di.translateX=di.x;di.translateY=di.y;const xP=(e,t,s)=>{const n=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(c=>{l[c]=di[c](n,i)}),t.render();const d=t.measureViewportBox();return s.forEach(c=>{const u=t.getValue(c);u&&u.jump(l[c]),e[c]=di[c](d,i)}),e},pP=(e,t,s={},n={})=>{t={...t},n={...n};const a=Object.keys(t).filter(fj);let i=[],o=!1;const l=[];if(a.forEach(d=>{const c=e.getValue(d);if(!e.hasValue(d))return;let u=s[d],m=Di(u);const h=t[d];let x;if(ic(h)){const g=h.length,v=h[0]===null?1:0;u=h[v],m=Di(u);for(let w=v;w<g&&h[w]!==null;w++)x?cp(Di(h[w])===x):x=Di(h[w])}else x=Di(h);if(m!==x)if(B0(m)&&B0(x)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof h=="string"?t[d]=parseFloat(h):Array.isArray(h)&&x===ne&&(t[d]=h.map(parseFloat))}else m!=null&&m.transform&&(x!=null&&x.transform)&&(u===0||h===0)?u===0?c.set(x.transform(u)):t[d]=m.transform(h):(o||(i=hP(e),o=!0),l.push(d),n[d]=n[d]!==void 0?n[d]:t[d],c.jump(h))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=xP(t,e,l);return i.length&&i.forEach(([u,m])=>{e.getValue(u).set(m)}),e.render(),qc&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:n}}else return{target:t,transitionEnd:n}};function fP(e,t,s,n){return cP(t)?pP(e,t,s,n):{target:t,transitionEnd:n}}const gP=(e,t,s,n)=>{const a=lP(e,t,n);return t=a.target,n=a.transitionEnd,fP(e,t,s,n)},Mh={current:null},gj={current:!1};function bP(){if(gj.current=!0,!!qc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Mh.current=e.matches;e.addListener(t),t()}else Mh.current=!1}function yP(e,t,s){const{willChange:n}=t;for(const a in t){const i=t[a],o=s[a];if(Kt(i))e.addValue(a,i),cc(n)&&n.add(a);else if(Kt(o))e.addValue(a,li(i,{owner:e})),cc(n)&&n.remove(a);else if(o!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,li(l!==void 0?l:i,{owner:e}))}}for(const a in s)t[a]===void 0&&e.removeValue(a);return t}const $0=new WeakMap,bj=Object.keys(Bo),vP=bj.length,W0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],wP=tp.length;class kP{constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ie.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=Gc(s),this.isVariantNode=rk(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(s,{});for(const m in u){const h=u[m];l[m]!==void 0&&Kt(h)&&(h.set(l[m],!1),cc(c)&&c.add(m))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,$0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),gj.current||bP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){$0.delete(this.current),this.projection&&this.projection.unmount(),vs(this.notifyUpdate),vs(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const n=ca.has(t),a=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ie.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},n,a,i){let o,l;for(let d=0;d<vP;d++){const c=bj[d],{isEnabled:u,Feature:m,ProjectionNode:h,MeasureLayout:x}=Bo[c];h&&(o=h),u(s)&&(!this.features[c]&&m&&(this.features[c]=new m(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:u,dragConstraints:m,layoutScroll:h,layoutRoot:x}=s;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!u||m&&Ra(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Qe()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<W0.length;n++){const a=W0[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=yP(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<wP;n++){const a=tp[n],i=this.props[a];(Uo(i)||i===!1)&&(s[a]=i)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=li(s,{owner:this}),this.addValue(t,n)),n}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(s=dp(this.props,n))===null||s===void 0?void 0:s[t]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Kt(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new yp),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class yj extends kP{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...n},{transformValues:a},i){let o=U_(n,t||{},this);if(a&&(s&&(s=a(s)),n&&(n=a(n)),o&&(o=a(o))),i){O_(this,n,o);const l=gP(this,n,o,s);s=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:s,...n}}}function jP(e){return window.getComputedStyle(e)}class NP extends yj{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(ca.has(s)){const n=xp(s);return n&&n.default||0}else{const n=jP(t),a=(ik(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return ij(t,s)}build(t,s,n,a){np(t,s,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,s){return lp(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Kt(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,n,a){mk(t,s,n,a)}}class SP extends yj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(ca.has(s)){const n=xp(s);return n&&n.default||0}return s=hk.has(s)?s:Zx(s),t.getAttribute(s)}measureInstanceViewportBox(){return Qe()}scrapeMotionValuesFromProps(t,s){return pk(t,s)}build(t,s,n,a){ip(t,s,n,this.isSVGTag,a.transformTemplate)}renderInstance(t,s,n,a){xk(t,s,n,a)}mount(t){this.isSVGTag=op(t.tagName),super.mount(t)}}const CP=(e,t)=>sp(e)?new SP(t,{enableHardwareAcceleration:!1}):new NP(t,{enableHardwareAcceleration:!0}),TP={layout:{ProjectionNode:pj,MeasureLayout:lj}},_P={...eI,...vT,...aP,...TP},T=I3((e,t)=>oT(e,t,_P,CP));function vj(){const e=p.useRef(!1);return Xx(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function IP(){const e=vj(),[t,s]=p.useState(0),n=p.useCallback(()=>{e.current&&s(t+1)},[t]);return[p.useCallback(()=>Ie.postRender(n),[n]),t]}class PP extends p.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function AP({children:e,isPresent:t}){const s=p.useId(),n=p.useRef(null),a=p.useRef({width:0,height:0,top:0,left:0});return p.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:d}=a.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=s;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),p.createElement(PP,{isPresent:t,childRef:n,sizeRef:a},p.cloneElement(e,{ref:n}))}const tm=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=fk(EP),d=p.useId(),c=p.useMemo(()=>({id:d,initial:t,isPresent:s,custom:a,onExitComplete:u=>{l.set(u,!0);for(const m of l.values())if(!m)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[s]);return p.useMemo(()=>{l.forEach((u,m)=>l.set(m,!1))},[s]),p.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(e=p.createElement(AP,{isPresent:s},e)),p.createElement(Wc.Provider,{value:c},e)};function EP(){return new Map}function MP(e){return p.useEffect(()=>()=>e(),[])}const En=e=>e.key||"";function RP(e,t){e.forEach(s=>{const n=En(s);t.set(n,s)})}function LP(e){const t=[];return p.Children.forEach(e,s=>{p.isValidElement(s)&&t.push(s)}),t}const te=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=p.useContext(rp).forceRender||IP()[0],d=vj(),c=LP(e);let u=c;const m=p.useRef(new Map).current,h=p.useRef(u),x=p.useRef(new Map).current,g=p.useRef(!0);if(Xx(()=>{g.current=!1,RP(c,x),h.current=u}),MP(()=>{g.current=!0,x.clear(),m.clear()}),g.current)return p.createElement(p.Fragment,null,u.map(b=>p.createElement(tm,{key:En(b),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:i,mode:o},b)));u=[...u];const v=h.current.map(En),w=c.map(En),f=v.length;for(let b=0;b<f;b++){const y=v[b];w.indexOf(y)===-1&&!m.has(y)&&m.set(y,void 0)}return o==="wait"&&m.size&&(u=[]),m.forEach((b,y)=>{if(w.indexOf(y)!==-1)return;const k=x.get(y);if(!k)return;const j=v.indexOf(y);let S=b;if(!S){const P=()=>{m.delete(y);const R=Array.from(x.keys()).filter(L=>!w.includes(L));if(R.forEach(L=>x.delete(L)),h.current=c.filter(L=>{const N=En(L);return N===y||R.includes(N)}),!m.size){if(d.current===!1)return;l(),n&&n()}};S=p.createElement(tm,{key:En(k),isPresent:!1,onExitComplete:P,custom:t,presenceAffectsLayout:i,mode:o},k),m.set(y,S)}u.splice(j,0,S)}),u=u.map(b=>{const y=b.key;return m.has(y)?b:p.createElement(tm,{key:En(b),isPresent:!0,presenceAffectsLayout:i,mode:o},b)}),p.createElement(p.Fragment,null,m.size?u:u.map(b=>p.cloneElement(b)))},wj=p.createContext(void 0);function DP({children:e}){const[t,s]=p.useState([]),n=(l,d)=>{const c=Math.random().toString(36).substr(2,9);s(u=>[...u,{id:c,type:l,message:d}]),setTimeout(()=>{s(u=>u.filter(m=>m.id!==c))},4e3)},a=l=>{s(d=>d.filter(c=>c.id!==l))},i=l=>{switch(l){case"success":return r.jsx(Qt,{className:"w-5 h-5"});case"error":return r.jsx(ys,{className:"w-5 h-5"});case"warning":return r.jsx(yr,{className:"w-5 h-5"});case"info":return r.jsx(Gw,{className:"w-5 h-5"})}},o=l=>{switch(l){case"success":return"bg-emerald-500/10 border-emerald-500/30 text-emerald-500";case"error":return"bg-rose-500/10 border-rose-500/30 text-rose-500";case"warning":return"bg-amber-500/10 border-amber-500/30 text-amber-500";case"info":return"bg-blue-500/10 border-blue-500/30 text-blue-500"}};return r.jsxs(wj.Provider,{value:{showToast:n},children:[e,r.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2",children:r.jsx(te,{children:t.map(l=>r.jsxs(T.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:`flex items-center gap-3 px-4 py-3 rounded-xl border backdrop-blur-sm shadow-lg min-w-[300px] ${o(l.type)}`,children:[i(l.type),r.jsx("p",{className:"flex-1 text-sm font-medium",children:l.message}),r.jsx("button",{onClick:()=>a(l.id),className:"hover:opacity-70 transition-opacity",children:r.jsx(Ne,{className:"w-4 h-4"})})]},l.id))})})]})}function kn(){const e=p.useContext(wj);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const X=VC;function kj(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=kj(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function OP(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=kj(e))&&(n&&(n+=" "),n+=t);return n}const vp="-",FP=e=>{const t=BP(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(vp);return l[0]===""&&l.length!==1&&l.shift(),jj(l,t)||UP(o)},getConflictingClassGroupIds:(o,l)=>{const d=s[o]||[];return l&&n[o]?[...d,...n[o]]:d}}},jj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),a=n?jj(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(vp);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},q0=/^\[(.+)\]$/,UP=e=>{if(q0.test(e)){const t=q0.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},BP=e=>{const{theme:t,prefix:s}=e,n={nextPart:new Map,validators:[]};return zP(Object.entries(e.classGroups),s).forEach(([i,o])=>{Rh(o,n,i,t)}),n},Rh=(e,t,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:H0(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(VP(a)){Rh(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{Rh(o,H0(t,i),s,n)})})},H0=(e,t)=>{let s=e;return t.split(vp).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},VP=e=>e.isThemeGetter,zP=(e,t)=>t?e.map(([s,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[s,a]}):e,$P=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(i,o)=>{s.set(i,o),t++,t>e&&(t=0,n=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},Nj="!",WP=e=>{const{separator:t,experimentalParseClassName:s}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const d=[];let c=0,u=0,m;for(let w=0;w<l.length;w++){let f=l[w];if(c===0){if(f===a&&(n||l.slice(w,w+i)===t)){d.push(l.slice(u,w)),u=w+i;continue}if(f==="/"){m=w;continue}}f==="["?c++:f==="]"&&c--}const h=d.length===0?l:l.substring(u),x=h.startsWith(Nj),g=x?h.substring(1):h,v=m&&m>u?m-u:void 0;return{modifiers:d,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:v}};return s?l=>s({className:l,parseClassName:o}):o},qP=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(n=>{n[0]==="["?(t.push(...s.sort(),n),s=[]):s.push(n)}),t.push(...s.sort()),t},HP=e=>({cache:$P(e.cacheSize),parseClassName:WP(e),...FP(e)}),GP=/\s+/,QP=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(GP);let l="";for(let d=o.length-1;d>=0;d-=1){const c=o[d],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:x}=s(c);let g=!!x,v=n(g?h.substring(0,x):h);if(!v){if(!g){l=c+(l.length>0?" "+l:l);continue}if(v=n(h),!v){l=c+(l.length>0?" "+l:l);continue}g=!1}const w=qP(u).join(":"),f=m?w+Nj:w,b=f+v;if(i.includes(b))continue;i.push(b);const y=a(v,g);for(let k=0;k<y.length;++k){const j=y[k];i.push(f+j)}l=c+(l.length>0?" "+l:l)}return l};function KP(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=Sj(t))&&(n&&(n+=" "),n+=s);return n}const Sj=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=Sj(e[n]))&&(s&&(s+=" "),s+=t);return s};function YP(e,...t){let s,n,a,i=o;function o(d){const c=t.reduce((u,m)=>m(u),e());return s=HP(c),n=s.cache.get,a=s.cache.set,i=l,l(d)}function l(d){const c=n(d);if(c)return c;const u=QP(d,s);return a(d,u),u}return function(){return i(KP.apply(null,arguments))}}const Pe=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},Cj=/^\[(?:([a-z-]+):)?(.+)\]$/i,JP=/^\d+\/\d+$/,XP=new Set(["px","full","screen"]),ZP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eA=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tA=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,rA=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,sA=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Zr=e=>Wa(e)||XP.has(e)||JP.test(e),Ms=e=>yi(e,"length",uA),Wa=e=>!!e&&!Number.isNaN(Number(e)),rm=e=>yi(e,"number",Wa),Fi=e=>!!e&&Number.isInteger(Number(e)),nA=e=>e.endsWith("%")&&Wa(e.slice(0,-1)),ie=e=>Cj.test(e),Rs=e=>ZP.test(e),aA=new Set(["length","size","percentage"]),iA=e=>yi(e,aA,Tj),oA=e=>yi(e,"position",Tj),lA=new Set(["image","url"]),dA=e=>yi(e,lA,hA),cA=e=>yi(e,"",mA),Ui=()=>!0,yi=(e,t,s)=>{const n=Cj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):s(n[2]):!1},uA=e=>eA.test(e)&&!tA.test(e),Tj=()=>!1,mA=e=>rA.test(e),hA=e=>sA.test(e),xA=()=>{const e=Pe("colors"),t=Pe("spacing"),s=Pe("blur"),n=Pe("brightness"),a=Pe("borderColor"),i=Pe("borderRadius"),o=Pe("borderSpacing"),l=Pe("borderWidth"),d=Pe("contrast"),c=Pe("grayscale"),u=Pe("hueRotate"),m=Pe("invert"),h=Pe("gap"),x=Pe("gradientColorStops"),g=Pe("gradientColorStopPositions"),v=Pe("inset"),w=Pe("margin"),f=Pe("opacity"),b=Pe("padding"),y=Pe("saturate"),k=Pe("scale"),j=Pe("sepia"),S=Pe("skew"),P=Pe("space"),R=Pe("translate"),L=()=>["auto","contain","none"],N=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",ie,t],A=()=>[ie,t],W=()=>["",Zr,Ms],G=()=>["auto",Wa,ie],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],de=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],z=()=>["start","end","center","between","around","evenly","stretch"],E=()=>["","0",ie],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[Wa,ie];return{cacheSize:500,separator:":",theme:{colors:[Ui],spacing:[Zr,Ms],blur:["none","",Rs,ie],brightness:q(),borderColor:[e],borderRadius:["none","","full",Rs,ie],borderSpacing:A(),borderWidth:W(),contrast:q(),grayscale:E(),hueRotate:q(),invert:E(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[nA,Ms],inset:I(),margin:I(),opacity:q(),padding:A(),saturate:q(),scale:q(),sepia:E(),skew:q(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",ie]}],container:["container"],columns:[{columns:[Rs]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),ie]}],overflow:[{overflow:N()}],"overflow-x":[{"overflow-x":N()}],"overflow-y":[{"overflow-y":N()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fi,ie]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ie]}],grow:[{grow:E()}],shrink:[{shrink:E()}],order:[{order:["first","last","none",Fi,ie]}],"grid-cols":[{"grid-cols":[Ui]}],"col-start-end":[{col:["auto",{span:["full",Fi,ie]},ie]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Ui]}],"row-start-end":[{row:["auto",{span:[Fi,ie]},ie]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ie]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ie]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...z()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...z(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...z(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ie,t]}],"min-w":[{"min-w":[ie,t,"min","max","fit"]}],"max-w":[{"max-w":[ie,t,"none","full","min","max","fit","prose",{screen:[Rs]},Rs]}],h:[{h:[ie,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ie,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ie,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ie,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Rs,Ms]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",rm]}],"font-family":[{font:[Ui]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ie]}],"line-clamp":[{"line-clamp":["none",Wa,rm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Zr,ie]}],"list-image":[{"list-image":["none",ie]}],"list-style-type":[{list:["none","disc","decimal",ie]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[f]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[f]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Zr,Ms]}],"underline-offset":[{"underline-offset":["auto",Zr,ie]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ie]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ie]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[f]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),oA]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",iA]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dA]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[f]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[f]}],"divide-style":[{divide:Q()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Zr,ie]}],"outline-w":[{outline:[Zr,Ms]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[f]}],"ring-offset-w":[{"ring-offset":[Zr,Ms]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Rs,cA]}],"shadow-color":[{shadow:[Ui]}],opacity:[{opacity:[f]}],"mix-blend":[{"mix-blend":[...de(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":de()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Rs,ie]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[y]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[f]}],"backdrop-saturate":[{"backdrop-saturate":[y]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ie]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",ie]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",ie]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Fi,ie]}],"translate-x":[{"translate-x":[R]}],"translate-y":[{"translate-y":[R]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ie]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ie]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ie]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Zr,Ms,rm]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},pA=YP(xA);function Y(...e){return pA(OP(e))}function M({variant:e="primary",size:t="md",children:s,isLoading:n=!1,className:a,disabled:i,...o}){const l="inline-flex items-center justify-center font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2",d={primary:"bg-primary-700 hover:bg-primary-800 text-white focus:ring-primary-700",secondary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-600",ghost:"bg-transparent hover:bg-light-card dark:hover:bg-dark-card text-light-text dark:text-dark-text focus:ring-primary-700",outline:"border-2 border-primary-700 text-primary-700 hover:bg-primary-50 dark:hover:bg-primary-950 focus:ring-primary-700",danger:"bg-red-500 hover:bg-red-600 text-white focus:ring-red-500"},c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg",icon:"p-2"};return r.jsx(T.button,{whileHover:{scale:i||n?1:1.02},whileTap:{scale:i||n?1:.98},className:Y(l,d[e],c[t],a),disabled:i||n,...o,children:n?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):s})}function _j(){const e=O(C.users.getTickerData),[t,s]=p.useState(0);if(p.useEffect(()=>{if(!(e!=null&&e.recentUsers)||e.recentUsers.length===0)return;const a=setInterval(()=>{s(i=>(i+2)%e.recentUsers.length)},4e3);return()=>clearInterval(a)},[e]),!e)return r.jsxs("div",{className:"flex items-center gap-3 bg-light-card/50 dark:bg-dark-card/50 backdrop-blur-sm px-3 py-1.5 rounded-full border border-light-border/20 dark:border-dark-border/20 shadow-sm overflow-hidden w-[240px] xl:w-[280px] animate-pulse",children:[r.jsxs("div",{className:"flex items-center gap-2 pr-3 border-r border-light-border/20 dark:border-dark-border/20 shrink-0",children:[r.jsx("div",{className:"bg-light-bg dark:bg-dark-bg p-1 rounded-full w-5 h-5"}),r.jsxs("div",{className:"flex flex-col gap-1 leading-none",children:[r.jsx("div",{className:"h-2 w-12 bg-light-bg dark:bg-dark-bg rounded"}),r.jsx("div",{className:"h-3 w-8 bg-light-bg dark:bg-dark-bg rounded"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-light-bg dark:bg-dark-bg"}),r.jsx("div",{className:"h-2 w-12 bg-light-bg dark:bg-dark-bg rounded"})]})]});const n=[e.recentUsers[t%e.recentUsers.length],e.recentUsers[(t+1)%e.recentUsers.length]].filter(Boolean);return r.jsxs("div",{className:"flex items-center gap-3 bg-light-card/50 dark:bg-dark-card/50 backdrop-blur-sm px-3 py-1.5 rounded-full border border-light-border/20 dark:border-dark-border/20 shadow-sm overflow-hidden w-[240px] xl:w-[280px]",children:[r.jsxs("div",{className:"flex items-center gap-2 pr-3 border-r border-light-border/20 dark:border-dark-border/20 shrink-0",children:[r.jsx("div",{className:"bg-primary-500/10 p-1 rounded-full",children:r.jsx(Se,{className:"w-3 h-3 text-primary-500"})}),r.jsxs("div",{className:"flex flex-col leading-none",children:[r.jsx("span",{className:"text-[9px] uppercase font-bold text-light-muted dark:text-dark-muted",children:"Community"}),r.jsx("span",{className:"text-xs font-black text-light-text dark:text-dark-text font-display",children:e.totalCount.toLocaleString()})]})]}),r.jsx("div",{className:"flex-1 relative h-7 overflow-hidden",children:r.jsx(te,{mode:"popLayout",children:r.jsx(T.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:.5,ease:"easeInOut"},className:"absolute inset-0 flex items-center gap-2",children:n.map(a=>r.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 max-w-[90px]",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-primary-400 to-secondary-400 p-[1px] flex-shrink-0",children:r.jsx("div",{className:"w-full h-full rounded-full bg-light-bg dark:bg-dark-bg overflow-hidden",children:a.avatarUrl?r.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] font-bold bg-light-muted/10",children:a.name.charAt(0)})})}),r.jsx("span",{className:"text-[10px] font-medium text-light-text dark:text-dark-text truncate",children:a.name.split(" ")[0]})]},a._id))},t)})})]})}function fA({isOpen:e,onClose:t}){const{user:s,logout:n}=X(),{theme:a,toggleTheme:i}=Bc(),o=le(),l=O(C.stats.getBadgeCounts,s!=null&&s._id?{userId:s._id}:"skip"),d=V(C.users.updateLastViewed),c=async(m,h)=>{h&&s&&await d({userId:s._id,field:h}),t(),o(m)},u=()=>{n(),t(),o("/")};return r.jsx(te,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 md:hidden"}),r.jsx(T.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed top-0 bottom-0 left-0 w-[85%] max-w-[320px] bg-light-bg dark:bg-dark-bg z-[60] shadow-2xl overflow-hidden",children:r.jsxs("div",{className:"flex flex-col h-full p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs(re,{to:"/",onClick:t,className:"flex items-center gap-2",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-8 w-auto"}),r.jsx("span",{className:"text-xl font-bold font-display text-gradient",children:"Baptizo"})]}),r.jsx("button",{onClick:t,className:"p-2 -mr-2 text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text transition-colors",children:r.jsx(Ne,{className:"w-6 h-6"})})]}),s&&r.jsxs("div",{className:"mb-4 p-3 rounded-2xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10 border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold text-sm overflow-hidden shrink-0",children:s.avatarUrl?r.jsx("img",{src:s.avatarUrl,alt:s.name,className:"w-full h-full object-cover"}):s.name[0]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text truncate text-sm",children:s.name}),r.jsx("p",{className:"text-[10px] text-light-muted dark:text-dark-muted truncate",children:s.email})]})]}),r.jsx(re,{to:"/profile",onClick:t,children:r.jsx(M,{variant:"outline",size:"sm",className:"w-full rounded-lg text-[10px] h-7 font-semibold",children:"View Profile"})})]}),r.jsx("nav",{className:"space-y-2 flex-1 overflow-y-auto green-scrollbar",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>c("/feed"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(Hw,{className:"w-5 h-5 text-primary-500"}),"Feed"]}),r.jsxs("button",{onClick:()=>c("/chat"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ut,{className:"w-5 h-5 text-blue-500"}),"Messages"]}),((l==null?void 0:l.messages)||0)>0&&r.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full",children:l==null?void 0:l.messages})]}),r.jsxs("button",{onClick:()=>c("/banking","lastViewedBanking"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(tl,{className:"w-5 h-5 text-emerald-500"}),"Banking"]}),((l==null?void 0:l.banking)||0)>0&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]"})]}),r.jsxs("button",{onClick:()=>c("/leaderboard","lastViewedLeaderboard"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ke,{className:"w-5 h-5 text-amber-500"}),"Leaderboard"]}),((l==null?void 0:l.leaderboard)||0)>0&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]"})]}),r.jsxs(re,{to:"/saved-posts",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(Hx,{className:"w-5 h-5 text-purple-500"}),"Saved Posts"]}),r.jsxs(re,{to:"/diamond-challenge",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(_r,{className:"w-5 h-5 text-cyan-500"}),"Diamond Challenge"]}),(s.role==="admin"||s.role==="super_admin")&&r.jsxs(re,{to:"/admin",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-primary-500/10 text-primary-500 transition-colors font-bold mt-4",children:[r.jsx(an,{className:"w-5 h-5"}),"Admin Dashboard"]}),s.role==="board_member"&&r.jsxs(re,{to:"/board",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-secondary-500/10 text-secondary-500 transition-colors font-bold mt-4",children:[r.jsx(an,{className:"w-5 h-5"}),"Board Dashboard"]}),r.jsx("div",{className:"mt-6 flex justify-center",children:r.jsx(_j,{})})]}):r.jsxs(r.Fragment,{children:[r.jsx(re,{to:"/login",onClick:t,className:"block mb-4",children:r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(St,{className:"w-5 h-5"}),"Login"]})}),r.jsx(re,{to:"/register",onClick:t,className:"block",children:r.jsx(M,{className:"w-full font-bold",children:"Get Started"})})]})}),r.jsxs("div",{className:"pt-6 border-t border-light-border dark:border-dark-border mt-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("span",{className:"text-sm font-medium text-light-text dark:text-dark-text",children:"Appearance"}),r.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text",children:a==="dark"?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(zc,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"text-xs",children:"Dark"})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Vc,{className:"w-5 h-5 text-slate-700"}),r.jsx("span",{className:"text-xs",children:"Light"})]})})]}),s&&r.jsxs("button",{onClick:u,className:"w-full p-3 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition-all flex items-center justify-center gap-2 font-bold",children:[r.jsx(Qw,{className:"w-5 h-5"}),"Logout"]})]})]})})]})})}function G0(){const{user:e}=X(),t=le();if(!(e!=null&&e._id))return null;const s=O(C.notifications.getUnreadCount,{userId:e._id})||0;return r.jsxs(T.button,{whileTap:{scale:.9},onClick:()=>t("/notifications"),className:"p-2 md:p-3 relative text-light-text dark:text-dark-text hover:text-primary-500 transition-colors",title:"Notifications",children:[r.jsx(ao,{className:"w-6 h-6 md:w-6 md:h-6"}),(s??0)>0&&r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-2 md:right-2 bg-green-500 text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-light-bg dark:border-dark-bg",children:s>9?"9+":s})]})}function gA(){const{user:e,logout:t}=X(),{theme:s,toggleTheme:n}=Bc(),a=le(),i=bt(),[o,l]=p.useState(!1),d=O(C.stats.getBadgeCounts,e!=null&&e._id?{userId:e._id}:"skip"),c=i.pathname==="/"||i.pathname==="/feed"||i.pathname==="/login"||i.pathname==="/register",u=()=>{t(),a("/")};return r.jsxs(r.Fragment,{children:[r.jsx("header",{className:`fixed ${c?"top-2 md:top-0":"top-0"} left-0 right-0 z-40 ${c?"px-3 md:px-0":"px-0"} transition-all duration-300`,children:r.jsx("div",{className:`mx-auto ${c?"max-w-7xl md:max-w-full relative":"w-full"}`,children:r.jsx("div",{className:`${c?"glass rounded-2xl md:rounded-b-3xl md:rounded-t-none border border-light-border/50 dark:border-dark-border/50 overflow-hidden":"bg-light-bg/95 dark:bg-dark-bg/95 backdrop-blur-sm border-b border-light-border dark:border-dark-border md:glass md:rounded-b-3xl md:border md:border-light-border/50 md:dark:border-dark-border/50"} md:overflow-hidden`,children:r.jsxs("div",{className:"px-4 md:px-12 h-14 md:h-20 flex items-center justify-between",children:[r.jsxs("div",{className:"md:hidden flex items-center justify-between w-full",children:[r.jsxs("button",{onClick:()=>l(!0),className:"p-2 -ml-2 text-light-text dark:text-dark-text hover:text-primary-500 transition-colors relative",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),r.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),r.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),d&&(d.messages>0||d.banking>0||d.leaderboard>0)&&r.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)] border border-light-bg dark:border-dark-bg"})]}),e?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>a("/search"),className:"p-2 text-light-text dark:text-dark-text hover:text-primary-500 transition-colors",children:r.jsx(ft,{className:"w-6 h-6"})}),r.jsx(G0,{})]}):c&&r.jsx(re,{to:"/",className:"flex items-center",children:r.jsx("span",{className:"text-xl font-black text-gradient font-display tracking-tight",children:"Baptizo"})})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 w-full",children:[r.jsx(re,{to:"/",state:{manual:!0},className:"flex items-center space-x-2 mr-auto",children:r.jsxs(T.div,{whileHover:{scale:1.05},className:"flex items-center gap-2",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-8 md:h-12 w-auto"}),r.jsx("span",{className:"text-xl md:text-3xl font-black text-gradient font-display tracking-tight",children:"Baptizo"})]})}),r.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:e?r.jsxs(r.Fragment,{children:[r.jsx(re,{to:"/feed",className:"text-light-text dark:text-dark-text hover:text-primary-500 transition-all font-semibold text-lg",children:"Feed"}),r.jsx(re,{to:"/profile",className:"text-light-text dark:text-dark-text hover:text-primary-500 transition-all font-semibold text-lg",children:"Profile"}),e.role==="admin"||e.role==="super_admin"?r.jsxs(re,{to:"/admin",className:"px-4 py-2 rounded-xl bg-primary-500/10 text-primary-500 hover:bg-primary-500 hover:text-white transition-all font-bold flex items-center gap-2",children:[r.jsx(an,{className:"w-5 h-5"}),"Admin"]}):null,e.role==="board_member"&&r.jsxs(re,{to:"/board",className:"px-4 py-2 rounded-xl bg-secondary-500/10 text-secondary-500 hover:bg-secondary-500 hover:text-white transition-all font-bold flex items-center gap-2",children:[r.jsx(an,{className:"w-5 h-5"}),"Board"]})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(re,{to:"/login",className:"text-light-text dark:text-dark-text hover:text-primary-500 transition-all font-semibold text-lg",children:"Login"}),r.jsx(re,{to:"/register",children:r.jsx(M,{size:"lg",className:"font-bold px-8",children:"Get Started"})})]})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 md:space-x-4 ml-auto",children:[e&&r.jsxs(r.Fragment,{children:[r.jsxs(T.button,{whileTap:{scale:.9},onClick:()=>a("/chat"),className:"p-2 md:p-3 relative rounded-xl hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-all border border-transparent hover:border-light-border dark:hover:border-dark-border",title:"Messages",children:[r.jsx(ut,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-500"}),((d==null?void 0:d.messages)??0)>0&&r.jsx("span",{className:"absolute top-1.5 right-1.5 md:top-2 md:right-2 bg-green-500 text-white text-[9px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-white dark:border-[#1A1A1A] animate-pulse",children:d.messages>9?"9+":d.messages})]}),r.jsx(T.button,{whileTap:{scale:.9},onClick:()=>a("/search"),className:"p-2 md:p-3 rounded-xl hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-all border border-transparent hover:border-light-border dark:hover:border-dark-border",title:"Search Members",children:r.jsx(ft,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-500"})}),r.jsx(G0,{})]}),r.jsx(T.button,{whileTap:{scale:.9},onClick:n,className:"p-2 md:p-3 rounded-xl hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-all border border-transparent hover:border-light-border dark:hover:border-dark-border",children:s==="dark"?r.jsx(zc,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-500"}):r.jsx(Vc,{className:"w-5 h-5 md:w-6 md:h-6 text-slate-700"})}),e&&r.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-1.5 rounded-xl bg-light-card/30 dark:bg-dark-card/30 border border-light-border/20 dark:border-dark-border/20 shadow-inner",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold overflow-hidden",children:e.avatarUrl?r.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}):e.name[0]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-bold text-light-text dark:text-dark-text pr-2 leading-none",children:e.name}),(e.role==="board_member"||e.role==="admin"||e.role==="super_admin")&&r.jsx("span",{className:"text-[9px] font-bold text-secondary-500 tracking-wide mt-0.5",children:e.role==="board_member"?"BOARD MEMBER":e.role.replace("_"," ").toUpperCase()})]})]}),r.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"p-3 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition-all",children:r.jsx(Qw,{className:"w-5 h-5"})})]})]})]})]})})})}),r.jsx(fA,{isOpen:o,onClose:()=>l(!1)})]})}function bA(){const e=new Date().getFullYear(),t={platform:[{label:"Feed",path:"/feed"},{label:"Ancient Culture",path:"/ancient-culture"},{label:"Wisdom of The Now",path:"/wisdom-now"},{label:"Leaderboard",path:"/leaderboard"}],community:[{label:"About Baptizo",path:"/about"},{label:"Our Mission",path:"/about"},{label:"Privacy Policy",path:"/privacy"},{label:"Terms of Service",path:"/terms"}],support:[{label:"Contact Us",path:"/contact"},{label:"FAQ",path:"/faq"},{label:"Community Guidelines",path:"/guidelines"}]},s=[{icon:f3,href:"https://x.com/innotechglobal",label:"Twitter"},{icon:e3,href:"https://www.instagram.com/photizo_foundation?utm_source=qr&igsh=ZncwOTVpcXM1d3Vv",label:"Instagram"},{icon:b3,href:"https://www.youtube.com/@innotechglobal",label:"YouTube"},{icon:ZC,href:"https://www.github.com/vincobond/",label:"GitHub"}];return r.jsx("footer",{className:"relative mt-auto pt-24 pb-12 overflow-hidden bg-gray-100 dark:bg-gray-950",children:r.jsxs("div",{className:"max-w-[90rem] mx-auto px-4 relative z-10",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-20",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs(re,{to:"/",className:"flex items-center gap-3",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-10 md:h-12 w-auto"}),r.jsx("span",{className:"text-2xl font-black text-gradient font-display",children:"Baptizo"})]}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted leading-relaxed font-medium",children:"A professional sanctuary for digital spiritual exploration. Bridging ancient wisdom with modern consciousness."}),r.jsx("div",{className:"flex items-center gap-4",children:s.map(n=>r.jsx(T.a,{href:n.href,whileHover:{y:-4},className:"p-3 bg-white dark:bg-gray-900 border border-light-border dark:border-dark-border text-light-muted dark:text-dark-muted hover:text-primary-700 hover:border-primary-700 transition-all","aria-label":n.label,children:r.jsx(n.icon,{className:"w-5 h-5"})},n.label))})]}),Object.entries(t).map(([n,a])=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h4",{className:"text-sm font-black uppercase tracking-[0.2em] text-light-text dark:text-dark-text",children:n}),r.jsx("ul",{className:"space-y-4",children:a.map(i=>r.jsx("li",{children:r.jsxs(re,{to:i.path,className:"text-light-muted dark:text-dark-muted hover:text-primary-700 dark:hover:text-primary-400 transition-all font-medium flex items-center group",children:[i.label,r.jsx(Bw,{className:"w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})},i.label))})]},n))]}),r.jsxs("div",{className:"pt-12 border-t border-light-border dark:border-dark-border flex flex-col md:flex-row items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-light-muted dark:text-dark-muted font-medium",children:[r.jsx("span",{children:"Built with"}),r.jsx(vn,{className:"w-4 h-4 text-red-500 fill-red-500"}),r.jsx("span",{children:"for the Global Community"})]}),r.jsxs("div",{className:"flex items-center gap-8 text-xs font-bold text-light-muted/60 dark:text-dark-muted/60",children:[r.jsxs("p",{children:[" ",e," Baptizo Inc. All rights reserved."]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qx,{className:"w-3 h-3"}),r.jsx("span",{children:"v2.0 Premium"})]})]})]})]})})}function yA(){const e=bt(),{user:t}=X(),s=O(C.stats.getBadgeCounts,t!=null&&t._id?{userId:t._id}:"skip"),n=a=>!!(a==="/feed"&&e.pathname==="/feed"||a!=="/feed"&&e.pathname.startsWith(a));return r.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 border-t border-light-border dark:border-dark-border glass pb-safe",children:r.jsxs("div",{className:"flex items-center justify-around h-16 px-2",children:[r.jsxs(re,{to:"/feed",className:Y("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/feed")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative",children:r.jsx(Hw,{className:Y("w-5 h-5 md:w-6 md:h-6",n("/feed")&&"fill-primary-500/20")})}),r.jsx("span",{className:Y("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/feed")?"opacity-100":"opacity-70"),children:"Feed"})]}),r.jsxs(re,{to:"/chat",className:Y("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/chat")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsxs("div",{className:"relative",children:[r.jsx(ut,{className:Y("w-5 h-5 md:w-6 md:h-6",n("/chat")&&"fill-primary-500/20")}),((s==null?void 0:s.messages)||0)>0&&r.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-[9px] font-bold h-4 min-w-[16px] px-0.5 flex items-center justify-center rounded-full border border-white dark:border-[#1A1A1A] z-10 animate-bounce",children:((s==null?void 0:s.messages)||0)>9?"9+":s==null?void 0:s.messages})]}),r.jsx("span",{className:Y("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/chat")?"opacity-100":"opacity-70"),children:"Chat"})]}),t&&r.jsxs(re,{to:"/create-post",className:Y("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/create-post")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative p-1",children:r.jsx(l3,{className:Y("w-6 h-6 md:w-8 md:h-8 text-primary-500 fill-primary-500/10")})}),r.jsx("span",{className:Y("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/create-post")?"opacity-100 font-bold":"opacity-70"),children:"Post"})]}),r.jsxs(re,{to:"/banking",className:Y("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/banking")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative",children:r.jsx(tl,{className:Y("w-5 h-5 md:w-6 md:h-6",n("/banking")&&"fill-primary-500/20")})}),r.jsx("span",{className:Y("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/banking")?"opacity-100":"opacity-70"),children:"Banking"})]}),r.jsxs(re,{to:"/profile",className:Y("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/profile")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative",children:r.jsx(St,{className:Y("w-5 h-5 md:w-6 md:h-6",n("/profile")&&"fill-primary-500/20")})}),r.jsx("span",{className:Y("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/profile")?"opacity-100":"opacity-70"),children:"Profile"})]})]})})}function D({children:e,className:t,glass:s=!1,hover:n=!1,onClick:a}){const i=T.div;return r.jsx(i,{onClick:a,whileHover:n?{y:-4,transition:{duration:.2}}:void 0,className:Y("p-6 transition-all duration-200",s?"glass":"bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",n&&"cursor-pointer",t),children:e})}function xe({children:e,className:t}){return r.jsx("div",{className:Y("mb-4",t),children:e})}function pe({children:e,className:t}){return r.jsx("h3",{className:Y("text-xl font-semibold text-light-text dark:text-dark-text",t),children:e})}function U({children:e,className:t}){return r.jsx("div",{className:Y("text-light-text dark:text-dark-text",t),children:e})}function H({children:e,variant:t="default",className:s,animate:n=!1}){const a={default:"bg-light-border dark:bg-dark-border text-light-text dark:text-dark-text",primary:"bg-primary-100 dark:bg-primary-950 text-primary-800 dark:text-primary-300 border border-primary-200 dark:border-primary-800",secondary:"bg-secondary-100 dark:bg-secondary-950 text-secondary-700 dark:text-secondary-300 border border-secondary-200 dark:border-secondary-800",success:"bg-green-100 dark:bg-green-950 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800",warning:"bg-yellow-100 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800",danger:"bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800",outline:"bg-transparent border border-light-border dark:border-dark-border text-light-muted dark:text-dark-muted"},i=n?T.span:"span",o=n?{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30}}:{};return r.jsx(i,{...o,className:Y("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a[t],s),children:e})}function vA(){const{user:e}=X(),t=le();p.useEffect(()=>{e&&t("/feed",{replace:!0})},[e,t]);const s=[{icon:gi,title:"Ancient Culture",subtitle:"Prophetic Wisdom",description:"Dive deep into prophetic wisdom and systems from the Old Testament. Understand the foundations of spiritual authority.",image:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/ancient-culture.png?updatedAt=1766305387425",color:"from-primary-500 to-primary-700"},{icon:Ts,title:"Wisdom of The Now",subtitle:"Modern Insights",description:"Explore spiritual identity and insights from the New Testament. Discover your place in the modern spiritual landscape.",image:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/wisdom-now.png?updatedAt=1766305387356",color:"from-secondary-500 to-secondary-700"}],n=[{icon:Se,title:"Vibrant Community",description:"Connect with a global network of believers seeking deeper truth."},{icon:ke,title:"Real Impact",description:"Earn recognition and rewards for active participation and growth."},{icon:Mt,title:"Guided Path",description:"Structured learning paths designed for progressive spiritual maturity."}];return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg selection:bg-primary-700/20 relative overflow-hidden",children:[r.jsx("section",{className:"relative min-h-[90vh] flex items-center pt-24 md:pt-0",children:r.jsxs("div",{className:"w-full relative z-10",children:[r.jsxs("div",{className:"grid lg:grid-cols-2 gap-0 items-center",children:[r.jsx("div",{className:"max-w-[90rem] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(T.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},className:"text-center lg:text-left py-12",children:[r.jsx(H,{variant:"primary",className:"mb-4 px-2 py-0.5 text-[8px] md:text-[9px] uppercase tracking-wider font-medium font-display",children:"The Pinnacle of Spiritual Growth"}),r.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black font-display leading-[1.1] md:leading-tight mb-6 text-light-text dark:text-dark-text",children:["Elevate Your ",r.jsx("br",{}),"Spirituality"]}),r.jsx("p",{className:"hidden lg:block text-xl md:text-2xl text-light-muted dark:text-dark-muted mb-10 leading-relaxed max-w-2xl",children:"Join a professional community dedicated to exploring ancient prophetic wisdom and modern spiritual insights. Experience growth like never before."}),r.jsx("div",{className:"hidden lg:flex flex-col sm:flex-row items-center gap-6",children:e?r.jsx(re,{to:"/feed",children:r.jsxs(M,{size:"lg",className:"h-14 px-10 text-lg group",children:["Enter the Feed",r.jsx(Mt,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})}):r.jsxs(r.Fragment,{children:[r.jsx(re,{to:"/register",children:r.jsx(M,{size:"lg",className:"h-14 px-10 text-lg",children:"Start Your Journey"})}),r.jsx(re,{to:"/login",children:r.jsx(M,{size:"lg",variant:"outline",className:"h-14 px-10 text-lg border-light-border/50 dark:border-dark-border/50",children:"Sign In"})})]})})]})}),r.jsx("div",{className:"relative mt-12 lg:mt-0 w-full h-full",children:r.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:1.2,ease:"easeOut"},className:"w-full h-full",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/Image_fx%20(6).png",alt:"Spiritual Community",className:"w-full h-[500px] md:h-[600px] lg:h-[90vh] object-cover"})})})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"lg:hidden mt-12 text-center max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("p",{className:"text-base sm:text-lg text-light-muted dark:text-dark-muted mb-8 leading-relaxed px-2 font-medium",children:"Join a professional community dedicated to exploring ancient prophetic wisdom and modern spiritual insights. Experience growth like never before."}),r.jsx("div",{className:"flex flex-col gap-4 px-6 sm:px-20",children:e?r.jsx(re,{to:"/feed",children:r.jsxs(M,{size:"lg",className:"h-14 w-full text-lg",children:["Enter the Feed",r.jsx(Mt,{className:"w-5 h-5 ml-2"})]})}):r.jsxs(r.Fragment,{children:[r.jsx(re,{to:"/register",children:r.jsx(M,{size:"lg",className:"h-14 w-full text-lg",children:"Start Your Journey"})}),r.jsx(re,{to:"/login",children:r.jsx(M,{size:"lg",variant:"outline",className:"h-14 w-full text-lg border-light-border/50 dark:border-dark-border/50",children:"Sign In"})})]})})]})]})}),r.jsx("section",{className:"py-24 md:py-32 relative bg-white dark:bg-dark-bg",children:r.jsxs("div",{className:"max-w-[90rem] mx-auto px-4",children:[r.jsx("div",{className:"text-left mb-16 md:mb-24",children:r.jsxs(T.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},children:[r.jsx("h2",{className:"text-2xl md:text-4xl font-black font-display mb-6 tracking-tight text-left",children:"Explore Our Core Pillars"}),r.jsx("p",{className:"text-lg md:text-xl text-light-muted dark:text-dark-muted max-w-2xl font-medium",children:"We bridge the gap between ancient foundations and contemporary applications."})]})}),r.jsx("div",{className:"grid lg:grid-cols-2 gap-8 md:gap-12",children:s.map((a,i)=>r.jsx(T.div,{initial:{opacity:0,x:i%2===0?-40:40},whileInView:{opacity:1,x:0},transition:{delay:i*.2,duration:.8},viewport:{once:!0},className:"group relative",children:r.jsxs(D,{className:"overflow-hidden border border-light-border dark:border-dark-border h-full flex flex-col bg-light-card dark:bg-dark-card",children:[r.jsxs("div",{className:"relative h-64 md:h-80 overflow-hidden",children:[r.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-6 left-6",children:r.jsx(H,{className:"bg-white/10 backdrop-blur-xl border-white/20 text-white px-4 py-2 font-bold uppercase tracking-wider text-[10px]",children:a.subtitle})})]}),r.jsxs("div",{className:"p-8 md:p-12 flex-1 flex flex-col bg-gray-100 dark:bg-gray-900",children:[r.jsx("div",{className:"w-16 h-16 bg-primary-700 flex items-center justify-center mb-8",children:r.jsx(a.icon,{className:"w-8 h-8 text-white"})}),r.jsx("h3",{className:"text-2xl md:text-3xl font-black font-display mb-4 tracking-tight",children:a.title}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted text-lg md:text-xl mb-10 leading-relaxed font-medium",children:a.description}),r.jsxs(re,{to:"/register",className:"mt-auto group/btn inline-flex items-center gap-3 text-primary-700 dark:text-primary-400 font-black text-lg",children:["Explore Deeply ",r.jsx(Mt,{className:"w-6 h-6 transform group-hover/btn:translate-x-2 transition-transform"})]})]})]})},a.title))})]})}),r.jsx("section",{className:"py-24 relative overflow-hidden bg-primary-950 dark:bg-black",children:r.jsx("div",{className:"max-w-[90rem] mx-auto px-4 relative z-10",children:r.jsx("div",{className:"grid md:grid-cols-3 gap-12 lg:gap-20",children:n.map((a,i)=>r.jsx(T.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:i*.2},viewport:{once:!0},className:"group",children:r.jsxs("div",{className:"text-center md:text-left",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400 mb-8 transform group-hover:scale-110 group-hover:rotate-3 transition-all",children:r.jsx(a.icon,{className:"w-8 h-8"})}),r.jsx("h4",{className:"text-xl md:text-2xl font-black font-display mb-4 tracking-tight text-white dark:text-white",children:a.title}),r.jsx("p",{className:"text-gray-300 dark:text-gray-300 text-lg leading-relaxed font-medium",children:a.description})]})},a.title))})})}),r.jsx("section",{className:"py-24 md:py-32 relative overflow-hidden",children:r.jsx("div",{className:"max-w-[90rem] mx-auto px-4 relative z-10",children:r.jsxs(T.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"relative z-10 p-8 md:p-12 max-w-7xl mx-auto text-center bg-gray-100 dark:bg-gray-900 border border-light-border dark:border-dark-border",children:[r.jsx(H,{variant:"primary",className:"mb-6 px-6 py-2 text-xs md:text-sm uppercase tracking-[0.2em] font-black font-display",children:"Unleash Your Potential"}),r.jsxs("h2",{className:"text-2xl md:text-4xl font-black font-display mb-6 tracking-tight leading-[1.1]",children:["Ready for a ",r.jsx("br",{}),"Higher Experience?"]}),r.jsx("p",{className:"text-lg md:text-xl text-light-muted dark:text-dark-muted mb-8 max-w-2xl mx-auto leading-relaxed font-medium",children:"Join thousands of believers who have unlocked deeper spiritual dimensions through Baptizo."}),!e&&r.jsx("div",{children:r.jsx(re,{to:"/register",children:r.jsx(M,{size:"lg",className:"h-12 md:h-14 px-8 md:px-12 text-base md:text-lg font-black hover:scale-105 active:scale-95 transition-all",children:"Create Your Free Account"})})})]})})})]})}const be=p.forwardRef(({label:e,error:t,icon:s,className:n,...a},i)=>r.jsxs("div",{className:"w-full",children:[e&&r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:e}),r.jsxs("div",{className:"relative",children:[s&&r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-light-muted dark:text-dark-muted",children:s}),r.jsx("input",{ref:i,className:Y("w-full px-4 py-2.5 rounded-lg border transition-all duration-200","bg-light-bg dark:bg-dark-bg","border-light-border dark:border-dark-border","text-light-text dark:text-dark-text","placeholder:text-light-muted dark:placeholder:text-dark-muted","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:opacity-50 disabled:cursor-not-allowed",t&&"border-red-500 focus:ring-red-500",s&&"pl-10",n),...a})]}),t&&r.jsx("p",{className:"mt-1.5 text-sm text-red-500",children:t})]}));be.displayName="Input";const wA=()=>{};var Q0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[s++]=a:a<2048?(t[s++]=a>>6|192,t[s++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[s++]=a>>18|240,t[s++]=a>>12&63|128,t[s++]=a>>6&63|128,t[s++]=a&63|128):(t[s++]=a>>12|224,t[s++]=a>>6&63|128,t[s++]=a&63|128)}return t},kA=function(e){const t=[];let s=0,n=0;for(;s<e.length;){const a=e[s++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=e[s++];t[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=e[s++],o=e[s++],l=e[s++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(d>>10)),t[n++]=String.fromCharCode(56320+(d&1023))}else{const i=e[s++],o=e[s++];t[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return t.join("")},Pj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const i=e[a],o=a+1<e.length,l=o?e[a+1]:0,d=a+2<e.length,c=d?e[a+2]:0,u=i>>2,m=(i&3)<<4|l>>4;let h=(l&15)<<2|c>>6,x=c&63;d||(x=64,o||(h=64)),n.push(s[u],s[m],s[h],s[x])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Ij(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):kA(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const i=s[e.charAt(a++)],l=a<e.length?s[e.charAt(a)]:0;++a;const c=a<e.length?s[e.charAt(a)]:64;++a;const m=a<e.length?s[e.charAt(a)]:64;if(++a,i==null||l==null||c==null||m==null)throw new jA;const h=i<<2|l>>4;if(n.push(h),c!==64){const x=l<<4&240|c>>2;if(n.push(x),m!==64){const g=c<<6&192|m;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class jA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NA=function(e){const t=Ij(e);return Pj.encodeByteArray(t,!0)},Aj=function(e){return NA(e).replace(/\./g,"")},Ej=function(e){try{return Pj.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=()=>SA().__FIREBASE_DEFAULTS__,TA=()=>{if(typeof process>"u"||typeof Q0>"u")return;const e=Q0.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},_A=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Ej(e[1]);return t&&JSON.parse(t)},wp=()=>{try{return wA()||CA()||TA()||_A()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},IA=e=>{var t,s;return(s=(t=wp())==null?void 0:t.emulatorHosts)==null?void 0:s[e]},Mj=()=>{var e;return(e=wp())==null?void 0:e.config},Rj=e=>{var t;return(t=wp())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function AA(e){return(await fetch(e,{credentials:"include"})).ok}const uo={};function EA(){const e={prod:[],emulator:[]};for(const t of Object.keys(uo))uo[t]?e.emulator.push(t):e.prod.push(t);return e}function MA(e){let t=document.getElementById(e),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),s=!0),{created:s,element:t}}let K0=!1;function RA(e,t){if(typeof window>"u"||typeof document>"u"||!Jc(window.location.host)||uo[e]===t||uo[e]||K0)return;uo[e]=t;function s(h){return`__firebase__banner__${h}`}const n="__firebase__banner",i=EA().prod.length>0;function o(){const h=document.getElementById(n);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function d(h,x){h.setAttribute("width","24"),h.setAttribute("id",x),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function c(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{K0=!0,o()},h}function u(h,x){h.setAttribute("id",x),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function m(){const h=MA(n),x=s("text"),g=document.getElementById(x)||document.createElement("span"),v=s("learnmore"),w=document.getElementById(v)||document.createElement("a"),f=s("preprendIcon"),b=document.getElementById(f)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const y=h.element;l(y),u(w,v);const k=c();d(b,f),y.append(b,g,w,k),document.body.appendChild(y)}i?(g.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function DA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function OA(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function FA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function UA(){const e=Lt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Lj(){try{return typeof indexedDB=="object"}catch{return!1}}function Dj(){return new Promise((e,t)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var i;t(((i=a.error)==null?void 0:i.message)||"")}}catch(s){t(s)}})}function BA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="FirebaseError";class _s extends Error{constructor(t,s,n){super(s),this.code=t,this.customData=n,this.name=VA,Object.setPrototypeOf(this,_s.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ma.prototype.create)}}class ma{constructor(t,s,n){this.service=t,this.serviceName=s,this.errors=n}create(t,...s){const n=s[0]||{},a=`${this.service}/${t}`,i=this.errors[t],o=i?zA(i,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new _s(a,l,n)}}function zA(e,t){return e.replace($A,(s,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const $A=/\{\$([^}]+)}/g;function WA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ci(e,t){if(e===t)return!0;const s=Object.keys(e),n=Object.keys(t);for(const a of s){if(!n.includes(a))return!1;const i=e[a],o=t[a];if(Y0(i)&&Y0(o)){if(!ci(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!s.includes(a))return!1;return!0}function Y0(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(e){const t=[];for(const[s,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function qA(e,t){const s=new HA(e,t);return s.subscribe.bind(s)}class HA{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,n){let a;if(t===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");GA(t,["next","error","complete"])?a=t:a={next:t,error:s,complete:n},a.next===void 0&&(a.next=sm),a.error===void 0&&(a.error=sm),a.complete===void 0&&(a.complete=sm);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function GA(e,t){if(typeof e!="object"||e===null)return!1;for(const s of t)if(s in e&&typeof e[s]=="function")return!0;return!1}function sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(e){return e&&e._delegate?e._delegate:e}class Yr{constructor(t,s,n){this.name=t,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const n=new PA;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(YA(t))try{this.getOrInitializeService({instanceIdentifier:Mn})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(t=Mn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Mn){return this.instances.has(t)}getOptions(t=Mn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(a)}return a}onInit(t,s){const n=this.normalizeInstanceIdentifier(s),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&t(i,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,s){const n=this.onInitCallbacks.get(s);if(n)for(const a of n)try{a(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:KA(t),options:s}),this.instances.set(t,n),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Mn){return this.component?this.component.multipleInstances?t:Mn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KA(e){return e===Mn?void 0:e}function YA(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new QA(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Ce||(Ce={}));const XA={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},ZA=Ce.INFO,eE={[Ce.DEBUG]:"log",[Ce.VERBOSE]:"log",[Ce.INFO]:"info",[Ce.WARN]:"warn",[Ce.ERROR]:"error"},tE=(e,t,...s)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=eE[t];if(a)console[a](`[${n}]  ${e.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Oj{constructor(t){this.name=t,this._logLevel=ZA,this._logHandler=tE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Ce))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?XA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Ce.DEBUG,...t),this._logHandler(this,Ce.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Ce.VERBOSE,...t),this._logHandler(this,Ce.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Ce.INFO,...t),this._logHandler(this,Ce.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Ce.WARN,...t),this._logHandler(this,Ce.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Ce.ERROR,...t),this._logHandler(this,Ce.ERROR,...t)}}const rE=(e,t)=>t.some(s=>e instanceof s);let J0,X0;function sE(){return J0||(J0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nE(){return X0||(X0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fj=new WeakMap,Lh=new WeakMap,Uj=new WeakMap,nm=new WeakMap,kp=new WeakMap;function aE(e){const t=new Promise((s,n)=>{const a=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{s(hs(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(s=>{s instanceof IDBCursor&&Fj.set(s,e)}).catch(()=>{}),kp.set(t,e),t}function iE(e){if(Lh.has(e))return;const t=new Promise((s,n)=>{const a=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{s(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});Lh.set(e,t)}let Dh={get(e,t,s){if(e instanceof IDBTransaction){if(t==="done")return Lh.get(e);if(t==="objectStoreNames")return e.objectStoreNames||Uj.get(e);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return hs(e[t])},set(e,t,s){return e[t]=s,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function oE(e){Dh=e(Dh)}function lE(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const n=e.call(am(this),t,...s);return Uj.set(n,t.sort?t.sort():[t]),hs(n)}:nE().includes(e)?function(...t){return e.apply(am(this),t),hs(Fj.get(this))}:function(...t){return hs(e.apply(am(this),t))}}function dE(e){return typeof e=="function"?lE(e):(e instanceof IDBTransaction&&iE(e),rE(e,sE())?new Proxy(e,Dh):e)}function hs(e){if(e instanceof IDBRequest)return aE(e);if(nm.has(e))return nm.get(e);const t=dE(e);return t!==e&&(nm.set(e,t),kp.set(t,e)),t}const am=e=>kp.get(e);function Xc(e,t,{blocked:s,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(e,t),l=hs(o);return n&&o.addEventListener("upgradeneeded",d=>{n(hs(o.result),d.oldVersion,d.newVersion,hs(o.transaction),d)}),s&&o.addEventListener("blocked",d=>s(d.oldVersion,d.newVersion,d)),l.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",c=>a(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}function im(e,{blocked:t}={}){const s=indexedDB.deleteDatabase(e);return t&&s.addEventListener("blocked",n=>t(n.oldVersion,n)),hs(s).then(()=>{})}const cE=["get","getKey","getAll","getAllKeys","count"],uE=["put","add","delete","clear"],om=new Map;function Z0(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(om.get(t))return om.get(t);const s=t.replace(/FromIndex$/,""),n=t!==s,a=uE.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(a||cE.includes(s)))return;const i=async function(o,...l){const d=this.transaction(o,a?"readwrite":"readonly");let c=d.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[s](...l),a&&d.done]))[0]};return om.set(t,i),i}oE(e=>({...e,get:(t,s,n)=>Z0(t,s)||e.get(t,s,n),has:(t,s)=>!!Z0(t,s)||e.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(hE(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function hE(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Oh="@firebase/app",eb="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new Oj("@firebase/app"),xE="@firebase/app-compat",pE="@firebase/analytics-compat",fE="@firebase/analytics",gE="@firebase/app-check-compat",bE="@firebase/app-check",yE="@firebase/auth",vE="@firebase/auth-compat",wE="@firebase/database",kE="@firebase/data-connect",jE="@firebase/database-compat",NE="@firebase/functions",SE="@firebase/functions-compat",CE="@firebase/installations",TE="@firebase/installations-compat",_E="@firebase/messaging",IE="@firebase/messaging-compat",PE="@firebase/performance",AE="@firebase/performance-compat",EE="@firebase/remote-config",ME="@firebase/remote-config-compat",RE="@firebase/storage",LE="@firebase/storage-compat",DE="@firebase/firestore",OE="@firebase/ai",FE="@firebase/firestore-compat",UE="firebase",BE="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="[DEFAULT]",VE={[Oh]:"fire-core",[xE]:"fire-core-compat",[fE]:"fire-analytics",[pE]:"fire-analytics-compat",[bE]:"fire-app-check",[gE]:"fire-app-check-compat",[yE]:"fire-auth",[vE]:"fire-auth-compat",[wE]:"fire-rtdb",[kE]:"fire-data-connect",[jE]:"fire-rtdb-compat",[NE]:"fire-fn",[SE]:"fire-fn-compat",[CE]:"fire-iid",[TE]:"fire-iid-compat",[_E]:"fire-fcm",[IE]:"fire-fcm-compat",[PE]:"fire-perf",[AE]:"fire-perf-compat",[EE]:"fire-rc",[ME]:"fire-rc-compat",[RE]:"fire-gcs",[LE]:"fire-gcs-compat",[DE]:"fire-fst",[FE]:"fire-fst-compat",[OE]:"fire-vertex","fire-js":"fire-js",[UE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mc=new Map,zE=new Map,Uh=new Map;function tb(e,t){try{e.container.addComponent(t)}catch(s){ws.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,s)}}function ks(e){const t=e.name;if(Uh.has(t))return ws.debug(`There were multiple attempts to register component ${t}.`),!1;Uh.set(t,e);for(const s of mc.values())tb(s,e);for(const s of zE.values())tb(s,e);return!0}function ol(e,t){const s=e.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),e.container.getProvider(t)}function Br(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ln=new ma("app","Firebase",$E);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t,s,n){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ll=BE;function Bj(e,t={}){let s=e;typeof t!="object"&&(t={name:t});const n={name:Fh,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw ln.create("bad-app-name",{appName:String(a)});if(s||(s=Mj()),!s)throw ln.create("no-options");const i=mc.get(a);if(i){if(ci(s,i.options)&&ci(n,i.config))return i;throw ln.create("duplicate-app",{appName:a})}const o=new JA(a);for(const d of Uh.values())o.addComponent(d);const l=new WE(s,n,o);return mc.set(a,l),l}function Vj(e=Fh){const t=mc.get(e);if(!t&&e===Fh&&Mj())return Bj();if(!t)throw ln.create("no-app",{appName:e});return t}function Hr(e,t,s){let n=VE[e]??e;s&&(n+=`-${s}`);const a=n.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const o=[`Unable to register library "${n}" with version "${t}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),ws.warn(o.join(" "));return}ks(new Yr(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qE="firebase-heartbeat-database",HE=1,zo="firebase-heartbeat-store";let lm=null;function zj(){return lm||(lm=Xc(qE,HE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(zo)}catch(s){console.warn(s)}}}}).catch(e=>{throw ln.create("idb-open",{originalErrorMessage:e.message})})),lm}async function GE(e){try{const s=(await zj()).transaction(zo),n=await s.objectStore(zo).get($j(e));return await s.done,n}catch(t){if(t instanceof _s)ws.warn(t.message);else{const s=ln.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});ws.warn(s.message)}}}async function rb(e,t){try{const n=(await zj()).transaction(zo,"readwrite");await n.objectStore(zo).put(t,$j(e)),await n.done}catch(s){if(s instanceof _s)ws.warn(s.message);else{const n=ln.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});ws.warn(n.message)}}}function $j(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=1024,KE=30;class YE{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new XE(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=sb();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>KE){const o=ZE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ws.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=sb(),{heartbeatsToSend:n,unsentEntries:a}=JE(this._heartbeatsCache.heartbeats),i=Aj(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return ws.warn(s),""}}}function sb(){return new Date().toISOString().substring(0,10)}function JE(e,t=QE){const s=[];let n=e.slice();for(const a of e){const i=s.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),nb(s)>t){i.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),nb(s)>t){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class XE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lj()?Dj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await GE(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return rb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return rb(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function nb(e){return Aj(JSON.stringify({version:2,heartbeats:e})).length}function ZE(e){if(e.length===0)return-1;let t=0,s=e[0].date;for(let n=1;n<e.length;n++)e[n].date<s&&(s=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e6(e){ks(new Yr("platform-logger",t=>new mE(t),"PRIVATE")),ks(new Yr("heartbeat",t=>new YE(t),"PRIVATE")),Hr(Oh,eb,e),Hr(Oh,eb,"esm2020"),Hr("fire-js","")}e6("");var t6="firebase",r6="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr(t6,r6,"app");const Wj="@firebase/installations",jp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=1e4,Hj=`w:${jp}`,Gj="FIS_v2",s6="https://firebaseinstallations.googleapis.com/v1",n6=60*60*1e3,a6="installations",i6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sa=new ma(a6,i6,o6);function Qj(e){return e instanceof _s&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj({projectId:e}){return`${s6}/projects/${e}/installations`}function Yj(e){return{token:e.token,requestStatus:2,expiresIn:d6(e.expiresIn),creationTime:Date.now()}}async function Jj(e,t){const n=(await t.json()).error;return sa.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Xj({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function l6(e,{refreshToken:t}){const s=Xj(e);return s.append("Authorization",c6(t)),s}async function Zj(e){const t=await e();return t.status>=500&&t.status<600?e():t}function d6(e){return Number(e.replace("s","000"))}function c6(e){return`${Gj} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u6({appConfig:e,heartbeatServiceProvider:t},{fid:s}){const n=Kj(e),a=Xj(e),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const o={fid:s,authVersion:Gj,appId:e.appId,sdkVersion:Hj},l={method:"POST",headers:a,body:JSON.stringify(o)},d=await Zj(()=>fetch(n,l));if(d.ok){const c=await d.json();return{fid:c.fid||s,registrationStatus:2,refreshToken:c.refreshToken,authToken:Yj(c.authToken)}}else throw await Jj("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m6(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=/^[cdef][\w-]{21}$/,Bh="";function x6(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const s=p6(e);return h6.test(s)?s:Bh}catch{return Bh}}function p6(e){return m6(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Map;function rN(e,t){const s=Zc(e);sN(s,t),f6(s,t)}function sN(e,t){const s=tN.get(e);if(s)for(const n of s)n(t)}function f6(e,t){const s=g6();s&&s.postMessage({key:e,fid:t}),b6()}let Bn=null;function g6(){return!Bn&&"BroadcastChannel"in self&&(Bn=new BroadcastChannel("[Firebase] FID Change"),Bn.onmessage=e=>{sN(e.data.key,e.data.fid)}),Bn}function b6(){tN.size===0&&Bn&&(Bn.close(),Bn=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y6="firebase-installations-database",v6=1,na="firebase-installations-store";let dm=null;function Np(){return dm||(dm=Xc(y6,v6,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(na)}}})),dm}async function hc(e,t){const s=Zc(e),a=(await Np()).transaction(na,"readwrite"),i=a.objectStore(na),o=await i.get(s);return await i.put(t,s),await a.done,(!o||o.fid!==t.fid)&&rN(e,t.fid),t}async function nN(e){const t=Zc(e),n=(await Np()).transaction(na,"readwrite");await n.objectStore(na).delete(t),await n.done}async function eu(e,t){const s=Zc(e),a=(await Np()).transaction(na,"readwrite"),i=a.objectStore(na),o=await i.get(s),l=t(o);return l===void 0?await i.delete(s):await i.put(l,s),await a.done,l&&(!o||o.fid!==l.fid)&&rN(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sp(e){let t;const s=await eu(e.appConfig,n=>{const a=w6(n),i=k6(e,a);return t=i.registrationPromise,i.installationEntry});return s.fid===Bh?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function w6(e){const t=e||{fid:x6(),registrationStatus:0};return aN(t)}function k6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(sa.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=j6(e,s);return{installationEntry:s,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:N6(e)}:{installationEntry:t}}async function j6(e,t){try{const s=await u6(e,t);return hc(e.appConfig,s)}catch(s){throw Qj(s)&&s.customData.serverCode===409?await nN(e.appConfig):await hc(e.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function N6(e){let t=await ab(e.appConfig);for(;t.registrationStatus===1;)await eN(100),t=await ab(e.appConfig);if(t.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await Sp(e);return n||s}return t}function ab(e){return eu(e,t=>{if(!t)throw sa.create("installation-not-found");return aN(t)})}function aN(e){return S6(e)?{fid:e.fid,registrationStatus:0}:e}function S6(e){return e.registrationStatus===1&&e.registrationTime+qj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C6({appConfig:e,heartbeatServiceProvider:t},s){const n=T6(e,s),a=l6(e,s),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const o={installation:{sdkVersion:Hj,appId:e.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},d=await Zj(()=>fetch(n,l));if(d.ok){const c=await d.json();return Yj(c)}else throw await Jj("Generate Auth Token",d)}function T6(e,{fid:t}){return`${Kj(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cp(e,t=!1){let s;const n=await eu(e.appConfig,i=>{if(!iN(i))throw sa.create("not-registered");const o=i.authToken;if(!t&&P6(o))return i;if(o.requestStatus===1)return s=_6(e,t),i;{if(!navigator.onLine)throw sa.create("app-offline");const l=E6(i);return s=I6(e,l),l}});return s?await s:n.authToken}async function _6(e,t){let s=await ib(e.appConfig);for(;s.authToken.requestStatus===1;)await eN(100),s=await ib(e.appConfig);const n=s.authToken;return n.requestStatus===0?Cp(e,t):n}function ib(e){return eu(e,t=>{if(!iN(t))throw sa.create("not-registered");const s=t.authToken;return M6(s)?{...t,authToken:{requestStatus:0}}:t})}async function I6(e,t){try{const s=await C6(e,t),n={...t,authToken:s};return await hc(e.appConfig,n),s}catch(s){if(Qj(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await nN(e.appConfig);else{const n={...t,authToken:{requestStatus:0}};await hc(e.appConfig,n)}throw s}}function iN(e){return e!==void 0&&e.registrationStatus===2}function P6(e){return e.requestStatus===2&&!A6(e)}function A6(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+n6}function E6(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function M6(e){return e.requestStatus===1&&e.requestTime+qj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R6(e){const t=e,{installationEntry:s,registrationPromise:n}=await Sp(t);return n?n.catch(console.error):Cp(t).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L6(e,t=!1){const s=e;return await D6(s),(await Cp(s,t)).token}async function D6(e){const{registrationPromise:t}=await Sp(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(e){if(!e||!e.options)throw cm("App Configuration");if(!e.name)throw cm("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!e.options[s])throw cm(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function cm(e){return sa.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="installations",F6="installations-internal",U6=e=>{const t=e.getProvider("app").getImmediate(),s=O6(t),n=ol(t,"heartbeat");return{app:t,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},B6=e=>{const t=e.getProvider("app").getImmediate(),s=ol(t,oN).getImmediate();return{getId:()=>R6(s),getToken:a=>L6(s,a)}};function V6(){ks(new Yr(oN,U6,"PUBLIC")),ks(new Yr(F6,B6,"PRIVATE"))}V6();Hr(Wj,jp);Hr(Wj,jp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z6="/firebase-messaging-sw.js",$6="/firebase-cloud-messaging-push-scope",lN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",W6="https://fcmregistrations.googleapis.com/v1",dN="google.c.a.c_id",q6="google.c.a.c_l",H6="google.c.a.ts",G6="google.c.a.e",ob=1e4;var lb;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(lb||(lb={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var $o;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})($o||($o={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Q6(e){const t="=".repeat((4-e.length%4)%4),s=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(s),a=new Uint8Array(n.length);for(let i=0;i<n.length;++i)a[i]=n.charCodeAt(i);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="fcm_token_details_db",K6=5,db="fcm_token_object_Store";async function Y6(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(um))return null;let t=null;return(await Xc(um,K6,{upgrade:async(n,a,i,o)=>{if(a<2||!n.objectStoreNames.contains(db))return;const l=o.objectStore(db),d=await l.index("fcmSenderId").get(e);if(await l.clear(),!!d){if(a===2){const c=d;if(!c.auth||!c.p256dh||!c.endpoint)return;t={token:c.fcmToken,createTime:c.createTime??Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:ts(c.vapidKey)}}}else if(a===3){const c=d;t={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:ts(c.auth),p256dh:ts(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:ts(c.vapidKey)}}}else if(a===4){const c=d;t={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:ts(c.auth),p256dh:ts(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:ts(c.vapidKey)}}}}}})).close(),await im(um),await im("fcm_vapid_details_db"),await im("undefined"),J6(t)?t:null}function J6(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6="firebase-messaging-database",Z6=1,Wo="firebase-messaging-store";let mm=null;function cN(){return mm||(mm=Xc(X6,Z6,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Wo)}}})),mm}async function eM(e){const t=uN(e),n=await(await cN()).transaction(Wo).objectStore(Wo).get(t);if(n)return n;{const a=await Y6(e.appConfig.senderId);if(a)return await Tp(e,a),a}}async function Tp(e,t){const s=uN(e),a=(await cN()).transaction(Wo,"readwrite");return await a.objectStore(Wo).put(t,s),await a.done,t}function uN({appConfig:e}){return e.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ct=new ma("messaging","Messaging",tM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(e,t){const s=await Ip(e),n=mN(t),a={method:"POST",headers:s,body:JSON.stringify(n)};let i;try{i=await(await fetch(_p(e.appConfig),a)).json()}catch(o){throw Ct.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Ct.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw Ct.create("token-subscribe-no-token");return i.token}async function sM(e,t){const s=await Ip(e),n=mN(t.subscriptionOptions),a={method:"PATCH",headers:s,body:JSON.stringify(n)};let i;try{i=await(await fetch(`${_p(e.appConfig)}/${t.token}`,a)).json()}catch(o){throw Ct.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw Ct.create("token-update-failed",{errorInfo:o})}if(!i.token)throw Ct.create("token-update-no-token");return i.token}async function nM(e,t){const n={method:"DELETE",headers:await Ip(e)};try{const i=await(await fetch(`${_p(e.appConfig)}/${t}`,n)).json();if(i.error){const o=i.error.message;throw Ct.create("token-unsubscribe-failed",{errorInfo:o})}}catch(a){throw Ct.create("token-unsubscribe-failed",{errorInfo:a==null?void 0:a.toString()})}}function _p({projectId:e}){return`${W6}/projects/${e}/registrations`}async function Ip({appConfig:e,installations:t}){const s=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function mN({p256dh:e,auth:t,endpoint:s,vapidKey:n}){const a={web:{endpoint:s,auth:t,p256dh:e}};return n!==lN&&(a.web.applicationPubKey=n),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM=7*24*60*60*1e3;async function iM(e){const t=await lM(e.swRegistration,e.vapidKey),s={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:ts(t.getKey("auth")),p256dh:ts(t.getKey("p256dh"))},n=await eM(e.firebaseDependencies);if(n){if(dM(n.subscriptionOptions,s))return Date.now()>=n.createTime+aM?oM(e,{token:n.token,createTime:Date.now(),subscriptionOptions:s}):n.token;try{await nM(e.firebaseDependencies,n.token)}catch(a){console.warn(a)}return cb(e.firebaseDependencies,s)}else return cb(e.firebaseDependencies,s)}async function oM(e,t){try{const s=await sM(e.firebaseDependencies,t),n={...t,token:s,createTime:Date.now()};return await Tp(e.firebaseDependencies,n),s}catch(s){throw s}}async function cb(e,t){const n={token:await rM(e,t),createTime:Date.now(),subscriptionOptions:t};return await Tp(e,n),n.token}async function lM(e,t){const s=await e.pushManager.getSubscription();return s||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Q6(t)})}function dM(e,t){const s=t.vapidKey===e.vapidKey,n=t.endpoint===e.endpoint,a=t.auth===e.auth,i=t.p256dh===e.p256dh;return s&&n&&a&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return cM(t,e),uM(t,e),mM(t,e),t}function cM(e,t){if(!t.notification)return;e.notification={};const s=t.notification.title;s&&(e.notification.title=s);const n=t.notification.body;n&&(e.notification.body=n);const a=t.notification.image;a&&(e.notification.image=a);const i=t.notification.icon;i&&(e.notification.icon=i)}function uM(e,t){t.data&&(e.data=t.data)}function mM(e,t){var a,i,o,l;if(!t.fcmOptions&&!((a=t.notification)!=null&&a.click_action))return;e.fcmOptions={};const s=((i=t.fcmOptions)==null?void 0:i.link)??((o=t.notification)==null?void 0:o.click_action);s&&(e.fcmOptions.link=s);const n=(l=t.fcmOptions)==null?void 0:l.analytics_label;n&&(e.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(e){return typeof e=="object"&&!!e&&dN in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(e){if(!e||!e.options)throw hm("App Configuration Object");if(!e.name)throw hm("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:s}=e;for(const n of t)if(!s[n])throw hm(n);return{appName:e.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function hm(e){return Ct.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(t,s,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=xM(t);this.firebaseDependencies={app:t,appConfig:a,installations:s,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fM(e){try{e.swRegistration=await navigator.serviceWorker.register(z6,{scope:$6}),e.swRegistration.update().catch(()=>{}),await gM(e.swRegistration)}catch(t){throw Ct.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function gM(e){return new Promise((t,s)=>{const n=setTimeout(()=>s(new Error(`Service worker not registered after ${ob} ms`)),ob),a=e.installing||e.waiting;e.active?(clearTimeout(n),t()):a?a.onstatechange=i=>{var o;((o=i.target)==null?void 0:o.state)==="activated"&&(a.onstatechange=null,clearTimeout(n),t())}:(clearTimeout(n),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(e,t){if(!t&&!e.swRegistration&&await fM(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw Ct.create("invalid-sw-registration");e.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yM(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=lN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(e,t){if(!navigator)throw Ct.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ct.create("permission-blocked");return await yM(e,t==null?void 0:t.vapidKey),await bM(e,t==null?void 0:t.serviceWorkerRegistration),iM(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vM(e,t,s){const n=wM(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:s[dN],message_name:s[q6],message_time:s[H6],message_device_time:Math.floor(Date.now()/1e3)})}function wM(e){switch(e){case $o.NOTIFICATION_CLICKED:return"notification_open";case $o.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(e,t){const s=t.data;if(!s.isFirebaseMessaging)return;e.onMessageHandler&&s.messageType===$o.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(ub(s)):e.onMessageHandler.next(ub(s)));const n=s.data;hM(n)&&n[G6]==="1"&&await vM(e,s.messageType,n)}const mb="@firebase/messaging",hb="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jM=e=>{const t=new pM(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>kM(t,s)),t},NM=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:n=>hN(t,n)}};function SM(){ks(new Yr("messaging",jM,"PUBLIC")),ks(new Yr("messaging-internal",NM,"PRIVATE")),Hr(mb,hb),Hr(mb,hb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(){try{await Dj()}catch{return!1}return typeof window<"u"&&Lj()&&BA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(e,t){if(!navigator)throw Ct.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(e=Vj()){return CM().then(t=>{if(!t)throw Ct.create("unsupported-browser")},t=>{throw Ct.create("indexed-db-unsupported")}),ol(Is(e),"messaging").getImmediate()}async function IM(e,t){return e=Is(e),hN(e,t)}function PM(e,t){return e=Is(e),TM(e,t)}SM();function xN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AM=xN,pN=new ma("auth","Firebase",xN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Oj("@firebase/auth");function EM(e,...t){xc.logLevel<=Ce.WARN&&xc.warn(`Auth (${ll}): ${e}`,...t)}function yd(e,...t){xc.logLevel<=Ce.ERROR&&xc.error(`Auth (${ll}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(e,...t){throw Ap(e,...t)}function Ir(e,...t){return Ap(e,...t)}function Pp(e,t,s){const n={...AM(),[t]:s};return new ma("auth","Firebase",n).create(t,{appName:e.name})}function Qn(e){return Pp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MM(e,t,s){const n=s;if(!(t instanceof n))throw n.name!==t.constructor.name&&Jr(e,"argument-error"),Pp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ap(e,...t){if(typeof e!="string"){const s=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(s,...n)}return pN.create(e,...t)}function ae(e,t,...s){if(!e)throw Ap(t,...s)}function ls(e){const t="INTERNAL ASSERTION FAILED: "+e;throw yd(t),new Error(t)}function js(e,t){e||ls(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vh(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function RM(){return xb()==="http:"||xb()==="https:"}function xb(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(RM()||OA()||"connection"in navigator)?navigator.onLine:!0}function DM(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(t,s){this.shortDelay=t,this.longDelay=s,js(s>t,"Short delay should be less than long delay!"),this.isMobile=LA()||FA()}get(){return LM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(e,t){js(e.emulator,"Emulator should always be set here");const{url:s}=e.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{static initialize(t,s,n){this.fetchImpl=t,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UM=new dl(3e4,6e4);function Mp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function vi(e,t,s,n,a={}){return gN(e,a,async()=>{let i={},o={};n&&(t==="GET"?o=n:i={body:JSON.stringify(n)});const l=il({key:e.config.apiKey,...o}).slice(1),d=await e._getAdditionalHeaders();d["Content-Type"]="application/json",e.languageCode&&(d["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:d,...i};return DA()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Jc(e.emulatorConfig.host)&&(c.credentials="include"),fN.fetch()(await bN(e,e.config.apiHost,s,l),c)})}async function gN(e,t,s){e._canInitEmulator=!1;const n={...OM,...t};try{const a=new VM(e),i=await Promise.race([s(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Xl(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[d,c]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Xl(e,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Xl(e,"email-already-in-use",o);if(d==="USER_DISABLED")throw Xl(e,"user-disabled",o);const u=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Pp(e,u,c);Jr(e,u)}}catch(a){if(a instanceof _s)throw a;Jr(e,"network-request-failed",{message:String(a)})}}async function BM(e,t,s,n,a={}){const i=await vi(e,t,s,n,a);return"mfaPendingCredential"in i&&Jr(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function bN(e,t,s,n){const a=`${t}${s}?${n}`,i=e,o=i.config.emulator?Ep(e.config,a):`${e.config.apiScheme}://${a}`;return FM.includes(s)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class VM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(Ir(this.auth,"network-request-failed")),UM.get())})}}function Xl(e,t,s){const n={appName:e.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const a=Ir(e,t,n);return a.customData._tokenResponse=s,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(e,t){return vi(e,"POST","/v1/accounts:delete",t)}async function pc(e,t){return vi(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function $M(e,t=!1){const s=Is(e),n=await s.getIdToken(t),a=Rp(n);ae(a&&a.exp&&a.auth_time&&a.iat,s.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:mo(xm(a.auth_time)),issuedAtTime:mo(xm(a.iat)),expirationTime:mo(xm(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xm(e){return Number(e)*1e3}function Rp(e){const[t,s,n]=e.split(".");if(t===void 0||s===void 0||n===void 0)return yd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Ej(s);return a?JSON.parse(a):(yd("Failed to decode base64 JWT payload"),null)}catch(a){return yd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function pb(e){const t=Rp(e);return ae(t,"internal-error"),ae(typeof t.exp<"u","internal-error"),ae(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(e,t,s=!1){if(s)return t;try{return await t}catch(n){throw n instanceof _s&&WM(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function WM({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=mo(this.lastLoginAt),this.creationTime=mo(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fc(e){var m;const t=e.auth,s=await e.getIdToken(),n=await qo(e,pc(t,{idToken:s}));ae(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const i=(m=a.providerUserInfo)!=null&&m.length?yN(a.providerUserInfo):[],o=GM(e.providerData,i),l=e.isAnonymous,d=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),c=l?d:!1,u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new zh(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(e,u)}async function HM(e){const t=Is(e);await fc(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function GM(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function yN(e){return e.map(({providerId:t,...s})=>({providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(e,t){const s=await gN(e,{},async()=>{const n=il({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:i}=e.config,o=await bN(e,a,"/v1/token",`key=${i}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:l,body:n};return e.emulatorConfig&&Jc(e.emulatorConfig.host)&&(d.credentials="include"),fN.fetch()(o,d)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function KM(e,t){return vi(e,"POST","/v2/accounts:revokeToken",Mp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ae(t.idToken,"internal-error"),ae(typeof t.idToken<"u","internal-error"),ae(typeof t.refreshToken<"u","internal-error");const s="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):pb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){ae(t.length!==0,"internal-error");const s=pb(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){const{accessToken:n,refreshToken:a,expiresIn:i}=await QM(t,s);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(t,s,n){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,s){const{refreshToken:n,accessToken:a,expirationTime:i}=s,o=new qa;return n&&(ae(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&(ae(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),i&&(ae(typeof i=="number","internal-error",{appName:t}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new qa,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(e,t){ae(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Sr{constructor({uid:t,auth:s,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new qM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new zh(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const s=await qo(this,this.stsTokenManager.getToken(this.auth,t));return ae(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return $M(this,t)}reload(){return HM(this)}_assign(t){this!==t&&(ae(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>({...s})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const s=new Sr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(t){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),s&&await fc(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Br(this.auth.app))return Promise.reject(Qn(this.auth));const t=await this.getIdToken();return await qo(this,zM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){const n=s.displayName??void 0,a=s.email??void 0,i=s.phoneNumber??void 0,o=s.photoURL??void 0,l=s.tenantId??void 0,d=s._redirectEventId??void 0,c=s.createdAt??void 0,u=s.lastLoginAt??void 0,{uid:m,emailVerified:h,isAnonymous:x,providerData:g,stsTokenManager:v}=s;ae(m&&v,t,"internal-error");const w=qa.fromJSON(this.name,v);ae(typeof m=="string",t,"internal-error"),Ls(n,t.name),Ls(a,t.name),ae(typeof h=="boolean",t,"internal-error"),ae(typeof x=="boolean",t,"internal-error"),Ls(i,t.name),Ls(o,t.name),Ls(l,t.name),Ls(d,t.name),Ls(c,t.name),Ls(u,t.name);const f=new Sr({uid:m,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:w,createdAt:c,lastLoginAt:u});return g&&Array.isArray(g)&&(f.providerData=g.map(b=>({...b}))),d&&(f._redirectEventId=d),f}static async _fromIdTokenResponse(t,s,n=!1){const a=new qa;a.updateFromServerResponse(s);const i=new Sr({uid:s.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await fc(i),i}static async _fromGetAccountInfoResponse(t,s,n){const a=s.users[0];ae(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?yN(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),l=new qa;l.updateFromIdToken(n);const d=new Sr({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),c={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new zh(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,c),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb=new Map;function ds(e){js(e instanceof Function,"Expected a class definition");let t=fb.get(e);return t?(js(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fb.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){const s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}vN.type="NONE";const gb=vN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(e,t,s){return`firebase:${e}:${t}:${s}`}class Ha{constructor(t,s,n){this.persistence=t,this.auth=s,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=vd(this.userKey,a.apiKey,i),this.fullPersistenceKey=vd("persistence",a.apiKey,i),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const s=await pc(this.auth,{idToken:t}).catch(()=>{});return s?Sr._fromGetAccountInfoResponse(this.auth,s,t):null}return Sr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,n="authUser"){if(!s.length)return new Ha(ds(gb),t,n);const a=(await Promise.all(s.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=a[0]||ds(gb);const o=vd(n,t.config.apiKey,t.name);let l=null;for(const c of s)try{const u=await c._get(o);if(u){let m;if(typeof u=="string"){const h=await pc(t,{idToken:u}).catch(()=>{});if(!h)break;m=await Sr._fromGetAccountInfoResponse(t,h,u)}else m=Sr._fromJSON(t,u);c!==i&&(l=m),i=c;break}}catch{}const d=a.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Ha(i,t,n):(i=d[0],l&&await i._set(o,l.toJSON()),await Promise.all(s.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ha(i,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(NN(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(wN(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(CN(t))return"Blackberry";if(TN(t))return"Webos";if(kN(t))return"Safari";if((t.includes("chrome/")||jN(t))&&!t.includes("edge/"))return"Chrome";if(SN(t))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(s);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function wN(e=Lt()){return/firefox\//i.test(e)}function kN(e=Lt()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function jN(e=Lt()){return/crios\//i.test(e)}function NN(e=Lt()){return/iemobile/i.test(e)}function SN(e=Lt()){return/android/i.test(e)}function CN(e=Lt()){return/blackberry/i.test(e)}function TN(e=Lt()){return/webos/i.test(e)}function Lp(e=Lt()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function YM(e=Lt()){var t;return Lp(e)&&!!((t=window.navigator)!=null&&t.standalone)}function JM(){return UA()&&document.documentMode===10}function _N(e=Lt()){return Lp(e)||SN(e)||TN(e)||CN(e)||/windows phone/i.test(e)||NN(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IN(e,t=[]){let s;switch(e){case"Browser":s=bb(Lt());break;case"Worker":s=`${bb(Lt())}-${e}`;break;default:s=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${ll}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){const n=i=>new Promise((o,l)=>{try{const d=t(i);o(d)}catch(d){l(d)}});n.onAbort=s,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const s=[];try{for(const n of this.queue)await n(t),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const a of s)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZM(e,t={}){return vi(e,"GET","/v2/passwordPolicy",Mp(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=6;class tR{constructor(t){var n;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??eR,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,s),this.validatePasswordCharacterOptions(t,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(t,s){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(s.meetsMinPasswordLength=t.length>=n),a&&(s.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(s,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,s,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(t,s,n,a){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yb(this),this.idTokenSubscription=new yb(this),this.beforeStateQueue=new XM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=ds(s)),this._initializationPromise=this.queue(async()=>{var n,a,i;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const s=await pc(this,{idToken:t}),n=await Sr._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(n)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(Br(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let n=s,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(t);(!o||o===l)&&(d!=null&&d.user)&&(n=d.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await fc(t)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=DM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Br(this.app))return Promise.reject(Qn(this));const s=t?Is(t):null;return s&&ae(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&ae(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Br(this.app)?Promise.reject(Qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Br(this.app)?Promise.reject(Qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await ZM(this),s=new tR(t);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ma("auth","Firebase",t())}onAuthStateChanged(t,s,n){return this.registerStateListener(this.authStateSubscription,t,s,n)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,n){return this.registerStateListener(this.idTokenSubscription,t,s,n)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){const s=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:s};this.tenantId!=null&&(n.tenantId=this.tenantId),await KM(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,s){const n=await this.getOrInitRedirectPersistenceManager(s);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const s=t&&ds(t)||this._popupRedirectResolver;ae(s,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[ds(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)==null?void 0:s._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((s=this.currentUser)==null?void 0:s.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,n,a){if(this._deleted)return()=>{};const i=typeof s=="function"?s:s.next.bind(s);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof s=="function"){const d=t.addObserver(s,n,a);return()=>{o=!0,d()}}else{const d=t.addObserver(s);return()=>{o=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=IN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var s;if(Br(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getToken());return t!=null&&t.error&&EM(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function tu(e){return Is(e)}class yb{constructor(t){this.auth=t,this.observer=null,this.addObserver=qA(s=>this.observer=s)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sR(e){Dp=e}function nR(e){return Dp.loadJS(e)}function aR(){return Dp.gapiScript}function iR(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(e,t){const s=ol(e,"auth");if(s.isInitialized()){const a=s.getImmediate(),i=s.getOptions();if(ci(i,t??{}))return a;Jr(a,"already-initialized")}return s.initialize({options:t})}function lR(e,t){const s=(t==null?void 0:t.persistence)||[],n=(Array.isArray(s)?s:[s]).map(ds);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function dR(e,t,s){const n=tu(e);ae(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,i=PN(t),{host:o,port:l}=cR(t),d=l===null?"":`:${l}`,c={url:`${i}//${o}${d}/`},u=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){ae(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ae(ci(c,n.config.emulator)&&ci(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,Jc(o)?(AA(`${i}//${o}${d}`),RA("Auth",!0)):uR()}function PN(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function cR(e){const t=PN(e),s=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:vb(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:vb(o)}}}function vb(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function uR(){function e(){const t=document.createElement("p"),s=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return ls("not implemented")}_getIdTokenResponse(t){return ls("not implemented")}_linkToIdToken(t,s){return ls("not implemented")}_getReauthenticationResolver(t){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(e,t){return BM(e,"POST","/v1/accounts:signInWithIdp",Mp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR="http://localhost";class aa extends AN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const s=new aa(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):Jr("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...i}=s;if(!n||!a)return null;const o=new aa(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(t){const s=this.buildRequest();return Ga(t,s)}_linkToIdToken(t,s){const n=this.buildRequest();return n.idToken=s,Ga(t,n)}_getReauthenticationResolver(t){const s=this.buildRequest();return s.autoCreate=!1,Ga(t,s)}buildRequest(){const t={requestUri:mR,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=il(s)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Op{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s extends cl{constructor(){super("facebook.com")}static credential(t){return aa._fromParams({providerId:$s.PROVIDER_ID,signInMethod:$s.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return $s.credentialFromTaggedObject(t)}static credentialFromError(t){return $s.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return $s.credential(t.oauthAccessToken)}catch{return null}}}$s.FACEBOOK_SIGN_IN_METHOD="facebook.com";$s.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends cl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return aa._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return ns.credentialFromTaggedObject(t)}static credentialFromError(t){return ns.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:s,oauthAccessToken:n}=t;if(!s&&!n)return null;try{return ns.credential(s,n)}catch{return null}}}ns.GOOGLE_SIGN_IN_METHOD="google.com";ns.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends cl{constructor(){super("github.com")}static credential(t){return aa._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ws.credentialFromTaggedObject(t)}static credentialFromError(t){return Ws.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ws.credential(t.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends cl{constructor(){super("twitter.com")}static credential(t,s){return aa._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return qs.credentialFromTaggedObject(t)}static credentialFromError(t){return qs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=t;if(!s||!n)return null;try{return qs.credential(s,n)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,n,a=!1){const i=await Sr._fromIdTokenResponse(t,n,a),o=wb(n);return new ui({user:i,providerId:o,_tokenResponse:n,operationType:s})}static async _forOperation(t,s,n){await t._updateTokensIfNecessary(n,!0);const a=wb(n);return new ui({user:t,providerId:a,_tokenResponse:n,operationType:s})}}function wb(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc extends _s{constructor(t,s,n,a){super(s.code,s.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,gc.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,s,n,a){return new gc(t,s,n,a)}}function EN(e,t,s,n){return(t==="reauthenticate"?s._getReauthenticationResolver(e):s._getIdTokenResponse(e)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?gc._fromErrorAndOperation(e,i,t,n):i})}async function hR(e,t,s=!1){const n=await qo(e,t._linkToIdToken(e.auth,await e.getIdToken()),s);return ui._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(e,t,s=!1){const{auth:n}=e;if(Br(n.app))return Promise.reject(Qn(n));const a="reauthenticate";try{const i=await qo(e,EN(n,a,t,e),s);ae(i.idToken,n,"internal-error");const o=Rp(i.idToken);ae(o,n,"internal-error");const{sub:l}=o;return ae(e.uid===l,n,"user-mismatch"),ui._forOperation(e,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jr(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pR(e,t,s=!1){if(Br(e.app))return Promise.reject(Qn(e));const n="signIn",a=await EN(e,n,t),i=await ui._fromIdTokenResponse(e,n,a);return s||await e._updateCurrentUser(i.user),i}function fR(e,t,s,n){return Is(e).onIdTokenChanged(t,s,n)}function gR(e,t,s){return Is(e).beforeAuthStateChanged(t,s)}const bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(bc,"1"),this.storage.removeItem(bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){const s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=1e3,yR=10;class RN extends MN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_N(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),a=this.localCache[s];n!==a&&t(s,a,n)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((o,l,d)=>{this.notifyListeners(o,d)});return}const n=t.key;s?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!s&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);JM()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,yR):a()}notifyListeners(t,s){this.localCache[t]=s;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:n}),!0)})},bR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){const s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}RN.type="LOCAL";const vR=RN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN extends MN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}LN.type="SESSION";const DN=LN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const s=this.receivers.find(a=>a.isListeningto(t));if(s)return s;const n=new ru(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const s=t,{eventId:n,eventType:a,data:i}=s.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async c=>c(s.origin,i)),d=await wR(l);s.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),(!s||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(e="",t=10){let s="";for(let n=0;n<t;n++)s+=Math.floor(Math.random()*10);return e+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((l,d)=>{const c=Fp("",20);a.port1.start();const u=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const h=m;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(h.data.response);break;default:clearTimeout(u),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:s},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return window}function jR(e){Gr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON(){return typeof Gr().WorkerGlobalScope<"u"&&typeof Gr().importScripts=="function"}async function NR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SR(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function CR(){return ON()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="firebaseLocalStorageDb",TR=1,yc="firebaseLocalStorage",UN="fbase_key";class ul{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function su(e,t){return e.transaction([yc],t?"readwrite":"readonly").objectStore(yc)}function _R(){const e=indexedDB.deleteDatabase(FN);return new ul(e).toPromise()}function $h(){const e=indexedDB.open(FN,TR);return new Promise((t,s)=>{e.addEventListener("error",()=>{s(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(yc,{keyPath:UN})}catch(a){s(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(yc)?t(n):(n.close(),await _R(),t(await $h()))})})}async function kb(e,t,s){const n=su(e,!0).put({[UN]:t,value:s});return new ul(n).toPromise()}async function IR(e,t){const s=su(e,!1).get(t),n=await new ul(s).toPromise();return n===void 0?null:n.value}function jb(e,t){const s=su(e,!0).delete(t);return new ul(s).toPromise()}const PR=800,AR=3;class BN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $h(),this.db)}async _withRetries(t){let s=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(s++>AR)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ON()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ru._getInstance(CR()),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){var s,n;if(this.activeServiceWorker=await NR(),!this.activeServiceWorker)return;this.sender=new kR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(s=t[0])!=null&&s.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||SR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await $h();return await kb(t,bc,"1"),await jb(t,bc),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>kb(n,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){const s=await this._withRetries(n=>IR(n,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>jb(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const i=su(a,!1).getAll();return new ul(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:i}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),s.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),s.push(a));return s}notifyListeners(t,s){this.localCache[t]=s;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BN.type="LOCAL";const ER=BN;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VN(e,t){return t?ds(t):(ae(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up extends AN{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Ga(t,this._buildIdpRequest())}_linkToIdToken(t,s){return Ga(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return Ga(t,this._buildIdpRequest())}_buildIdpRequest(t){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function MR(e){return pR(e.auth,new Up(e),e.bypassAuthState)}function RR(e){const{auth:t,user:s}=e;return ae(s,t,"internal-error"),xR(s,new Up(e),e.bypassAuthState)}async function LR(e){const{auth:t,user:s}=e;return ae(s,t,"internal-error"),hR(s,new Up(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(t,s,n,a,i=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:s,sessionId:n,postBody:a,tenantId:i,error:o,type:l}=t;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:s,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return MR;case"linkViaPopup":case"linkViaRedirect":return LR;case"reauthViaPopup":case"reauthViaRedirect":return RR;default:Jr(this.auth,"internal-error")}}resolve(t){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){js(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR=new dl(2e3,1e4);async function $N(e,t,s){if(Br(e.app))return Promise.reject(Ir(e,"operation-not-supported-in-this-environment"));const n=tu(e);MM(e,t,Op);const a=VN(n,s);return new Vn(n,"signInViaPopup",t,a).executeNotNull()}class Vn extends zN{constructor(t,s,n,a,i){super(t,s,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Vn.currentPopupAction&&Vn.currentPopupAction.cancel(),Vn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ae(t,this.auth,"internal-error"),t}async onExecution(){js(this.filter.length===1,"Popup operations only handle one event");const t=Fp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var s,n;if((n=(s=this.authWindow)==null?void 0:s.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,DR.get())};t()}}Vn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="pendingRedirect",wd=new Map;class FR extends zN{constructor(t,s,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let t=wd.get(this.auth._key());if(!t){try{const n=await UR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(s){t=()=>Promise.reject(s)}wd.set(this.auth._key(),t)}return this.bypassAuthState||wd.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UR(e,t){const s=zR(t),n=VR(e);if(!await n._isAvailable())return!1;const a=await n._get(s)==="true";return await n._remove(s),a}function BR(e,t){wd.set(e._key(),t)}function VR(e){return ds(e._redirectPersistence)}function zR(e){return vd(OR,e.config.apiKey,e.name)}async function $R(e,t,s=!1){if(Br(e.app))return Promise.reject(Qn(e));const n=tu(e),a=VN(n,t),o=await new FR(n,a,s).execute();return o&&!s&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=10*60*1e3;class qR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(s=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!HR(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){var n;if(t.error&&!WN(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";s.onError(Ir(this.auth,a))}else s.onAuthEvent(t)}isEventForConsumer(t,s){const n=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=WR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Nb(t))}saveEventToCache(t){this.cachedEventUids.add(Nb(t)),this.lastProcessedEventTime=Date.now()}}function Nb(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function WN({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function HR(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WN(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(e,t={}){return vi(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KR=/^https?/;async function YR(e){if(e.config.emulator)return;const{authorizedDomains:t}=await GR(e);for(const s of t)try{if(JR(s))return}catch{}Jr(e,"unauthorized-domain")}function JR(e){const t=Vh(),{protocol:s,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?s==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===n}if(!KR.test(s))return!1;if(QR.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=new dl(3e4,6e4);function Sb(){const e=Gr().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let s=0;s<e.CP.length;s++)e.CP[s]=null}}function ZR(e){return new Promise((t,s)=>{var a,i,o;function n(){Sb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Sb(),s(Ir(e,"network-request-failed"))},timeout:XR.get()})}if((i=(a=Gr().gapi)==null?void 0:a.iframes)!=null&&i.Iframe)t(gapi.iframes.getContext());else if((o=Gr().gapi)!=null&&o.load)n();else{const l=iR("iframefcb");return Gr()[l]=()=>{gapi.load?n():s(Ir(e,"network-request-failed"))},nR(`${aR()}?onload=${l}`).catch(d=>s(d))}}).catch(t=>{throw kd=null,t})}let kd=null;function eL(e){return kd=kd||ZR(e),kd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new dl(5e3,15e3),rL="__/auth/iframe",sL="emulator/auth/iframe",nL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},aL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iL(e){const t=e.config;ae(t.authDomain,e,"auth-domain-config-required");const s=t.emulator?Ep(t,sL):`https://${e.config.authDomain}/${rL}`,n={apiKey:t.apiKey,appName:e.name,v:ll},a=aL.get(e.config.apiHost);a&&(n.eid=a);const i=e._getFrameworks();return i.length&&(n.fw=i.join(",")),`${s}?${il(n).slice(1)}`}async function oL(e){const t=await eL(e),s=Gr().gapi;return ae(s,e,"internal-error"),t.open({where:document.body,url:iL(e),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nL,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=Ir(e,"network-request-failed"),l=Gr().setTimeout(()=>{i(o)},tL.get());function d(){Gr().clearTimeout(l),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dL=500,cL=600,uL="_blank",mL="http://localhost";class Cb{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hL(e,t,s,n=dL,a=cL){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const d={...lL,width:n.toString(),height:a.toString(),top:i,left:o},c=Lt().toLowerCase();s&&(l=jN(c)?uL:s),wN(c)&&(t=t||mL,d.scrollbars="yes");const u=Object.entries(d).reduce((h,[x,g])=>`${h}${x}=${g},`,"");if(YM(c)&&l!=="_self")return xL(t||"",l),new Cb(null);const m=window.open(t||"",l,u);ae(m,e,"popup-blocked");try{m.focus()}catch{}return new Cb(m)}function xL(e,t){const s=document.createElement("a");s.href=e,s.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="__/auth/handler",fL="emulator/auth/handler",gL=encodeURIComponent("fac");async function Tb(e,t,s,n,a,i){ae(e.config.authDomain,e,"auth-domain-config-required"),ae(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:s,redirectUrl:n,v:ll,eventId:a};if(t instanceof Op){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",WA(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,m]of Object.entries({}))o[u]=m}if(t instanceof cl){const u=t.getScopes().filter(m=>m!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const d=await e._getAppCheckToken(),c=d?`#${gL}=${encodeURIComponent(d)}`:"";return`${bL(e)}?${il(l).slice(1)}${c}`}function bL({config:e}){return e.emulator?Ep(e,fL):`https://${e.authDomain}/${pL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="webStorageSupport";class yL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DN,this._completeRedirectFn=$R,this._overrideRedirectResult=BR}async _openPopup(t,s,n,a){var o;js((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Tb(t,s,n,Vh(),a);return hL(t,i,Fp())}async _openRedirect(t,s,n,a){await this._originValidation(t);const i=await Tb(t,s,n,Vh(),a);return jR(i),new Promise(()=>{})}_initialize(t){const s=t._key();if(this.eventManagers[s]){const{manager:a,promise:i}=this.eventManagers[s];return a?Promise.resolve(a):(js(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(t);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(t){const s=await oL(t),n=new qR(t);return s.register("authEvent",a=>(ae(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=s,n}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(pm,{type:pm},a=>{var o;const i=(o=a==null?void 0:a[0])==null?void 0:o[pm];i!==void 0&&s(!!i),Jr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=YR(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return _N()||kN()||Lp()}}const vL=yL;var _b="@firebase/auth",Ib="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const s=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jL(e){ks(new Yr("auth",(t,{options:s})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:IN(e)},c=new rR(n,a,i,d);return lR(c,s),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,n)=>{t.getProvider("auth-internal").initialize()})),ks(new Yr("auth-internal",t=>{const s=tu(t.getProvider("auth").getImmediate());return(n=>new wL(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(_b,Ib,kL(e)),Hr(_b,Ib,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NL=5*60,SL=Rj("authIdTokenMaxAge")||NL;let Pb=null;const CL=e=>async t=>{const s=t&&await t.getIdTokenResult(),n=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>SL)return;const a=s==null?void 0:s.token;Pb!==a&&(Pb=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function TL(e=Vj()){const t=ol(e,"auth");if(t.isInitialized())return t.getImmediate();const s=oR(e,{popupRedirectResolver:vL,persistence:[ER,vR,DN]}),n=Rj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=CL(i.toString());gR(s,o,()=>o(s.currentUser)),fR(s,l=>o(l))}}const a=IA("auth");return a&&dR(s,`http://${a}`),s}function _L(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}sR({loadJS(e){return new Promise((t,s)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const i=Ir("internal-error");i.customData=a,s(i)},n.type="text/javascript",n.charset="UTF-8",_L().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jL("Browser");const Bp={apiKey:"AIzaSyD_zaEB4r9OdxRhqjh_3knPThewK0Xr98I",authDomain:"baptizo-community.firebaseapp.com",projectId:"baptizo-community",storageBucket:"baptizo-community.firebasestorage.app",messagingSenderId:"781281083216",appId:"1:781281083216:web:4236621528ef828ab03655",measurementId:"G-7LD94T1B5D"};if(!Bp.projectId)throw new Error("Firebase projectId is required. Please set VITE_FIREBASE_PROJECT_ID in your .env.local file.");if(!Bp.apiKey)throw new Error("Firebase apiKey is required. Please set VITE_FIREBASE_API_KEY in your .env.local file.");const qN=Bj(Bp),HN=TL(qN),GN=new ns,fm=typeof window<"u"?_M(qN):null;function IL(){var x;const e=le(),t=bt(),{login:s}=X(),n=V(C.auth.loginUser),a=V(C.auth.googleLogin),[i,o]=p.useState({email:"",password:""}),[l,d]=p.useState({}),[c,u]=p.useState(!1),m=async g=>{var v,w;g.preventDefault(),d({}),u(!0);try{const f=await n({email:i.email.toLowerCase().trim(),password:i.password});if(f!=null&&f.success&&(f!=null&&f.user)){s(f.user);const b=((w=(v=t.state)==null?void 0:v.from)==null?void 0:w.pathname)||"/feed";e(b,{replace:!0})}else d({general:"Invalid email or password"})}catch{d({general:"Login failed. Please try again."})}finally{u(!1)}},h=async()=>{var g,v,w;u(!0),d({});try{const b=(await $N(HN,GN)).user,y=await a({email:b.email,name:b.displayName||"Anonymous",avatarUrl:b.photoURL||void 0});if(y.success)if(s(y.user),y.onboardingRequired)e("/member-onboarding",{state:{from:(g=t.state)==null?void 0:g.from,isNew:!0}});else{const k=((w=(v=t.state)==null?void 0:v.from)==null?void 0:w.pathname)||"/feed";e(k,{replace:!0})}}catch(f){console.error("Google Login Error:",f),d({general:"Google sign-in failed. Please try again."})}finally{u(!1)}};return r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,children:[r.jsxs(xe,{className:"pt-8",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-16 w-auto rounded-2xl shadow-xl"})}),r.jsx(pe,{className:"text-center text-3xl",children:"Welcome Back"}),r.jsx("p",{className:"text-center text-light-muted dark:text-dark-muted mt-2",children:"Sign in to continue to Baptizo Community"})]}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.general&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l.general})}),r.jsx(be,{label:"Email",type:"email",value:i.email,onChange:g=>o({...i,email:g.target.value}),icon:r.jsx(Kr,{className:"w-5 h-5"}),placeholder:"your@email.com",required:!0}),r.jsx(be,{label:"Password",type:"password",value:i.password,onChange:g=>o({...i,password:g.target.value}),icon:r.jsx(Nt,{className:"w-5 h-5"}),placeholder:"",required:!0}),r.jsx("div",{className:"flex justify-end",children:r.jsx(re,{to:"/forgot-password",className:"text-sm font-medium text-primary-500 hover:text-primary-600 transition-colors",children:"Forgot password?"})}),r.jsx(M,{type:"submit",variant:"primary",className:"w-full",isLoading:c,children:"Sign In"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t border-light-border dark:border-dark-border"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white dark:bg-[#151515] px-2 text-light-muted dark:text-dark-muted",children:"Or continue with"})})]}),r.jsxs(M,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 h-12",onClick:h,disabled:c,children:[r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 12-4.53z",fill:"#EA4335"})]}),"Google"]}),r.jsxs("p",{className:"text-center text-sm text-light-muted dark:text-dark-muted pt-2",children:["Don't have an account?"," ",r.jsx(re,{to:"/register",state:{from:(x=t.state)==null?void 0:x.from},className:"text-primary-500 hover:text-primary-600 font-medium",children:"Sign Up"})]})]})})]})})}function PL(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(IL,{})})}function AL(e){const s=e.replace(/\D/g,"").substring(0,4),n=["0703","0706","0803","0806","0810","0813","0814","0816","0903","0906","07025","07026","0704"],a=["0705","0805","0807","0811","0815","0905"],i=["0701","0708","0802","0808","0812","0901","0902","0904","0907"],o=["0809","0817","0818","0909","0908"];return n.some(l=>s.startsWith(l))?"MTN":a.some(l=>s.startsWith(l))?"Glo":i.some(l=>s.startsWith(l))?"Airtel":o.some(l=>s.startsWith(l))?"9Mobile":"Unknown"}function EL(e){const t=e.replace(/\D/g,"");return t.length===11?`${t.substring(0,4)} ${t.substring(4,7)} ${t.substring(7)}`:e}function ML(){return"https://chat.whatsapp.com/J27yrVJZIix0A4wzMzTMT1?mode=hq1tcla"}function QN(){const e=ML();window.open(e,"_blank")}function RL(){var R;const e=le(),t=bt(),{login:s}=X(),n=V(C.auth.registerUser),a=V(C.auth.googleLogin),[i,o]=p.useState(1),[l,d]=p.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",whatsappConfirm:!1,profession:""}),[c,u]=p.useState(""),[m,h]=p.useState({}),[x,g]=p.useState(!1),v=async()=>{var L,N,I;g(!0),h({});try{const W=(await $N(HN,GN)).user,G=await a({email:W.email,name:W.displayName||"Anonymous",avatarUrl:W.photoURL||void 0});if(G.success)if(s(G.user),G.onboardingRequired)e("/member-onboarding",{state:{from:(L=t.state)==null?void 0:L.from,isNew:!0}});else{const se=((I=(N=t.state)==null?void 0:N.from)==null?void 0:I.pathname)||"/feed";e(se,{replace:!0})}}catch(A){console.error("Google Login Error:",A),h({general:"Google sign-in failed. Please try again."})}finally{g(!1)}},w=L=>{d({...l,phone:L});const N=AL(L);u(N)},f=()=>{const L={};return l.name||(L.name="Full name is required"),l.email||(L.email="Email is required"),l.password||(L.password="Password is required"),l.password.length<6&&(L.password="Password must be at least 6 characters"),l.password!==l.confirmPassword&&(L.confirmPassword="Passwords do not match"),h(L),Object.keys(L).length===0},b=()=>{const L={};return l.phone||(L.phone="Phone number is required"),(c==="Unknown"||!c)&&(L.phone="Valid network (MTN, Glo, Airtel, 9Mobile) required"),l.profession||(L.profession="Profession is required"),l.whatsappConfirm||(L.whatsappConfirm="Please confirm WhatsApp availability"),h(L),Object.keys(L).length===0},y=()=>{i===1&&f()&&o(2)},k=()=>{i===2&&o(1)},j=async L=>{if(L.preventDefault(),!!b()){g(!0);try{const N=await n({email:l.email.toLowerCase().trim(),password:l.password,name:l.name.trim(),phone:l.phone.trim(),network:c,profession:l.profession.trim()});N!=null&&N.success&&(N!=null&&N.user)?(s(N.user),o(3)):h({general:(N==null?void 0:N.error)||"Registration failed"})}catch(N){const A=(N.message||N.toString()).replace("Uncaught Error: ","");h({general:A})}finally{g(!1)}}},S=()=>{QN(),setTimeout(()=>{var N,I;const L=((I=(N=t.state)==null?void 0:N.from)==null?void 0:I.pathname)||"/feed";e(L,{replace:!0})},1e3)},P={enter:L=>({x:L>0?50:-50,opacity:0}),center:{x:0,opacity:1},exit:L=>({x:L<0?50:-50,opacity:0})};return i===3?r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-white dark:bg-[#0A0A0A]",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none opacity-50",children:[r.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary-500/10 rounded-full blur-[120px] -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-secondary-500/10 rounded-full blur-[120px] translate-y-1/2 -translate-x-1/2"})]}),r.jsxs(T.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},transition:{type:"spring",damping:25,stiffness:200},className:"relative w-full max-w-md bg-white dark:bg-[#151515] border border-light-border dark:border-dark-border shadow-2xl rounded-[2.5rem] p-6 sm:p-10 text-center",children:[r.jsx(T.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",damping:15},className:"w-20 h-20 mx-auto mb-6 rounded-3xl bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center shadow-lg shadow-primary-500/30",children:r.jsx(pt,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-3 tracking-tight",children:"Welcome Aboard!"}),r.jsx("p",{className:"text-base text-light-muted dark:text-dark-muted mb-8 leading-relaxed px-2",children:"Your journey with Baptizo Community begins now. We're thrilled to have you here."}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"relative group overflow-hidden bg-emerald-50/50 dark:bg-emerald-900/10 p-5 rounded-3xl border border-emerald-100 dark:border-emerald-900/30 transition-all",children:[r.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:scale-110 transition-transform",children:r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"",className:"w-12 h-12"})}),r.jsxs("h3",{className:"font-bold text-emerald-800 dark:text-emerald-400 mb-2 flex items-center justify-center gap-2",children:[r.jsxs("span",{className:"relative flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]}),"Final Step: Join the Community"]}),r.jsx("p",{className:"text-sm text-emerald-700/80 dark:text-emerald-300/70",children:"Connect with other members and get real-time updates in our exclusive WhatsApp group."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(M,{onClick:S,className:"w-full h-14 text-lg font-semibold bg-[#25D366] hover:bg-[#128C7E] text-white rounded-2xl shadow-xl shadow-green-500/20 active:scale-[0.98] transition-all flex items-center justify-center gap-3",children:[r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"",className:"w-6 h-6 contrast-125"}),"Join WhatsApp Group"]}),r.jsx("button",{onClick:()=>e("/feed"),className:"w-full py-3 text-sm font-medium text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:"Skip for now & Go to Feed"})]})]})]})]}):r.jsx("div",{className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,className:"overflow-hidden",children:[r.jsxs(xe,{className:"pt-8 pb-2",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-16 w-auto rounded-2xl shadow-xl shadow-primary-500/10"})}),r.jsx(pe,{className:"text-center text-3xl font-display",children:"Join Baptizo"}),r.jsxs("p",{className:"text-center text-light-muted dark:text-dark-muted mt-2",children:["Step ",i," of 2: ",i===1?"Account Details":"Personal Info"]}),r.jsxs("div",{className:"flex gap-2 mt-6 justify-center",children:[r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${i>=1?"w-16 bg-primary-500":"w-4 bg-gray-200 dark:bg-gray-700"}`}),r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${i>=2?"w-16 bg-primary-500":"w-4 bg-gray-200 dark:bg-gray-700"}`})]})]}),r.jsxs(U,{className:"pt-6",children:[r.jsx("form",{onSubmit:j,children:r.jsxs(te,{mode:"wait",custom:i,children:[i===1&&r.jsxs(T.div,{custom:1,variants:P,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},className:"space-y-4",children:[r.jsxs(M,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 h-12",onClick:v,disabled:x,children:[r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 12-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),r.jsxs("div",{className:"relative my-4",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t border-light-border dark:border-dark-border"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white dark:bg-[#151515] px-2 text-light-muted dark:text-dark-muted",children:"Or register manually"})})]}),r.jsx(be,{label:"Full Name",value:l.name,onChange:L=>d({...l,name:L.target.value}),icon:r.jsx(St,{className:"w-5 h-5"}),placeholder:"Enter your full name",error:m.name,required:!0,autoFocus:!0}),r.jsx(be,{label:"Email Address",type:"email",value:l.email,onChange:L=>d({...l,email:L.target.value}),icon:r.jsx(Kr,{className:"w-5 h-5"}),placeholder:"your@email.com",error:m.email,required:!0}),r.jsx(be,{label:"Password",type:"password",value:l.password,onChange:L=>d({...l,password:L.target.value}),icon:r.jsx(Nt,{className:"w-5 h-5"}),placeholder:"Min. 6 characters",error:m.password,required:!0}),r.jsx(be,{label:"Confirm Password",type:"password",value:l.confirmPassword,onChange:L=>d({...l,confirmPassword:L.target.value}),icon:r.jsx(Nt,{className:"w-5 h-5"}),placeholder:"Confirm your password",error:m.confirmPassword,required:!0}),r.jsxs(M,{type:"button",onClick:y,className:"w-full mt-4",size:"lg",children:["Next Step ",r.jsx(Mt,{className:"w-4 h-4 ml-2"})]})]},"step1"),i===2&&r.jsxs(T.div,{custom:2,variants:P,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx(be,{label:"Phone Number",type:"tel",value:l.phone,onChange:L=>w(L.target.value),icon:r.jsx(Jx,{className:"w-5 h-5"}),placeholder:"080 1234 5678",error:m.phone,required:!0,autoFocus:!0}),r.jsx("div",{className:"mt-2 flex items-center justify-between",children:c&&c!=="Unknown"&&r.jsx(H,{variant:"primary",className:"animate-in fade-in zoom-in",children:c})})]}),r.jsx(be,{label:"Profession / Skill",value:l.profession,onChange:L=>d({...l,profession:L.target.value}),icon:r.jsx(Vw,{className:"w-5 h-5"}),placeholder:"e.g. Graphic Designer, Student",error:m.profession,required:!0}),r.jsx("div",{className:`p-4 rounded-xl border transition-all cursor-pointer ${l.whatsappConfirm?"bg-primary-50 dark:bg-primary-900/20 border-primary-500":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border hover:border-primary-300"}`,onClick:()=>d({...l,whatsappConfirm:!l.whatsappConfirm}),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-colors ${l.whatsappConfirm?"bg-primary-500 border-primary-500":"border-gray-400"}`,children:l.whatsappConfirm&&r.jsx(pt,{className:"w-3.5 h-3.5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"WhatsApp Confirmation"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-0.5",children:"I confirm that the phone number provided is active on WhatsApp."})]})]})}),m.whatsappConfirm&&r.jsx("p",{className:"text-xs text-red-500 font-medium px-1",children:m.whatsappConfirm}),m.general&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:m.general})}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:k,className:"flex-1",children:"Back"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-[2]",isLoading:x,children:"Create Account"})]})]},"step2")]})}),r.jsxs("p",{className:"text-center text-sm text-light-muted dark:text-dark-muted mt-6 pb-2",children:["Already have an account?"," ",r.jsx(re,{to:"/login",state:{from:(R=t.state)==null?void 0:R.from},className:"text-primary-500 hover:text-primary-600 font-bold transition-colors",children:"Sign In"})]})]})]})})}function LL(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(RL,{})})}function Qa(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Qa=function(t){return typeof t}:Qa=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qa(e)}function DL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OL(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function FL(e,t,s){return t&&OL(e.prototype,t),e}function KN(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ab(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function zn(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?Ab(Object(s),!0).forEach(function(n){KN(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ab(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function UL(e,t){if(e){if(typeof e=="string")return Eb(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return Eb(e,t)}}function Eb(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function BL(e,t){var s;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(s=UL(e))||t){s&&(e=s);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,l;return{s:function(){s=e[Symbol.iterator]()},n:function(){var d=s.next();return i=d.done,d},e:function(d){o=!0,l=d},f:function(){try{!i&&s.return!=null&&s.return()}finally{if(o)throw l}}}}var VL="3.1.0",It={MANDATORY_INITIALIZATION_MISSING:{message:"Missing urlEndpoint during SDK initialization",help:""},INVALID_TRANSFORMATION_POSITION:{message:"Invalid transformationPosition parameter",help:""},PRIVATE_KEY_CLIENT_SIDE:{message:"privateKey should not be passed on the client side",help:""},MISSING_UPLOAD_DATA:{message:"Missing data for upload",help:""},MISSING_UPLOAD_FILE_PARAMETER:{message:"Missing file parameter for upload",help:""},MISSING_UPLOAD_FILENAME_PARAMETER:{message:"Missing fileName parameter for upload",help:""},MISSING_AUTHENTICATION_ENDPOINT:{message:"Missing authentication endpoint for upload",help:""},MISSING_PUBLIC_KEY:{message:"Missing public key for upload",help:""},AUTH_ENDPOINT_TIMEOUT:{message:"The authenticationEndpoint you provided timed out in 60 seconds",help:""},AUTH_ENDPOINT_NETWORK_ERROR:{message:"Request to authenticationEndpoint failed due to network error",help:""},AUTH_INVALID_RESPONSE:{message:"Invalid response from authenticationEndpoint. The SDK expects a JSON response with three fields i.e. signature, token and expire.",help:""},UPLOAD_ENDPOINT_NETWORK_ERROR:{message:"Request to ImageKit upload endpoint failed due to network error",help:""},INVALID_UPLOAD_OPTIONS:{message:"Invalid uploadOptions parameter",help:""},MISSING_SIGNATURE:{message:"Missing signature for upload. The SDK expects token, signature and expire for authentication.",help:""},MISSING_TOKEN:{message:"Missing token for upload. The SDK expects token, signature and expire for authentication.",help:""},MISSING_EXPIRE:{message:"Missing expire for upload. The SDK expects token, signature and expire for authentication.",help:""},INVALID_TRANSFORMATION:{message:"Invalid transformation parameter. Please include at least pre, post, or both.",help:""},INVALID_PRE_TRANSFORMATION:{message:"Invalid pre transformation parameter.",help:""},INVALID_POST_TRANSFORMATION:{message:"Invalid post transformation parameter.",help:""}};function Ut(e,t,s){typeof s=="function"&&(e?s(t,null):s(null,t))}function zL(e){var t={},s=e.getAllResponseHeaders();return Object.keys(s).length&&s.trim().split(/[\r\n]+/).map(function(n){return n.split(/: /)}).forEach(function(n){t[n[0].trim()]=n[1].trim()}),t}var Mb=function(t,s){var n=zn({},t),a={statusCode:s.status,headers:zL(s)};return Object.defineProperty(n,"$ResponseMetadata",{value:a,enumerable:!1,writable:!1}),n},$L=function(t,s,n){WL(t,s).then(function(a){return Ut(!1,a,n)},function(a){return Ut(!0,a,n)})},WL=function(t,s){return new Promise(function(n,a){t.open("POST","https://upload.imagekit.io/api/v1/files/upload"),t.onerror=function(i){return a(It.UPLOAD_ENDPOINT_NETWORK_ERROR)},t.onload=function(){if(t.status===200)try{var i=JSON.parse(t.responseText),o=Mb(i,t);return n(o)}catch(d){return a(d)}else try{var i=JSON.parse(t.responseText),l=Mb(i,t);return a(l)}catch(d){return a(d)}},t.send(s)})},qL=function(t,s,n,a){if(!s.file){Ut(!0,It.MISSING_UPLOAD_FILE_PARAMETER,a);return}if(!s.fileName){Ut(!0,It.MISSING_UPLOAD_FILENAME_PARAMETER,a);return}if(!n.publicKey){Ut(!0,It.MISSING_PUBLIC_KEY,a);return}if(!s.token){Ut(!0,It.MISSING_TOKEN,a);return}if(!s.signature){Ut(!0,It.MISSING_SIGNATURE,a);return}if(!s.expire){Ut(!0,It.MISSING_EXPIRE,a);return}if(s.transformation){if(!(Object.keys(s.transformation).includes("pre")||Object.keys(s.transformation).includes("post"))){Ut(!0,It.INVALID_TRANSFORMATION,a);return}if(Object.keys(s.transformation).includes("pre")&&!s.transformation.pre){Ut(!0,It.INVALID_PRE_TRANSFORMATION,a);return}if(Object.keys(s.transformation).includes("post"))if(Array.isArray(s.transformation.post)){var i=BL(s.transformation.post),o;try{for(i.s();!(o=i.n()).done;){var l=o.value;if(l.type==="abs"&&!(l.protocol||l.value)){Ut(!0,It.INVALID_POST_TRANSFORMATION,a);return}else if(l.type==="transformation"&&!l.value){Ut(!0,It.INVALID_POST_TRANSFORMATION,a);return}}}catch(u){i.e(u)}finally{i.f()}}else{Ut(!0,It.INVALID_POST_TRANSFORMATION,a);return}}var d=new FormData,c;for(c in s)c&&(c==="file"&&typeof s.file!="string"?d.append("file",s.file,String(s.fileName)):c==="tags"&&Array.isArray(s.tags)?d.append("tags",s.tags.join(",")):c==="signature"?d.append("signature",s.signature):c==="expire"?d.append("expire",String(s.expire)):c==="token"?d.append("token",s.token):c==="responseFields"&&Array.isArray(s.responseFields)?d.append("responseFields",s.responseFields.join(",")):c==="extensions"&&Array.isArray(s.extensions)?d.append("extensions",JSON.stringify(s.extensions)):c==="customMetadata"&&Qa(s.customMetadata)==="object"&&!Array.isArray(s.customMetadata)&&s.customMetadata!==null?d.append("customMetadata",JSON.stringify(s.customMetadata)):c==="transformation"&&Qa(s.transformation)==="object"&&s.transformation!==null?d.append(c,JSON.stringify(s.transformation)):c==="checks"&&s.checks?d.append("checks",s.checks):s[c]!==void 0&&d.append(c,String(s[c])));d.append("publicKey",n.publicKey),$L(t,d,a)},Rb={width:"w",height:"h",aspectRatio:"ar",background:"bg",border:"b",crop:"c",cropMode:"cm",dpr:"dpr",focus:"fo",quality:"q",x:"x",xCenter:"xc",y:"y",yCenter:"yc",format:"f",videoCodec:"vc",audioCodec:"ac",radius:"r",rotation:"rt",blur:"bl",named:"n",defaultImage:"di",flip:"fl",original:"orig",startOffset:"so",endOffset:"eo",duration:"du",streamingResolutions:"sr",effectSharpen:"e-sharpen",effectUSM:"e-usm",effectContrast:"e-contrast",effectGray:"e-grayscale",effectShadow:"e-shadow",effectGradient:"e-gradient",rotate:"rt",grayscale:"e-grayscale",aiUpscale:"e-upscale",aiRetouch:"e-retouch",aiVariation:"e-genvar",aiDropShadow:"e-dropshadow",aiChangeBackground:"e-changebg",aiRemoveBackground:"e-bgremove",aiRemoveBackgroundExternal:"e-removedotbg",contrastStretch:"e-contrast",shadow:"e-shadow",sharpen:"e-sharpen",unsharpMask:"e-usm",gradient:"e-gradient",progressive:"pr",lossless:"lo",colorProfile:"cp",metadata:"md",opacity:"o",trim:"t",zoom:"z",page:"pg",raw:"raw"},YN="path",JN="query",HL=[YN,JN],GL=":",QL=",",KL="-",Ks={getDefault:function(){return YN},addAsQueryParameter:function(t){return t.transformationPosition===JN},validParameters:function(t){return typeof t.transformationPosition>"u"?!1:HL.indexOf(t.transformationPosition)!=-1},getTransformKey:function(t){return t&&(Rb[t]||Rb[t.toLowerCase()])||""},getChainTransformDelimiter:function(){return GL},getTransformDelimiter:function(){return QL},getTransformKeyValueDelimiter:function(){return KL}},Lb="tr";function YL(e){return typeof e=="string"&&e[e.length-1]=="/"&&(e=e.substring(0,e.length-1)),e}function JL(e){return typeof e=="string"&&e[0]=="/"&&(e=e.slice(1)),e}function Zl(e,t){var s="/",n=new RegExp(s+"{1,}","g");return e.join(s).replace(n,s)}var XL=function(t){if(!t.path&&!t.src)return"";var s,n,a;try{t.path?(a=new URL(t.urlEndpoint).pathname,s=new URL(Zl([t.urlEndpoint.replace(a,""),t.path]))):(s=new URL(t.src),n=!0)}catch(l){return console.error(l),""}for(var i in t.queryParameters)s.searchParams.append(i,String(t.queryParameters[i]));var o=ZL(t.transformation);return o&&o.length&&(Ks.addAsQueryParameter(t)||n?s.searchParams.append(Lb,o):s.pathname=Zl([Lb+Ks.getChainTransformDelimiter()+o,s.pathname])),a?s.pathname=Zl([a,s.pathname]):s.pathname=Zl([s.pathname]),s.href};function ZL(e){if(!Array.isArray(e))return"";for(var t=[],s=0,n=e.length;s<n;s++){var a=[];for(var i in e[s]){var o=e[s][i];if(o!=null){var l=Ks.getTransformKey(i);if(l||(l=i),l!=="")if(["e-grayscale","e-contrast","e-removedotbg","e-bgremove","e-upscale","e-retouch","e-genvar"].includes(l))if(o===!0||o==="-"||o==="true")a.push(l);else continue;else["e-sharpen","e-shadow","e-gradient","e-usm","e-dropshadow"].includes(l)&&(o.toString().trim()===""||o===!0||o==="true")?a.push(l):i==="raw"?a.push(e[s][i]):(l==="di"&&(o=YL(JL(o||"")),o=o.replace(/\//g,"@@")),l==="sr"&&Array.isArray(o)&&(o=o.join("_")),l==="t"&&o.toString().trim()===""&&(o="true"),a.push([l,o].join(Ks.getTransformKeyValueDelimiter())))}}a.length&&t.push(a.join(Ks.getTransformDelimiter()))}return t.join(Ks.getChainTransformDelimiter())}var e8=function(t,s){return XL(zn(zn({},s),t))};function t8(e){return e.urlEndpoint}var r8=function(t,s){return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];if(a.length===s.length&&typeof a[a.length-1]<"u"){if(typeof a[a.length-1]!="function")throw new Error("Callback must be a function.");s.call.apply(s,[t].concat(a))}else return new Promise(function(o,l){var d=function(u){if(u)return l(u);for(var m=arguments.length,h=new Array(m>1?m-1:0),x=1;x<m;x++)h[x-1]=arguments[x];o(h.length>1?h:h[0])};a.pop(),a.push(d),s.call.apply(s,[t].concat(a))})}},s8=function(){function e(t){if(DL(this,e),KN(this,"options",{sdkVersion:"javascript-".concat(VL),publicKey:"",urlEndpoint:"",transformationPosition:Ks.getDefault()}),this.options=zn(zn({},this.options),t||{}),!t8(this.options))throw It.MANDATORY_INITIALIZATION_MISSING;if(!Ks.validParameters(this.options))throw It.INVALID_TRANSFORMATION_POSITION}return FL(e,[{key:"url",value:function(s){return e8(s,this.options)}},{key:"upload",value:function(s,n,a){var i;if(typeof n=="function"?i=n:a=n||{},!s||Qa(s)!=="object")return Ut(!0,It.INVALID_UPLOAD_OPTIONS,i);var o=zn(zn({},this.options),a),l=s||{},d=l.xhr;delete s.xhr;var c=d||new XMLHttpRequest;return r8(this,qL)(c,s,o,i)}}]),e}();new s8({publicKey:"public_5uW+u/NO/xT9A9FY6w6pEZIIRIw=",urlEndpoint:"https://ik.imagekit.io/h3qzmviwv"});const Ka=async(e,t,s)=>new Promise((n,a)=>{const i=new FormData;i.append("file",e),i.append("fileName",e.name),i.append("folder",`/baptizo/${t}`),i.append("publicKey","public_5uW+u/NO/xT9A9FY6w6pEZIIRIw=");const o=new XMLHttpRequest;o.upload.addEventListener("progress",d=>{if(d.lengthComputable&&s){const c=Math.round(d.loaded/d.total*100);s(c)}}),o.addEventListener("load",()=>{if(o.status===200)try{const d=JSON.parse(o.responseText);n(d.url)}catch{a(new Error("Failed to parse response"))}else a(new Error(`Upload failed with status ${o.status}`))}),o.addEventListener("error",()=>{a(new Error("Upload failed"))}),o.open("POST","https://upload.imagekit.io/api/v1/files/upload");const l=btoa("private_RDhLHlvGS4fKh49gv6q5Ygv2bHg=:");o.setRequestHeader("Authorization",`Basic ${l}`),o.send(i)}),Vp=e=>["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type),n8=e=>["video/mp4","video/webm","video/ogg"].includes(e.type),XN=(e,t,s)=>{if(!e)return"";const n=[];if(n.push(`w-${t}`),n.push(`h-${s}`),n.length===0||!e.includes("/baptizo/"))return e;const a=`tr:${n.join(",")}`;return e.replace("/baptizo/",`/baptizo/${a}/`)};function mt({src:e,alt:t="Avatar",size:s="md",className:n}){const a={xs:"w-6 h-6 text-[10px]",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-14 h-14 text-lg",xl:"w-20 h-20 text-2xl"},i=(t||"User").split(" ").map(o=>o[0]).join("").slice(0,2).toUpperCase();return r.jsx("div",{className:Y("rounded-full overflow-hidden bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-bold flex items-center justify-center shrink-0 border border-primary-200 dark:border-primary-800",a[s],n),children:e?r.jsx("img",{src:XN(e,200,200),alt:t,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:o=>{var l;o.currentTarget.style.display="none",(l=o.currentTarget.parentElement)==null||l.classList.add("fallback-avatar")}}):r.jsx("span",{children:i})})}function Te(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function pn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const ZN=6048e5,a8=864e5,ed=43200,Db=1440;let i8={};function ml(){return i8}function Ho(e,t){var l,d,c,u;const s=ml(),n=(t==null?void 0:t.weekStartsOn)??((d=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((u=(c=s.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,a=Te(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function vc(e){return Ho(e,{weekStartsOn:1})}function e1(e){const t=Te(e),s=t.getFullYear(),n=pn(e,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const a=vc(n),i=pn(e,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const o=vc(i);return t.getTime()>=a.getTime()?s+1:t.getTime()>=o.getTime()?s:s-1}function Ob(e){const t=Te(e);return t.setHours(0,0,0,0),t}function wc(e){const t=Te(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function o8(e,t){const s=Ob(e),n=Ob(t),a=+s-wc(s),i=+n-wc(n);return Math.round((a-i)/a8)}function l8(e){const t=e1(e),s=pn(e,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),vc(s)}function jd(e,t){const s=Te(e),n=Te(t),a=s.getTime()-n.getTime();return a<0?-1:a>0?1:a}function d8(e){return pn(e,Date.now())}function c8(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function u8(e){if(!c8(e)&&typeof e!="number")return!1;const t=Te(e);return!isNaN(Number(t))}function m8(e,t){const s=Te(e),n=Te(t),a=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return a*12+i}function h8(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function x8(e,t){return+Te(e)-+Te(t)}function p8(e){const t=Te(e);return t.setHours(23,59,59,999),t}function f8(e){const t=Te(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function g8(e){const t=Te(e);return+p8(t)==+f8(t)}function b8(e,t){const s=Te(e),n=Te(t),a=jd(s,n),i=Math.abs(m8(s,n));let o;if(i<1)o=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*i);let l=jd(s,n)===-a;g8(Te(e))&&i===1&&jd(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function y8(e,t,s){const n=x8(e,t)/1e3;return h8(s==null?void 0:s.roundingMethod)(n)}function v8(e){const t=Te(e),s=pn(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}const w8={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},k8=(e,t,s)=>{let n;const a=w8[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function gm(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const j8={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},N8={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},S8={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},C8={date:gm({formats:j8,defaultWidth:"full"}),time:gm({formats:N8,defaultWidth:"full"}),dateTime:gm({formats:S8,defaultWidth:"full"})},T8={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_8=(e,t,s,n)=>T8[e];function Bi(e){return(t,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=s!=null&&s.width?String(s.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const I8={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},P8={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},A8={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},E8={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},M8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},R8={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},L8=(e,t)=>{const s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},D8={ordinalNumber:L8,era:Bi({values:I8,defaultWidth:"wide"}),quarter:Bi({values:P8,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Bi({values:A8,defaultWidth:"wide"}),day:Bi({values:E8,defaultWidth:"wide"}),dayPeriod:Bi({values:M8,defaultWidth:"wide",formattingValues:R8,defaultFormattingWidth:"wide"})};function Vi(e){return(t,s={})=>{const n=s.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(l)?F8(l,m=>m.test(o)):O8(l,m=>m.test(o));let c;c=e.valueCallback?e.valueCallback(d):d,c=s.valueCallback?s.valueCallback(c):c;const u=t.slice(o.length);return{value:c,rest:u}}}function O8(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}function F8(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}function U8(e){return(t,s={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const B8=/^(\d+)(th|st|nd|rd)?/i,V8=/\d+/i,z8={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},$8={any:[/^b/i,/^(a|c)/i]},W8={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},q8={any:[/1/i,/2/i,/3/i,/4/i]},H8={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},G8={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Q8={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},K8={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Y8={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},J8={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},X8={ordinalNumber:U8({matchPattern:B8,parsePattern:V8,valueCallback:e=>parseInt(e,10)}),era:Vi({matchPatterns:z8,defaultMatchWidth:"wide",parsePatterns:$8,defaultParseWidth:"any"}),quarter:Vi({matchPatterns:W8,defaultMatchWidth:"wide",parsePatterns:q8,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vi({matchPatterns:H8,defaultMatchWidth:"wide",parsePatterns:G8,defaultParseWidth:"any"}),day:Vi({matchPatterns:Q8,defaultMatchWidth:"wide",parsePatterns:K8,defaultParseWidth:"any"}),dayPeriod:Vi({matchPatterns:Y8,defaultMatchWidth:"any",parsePatterns:J8,defaultParseWidth:"any"})},t1={code:"en-US",formatDistance:k8,formatLong:C8,formatRelative:_8,localize:D8,match:X8,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Z8(e){const t=Te(e);return o8(t,v8(t))+1}function eD(e){const t=Te(e),s=+vc(t)-+l8(t);return Math.round(s/ZN)+1}function r1(e,t){var u,m,h,x;const s=Te(e),n=s.getFullYear(),a=ml(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(h=a.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,o=pn(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Ho(o,t),d=pn(e,0);d.setFullYear(n,0,i),d.setHours(0,0,0,0);const c=Ho(d,t);return s.getTime()>=l.getTime()?n+1:s.getTime()>=c.getTime()?n:n-1}function tD(e,t){var l,d,c,u;const s=ml(),n=(t==null?void 0:t.firstWeekContainsDate)??((d=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((u=(c=s.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,a=r1(e,t),i=pn(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Ho(i,t)}function rD(e,t){const s=Te(e),n=+Ho(s,t)-+tD(s,t);return Math.round(n/ZN)+1}function we(e,t){const s=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return s+n}const Ds={y(e,t){const s=e.getFullYear(),n=s>0?s:1-s;return we(t==="yy"?n%100:n,t.length)},M(e,t){const s=e.getMonth();return t==="M"?String(s+1):we(s+1,2)},d(e,t){return we(e.getDate(),t.length)},a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,t){return we(e.getHours()%12||12,t.length)},H(e,t){return we(e.getHours(),t.length)},m(e,t){return we(e.getMinutes(),t.length)},s(e,t){return we(e.getSeconds(),t.length)},S(e,t){const s=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,s-3));return we(a,t.length)}},ya={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Fb={G:function(e,t,s){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(e,t,s){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return s.ordinalNumber(a,{unit:"year"})}return Ds.y(e,t)},Y:function(e,t,s,n){const a=r1(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return we(o,2)}return t==="Yo"?s.ordinalNumber(i,{unit:"year"}):we(i,t.length)},R:function(e,t){const s=e1(e);return we(s,t.length)},u:function(e,t){const s=e.getFullYear();return we(s,t.length)},Q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return we(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return we(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,s){const n=e.getMonth();switch(t){case"M":case"MM":return Ds.M(e,t);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,s){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return we(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,s,n){const a=rD(e,n);return t==="wo"?s.ordinalNumber(a,{unit:"week"}):we(a,t.length)},I:function(e,t,s){const n=eD(e);return t==="Io"?s.ordinalNumber(n,{unit:"week"}):we(n,t.length)},d:function(e,t,s){return t==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):Ds.d(e,t)},D:function(e,t,s){const n=Z8(e);return t==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):we(n,t.length)},E:function(e,t,s){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,s,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return we(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,s,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return we(i,t.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,s){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return we(a,t.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,s){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){const n=e.getHours();let a;switch(n===12?a=ya.noon:n===0?a=ya.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,s){const n=e.getHours();let a;switch(n>=17?a=ya.evening:n>=12?a=ya.afternoon:n>=4?a=ya.morning:a=ya.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,s){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return Ds.h(e,t)},H:function(e,t,s){return t==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):Ds.H(e,t)},K:function(e,t,s){const n=e.getHours()%12;return t==="Ko"?s.ordinalNumber(n,{unit:"hour"}):we(n,t.length)},k:function(e,t,s){let n=e.getHours();return n===0&&(n=24),t==="ko"?s.ordinalNumber(n,{unit:"hour"}):we(n,t.length)},m:function(e,t,s){return t==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ds.m(e,t)},s:function(e,t,s){return t==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):Ds.s(e,t)},S:function(e,t){return Ds.S(e,t)},X:function(e,t,s){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Bb(n);case"XXXX":case"XX":return Rn(n);case"XXXXX":case"XXX":default:return Rn(n,":")}},x:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"x":return Bb(n);case"xxxx":case"xx":return Rn(n);case"xxxxx":case"xxx":default:return Rn(n,":")}},O:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ub(n,":");case"OOOO":default:return"GMT"+Rn(n,":")}},z:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ub(n,":");case"zzzz":default:return"GMT"+Rn(n,":")}},t:function(e,t,s){const n=Math.trunc(e.getTime()/1e3);return we(n,t.length)},T:function(e,t,s){const n=e.getTime();return we(n,t.length)}};function Ub(e,t=""){const s=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?s+String(a):s+String(a)+t+we(i,2)}function Bb(e,t){return e%60===0?(e>0?"-":"+")+we(Math.abs(e)/60,2):Rn(e,t)}function Rn(e,t=""){const s=e>0?"-":"+",n=Math.abs(e),a=we(Math.trunc(n/60),2),i=we(n%60,2);return s+a+t+i}const Vb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},s1=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},sD=(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],n=s[1],a=s[2];if(!a)return Vb(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Vb(n,t)).replace("{{time}}",s1(a,t))},nD={p:s1,P:sD},aD=/^D+$/,iD=/^Y+$/,oD=["D","DD","YY","YYYY"];function lD(e){return aD.test(e)}function dD(e){return iD.test(e)}function cD(e,t,s){const n=uD(e,t,s);if(console.warn(n),oD.includes(e))throw new RangeError(n)}function uD(e,t,s){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const mD=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hD=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xD=/^'([^]*?)'?$/,pD=/''/g,fD=/[a-zA-Z]/;function gD(e,t,s){var u,m,h,x;const n=ml(),a=n.locale??t1,i=n.firstWeekContainsDate??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,o=n.weekStartsOn??((x=(h=n.locale)==null?void 0:h.options)==null?void 0:x.weekStartsOn)??0,l=Te(e);if(!u8(l))throw new RangeError("Invalid time value");let d=t.match(hD).map(g=>{const v=g[0];if(v==="p"||v==="P"){const w=nD[v];return w(g,a.formatLong)}return g}).join("").match(mD).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:bD(g)};if(Fb[v])return{isToken:!0,value:g};if(v.match(fD))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(d=a.localize.preprocessor(l,d));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return d.map(g=>{if(!g.isToken)return g.value;const v=g.value;(dD(v)||lD(v))&&cD(v,t,String(e));const w=Fb[v[0]];return w(l,v,a.localize,c)}).join("")}function bD(e){const t=e.match(xD);return t?t[1].replace(pD,"'"):e}function yD(e,t,s){const n=ml(),a=(s==null?void 0:s.locale)??n.locale??t1,i=2520,o=jd(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o});let d,c;o>0?(d=Te(t),c=Te(e)):(d=Te(e),c=Te(t));const u=y8(c,d),m=(wc(c)-wc(d))/1e3,h=Math.round((u-m)/60);let x;if(h<2)return s!=null&&s.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<Db){const g=Math.round(h/60);return a.formatDistance("aboutXHours",g,l)}else{if(h<i)return a.formatDistance("xDays",1,l);if(h<ed){const g=Math.round(h/Db);return a.formatDistance("xDays",g,l)}else if(h<ed*2)return x=Math.round(h/ed),a.formatDistance("aboutXMonths",x,l)}if(x=b8(c,d),x<12){const g=Math.round(h/ed);return a.formatDistance("xMonths",g,l)}else{const g=x%12,v=Math.trunc(x/12);return g<3?a.formatDistance("aboutXYears",v,l):g<9?a.formatDistance("overXYears",v,l):a.formatDistance("almostXYears",v+1,l)}}function ct(e,t){return yD(e,d8(e),t)}function gt({isOpen:e,onClose:t,children:s,title:n,className:a,maxWidth:i="max-w-md"}){return p.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),p.useEffect(()=>{const o=l=>{l.key==="Escape"&&e&&t()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e,t]),uw.createPortal(r.jsx(te,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100]",onClick:t}),r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:Y("w-full max-h-[90vh] overflow-y-auto custom-scrollbar",i,"bg-light-card dark:bg-dark-card rounded-2xl shadow-2xl","border border-light-border dark:border-dark-border",a),onClick:o=>o.stopPropagation(),children:[n&&r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light-border dark:border-dark-border",children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:n}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:r.jsx(Ne,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"})})]}),r.jsxs("div",{className:n?"p-6":"p-6 relative",children:[!n&&r.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:r.jsx(Ne,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"})}),s]})]})})]})}),document.body)}function vD({isOpen:e,onClose:t,postId:s}){var w;const{user:n}=X(),[a,i]=p.useState(""),[o,l]=p.useState(null),[d,c]=p.useState(""),[u,m]=p.useState(!1),h=O(C.users.getAllUsers,n&&(n.role==="admin"||n.role==="super_admin")?{adminId:n._id}:"skip"),x=V(C.assignments.createAssignment),g=h==null?void 0:h.filter(f=>{var b,y;return((b=f.name)==null?void 0:b.toLowerCase().includes(a.toLowerCase()))||((y=f.email)==null?void 0:y.toLowerCase().includes(a.toLowerCase()))}).slice(0,5),v=async f=>{if(f.preventDefault(),!(!n||!o||!d.trim())){m(!0);try{await x({adminId:n._id,userId:o,postId:s,instructions:d.trim()}),t(),l(null),c(""),i("")}catch(b){console.error("Failed to assign task:",b),alert("Failed to assign task. Please try again.")}finally{m(!1)}}};return r.jsx(gt,{isOpen:e,onClose:t,title:"Assign Task",children:r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:"Select Member"}),r.jsxs("div",{className:"relative",children:[r.jsx(ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",value:a,onChange:f=>i(f.target.value),placeholder:"Search by name or email...",className:"w-full pl-9 pr-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500"})]}),a&&g&&r.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto",children:g.map(f=>r.jsxs("div",{onClick:()=>l(f._id),className:`p-2 rounded-lg cursor-pointer flex items-center gap-2 transition-colors ${o===f._id?"bg-primary-500 text-white":"bg-light-card dark:bg-dark-card hover:bg-light-bg dark:hover:bg-dark-bg text-light-text dark:text-dark-text"}`,children:[r.jsx(St,{className:"w-4 h-4"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:f.name}),r.jsx("p",{className:"text-xs opacity-80",children:f.email})]}),o===f._id&&r.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})]},f._id))}),o&&!a&&r.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-primary-100 dark:bg-primary-900 border border-primary-500 text-primary-700 dark:text-primary-300 text-sm",children:["Selected: ",(w=h==null?void 0:h.find(f=>f._id===o))==null?void 0:w.name]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:"Instructions"}),r.jsx("textarea",{value:d,onChange:f=>c(f.target.value),placeholder:"Describe the task for this member...",className:"w-full min-h-[100px] p-3 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 text-light-text dark:text-dark-text"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",disabled:!o||!d.trim()||u,children:u?"Assigning...":"Assign Task"})]})]})})}function wD({src:e,alt:t,onClose:s,layoutId:n}){const a=async()=>{if(navigator.share)try{await navigator.share({title:t||"Baptizo Image",text:"Check out this image",url:e})}catch(o){console.error("Error sharing:",o)}else try{await navigator.clipboard.writeText(e),alert("Image link copied to clipboard!")}catch(o){console.error("Failed to copy:",o)}},i=async()=>{try{const l=await(await fetch(e)).blob(),d=window.URL.createObjectURL(l),c=document.createElement("a");c.href=d,c.download=t||"baptizo-image.jpg",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d)}catch(o){console.error("Failed to download:",o),window.open(e,"_blank")}};return r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-black/95 backdrop-blur-sm shadow-2xl overflow-hidden",onClick:s,children:[r.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[110] flex items-center justify-between p-4 bg-gradient-to-b from-black/60 to-transparent",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white","aria-label":"Back",children:r.jsx(fr,{className:"w-6 h-6"})}),r.jsx("span",{className:"text-white font-medium truncate max-w-[200px]",children:t||"Image"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white",title:"Share image",children:r.jsx(bi,{className:"w-5 h-5"})}),r.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white",title:"Download image",children:r.jsx(Zo,{className:"w-5 h-5"})}),r.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white",children:r.jsx(Ne,{className:"w-6 h-6"})})]})]}),r.jsx(T.div,{className:"relative z-[105] w-full h-full flex items-center justify-center p-4",onClick:o=>o.stopPropagation(),children:r.jsx(T.img,{layoutId:n,src:e,alt:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm",draggable:!1})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/60 to-transparent pointer-events-none",children:r.jsx("p",{className:"text-white/60 text-sm text-center max-w-2xl mx-auto",children:t})})]})}function xs({isOpen:e,onClose:t,onConfirm:s,title:n,description:a,confirmText:i="Confirm",cancelText:o="Cancel",variant:l="primary"}){return r.jsx(gt,{isOpen:e,onClose:t,title:n,children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("p",{className:"text-light-muted dark:text-dark-muted leading-relaxed",children:a}),r.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx(M,{variant:"outline",onClick:t,className:"border-light-border dark:border-dark-border hover:bg-light-bg dark:hover:bg-dark-bg",children:o}),r.jsx(M,{variant:l==="danger"?"danger":"primary",onClick:()=>{s(),t()},className:l==="primary"?"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/20":"",children:i})]})]})})}function kD({isOpen:e,onClose:t,onConfirm:s,isLoading:n}){const[a,i]=p.useState("Violates community guidelines"),o=l=>{l.preventDefault(),s(a)};return r.jsx(gt,{isOpen:e,onClose:t,title:"Disable Post",children:r.jsxs("form",{onSubmit:o,className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-xl bg-red-500/5 border border-red-500/10",children:[r.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg shrink-0",children:r.jsx(yr,{className:"w-5 h-5 text-red-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-red-600 dark:text-red-400",children:"Administrative Action"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-0.5 leading-relaxed",children:"This will hide the post from the community feed. The author will receive a notification with your reason."})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:"Reason for Disabling"}),r.jsx("textarea",{value:a,onChange:l=>i(l.target.value),placeholder:"Explain why this post is being disabled...",className:"w-full p-4 rounded-xl bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border focus:border-red-500 focus:ring-0 text-sm resize-none",rows:3,required:!0})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"danger",isLoading:n,disabled:!a.trim(),children:"Disable Post"})]})]})})}function ho({post:e,onCommentClick:t,hasUserLiked:s=!1}){var gl,bl,yl,vl,wl,Ni,kl,jl,Nl;const{user:n}=X(),a=le(),i=V(C.posts.likePost),o=V(C.editDelete.deletePostUser),l=V(C.editDelete.editPost),d=V(C.follows.toggleFollow),c=V(C.posts.togglePostDisabled),u=O(C.settings.getCommentsEnabled),m=O(C.settings.getQuestionsOnPostsEnabled),h=O(C.posts.isPostSaved,n?{userId:n._id,postId:e._id}:"skip"),x=V(C.posts.toggleSavePost),[g,v]=p.useState(!1),[w,f]=p.useState(s),[b,y]=p.useState(e.likeCount),[k,j]=p.useState(!1),[S,P]=p.useState(!1),[R,L]=p.useState(!1),[N,I]=p.useState(e.content),[A,W]=p.useState(!1),[G,se]=p.useState(0),Q=e.content.length>250,de=e.content.length>1200;p.useEffect(()=>{se(0)},[e._id]);const z=ye=>{if(!Q){!e.imageUrl&&!e.videoUrl&&a(`/post/${e._id}`);return}ye.stopPropagation(),de?G===0?se(1):G===1&&se(2):se(G===0?2:0)},E=ye=>{ye.stopPropagation(),se(de?G===0?1:G===1?2:0:G===0?2:0)},[B,q]=p.useState(!1),[ce,He]=p.useState(!1),[ee,me]=p.useState(!1),fe=O(C.follows.isFollowing,n&&e.author?{followerId:n._id,followingId:e.author._id}:"skip"),yt=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="super_admin",it=((gl=e.author)==null?void 0:gl.role)==="admin"||((bl=e.author)==null?void 0:bl.role)==="super_admin",Ft=e.postType==="question",ot=e.postType==="prayer";p.useEffect(()=>{f(s),y(e.likeCount)},[s,e.likeCount]);const Yt=async()=>{if(!n||g||it&&w)return;const ye=!w;f(ye),y(Er=>ye?Er+1:Er-1),v(!0);try{await i({userId:n._id,postId:e._id})}catch(Er){(Er instanceof Error?Er.message:"").includes("already liked")||(f(!ye),y(Sn=>ye?Sn-1:Sn+1)),console.error("Failed to like post:",Er)}finally{v(!1)}},jn=async()=>{if(!(!n||!e.author))try{await d({followerId:n._id,followingId:e.author._id}),j(!1)}catch(ye){console.error("Failed to toggle follow:",ye)}},hl=async()=>{if(n)try{await x({userId:n._id,postId:e._id}),j(!1)}catch(ye){console.error("Failed to toggle save:",ye)}},Nn=()=>{n&&(q(!0),j(!1))},wi=async()=>{try{await o({userId:n._id,postId:e._id})}catch(ye){console.error("Failed to delete post:",ye)}},xl=()=>{!yt||!n||(He(!0),j(!1))},ki=async ye=>{if(!(!yt||!n)){me(!0);try{await c({postId:e._id,adminId:n._id,disabled:!0,reason:ye||"Disabled by admin"}),He(!1)}catch(Er){console.error("Failed to disable post:",Er),alert("Failed to disable post.")}finally{me(!1)}}},pl=()=>{R?ji():(L(!0),j(!1))},ji=async()=>{if(n)try{await l({userId:n._id,postId:e._id,content:N}),L(!1)}catch(ye){console.error("Failed to edit post:",ye),alert("Failed to update post.")}},ge=()=>{if(e.imageUrl){const ye=document.createElement("a");ye.href=e.imageUrl,ye.download=`post-${e._id}.jpg`,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye)}else alert("Download feature coming soon!")},or=()=>{var ye;navigator.share?navigator.share({title:`Post by ${(ye=e.author)==null?void 0:ye.name}`,text:e.content,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},fl=()=>Ft?"border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50/30 to-white dark:from-blue-900/20 dark:to-[#1A1A1A]":ot?"border-l-4 border-l-purple-500 bg-gradient-to-br from-purple-50/30 to-white dark:from-purple-900/20 dark:to-[#1A1A1A]":"bg-white dark:bg-[#1A1A1A]";return r.jsxs(r.Fragment,{children:[r.jsxs(T.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:`group relative rounded-3xl shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100 dark:border-gray-800 overflow-hidden ${fl()}`,children:[r.jsx("div",{className:"p-4 sm:p-5 pb-2",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(re,{to:`/profile/${(yl=e.author)==null?void 0:yl._id}`,className:"relative block",children:[r.jsx(mt,{src:(vl=e.author)==null?void 0:vl.avatarUrl,alt:((wl=e.author)==null?void 0:wl.name)||"User",className:`w-12 h-12 ring-2 transition-transform hover:scale-105 ${it?"ring-primary-500 shadow-lg shadow-primary-500/20":Ft?"ring-blue-400":ot?"ring-purple-400":"ring-transparent"}`}),it&&r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-primary-500 text-white p-0.5 rounded-full ring-2 ring-white dark:ring-[#1A1A1A]",children:r.jsx(qe,{className:"w-3 h-3"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-0.5",children:[r.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100 text-sm sm:text-base leading-tight group-hover:text-primary-500 transition-colors",children:(Ni=e.author)==null?void 0:Ni.name}),it?r.jsx(H,{variant:"primary",className:"bg-primary-500/10 text-primary-600 dark:text-primary-400 border-0 text-[10px] py-0 px-1.5 h-4 flex-shrink-0",children:((kl=e.author)==null?void 0:kl.role)==="admin"?"Community Admin":"Super Admin"}):r.jsx(H,{variant:"outline",className:`text-[10px] py-0 px-1.5 h-4 flex-shrink-0 ${Ft?"text-blue-600 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20":ot?"text-purple-600 border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/20":"text-gray-500 border-gray-200 dark:border-gray-700"}`,children:Ft?"Question":ot?"Prayer":"Member"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 flex-wrap",children:[r.jsx("span",{className:"whitespace-nowrap",children:ct(e.createdAt,{addSuffix:!0})}),r.jsx("span",{children:""}),r.jsx("span",{className:"font-medium",children:e.category})]})]})]}),r.jsxs("div",{className:"relative z-10 flex items-start gap-2",children:[r.jsx("button",{onClick:()=>j(!k),className:"p-2 -mr-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100",children:r.jsx(n3,{className:"w-5 h-5"})}),r.jsx(te,{children:k&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),r.jsxs(T.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-[#252525] rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 z-20 py-1 overflow-hidden",children:[n&&e.author&&n._id!==e.author._id&&r.jsx("button",{onClick:jn,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:fe?r.jsxs(r.Fragment,{children:[r.jsx(Xw,{className:"w-4 h-4"})," Unfollow"]}):r.jsxs(r.Fragment,{children:[r.jsx(sc,{className:"w-4 h-4"})," Follow"]})}),n&&r.jsxs("button",{onClick:hl,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200",children:[r.jsx(Hx,{className:`w-4 h-4 ${h?"fill-current":""}`})," ",h?"Unsave Post":"Save Post"]}),yt&&r.jsx(r.Fragment,{children:!it&&r.jsxs("button",{onClick:xl,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[r.jsx(yr,{className:"w-4 h-4"})," Disable Post"]})}),(yt||(n==null?void 0:n._id)===((jl=e.author)==null?void 0:jl._id))&&r.jsxs(r.Fragment,{children:[(yt||(n==null?void 0:n._id)===((Nl=e.author)==null?void 0:Nl._id)&&Date.now()-e.createdAt<30*60*1e3)&&r.jsxs("button",{onClick:pl,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[r.jsx(ec,{className:"w-4 h-4"})," Edit Post"]}),r.jsxs("button",{onClick:Nn,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[r.jsx(Vr,{className:"w-4 h-4"})," Delete Post"]})]})]})]})})]})]})}),r.jsxs("div",{className:"px-4 sm:px-6 py-2",children:[R?r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsx("textarea",{value:N,onChange:ye=>I(ye.target.value),className:"w-full p-4 rounded-xl bg-gray-50 dark:bg-[#222] border-transparent focus:border-primary-500 focus:ring-0 text-base resize-none",rows:4}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>L(!1),children:"Cancel"}),r.jsx(M,{variant:"primary",size:"sm",onClick:ji,children:"Save"})]})]}):r.jsxs("div",{onClick:()=>!e.imageUrl&&!e.videoUrl&&a(`/post/${e._id}`),className:"cursor-pointer mb-4",children:[Ft&&r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 rounded-full",children:r.jsx(Zd,{className:"w-5 h-5"})}),r.jsx("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:e.questionContext==="about_someone_else"?"Question for Others":"Personal Question"})]}),r.jsx("p",{onClick:z,className:`text-xl font-medium text-gray-900 dark:text-gray-100 leading-relaxed font-display break-words cursor-pointer transition-all ${G===0?"line-clamp-4":G===1?"line-clamp-[20]":""}`,children:e.content}),Q&&r.jsx("button",{onClick:E,className:"text-primary-500 text-base mt-1 font-sans hover:underline cursor-pointer flex items-center gap-1",children:G===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(Hn,{className:"w-4 h-4"})]}):G===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Je,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read more ",r.jsx(Je,{className:"w-4 h-4"})]})})]}),ot&&r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-600 dark:text-purple-400",children:[r.jsx("div",{className:"p-1.5 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M19 14c1.49-1.28 3.6-1.28 5.09 0 1.49 1.28 1.49 3.36 0 4.63-1.49 1.28-3.6 1.28-5.09 0-1.49-1.28-1.49-3.36 0-4.63z"}),r.jsx("path",{d:"M24 6h-6a2 2 0 0 0-2 2v10.17a3 3 0 0 1-.5 1.7l-2 2.83"}),r.jsx("path",{d:"M13 14c1.49-1.28 3.6-1.28 5.09 0 1.49 1.28 1.49 3.36 0 4.63-1.49 1.28-3.6 1.28-5.09 0-1.49-1.28-1.49-3.36 0-4.63z"}),r.jsx("path",{d:"M7 6h6a2 2 0 0 1 2 2v10.17a3 3 0 0 0 .5 1.7l2 2.83"})]})}),r.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide",children:"Prayer Request"})]}),e.scripture&&r.jsxs("div",{className:"flex items-center gap-2 mb-3 ml-1",children:[r.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/40 p-1 rounded text-purple-600 dark:text-purple-400",children:r.jsx(gi,{className:"w-3.5 h-3.5"})}),r.jsx("span",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 font-display",children:e.scripture})]}),r.jsxs("p",{onClick:z,className:`text-lg italic text-gray-800 dark:text-gray-200 leading-relaxed border-l-4 border-purple-200 dark:border-purple-800 pl-4 py-2 bg-purple-50/50 dark:bg-purple-900/10 rounded-r-lg break-words cursor-pointer transition-all ${G===0?"line-clamp-4":G===1?"line-clamp-[20]":""}`,children:['"',e.content,'"']}),Q&&r.jsx("button",{onClick:E,className:"text-primary-500 text-base mt-1 ml-1 not-italic hover:underline flex items-center gap-1",children:G===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(Hn,{className:"w-4 h-4"})]}):G===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Je,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read more ",r.jsx(Je,{className:"w-4 h-4"})]})})]}),!Ft&&!ot&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{onClick:z,className:`whitespace-pre-wrap break-words text-gray-800 dark:text-gray-200 text-base leading-relaxed cursor-pointer transition-all ${G===0?"line-clamp-[6]":G===1?"line-clamp-[20]":""}`,children:e.content}),Q&&r.jsx("button",{onClick:E,className:"text-primary-500 font-medium mt-1 hover:underline flex items-center gap-1",children:G===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(Hn,{className:"w-4 h-4"})]}):G===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Je,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read more ",r.jsx(Je,{className:"w-4 h-4"})]})})]})]}),(e.imageUrl||e.videoUrl)&&r.jsxs("div",{className:"relative mt-3 mb-2 rounded-2xl overflow-hidden bg-gray-100 dark:bg-gray-800 cursor-pointer group/image",onClick:()=>e.imageUrl&&W(!0),children:[e.imageUrl&&r.jsx("img",{src:e.imageUrl,alt:"Post content",className:"w-full h-auto max-h-[600px] object-cover hover:scale-[1.01] transition-transform duration-500"}),e.videoUrl&&r.jsx("video",{src:e.videoUrl,controls:!0,className:"w-full h-full object-cover"}),e.imageUrl&&r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/image:bg-black/10 transition-colors duration-300 pointer-events-none"})]})]}),r.jsx("div",{className:"px-4 sm:px-6 py-3 border-t border-gray-100 dark:border-gray-800/50 bg-gray-50/50 dark:bg-black/20",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-1 sm:gap-4",children:[r.jsxs(M,{variant:"ghost",size:"sm",onClick:Yt,disabled:it&&(w||g),title:it&&w?"You've already liked this post":"Like this post",className:`gap-2 hover:bg-pink-50 dark:hover:bg-pink-900/10 transition-colors ${w?`text-pink-500 ${it?"cursor-default opacity-90":""}`:"text-gray-500 dark:text-gray-400"}`,children:[r.jsx(vn,{className:`w-5 h-5 ${w?"fill-current":""} ${g?"scale-125":""} transition-transform`}),r.jsx("span",{className:"font-medium",children:b}),r.jsx("span",{className:"sr-only sm:not-sr-only text-xs sm:text-sm",children:"Likes"})]}),u&&r.jsxs(M,{variant:"ghost",size:"sm",onClick:t,className:`gap-2 hover:bg-blue-50 dark:hover:bg-blue-900/10 ${ot?"text-purple-500 hover:text-purple-600":"text-gray-500 dark:text-gray-400 hover:text-blue-500"}`,children:[ot?r.jsx(Kx,{className:"w-5 h-5"}):r.jsx(ut,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:e.commentCount}),r.jsx("span",{className:"sr-only sm:not-sr-only text-xs sm:text-sm",children:ot?"Prayers":"Comments"})]}),it&&m&&r.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>a(`/post/${e._id}?tab=questions`),className:"gap-2 hover:bg-purple-50 dark:hover:bg-purple-900/10 text-gray-500 dark:text-gray-400 hover:text-purple-500",children:[r.jsx(Zd,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:e.questionCount||0}),r.jsx("span",{className:"sr-only sm:not-sr-only text-xs sm:text-sm",children:"Questions"})]})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[r.jsx(M,{onClick:or,variant:"ghost",size:"sm",className:"p-2 text-gray-500 hover:text-primary-500 dark:text-gray-400",children:r.jsx(bi,{className:"w-5 h-5"})}),e.imageUrl&&r.jsx(M,{onClick:ge,variant:"ghost",size:"sm",className:"p-2 text-gray-500 hover:text-primary-500 dark:text-gray-400",children:r.jsx(Zo,{className:"w-5 h-5"})})]})]})})]}),r.jsx(te,{children:A&&e.imageUrl&&r.jsx(wD,{src:e.imageUrl,alt:"Post content",onClose:()=>W(!1)})}),r.jsx(te,{children:S&&r.jsx(vD,{onClose:()=>P(!1),isOpen:S,postId:e._id})}),r.jsx(xs,{isOpen:B,onClose:()=>q(!1),onConfirm:wi,title:"Delete Post",description:"Are you sure you want to delete this post? This action cannot be undone.",confirmText:"Delete",variant:"danger"}),r.jsx(kD,{isOpen:ce,onClose:()=>He(!1),onConfirm:ki,isLoading:ee})]})}function Oe(){return r.jsxs("div",{className:"glass rounded-xl p-6 shadow-md animate-pulse",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"h-4 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-3 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-3 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("div",{className:"h-4 w-full bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-5/6 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-4/6 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-light-border dark:border-dark-border",children:[r.jsx("div",{className:"h-8 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"}),r.jsx("div",{className:"h-8 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"})]})]})}function jD(){return r.jsxs("div",{className:"glass rounded-xl overflow-hidden shadow-lg animate-pulse",children:[r.jsx("div",{className:"h-48 bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-6 w-3/4 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-3"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-full bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-5/6 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]})]})}function Wt(){return r.jsxs("div",{className:"glass rounded-xl p-6 animate-pulse",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"h-6 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-8 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"h-4 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"h-4 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]})]})}function nr(){return r.jsxs("div",{className:"mb-8 animate-pulse",children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})}function ia({count:e=5}){return r.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((t,s)=>r.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border border-transparent animate-pulse",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-light-muted/20 dark:bg-dark-muted/20 rounded w-1/3"}),r.jsx("div",{className:"h-3 bg-light-muted/10 dark:bg-dark-muted/10 rounded w-1/2"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"h-5 w-12 bg-light-muted/20 dark:bg-dark-muted/20 rounded-full"}),r.jsx("div",{className:"h-5 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded-full"})]})]},s))})}const ND=p.forwardRef(function(t,s){return r.jsxs("div",{ref:s,className:"glass h-full rounded-3xl p-6 animate-pulse relative overflow-hidden",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-2xl bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsx("div",{className:"h-6 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded-full"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-6 w-3/4 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-4 bg-light-muted/10 dark:bg-dark-muted/10 rounded"}),r.jsx("div",{className:"h-4 w-1/2 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-4 bg-light-muted/10 dark:bg-dark-muted/10 rounded"}),r.jsx("div",{className:"h-4 w-1/3 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]})]}),r.jsxs("div",{className:"mt-6 flex gap-2",children:[r.jsx("div",{className:"h-10 flex-1 bg-light-muted/10 dark:bg-dark-muted/10 rounded-xl"}),r.jsx("div",{className:"h-10 w-10 bg-light-muted/10 dark:bg-dark-muted/10 rounded-xl"})]})]})});function SD(){return r.jsxs("div",{className:"glass rounded-xl overflow-hidden animate-pulse",children:[r.jsx("div",{className:"h-20 bg-light-muted/10 dark:bg-dark-muted/10"}),r.jsxs("div",{className:"px-6 pb-6 -mt-10 flex flex-col items-center",children:[r.jsx("div",{className:"w-20 h-20 rounded-2xl bg-light-muted/20 dark:bg-dark-muted/20 border-4 border-light-bg dark:border-dark-bg transition-all"}),r.jsx("div",{className:"h-5 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded mt-3"}),r.jsx("div",{className:"h-3 w-20 bg-light-muted/10 dark:bg-dark-muted/10 rounded mt-2"}),r.jsxs("div",{className:"mt-6 w-full grid grid-cols-2 gap-4 border-t border-light-border/30 pt-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded mx-auto"}),r.jsx("div",{className:"h-2 w-12 bg-light-muted/10 dark:bg-dark-muted/10 rounded mx-auto"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded mx-auto"}),r.jsx("div",{className:"h-2 w-12 bg-light-muted/10 dark:bg-dark-muted/10 rounded mx-auto"})]})]})]})]})}function CD(){return r.jsxs("div",{className:"glass rounded-xl p-6 border-emerald-500/10 animate-pulse",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("div",{className:"h-3 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-4 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-light-muted/5 dark:bg-dark-muted/5 border border-light-muted/10 dark:border-dark-muted/10",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-8 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-2 w-20 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsx("div",{className:"w-10 h-10 rounded-xl bg-light-muted/20 dark:bg-dark-muted/20"})]})]})}function TD(){return r.jsxs("div",{className:"glass rounded-xl animate-pulse",children:[r.jsx("div",{className:"p-4 border-b border-light-border/30",children:r.jsx("div",{className:"h-3 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})}),r.jsx("div",{className:"divide-y divide-light-border/20",children:[1,2,3].map(e=>r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"h-32 w-full rounded-xl bg-light-muted/10 dark:bg-dark-muted/10"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"h-4 w-3/4 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-3 w-full bg-light-muted/10 dark:bg-dark-muted/10 rounded"}),r.jsx("div",{className:"h-3 w-5/6 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsxs("div",{className:"flex justify-between items-center pt-1",children:[r.jsx("div",{className:"h-2 w-20 bg-light-muted/5 dark:bg-dark-muted/5 rounded"}),r.jsx("div",{className:"h-3 w-12 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]},e))})]})}function _D(){return r.jsxs("div",{className:"max-w-5xl mx-auto animate-pulse space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"h-10 w-40 bg-light-muted/20 dark:bg-dark-muted/20 rounded-xl"}),r.jsx("div",{className:"h-8 w-48 bg-light-muted/10 dark:bg-dark-muted/10 rounded-lg"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs("div",{className:"glass rounded-xl overflow-hidden border-primary-500/10",children:[r.jsx("div",{className:"h-24 bg-light-muted/5 dark:bg-dark-muted/5"}),r.jsxs("div",{className:"px-6 pb-8 -mt-12 flex flex-col items-center",children:[r.jsx("div",{className:"w-24 h-24 rounded-[32px] bg-light-muted/20 dark:bg-dark-muted/20 border-4 border-light-bg dark:border-dark-bg shadow-2xl"}),r.jsx("div",{className:"h-8 w-48 bg-light-muted/20 dark:bg-dark-muted/20 rounded mt-4"}),r.jsx("div",{className:"h-4 w-32 bg-light-muted/10 dark:bg-dark-muted/10 rounded mt-2"}),r.jsxs("div",{className:"mt-8 w-full grid grid-cols-2 gap-4",children:[r.jsx("div",{className:"h-16 bg-light-muted/5 dark:bg-dark-muted/5 rounded-2xl"}),r.jsx("div",{className:"h-16 bg-light-muted/5 dark:bg-dark-muted/5 rounded-2xl"})]})]})]}),r.jsx("div",{className:"glass rounded-xl p-6 h-48 bg-light-muted/5"})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsx("div",{className:"glass h-64 rounded-xl"}),r.jsx("div",{className:"glass h-64 rounded-xl"})]})]})]})}function n1(){return r.jsxs("div",{className:"flex p-1 bg-light-bg/50 dark:bg-dark-bg/50 rounded-xl border border-light-border dark:border-dark-border mb-6 animate-pulse",children:[r.jsx("div",{className:"flex-1 h-10 bg-light-muted/10 dark:bg-dark-muted/10 rounded-lg m-1"}),r.jsx("div",{className:"flex-1 h-10 bg-light-muted/10 dark:bg-dark-muted/10 rounded-lg m-1"})]})}function zb(){return r.jsx("div",{className:"space-y-4 p-4 animate-pulse",children:[1,2,3,4,5].map(e=>r.jsx("div",{className:`flex ${e%2===0?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`h-12 w-1/2 rounded-2xl bg-light-muted/10 dark:bg-dark-muted/10 ${e%2===0?"rounded-br-md":"rounded-bl-md"}`})},e))})}function $b({count:e=6}){return r.jsx("div",{className:"divide-y divide-light-border/20 animate-pulse",children:[...Array(e)].map((t,s)=>r.jsxs("div",{className:"flex items-center gap-3 p-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"h-4 w-1/3 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-3 w-12 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsx("div",{className:"h-3 w-3/4 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]})]},s))})}function zp(){return r.jsxs("div",{className:"space-y-6 animate-pulse",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>r.jsxs("div",{className:"glass p-6 rounded-xl",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("div",{className:"h-5 w-5 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-8 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"h-4 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]},e))}),r.jsx("div",{className:"glass h-96 rounded-xl w-full"})]})}function ID(){return r.jsxs("div",{className:"space-y-6 animate-pulse",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"grid sm:grid-cols-3 gap-6",children:[1,2,3].map(e=>r.jsxs("div",{className:"glass p-6 rounded-xl border-l-4 border-light-muted/20",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"h-4 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-8 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"h-10 w-10 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"})]}),r.jsx("div",{className:"h-3 w-40 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]},e))}),r.jsx("div",{className:"h-8 w-48 bg-light-muted/20 dark:bg-dark-muted/20 rounded mt-8 mb-4"}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>r.jsxs("div",{className:"glass p-6 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"h-8 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded network-icon"}),r.jsx("div",{className:"h-5 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"h-8 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-3 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]},e))})]})}function PD(){return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg animate-pulse",children:[r.jsx("div",{className:"gradient-primary text-white py-8 px-4 md:px-8 opacity-50",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("div",{className:"h-6 w-32 bg-white/20 rounded mb-4"}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20"}),r.jsxs("div",{children:[r.jsx("div",{className:"h-10 w-48 bg-white/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-64 bg-white/20 rounded"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(e=>r.jsx("div",{className:"glass p-6 rounded-2xl h-32"},e))})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-8 py-8",children:[r.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[1,2,3,4].map(e=>r.jsx("div",{className:"glass h-64 rounded-2xl"},e))}),r.jsx("div",{className:"glass h-20 rounded-xl"})]})]})}function nu(e){var I;const{category:t,onCommentClick:s}=e,{user:n}=X(),i=(I=bt().state)==null?void 0:I.newPostId,[o,l]=p.useState(i);p.useEffect(()=>{i&&(l(i),window.history.replaceState({...window.history.state,usr:{}},""))},[i]);const d=O(C.posts.getPost,o?{postId:o}:"skip"),[c,u]=p.useState({type:"all"}),[m]=p.useState(()=>Date.now()),{results:h,status:x,loadMore:g}=MC(C.posts.getPaginatedFeed,{postType:c.type==="postType"?c.value:void 0,cutoffTime:m,userId:n==null?void 0:n._id},{initialNumItems:10}),v=O(C.posts.getNewPosts,{cutoffTime:m,postType:c.type==="postType"?c.value:void 0,excludeUserId:n==null?void 0:n._id,userId:n==null?void 0:n._id})??[],[w,f]=p.useState(0),b=Math.max(0,v.length-w),[y,k]=p.useState([]),j=()=>{const A=[...v];k(A),f(v.length),l(void 0),requestAnimationFrame(()=>{window.scrollTo({top:0,behavior:"smooth"})})},S=p.useRef(null);p.useEffect(()=>{const A=new IntersectionObserver(([W])=>{W.isIntersecting&&x==="CanLoadMore"&&g(10)},{threshold:.1});return S.current&&A.observe(S.current),()=>A.disconnect()},[x,g]);const[P,R]=p.useState(!1);if(p.useEffect(()=>{const A=()=>R(window.scrollY>2e3);return window.addEventListener("scroll",A,{passive:!0}),()=>window.removeEventListener("scroll",A)},[]),x==="LoadingFirstPage"||h===void 0)return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{}),r.jsx(Oe,{})]});const L=new Set([...o?[o]:[],...y.map(A=>A._id)]),N=h.filter(A=>!L.has(A._id));return r.jsxs("div",{className:"space-y-6 relative min-h-[50vh]",children:[r.jsx(te,{children:b>0&&r.jsx(T.div,{initial:{opacity:0,y:-24,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-24,scale:.95},transition:{type:"spring",stiffness:400,damping:30},className:"flex justify-center mb-2 sticky top-20 z-30 pointer-events-none",children:r.jsxs("button",{onClick:j,className:"pointer-events-auto flex items-center gap-2 px-5 py-2.5 rounded-full shadow-2xl bg-gray-900 dark:bg-gray-800 hover:bg-gray-800 dark:hover:bg-gray-700 text-white text-sm font-semibold border border-primary-500/40 backdrop-blur-md transition-transform hover:scale-105 active:scale-95",children:[r.jsx(T.span,{animate:{rotate:[0,-15,15,-10,10,0]},transition:{duration:.6,delay:.2},children:r.jsx(d3,{className:"w-4 h-4 text-primary-400"})}),b," New ",b===1?"Post":"Posts",r.jsx("span",{className:"text-primary-300",children:" Tap to see"})]})})}),!t&&r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0",children:[{label:"All Posts",value:null,activeClass:"bg-primary-500 border-primary-500 text-white shadow-primary-500/20"},{label:"Prayers",value:"prayer",activeClass:"bg-purple-500 border-purple-500 text-white shadow-purple-500/20"},{label:"Questions",value:"question",activeClass:"bg-blue-500 border-blue-500 text-white shadow-blue-500/20"}].map(({label:A,value:W,activeClass:G})=>{const se=W===null?c.type==="all":c.type==="postType"&&c.value===W;return r.jsx("button",{onClick:()=>u(W===null?{type:"all"}:{type:"postType",value:W}),className:`whitespace-nowrap px-4 py-2 sm:px-6 sm:py-2.5 rounded-full font-bold transition-all text-xs sm:text-sm border shadow-sm active:scale-95 ${se?G:"bg-white dark:bg-dark-card text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:A},A)})}),r.jsx(te,{children:d&&r.jsxs(T.div,{initial:{opacity:0,y:-16,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.98},transition:{duration:.3,ease:"easeOut"},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1",children:[r.jsx(Qt,{className:"w-4 h-4 text-green-500"}),r.jsx("span",{className:"text-xs font-semibold text-green-600 dark:text-green-400",children:"Your post is live!"})]}),r.jsx("div",{className:"ring-2 ring-green-500/30 rounded-2xl",children:r.jsx(ho,{post:d,onCommentClick:()=>s==null?void 0:s(d),hasUserLiked:d.hasLiked??!1})})]})}),r.jsx(te,{children:y.length>0&&r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-4",children:y.map((A,W)=>r.jsx(T.div,{initial:{opacity:0,y:-12},animate:{opacity:1,y:0},transition:{delay:W*.05,duration:.25},children:r.jsx(ho,{post:A,onCommentClick:()=>s==null?void 0:s(A),hasUserLiked:A.hasLiked??!1})},A._id))})}),N.length===0&&!d&&y.length===0?r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No posts yet."})}):r.jsx("div",{className:"space-y-4",children:N.map(A=>r.jsx(ho,{post:A,onCommentClick:()=>s==null?void 0:s(A),hasUserLiked:A.hasLiked},A._id))}),r.jsx("div",{ref:S,className:"h-16 flex items-center justify-center",children:x==="LoadingMore"&&r.jsxs("div",{className:"flex items-center gap-2 text-light-muted dark:text-dark-muted",children:[r.jsx(jr,{className:"w-5 h-5 animate-spin text-primary-500"}),r.jsx("span",{className:"text-sm font-medium",children:"Loading more..."})]})}),r.jsx(te,{children:P&&r.jsx(T.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-20 right-4 md:bottom-10 md:right-10 p-3 md:p-4 rounded-full bg-gray-900 text-white shadow-2xl z-40 hover:bg-gray-800 active:scale-90 transition-all group border border-primary-500/30",children:r.jsx(HC,{className:"w-5 h-5 md:w-6 md:h-6 group-hover:-translate-y-1 transition-transform"})})})]})}function AD({id:e,title:t,description:s,imageUrl:n,creatorRole:a="admin",isActive:i,category:o}){const{user:l}=X(),d=le(),c=V(C.announcements.updateAnnouncement),u=V(C.announcements.deleteAnnouncement),[m,h]=p.useState(!1),x=a==="super_admin",g=l&&(l.role==="admin"||l.role==="super_admin"),v=async f=>{if(f.stopPropagation(),!!g)try{await c({adminId:l._id,announcementId:e,isActive:!i})}catch(b){console.error("Failed to toggle visibility:",b)}},w=async f=>{if(f.stopPropagation(),!(!g||!window.confirm("Are you sure you want to delete this announcement?"))){h(!0);try{await u({adminId:l._id,announcementId:e})}catch(b){console.error("Failed to delete announcement:",b),h(!1)}}};return m?null:r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:i?1:.6,y:0},onClick:()=>d(`/announcement/${e}`),className:`glass rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 border-2 relative group cursor-pointer ${x?"border-secondary-500/50 shadow-secondary-500/10":"border-transparent"} ${i?"":"grayscale"}`,children:[g&&r.jsxs("div",{className:"absolute top-4 right-4 z-20 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:v,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 backdrop-blur-md transition-colors",title:i?"Hide from users":"Show to users",children:i?r.jsx(Et,{className:"w-4 h-4"}):r.jsx(el,{className:"w-4 h-4"})}),r.jsx("button",{onClick:w,className:"p-2 rounded-full bg-red-500/80 text-white hover:bg-red-600 backdrop-blur-md transition-colors",title:"Delete Announcement",children:r.jsx(Vr,{className:"w-4 h-4"})})]}),!i&&g&&r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20 bg-black/80 text-white px-4 py-2 rounded-lg font-bold backdrop-blur-md border border-white/20",children:"HIDDEN"}),r.jsxs("div",{className:"relative h-48 md:h-60 overflow-hidden",children:[r.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),r.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${x?"from-secondary-900/80":"from-black/60"} to-transparent`}),r.jsxs("div",{className:"absolute bottom-3 left-3 md:bottom-4 md:left-4 flex items-center gap-2",children:[x?r.jsxs("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-secondary-500 text-white text-[9px] md:text-[10px] font-bold flex items-center gap-1 md:gap-1.5 shadow-lg",children:[r.jsx(zw,{className:"w-2.5 h-2.5 md:w-3 md:h-3 fill-current"}),"OFFICIAL ANNOUNCEMENT"]}):r.jsxs("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-primary-500 text-white text-[9px] md:text-[10px] font-bold flex items-center gap-1 md:gap-1.5 shadow-lg",children:[r.jsx(GC,{className:"w-2.5 h-2.5 md:w-3 md:h-3"}),"ADMIN UPDATE"]}),o&&o!=="General"&&r.jsx("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-blue-500 text-white text-[9px] md:text-[10px] font-bold shadow-lg uppercase",children:o})]})]}),r.jsxs("div",{className:`p-4 md:p-6 ${x?"bg-secondary-500/5 dark:bg-secondary-500/5":""}`,children:[r.jsx("h3",{className:`text-lg md:text-2xl font-black mb-2 md:mb-3 font-display tracking-tight group-hover:text-primary-500 transition-colors ${x?"text-secondary-600 dark:text-secondary-400":"text-light-text dark:text-dark-text"}`,children:t}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted leading-relaxed line-clamp-2 text-xs md:text-sm",children:s}),r.jsxs("div",{className:"mt-4 md:mt-6 pt-3 md:pt-4 border-t border-light-border/20 dark:border-dark-border/20 flex items-center justify-between",children:[r.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-light-muted/60 uppercase tracking-widest italic",children:"Read More Details"}),r.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-primary-500/10 flex items-center justify-center text-primary-500 group-hover:translate-x-1 transition-transform",children:r.jsx(Mt,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]})]})}function ED({announcements:e}){const[t,s]=p.useState(0);return p.useEffect(()=>{if(e.length<=1)return;const n=setInterval(()=>{s(a=>(a+1)%e.length)},5e3);return()=>clearInterval(n)},[e.length]),!e||e.length===0?null:r.jsxs("div",{className:"relative overflow-hidden w-full",children:[r.jsx("div",{className:"relative w-full",children:r.jsx(te,{mode:"wait",children:r.jsx(T.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5,ease:"easeInOut"},className:"w-full",children:r.jsx(AD,{id:e[t]._id,title:e[t].title,description:e[t].description,imageUrl:e[t].imageUrl,creatorRole:e[t].creatorRole,isActive:e[t].isActive,category:e[t].category})},t)})}),e.length>1&&r.jsx("div",{className:"absolute bottom-4 right-4 flex gap-1.5 z-10",children:e.map((n,a)=>r.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${a===t?"bg-white w-4":"bg-white/50"}`},a))})]})}function a1(){const e=bt(),t=le(),{user:s}=X();if(!(s!=null&&s._id))return null;const n=O(C.users.getUserStats,{userId:s._id}),a=O(C.stats.getBadgeCounts,{userId:s._id}),i=V(C.users.updateLastViewed),o=async(x,g)=>{g&&s&&await i({userId:s._id,field:g}),t(x)},l=x=>a?x==="Messages"?a.messages>0?a.messages:null:x==="Banking"?a.banking>0?!0:null:x==="Leaderboard"&&a.leaderboard>0?!0:null:null;if(!s)return null;const d=[{path:"/feed",label:"Home Feed",icon:Ts,color:"text-primary-500"},{path:"/teachings",label:"All Posts",icon:gi,color:"text-blue-500"},{path:"/chat",label:"Messages",icon:ut,color:"text-indigo-500"},{path:"/banking",label:"Banking",icon:tl,color:"text-emerald-500"},{path:"/leaderboard",label:"Leaderboard",icon:ke,color:"text-amber-500"},{path:"/diamond-challenge",label:"Diamond Challenge",icon:_r,color:"text-cyan-500"},{path:"/saved-posts",label:"Saved Posts",icon:Hx,color:"text-purple-500"}],c=[{path:"/admin",label:"Admin Hub",icon:qe,color:"text-orange-500"},{path:"/admin/roles",label:"Role Manager",icon:qe,color:"text-red-500"}],u=[{path:"/board",label:"Board Dash",icon:an,color:"text-amber-500"}],m=s.role==="admin"||s.role==="super_admin",h=s.role==="board_member";return r.jsxs("aside",{className:"hidden lg:block space-y-6 sticky top-24 max-h-[calc(100vh-120px)] overflow-y-auto pb-10 pr-1 transition-all custom-scrollbar-premium",children:[r.jsx("style",{children:`
                .custom-scrollbar-premium::-webkit-scrollbar {
                    width: 4px;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #ffffff;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #111827;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #374151;
                    border-radius: 10px;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #064e3b;
                }
                .custom-scrollbar-premium {
                    scrollbar-width: thin;
                    scrollbar-color: #374151 #ffffff;
                }
                .dark .custom-scrollbar-premium {
                    scrollbar-color: #064e3b #111827;
                }
            `}),n===void 0?r.jsx(SD,{}):r.jsxs(D,{glass:!0,className:"overflow-hidden border-primary-500/10 hover:border-primary-500/30 transition-all duration-300",children:[r.jsx("div",{className:"h-20 bg-gradient-to-br from-primary-500/20 via-primary-500/5 to-transparent relative",children:r.jsx("div",{className:"absolute inset-0 bg-grid-white/5 opacity-20"})}),r.jsxs(U,{className:"px-6 pb-6 -mt-10 relative",children:[r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary-500 to-secondary-500 p-1 shadow-xl shadow-primary-500/20 mb-3",children:r.jsx("div",{className:"w-full h-full rounded-2xl bg-white dark:bg-dark-bg overflow-hidden flex items-center justify-center font-bold text-2xl text-gradient",children:s.avatarUrl?r.jsx("img",{src:s.avatarUrl,alt:s.name,className:"w-full h-full object-cover"}):s.name[0]})}),r.jsx("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text truncate w-full",children:s.name}),r.jsx("p",{className:"text-[10px] font-bold text-primary-500 uppercase tracking-widest mt-1",children:s.role.replace("_"," ")})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-light-border/50 dark:border-dark-border/50 grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm font-bold",children:(n==null?void 0:n.totalPosts)||0}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-black",children:"Posts"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm font-bold",children:(n==null?void 0:n.totalRewards)||0}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-black",children:"Rewards"})]})]})]})]}),r.jsx(D,{glass:!0,className:"p-2",children:r.jsxs("nav",{className:"space-y-1",children:[d.map(x=>{const g=x.icon,v=e.pathname===x.path;return r.jsxs("button",{onClick:()=>{const w=x.label==="Banking"?"lastViewedBanking":x.label==="Leaderboard"?"lastViewedLeaderboard":void 0;o(x.path,w)},className:`
                                    w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 group
                                    ${v?"bg-primary-500 text-white shadow-lg shadow-primary-500/30 font-bold":"text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card"}
                                `,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(g,{className:`w-5 h-5 ${v?"text-white":x.color} transition-transform group-hover:scale-110`}),r.jsx("span",{className:"text-sm font-medium",children:x.label})]}),l(x.label)===!0?r.jsx("div",{className:`w-2 h-2 rounded-full ${v?"bg-white":"bg-primary-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]"}`}):typeof l(x.label)=="number"?r.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] font-bold ${v?"bg-white text-primary-500":"bg-primary-500 text-white"}`,children:l(x.label)}):v&&r.jsx(T.div,{layoutId:"activeFeedIndicator",className:"w-1.5 h-1.5 rounded-full bg-white shadow-[0_0_8px_white]"})]},x.path)}),(m||h)&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-light-border/50 dark:border-dark-border/50 space-y-1",children:[r.jsx("p",{className:"px-4 mb-2 text-[10px] font-black text-light-muted dark:text-dark-muted uppercase tracking-[0.2em]",children:"Management"}),m&&c.map(x=>{const g=x.icon,v=e.pathname===x.path;return r.jsxs(re,{to:x.path,className:`
                                            flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                            ${v?"bg-primary-500 text-white shadow-lg":"text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card"}
                                        `,children:[r.jsx(g,{className:`w-5 h-5 ${v?"text-white":x.color} transition-transform group-hover:scale-110`}),r.jsx("span",{className:"text-sm font-medium",children:x.label})]},x.path)}),(m||h)&&u.map(x=>{const g=x.icon,v=e.pathname===x.path;return r.jsxs(re,{to:x.path,className:`
                                            flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                            ${v?"bg-primary-500 text-white shadow-lg":"text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card"}
                                        `,children:[r.jsx(g,{className:`w-5 h-5 ${v?"text-white":x.color} transition-transform group-hover:scale-110`}),r.jsx("span",{className:"text-sm font-medium",children:x.label})]},x.path)})]})]})}),r.jsxs(D,{glass:!0,className:"p-6",children:[r.jsx("h4",{className:"font-bold text-xs uppercase tracking-widest text-light-muted mb-4",children:"Quick Links"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(re,{to:"/profile",className:"px-3 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-xs font-bold hover:border-primary-500 transition-colors flex items-center justify-center",children:"My Profile"}),r.jsx(re,{to:"/notifications",className:"px-3 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-xs font-bold hover:border-primary-500 transition-colors flex items-center justify-center",children:"Notifications"})]})]})]})}function i1(){var n;const e=le(),t=O(C.users.getTickerData),s=O(C.announcements.getAnnouncements,{});return r.jsxs("aside",{className:"hidden xl:block space-y-6 sticky top-24 max-h-[calc(100vh-120px)] overflow-y-auto pb-10 pr-1 transition-all custom-scrollbar-premium",children:[r.jsx("style",{children:`
                .custom-scrollbar-premium::-webkit-scrollbar {
                    width: 4px;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #ffffff;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #111827;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #374151;
                    border-radius: 10px;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #064e3b;
                }
                .custom-scrollbar-premium {
                    scrollbar-width: thin;
                    scrollbar-color: #374151 #ffffff;
                }
                .dark .custom-scrollbar-premium {
                    scrollbar-color: #064e3b #111827;
                }
            `}),t===void 0?r.jsx(CD,{}):r.jsxs(D,{glass:!0,className:"overflow-hidden border-emerald-500/10 hover:border-emerald-500/30 transition-all duration-300",children:[r.jsx(xe,{className:"pb-2",children:r.jsxs(pe,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-light-muted flex items-center justify-between",children:["Realtime Stats",r.jsx(mn,{className:"w-3.5 h-3.5 text-emerald-500"})]})}),r.jsxs(U,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-emerald-500/5 border border-emerald-500/10",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-black text-emerald-500 font-display",children:((n=t==null?void 0:t.totalCount)==null?void 0:n.toLocaleString())||"..."}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider",children:"Total Members"})]}),r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center",children:r.jsx(Se,{className:"w-5 h-5 text-emerald-500"})})]}),r.jsx("div",{className:"pt-2",children:r.jsx(_j,{})})]})]}),s===void 0?r.jsx(TD,{}):r.jsxs(D,{glass:!0,className:"border-primary-500/10",children:[r.jsx(xe,{className:"pb-3 border-b border-light-border/30 dark:border-dark-border/30",children:r.jsxs(pe,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-light-muted flex items-center justify-between",children:["Announcements",r.jsx(Fo,{className:"w-3.5 h-3.5 text-primary-500"})]})}),r.jsx(U,{className:"p-0",children:r.jsx("div",{className:"divide-y divide-light-border/30 dark:divide-dark-border/30",children:s&&s.length>0?s.slice(0,4).map(a=>{var i;return r.jsxs("div",{onClick:()=>e(`/announcement/${a._id}`),className:"p-4 hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-colors group relative overflow-hidden cursor-pointer",children:[a.imageUrl&&r.jsx("div",{className:"h-32 w-full rounded-xl overflow-hidden mb-3 border border-light-border/20 dark:border-dark-border/20",children:r.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsx("h4",{className:"text-sm font-bold text-light-text dark:text-dark-text group-hover:text-primary-500 transition-colors",children:a.title}),r.jsx(H,{variant:"outline",className:"text-[8px] px-1.5 py-0 bg-primary-500/10 text-primary-500 border-primary-500/20",children:a.category||"New"})]}),r.jsx("p",{className:"text-xs text-light-muted line-clamp-2 leading-relaxed mb-3",children:a.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-[10px] font-bold text-light-muted/60 uppercase tracking-tighter italic",children:["By ",((i=a.creatorRole)==null?void 0:i.replace("_"," "))||"Admin"]}),r.jsxs("button",{className:"text-[10px] font-bold text-primary-500 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["Read More ",r.jsx(JC,{className:"w-2.5 h-2.5"})]})]})]},a._id)}):r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Fo,{className:"w-8 h-8 text-light-muted/20 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-light-muted italic",children:"No official announcements yet."})]})})})]})]})}function MD(){const e=le(),{user:t}=X();return t?r.jsx(D,{glass:!0,className:"hidden md:block mb-6 overflow-hidden border-primary-500/10 hover:border-primary-500/20 transition-all duration-300 group",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary-500 to-secondary-500 p-[2px] shadow-lg shadow-primary-500/20 shrink-0",children:r.jsx("div",{className:"w-full h-full rounded-2xl bg-white dark:bg-dark-bg overflow-hidden flex items-center justify-center font-bold text-xl text-gradient",children:t.avatarUrl?r.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full object-cover"}):t.name[0]})}),r.jsxs("button",{onClick:()=>e("/create-post"),className:"flex-1 h-12 px-6 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/50 dark:border-dark-border/50 text-left text-light-muted dark:text-dark-muted hover:bg-light-bg dark:hover:bg-dark-bg hover:border-primary-500/30 transition-all text-base font-medium flex items-center justify-between group/input",children:[r.jsxs("span",{children:["What's on your mind, ",t.name.split(" ")[0],"?"]}),r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-primary-500 text-white text-[10px] font-bold uppercase tracking-wider group-hover/input:scale-105 transition-transform",children:[r.jsx(ft,{className:"w-3 h-3"})," Post"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-6 border-t border-light-border/20 dark:border-dark-border/20",children:[r.jsxs("button",{onClick:()=>e("/create-post"),className:"flex items-center justify-center gap-2 p-3 rounded-xl hover:bg-red-500/10 transition-colors group/btn",children:[r.jsx(Wr,{className:"w-5 h-5 text-red-500 group-hover/btn:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-bold text-light-muted dark:text-dark-muted group-hover/btn:text-red-500",children:"Media"})]}),r.jsxs("button",{onClick:()=>e("/create-post"),className:"flex items-center justify-center gap-2 p-3 rounded-xl hover:bg-emerald-500/10 transition-colors group/btn",children:[r.jsx(m3,{className:"w-5 h-5 text-emerald-500 group-hover/btn:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-bold text-light-muted dark:text-dark-muted group-hover/btn:text-emerald-500",children:"Activity"})]})]})]})}):null}function o1(){var v;const{user:e}=X(),t=O(C.polls.getActivePoll,e?{userId:e._id}:"skip"),s=V(C.polls.vote),[n,a]=p.useState(null),[i,o]=p.useState(!1),[l,d]=p.useState(""),[c,u]=p.useState(!1);p.useEffect(()=>{if(!t||!t.expiresAt)return;const w=()=>{const b=Date.now(),y=t.expiresAt-b;if(y<=0)d("Ended");else{const k=Math.floor(y/36e5),j=Math.floor(y%(1e3*60*60)/(1e3*60));d(`${k}h ${j}m`)}};w();const f=setInterval(w,6e4);return()=>clearInterval(f)},[t]);const[m,h]=p.useState(null),x=async()=>{if(!(!e||!t||!n)){o(!0),h(null);try{await s({pollId:t._id,userId:e._id,selectedOptionId:n}),u(!0)}catch(w){console.error(w),h(w.message||"Failed to submit vote")}finally{o(!1)}}};if(t===void 0||t===null)return null;const g=Date.now()>t.expiresAt;return r.jsxs(D,{glass:!0,className:"border-primary-500/20 overflow-hidden relative mb-6",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary-500 to-secondary-500"}),r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-2",children:[r.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>u(!c),children:[r.jsxs("h3",{className:"text-lg sm:text-xl font-bold font-display text-gradient leading-tight flex items-center gap-2",children:["Weekly Wisdom Game",c?r.jsx(Hn,{className:"w-5 h-5 text-light-muted"}):r.jsx(Je,{className:"w-5 h-5 text-light-muted"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-light-muted dark:text-dark-muted mt-1",children:c?"Test your knowledge & earn Rubies":"Tap to reveal the weekly question"})]}),r.jsxs("div",{className:"flex items-center gap-2 self-start sm:self-auto flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-1.5 bg-primary-50 dark:bg-primary-900/20 px-2.5 py-1.5 rounded-full border border-primary-100 dark:border-primary-900/50",children:[r.jsx(Ze,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary-600 dark:text-primary-400"}),r.jsx("span",{className:"text-xs font-bold text-primary-700 dark:text-primary-300 font-mono",children:l})]}),r.jsxs(re,{to:"/leaderboard",className:"flex items-center gap-1.5 bg-light-card dark:bg-dark-card hover:bg-light-bg dark:hover:bg-dark-bg px-2.5 py-1.5 rounded-full border border-light-border dark:border-dark-border transition-colors",children:[r.jsx(QC,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-light-muted dark:text-dark-muted"}),r.jsx("span",{className:"text-xs font-bold text-light-muted dark:text-dark-muted",children:"Leadersboard"})]})]})]}),r.jsx(te,{children:c&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsxs("div",{className:"pt-4 border-t border-light-border/50 dark:border-dark-border/50 mt-4",children:[r.jsx("h4",{className:"text-lg font-medium mb-6 leading-relaxed",children:t.question}),r.jsx("div",{className:"space-y-4",children:t.hasVoted?r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500",children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.options.map(w=>{var j;const f=((j=t.userVote)==null?void 0:j.selectedOptionId)===w.id,b=t.correctOptionId===w.id,y=t.totalVotes>0?Math.round(w.voteCount/t.totalVotes*100):0;let k="bg-light-bg/30 dark:bg-dark-bg/30 border-light-border dark:border-dark-border";return b?k="bg-green-500/10 border-green-500/50":f&&!b&&(k="bg-red-500/10 border-red-500/50"),r.jsxs("div",{className:Y("relative p-3 rounded-xl border overflow-hidden min-h-[6rem] flex flex-col justify-center",k),children:[r.jsx(T.div,{initial:{height:0},animate:{height:`${y}%`},transition:{duration:1,ease:"easeOut",delay:.2},className:Y("absolute bottom-0 left-0 w-full opacity-10",b?"bg-green-500":f?"bg-red-500":"bg-gray-400")}),r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsxs("div",{className:"flex justify-center mb-1",children:[b&&r.jsx(Qt,{className:"w-5 h-5 text-green-500"}),f&&!b&&r.jsx(ys,{className:"w-5 h-5 text-red-500"})]}),r.jsx("span",{className:Y("block text-sm font-medium leading-tight mb-1",b?"text-green-600 dark:text-green-400":""),children:w.text}),r.jsxs("span",{className:"font-bold text-lg",children:[y,"%"]})]})]},w.id)})}),r.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10 border border-primary-500/20 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-50 backdrop-blur-[1px]"}),r.jsx("div",{className:"relative z-10",children:(v=t.userVote)!=null&&v.isCorrect?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-center mb-2",children:r.jsx(ke,{className:"w-8 h-8 text-yellow-500 fill-yellow-500 animate-bounce"})}),r.jsx("h5",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:"Correct! +1 Ruby"}),r.jsx("p",{className:"text-xs text-light-muted",children:"Added to Silver Pool"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-center mb-2",children:r.jsx(yr,{className:"w-8 h-8 text-primary-400"})}),r.jsx("h5",{className:"font-bold text-lg text-light-text dark:text-dark-text",children:"Good Try! +0.3 Ruby"}),r.jsx("p",{className:"text-xs text-light-muted",children:"Participation Reward Added"})]})})]}),r.jsxs("div",{className:"text-center text-xs text-light-muted mt-2",children:["Total Votes: ",t.totalVotes]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3",children:t.options.map(w=>r.jsxs("button",{onClick:()=>!g&&a(w.id),disabled:g,className:Y("w-full p-4 rounded-xl text-left transition-all duration-200 border relative overflow-hidden group outline-none focus:ring-2 focus:ring-primary-500",n===w.id?"bg-primary-500 text-white border-primary-600 shadow-lg shadow-primary-500/25":"bg-light-bg/50 dark:bg-dark-bg/50 border-light-border dark:border-dark-border hover:border-primary-300 dark:hover:border-primary-700 hover:bg-light-bg dark:hover:bg-dark-bg"),children:[r.jsx("span",{className:"relative z-10 font-medium",children:w.text}),n===w.id&&r.jsx(T.div,{layoutId:"selected-indicator",className:"absolute inset-0 bg-primary-500 z-0",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},w.id))}),m&&r.jsxs("div",{className:"mt-4 p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 text-xs text-center flex items-center justify-center gap-2",children:[r.jsx(yr,{className:"w-4 h-4"}),m]}),r.jsx(M,{onClick:x,disabled:!n||i||g,className:"w-full mt-4 bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-700 hover:to-primary-600 shadow-xl shadow-primary-500/20",size:"lg",isLoading:i,children:g?"Poll Closed":"Submit Vote"})]})})]})})})]})]})}function RD({announcement:e,showGame:t}){const s=le(),{user:n}=X(),[a,i]=p.useState(!1),[o,l]=p.useState("menu"),d=O(C.polls.getActivePoll,n?{userId:n._id}:"skip"),c=O(C.wordUnderPressure.getActivePassageStatus,n?{userId:n._id}:"skip"),u=d!=null,m=(c==null?void 0:c.hasActivePassage)===!0,h=u&&!d.hasVoted,x=m&&!c.rewardClaimed,g=(h?1:0)+(x?1:0),v=u||m;return!e&&(!t||!v)?null:r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"fixed top-20 left-4 z-40 flex flex-col gap-3 animate-in fade-in zoom-in duration-300",children:[e&&r.jsx("div",{onClick:()=>s(`/announcement/${e._id}`),className:"cursor-pointer",children:r.jsxs("div",{className:"relative group w-12 h-12",children:[r.jsx("div",{className:"absolute -inset-[3px] bg-gradient-to-tr from-yellow-500 via-orange-500 to-red-500 rounded-full opacity-90 group-hover:opacity-100 transition-opacity animate-pulse"}),r.jsx("div",{className:"absolute -inset-[1px] bg-light-bg dark:bg-dark-bg rounded-full z-0"}),r.jsx("div",{className:"relative w-full h-full rounded-full overflow-hidden z-10 border border-black/10 dark:border-white/10",children:r.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"})})]})}),t&&v&&r.jsx("div",{onClick:()=>{l("menu"),i(!0)},className:"cursor-pointer",children:r.jsxs("div",{className:"relative group w-10 h-10 ml-1",children:[r.jsx("div",{className:Y("absolute -inset-[2px] rounded-full opacity-90 group-hover:opacity-100 transition-all duration-500",g>0?"bg-gradient-to-tr from-emerald-500 via-indigo-500 to-purple-500 animate-pulse":"bg-light-border dark:bg-dark-border")}),r.jsx("div",{className:"absolute -inset-[1px] bg-light-bg dark:bg-dark-bg rounded-full z-0"}),r.jsx("div",{className:"relative w-full h-full rounded-full overflow-hidden z-10 border border-black/10 dark:border-white/10 bg-white dark:bg-gray-900 flex items-center justify-center",children:r.jsx(ke,{className:Y("w-5 h-5",g>0?"text-indigo-500":"text-light-muted opacity-50")})}),g>0&&r.jsx("div",{className:"absolute -top-1 -right-1 z-20 bg-red-500 text-white text-[8px] font-bold px-1.5 py-0.5 rounded-full border-2 border-light-bg dark:border-dark-bg animate-bounce shadow-lg",children:g})]})})]}),r.jsx(te,{children:a&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"relative w-full max-w-lg z-10 max-h-[90vh] overflow-y-auto custom-scrollbar rounded-[2.5rem]",children:[r.jsx(te,{mode:"wait",children:o==="menu"?r.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"bg-light-card dark:bg-dark-card rounded-[2.5rem] p-8 border border-light-border dark:border-dark-border shadow-2xl space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-2xl font-display font-bold text-gradient",children:"Active Challenges"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Choose a quest to earn Rubies"})]}),r.jsxs("div",{className:"grid gap-4",children:[u&&r.jsxs("button",{onClick:()=>l("poll"),className:Y("group flex items-center gap-4 p-5 rounded-3xl border transition-all duration-300 text-left",h?"bg-primary-500/5 border-primary-500/20 hover:bg-primary-500/10 hover:border-primary-500/40":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border opacity-60"),children:[r.jsx("div",{className:Y("w-12 h-12 rounded-2xl flex items-center justify-center transition-colors",h?"bg-primary-500 text-white":"bg-light-muted/10 text-light-muted"),children:r.jsx(Ww,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold",children:"Weekly Wisdom"}),r.jsx("p",{className:"text-xs text-light-muted",children:h?"Earn up to 1 Ruby":"Poll completed"})]}),h?r.jsx(Mt,{className:"w-5 h-5 text-primary-500 transform group-hover:translate-x-1 transition-transform"}):r.jsx(et,{className:"w-5 h-5 text-green-500"})]}),m&&r.jsxs("button",{onClick:()=>s("/diamond-challenge"),className:Y("group flex items-center gap-4 p-5 rounded-3xl border transition-all duration-300 text-left",x?"bg-emerald-500/5 border-emerald-500/20 hover:bg-emerald-500/10 hover:border-emerald-500/40":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border opacity-60"),children:[r.jsx("div",{className:Y("w-12 h-12 rounded-2xl flex items-center justify-center transition-colors",x?"bg-emerald-500 text-white":"bg-light-muted/10 text-light-muted"),children:r.jsx(_r,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold",children:"Diamond Challenge"}),r.jsx("p",{className:"text-xs text-light-muted",children:x?"Earn up to 11.5 Rubies":"Challenge participated"})]}),x?r.jsx(Mt,{className:"w-5 h-5 text-emerald-500 transform group-hover:translate-x-1 transition-transform"}):r.jsx(et,{className:"w-5 h-5 text-green-500"})]})]})]},"menu"):o==="poll"?r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[r.jsx(o1,{}),r.jsx(M,{variant:"ghost",className:"mt-4 text-xs mx-auto block font-bold text-light-muted",onClick:()=>l("menu"),children:"Back to Menu"})]},"poll"):null}),r.jsx("button",{onClick:()=>i(!1),className:"absolute top-3 right-3 md:-top-12 md:-right-12 w-8 h-8 md:w-10 md:h-10 rounded-full bg-black/20 md:bg-white/10 hover:bg-black/30 md:hover:bg-white/20 flex items-center justify-center text-white backdrop-blur-md transition-colors border border-white/10 z-50",children:r.jsx(Ne,{className:"w-5 h-5 md:w-6 md:h-6"})})]})]})})]})}function LD(){const{user:e,isLoading:t}=X(),s=le(),n=O(C.announcements.getAnnouncements,e?{userId:e._id}:"skip"),a=p.useRef(null),i=p.useRef(null),[o,l]=p.useState(!1),[d,c]=p.useState(!1);return p.useEffect(()=>{const u=new IntersectionObserver(m=>{m.forEach(h=>{h.target===a.current&&l(!h.isIntersecting&&h.boundingClientRect.top<0),h.target===i.current&&c(!h.isIntersecting&&h.boundingClientRect.top<0)})},{threshold:0});return a.current&&u.observe(a.current),i.current&&u.observe(i.current),()=>u.disconnect()},[n]),t?r.jsx("div",{className:"min-h-screen py-4 md:py-8 bg-light-bg dark:bg-dark-bg",children:r.jsx("div",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsx("div",{className:"hidden lg:block lg:col-span-4 xl:col-span-3",children:r.jsx("div",{className:"h-96 rounded-3xl bg-light-card/50 dark:bg-dark-card/50 animate-pulse"})}),r.jsxs("div",{className:"lg:col-span-8 xl:col-span-6 space-y-8",children:[r.jsx("div",{className:"h-40 rounded-3xl bg-light-card/50 dark:bg-dark-card/50 animate-pulse"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]}),r.jsx("div",{className:"hidden xl:block xl:col-span-3",children:r.jsx("div",{className:"h-96 rounded-3xl bg-light-card/50 dark:bg-dark-card/50 animate-pulse"})})]})})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 bg-light-bg/50 dark:bg-dark-bg/50",children:r.jsx("div",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsx("div",{className:"hidden lg:block lg:col-span-4 xl:col-span-3",children:r.jsx(a1,{})}),r.jsx("div",{className:"lg:col-span-8 xl:col-span-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto xl:max-w-none",children:[r.jsx(MD,{}),n&&n.length>0&&r.jsx("div",{ref:a,className:"xl:hidden mb-8",children:r.jsx(ED,{announcements:n})}),r.jsx("div",{ref:i,className:"mb-8",children:r.jsx(o1,{})}),r.jsx(RD,{announcement:o&&n&&n.length>0?n[0]:null,showGame:d}),r.jsx(nu,{onCommentClick:u=>s(`/post/${u._id}`)})]})}),r.jsx("div",{className:"hidden xl:block xl:col-span-3",children:r.jsx(i1,{})})]})})}):r.jsx(Me,{to:"/login",replace:!0})}function nt(){const e=le();return r.jsxs("button",{onClick:()=>e(-1),className:"flex fixed top-20 left-4 z-40 p-3 rounded-full bg-light-card/80 dark:bg-dark-card/80 backdrop-blur-md border border-light-border dark:border-dark-border shadow-xl text-light-muted dark:text-dark-muted hover:text-primary-500 dark:hover:text-primary-400 transition-all hover:scale-110 active:scale-95 group focus:outline-none focus:ring-2 focus:ring-primary-500",title:"Go Back",children:[r.jsx(fr,{className:"w-6 h-6"}),r.jsx("span",{className:"sr-only",children:"Back"})]})}function DD(){const{user:e}=X(),t=O(C.posts.getSavedPosts,e?{userId:e._id}:"skip");return e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 bg-light-bg/50 dark:bg-dark-bg/50",children:r.jsx("div",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsx("div",{className:"hidden lg:block lg:col-span-4 xl:col-span-3",children:r.jsx(a1,{})}),r.jsx("div",{className:"lg:col-span-8 xl:col-span-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto xl:max-w-none",children:[r.jsx("div",{className:"lg:hidden",children:r.jsx(nt,{})}),r.jsx("div",{className:"flex items-center gap-3 mb-6 pt-16 md:pt-0",children:r.jsx("h1",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:"Saved Posts"})}),r.jsx("div",{className:"space-y-6",children:t===void 0?[1,2,3].map(s=>r.jsx(Oe,{},s)):t.length===0?r.jsxs("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted glass rounded-2xl border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-lg font-semibold",children:"No saved posts yet"}),r.jsx("p",{className:"text-sm mt-2",children:"Posts you save will appear here for easy access."})]}):t.map(s=>r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:r.jsx(ho,{post:s,hasUserLiked:s.hasLiked})},s._id))})]})}),r.jsx("div",{className:"hidden xl:block xl:col-span-3",children:r.jsx(i1,{})})]})})}):null}function l1({onUploadComplete:e,onUploadChange:t,allowVideo:s=!1,currentMedia:n}){const[a,i]=p.useState(!1),[o,l]=p.useState(0),[d,c]=p.useState(n),u=p.useRef(null),m=p.useRef(null),h=async(g,v)=>{if(v==="image"&&!Vp(g)){alert("Please upload a valid image file (JPG, PNG, GIF, or WebP)");return}if(v==="video"&&!n8(g)){alert("Please upload a valid video file (MP4, WebM, or OGG)");return}const w=new FileReader;w.onloadend=()=>{c({url:w.result,type:v})},w.readAsDataURL(g),i(!0),t==null||t(!0),l(0);try{const b=await Ka(g,v==="image"?"posts/images":"posts/videos",y=>{l(y)});e(b,v),c({url:b,type:v})}catch(f){console.error("Upload failed:",f),alert(`Failed to upload ${v}. Please try again.`),c(n)}finally{i(!1),t==null||t(!1),l(0)}},x=()=>{c(void 0),e("","image"),u.current&&(u.current.value=""),m.current&&(m.current.value="")};return r.jsxs("div",{className:"space-y-3",children:[r.jsx(te,{children:d&&r.jsxs(T.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"relative rounded-lg overflow-hidden bg-light-card dark:bg-dark-card",children:[d.type==="image"?r.jsx("img",{src:d.url,alt:"Preview",className:"w-full max-h-96 object-contain"}):r.jsx("video",{src:d.url,controls:!0,className:"w-full max-h-96 object-contain"}),a&&r.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(jr,{className:"w-8 h-8 text-white animate-spin mx-auto mb-2"}),r.jsxs("span",{className:"text-sm text-white font-medium",children:[o,"%"]})]})}),!a&&r.jsx("button",{onClick:x,className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-colors",children:r.jsx(Ne,{className:"w-5 h-5 text-white"})})]})}),!d&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:g=>{var w;const v=(w=g.target.files)==null?void 0:w[0];v&&h(v,"image")},className:"hidden",disabled:a}),r.jsxs("button",{type:"button",onClick:()=>{var g;return(g=u.current)==null?void 0:g.click()},disabled:a,className:"flex-1 px-4 py-2 rounded-lg border-2 border-dashed border-light-border dark:border-dark-border hover:border-primary-500 dark:hover:border-primary-500 transition-colors flex items-center justify-center gap-2 text-light-muted dark:text-dark-muted hover:text-primary-500",children:[r.jsx(Wr,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Add Image"})]}),s&&r.jsxs(r.Fragment,{children:[r.jsx("input",{ref:m,type:"file",accept:"video/*",onChange:g=>{var w;const v=(w=g.target.files)==null?void 0:w[0];v&&h(v,"video")},className:"hidden",disabled:a}),r.jsxs("button",{type:"button",onClick:()=>{var g;return(g=m.current)==null?void 0:g.click()},disabled:a,className:"flex-1 px-4 py-2 rounded-lg border-2 border-dashed border-light-border dark:border-dark-border hover:border-secondary-500 dark:hover:border-secondary-500 transition-colors flex items-center justify-center gap-2 text-light-muted dark:text-dark-muted hover:text-secondary-500",children:[r.jsx(g3,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Add Video"})]})]})]})]})}function au({onSuccess:e,defaultCategory:t,variant:s="default",postType:n}){const{user:a}=X(),i=V(C.posts.createPost),[o,l]=p.useState(""),[d,c]=p.useState((n==="general"?t||"Wisdom of The Now":n)||"Wisdom of The Now"),[u,m]=p.useState("personal_experience"),[h,x]=p.useState(""),[g,v]=p.useState(""),[w,f]=p.useState(null),[b,y]=p.useState(!1),[k,j]=p.useState(!1),[S,P]=p.useState(""),R=(N,I)=>{v(N),f(I)},L=async N=>{if(N.preventDefault(),!a){P("You must be logged in to post");return}if(o.trim().length<10){P("Post must be at least 10 characters");return}P(""),y(!0);try{const I=await i({authorId:a._id,content:o.trim(),category:d==="Ancient Culture"||d==="Wisdom of The Now"?d:"Wisdom of The Now",imageUrl:w==="image"?g:void 0,videoUrl:w==="video"?g:void 0,postType:d==="question"||d==="prayer"?d:"general",questionContext:d==="question"?u:void 0,scripture:d==="prayer"?h:void 0});l(""),v(""),f(null),e==null||e(I.postId)}catch(I){P(I instanceof Error?I.message:"Failed to create post")}finally{y(!1)}};return r.jsxs(T.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:L,className:s==="bottom-sheet"?"":"glass rounded-xl p-4 md:p-6 shadow-lg",children:[b&&r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 z-50 flex flex-col items-center justify-center bg-white/80 dark:bg-dark-bg/80 backdrop-blur-sm rounded-xl p-6 text-center",children:[r.jsxs("div",{className:"w-16 h-16 mb-4 relative",children:[r.jsx("div",{className:"absolute inset-0 border-4 border-primary-500/20 rounded-full"}),r.jsx("div",{className:"absolute inset-0 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})]}),r.jsx("h3",{className:"text-xl font-bold text-primary-600 dark:text-primary-400 mb-2",children:"Sharing Your Thoughts..."}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-[240px]",children:"Please be patient while we publish your content to the community feed."})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Ts,{className:"w-5 h-5 text-primary-500"}),r.jsx("h3",{className:"text-xl font-semibold text-light-text dark:text-dark-text",children:d==="question"?"Ask a Question":d==="prayer"?"Share a Prayer Point":"Share Your Thoughts"})]}),S&&r.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:S})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-3 text-light-text dark:text-dark-text",children:"Select Category"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mb-6",children:[{id:"Wisdom of The Now",label:"Wisdom",color:"secondary"},{id:"Ancient Culture",label:"Ancient",color:"primary"},{id:"question",label:"Question",color:"blue"},{id:"prayer",label:"Prayer",color:"purple"}].map(N=>r.jsx("button",{type:"button",onClick:()=>c(N.id),className:`px-3 py-2.5 rounded-xl text-xs font-bold transition-all border ${d===N.id?`bg-${N.color}-500 text-white border-transparent shadow-lg shadow-${N.color}-500/20 scale-[1.02]`:"bg-light-bg dark:bg-dark-bg text-light-muted dark:text-dark-muted border-light-border dark:border-dark-border hover:border-primary-500/30"}`,children:N.label},N.id))}),d==="question"&&r.jsxs("div",{className:"mb-4 animate-in fade-in slide-in-from-top-2",children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text opacity-70",children:"Question Context"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${u==="personal_experience"?"bg-blue-500/10 border-blue-500/50":"bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border hover:border-blue-500/30"}`,children:[r.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u==="personal_experience"?"border-blue-500":"border-gray-400"}`,children:u==="personal_experience"&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})}),r.jsx("input",{type:"radio",name:"questionContext",value:"personal_experience",checked:u==="personal_experience",onChange:()=>m("personal_experience"),className:"hidden"}),r.jsx("span",{className:`text-sm font-medium ${u==="personal_experience"?"text-blue-600 dark:text-blue-400":"text-light-text dark:text-dark-text"}`,children:"Personal"})]}),r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${u==="about_someone_else"?"bg-purple-500/10 border-purple-500/50":"bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border hover:border-purple-500/30"}`,children:[r.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u==="about_someone_else"?"border-purple-500":"border-gray-400"}`,children:u==="about_someone_else"&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"})}),r.jsx("input",{type:"radio",name:"questionContext",value:"about_someone_else",checked:u==="about_someone_else",onChange:()=>m("about_someone_else"),className:"hidden"}),r.jsx("span",{className:`text-sm font-medium ${u==="about_someone_else"?"text-purple-600 dark:text-purple-400":"text-light-text dark:text-dark-text"}`,children:"Someone Else"})]})]})]})]}),d==="prayer"&&r.jsxs("div",{className:"mb-4 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:["Scripture Reference ",r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted font-normal ml-1",children:"(Optional)"})]}),r.jsx("input",{type:"text",value:h,onChange:N=>x(N.target.value),placeholder:"e.g. Philippians 4:6-7",className:"w-full px-4 py-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text placeholder:text-light-muted dark:placeholder:text-dark-muted focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all font-medium"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:d==="question"?"Your Question":d==="prayer"?"Your Prayer Point":"What did you learn?"}),r.jsx("textarea",{value:o,onChange:N=>l(N.target.value),placeholder:d==="question"?"Type your question here...":d==="prayer"?"Share your prayer request...":"Share your insights, revelations, and key takeaways from today's teaching session...",rows:6,className:"w-full px-4 py-3 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text placeholder:text-light-muted dark:placeholder:text-dark-muted focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",required:!0}),r.jsxs("p",{className:"mt-1 text-xs text-light-muted dark:text-dark-muted",children:[o.length," characters"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:"Add Media (Optional)"}),r.jsx(l1,{onUploadComplete:R,onUploadChange:j,allowVideo:(a==null?void 0:a.role)==="admin",currentMedia:g?{url:g,type:w}:void 0}),(a==null?void 0:a.role)==="admin"&&r.jsx("p",{className:"mt-1 text-xs text-accent-500",children:" As an admin, you can upload both images and videos"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:[" Be among the first 5 to post and earn the ",r.jsx("strong",{className:"text-primary-500",children:"SENT"})," badge!"]}),r.jsx(M,{type:"submit",variant:"primary",isLoading:b,disabled:o.trim().length<10||k,children:k?"Uploading Media...":"Post"})]})]})]})}function $p({isVisible:e,onToggle:t,category:s}){return r.jsx(T.button,{onClick:t,whileTap:{scale:.95},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e?"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text border border-light-border dark:border-dark-border hover:bg-light-bg dark:hover:bg-dark-bg":"bg-primary-500 text-white shadow-lg shadow-primary-500/20 hover:bg-primary-600"}`,children:e?r.jsxs(r.Fragment,{children:[r.jsx(el,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm",children:["Hide ",s," Posts"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(Et,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm",children:["Show ",s," Posts"]})]})})}function Wp({content:e,title:t}){const[s,n]=p.useState(!1);return r.jsxs("div",{className:"relative inline-block",children:[r.jsx("button",{onClick:()=>n(!s),className:"p-1 rounded-full hover:bg-light-bg dark:hover:bg-dark-bg transition-all focus:outline-none","aria-label":"Information",children:r.jsx(Gw,{className:"w-4 h-4 md:w-5 md:h-5 text-primary-500"})}),r.jsx(te,{children:s&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>n(!1)}),r.jsx(T.div,{initial:{opacity:0,scale:.9,x:"-50%",y:"-40%"},animate:{opacity:1,scale:1,x:"-50%",y:"-50%"},exit:{opacity:0,scale:.9,x:"-50%",y:"-40%"},className:"fixed z-50 left-1/2 top-1/2 w-[90vw] max-w-sm",children:r.jsxs("div",{className:"glass rounded-xl p-6 shadow-2xl border border-light-border dark:border-dark-border bg-white/90 dark:bg-black/90",children:[t&&r.jsx("h4",{className:"font-bold text-lg text-primary-500 mb-2 font-display",children:t}),r.jsx("p",{className:"text-sm md:text-base text-light-text dark:text-dark-text leading-relaxed",children:e}),r.jsx("button",{onClick:()=>n(!1),className:"mt-4 w-full py-2 rounded-lg bg-primary-500/10 text-primary-500 hover:bg-primary-500/20 font-medium text-sm transition-colors",children:"Got it"})]})})]})})]})}function OD(){const{user:e,isLoading:t}=X(),s=le(),[n,a]=p.useState(0),[i,o]=p.useState(()=>{const l=localStorage.getItem("ancientCulture_postsVisible");return l!==null?JSON.parse(l):!0});return p.useEffect(()=>{localStorage.setItem("ancientCulture_postsVisible",JSON.stringify(i))},[i]),t?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 md:mb-8 p-6 md:p-8 rounded-2xl bg-gradient-to-br from-primary-500/10 via-primary-500/5 to-primary-600/10 border border-primary-500/20",children:r.jsxs("div",{className:"flex items-start gap-4 justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-xl bg-primary-500 flex items-center justify-center shadow-lg shadow-primary-500/30 flex-shrink-0",children:r.jsx(gi,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-primary-600 dark:text-primary-400 font-display",children:"Ancient Culture"}),r.jsx(Wp,{title:"Ancient Culture",content:"This section features teachings based on prophetic wisdom and systems from the Old Testament. Admin-created posts appear here for community learning and discussion."})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base leading-relaxed",children:"Prophetic wisdom and systems from the Old Testament"})]})]}),r.jsx(T.button,{whileTap:{scale:.95},onClick:async()=>{const l=`${window.location.origin}/ancient-culture`;navigator.share?await navigator.share({title:"Ancient Culture - Baptizo",url:l}):(await navigator.clipboard.writeText(l),alert("Link copied to clipboard!"))},className:"p-2 rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/20 transition-all flex-shrink-0",title:"Share this page",children:r.jsx(bi,{className:"w-5 h-5 text-primary-500"})})]})}),r.jsxs("div",{className:"space-y-8",children:[r.jsx(au,{onSuccess:()=>a(l=>l+1),defaultCategory:"Ancient Culture"}),r.jsx("div",{className:"flex justify-end",children:r.jsx($p,{isVisible:i,onToggle:()=>o(!i),category:"Ancient Culture"})}),i&&r.jsx(nu,{category:"Ancient Culture",onlyOfficial:!0,onCommentClick:l=>s(`/post/${l._id}`)},n),!i&&r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:'Posts are hidden. Click "Show Ancient Culture Posts" to view them.'})})]})]})}):r.jsx(Me,{to:"/login",replace:!0})}function FD(){const{user:e,isLoading:t}=X(),s=le(),[n,a]=p.useState(0),[i,o]=p.useState(()=>{const l=localStorage.getItem("wisdomNow_postsVisible");return l!==null?JSON.parse(l):!0});return p.useEffect(()=>{localStorage.setItem("wisdomNow_postsVisible",JSON.stringify(i))},[i]),t?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nr,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 md:mb-8 p-6 md:p-8 rounded-2xl bg-gradient-to-br from-secondary-500/10 via-secondary-500/5 to-secondary-600/10 border border-secondary-500/20",children:r.jsxs("div",{className:"flex items-start gap-4 justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-xl bg-secondary-500 flex items-center justify-center shadow-lg shadow-secondary-500/30 flex-shrink-0",children:r.jsx(Ts,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-secondary-600 dark:text-secondary-400 font-display",children:"Wisdom of The Now"}),r.jsx(Wp,{title:"Wisdom of The Now",content:"This section features teachings based on spiritual identity and insights from the New Testament. Engage with admin posts to deepen your understanding."})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base leading-relaxed",children:"Spiritual identity and insights from the New Testament"})]})]}),r.jsx(T.button,{whileTap:{scale:.95},onClick:async()=>{const l=`${window.location.origin}/wisdom-now`;navigator.share?await navigator.share({title:"Wisdom of The Now - Baptizo",url:l}):(await navigator.clipboard.writeText(l),alert("Link copied to clipboard!"))},className:"p-2 rounded-lg hover:bg-secondary-100 dark:hover:bg-secondary-900/20 transition-all flex-shrink-0",title:"Share this page",children:r.jsx(bi,{className:"w-5 h-5 text-secondary-500"})})]})}),r.jsxs("div",{className:"space-y-8",children:[r.jsx(au,{onSuccess:()=>a(l=>l+1),defaultCategory:"Wisdom of The Now"}),r.jsx("div",{className:"flex justify-end",children:r.jsx($p,{isVisible:i,onToggle:()=>o(!i),category:"Wisdom of The Now"})}),i&&r.jsx(nu,{category:"Wisdom of The Now",onlyOfficial:!0,onCommentClick:l=>s(`/post/${l._id}`)},n),!i&&r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:'Posts are hidden. Click "Show Wisdom of The Now Posts" to view them.'})})]})]})}):r.jsx(Me,{to:"/login",replace:!0})}function UD({currentAvatarUrl:e,onUploadComplete:t,size:s="lg"}){const[n,a]=p.useState(!1),[i,o]=p.useState(0),[l,d]=p.useState(e),[c,u]=p.useState(!1),m=p.useRef(null),h={sm:"w-16 h-16",md:"w-24 h-24",lg:"w-32 h-32",xl:"w-40 h-40"},x=async v=>{var b;const w=(b=v.target.files)==null?void 0:b[0];if(!w)return;if(!Vp(w)){alert("Please upload a valid image file (JPG, PNG, GIF, or WebP)");return}const f=new FileReader;f.onloadend=()=>{d(f.result)},f.readAsDataURL(w),a(!0),o(0),u(!1);try{const y=await Ka(w,"avatars",o);t(y),d(y),u(!0),setTimeout(()=>u(!1),3e3)}catch(y){console.error("Upload failed:",y),alert("Failed to upload avatar. Please try again."),d(e)}finally{a(!1),o(0)}},g=()=>{d(void 0),t(""),m.current&&(m.current.value="")};return r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`${h[s]} rounded-full overflow-hidden border-4 border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card flex items-center justify-center`,children:l?r.jsx("img",{src:XN(l,200,200),alt:"Avatar",className:"w-full h-full object-cover"}):r.jsx(vh,{className:"w-8 h-8 text-light-muted dark:text-dark-muted"})}),n&&r.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(jr,{className:"w-6 h-6 text-white animate-spin mx-auto mb-1"}),r.jsxs("span",{className:"text-xs text-white font-medium",children:[i,"%"]})]})}),l&&!n&&r.jsx("button",{onClick:g,className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-colors",children:r.jsx(Ne,{className:"w-4 h-4 text-white"})})]}),r.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:x,className:"hidden",disabled:n}),r.jsxs(M,{onClick:()=>{var v;return(v=m.current)==null?void 0:v.click()},variant:"outline",size:"sm",disabled:n,children:[r.jsx(vh,{className:"w-4 h-4 mr-2"}),l?"Change Avatar":"Upload Avatar"]}),r.jsx(te,{children:c&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800",children:[r.jsx(pt,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Avatar saved successfully!"})]})})]})}const BD=e=>{if(!e)return"";if(e.length<=4)return e;const t=e.slice(-4);return"*".repeat(e.length-4)+t},VD=e=>{const t=e.replace(/[\s-]/g,"");return/^\d{10}$/.test(t)},zD=e=>e.trim().length>=2&&e.trim().length<=100,$D=e=>e.trim().length>=2&&e.trim().length<=100,WD=["Access Bank","GTBank","First Bank","UBA","Zenith Bank","Fidelity Bank","Union Bank","Sterling Bank","Polaris Bank","Wema Bank","Ecobank","Stanbic IBTC","Keystone Bank","FCMB","Unity Bank","Jaiz Bank","Providus Bank","Kuda Bank","OPay","PalmPay","Moniepoint","Other"];function qD({userId:e,isAdminView:t=!1}){const{user:s}=X(),n=e||(s==null?void 0:s._id),a=O(C.bankingCredentials.getBankingCredentials,n&&(s!=null&&s._id)?{userId:n,viewerId:s._id}:"skip"),i=V(C.bankingCredentials.updateBankingCredentials),[o,l]=p.useState(!1),[d,c]=p.useState(!1),[u,m]=p.useState({bankName:"",accountNumber:"",accountName:""}),[h,x]=p.useState({}),[g,v]=p.useState(!1);p.useEffect(()=>{a&&m({bankName:a.bankName||"",accountNumber:a.accountNumber||"",accountName:a.accountName||""})},[a]);const w=async y=>{y.preventDefault();const k={};if(zD(u.bankName)||(k.bankName="Please enter a valid bank name"),VD(u.accountNumber)||(k.accountNumber="Account number must be 10 digits"),$D(u.accountName)||(k.accountName="Please enter a valid account name"),x(k),!(Object.keys(k).length>0)&&n){v(!0);try{await i({userId:n,bankName:u.bankName.trim(),accountNumber:u.accountNumber.replace(/[\s-]/g,""),accountName:u.accountName.trim()}),l(!1),c(!1)}catch(j){console.error("Failed to update banking credentials:",j),x({submit:"Failed to save banking credentials. Please try again."})}finally{v(!1)}}},f=(a==null?void 0:a.bankName)&&(a==null?void 0:a.accountNumber)&&(a==null?void 0:a.accountName),b=!t&&(s==null?void 0:s._id)===n;return r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center gap-2",children:[r.jsx(Ar,{className:"w-5 h-5 text-accent-500"}),"Banking Information"]})}),r.jsxs(U,{children:[!t&&r.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-light-bg dark:bg-dark-bg flex items-start gap-2",children:[r.jsx(Nt,{className:"w-4 h-4 text-light-muted dark:text-dark-muted mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Your banking information is secure and only visible to you and administrators. This is required to receive rewards for participating in teaching sessions."})]}),o?r.jsxs("form",{onSubmit:w,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:["Bank Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:u.bankName,onChange:y=>m({...u,bankName:y.target.value}),className:"w-full px-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"",children:"Select your bank"}),WD.map(y=>r.jsx("option",{value:y,children:y},y))]}),h.bankName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.bankName})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:["Account Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.accountNumber,onChange:y=>m({...u,accountNumber:y.target.value}),placeholder:"0123456789",maxLength:10,className:"w-full px-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-primary-500 font-mono"}),h.accountNumber&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.accountNumber})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:["Account Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.accountName,onChange:y=>m({...u,accountName:y.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-primary-500"}),h.accountName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.accountName})]}),h.submit&&r.jsx("p",{className:"text-red-500 text-sm",children:h.submit}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:g,children:g?"Saving...":"Save"}),r.jsx(M,{type:"button",onClick:()=>{l(!1),x({}),a&&m({bankName:a.bankName||"",accountNumber:a.accountNumber||"",accountName:a.accountName||""})},variant:"secondary",className:"flex-1",disabled:g,children:"Cancel"})]})]}):r.jsx("div",{className:"space-y-4",children:f?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-muted dark:text-dark-muted mb-1",children:"Bank Name"}),r.jsx("p",{className:"text-light-text dark:text-dark-text",children:a.bankName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-muted dark:text-dark-muted mb-1",children:"Account Number"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-light-text dark:text-dark-text font-mono",children:d?a.accountNumber:BD(a.accountNumber||"")}),r.jsx("button",{onClick:()=>c(!d),className:"text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:d?r.jsx(el,{className:"w-4 h-4"}):r.jsx(Et,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-muted dark:text-dark-muted mb-1",children:"Account Name"}),r.jsx("p",{className:"text-light-text dark:text-dark-text",children:a.accountName})]}),b&&r.jsx(M,{onClick:()=>l(!0),variant:"secondary",className:"w-full",children:"Update Banking Information"})]}):r.jsxs("div",{className:"text-center py-6",children:[r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-4",children:t?"This user has not added banking information yet.":"Add your banking information to receive rewards."}),b&&r.jsx(M,{onClick:()=>l(!0),variant:"primary",children:"Add Banking Information"})]})})]})]})}function HD({currentCoverUrl:e,onUploadComplete:t}){const[s,n]=p.useState(!1),[a,i]=p.useState(e),o=p.useRef(null),l=async d=>{var m;const c=(m=d.target.files)==null?void 0:m[0];if(!c)return;if(!Vp(c)){alert("Please upload a valid image file");return}const u=new FileReader;u.onloadend=()=>i(u.result),u.readAsDataURL(c),n(!0);try{const h=await Ka(c,"covers");t(h),i(h)}catch(h){console.error("Upload failed:",h),i(e),alert("Failed to upload cover image")}finally{n(!1)}};return r.jsxs("div",{className:"relative w-full h-full group",children:[a?r.jsx("img",{src:a,alt:"Cover",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary-500/20 to-secondary-500/20"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60"}),s&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-20",children:r.jsx(jr,{className:"w-8 h-8 text-white animate-spin"})}),r.jsx("button",{onClick:()=>{var d;return(d=o.current)==null?void 0:d.click()},className:"absolute bottom-4 right-4 p-2.5 rounded-full bg-black/40 hover:bg-black/60 text-white backdrop-blur-md opacity-100 md:opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110 z-20 border border-white/20",title:"Change Cover Photo",children:r.jsx(YC,{className:"w-5 h-5"})}),r.jsx("input",{type:"file",ref:o,className:"hidden",accept:"image/*",onChange:l})]})}function GD(){const{user:e,isLoading:t,updateUser:s}=X(),n=V(C.presence.updateAvatar),a=V(C.users.updateProfile),i=e?O(C.users.getUserStats,{userId:e._id}):void 0,o=async d=>{if(e)try{await n({userId:e._id,avatarUrl:d}),s({avatarUrl:d})}catch(c){console.error("Failed to update avatar:",c)}},l=async d=>{if(e)try{await a({userId:e._id,coverImageUrl:d})}catch(c){console.error("Failed to update cover image:",c)}};return t?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nr,{}),r.jsx("div",{className:"glass rounded-xl h-64 animate-pulse mb-6"})," ",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Wt,{}),r.jsx(Wt,{}),r.jsx(Wt,{})]})]})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs("div",{className:"mb-4 md:mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gradient font-display mb-2",children:"My Profile"}),r.jsx("p",{className:"text-sm md:text-base text-light-muted dark:text-dark-muted",children:"View your account details and community stats"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[r.jsx("div",{className:"h-32 md:h-48 relative bg-gray-100 dark:bg-gray-800",children:r.jsx(HD,{currentCoverUrl:e.coverImageUrl,onUploadComplete:l})}),r.jsxs("div",{className:"px-4 pb-4 md:px-8 md:pb-8 relative",children:[r.jsx("div",{className:"relative -mt-10 md:-mt-16 mb-3 md:mb-4 flex flex-col items-center md:items-start whitespace-nowrap",children:r.jsx(UD,{currentAvatarUrl:e.avatarUrl,onUploadComplete:o,size:"xl"})}),r.jsx("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 text-center md:text-left",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 mb-1",children:[r.jsx("h1",{className:"text-xl md:text-3xl font-bold text-light-text dark:text-dark-text truncate",children:e.name}),r.jsx(H,{variant:e.role==="super_admin"?"secondary":e.role==="admin"?"primary":"default",className:"h-5 text-[10px]",children:e.role==="super_admin"?"Super Admin":e.role==="admin"?"Admin":"Member"})]}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-start gap-1 md:gap-4 text-sm text-light-muted dark:text-dark-muted mb-4",children:[r.jsx("span",{children:e.email}),r.jsx("span",{className:"hidden md:inline",children:""}),r.jsx("span",{children:EL(e.phone)})]}),r.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-6 mb-4 md:mb-0",children:[r.jsxs(re,{to:"/profile/followers",className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:(i==null?void 0:i.followerCount)||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Followers"})]}),r.jsxs(re,{to:"/profile/following",className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:(i==null?void 0:i.followingCount)||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Following"})]})]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(D,{glass:!0,className:"p-6 text-center",children:[r.jsx(rr,{className:"w-8 h-8 mx-auto mb-2 text-primary-500"}),r.jsx("div",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(i==null?void 0:i.totalPosts)||0}),r.jsx("div",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Posts"})]}),r.jsxs(D,{glass:!0,className:"p-6 text-center",children:[r.jsx(ke,{className:"w-8 h-8 mx-auto mb-2 text-accent-500"}),r.jsx("div",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(i==null?void 0:i.totalRewards)||0}),r.jsx("div",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Awards Won"})]}),r.jsxs(D,{glass:!0,className:"p-6 text-center",children:[r.jsx("div",{className:"w-8 h-8 mx-auto mb-2 flex items-center justify-center text-xl",children:""}),r.jsx("div",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(i==null?void 0:i.totalEarned)||0}),r.jsx("div",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Rubies Earned"})]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(qD,{})})]})}):r.jsx(Me,{to:"/login",replace:!0})}function td(){const{userId:e}=da(),{user:t}=X(),s=bt(),n=le(),a=s.pathname.includes("following")?"following":"followers",i=e||(t==null?void 0:t._id),o=O(C.follows.getFollowList,i?{userId:i,type:a,currentUserId:t==null?void 0:t._id}:"skip"),l=V(C.follows.toggleFollow),d=async c=>{t&&await l({followerId:t._id,followingId:c})};return i?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[r.jsx(nt,{}),r.jsx("h1",{className:"text-2xl font-bold mb-6 capitalize text-light-text dark:text-dark-text",children:a}),r.jsx("div",{className:"space-y-4",children:o===void 0?[1,2,3].map(c=>r.jsx("div",{className:"h-16 glass rounded-xl animate-pulse"},c)):o.length===0?r.jsxs("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:["No ",a," found."]}):o.map(c=>r.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl hover:bg-black/5 dark:hover:bg-white/5 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>n(`/profile/${c._id}`),children:[r.jsx(mt,{src:c.avatarUrl,alt:c.name,className:"w-10 h-10 border border-light-border dark:border-dark-border"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-light-text dark:text-dark-text",children:c.name}),r.jsxs("div",{className:"text-xs text-light-muted dark:text-dark-muted",children:["@",c.username||"user"]})]})]}),(t==null?void 0:t._id)!==c._id&&r.jsx(M,{size:"sm",variant:c.isFollowing?"outline":"primary",onClick:()=>d(c._id),className:c.isFollowing?"hover:bg-red-500 hover:text-white hover:border-red-500":"",children:c.isFollowing?"Following":"Follow"})]},c._id))})]})}):null}function QD(){const{user:e,isLoading:t}=X(),s=O(C.stats.getDashboardStats,e?{adminId:e._id}:"skip"),n=O(C.comments.getCommentSettings,{}),a=V(C.comments.toggleComments),i=O(C.assignments.getPendingReviews,e&&(e.role==="admin"||e.role==="super_admin")?{adminId:e._id}:"skip"),o=(i==null?void 0:i.length)||0,l=O(C.contacts.getContacts,e&&(e.role==="admin"||e.role==="super_admin")?{adminId:e._id}:"skip"),d=(l==null?void 0:l.filter(f=>!f.read).length)||0,[c,u]=p.useState(!1);if(t)return r.jsxs("div",{className:"space-y-8",children:[r.jsx(nr,{}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsx(Wt,{}),r.jsx(Wt,{}),r.jsx(Wt,{})]})]});if(!e||e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Me,{to:"/feed",replace:!0});const m=(s==null?void 0:s.totalMembers)||0,h=(s==null?void 0:s.admins)||0,x=(s==null?void 0:s.boardMembers)||0,g=m>0?m-h-x:0,v=(s==null?void 0:s.totalComments)||0,w=(s==null?void 0:s.totalLikes)||0;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gradient font-display mb-1",children:"System Overview"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Manage teaching sessions and view community statistics"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"grid gap-4",children:r.jsx(D,{glass:!0,className:"bg-gradient-to-br from-primary-500/10 to-transparent border-primary-500/20 h-full",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Total Community"}),r.jsx(Se,{className:"w-8 h-8 text-primary-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Members"}),r.jsx("span",{className:"font-bold",children:g})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Admins"}),r.jsx("span",{className:"font-bold",children:h})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Board"}),r.jsx("span",{className:"font-bold",children:x})]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-light-border dark:border-dark-border",children:[r.jsx("h4",{className:"text-[10px] font-bold text-light-muted dark:text-dark-muted mb-2 uppercase tracking-wider",children:"Engagement"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-1.5",title:"Total Comments",children:[r.jsx($t,{className:"w-3.5 h-3.5 text-blue-500"}),r.jsx("span",{className:"text-sm font-bold text-light-text dark:text-dark-text",children:v})]}),r.jsxs("div",{className:"flex items-center gap-1.5",title:"Total Reactions",children:[r.jsx(vn,{className:"w-3.5 h-3.5 text-red-500 fill-red-500/20"}),r.jsx("span",{className:"text-sm font-bold text-light-text dark:text-dark-text",children:w})]})]})]})]})})}),r.jsxs("div",{className:"grid gap-4",children:[r.jsx(re,{to:"/board",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all h-full group",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg group-hover:text-primary-500 transition-colors",children:"Board Dashboard"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Manage Tasks & Training"})]}),r.jsx(ke,{className:"w-8 h-8 text-yellow-500 opacity-80"})]}),r.jsx("div",{className:"mt-4 flex items-center gap-2",children:r.jsxs(H,{variant:"secondary",children:[x," Active Members"]})})]})})}),r.jsx(re,{to:"/admin/contacts",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all h-full group",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg group-hover:text-blue-500 transition-colors",children:"Messages"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Contact submissions"})]}),r.jsx($t,{className:"w-8 h-8 text-blue-500 opacity-80"})]}),d>0?r.jsxs(H,{variant:"danger",className:"mt-2 animate-pulse",children:[d," Unread"]}):r.jsx("p",{className:"text-xs text-light-muted mt-2",children:"No new messages"})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-4",children:[r.jsx(D,{glass:!0,className:"cursor-pointer hover:border-primary-500 transition-colors group",onClick:()=>{const f=`${window.location.origin}/member-onboarding`;navigator.clipboard.writeText(f),u(!0)},children:r.jsxs(U,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center shrink-0 group-hover:bg-primary-500/20 transition-colors",children:r.jsx(Xd,{className:"w-5 h-5 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold",children:"Onboarding Link"}),r.jsx("p",{className:"text-[10px] text-light-muted",children:"Copy to clipboard"})]})]})}),r.jsx(re,{to:"/admin/roles",children:r.jsx(D,{glass:!0,className:"hover:border-primary-500 transition-colors group h-full",children:r.jsxs(U,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/10 flex items-center justify-center shrink-0 group-hover:bg-orange-500/20 transition-colors",children:r.jsx(qe,{className:"w-5 h-5 text-orange-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-bold",children:"Role Management"}),r.jsx("p",{className:"text-[10px] text-light-muted",children:"Assign privileges"})]}),r.jsx(Mt,{className:"w-4 h-4 text-light-muted group-hover:translate-x-1 transition-transform"})]})})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center gap-2 text-lg",children:[r.jsx($t,{className:"w-5 h-5 text-primary-500"}),"System Controls"]})}),r.jsx(U,{children:r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-light-text dark:text-dark-text text-sm",children:"Community Comments"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-0.5",children:n?"Public participation is enabled":"Comments are temporarily disabled"})]}),r.jsx("button",{onClick:async()=>{if(e)try{await a({adminId:e._id,enabled:!n})}catch(f){console.error("Failed to toggle comments:",f)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n?"bg-primary-500":"bg-gray-300 dark:bg-gray-700"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n?"translate-x-6":"translate-x-1"}`})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(re,{to:"/admin/tasks",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all group h-full",children:r.jsxs(U,{className:"p-6",children:[r.jsx(Xd,{className:"w-8 h-8 text-purple-500 mb-4 opacity-80"}),r.jsx("h3",{className:"font-bold",children:"Task Reviews"}),r.jsx("p",{className:"text-xs text-light-muted mb-4 font-medium",children:"Check student submissions"}),r.jsxs(H,{variant:"outline",className:"bg-purple-500/5 text-purple-500 border-purple-500/20",children:[o," Waiting"]})]})})}),r.jsx(re,{to:"/admin/banking",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all group h-full",children:r.jsxs(U,{className:"p-6",children:[r.jsx(ke,{className:"w-8 h-8 text-emerald-500 mb-4 opacity-80"}),r.jsx("h3",{className:"font-bold",children:"Banking System"}),r.jsx("p",{className:"text-xs text-light-muted mb-4 font-medium",children:"Manage wallets & rewards"}),r.jsxs("div",{className:"flex items-center text-xs font-bold text-emerald-500 gap-1 group-hover:gap-2 transition-all",children:["Enter Hub ",r.jsx(Mt,{className:"w-3 h-3"})]})]})})})]})]})]}),r.jsx(gt,{isOpen:c,onClose:()=>u(!1),title:"Link Copied!",children:r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(pt,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-6",children:"Onboarding link has been copied to clipboard. Share this with new members."}),r.jsx(M,{variant:"primary",className:"w-full",onClick:()=>u(!1),children:"Close"})]})})]})}function KD(){const{user:e}=X(),t=le(),s=O(C.notifications.getNotifications,e?{userId:e._id}:"skip"),n=V(C.notifications.markAllAsRead),a=V(C.notifications.markAsRead),i=V(C.notifications.deleteNotification),[o,l]=p.useState(null),d=async()=>{if(e)try{await n({userId:e._id})}catch(g){console.error("Failed to mark all as read:",g)}},c=async g=>{e&&(g.read||await a({notificationId:g._id,userId:e._id}),g.postId?g.type==="reward"?t(`/post/${g.postId}/responses`):t(`/post/${g.postId}`):g.type==="assignment"?t("/tasks"):g.type==="follower"?t(`/profile/${g.senderId}`):g.type==="chat"&&t("/chat"))},u=(g,v)=>{g.stopPropagation(),l(v)},m=async()=>{if(!(!o||!e))try{await i({notificationId:o,userId:e._id})}catch(g){console.error("Failed to delete notification:",g)}finally{l(null)}},h=g=>{switch(g){case"like":return r.jsx(vn,{className:"w-5 h-5 text-red-500 fill-red-500"});case"comment":return r.jsx(ut,{className:"w-5 h-5 text-blue-500 fill-blue-500"});case"reply":return r.jsx(ut,{className:"w-5 h-5 text-indigo-500 fill-indigo-500"});case"new_post":return r.jsx(rr,{className:"w-5 h-5 text-green-500 fill-green-500"});case"reward":return r.jsx(Fn,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"});case"assignment":return r.jsx(Xd,{className:"w-5 h-5 text-purple-500 fill-purple-500"});case"follower":return r.jsx(St,{className:"w-5 h-5 text-pink-500 fill-pink-500"});case"system_alert":return r.jsx(yr,{className:"w-5 h-5 text-amber-500"});case"meeting":return r.jsx(_t,{className:"w-5 h-5 text-indigo-500"});case"question":return r.jsx(ut,{className:"w-5 h-5 text-cyan-500"});case"chat":return r.jsx(ut,{className:"w-5 h-5 text-blue-500"});default:return r.jsx(ao,{className:"w-5 h-5 text-primary-500"})}},x=g=>{var w;if(g.message)return r.jsx("span",{children:g.message});const v=((w=g.sender)==null?void 0:w.name)||"Someone";switch(g.type){case"like":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," liked your post"]});case"comment":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," commented on your post"]});case"new_post":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," shared a new post"]});case"reply":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," replied to your comment"]});case"reward":return r.jsxs("span",{children:["Congratulations! You were ",r.jsx("span",{className:"font-semibold text-yellow-500",children:"awarded"})," for your response"]});case"assignment":return r.jsxs("span",{children:["You have a new ",r.jsx("span",{className:"font-semibold text-purple-500",children:"assignment"})," from an admin"]});case"follower":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," started following you"]});case"meeting":return r.jsxs("span",{children:["New update regarding a ",r.jsx("span",{className:"font-semibold text-indigo-500",children:"meeting"})]});case"question":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," asked a question on your post"]});default:return r.jsxs("span",{children:["New notification from ",r.jsx("span",{className:"font-semibold text-primary-500",children:v})]})}};return e?r.jsxs("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:[r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-2xl",children:[r.jsx(nt,{}),r.jsxs(D,{glass:!0,className:"mt-4",children:[r.jsxs(xe,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-light-border dark:border-dark-border py-4 px-4 sm:px-6",children:[r.jsxs(pe,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[r.jsx(ao,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary-500"}),"Center of Alerts"]}),s&&s.some(g=>!g.read)&&r.jsxs("button",{onClick:d,className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 font-bold flex items-center justify-center gap-1.5 px-4 py-2 sm:px-3 sm:py-1 rounded-full bg-primary-500/10 dark:hover:bg-primary-950/20 transition-all w-full sm:w-auto border border-primary-500/20",children:[r.jsx(pt,{className:"w-4 h-4"}),"Mark all as read"]})]}),r.jsx(U,{className:"p-0",children:s?s.length===0?r.jsxs("div",{className:"text-center py-20 text-light-muted dark:text-dark-muted",children:[r.jsx("div",{className:"w-20 h-20 bg-light-card dark:bg-dark-card rounded-full flex items-center justify-center mx-auto mb-4 border border-light-border dark:border-dark-border",children:r.jsx(ao,{className:"w-10 h-10 opacity-20"})}),r.jsx("h3",{className:"text-lg font-medium text-light-text dark:text-dark-text",children:"All Caught Up!"}),r.jsx("p",{className:"text-sm",children:"No new notifications at the moment."})]}):r.jsx("div",{className:"divide-y divide-light-border dark:divide-dark-border",children:s.map(g=>{var v,w;return r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},onClick:()=>c(g),className:`
                                            flex items-start gap-4 p-4 cursor-pointer transition-all group relative
                                            ${g.read?"bg-transparent":"bg-primary-50/30 dark:bg-primary-900/5"}
                                            hover:bg-light-card dark:hover:bg-dark-card
                                        `,children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("button",{onClick:f=>{f.stopPropagation(),t(`/profile/${g.senderId}`)},children:r.jsx(mt,{src:(v=g.sender)==null?void 0:v.avatarUrl,alt:((w=g.sender)==null?void 0:w.name)||"User",size:"md",className:"ring-2 ring-transparent group-hover:ring-primary-500/20"})}),r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white dark:bg-dark-bg rounded-full p-1 shadow-md border border-light-border dark:border-dark-border",children:h(g.type)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm leading-relaxed",children:x(g)}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted uppercase font-bold tracking-wider",children:ct(g.createdAt,{addSuffix:!0})}),!g.read&&r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"})]})]}),r.jsx("div",{className:"flex flex-col gap-2",children:r.jsx("button",{onClick:f=>u(f,g._id),className:"p-2 text-light-muted hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-950/20 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Delete notification",children:r.jsx(Vr,{className:"w-4 h-4"})})})]},g._id)})}):r.jsx("div",{className:"p-6",children:r.jsx(ia,{count:4})})})]})]}),r.jsx(xs,{isOpen:!!o,onClose:()=>l(null),onConfirm:m,title:"Delete Notification",description:"Are you sure you want to delete this notification? This action cannot be undone.",confirmText:"Delete",variant:"danger"})]}):null}function d1(){return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-light-bg dark:bg-dark-bg",children:r.jsxs("div",{className:"relative flex flex-col items-center",children:[r.jsxs(T.div,{className:"w-24 h-24 mb-8 relative",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5},children:[r.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-500/20 animate-ping"}),r.jsx("div",{className:"absolute inset-2 rounded-full bg-primary-500/40 animate-pulse"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"w-16 h-16 rounded-2xl shadow-2xl z-10"})})]}),r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center gap-2",children:[r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent",children:"Baptizo Community"}),r.jsx("div",{className:"flex gap-1",children:[0,1,2].map(e=>r.jsx(T.div,{className:"w-2 h-2 rounded-full bg-primary-500",animate:{y:[0,-6,0],opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0,delay:e*.2}},e))})]})]})})}function YD(){const{user:e}=X(),[t,s]=p.useState(""),[n,a]=p.useState(null),i=O(C.assignments.getUserAssignments,e?{userId:e._id}:"skip"),o=V(C.assignments.submitAssignment);if(!e)return null;if(i===void 0)return r.jsx(d1,{});const l=i.filter(u=>u.status==="pending"),d=i.filter(u=>u.status!=="pending"),c=async u=>{if(t.trim())try{await o({assignmentId:u,userId:e._id,content:t}),a(null),s("")}catch(m){console.error("Failed to submit:",m),alert("Failed to submit assignment")}};return r.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-8 pb-20",children:[r.jsx(nt,{}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6 text-gradient font-display",children:"My Tasks"}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4 text-light-text dark:text-dark-text flex items-center gap-2",children:[r.jsx(Ze,{className:"w-5 h-5 text-amber-500"}),"Pending (",l.length,")"]}),l.length===0?r.jsx("p",{className:"text-light-muted dark:text-dark-muted italic",children:"No pending tasks."}):r.jsx("div",{className:"space-y-4",children:l.map(u=>{var m;return r.jsxs("div",{className:"glass p-6 rounded-xl shadow-sm border border-amber-500/20",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-lg text-light-text dark:text-dark-text mb-1",children:["Instruction from ",u.adminName]}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:['Re: "',(m=u.postContent)==null?void 0:m.substring(0,50),'..."']})]}),r.jsx(H,{variant:"warning",children:"Pending"})]}),r.jsx("div",{className:"bg-light-bg dark:bg-dark-bg p-4 rounded-lg mb-4 text-light-text dark:text-dark-text",children:u.instructions}),n===u._id?r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{value:t,onChange:h=>s(h.target.value),placeholder:"Type your response here...",className:"w-full min-h-[150px] p-4 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(M,{variant:"ghost",onClick:()=>a(null),children:"Cancel"}),r.jsx(M,{variant:"primary",onClick:()=>c(u._id),disabled:!t.trim(),children:"Submit Response"})]})]}):r.jsx(M,{variant:"primary",onClick:()=>a(u._id),children:"Start Task"})]},u._id)})})]}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4 text-light-text dark:text-dark-text flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5 text-primary-500"}),"History"]}),r.jsx("div",{className:"space-y-4",children:d.map(u=>{var m;return r.jsxs("div",{className:"glass p-6 rounded-xl shadow-sm opacity-80 hover:opacity-100 transition-opacity",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-lg text-light-text dark:text-dark-text mb-1",children:["Task from ",u.adminName]}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:['Re: "',(m=u.postContent)==null?void 0:m.substring(0,30),'..."']})]}),r.jsx(H,{variant:u.status==="approved"?"success":u.status==="rejected"?"danger":"default",children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})]}),r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:"Instructions:"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted bg-light-bg dark:bg-dark-bg p-2 rounded",children:u.instructions})]}),r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:"Your Submission:"}),r.jsx("p",{className:"text-sm text-light-text dark:text-dark-text bg-light-bg dark:bg-dark-bg p-3 rounded",children:u.submissionContent})]}),(u.grade||u.feedback)&&r.jsxs("div",{className:`p-4 rounded-lg ${u.status==="approved"?"bg-green-500/10 border border-green-500/20":u.status==="rejected"?"bg-red-500/10 border border-red-500/20":"bg-primary-500/10 border border-primary-500/20"}`,children:[u.grade&&r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Qt,{className:"w-4 h-4"}),r.jsxs("span",{className:"font-bold",children:["Grade: ",u.grade]})]}),u.feedback&&r.jsxs("p",{className:"text-sm italic",children:['"',u.feedback,'"']})]})]},u._id)})})]})]})}function JD(){const{user:e}=X(),t=V(C.users.claimSuperAdmin),[s,n]=p.useState("idle"),[a,i]=p.useState(""),o=async()=>{if(e){n("loading");try{await t({userId:e._id}),n("success"),setTimeout(()=>{window.location.href="/admin"},2e3)}catch(l){n("error"),i(l.message||"Failed to claim super admin.")}}};return e?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(D,{className:"max-w-md w-full bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border",children:r.jsxs(U,{className:"p-8 text-center space-y-6",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/Gemini_Generated_Image_zcvetszcvetszcve%20(1).png",alt:"Baptizo",className:"h-20 w-auto rounded-3xl shadow-2xl"})}),r.jsx("div",{className:"mx-auto w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:r.jsx(qe,{className:"w-6 h-6 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-2",children:"Super Admin Setup"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Initialize the system by claiming the first Super Admin role. This is a one-time setup step."})]}),s==="idle"&&r.jsx(M,{variant:"primary",size:"lg",className:"w-full",onClick:o,children:"Claim Super Admin Role"}),s==="loading"&&r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}),s==="success"&&r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-4 rounded-lg flex flex-col items-center gap-2",children:[r.jsx(Qt,{className:"w-6 h-6"}),r.jsx("p",{className:"font-medium",children:"Success! Redirecting..."})]}),s==="error"&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-lg flex flex-col items-center gap-2",children:[r.jsx(un,{className:"w-6 h-6"}),r.jsx("p",{className:"font-medium",children:a}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>n("idle"),className:"mt-2",children:"Try Again"})]})]})})}):r.jsx("div",{className:"p-8 text-center",children:"Please login first."})}function Ns({label:e,options:t,value:s,onChange:n,placeholder:a="Select an option",className:i,error:o}){const[l,d]=p.useState(!1),c=p.useRef(null),u=t.find(h=>h.value===s);p.useEffect(()=>{function h(x){c.current&&!c.current.contains(x.target)&&d(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const m=h=>{n(h),d(!1)};return r.jsxs("div",{className:Y("w-full relative",i),ref:c,children:[e&&r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:e}),r.jsxs("button",{type:"button",onClick:()=>d(!l),className:Y("w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-all duration-200","bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text",l?"border-primary-500 ring-2 ring-primary-500/20":"border-light-border dark:border-dark-border hover:border-primary-500",o&&"border-red-500"),children:[r.jsxs("span",{className:Y("flex items-center gap-2",!u&&"text-light-muted dark:text-dark-muted"),children:[u==null?void 0:u.icon,(u==null?void 0:u.label)||a]}),r.jsx(Je,{className:Y("w-4 h-4 transition-transform",l&&"rotate-180")})]}),r.jsx(te,{children:l&&r.jsx(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"absolute z-50 w-full mt-2 bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border rounded-lg shadow-xl overflow-hidden max-h-60 overflow-y-auto thin-scrollbar",children:t.map(h=>h.disabled?r.jsx("div",{className:"px-4 py-2 text-xs font-bold text-light-muted dark:text-dark-muted uppercase tracking-wide pointer-events-none",children:h.label},h.value):r.jsxs("button",{onClick:()=>m(h.value),className:Y("w-full flex items-center justify-between px-4 py-3 text-sm transition-colors","hover:bg-primary-50 dark:hover:bg-primary-900/10",s===h.value?"text-primary-600 dark:text-primary-400 font-medium bg-primary-50/50 dark:bg-primary-900/5":"text-light-text dark:text-dark-text"),children:[r.jsxs("span",{className:"flex items-center gap-2",children:[h.icon,h.label]}),s===h.value&&r.jsx(pt,{className:"w-4 h-4"})]},h.value))})}),o&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:o})]})}function XD(){const{user:e}=X(),[t,s]=$x(),n=t.get("tab")||"overview",[a,i]=p.useState(""),[o,l]=p.useState("all"),d=h=>{s({tab:h})},c=O(C.wallets.getAllWallets),u=O(C.wallets.getAllWithdrawals),m=O(C.masterPool.getMasterPool);return c===void 0||u===void 0||m===void 0?r.jsx(zp,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Banking System Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Manage user wallets, withdrawals, and reward distribution"})]}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Se,{className:"w-5 h-5 text-primary-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(c==null?void 0:c.length)||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Active Wallets"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Ze,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(u==null?void 0:u.filter(h=>h.status==="pending").length)||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Pending Withdrawals"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(mn,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(c==null?void 0:c.reduce((h,x)=>h+(x.totalRubies||0),0).toFixed(0))||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total Rubies Distributed"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Ar,{className:"w-5 h-5 text-amber-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(c==null?void 0:c.reduce((h,x)=>h+(x.totalTalents||0),0).toFixed(2))||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total Talents"})]})})]}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{key:"overview",label:"Overview",icon:tl},{key:"withdrawals",label:"Withdrawals",icon:Ar},{key:"wallets",label:"User Wallets",icon:Se},{key:"rewards",label:"Reward Activity",icon:ke}].map(h=>{const x=h.icon,g=n===h.key;return r.jsxs("button",{onClick:()=>d(h.key),className:Y("flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap",g?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text hover:bg-primary-500/10"),children:[r.jsx(x,{className:"w-5 h-5"}),h.label]},h.key)})}),r.jsxs("div",{children:[n==="overview"&&r.jsx(ZD,{wallets:c,withdrawals:u,masterPool:m}),n==="withdrawals"&&r.jsx(eO,{withdrawals:u,statusFilter:o,setStatusFilter:l,user:e}),n==="wallets"&&r.jsx(tO,{wallets:c,searchTerm:a,setSearchTerm:i}),n==="rewards"&&r.jsx(rO,{})]})]})}function ZD({wallets:e,withdrawals:t,masterPool:s}){if(!e||!t||!s)return r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"Loading..."});const n=[{name:"Diamond",icon:"",value:s.diamondDistributed,color:"text-blue-500",bg:"bg-blue-500/10"},{name:"Gold",icon:"",value:s.goldDistributed,color:"text-yellow-500",bg:"bg-yellow-500/10"},{name:"Silver",icon:"",value:s.silverDistributed,color:"text-gray-500",bg:"bg-gray-500/10"},{name:"Bronze",icon:"",value:s.bronzeDistributed,color:"text-orange-500",bg:"bg-orange-500/10"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs(D,{glass:!0,className:"lg:col-span-2",children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center gap-2",children:[r.jsx(mn,{className:"w-5 h-5 text-primary-500"}),"Master Pool Resource Tracking"]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Total Distributed (Engagement)"}),r.jsxs("span",{className:"font-bold text-light-text dark:text-dark-text",children:[s.totalDistributed.toLocaleString()," / ",s.totalInitial.toLocaleString()," Rubies"]})]}),r.jsx("div",{className:"h-4 bg-light-border dark:bg-dark-border rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-500 transition-all duration-1000",style:{width:`${s.totalDistributed/s.totalInitial*100}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mb-1",children:"Total Withdrawn"}),r.jsxs("p",{className:"text-xl font-bold text-green-500",children:["",(s.totalWithdrawn*200).toLocaleString()]}),r.jsxs("p",{className:"text-[10px] text-light-muted dark:text-dark-muted mt-1",children:[s.totalWithdrawn.toLocaleString()," Rubies Paid"]})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mb-1",children:"Remaining in Pool"}),r.jsx("p",{className:"text-xl font-bold text-primary-500",children:s.remaining.toLocaleString()}),r.jsx("p",{className:"text-[10px] text-light-muted dark:text-dark-muted mt-1",children:"Available for distribution"})]})]})]})})]}),r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsx(pe,{children:"Pool Engagement"})}),r.jsx(U,{className:"space-y-4",children:n.map(a=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xl",children:a.icon}),r.jsx("span",{className:"font-semibold text-light-text dark:text-dark-text",children:a.name})]}),r.jsx("span",{className:Y("font-bold",a.color),children:a.value.toFixed(1)})]},a.name))})]})]}),r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsx(pe,{children:"Recent Withdrawal Requests"})}),r.jsx(U,{children:t&&t.length>0?r.jsx("div",{className:"space-y-3",children:t.slice(0,5).map(a=>{var i,o,l;return r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-primary-500/10 flex items-center justify-center shrink-0 border border-primary-500/20",children:(i=a.user)!=null&&i.avatarUrl?r.jsx("img",{src:a.user.avatarUrl,alt:a.user.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"font-bold text-primary-500",children:(((o=a.user)==null?void 0:o.name)||"?")[0]})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-light-text dark:text-dark-text capitalize",children:((l=a.user)==null?void 0:l.name)||"Unknown User"}),r.jsxs("p",{className:"text-[10px] text-light-muted dark:text-dark-muted",children:[a.type.replace("_"," "),"  ",new Date(a.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"text-right flex items-center gap-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-light-text dark:text-dark-text",children:[a.amountRubies," Rubies"]}),r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:["",a.nairaAmount||0]})]}),r.jsx(H,{variant:a.status==="paid"?"success":a.status==="pending"?"warning":"default",children:a.status})]})]},a._id)})}):r.jsx("p",{className:"text-center py-8 text-light-muted dark:text-dark-muted",children:"No withdrawal requests yet"})})]})]})}function eO({withdrawals:e,statusFilter:t,setStatusFilter:s,user:n}){const a=V(C.wallets.approveWithdrawal),i=V(C.wallets.rejectWithdrawal),[o,l]=p.useState({isOpen:!1,type:null,withdrawalId:null,amount:0});if(!e)return r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"Loading withdrawals..."});const d=t==="all"?e:e.filter(m=>m.status===t),c=(m,h,x)=>{l({isOpen:!0,type:m,withdrawalId:h,amount:x})},u=async()=>{if(!(!o.withdrawalId||!o.type))try{o.type==="approve"&&n?await a({withdrawalId:o.withdrawalId,adminId:n._id}):await i({withdrawalId:o.withdrawalId})}catch(m){console.error("Action failed:",m)}finally{l({...o,isOpen:!1})}};return r.jsxs("div",{className:"space-y-4",children:[r.jsx(D,{glass:!0,children:r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(XC,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"}),r.jsx("div",{className:"w-48",children:r.jsx(Ns,{value:t,onChange:m=>s(m),options:[{value:"all",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"paid",label:"Paid"},{value:"rejected",label:"Rejected"}]})}),r.jsxs("span",{className:"text-sm text-light-muted dark:text-dark-muted border-l border-light-border dark:border-dark-border pl-4 ml-2",children:[d.length," request",d.length!==1?"s":""]})]})})}),r.jsx("div",{className:"space-y-3",children:d.length>0?d.map(m=>{var h,x,g,v,w;return r.jsx(D,{glass:!0,children:r.jsx(U,{className:"p-5",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-primary-500/10 flex items-center justify-center shrink-0 border-2 border-primary-500/20 shadow-sm",children:(h=m.user)!=null&&h.avatarUrl?r.jsx("img",{src:m.user.avatarUrl,alt:m.user.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-lg font-bold text-primary-500",children:(((x=m.user)==null?void 0:x.name)||"?")[0]})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-lg text-light-text dark:text-dark-text",children:((g=m.user)==null?void 0:g.name)||"Unknown User"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(H,{variant:m.status==="paid"?"success":m.status==="pending"?"warning":"danger",children:m.status}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted uppercase font-bold tracking-tight",children:m.type==="big_pull"?" Big Pull":" Winner"})]})]})]}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8 text-sm bg-light-bg/30 dark:bg-dark-bg/30 p-4 rounded-2xl border border-light-border dark:border-dark-border mt-3",children:[r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-bold text-[10px] uppercase text-primary-500 block mb-0.5",children:"Contact"}),r.jsx("span",{className:"font-medium text-light-text dark:text-dark-text",children:((v=m.user)==null?void 0:v.email)||"No Email"})]}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-bold text-[10px] uppercase text-primary-500 block mb-0.5",children:"Bank Information"}),r.jsxs("span",{className:"font-semibold text-light-text dark:text-dark-text",children:[m.bankName,"  ",m.accountNumber]})]}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-bold text-[10px] uppercase text-primary-500 block mb-0.5",children:"Asset Summary"}),r.jsxs("span",{className:"font-bold text-emerald-500",children:[m.amountRubies," Rubies"]}),r.jsx("span",{className:"mx-2 text-light-muted",children:"/"}),r.jsxs("span",{className:"font-black text-light-text dark:text-dark-text",children:["",(w=m.nairaAmount)==null?void 0:w.toLocaleString()]})]})]})]}),m.status==="pending"&&r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(M,{onClick:()=>c("approve",m._id,m.amountRubies),variant:"primary",size:"sm",className:"bg-green-500 hover:bg-green-600 border-none shadow-sm shadow-green-500/20",children:[r.jsx(Qt,{className:"w-4 h-4 mr-1.5"}),"Approve"]}),r.jsxs(M,{onClick:()=>c("reject",m._id,m.amountRubies),variant:"outline",size:"sm",className:"text-red-500 border-red-500 hover:bg-red-500/10 hover:text-red-600 hover:border-red-600",children:[r.jsx(ys,{className:"w-4 h-4 mr-1.5"}),"Reject"]})]})]})})},m._id)}):r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-12 text-center",children:[r.jsx(un,{className:"w-12 h-12 text-light-muted dark:text-dark-muted mx-auto mb-3 opacity-50"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:["No ",t!=="all"?t:""," withdrawals found"]})]})})}),r.jsx(xs,{isOpen:o.isOpen,onClose:()=>l({...o,isOpen:!1}),onConfirm:u,title:o.type==="approve"?"Approve Withdrawal":"Reject Withdrawal",description:o.type==="approve"?`Are you sure you want to approve this withdrawal of ${o.amount} Rubies? This will mark it as paid.`:`Are you sure you want to reject this withdrawal of ${o.amount} Rubies? The amount will be refunded to the user's wallet.`,confirmText:o.type==="approve"?"Approve & Pay":"Reject & Refund",variant:o.type==="reject"?"danger":"primary"})]})}function tO({wallets:e,searchTerm:t,setSearchTerm:s}){if(!e)return r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"Loading wallets..."});const n=e.filter(a=>{var i,o;return(((i=a.user)==null?void 0:i.name)||"").toLowerCase().includes(t.toLowerCase())||(((o=a.user)==null?void 0:o.email)||"").toLowerCase().includes(t.toLowerCase())});return r.jsxs("div",{className:"space-y-4",children:[r.jsx(D,{glass:!0,children:r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ft,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:t,onChange:a=>s(a.target.value),className:"flex-1 px-4 py-2 rounded-lg bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-light-text dark:text-dark-text"})]})})}),r.jsx("div",{className:"space-y-3",children:n.length>0?n.map(a=>{var i,o,l,d;return r.jsx(D,{glass:!0,children:r.jsx(U,{className:"p-5",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-primary-500/10 flex items-center justify-center border-2 border-primary-500/20 shadow-md transform hover:scale-105 transition-transform",children:(i=a.user)!=null&&i.avatarUrl?r.jsx("img",{src:a.user.avatarUrl,alt:a.user.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-xl font-bold text-primary-500",children:(((o=a.user)==null?void 0:o.name)||"?")[0]})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-black text-xl text-light-text dark:text-dark-text leading-tight",children:((l=a.user)==null?void 0:l.name)||"Unknown User"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted font-medium",children:((d=a.user)==null?void 0:d.email)||"N/A"})]}),["diamond","gold","silver","bronze"].some(c=>(a[`${c}MonthlyEarned`]??0)>=21.6)&&r.jsx(H,{className:"bg-orange-500 text-white animate-pulse border-none shadow-lg shadow-orange-500/20",children:"CAP ALERT"})]}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:["diamond","gold","silver","bronze"].map(c=>{const u=a[`${c}MonthlyEarned`]??0;return r.jsxs("div",{className:Y("p-3 rounded-xl border transition-colors",u>=21.6?"bg-red-500/10 border-red-500/30":"bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border"),children:[r.jsxs("p",{className:"text-[10px] text-light-muted dark:text-dark-muted uppercase font-bold",children:[c," Monthly"]}),r.jsxs("p",{className:Y("text-lg font-bold",u>=21.6?"text-red-500":"text-light-text dark:text-dark-text"),children:[u.toFixed(1)," / 24"]})]},c)})})]}),r.jsxs("div",{className:"text-right p-4 rounded-2xl bg-primary-500/5 border border-primary-500/10 min-w-[150px]",children:[r.jsx("p",{className:"text-xs text-primary-500 font-bold uppercase mb-1",children:"Total Assets"}),r.jsxs("p",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:[a.totalTalents.toFixed(2)," ",r.jsx("span",{className:"text-sm font-normal text-light-muted",children:"Talents"})]}),r.jsxs("p",{className:"text-sm font-medium text-green-500 mt-1",children:["",(a.actualizedNairaBalance||0).toLocaleString()," Paid"]})]})]})})},a._id)}):r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-12 text-center",children:[r.jsx(ft,{className:"w-12 h-12 text-light-muted dark:text-dark-muted mx-auto mb-3"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No wallets found"})]})})})]})}function rO(){return r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsx(pe,{children:"Fractional Reward Config"})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-blue-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Diamond (Quiz Participation)"}),r.jsx("span",{className:"font-bold",children:"0.1 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-indigo-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Diamond (Quiz Winner Jackpot)"}),r.jsx("span",{className:"font-bold",children:"5.1 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-yellow-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Gold (Comment Interaction)"}),r.jsx("span",{className:"font-bold",children:"0.1 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-gray-400",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Silver (Game Participation)"}),r.jsx("span",{className:"font-bold",children:"0.15 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-orange-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Bronze (React/Like)"}),r.jsx("span",{className:"font-bold",children:"0.05 Rubies"})]})]})})]}),r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsx(pe,{children:"Sustainability Rules"})}),r.jsxs(U,{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-primary-500/10 border border-primary-500/20",children:[r.jsx("h4",{className:"font-bold text-primary-500 mb-1",children:"Monthly Pool Caps"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Each user is limited to earning a maximum of 24 rubies per pool per month to prevent inflation. Diamond, Gold, Silver, and Bronze pools all share this rule."})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20",children:[r.jsx("h4",{className:"font-bold text-amber-600 mb-1",children:"Conversion Logic"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:["100 Rubies = 1 Talent. ",r.jsx("br",{}),"1 Ruby = 200. ",r.jsx("br",{}),"Withdrawals are paid in Naira via physical transfer bank details."]})]})]})]})]})}function sO(){const{user:e}=X(),[t,s]=p.useState("list"),[n,a]=p.useState(null),[i,o]=p.useState(!1),[l,d]=p.useState(null),c=O(C.wordUnderPressure.getAdminPassages,e?{limit:50}:"skip"),u=O(C.wordUnderPressure.getPassageAttempts,n?{passageId:n}:"skip"),m=V(C.wordUnderPressure.createPassage),h=V(C.wordUnderPressure.setPassageActive),x=V(C.wordUnderPressure.determineWinner),g=V(C.wordUnderPressure.awardWinnerManually),v=V(C.wordUnderPressure.deletePassage),[w,f]=p.useState("all"),[b,y]=p.useState({isOpen:!1}),k=u==null?void 0:u.filter(E=>w==="all"?!0:w==="correct"?E.isCorrect:w==="incorrect"?!E.isCorrect:!0),[j,S]=p.useState({textLines:"",structuralQuestion:"",optionA:"",optionB:"",optionC:"",optionD:"",correctOptionId:"a",difficultyLevel:"medium",memoTime:20,recallTime:15}),[P,R]=p.useState({isOpen:!1}),[L,N]=p.useState(null),I=(E,B)=>{d({type:E,message:B}),setTimeout(()=>d(null),5e3)},A=async()=>{if(!(!e||!b.attemptId||!n)){try{(await g({adminId:e._id,attemptId:b.attemptId,passageId:n})).success&&I("success",`Awarded ${b.userName} as the winner!`)}catch(E){I("error",E.message)}y({isOpen:!1})}},W=async()=>{if(e)try{const E=j.textLines.split(`
`).filter(q=>q.trim()!==""),B=[{id:"a",text:j.optionA},{id:"b",text:j.optionB},{id:"c",text:j.optionC},{id:"d",text:j.optionD}];await m({textLines:E,structuralQuestion:j.structuralQuestion,options:B,correctOptionId:j.correctOptionId,difficultyLevel:j.difficultyLevel,memoTime:j.memoTime,recallTime:j.recallTime,adminId:e._id}),o(!1),I("success","Challenge created successfully"),S({textLines:"",structuralQuestion:"",optionA:"",optionB:"",optionC:"",optionD:"",correctOptionId:"a",difficultyLevel:"medium",memoTime:20,recallTime:15})}catch(E){I("error",E.message)}},G=async(E,B)=>{if(e)try{await h({passageId:E,isActive:!B,adminId:e._id}),I("success",`Challenge ${B?"deactivated":"activated"}`)}catch(q){I("error",q.message)}},se=async(E,B)=>{R({isOpen:!0,year:E,month:B})},Q=async()=>{if(!(!e||!P.year||!P.month)){try{const E=await x({year:P.year,month:P.month,adminId:e._id});E.success?I("success",`Winner: ${E.winnerName} (${E.score}ms)`):I("error",E.message||"An error occurred")}catch(E){I("error",E.message)}R({isOpen:!1})}},de=async()=>{if(!(!e||!L))try{await v({passageId:L,adminId:e._id}),I("success","Challenge deleted successfully"),N(null)}catch(E){I("error",E.message)}},z=(E,B)=>{if(!E||!B)return"Legacy Week";const q=B.toString().substring(0,4);return`${B.toString().substring(4,6)}/${q}`};if(t==="responses"&&n){const E=c==null?void 0:c.find(B=>B._id===n);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("button",{onClick:()=>{s("list"),a(null)},className:"flex items-center gap-2 text-primary-500 font-bold hover:underline mb-4",children:[r.jsx(fr,{className:"w-5 h-5"}),"Back to Challenges"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-2",children:[r.jsxs("div",{className:"max-w-2xl",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"User Responses"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mt-1 line-clamp-2 md:line-clamp-none",children:(E==null?void 0:E.structuralQuestion)||"Challenge Details"})]}),r.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-3 text-sm",children:[r.jsx("div",{className:"flex bg-light-card dark:bg-dark-card p-1 rounded-xl border border-light-border dark:border-dark-border overflow-x-auto no-scrollbar",children:[{id:"all",label:"All"},{id:"correct",label:"Correct"},{id:"incorrect",label:"Incorrect"}].map(B=>r.jsx("button",{onClick:()=>f(B.id),className:Y("px-3 sm:px-4 py-1.5 rounded-lg font-bold transition-all whitespace-nowrap",w===B.id?"bg-primary-500 text-white shadow-lg":"text-light-muted hover:text-light-text dark:hover:text-dark-text"),children:B.label},B.id))}),r.jsxs("div",{className:"px-3 py-1.5 rounded-xl bg-primary-500/10 text-primary-500 font-bold border border-primary-500/20 text-center whitespace-nowrap",children:[(k==null?void 0:k.length)||0," Results"]})]})]}),r.jsx("div",{className:"grid gap-4",children:u?(k==null?void 0:k.length)===0?r.jsxs(D,{glass:!0,className:"p-12 text-center text-light-muted",children:[r.jsx(_r,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),"No ",w!=="all"?w:""," responses found for this challenge yet."]}):k==null?void 0:k.map(B=>{var q;return r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:r.jsx(D,{glass:!0,className:"overflow-hidden",children:r.jsxs("div",{className:"p-4 sm:p-5",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 flex-shrink-0 rounded-xl bg-primary-500/10 flex items-center justify-center text-primary-500 font-bold border border-primary-500/20 shadow-inner text-base sm:text-lg",children:B.userName[0]}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"font-bold text-base sm:text-lg flex items-center gap-2 truncate",children:[r.jsx("span",{className:"truncate",children:B.userName}),B.isCorrect?r.jsx(et,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 flex-shrink-0"}):r.jsx(ys,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 flex-shrink-0"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-y-1 gap-x-3 text-[10px] sm:text-xs text-light-muted dark:text-dark-muted mt-0.5",children:[r.jsxs("span",{className:"flex items-center gap-1 font-mono",children:[r.jsx(Ze,{className:"w-3 h-3"})," ",B.responseTime,"ms"]}),r.jsx("span",{className:"hidden xs:inline text-light-border/50",children:""}),r.jsxs("span",{className:"font-bold",children:["Option ",((q=B.selectedOptionId)==null?void 0:q.toUpperCase())||"N/A"]}),B.retryCount>0&&r.jsxs("span",{className:"text-amber-500 bg-amber-500/10 px-1.5 py-0.5 rounded text-[10px]",children:[B.retryCount," Retries"]})]})]})]}),r.jsxs("div",{className:"flex flex-row sm:flex-col items-center sm:items-end justify-between sm:justify-start w-full sm:w-auto pt-3 sm:pt-0 border-t sm:border-t-0 border-light-border/30 dark:border-white/5",children:[r.jsx("div",{className:"text-[10px] sm:text-xs text-light-muted",children:gD(B.endTime||B.startTime,"MMM dd, HH:mm")}),r.jsx("div",{className:"sm:mt-2",children:B.explanationSubmitTime?r.jsx(H,{variant:"primary",className:"text-[9px] sm:text-[10px]",children:"Explained"}):r.jsx(H,{variant:"default",className:"text-[9px] sm:text-[10px]",children:"No Logic"})})]})]}),r.jsxs("div",{className:Y("p-4 rounded-xl border transition-colors",B.explanation?"bg-primary-500/5 border-primary-500/10":"bg-light-muted/5 border-light-muted/10 opacity-60"),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[10px] font-bold uppercase tracking-widest text-primary-500/70",children:[r.jsx(_r,{className:"w-3 h-3"})," logic & explanation"]}),r.jsx("p",{className:Y("text-sm leading-relaxed",B.explanation?"text-light-text dark:text-dark-text":"italic text-light-muted"),children:B.explanation||"No explanation provided by user."})]}),B.isCorrect&&!(E!=null&&E.winnerId)&&r.jsx("div",{className:"mt-4 pt-4 border-t border-light-border/20 dark:border-white/5 flex justify-end",children:r.jsxs(M,{size:"sm",onClick:()=>y({isOpen:!0,attemptId:B._id,userName:B.userName}),className:"bg-emerald-500 hover:bg-emerald-600 text-white gap-2 shadow-lg shadow-emerald-500/20 w-full sm:w-auto",children:[r.jsx(ke,{className:"w-4 h-4"}),"Select as Winner"]})}),(E==null?void 0:E.winnerId)===B.userId&&r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsxs(H,{variant:"success",className:"gap-2 py-1.5 px-4",children:[r.jsx(ke,{className:"w-3.5 h-3.5"}),"Monthly Winner"]})})]})})},B._id)}):r.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(B=>r.jsx("div",{className:"h-32 bg-light-card dark:bg-dark-card rounded-xl"},B))})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsx(xs,{isOpen:P.isOpen,onClose:()=>R({isOpen:!1}),onConfirm:Q,title:"Select Monthly Winner",description:`Are you sure you want to select and award the winner for ${P.month}/${P.year}? This will distribute 11.5 Rubies to the best performer.`,confirmText:"Select Winner"}),r.jsx(xs,{isOpen:b.isOpen,onClose:()=>y({isOpen:!1}),onConfirm:A,title:"Confirm Monthly Winner",description:`Are you sure you want to award ${b.userName} as the monthly winner? They will receive 11.5 Rubies and this challenge will be marked as completed.`,confirmText:"Award Rubies",variant:"primary"}),r.jsx(xs,{isOpen:!!L,onClose:()=>N(null),onConfirm:de,title:"Delete Challenge",description:"Are you sure you want to permanently delete this memory challenge and all its user attempts? This action cannot be undone.",confirmText:"Delete Challenge",variant:"danger"}),r.jsx(te,{children:l&&r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:Y("fixed top-4 right-4 z-50 px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 border backdrop-blur-md",l.type==="success"?"bg-emerald-500 text-white border-emerald-400":"bg-red-500 text-white border-red-400"),children:[l.type==="success"?r.jsx(et,{className:"w-5 h-5"}):r.jsx(ys,{className:"w-5 h-5"}),r.jsx("p",{className:"font-bold",children:l.message})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold font-display text-gradient",children:"Diamond Challenges"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Configure monthly memory challenges and pick winners."})]}),r.jsxs(M,{onClick:()=>o(!i),variant:i?"outline":"primary",className:"w-full sm:w-auto",children:[i?r.jsx(Ne,{className:"mr-2 h-4 w-4"}):r.jsx(tc,{className:"mr-2 h-4 w-4"}),i?"Cancel":"Create New Challenge"]})]}),r.jsx(te,{children:i&&r.jsx(T.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:r.jsx(D,{className:"border-t-4 border-t-primary-500",children:r.jsxs(U,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold",children:[r.jsx(_t,{className:"w-5 h-5 text-primary-500"}),"Challenge Configuration"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block text-light-text dark:text-dark-text",children:"Passage Text (One line per line)"}),r.jsx("textarea",{className:"w-full p-4 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none transition-all font-serif italic",rows:5,value:j.textLines,onChange:E=>S({...j,textLines:E.target.value}),placeholder:"Line 1\\nLine 2..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block text-light-text dark:text-dark-text",children:"Structural Question"}),r.jsx("input",{className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none transition-all",value:j.structuralQuestion,onChange:E=>S({...j,structuralQuestion:E.target.value}),placeholder:"What follows the first comma?"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["A","B","C","D"].map(E=>r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold mb-1 block opacity-50 uppercase tracking-tighter",children:["Option ",E]}),r.jsx("input",{className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none transition-all",value:j[`option${E}`],onChange:B=>S({...j,[`option${E}`]:B.target.value}),placeholder:`Enter value for ${E}`})]},E))}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[r.jsx(Ns,{label:"Correct Answer",value:j.correctOptionId,onChange:E=>S({...j,correctOptionId:E}),options:[{value:"a",label:"Option A"},{value:"b",label:"Option B"},{value:"c",label:"Option C"},{value:"d",label:"Option D"}]}),r.jsx(Ns,{label:"Difficulty",value:j.difficultyLevel,onChange:E=>S({...j,difficultyLevel:E}),options:[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Memo Time (s)"}),r.jsx("input",{type:"number",className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",value:j.memoTime,onChange:E=>S({...j,memoTime:parseInt(E.target.value)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Recall Time (s)"}),r.jsx("input",{type:"number",className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",value:j.recallTime,onChange:E=>S({...j,recallTime:parseInt(E.target.value)})})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx(M,{onClick:W,size:"lg",className:"w-full sm:w-auto px-10",children:"Save & Activate Challenge"})})]})]})})})}),r.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:c?c.length===0?r.jsx("div",{className:"col-span-full py-20 text-center text-light-muted",children:"No challenges created yet."}):c.map(E=>r.jsx(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:r.jsx(D,{glass:!0,className:Y("h-full border-l-4 transition-all duration-300",E.isActive?"border-l-primary-500 shadow-lg shadow-primary-500/10":"border-l-light-muted/20"),children:r.jsx(U,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:Y("px-2.5 py-1 rounded-full text-[10px] font-black tracking-widest uppercase",E.isActive?"bg-primary-500 text-white":"bg-light-muted/10 text-light-muted"),children:E.isActive?"Active":"Archived"}),r.jsx("button",{onClick:B=>{B.stopPropagation(),N(E._id)},className:"p-1 text-light-muted hover:text-red-500 hover:bg-red-500/10 rounded transition-colors",title:"Delete Challenge",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 6h18"}),r.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),r.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),r.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),r.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]})})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("span",{className:"px-2.5 py-1 rounded-full bg-light-muted/5 text-light-muted text-[10px] font-mono",children:E.month?z(E.year,E.month):`Week ${E.week}`}),r.jsx("span",{className:Y("px-2.5 py-1 rounded-full text-[10px] font-black uppercase",E.difficultyLevel==="hard"?"bg-red-500/10 text-red-500":E.difficultyLevel==="medium"?"bg-amber-500/10 text-amber-500":"bg-emerald-500/10 text-emerald-500"),children:E.difficultyLevel})]}),E.winnerId&&r.jsx(ke,{className:"w-5 h-5 text-amber-500"})]}),r.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2",children:E.structuralQuestion}),r.jsxs("p",{className:"text-sm text-light-muted mb-6 line-clamp-2 italic opacity-60",children:['"',E.textLines[0],'..."']}),r.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-3",children:[r.jsxs(M,{size:"sm",variant:E.isActive?"danger":"primary",onClick:()=>G(E._id,E.isActive),className:"flex-1",children:[E.isActive?r.jsx(a3,{className:"w-4 h-4 mr-2"}):r.jsx(tc,{className:"w-4 h-4 mr-2"}),E.isActive?"Deactivate":"Activate"]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{a(E._id),s("responses")},className:"flex-1",children:[r.jsx($t,{className:"w-4 h-4 mr-2"}),"Responses"]}),E.month&&!E.winnerId&&r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>se(E.year,E.month),className:"col-span-2 text-amber-500 border-amber-500/20 hover:bg-amber-500/10 mt-1",children:[r.jsx(ke,{className:"w-4 h-4 mr-2"}),"Select Winner"]}),E.winnerId&&r.jsx("div",{className:"col-span-2 text-center py-2 bg-amber-500/10 rounded-lg border border-amber-500/20 mt-1 text-xs font-bold text-amber-500",children:"Challenge Completed  Winner Awarded"})]})]})})})},E._id)):[1,2,3,4].map(E=>r.jsx("div",{className:"h-48 rounded-2xl bg-light-card dark:bg-dark-card animate-pulse"},E))})]})}function nO(){const{user:e}=X(),[t,s]=p.useState("pending"),n=O(C.questions.getAllQuestions,e!=null&&e._id?{adminId:e._id,status:t}:"skip"),a=V(C.questions.adminAnswerQuestion),i=V(C.questions.deleteQuestion),o=V(C.questions.makeQuestionPublic),[l,d]=p.useState(null),[c,u]=p.useState(""),[m,h]=p.useState(!1),[x,g]=p.useState(!1);if(n===void 0)return r.jsx(zp,{});const v=async b=>{if(b.preventDefault(),!(!e||!l||!c.trim())){g(!0);try{await a({adminId:e._id,questionId:l._id,answerText:c.trim(),makePublic:m}),d(null),u(""),h(!1)}catch(y){console.error("Failed to answer:",y),alert("Failed to submit answer.")}finally{g(!1)}}},w=async b=>{if(!(!e||!confirm("Are you sure you want to delete this question?")))try{await i({adminId:e._id,questionId:b})}catch{alert("Failed to delete question")}},f=async b=>{if(e)try{await o({adminId:e._id,questionId:b})}catch{alert("Failed to make public")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Questions Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Answer user questions and manage Q&A visibility"})]}),r.jsxs("div",{className:"flex gap-4 border-b border-light-border dark:border-dark-border overflow-x-auto",children:[r.jsxs("button",{onClick:()=>s("pending"),className:`pb-3 px-4 font-semibold text-sm transition-colors border-b-2 whitespace-nowrap ${t==="pending"?"border-primary-500 text-primary-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Pending (",(n==null?void 0:n.filter(b=>!b.isAnswered).length)||0,")"]}),r.jsx("button",{onClick:()=>s("answered"),className:`pb-3 px-4 font-semibold text-sm transition-colors border-b-2 whitespace-nowrap ${t==="answered"?"border-primary-500 text-primary-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Answered"})]}),r.jsxs("div",{className:"grid gap-4",children:[n==null?void 0:n.map(b=>r.jsx(D,{glass:!0,className:"border border-light-border dark:border-dark-border",children:r.jsx(U,{className:"p-4 md:p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[r.jsx(H,{variant:"outline",className:"text-xs",children:ct(b.createdAt,{addSuffix:!0})}),r.jsxs("span",{className:"text-xs text-light-muted",children:["by ",b.userName]}),b.isPublic?r.jsx(Qx,{className:"w-3 h-3 text-green-500"}):r.jsx(Nt,{className:"w-3 h-3 text-gray-400"})]}),r.jsx("h3",{className:"font-semibold text-base md:text-lg text-light-text dark:text-dark-text leading-snug",children:b.questionText}),r.jsxs("div",{className:"text-xs md:text-sm text-light-muted bg-gray-50 dark:bg-white/5 p-3 rounded-lg inline-block w-full",children:[r.jsx("span",{className:"font-bold block mb-1",children:"Context:"}),' "',b.postContent,'"']}),b.isAnswered&&r.jsxs("div",{className:"mt-4 p-4 bg-primary-50 dark:bg-primary-900/10 rounded-lg border border-primary-100 dark:border-primary-900/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Qt,{className:"w-4 h-4 text-primary-500 shrink-0"}),r.jsxs("span",{className:"text-xs font-bold text-primary-700 dark:text-primary-400",children:["Answered by ",b.adminName||"Admin"]})]}),r.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:b.answerText})]})]}),r.jsxs("div",{className:"flex md:flex-col gap-2 w-full md:w-auto pt-2 md:pt-0 border-t md:border-t-0 border-light-border/50 dark:border-dark-border/50",children:[b.isAnswered?!b.isPublic&&r.jsx(M,{size:"sm",variant:"outline",onClick:()=>f(b._id),className:"border-green-500 text-green-600 hover:bg-green-50 flex-1 md:flex-none",children:"Make Public"}):r.jsx(M,{size:"sm",onClick:()=>{d(b),u("")},className:"bg-primary-500 hover:bg-primary-600 text-white flex-1 md:flex-none",children:"Answer"}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>w(b._id),className:"text-red-500 hover:text-red-600 hover:bg-red-50 flex-none",children:r.jsx(Vr,{className:"w-4 h-4"})})]})]})})},b._id)),(n==null?void 0:n.length)===0&&r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"No questions found in this category."})]}),r.jsx(te,{children:l&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-[#1A1A1A] rounded-2xl shadow-xl max-w-lg w-full p-6 relative border border-gray-100 dark:border-gray-800",children:[r.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/5",children:r.jsx(Ne,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Answer Question"}),r.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:"Question:"}),r.jsx("p",{className:"text-lg text-gray-900 dark:text-white mt-1",children:l.questionText})]}),r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Your Answer"}),r.jsx("textarea",{value:c,onChange:b=>u(b.target.value),className:"w-full p-3 rounded-xl bg-gray-50 dark:bg-[#222] border-transparent focus:border-primary-500 focus:ring-0 min-h-[150px]",placeholder:"Type your answer here...",required:!0})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"makePublic",checked:m,onChange:b=>h(b.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("label",{htmlFor:"makePublic",className:"text-sm text-gray-700 dark:text-gray-300",children:"Make this question and answer Public immediately"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:()=>d(null),children:"Cancel"}),r.jsx(M,{type:"submit",disabled:x,children:x?"Submitting...":"Submit Answer"})]})]})]})})})]})}function aO(){const{user:e}=X(),[t,s]=p.useState(""),n=O(C.users.getAllUsers,e!=null&&e._id?{adminId:e._id}:"skip"),a=O(C.posts.getPosts,{category:"Ancient Culture",limit:50}),i=O(C.tags.getAllActiveTags,e!=null&&e._id?{adminId:e._id}:"skip"),o=V(C.tags.tagUserForQuestions),l=V(C.tags.tagUserForPrayer),d=V(C.tags.revokeTag),[c,u]=p.useState(null),[m,h]=p.useState("question"),[x,g]=p.useState(""),[v,w]=p.useState(!1);if(n===void 0||i===void 0)return r.jsx(zp,{});const f=n==null?void 0:n.filter(k=>k.name.toLowerCase().includes(t.toLowerCase())||k.email.toLowerCase().includes(t.toLowerCase())),b=async()=>{if(!(!e||!c)){w(!0);try{if(m==="question"){if(!x){alert("Please select a teaching post"),w(!1);return}await o({adminId:e._id,userId:c._id,postId:x})}else await l({adminId:e._id,userId:c._id});alert("Tag granted successfully!"),u(null),g("")}catch(k){alert(k.message||"Failed to grant tag")}finally{w(!1)}}},y=async k=>{if(!(!e||!confirm("Revoke this tag?")))try{await d({adminId:e._id,tagId:k})}catch{alert("Failed to revoke tag")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"User Tag Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Grant or revoke specialized posting permissions (Questions, Prayers)"})]}),r.jsx(D,{glass:!0,className:"border border-light-border dark:border-dark-border",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("h3",{className:"font-bold text-lg mb-4",children:["Active Tags (",(i==null?void 0:i.length)||0,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(i==null?void 0:i.length)===0?r.jsx("p",{className:"text-sm text-light-muted",children:"No active tags."}):i==null?void 0:i.map(k=>r.jsxs(H,{variant:"outline",className:"flex items-center gap-2 pr-1",children:[r.jsx("span",{className:k.tagType==="question"?"text-purple-500":"text-orange-500",children:k.tagType==="question"?"Question":"Prayer"}),r.jsx("span",{className:"text-light-text dark:text-dark-text border-l border-gray-200 dark:border-gray-700 pl-2",children:k.userName}),r.jsx("button",{onClick:()=>y(k._id),className:"p-1 hover:bg-red-100 rounded-full text-red-500 transition-colors ml-1",children:r.jsx(Ne,{className:"w-3 h-3"})})]},k._id))})]})}),r.jsxs("div",{className:"relative",children:[r.jsx(ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-light-muted"}),r.jsx("input",{type:"text",value:t,onChange:k=>s(k.target.value),placeholder:"Search users to tag...",className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white dark:bg-[#1A1A1A] border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 focus:outline-none transition-all"})]}),r.jsx("div",{className:"grid gap-4",children:f==null?void 0:f.slice(0,10).map(k=>r.jsx(D,{glass:!0,className:"border border-light-border dark:border-dark-border",children:r.jsxs(U,{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:k.avatarUrl?r.jsx("img",{src:k.avatarUrl,alt:k.name,className:"w-full h-full object-cover"}):r.jsx(St,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-light-text dark:text-dark-text",children:k.name}),r.jsx("p",{className:"text-xs text-light-muted",children:k.role})]})]}),r.jsxs(M,{size:"sm",onClick:()=>u(k),children:[r.jsx(qw,{className:"w-4 h-4 mr-2"})," Grant Tag"]})]})},k._id))}),r.jsx(te,{children:c&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-[#1A1A1A] rounded-2xl shadow-xl max-w-md w-full p-6 relative border border-gray-100 dark:border-gray-800",children:[r.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/5",children:r.jsx(Ne,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Grant Permission"}),r.jsxs("p",{className:"text-sm text-light-muted mb-6",children:["Allow ",r.jsx("span",{className:"font-bold text-primary-500",children:c.name})," to post special content."]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tag Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>h("question"),className:`p-3 rounded-lg border text-sm font-medium transition-all ${m==="question"?"border-primary-500 bg-primary-50 text-primary-700 dark:bg-primary-900/20 dark:text-primary-400":"border-gray-200 dark:border-gray-700"}`,children:"Question Tag"}),r.jsx("button",{onClick:()=>h("prayer"),className:`p-3 rounded-lg border text-sm font-medium transition-all ${m==="prayer"?"border-orange-500 bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"border-gray-200 dark:border-gray-700"}`,children:"Prayer Tag"})]})]}),m==="question"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Teaching (Context)"}),r.jsxs("select",{value:x,onChange:k=>g(k.target.value),className:"w-full p-3 rounded-lg bg-gray-50 dark:bg-[#222] border border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:outline-none text-sm",children:[r.jsx("option",{value:"",children:"Select a teaching..."}),a==null?void 0:a.map(k=>r.jsxs("option",{value:k._id,children:[k.content.substring(0,40),"..."]},k._id))]}),r.jsx("p",{className:"text-xs text-light-muted mt-1",children:"user can only ask questions on this specific post."})]}),r.jsx(M,{className:"w-full mt-4",onClick:b,disabled:v,children:v?"Granting...":"Grant Permission"})]})]})})})]})}function iO(){const e=O(C.masterPool.getMasterPool);if(e===void 0)return r.jsx(ID,{});const t=s=>new Intl.NumberFormat("en-US").format(s);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Master Pool Overview"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Track total reward distribution and financial health"})]}),r.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[r.jsx(D,{glass:!0,className:"border-l-4 border-l-blue-500",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-light-muted",children:"Total Distributed"}),r.jsx("h3",{className:"text-2xl font-bold text-light-text dark:text-dark-text mt-1",children:t((e==null?void 0:e.totalDistributed)||0)})]}),r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg text-blue-600",children:r.jsx(Bw,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Total rubies ever earned by users"})]})}),r.jsx(D,{glass:!0,className:"border-l-4 border-l-green-500",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-light-muted",children:"Total Withdrawn"}),r.jsx("h3",{className:"text-2xl font-bold text-light-text dark:text-dark-text mt-1",children:t((e==null?void 0:e.totalWithdrawn)||0)})]}),r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg text-green-600",children:r.jsx(qC,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Rubies converted to cash"})]})}),r.jsx(D,{glass:!0,className:"border-l-4 border-l-purple-500",children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-light-muted",children:"Initial Pool Size"}),r.jsx("h3",{className:"text-2xl font-bold text-light-text dark:text-dark-text mt-1",children:t((e==null?void 0:e.totalInitial)||1e6)})]}),r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg text-purple-600",children:r.jsx($w,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Starting liquidity"})]})})]}),r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text mt-8 mb-4",children:"Distribution by Pool"}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-cyan-100 text-cyan-600 rounded-lg",children:r.jsx(Fn,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Diamond"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.diamondDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Quizzes & Monthly"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 text-yellow-600 rounded-lg",children:r.jsx(Fn,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Gold"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.goldDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Top Comments"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-slate-100 text-slate-600 rounded-lg",children:r.jsx(Fn,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Silver"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.silverDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Weekly Games"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 text-orange-600 rounded-lg",children:r.jsx(Fn,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Bronze"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.bronzeDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Reactions & Activity"})]})})]})]})}const oO=[{value:200,label:"200",description:"Default rate  1 Ruby = 200"},{value:100,label:"100",description:"1 Ruby = 100"},{value:50,label:"50",description:"1 Ruby = 50"},{value:20,label:"20",description:"1 Ruby = 20"},{value:10,label:"10",description:"1 Ruby = 10"}];function lO(){const{user:e}=X(),[t,s]=p.useState(!1),[n,a]=p.useState(!1),i=O(C.settings.getUserPostCreationEnabled),o=O(C.settings.getCommentsEnabled),l=O(C.settings.getQuestionsOnPostsEnabled),d=O(C.settings.getChatEnabled),c=O(C.settings.getChatImagesEnabledForMembers),u=O(C.settings.getActiveRubyRate),m=V(C.settings.toggleUserPostCreation),h=V(C.settings.toggleCommentsEnabled),x=V(C.settings.toggleQuestionsOnPostsEnabled),g=V(C.settings.toggleChatEnabled),v=V(C.settings.toggleChatImagesEnabledForMembers),w=V(C.settings.setRubyRate),f=async(y,k,j)=>{if(!(!e||k===void 0)){s(!0);try{await y({adminId:e._id,enabled:!k})}catch(S){console.error(`Failed to update ${j}:`,S),alert("Failed to update setting. Please try again.")}finally{s(!1)}}},b=async y=>{if(e){s(!0);try{await w({adminId:e._id,rate:y}),a(!0),setTimeout(()=>a(!1),2500)}catch(k){alert(k.message||"Failed to update rate.")}finally{s(!1)}}};return e?r.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10",children:r.jsx(Kw,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-light-text dark:text-dark-text font-display",children:"System Settings"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Manage global permissions and system configurations"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass rounded-2xl p-6 shadow-lg border border-amber-500/20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Gx,{className:"w-5 h-5 text-amber-500"}),r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:"Ruby  Naira Exchange Rate"})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-5",children:"Set how much Naira () each Ruby is worth. This affects what users see on the Banking page in real time. Ruby balances are never changed  only the display value updates."}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-5",children:[r.jsx("span",{className:"text-xs uppercase tracking-widest font-semibold text-light-muted dark:text-dark-muted",children:"Current active rate:"}),r.jsxs("span",{className:"px-3 py-1 rounded-full bg-amber-500/15 text-amber-600 dark:text-amber-400 font-bold text-sm",children:["1 Ruby = ",u??""]}),r.jsx(te,{children:n&&r.jsxs(T.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex items-center gap-1 text-green-600 dark:text-green-400 text-xs font-semibold",children:[r.jsx(et,{className:"w-4 h-4"})," Updated!"]},"ok")})]}),r.jsx("div",{className:"grid grid-cols-5 gap-2 sm:gap-3",children:oO.map(y=>{const k=u===y.value;return r.jsxs("button",{id:`rate-btn-${y.value}`,onClick:()=>b(y.value),disabled:t||k,className:`relative flex flex-col items-center justify-center aspect-square rounded-xl border-2 transition-all duration-200 min-w-0
                                            ${k?"border-amber-500 bg-amber-500/15 shadow-lg shadow-amber-500/20 scale-105":"border-light-border dark:border-dark-border hover:border-amber-400 hover:bg-amber-500/5"} disabled:cursor-not-allowed`,children:[k&&r.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:r.jsx(et,{className:"w-3.5 h-3.5 text-white"})}),r.jsx("span",{className:`text-sm sm:text-base font-display font-bold leading-tight text-center ${k?"text-amber-600 dark:text-amber-400":"text-light-text dark:text-dark-text"}`,children:y.label}),r.jsx("span",{className:"text-[9px] sm:text-[10px] text-light-muted dark:text-dark-muted mt-0.5 text-center leading-tight",children:"per Ruby"})]},y.value)})}),r.jsx("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[r.jsx("strong",{children:"Example at current rate:"})," ","24 Rubies (minimum withdrawal) = ",(24*(u??200)).toLocaleString(),"."," ","5 Rubies (winner window) = ",(5*(u??200)).toLocaleString(),"."]})})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"glass rounded-2xl p-6 shadow-lg space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(Se,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:"Global Controls"})]}),[{label:"Allow Users to Create Posts",desc:"Enable regular users to create posts. If disabled, only admins and tagged users can post.",value:i,mutation:m,key:"postCreation",icon:null},{label:"Enable Comments Globally",desc:"Allow users to comment on posts. Turning this off hides the comment section on all posts.",value:o,mutation:h,key:"comments",icon:null},{label:'Enable "Ask Question" on Posts',desc:"Allow users to ask questions directly on teaching posts.",value:l,mutation:x,key:"questionsOnPosts",icon:null},{label:"Enable Chat System",desc:"Allow users to chat with each other and admins.",value:d,mutation:g,key:"chat",icon:r.jsx(ut,{className:"w-5 h-5 text-primary-500"})},{label:"Allow Members to Send Images",desc:"Enable non-admin users to send images in direct and group chats.",value:c,mutation:v,key:"chatImages",icon:r.jsx(Wr,{className:"w-5 h-5 text-primary-500"})}].map(y=>r.jsx("div",{className:"border border-light-border dark:border-dark-border rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[y.icon,r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text",children:y.label})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:y.desc})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("button",{id:`toggle-${y.key}`,onClick:()=>f(y.mutation,y.value,y.key),disabled:t,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${y.value?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${y.value?"translate-x-7":"translate-x-1"}`})}),r.jsx("span",{className:"text-xs font-medium text-light-muted dark:text-dark-muted",children:y.value?"ON":"OFF"})]})]})},y.key))]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass rounded-2xl p-6 shadow-lg border-l-4 border-primary-500",children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text mb-2",children:" How it works"}),r.jsx("ul",{className:"space-y-2 text-sm text-light-muted dark:text-dark-muted",children:[["Ruby Rate","Changing the rate only affects Naira display values. All Ruby balances and Talent conversions stay the same."],["Global ON","Every user (even new signups) can immediately create question and prayer posts."],["Global OFF","Users need to be individually tagged by you before they can create posts."],["Admins","Always have permission to create posts, regardless of settings."],["Chat System","Controls whether users can initiate chats. Admins can always chat."]].map(([y,k])=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-primary-500 mt-1",children:""}),r.jsxs("span",{children:[r.jsxs("strong",{children:[y,":"]})," ",k]})]},y))})]})]})]})}):null}const Go=Qr.forwardRef(({className:e,label:t,error:s,...n},a)=>r.jsxs("div",{className:"w-full",children:[t&&r.jsx("label",{className:"block text-sm font-medium mb-1.5 text-light-text dark:text-dark-text",children:t}),r.jsx("textarea",{ref:a,className:Y("w-full px-4 py-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text outline-none transition-all duration-200","focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:opacity-50 disabled:cursor-not-allowed","resize-y min-h-[100px]",s&&"border-red-500 focus:ring-red-500",e),...n}),s&&r.jsx("p",{className:"mt-1 text-sm text-red-500 font-medium animate-in slide-in-from-top-1",children:s})]}));Go.displayName="Textarea";function dO(){const{user:e}=X(),t=O(C.announcements.getAllAnnouncements,e?{adminId:e._id}:"skip"),s=V(C.announcements.createAnnouncement),n=V(C.announcements.updateAnnouncement),a=V(C.announcements.deleteAnnouncement),[i,o]=p.useState(!1),[l,d]=p.useState(null),[c,u]=p.useState(1),[m,h]=p.useState(null),[x,g]=p.useState({isOpen:!1,id:null}),v=(A,W)=>{h({type:A,message:W}),setTimeout(()=>h(null),5e3)},[w,f]=p.useState({title:"",description:"",imageUrl:"",category:"General",isActive:!0}),b=3,y=()=>{f({title:"",description:"",imageUrl:"",category:"General",isActive:!0}),u(1)},k=()=>{d(null),y(),o(!0)},j=A=>{d(A._id);const W=["General","Ancient Culture","Wisdom of The Now","Ads","Product","Event","Update"].includes(A.category)?A.category:"General";f({title:A.title,description:A.description,imageUrl:A.imageUrl,category:W,isActive:A.isActive}),u(1),o(!0)},S=()=>u(A=>Math.min(A+1,b)),P=()=>u(A=>Math.max(A-1,1)),R=async()=>{if(e)try{l?(await n({adminId:e._id,announcementId:l,...w,category:w.category}),console.log("Announcement updated")):(await s({adminId:e._id,...w,category:w.category}),console.log("Announcement created")),o(!1),y()}catch(A){console.error(A),alert(l?"Failed to update":"Failed to create")}},L=async()=>{if(!(!x.id||!e))try{await a({adminId:e._id,announcementId:x.id}),v("success","Announcement deleted"),g({isOpen:!1,id:null})}catch{v("error","Failed to delete")}},N=async A=>{if(e)try{await n({adminId:e._id,announcementId:A._id,isActive:!A.isActive}),v("success",A.isActive?"Deactivated":"Activated")}catch{v("error","Failed to toggle status")}};if(t===void 0)return r.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[r.jsx("div",{className:"flex justify-between items-center flex-wrap gap-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2 animate-pulse"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded animate-pulse"})]})}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(A=>r.jsx(jD,{},A))})]});const I=()=>{switch(c){case 1:return r.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Title"}),r.jsx(be,{placeholder:"Enter announcement title",value:w.title,onChange:A=>f({...w,title:A.target.value}),autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),r.jsx(Ns,{value:w.category,onChange:A=>f({...w,category:A}),options:[{value:"General",label:"General"},{value:"Ancient Culture",label:"Ancient Culture"},{value:"Wisdom of The Now",label:"Wisdom of The Now"},{value:"Ads",label:"Ads"},{value:"Product",label:"Product"},{value:"Event",label:"Event"},{value:"Update",label:"Update"}]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:w.isActive,onChange:A=>f({...w,isActive:A.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsxs("label",{htmlFor:"isActive",className:"text-sm font-medium cursor-pointer flex-1",children:["Active immediately",r.jsx("span",{className:"block text-xs text-light-muted dark:text-dark-muted font-normal",children:"If unchecked, the announcement will be hidden from users until you activate it."})]})]})]});case 2:return r.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Description"}),r.jsx(Go,{placeholder:"Enter full description...",value:w.description,onChange:A=>f({...w,description:A.target.value}),className:"min-h-[200px] text-base leading-relaxed"}),r.jsxs("p",{className:"text-xs text-right text-light-muted mt-1",children:[w.description.length," characters"]})]})});case 3:return r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Cover Image"}),r.jsx(l1,{onUploadComplete:A=>f(W=>({...W,imageUrl:A})),currentMedia:w.imageUrl?{url:w.imageUrl,type:"image"}:void 0,allowVideo:!1})]}),w.title&&r.jsxs("div",{className:"p-4 rounded-xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsx("h4",{className:"font-bold text-sm text-light-muted mb-2 uppercase tracking-wider",children:"Preview Summary"}),r.jsxs("div",{className:"flex gap-3",children:[w.imageUrl&&r.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100 dark:bg-gray-800",children:r.jsx("img",{src:w.imageUrl,alt:"Preview",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold truncate",children:w.title}),r.jsx(H,{variant:"outline",className:"text-[10px] mt-1",children:w.category})]})]})]})]});default:return null}};return r.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[r.jsx(xs,{isOpen:x.isOpen,onClose:()=>g({isOpen:!1,id:null}),onConfirm:L,title:"Delete Announcement",description:"Are you sure you want to delete this announcement? This action cannot be undone.",variant:"danger",confirmText:"Delete"}),r.jsx(te,{children:m&&r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:Y("fixed top-4 right-4 z-[100] px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 border backdrop-blur-md",m.type==="success"?"bg-emerald-500 text-white border-emerald-400":"bg-red-500 text-white border-red-400"),children:[m.type==="success"?r.jsx(et,{className:"w-5 h-5"}):r.jsx(ys,{className:"w-5 h-5"}),r.jsx("p",{className:"font-bold",children:m.message})]})}),r.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold font-display text-gradient",children:"Announcements"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Manage community announcements and ads"})]}),r.jsxs(M,{onClick:k,className:"w-full md:w-auto",children:[r.jsx(oi,{className:"w-4 h-4 mr-2"})," New Announcement"]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.map(A=>r.jsxs(D,{glass:!0,className:"relative group overflow-hidden flex flex-col h-full",children:[r.jsxs("div",{className:"aspect-video bg-gray-100 dark:bg-gray-800 relative overflow-hidden",children:[A.imageUrl?r.jsx("img",{src:A.imageUrl,alt:A.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:r.jsx(Wr,{className:"w-10 h-10"})}),r.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[r.jsx(H,{variant:A.isActive?"success":"secondary",children:A.isActive?"Active":"Hidden"}),r.jsx(H,{variant:"outline",className:"bg-black/50 backdrop-blur-sm text-white border-none",children:A.category})]})]}),r.jsxs(U,{className:"flex-1 flex flex-col p-4",children:[r.jsx("h3",{className:"font-bold text-lg mb-2 line-clamp-1",children:A.title}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted line-clamp-3 mb-4 flex-1",children:A.description}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{size:"sm",variant:"outline",onClick:()=>N(A),title:A.isActive?"Hide":"Show",children:A.isActive?r.jsx(el,{className:"w-4 h-4"}):r.jsx(Et,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>j(A),children:r.jsx(ec,{className:"w-4 h-4"})})]}),r.jsx(M,{size:"sm",variant:"danger",onClick:()=>g({isOpen:!0,id:A._id}),children:r.jsx(Vr,{className:"w-4 h-4"})})]})]})]},A._id)),t.length===0&&r.jsxs("div",{className:"col-span-full text-center py-12 bg-light-card/30 dark:bg-dark-card/30 rounded-2xl border border-dashed border-light-border dark:border-dark-border",children:[r.jsx(Fo,{className:"w-12 h-12 text-light-muted mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-light-muted",children:"No announcements yet"}),r.jsx(M,{variant:"outline",className:"mt-4",onClick:k,children:"Create First Announcement"})]})]}),r.jsx(gt,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Announcement":"Create Announcement",className:"max-w-lg",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"flex items-center justify-between mb-6 px-1",children:[1,2,3].map(A=>r.jsxs("div",{className:"flex flex-col items-center gap-1 w-1/3 relative z-10",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${c>=A?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-muted"}`,children:c>A?r.jsx(pt,{className:"w-4 h-4"}):A}),r.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold mt-1 ${c>=A?"text-primary-500":"text-light-muted"}`,children:A===1?"Details":A===2?"Content":"Media"}),A!==3&&r.jsx("div",{className:`absolute top-4 left-1/2 w-full h-0.5 -z-10 ${c>A?"bg-primary-500":"bg-light-border dark:bg-dark-border"}`})]},A))}),r.jsx("div",{className:"flex-1 overflow-y-auto px-1 py-2 min-h-[300px]",children:I()}),r.jsxs("div",{className:"flex items-center justify-between pt-6 mt-2 border-t border-light-border dark:border-dark-border",children:[r.jsx(M,{variant:"outline",onClick:c===1?()=>o(!1):P,className:"w-[100px]",children:c===1?"Cancel":r.jsxs(r.Fragment,{children:[r.jsx(ta,{className:"w-4 h-4 mr-1"})," Back"]})}),r.jsx("div",{className:"flex gap-2",children:c<b?r.jsxs(M,{onClick:S,className:"w-[100px]",children:["Next ",r.jsx(Oo,{className:"w-4 h-4 ml-1"})]}):r.jsxs(M,{onClick:R,className:"w-[120px] bg-green-500 hover:bg-green-600 border-none shadow-lg shadow-green-500/20",children:[l?"Update":"Create"," ",r.jsx(pt,{className:"w-4 h-4 ml-2"})]})})]})]})})]})}function cO(){const{user:e}=X(),t=O(C.polls.getAdminPolls,{limit:20}),s=V(C.polls.createPoll),n=V(C.polls.closePoll),a=V(C.polls.deletePoll),[i,o]=p.useState(""),[l,d]=p.useState(["","","",""]),[c,u]=p.useState(0),[m,h]=p.useState(48),[x,g]=p.useState(!1),[v,w]=p.useState(!1),[f,b]=p.useState(null),[y,k]=p.useState(null),[j,S]=p.useState(null),P=(I,A)=>{const W=[...l];W[I]=A,d(W)},R=async I=>{if(I.preventDefault(),S(null),!(!e||x)){if(!i.trim()){S("Question is required");return}if(l.some(A=>!A.trim())){S("All options are required");return}g(!0);try{await s({question:i,options:l,correctOptionIndex:c,durationHours:m,adminId:e._id}),w(!0),setTimeout(()=>w(!1),5e3),o(""),d(["","","",""]),u(0)}catch(A){console.error(A),S(A.message||"Failed to create poll")}finally{g(!1)}}},L=async()=>{if(!(!f||!e))try{await n({pollId:f,adminId:e._id}),b(null)}catch(I){S(I.message||"Failed to close poll")}},N=async()=>{if(!(!y||!e))try{await a({pollId:y,adminId:e._id}),k(null),w(!0),setTimeout(()=>w(!1),3e3)}catch(I){S(I.message||"Failed to delete poll")}};return t===void 0?r.jsx("div",{className:"p-8",children:"Loading polls..."}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Weekly Poll Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Create and manage wisdom polls for the Silver Pool game."})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsx(pe,{children:"Create New Poll"})}),r.jsx(U,{children:r.jsxs("form",{onSubmit:R,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Question"}),r.jsx(be,{value:i,onChange:I=>o(I.target.value),placeholder:"Enter wisdom question...",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium",children:"Options"}),l.map((I,A)=>r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center cursor-pointer transition-colors ${c===A?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-primary-500"}`,onClick:()=>u(A),title:"Mark as correct answer",children:c===A&&r.jsx(pt,{className:"w-4 h-4"})}),r.jsx(be,{value:I,onChange:W=>P(A,W.target.value),placeholder:`Option ${A+1}`,required:!0})]},A)),r.jsx("p",{className:"text-xs text-light-muted",children:"Click the circle to mark the correct answer."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Duration (Hours)"}),r.jsx(be,{type:"number",value:m,onChange:I=>h(Number(I.target.value)),min:1,max:168})]}),r.jsxs(te,{children:[v&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-green-500/10 border border-green-500/20 rounded-2xl flex items-center gap-3 text-green-600 dark:text-green-400 mb-4",children:[r.jsx(et,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:"Poll created and broadcasted successfully!"})]}),j&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl flex items-center gap-3 text-red-600 dark:text-red-400 mb-4",children:[r.jsx(un,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:j})]})]}),r.jsx(M,{type:"submit",isLoading:x,className:"w-full h-12 rounded-2xl font-bold tracking-wide",children:"Create Poll"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Recent Polls"}),t.length===0?r.jsx("p",{className:"text-light-muted",children:"No polls found."}):t.map(I=>{var W,G;const A=I.status==="active"&&Date.now()<I.expiresAt;return r.jsx(D,{className:"border border-light-border dark:border-dark-border group overflow-hidden",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase transition-colors ${A?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"bg-gray-500/10 text-gray-500 border border-gray-500/20"}`,children:A?"Active":"Closed"}),r.jsx("button",{onClick:()=>k(I._id),className:"p-1.5 text-light-muted hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete Poll",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 6h18"}),r.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),r.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),r.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),r.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]})})]}),r.jsx("span",{className:"text-[10px] text-light-muted font-mono uppercase tracking-widest",children:new Date(I.createdAt).toLocaleDateString()})]}),r.jsx("h4",{className:"font-bold mb-2 line-clamp-2 text-sm leading-relaxed",children:I.question}),r.jsxs("div",{className:"flex justify-between items-center text-sm text-light-muted mb-2",children:[r.jsxs("span",{className:"text-xs font-medium",children:[I.totalVotes," Members Voted"]}),A&&r.jsx(M,{size:"sm",variant:"danger",className:"h-8 rounded-xl text-[10px] font-bold tracking-widest",onClick:()=>b(I._id),children:"CLOSE POLL"})]}),I.totalVotes>0&&r.jsxs("div",{className:"flex gap-4 text-[10px] pt-3 mt-1 border-t border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-600 dark:text-emerald-400 font-bold uppercase tracking-wider",children:[r.jsx(pt,{className:"w-3 h-3"}),((W=I.options.find(se=>se.id===I.correctOptionId))==null?void 0:W.voteCount)||0," Correct"]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-red-500 font-bold uppercase tracking-wider",children:[r.jsx(un,{className:"w-3 h-3"}),I.totalVotes-(((G=I.options.find(se=>se.id===I.correctOptionId))==null?void 0:G.voteCount)||0)," Incorrect"]})]})]})},I._id)})]})]}),r.jsx(xs,{isOpen:!!f,onClose:()=>b(null),onConfirm:L,title:"Close Poll",description:"Are you sure you want to end this poll early? No more votes will be accepted.",confirmText:"Close Poll",variant:"danger"}),r.jsx(xs,{isOpen:!!y,onClose:()=>k(null),onConfirm:N,title:"Delete Poll",description:"Are you sure you want to permanently delete this poll and all its associated votes? This action cannot be undone.",confirmText:"Delete Permanently",variant:"danger"})]})}function uO({isEmbedded:e=!1}){const{user:t,isLoading:s}=X(),n=O(C.contacts.getContacts,t?{adminId:t._id}:"skip"),a=V(C.contacts.markContactAsRead),i=V(C.contacts.deleteContact),[o,l]=p.useState(null);if(s)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl",children:[r.jsx(nr,{}),r.jsx(ia,{count:3})]})});if(!t)return r.jsx(Me,{to:"/login",replace:!0});if(t.role!=="admin"&&t.role!=="super_admin")return r.jsx(Me,{to:"/feed",replace:!0});const d=async u=>{try{await a({adminId:t._id,contactId:u})}catch(m){console.error("Failed to mark as read:",m)}},c=async u=>{if(confirm("Are you sure you want to delete this message?")){l(u);try{await i({adminId:t._id,contactId:u})}catch(m){console.error("Failed to delete contact:",m)}finally{l(null)}}};return r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[!e&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary-600 dark:text-primary-400 mb-2",children:"Contact Messages"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[(n==null?void 0:n.length)||0," total messages"]})]}),r.jsx(Kr,{className:"w-12 h-12 text-primary-500"})]}),n?r.jsxs("div",{className:"space-y-4",children:[e&&r.jsxs("p",{className:"text-light-muted dark:text-dark-muted mb-4 font-bold text-sm",children:[n.length||0," total messages"]}),n.length===0?r.jsxs("div",{className:"glass rounded-xl p-12 text-center",children:[r.jsx(Kr,{className:"w-16 h-16 mx-auto mb-4 text-light-muted dark:text-dark-muted opacity-50"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted text-lg",children:"No contact messages yet"})]}):r.jsx("div",{className:"space-y-4",children:n.map(u=>r.jsxs(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`glass rounded-xl p-6 border ${u.read?"border-light-border dark:border-dark-border":"border-primary-500/50 bg-primary-50/30 dark:bg-primary-900/10"}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:u.subject}),!u.read&&r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary-500 text-white text-xs font-bold",children:"NEW"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-semibold",children:u.name}),r.jsx("span",{children:""}),r.jsx("a",{href:`mailto:${u.email}`,className:"hover:text-primary-500 transition-colors",children:u.email}),r.jsx("span",{children:""}),r.jsx("span",{children:ct(u.createdAt,{addSuffix:!0})})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>d(u._id),disabled:u.read,className:`p-2 rounded-lg transition-all ${u.read?"text-light-muted dark:text-dark-muted cursor-not-allowed":"text-primary-500 hover:bg-primary-100 dark:hover:bg-primary-900/20"}`,title:u.read?"Already read":"Mark as read",children:u.read?r.jsx(el,{className:"w-5 h-5"}):r.jsx(Et,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>c(u._id),disabled:o===u._id,className:"p-2 rounded-lg text-red-500 hover:bg-red-100 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",title:"Delete message",children:r.jsx(Vr,{className:"w-5 h-5"})})]})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text whitespace-pre-wrap",children:u.message})]},u._id))})]}):r.jsx(ia,{count:3})]})}const Wb=({src:e,alt:t})=>{const[s,n]=p.useState(!1);return r.jsxs("div",{className:"relative rounded-lg overflow-hidden mb-2 bg-gray-100 dark:bg-gray-700 min-h-[150px] min-w-[200px] flex items-center justify-center",children:[!s&&r.jsx("div",{className:"absolute inset-0 animate-pulse bg-gray-200 dark:bg-gray-800 flex items-center justify-center",children:r.jsx(Wr,{className:"w-8 h-8 text-gray-400 opacity-50"})}),r.jsx("img",{src:e,alt:t,className:`max-w-full max-h-[300px] object-cover transition-opacity duration-300 ${s?"opacity-100":"opacity-0"}`,onLoad:()=>n(!0)})]})};function c1({isEmbedded:e=!1}){var Zp,ef,tf,rf,sf;const{user:t}=X(),s=le(),[n,a]=p.useState("direct"),[i,o]=p.useState(null),[l,d]=p.useState(""),[c,u]=p.useState(""),[m,h]=p.useState(""),[x,g]=p.useState(!1),[v,w]=p.useState(null),[f,b]=p.useState(null),[y,k]=p.useState(null),[j,S]=p.useState(null),[P,R]=p.useState(""),[L,N]=p.useState(null),[I,A]=p.useState(null),[W,G]=p.useState(null),[se,Q]=p.useState(null),[de,z]=p.useState(null),[E,B]=p.useState(!1),q=O(C.chat.getConversations,t?{userId:t._id}:"skip"),ce=O(C.chat.getMessages,i&&t?{conversationId:i,userId:t._id}:"skip"),He=O(C.users.getChatContacts,t?{userId:t._id}:"skip"),ee=O(C.settings.getGlobalChatWallpaper),me=O(C.settings.getChatImagesEnabledForMembers),[fe,yt]=p.useState(!1),[it,Ft]=p.useState(null),[ot,Yt]=p.useState(null),[jn,hl]=p.useState(!1),[Nn,wi]=p.useState(null),[xl,ki]=p.useState(null),pl=p.useRef(null),ji=p.useRef(null),ge=O(C.chat.getCommunityGroup),or=O(C.chat.getGroupMessages,ge?{groupId:ge._id}:"skip"),fl=V(C.chat.sendMessage),gl=V(C.chat.markAsRead),bl=V(C.chat.editMessage),yl=V(C.chat.deleteMessage),vl=V(C.chat.toggleReaction),wl=V(C.users.updateChatWallpaper),Ni=V(C.chat.getOrCreateCommunityGroup),kl=V(C.chat.sendGroupMessage),jl=V(C.chat.editGroupMessage),Nl=V(C.chat.deleteGroupMessage),ye=V(C.chat.toggleGroupReaction),Er=V(C.chat.toggleGroupLock),qp=V(C.chat.recordGroupMessageView),[Sn,Sl]=p.useState(null),Si=O(C.chat.getGroupMessageViews,Sn?{messageId:Sn}:"skip"),Ps=p.useRef(null),As=p.useRef(null),Ci=p.useRef(null),Ti=p.useRef(null),Hp=p.useRef(null),[Cl,Tl]=p.useState(null),iu=O(C.chat.getReactionDetails,Cl?{messageId:Cl.id,isGroup:Cl.isGroup}:"skip"),[Gp,x1]=p.useState(0);p.useEffect(()=>{const _=window.visualViewport;if(!_)return;const J=()=>{const ve=Math.max(0,window.innerHeight-_.height-_.offsetTop);x1(ve),ve>0&&setTimeout(()=>{var oe,tt;(oe=Ps.current)==null||oe.scrollTo({top:Ps.current.scrollHeight,behavior:"smooth"}),(tt=As.current)==null||tt.scrollTo({top:As.current.scrollHeight,behavior:"smooth"})},100)};return _.addEventListener("resize",J),_.addEventListener("scroll",J),()=>{_.removeEventListener("resize",J),_.removeEventListener("scroll",J)}},[]);const ha=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin";p.useEffect(()=>{t&&ge===null&&Ni({userId:t._id}).catch(console.error)},[ge,t]),p.useEffect(()=>{Ps.current&&(Ps.current.scrollTop=Ps.current.scrollHeight)},[ce,i,v]),p.useEffect(()=>{As.current&&(As.current.scrollTop=As.current.scrollHeight)},[or,n]),p.useEffect(()=>{if(!or||!t||n!=="group")return;const _=new IntersectionObserver(ve=>{ve.forEach(oe=>{if(oe.isIntersecting){const tt=oe.target.dataset.msgid,Be=oe.target.dataset.senderid;tt&&Be&&Be!==t._id&&qp({messageId:tt,userId:t._id}).catch(()=>{})}})},{threshold:.5});return document.querySelectorAll("[data-groupmsg]").forEach(ve=>_.observe(ve)),()=>_.disconnect()},[or,t,n]),p.useEffect(()=>{Ci.current&&(Ci.current.style.height="auto",Ci.current.style.height=`${Math.min(Ci.current.scrollHeight,120)}px`)},[l]),p.useEffect(()=>{Ti.current&&(Ti.current.style.height="auto",Ti.current.style.height=`${Math.min(Ti.current.scrollHeight,120)}px`)},[P]);const p1=V(C.chat.markGroupAsRead);p.useEffect(()=>{i&&t&&gl({conversationId:i,userId:t._id})},[i,ce,t]),p.useEffect(()=>{n==="group"&&t&&p1({userId:t._id})},[n,or,t]);const f1=async _=>{var ve;const J=(ve=_.target.files)==null?void 0:ve[0];if(!(!J||!t)){B(!0);try{const oe=await Ka(J,"announcements");await wl({userId:t._id,wallpaperUrl:oe})}catch{alert("Failed to update wallpaper")}finally{B(!1)}}},Qp=async _=>{if(!(!l.trim()&&!it||!i||!t))try{if(f)await bl({messageId:f._id,userId:t._id,newText:l}),b(null);else{const oe=q==null?void 0:q.find(Mr=>Mr._id===i),tt=(oe==null?void 0:oe.participantOne)===t._id?oe.participantTwo:oe==null?void 0:oe.participantOne;if(!tt)return;let Be;it&&(yt(!0),Be=await Ka(it,"chat")),await fl({senderId:t._id,recipientId:tt,text:l,imageUrl:Be,replyToId:v==null?void 0:v._id}),w(null),Ft(null),Yt(null)}d("")}catch(oe){console.error("Failed to send message:",oe),alert(oe.message||"Failed to send message")}finally{yt(!1)}},g1=_=>{var ve;const J=(ve=_.target.files)==null?void 0:ve[0];J&&(Ft(J),Yt(URL.createObjectURL(J)))},b1=_=>{var ve;const J=(ve=_.target.files)==null?void 0:ve[0];J&&(wi(J),ki(URL.createObjectURL(J)))},y1=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),Qp())},v1=async _=>{if(t)try{const J=await fl({senderId:t._id,recipientId:_,text:"Hi!"});o(J),g(!1),h("")}catch(J){console.error("Failed to start conversation:",J),alert(J.message||"Failed to start conversation")}},Kp=async _=>{if(!(!P.trim()&&!Nn||!ge||!t))try{if(I)await jl({messageId:I._id,userId:t._id,newText:P}),A(null);else{let oe;Nn&&(hl(!0),oe=await Ka(Nn,"chat")),await kl({groupId:ge._id,senderId:t._id,text:P,imageUrl:oe,replyToId:L==null?void 0:L._id}),N(null),wi(null),ki(null)}R("")}catch(oe){console.error("Failed to send group message:",oe),alert(oe.message||"Failed to send group message")}finally{hl(!1)}},w1=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),Kp())},k1=async()=>{!ge||!t||!ha||await Er({groupId:ge._id,adminId:t._id,locked:!ge.isLocked})},_l=p.useRef(null),Yp=p.useRef(!1),Jp=(_,J=!1)=>{Yp.current=!1,_l.current=setTimeout(()=>{Yp.current=!0,J?Q(_):S(_)},500)},Xp=()=>{_l.current&&(clearTimeout(_l.current),_l.current=null)},j1=()=>{x?g(!1):i&&o(null)},xa=q==null?void 0:q.filter(_=>{var J;return(J=_.otherUser)==null?void 0:J.name.toLowerCase().includes(c.toLowerCase())}),pa=He==null?void 0:He.filter(_=>_._id!==(t==null?void 0:t._id)&&_.name.toLowerCase().includes(m.toLowerCase())),Cn=q==null?void 0:q.find(_=>_._id===i);if(!t)return s("/login"),null;const N1=_=>{var tt;const J=_.senderId===t._id;if(_.isDeleted)return r.jsx("div",{className:`flex ${J?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:"px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-xs text-gray-500 italic flex items-center gap-2",children:[r.jsx(Vr,{className:"w-3 h-3"})," This message was deleted"]})},_._id);const oe=_.senderRole==="super_admin"?"text-amber-500":_.senderRole==="admin"?"text-primary-500":"text-gray-500";return r.jsxs("div",{className:`group relative flex ${J?"justify-end":"justify-start"} mb-3`,onMouseEnter:()=>G(_._id),onMouseLeave:()=>G(null),"data-groupmsg":"true","data-msgid":_._id,"data-senderid":_.senderId,children:[!J&&r.jsx("div",{className:"flex-shrink-0 mr-2 mt-1",children:r.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white text-xs font-bold overflow-hidden",children:_.senderAvatar?r.jsx("img",{src:_.senderAvatar,alt:_.senderName,className:"w-full h-full object-cover"}):(tt=_.senderName)==null?void 0:tt[0]})}),r.jsxs(T.div,{drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(Be,Mr)=>{Mr.offset.x<-50&&N(_)},whileDrag:{scale:1.02},className:"relative max-w-[78%] md:max-w-[65%]",onTouchStart:()=>Jp(_,!0),onTouchEnd:Xp,children:[W===_._id&&r.jsx("div",{className:`absolute top-0 ${J?"-left-8":"-right-8"} z-20`,children:r.jsx("button",{className:"p-1 rounded-full bg-gray-200 dark:bg-gray-700 shadow-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",onClick:Be=>{Be.stopPropagation(),Q(_)},children:r.jsx(Je,{className:"w-3 h-3 text-gray-600 dark:text-gray-300"})})}),r.jsxs("div",{className:`flex flex-col ${J?"items-end":"items-start"}`,children:[!J&&r.jsxs("span",{className:`text-[10px] font-bold mb-0.5 flex items-center gap-1 ${oe}`,children:[_.senderRole==="super_admin"&&r.jsx(zw,{className:"w-3 h-3"}),_.senderRole==="admin"&&r.jsx(qe,{className:"w-3 h-3"}),_.senderName]}),_.replyTo&&r.jsxs("div",{className:`mb-1 text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border-l-2 border-primary-500 w-full opacity-80 ${_.replyTo.isDeleted?"italic":""}`,children:[r.jsx("span",{className:"font-bold block text-primary-500",children:_.replyTo.senderName}),_.replyTo.isDeleted?"Message deleted":_.replyTo.text.length>50?_.replyTo.text.substring(0,50)+"...":_.replyTo.text]}),r.jsxs("div",{className:`px-4 py-2 rounded-2xl shadow-sm ${J?"bg-primary-500 text-white rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-none"}`,style:{wordBreak:"break-word",overflowWrap:"break-word"},children:[_.imageUrl&&r.jsx(Wb,{src:_.imageUrl,alt:"Chat attachment"}),_.text&&r.jsx("div",{className:"text-sm whitespace-pre-wrap",children:_.text}),r.jsxs("div",{className:`text-[10px] mt-1 flex items-center justify-end gap-1.5 ${J?"text-white/70":"text-gray-400"}`,children:[_.isEdited&&r.jsx("span",{className:"opacity-70",children:"(edited)"}),r.jsx("span",{className:"opacity-70",children:ct(_.createdAt,{addSuffix:!1})}),J&&r.jsxs("button",{onClick:Be=>{Be.stopPropagation(),Sl(Sn===_._id?null:_._id)},className:"flex items-center gap-0.5 opacity-75 hover:opacity-100 transition-opacity ml-0.5",title:"See who viewed this",children:[r.jsx(Et,{className:"w-3 h-3"}),_._viewCount!=null&&_._viewCount>0&&r.jsx("span",{className:"text-[9px] font-semibold",children:_._viewCount})]})]})]}),_.reactions&&_.reactions.length>0&&r.jsx(T.div,{initial:{scale:0},animate:{scale:1},className:`flex -mt-2 ${J?"mr-2":"ml-2"} z-10 cursor-pointer`,children:_.reactions.map((Be,Mr)=>r.jsx("button",{onClick:ou=>{ou.stopPropagation(),Tl({id:_._id,isGroup:!0})},className:"text-xs bg-white dark:bg-gray-800 rounded-full shadow border border-gray-100 dark:border-gray-700 w-5 h-5 flex items-center justify-center hover:scale-110 transition-transform",children:Be.emoji},Mr))})]})]})]},_._id)},S1=Sn?r.jsx(te,{children:r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-end sm:items-center justify-center",onClick:()=>Sl(null),children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{y:60,opacity:0},animate:{y:0,opacity:1},exit:{y:60,opacity:0},transition:{type:"spring",damping:22},className:"relative z-10 w-full max-w-sm mx-4 mb-4 sm:mb-0 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden",onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100 dark:border-gray-800",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[r.jsx(Et,{className:"w-4 h-4 text-primary-500"}),r.jsx("h2",{className:"text-sm font-bold",children:"Seen by"}),Si&&r.jsx("span",{className:"text-xs bg-primary-100 dark:bg-primary-900/40 text-primary-600 dark:text-primary-400 rounded-full px-2 py-0.5 font-semibold",children:Si.length})]}),r.jsx("button",{onClick:()=>Sl(null),className:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r.jsx(Ne,{className:"w-4 h-4 text-gray-500"})})]}),r.jsx("div",{className:"max-h-72 overflow-y-auto custom-thin-scrollbar",children:Si?Si.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400 dark:text-gray-600",children:[r.jsx(Et,{className:"w-10 h-10 mb-2 opacity-30"}),r.jsx("p",{className:"text-sm",children:"No views yet"})]}):r.jsx("ul",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:Si.map((_,J)=>{var ve;return r.jsxs(T.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:J*.04},className:"flex items-center gap-3 px-5 py-3",children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0",children:_.avatarUrl?r.jsx("img",{src:_.avatarUrl,alt:_.name,className:"w-full h-full object-cover"}):(ve=_.name)==null?void 0:ve[0]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 truncate",children:_.name}),r.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:["Seen ",ct(_.seenAt,{addSuffix:!0})]})]}),r.jsx(Et,{className:"w-3.5 h-3.5 text-primary-400 flex-shrink-0"})]},_.userId)})}):r.jsx("div",{className:"flex items-center justify-center h-20",children:r.jsx(jr,{className:"w-5 h-5 animate-spin text-primary-400"})})})]})]},"seenby-backdrop")}):null,C1=Cl?r.jsx(te,{children:r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[300] flex items-end sm:items-center justify-center p-4",onClick:()=>Tl(null),children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"relative z-10 w-full max-w-sm bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden",onClick:_=>_.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-800",children:[r.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100 italic",children:"Reactions"}),r.jsx("button",{onClick:()=>Tl(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:r.jsx(Ne,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-thin-scrollbar",children:iu?iu.length===0?r.jsx("div",{className:"py-12 text-center text-gray-500 italic",children:"No reactions yet"}):r.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:iu.map((_,J)=>r.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[r.jsxs("div",{className:"relative",children:[r.jsx(mt,{src:_.avatarUrl,alt:_.name,className:"w-10 h-10 border-2 border-primary-500/20"}),r.jsx("span",{className:"absolute -bottom-1 -right-1 bg-white dark:bg-gray-800 rounded-full shadow-sm text-xs w-5 h-5 flex items-center justify-center border border-gray-100 dark:border-gray-700",children:_.emoji})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-gray-900 dark:text-gray-100",children:_.name}),r.jsx("p",{className:"text-[10px] text-primary-500 font-medium",children:ct(_.createdAt,{addSuffix:!0})})]})]},J))}):r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(jr,{className:"w-8 h-8 animate-spin text-primary-500"})})})]})]},"reaction-backdrop")}):null;return r.jsxs("div",{className:`${e?"relative w-full h-full":"fixed inset-0 z-[100]"} bg-light-bg dark:bg-dark-bg flex flex-col`,style:{paddingBottom:Gp},children:[S1,C1,r.jsx(te,{children:de&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 z-[1000] backdrop-blur-sm",onClick:()=>z(null)}),r.jsxs(T.div,{initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},transition:{type:"spring",stiffness:350,damping:28},className:"fixed inset-0 m-auto w-[88vw] h-[88vw] max-w-[420px] max-h-[420px] z-[1001] bg-white dark:bg-gray-900 rounded-3xl overflow-hidden shadow-2xl",children:[r.jsxs("div",{className:"absolute top-3 left-4 right-4 flex justify-between items-center z-10",children:[r.jsx("span",{className:"font-bold text-base text-white drop-shadow-lg truncate",children:de.name}),r.jsx("button",{onClick:()=>z(null),className:"p-2 bg-black/25 hover:bg-black/50 rounded-full backdrop-blur-md transition-all",children:r.jsx(Ne,{className:"w-5 h-5 text-white"})})]}),de.url?r.jsx("img",{src:de.url,alt:de.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-primary-500 text-white text-9xl font-bold",children:(Zp=de.name)==null?void 0:Zp[0]})]})]})}),r.jsx("input",{type:"file",ref:Hp,onChange:f1,className:"hidden",accept:"image/*"}),r.jsx("style",{children:`
                .custom-thin-scrollbar::-webkit-scrollbar { width: 4px; }
                .custom-thin-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-thin-scrollbar::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 10px; }
                .dark .custom-thin-scrollbar::-webkit-scrollbar-thumb { background: #4b5563; }
                /* Prevent body scroll bounce when mobile keyboard opens */
                body { overscroll-behavior: none; }
                /* Hide scrollbar on textareas */
                .scrollbar-none::-webkit-scrollbar { display: none; }
                .scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }
            `}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:`${i&&n==="direct"?"hidden md:flex":"flex"} md:w-[380px] flex-col border-r border-light-border dark:border-dark-border bg-white dark:bg-dark-card flex-shrink-0 w-full relative`,children:[r.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border bg-white dark:bg-dark-card flex-shrink-0",children:[r.jsx("div",{className:"flex items-center justify-between mb-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>s("/feed"),className:"md:hidden p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 -ml-2",children:r.jsx(fr,{className:"w-5 h-5"})}),r.jsx("h1",{className:"text-xl md:text-2xl font-bold text-light-text dark:text-dark-text",children:"Messages"})]})}),r.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl",children:(()=>{const _=(q==null?void 0:q.reduce((ve,oe)=>ve+(oe.unreadCount||0),0))||0;let J=0;if(ge&&or&&t){const ve=t.lastViewedCommunityChatAt??0,oe=or.reduce((Be,Mr)=>{var nf;const ou=((nf=Mr.reactions)==null?void 0:nf.filter(af=>af.userId!==t._id&&af.createdAt>ve).length)||0;return Be+ou},0);J=or.filter(Be=>Be.senderId!==t._id&&Be.createdAt>ve).length+oe}return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>a("direct"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-bold transition-all relative ${n==="direct"?"bg-white dark:bg-gray-700 text-primary-500 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[r.jsx(ut,{className:"w-4 h-4"})," Direct",_>0&&r.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-primary-500 text-white text-[9px] flex items-center justify-center rounded-full border border-white dark:border-gray-800 font-bold shadow-sm animate-bounce",children:_>9?"9+":_})]}),r.jsxs("button",{onClick:()=>{a("group"),!ge&&t&&Ni({userId:t._id})},className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-bold transition-all relative ${n==="group"?"bg-white dark:bg-gray-700 text-primary-500 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[r.jsx(Se,{className:"w-4 h-4"})," Community",J>0&&r.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-green-500 text-white text-[9px] flex items-center justify-center rounded-full border border-white dark:border-gray-800 font-bold shadow-sm animate-bounce",children:J>9?"9+":J}),(ge==null?void 0:ge.isLocked)&&r.jsx(Nt,{className:"w-3 h-3 text-amber-500"})]})]})})()})]}),n==="direct"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 border-b border-light-border dark:border-dark-border flex-shrink-0 bg-white dark:bg-dark-card",children:r.jsxs("div",{className:"relative",children:[r.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search conversations...",value:c,onChange:_=>u(_.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 border border-transparent text-sm focus:ring-2 focus:ring-primary-500 transition-all"})]})}),x&&r.jsxs("div",{className:"absolute inset-x-0 top-0 bottom-[60px] z-20 bg-white dark:bg-dark-card flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex-shrink-0 bg-white dark:bg-dark-card",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(fr,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-lg font-bold",children:"New Message"})]}),!ha&&r.jsxs("p",{className:"text-xs text-gray-500 mb-3 bg-gray-50 dark:bg-gray-800 px-3 py-2 rounded-lg",children:[" You can message ",r.jsx("strong",{children:"admins"})," and ",r.jsx("strong",{children:"members you follow"}),"."]}),r.jsxs("div",{className:"relative",children:[r.jsx(ft,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search contacts...",value:m,onChange:_=>h(_.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 border border-transparent text-sm focus:ring-2 focus:ring-primary-500 transition-all",autoFocus:!0})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-thin-scrollbar",children:He?(pa==null?void 0:pa.length)===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center text-gray-500 text-sm",children:[r.jsx($t,{className:"w-12 h-12 mb-3 text-gray-300"}),r.jsx("p",{children:"No contacts found."}),!ha&&r.jsx("p",{className:"text-xs mt-2",children:"Follow other members to chat with them."})]}):pa==null?void 0:pa.map(_=>r.jsxs("div",{onClick:()=>v1(_._id),className:"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors border-b border-light-border/50 dark:border-dark-border/50",children:[r.jsx("div",{onClick:J=>{J.stopPropagation(),z({url:_.avatarUrl,name:_.name})},children:r.jsx(mt,{src:_.avatarUrl,alt:_.name,className:"w-12 h-12 cursor-pointer"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:_.name}),(_.role==="admin"||_.role==="super_admin")&&r.jsx("span",{className:"text-[9px] font-bold px-1.5 py-0.5 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-600 uppercase",children:_.role==="super_admin"?"Super Admin":"Admin"})]}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:_.email})]})]},_._id)):r.jsx("div",{className:"p-4",children:r.jsx($b,{count:8})})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-thin-scrollbar",children:q?(xa==null?void 0:xa.length)===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[r.jsx($t,{className:"w-16 h-16 text-gray-300 dark:text-gray-700 mb-4"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"No conversations yet"}),r.jsx("button",{onClick:()=>g(!0),className:"mt-4 px-4 py-2 bg-primary-500 text-white rounded-xl text-sm font-semibold hover:bg-primary-600 transition-colors",children:"Start a conversation"})]}):xa==null?void 0:xa.map(_=>{var J,ve,oe;return r.jsxs("div",{onClick:()=>o(_._id),className:`flex items-center gap-3 p-4 cursor-pointer transition-colors border-b border-light-border/50 dark:border-dark-border/50 ${i===_._id?"bg-primary-50 dark:bg-primary-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsx("div",{onClick:tt=>{var Be,Mr;tt.stopPropagation(),z({url:(Be=_.otherUser)==null?void 0:Be.avatarUrl,name:((Mr=_.otherUser)==null?void 0:Mr.name)||"User"})},children:r.jsx(mt,{src:(J=_.otherUser)==null?void 0:J.avatarUrl,alt:((ve=_.otherUser)==null?void 0:ve.name)||"User",className:"w-12 h-12 cursor-pointer"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:(oe=_.otherUser)==null?void 0:oe.name}),r.jsx("span",{className:"text-[10px] text-gray-500 ml-2 flex-shrink-0",children:ct(_.updatedAt,{addSuffix:!1})})]}),r.jsxs("p",{className:`text-xs truncate ${(_.unreadCount||0)>0?"font-bold text-gray-900 dark:text-gray-100":"text-gray-500"}`,children:[_.lastMessageSenderId===(t==null?void 0:t._id)?"You: ":"",_.lastMessageText||"Start a conversation"]})]}),(_.unreadCount||0)>0&&r.jsx("div",{className:"min-w-[20px] h-5 px-1.5 bg-primary-500 rounded-full flex items-center justify-center text-[10px] text-white font-bold animate-pulse",children:_.unreadCount})]},_._id)}):r.jsx("div",{className:"p-4",children:r.jsx($b,{count:6})})}),r.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-dark-card border-t border-light-border dark:border-dark-border py-2 px-6 flex justify-center gap-10 md:gap-16 items-center",children:[r.jsxs("button",{onClick:j1,className:`flex flex-col items-center gap-1 ${x?"text-light-muted dark:text-dark-muted hover:text-primary-500":"text-primary-500"}`,children:[r.jsx(ut,{className:"w-6 h-6 md:w-7 md:h-7 fill-current"}),r.jsx("span",{className:"text-[10px] font-bold",children:"Chats"})]}),r.jsxs("button",{onClick:()=>g(!0),className:`flex flex-col items-center gap-1 -mt-6 ${x?"text-primary-500":"text-light-muted dark:text-dark-muted hover:text-primary-500"}`,children:[r.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-full flex items-center justify-center text-white shadow-lg ${x?"bg-primary-600 ring-4 ring-primary-100":"bg-primary-500 shadow-primary-500/30"}`,children:r.jsx($t,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("span",{className:"text-[10px] font-bold mt-1",children:"New Chat"})]}),r.jsxs(re,{to:"/feed",className:"flex flex-col items-center gap-1 text-light-muted dark:text-dark-muted hover:text-primary-500",children:[r.jsx(Ts,{className:"w-6 h-6 md:w-7 md:h-7"}),r.jsx("span",{className:"text-[10px] font-bold",children:"Feed"})]})]})]}),n==="group"&&r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-3 border-b border-light-border dark:border-dark-border bg-white dark:bg-dark-card flex items-center gap-3 flex-shrink-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:r.jsx(Se,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-sm text-gray-900 dark:text-gray-100",children:(ge==null?void 0:ge.name)||"Community"}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:(ge==null?void 0:ge.description)||"All members"})]}),ha&&ge&&r.jsx("button",{onClick:k1,className:`p-2 rounded-lg transition-all text-sm font-bold flex items-center gap-1 ${ge.isLocked?"bg-amber-100 dark:bg-amber-900/30 text-amber-600 hover:bg-amber-200":"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:ge.isLocked?"Unlock group (allow all to message)":"Lock group (admins only)",children:ge.isLocked?r.jsx(Nt,{className:"w-4 h-4"}):r.jsx(Jw,{className:"w-4 h-4"})})]}),(ge==null?void 0:ge.isLocked)&&r.jsxs("div",{className:"px-4 py-2 bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800 flex items-center gap-2 text-xs text-amber-700 dark:text-amber-400 font-medium",children:[r.jsx(Nt,{className:"w-3 h-3"}),"Group is locked  only admins can send messages"]}),r.jsxs("div",{ref:As,className:"flex-1 p-4 overflow-y-auto custom-thin-scrollbar overflow-x-hidden relative",style:{backgroundImage:ee?`url(${ee})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[ee&&r.jsx("div",{className:"absolute inset-0 bg-white/70 dark:bg-black/60 pointer-events-none z-0"}),r.jsx("div",{className:"relative z-10 space-y-1",children:or?or.length===0?r.jsx("div",{className:"flex items-center justify-center h-full pt-20",children:r.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[r.jsx(Se,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No messages yet. Say hi to the community! "})]})}):or.map(N1):r.jsx(zb,{})})]}),r.jsxs("div",{className:"p-3 bg-white/90 dark:bg-dark-card/90 backdrop-blur-md border-t border-light-border dark:border-dark-border flex-shrink-0",children:[r.jsx(te,{children:(L||I)&&r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex items-center justify-between px-3 py-2 mb-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm border-l-4 border-primary-500",children:[r.jsxs("div",{className:"flex flex-col justify-center text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-bold text-xs text-primary-500",children:I?"Editing message":`Replying to ${L.senderName}`}),r.jsx("span",{className:"text-xs truncate max-w-[200px] opacity-70",children:I?I.text:L.text})]}),r.jsx("button",{onClick:()=>{N(null),A(null),R("")},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:r.jsx(Ne,{className:"w-4 h-4"})})]})}),ge!=null&&ge.isLocked&&!ha?r.jsxs("div",{className:"flex items-center justify-center gap-2 py-3 text-amber-600 dark:text-amber-400 text-sm font-medium",children:[r.jsx(Nt,{className:"w-4 h-4"}),"Group is locked. Only admins can send messages."]}):r.jsxs(r.Fragment,{children:[r.jsx(te,{children:xl&&r.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative w-24 h-24 mb-3 rounded-lg overflow-hidden border-2 border-primary-500 group",children:[r.jsx("img",{src:xl,alt:"Preview",className:"w-full h-full object-cover"}),r.jsx("button",{onClick:()=>{wi(null),ki(null)},className:"absolute top-1 right-1 p-1 bg-black/50 rounded-full text-white hover:bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Ne,{className:"w-3 h-3"})}),jn&&r.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:r.jsx(jr,{className:"w-6 h-6 text-white animate-spin"})})]})}),r.jsxs("div",{className:"flex gap-2 items-end",children:[r.jsx("input",{type:"file",ref:ji,onChange:b1,accept:"image/*",className:"hidden"}),r.jsxs("div",{className:"flex-1 flex items-end bg-gray-100 dark:bg-gray-800 rounded-2xl border border-transparent focus-within:border-primary-500 focus-within:ring-2 focus-within:ring-primary-500 transition-all min-h-[44px]",children:[(ha||me)&&r.jsx("button",{onClick:()=>{var _;return(_=ji.current)==null?void 0:_.click()},className:"p-3 text-gray-500 hover:text-primary-500 transition-colors shrink-0 outline-none",disabled:jn,children:jn?r.jsx(jr,{className:"w-5 h-5 animate-spin"}):r.jsx(oi,{className:"w-6 h-6"})}),r.jsx("textarea",{ref:Ti,value:P,onChange:_=>R(_.target.value),onKeyDown:w1,onFocus:()=>{setTimeout(()=>{var _;(_=As.current)==null||_.scrollTo({top:As.current.scrollHeight,behavior:"smooth"})},300)},placeholder:I?"Edit your message...":Nn?"Add a write-up...":"Message the community...",className:"w-full px-2 py-3 bg-transparent border-none focus:ring-0 resize-none overflow-hidden text-sm text-gray-900 dark:text-gray-100 scrollbar-none",style:{minHeight:"44px"},rows:1})]}),r.jsx(M,{onClick:()=>Kp(),size:"icon",disabled:!P.trim()&&!Nn||jn,className:"rounded-full w-12 h-12 flex-shrink-0 mb-[1px]",children:r.jsx(ra,{className:"w-5 h-5"})})]})]})]}),r.jsx(te,{children:se&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 z-[110]",onClick:()=>Q(null)}),r.jsxs(T.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"absolute bottom-4 left-4 right-4 bg-white dark:bg-[#222] rounded-2xl p-2 shadow-2xl z-[120] flex flex-col gap-1",children:[r.jsx("div",{className:"flex items-center justify-around p-2 border-b border-gray-100 dark:border-gray-800 pb-2",children:["","","","","",""].map(_=>r.jsx("button",{onClick:()=>{ye({messageId:se._id,userId:t._id,emoji:_}),Q(null)},className:"text-xl hover:scale-125 transition-transform",children:_},_))}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{N(se),Q(null)},children:[r.jsx(Vg,{className:"w-4 h-4"})," Reply"]}),se.senderId===t._id&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{A(se),R(se.text),Q(null)},children:[r.jsx(ec,{className:"w-4 h-4"})," Edit"]}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/20 text-primary-600 dark:text-primary-400 flex items-center gap-3 text-sm font-medium",onClick:()=>{Sl(se._id),Q(null)},children:[r.jsx(Et,{className:"w-4 h-4"})," Seen by"]}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 flex items-center gap-3 text-sm font-medium",onClick:()=>{Nl({messageId:se._id,userId:t._id}),Q(null)},children:[r.jsx(Vr,{className:"w-4 h-4"})," Delete"]})]})]})]})})]})]}),n==="direct"&&r.jsxs("div",{className:`${i?"flex":"hidden md:flex"} flex-1 flex-col bg-gray-50 dark:bg-gray-900 ${i?"fixed inset-0 md:relative z-[200] md:z-auto":""} relative overflow-hidden`,style:i?{bottom:Gp}:void 0,children:[((t==null?void 0:t.chatWallpaperUrl)||ee)&&r.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center opacity-30 dark:opacity-20 pointer-events-none",style:{backgroundImage:`url(${(t==null?void 0:t.chatWallpaperUrl)||ee})`,filter:"blur(3px)"}}),i&&Cn?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-white/90 dark:bg-dark-card/90 backdrop-blur-md border-b border-light-border dark:border-dark-border flex items-center gap-3 flex-shrink-0 z-10",children:[r.jsx("button",{onClick:()=>o(null),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 -ml-2",children:r.jsx(fr,{className:"w-5 h-5"})}),r.jsx("button",{className:"rounded-full focus:outline-none cursor-pointer",onClick:()=>{var _,J;return z({url:((_=Cn.otherUser)==null?void 0:_.avatarUrl)??null,name:((J=Cn.otherUser)==null?void 0:J.name)||"User"})},children:r.jsx(mt,{src:(ef=Cn.otherUser)==null?void 0:ef.avatarUrl,alt:((tf=Cn.otherUser)==null?void 0:tf.name)||"User",className:"w-10 h-10"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:(rf=Cn.otherUser)==null?void 0:rf.name}),r.jsx("p",{className:"text-xs text-gray-500",children:((sf=Cn.otherUser)==null?void 0:sf.role)||"Member"})]}),r.jsx("button",{onClick:()=>{var _;return(_=Hp.current)==null?void 0:_.click()},disabled:E,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors",title:"Change Chat Wallpaper",children:E?r.jsx(jr,{className:"w-5 h-5 animate-spin"}):r.jsx(Wr,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-thin-scrollbar overflow-x-hidden relative z-10",ref:Ps,children:ce?ce.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-center text-gray-500 text-sm",children:"No messages yet. Say hi!"})}):r.jsx("div",{className:"space-y-4 pb-2",children:ce.map(_=>{const J=_.senderId===(t==null?void 0:t._id);return _.isDeleted?r.jsx("div",{className:`flex ${J?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:"px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-xs text-gray-500 italic flex items-center gap-2",children:[r.jsx(Vr,{className:"w-3 h-3"})," This message was deleted"]})},_._id):r.jsx("div",{className:`group relative flex ${J?"justify-end":"justify-start"} mb-2`,onMouseEnter:()=>k(_._id),onMouseLeave:()=>k(null),children:r.jsxs(T.div,{drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(oe,tt)=>{tt.offset.x<-50&&w(_)},whileDrag:{scale:1.02},className:"relative max-w-[85%] md:max-w-[70%]",onTouchStart:()=>Jp(_),onTouchEnd:Xp,children:[y===_._id&&r.jsx("div",{className:`absolute top-0 ${J?"-left-8":"-right-8"} z-20 flex flex-col`,children:r.jsx("button",{className:"p-1 rounded-full bg-gray-200 dark:bg-gray-700 shadow-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",onClick:oe=>{oe.stopPropagation(),S(_)},children:r.jsx(Je,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})})}),r.jsxs("div",{className:`flex flex-col ${J?"items-end":"items-start"}`,children:[_.replyTo&&r.jsxs("div",{className:`mb-1 text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border-l-2 border-primary-500 w-full opacity-80 ${_.replyTo.isDeleted?"italic":""}`,children:[r.jsx("span",{className:"font-bold block text-primary-500",children:_.replyTo.senderName}),_.replyTo.isDeleted?"Message deleted":_.replyTo.text.length>50?_.replyTo.text.substring(0,50)+"...":_.replyTo.text]}),r.jsxs("div",{className:`px-4 py-2 rounded-2xl shadow-sm ${J?"bg-primary-500 text-white rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-none shadow-sm"}`,style:{wordBreak:"break-word",overflowWrap:"break-word"},children:[_.imageUrl&&r.jsx(Wb,{src:_.imageUrl,alt:"Chat attachment"}),_.text&&r.jsx("div",{className:"text-sm whitespace-pre-wrap",children:_.text}),r.jsxs("div",{className:`text-[10px] mt-1 flex items-center justify-end gap-1 opacity-70 ${J?"text-white/80":"text-gray-500"}`,children:[_.isEdited&&r.jsx("span",{children:"(edited)"}),ct(_.createdAt,{addSuffix:!1})]})]}),_.reactions&&_.reactions.length>0&&r.jsx(T.div,{initial:{scale:0},animate:{scale:1},className:`flex -mt-2 ${J?"mr-2":"ml-2"} z-10 cursor-pointer`,children:_.reactions.map((oe,tt)=>r.jsx("button",{onClick:Be=>{Be.stopPropagation(),Tl({id:_._id,isGroup:!1})},className:"text-xs bg-white dark:bg-gray-800 rounded-full shadow border border-gray-100 dark:border-gray-700 w-5 h-5 flex items-center justify-center hover:scale-110 transition-transform",children:oe.emoji},tt))})]})]})},_._id)})}):r.jsx(zb,{})}),r.jsxs("div",{className:"p-3 md:p-4 bg-white/90 dark:bg-dark-card/90 backdrop-blur-md border-t border-light-border dark:border-dark-border flex-shrink-0 w-full z-10",children:[r.jsx(te,{children:(v||f)&&r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex items-center justify-between px-3 py-2 mb-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm border-l-4 border-primary-500",children:[r.jsxs("div",{className:"flex flex-col justify-center text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-bold text-xs text-primary-500",children:f?"Editing Message":`Replying to ${v.senderId===(t==null?void 0:t._id)?"yourself":"them"}`}),r.jsx("span",{className:"text-xs truncate max-w-[200px] opacity-70",children:f?f.text:v.text})]}),r.jsx("button",{onClick:()=>{w(null),b(null),d("")},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:r.jsx(Ne,{className:"w-4 h-4"})})]})}),r.jsx(te,{children:ot&&r.jsxs(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"relative w-24 h-24 mb-3 rounded-lg overflow-hidden border-2 border-primary-500 group",children:[r.jsx("img",{src:ot,alt:"Preview",className:"w-full h-full object-cover"}),r.jsx("button",{onClick:()=>{Ft(null),Yt(null)},className:"absolute top-1 right-1 p-1 bg-black/50 rounded-full text-white hover:bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx(Ne,{className:"w-3 h-3"})}),fe&&r.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:r.jsx(jr,{className:"w-6 h-6 text-white animate-spin"})})]})}),r.jsxs("div",{className:"flex gap-2 items-end",children:[r.jsx("input",{type:"file",ref:pl,onChange:g1,accept:"image/*",className:"hidden"}),r.jsxs("div",{className:"flex-1 flex items-end bg-gray-100 dark:bg-gray-800 rounded-2xl border border-transparent focus-within:border-primary-500 focus-within:ring-2 focus-within:ring-primary-500 transition-all min-h-[44px]",children:[((t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin"||me)&&r.jsx("button",{onClick:()=>{var _;return(_=pl.current)==null?void 0:_.click()},className:"p-3 text-gray-500 hover:text-primary-500 transition-colors shrink-0 outline-none",disabled:fe,children:fe?r.jsx(jr,{className:"w-5 h-5 animate-spin"}):r.jsx(oi,{className:"w-6 h-6"})}),r.jsx("textarea",{ref:Ci,value:l,onChange:_=>d(_.target.value),onKeyDown:y1,onFocus:()=>{setTimeout(()=>{var _;(_=Ps.current)==null||_.scrollTo({top:Ps.current.scrollHeight,behavior:"smooth"})},300)},placeholder:f?"Edit your message...":it?"Add a write-up...":"Type a message...",className:"w-full px-2 py-3 bg-transparent border-none focus:ring-0 resize-none overflow-hidden text-sm text-gray-900 dark:text-gray-100 scrollbar-none",style:{minHeight:"44px"},rows:1})]}),r.jsx(M,{onClick:()=>Qp(),size:"icon",disabled:!l.trim()&&!it||fe,className:"rounded-full w-12 h-12 flex-shrink-0 mb-[1px]",children:r.jsx(ra,{className:"w-5 h-5"})})]})]}),r.jsx(te,{children:j&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 z-[110]",onClick:()=>S(null)}),r.jsxs(T.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"absolute bottom-4 left-4 right-4 md:left-auto md:right-auto md:w-[300px] md:bottom-20 bg-white dark:bg-[#222] rounded-2xl p-2 shadow-2xl z-[120] flex flex-col gap-1 md:left-1/2 md:-translate-x-1/2",children:[r.jsx("div",{className:"flex items-center justify-around p-2 border-b border-gray-100 dark:border-gray-800 pb-2",children:["","","","","",""].map(_=>r.jsx("button",{onClick:()=>{vl({messageId:j._id,userId:t._id,emoji:_}),S(null)},className:"text-xl hover:scale-125 transition-transform",children:_},_))}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{w(j),S(null)},children:[r.jsx(Vg,{className:"w-4 h-4"})," Reply"]}),j.senderId===(t==null?void 0:t._id)&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{b(j),d(j.text),S(null)},children:[r.jsx(ec,{className:"w-4 h-4"})," Edit"]}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 flex items-center gap-3 text-sm font-medium",onClick:()=>{yl({messageId:j._id,userId:t._id}),S(null)},children:[r.jsx(Vr,{className:"w-4 h-4"})," Delete"]})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx($t,{className:"w-24 h-24 text-gray-300 dark:text-gray-700 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Select a conversation"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Choose from your existing conversations or start a new one"})]})})]}),n==="group"&&r.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"text-center text-gray-400 dark:text-gray-600",children:[r.jsx(Se,{className:"w-20 h-20 mx-auto mb-4 opacity-40"}),r.jsx("p",{className:"font-medium",children:"Join the conversation on the left"})]})})]})]})}function mO(){const[e,t]=p.useState("contacts");return r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"h-[calc(100vh-theme(spacing.24))] flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex-shrink-0 mb-4 px-1",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary-600 dark:text-primary-400",children:"Communications"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Manage contact requests and live chat interactions"})]})}),r.jsxs("div",{className:"flex gap-2 p-1 bg-light-card dark:bg-dark-card rounded-xl border border-light-border dark:border-dark-border w-fit",children:[r.jsxs("button",{onClick:()=>t("contacts"),className:`
                            flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all
                            ${e==="contacts"?"bg-primary-500 text-white shadow-md":"text-light-muted dark:text-dark-muted hover:bg-gray-100 dark:hover:bg-gray-800"}
                        `,children:[r.jsx(Kr,{className:"w-4 h-4"}),"Contact Requests"]}),r.jsxs("button",{onClick:()=>t("live-chat"),className:`
                             flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all
                            ${e==="live-chat"?"bg-primary-500 text-white shadow-md":"text-light-muted dark:text-dark-muted hover:bg-gray-100 dark:hover:bg-gray-800"}
                        `,children:[r.jsx(ut,{className:"w-4 h-4"}),"Live Chat"]})]})]}),r.jsx("div",{className:"flex-1 overflow-hidden relative rounded-2xl border border-light-border dark:border-dark-border bg-white dark:bg-dark-card shadow-sm",children:r.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e==="contacts"?r.jsx("div",{className:"h-full overflow-y-auto p-6 custom-thin-scrollbar",children:r.jsx(uO,{})}):r.jsx("div",{className:"h-full w-full",children:r.jsx(c1,{isEmbedded:!0})})})})]})}function hO(){const{user:e,isLoading:t}=X(),s=O(C.responses.getMyResponses,e!=null&&e._id?{userId:e._id}:"skip");return t?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):e?r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs("div",{className:"mb-6 md:mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gradient font-display mb-2",children:"My Responses"}),r.jsx("p",{className:"text-sm md:text-base text-light-muted dark:text-dark-muted",children:"View all your responses and grades"})]}),s&&s.length>0&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4 mb-6 md:mb-8",children:[r.jsx(D,{glass:!0,children:r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:s.length})]}),r.jsx($t,{className:"w-8 h-8 text-primary-500 opacity-20"})]})})}),r.jsx(D,{glass:!0,children:r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Graded"}),r.jsx("p",{className:"text-2xl font-bold text-green-500",children:s.filter(n=>n.grade!==void 0).length})]}),r.jsx(Fn,{className:"w-8 h-8 text-green-500 opacity-20"})]})})}),r.jsx(D,{glass:!0,children:r.jsx(U,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Avg Grade"}),r.jsx("p",{className:"text-2xl font-bold text-accent-500",children:s.filter(n=>n.grade!==void 0).length>0?Math.round(s.filter(n=>n.grade!==void 0).reduce((n,a)=>n+(a.grade||0),0)/s.filter(n=>n.grade!==void 0).length):0})]}),r.jsx(ke,{className:"w-8 h-8 text-accent-500 opacity-20"})]})})})]}),r.jsx("div",{className:"space-y-4",children:s&&s.length>0?s.map(n=>{const a=n.grade?n.grade>=80?"text-green-500":n.grade>=50?"text-yellow-500":"text-red-500":"text-light-muted dark:text-dark-muted";return r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"text-lg mb-2",children:n.postTitle}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-light-muted dark:text-dark-muted",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(_t,{className:"w-4 h-4"}),new Date(n.createdAt).toLocaleDateString()]}),r.jsx(H,{variant:"default",children:n.category})]})]}),n.grade!==void 0&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:`text-3xl font-bold ${a}`,children:n.grade}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:"/ 100"})]})]})}),r.jsx(U,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-light-text dark:text-dark-text mb-2",children:"Your Response"}),r.jsx("div",{className:"bg-light-bg dark:bg-dark-bg p-4 rounded-lg text-sm text-light-text dark:text-dark-text",children:n.content})]}),n.feedback&&r.jsxs("div",{className:"border-t border-light-border dark:border-dark-border pt-4",children:[r.jsxs("h4",{className:"text-sm font-semibold text-light-text dark:text-dark-text mb-2 flex items-center gap-2",children:[r.jsx(rr,{className:"w-4 h-4 text-accent-500"}),"Admin Feedback"]}),r.jsxs("div",{className:"bg-accent-50 dark:bg-accent-900/20 p-3 rounded-lg text-sm text-light-text dark:text-dark-text italic border-l-4 border-accent-500",children:['"',n.feedback,'"']})]}),n.grade===void 0&&r.jsx("div",{className:"text-center p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800",children:r.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:" Waiting for admin to grade"})}),n.rewardStatus==="paid"&&r.jsxs(T.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"text-center p-4 rounded-xl bg-gradient-to-r from-green-500/10 via-green-500/20 to-green-500/10 border border-green-500/30 shadow-lg shadow-green-500/10",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400 font-bold uppercase tracking-tight",children:[r.jsx(ke,{className:"w-5 h-5 animate-bounce"}),r.jsx("span",{children:"Official Reward Paid!"}),r.jsx(ke,{className:"w-5 h-5 animate-bounce"})]}),r.jsx("p",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"Check your bank account/wallet for the transfer."})]})]})})]},n._id)}):r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-12 text-center text-light-muted",children:[r.jsx($t,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),r.jsx("p",{className:"mb-2",children:"You haven't submitted any responses yet"}),r.jsx("p",{className:"text-sm",children:'Look for admin posts with "Official Response" enabled and submit your answers!'})]})})})]})}):r.jsx(Me,{to:"/login",replace:!0})}const xO=`
  .premium-scrollbar::-webkit-scrollbar {
    height: 5px;
    width: 5px;
  }
  .premium-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }
`,qb=[{key:"gold",label:"Comments",icon:$t,color:"from-yellow-500 to-amber-600"},{key:"silver",label:"Games",icon:Ww,color:"from-gray-400 to-gray-600"},{key:"diamond",label:"Challenge",icon:_r,color:"from-emerald-500 to-teal-600"}];function pO(){const[e,t]=p.useState("gold"),s=le(),n=O(C.wallets.getLeaderboard,e!=="diamond"?{poolType:e,limit:50}:"skip"),a=O(C.wordUnderPressure.getDiamondLeaderboard,e==="diamond"?{limit:50}:"skip"),i=e==="diamond"?a:n,o=qb.find(l=>l.key===e);return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg",children:[r.jsx("style",{children:xO}),r.jsx("div",{className:"gradient-primary text-white py-8 px-4 md:px-8",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsxs("button",{onClick:()=>s("/feed"),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[r.jsx(fr,{className:"w-5 h-5"}),"Back to Feed"]}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center",children:r.jsx(ke,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold",children:"Leaderboard"}),r.jsx("p",{className:"text-white/80",children:"Top performers across all categories"}),e==="diamond"&&r.jsxs("button",{onClick:()=>s("/diamond-challenge"),className:"mt-4 px-6 py-2 bg-emerald-500 text-white rounded-full font-bold text-sm hover:bg-emerald-400 transition-colors shadow-lg flex items-center gap-2 border-2 border-emerald-400/50",children:[r.jsx(_r,{className:"w-4 h-4"}),"Play Challenge"]})]})]}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 premium-scrollbar",children:qb.map(l=>{const d=l.icon,c=e===l.key;return r.jsxs("button",{onClick:()=>t(l.key),className:Y("flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap",c?"bg-white text-primary-500":"bg-white/10 text-white/70 hover:bg-white/20"),children:[r.jsx(d,{className:"w-5 h-5"}),l.label]},l.key)})})]})}),r.jsx("div",{className:"max-w-5xl mx-auto px-4 md:px-8 py-8",children:i?i.length===0?r.jsx(D,{glass:!0,children:r.jsxs(U,{className:"p-8 text-center",children:[r.jsx(ke,{className:"w-16 h-16 text-primary-300 mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-light-muted dark:text-dark-muted",children:"No entries yet for this category."}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted mt-2",children:["Be the first to earn Rubies in the ",o.label," pool!"]})]})}):r.jsx("div",{className:"space-y-4",children:i.map((l,d)=>r.jsx(fO,{entry:l,rank:l.rank,tabColor:o.color,activeTab:e},l.userId))}):r.jsx("div",{className:"text-center text-light-muted dark:text-dark-muted py-12",children:"Loading leaderboard..."})})]})}function fO({entry:e,rank:t,tabColor:s,activeTab:n}){let a=null,i="bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border";return t===1?(a=r.jsx(ke,{className:"w-7 h-7 text-yellow-500"}),i="bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 border-2 border-yellow-400 dark:border-yellow-600 shadow-lg shadow-yellow-500/20"):t===2?(a=r.jsx(fd,{className:"w-7 h-7 text-gray-400"}),i="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/20 dark:to-gray-800/20 border-2 border-gray-300 dark:border-gray-600 shadow-md shadow-gray-500/10"):t===3&&(a=r.jsx(fd,{className:"w-7 h-7 text-orange-500"}),i="bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-2 border-orange-400 dark:border-orange-600 shadow-md shadow-orange-500/10"),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},className:Y("flex items-center gap-3 sm:gap-4 p-3 sm:p-5 rounded-2xl border transition-all hover:scale-[1.02]",i),children:[r.jsx("div",{className:"hidden md:flex flex-shrink-0 w-14 text-center font-bold text-2xl items-center justify-center",children:a||r.jsxs("span",{className:"text-light-muted dark:text-dark-muted",children:["#",t]})}),r.jsxs(re,{to:`/profile/${e.userId}`,className:"relative flex-shrink-0 hover:opacity-80 transition-opacity",children:[r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full overflow-hidden bg-gradient-to-br from-primary-400 to-primary-600 ring-2 ring-white dark:ring-dark-border",children:e.userAvatar?r.jsx("img",{src:e.userAvatar,alt:e.userName,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold text-xl",children:e.userName[0]})}),r.jsx("div",{className:"absolute -top-1 -left-1 md:hidden w-6 h-6 rounded-full bg-white dark:bg-dark-card border border-light-border dark:border-dark-border flex items-center justify-center shadow-sm z-10 text-xs font-bold",children:t<=3?t===1?r.jsx(ke,{className:"w-3.5 h-3.5 text-yellow-500"}):r.jsx(fd,{className:Y("w-3.5 h-3.5",t===2?"text-gray-400":"text-orange-500")}):`#${t}`})]}),r.jsxs("div",{className:"flex-1 min-w-0 pr-1",children:[r.jsx(re,{to:`/profile/${e.userId}`,className:"font-bold text-base sm:text-xl text-light-text dark:text-dark-text truncate hover:text-primary-500 transition-colors block leading-tight",children:e.userName}),r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-0.5 sm:gap-4 mt-0.5 sm:mt-1 text-xs sm:text-sm text-light-muted dark:text-dark-muted",children:n==="diamond"?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"truncate font-medium text-emerald-500 dark:text-emerald-400",children:[e.totalWins," Correct"]}),r.jsxs("span",{className:"flex items-center gap-1 truncate text-light-muted dark:text-dark-muted",children:["Attempts: ",e.currentStreak]})]}):e.totalWins!==void 0?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"truncate font-medium text-blue-500 dark:text-blue-400",children:[e.totalWins," Wins"]}),r.jsxs("span",{className:"flex items-center gap-1 truncate text-light-muted dark:text-dark-muted",children:["Streak: ",e.currentStreak]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"truncate",children:[e.earnedRubies," Rubies"]}),e.badgeCount>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ke,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.badgeCount," badge",e.badgeCount!==1?"s":""]})]})})]}),r.jsxs("div",{className:"flex flex-col items-end gap-0.5 sm:gap-1 pl-1 shrink-0",children:[r.jsx("div",{className:Y("text-lg sm:text-3xl font-bold bg-gradient-to-r bg-clip-text text-transparent truncate max-w-[80px] sm:max-w-none text-right",s),children:e.currentBalance}),r.jsx("div",{className:"text-[9px] sm:text-xs text-light-muted dark:text-dark-muted uppercase tracking-wider font-medium",children:n==="diamond"?"Best Time":"Balance"}),r.jsx("button",{onClick:o=>{o.preventDefault()},className:"mt-0.5 sm:mt-1 p-1 sm:p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(vn,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})]})}function gO(){var i,o,l;const{postId:e}=da(),t=O(C.posts.getPost,{postId:e}),s=O(C.responses.getPostResponses,{postId:e});if(!t||!s)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});const n=s.slice(0,5),a=s.slice(5,10);return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[r.jsx(nt,{}),r.jsxs("div",{className:"mb-8 p-6 glass rounded-2xl border border-primary-500/20 bg-gradient-to-br from-primary-500/5 to-transparent",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(mt,{src:(i=t.author)==null?void 0:i.avatarUrl,alt:((o=t.author)==null?void 0:o.name)||"Admin",size:"sm"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-light-text dark:text-dark-text",children:(l=t.author)==null?void 0:l.name}),r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted flex items-center gap-1",children:[r.jsx(_t,{className:"w-3 h-3"}),ct(t.createdAt,{addSuffix:!0})]})]})]}),r.jsxs("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base whitespace-pre-wrap italic opacity-80",children:['"',t.content,'"']})]}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gradient flex items-center gap-2",children:[r.jsx($t,{className:"w-6 h-6 text-primary-500"}),"Official Responses"]}),r.jsxs(H,{variant:"primary",className:"px-3 py-1",children:[s.length," Total"]})]}),r.jsxs("div",{className:"space-y-8",children:[n.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-primary-600 dark:text-primary-400 font-bold uppercase tracking-wider text-xs",children:[r.jsx(ke,{className:"w-4 h-4"}),"Top Tier Responders (1-5)"]}),r.jsx("div",{className:"grid gap-4",children:n.map((d,c)=>r.jsx(Hb,{response:d,rank:c+1,tier:"gold"},d._id))})]}),a.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-secondary-600 dark:text-secondary-400 font-bold uppercase tracking-wider text-xs",children:[r.jsx(fd,{className:"w-4 h-4"}),"Second Tier Responders (6-10)"]}),r.jsx("div",{className:"grid gap-4",children:a.map((d,c)=>r.jsx(Hb,{response:d,rank:c+6,tier:"silver"},d._id))})]}),s.length===0&&r.jsxs("div",{className:"text-center py-12 glass rounded-xl border-dashed border-2 border-light-border dark:border-dark-border",children:[r.jsx($t,{className:"w-12 h-12 text-light-muted mx-auto mb-4 opacity-30"}),r.jsx("p",{className:"text-light-muted",children:"No responses yet for this post."})]})]})]})})}function Hb({response:e,rank:t,tier:s}){const n=s==="gold";return r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.05},className:`flex flex-col md:flex-row gap-4 p-5 rounded-2xl border transition-all ${n?"bg-primary-500/5 border-primary-500/30":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border"}`,children:r.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx(mt,{src:e.userAvatar,alt:e.userName,size:"md"}),r.jsxs("div",{className:`absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-lg ${n?"bg-primary-500":"bg-secondary-500"}`,children:["#",t]})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text",children:e.userName}),r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted",children:ct(e.createdAt,{addSuffix:!0})})]}),r.jsx("p",{className:"text-sm text-light-text dark:text-dark-text leading-relaxed",children:e.content}),e.grade!==void 0&&r.jsxs("div",{className:"pt-3 flex flex-wrap gap-2 items-center",children:[r.jsxs(H,{variant:e.grade>=70?"success":"primary",className:"text-[10px] font-bold uppercase transition-all hover:scale-105",children:["Score: ",e.grade,"/100"]}),e.rewardStatus==="paid"&&r.jsxs(H,{variant:"warning",className:"text-[10px] flex items-center gap-1 animate-pulse",children:[r.jsx(ke,{className:"w-3 h-3"}),"Awarded"]}),e.feedback&&r.jsxs("div",{className:"w-full mt-2 p-3 rounded-lg bg-light-bg dark:bg-dark-bg/50 border border-light-border dark:border-dark-border/50 italic text-xs text-light-muted",children:['Admin feedback: "',e.feedback,'"']})]})]})]})})}function Ya(){return r.jsxs("div",{className:"flex gap-3 animate-pulse",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-light-border dark:bg-dark-border"}),r.jsxs("div",{className:"flex-1 bg-light-card dark:bg-dark-card rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-24 bg-light-border dark:bg-dark-border rounded"}),r.jsx("div",{className:"h-3 w-16 bg-light-border dark:bg-dark-border rounded"})]}),r.jsx("div",{className:"h-3 w-full bg-light-border dark:bg-dark-border rounded"}),r.jsx("div",{className:"h-3 w-3/4 bg-light-border dark:bg-dark-border rounded"})]})]})}function Gb({postId:e,isPrayer:t=!1,isAdminPost:s=!1}){const{user:n}=X(),[a,i]=p.useState(""),[o,l]=p.useState(""),[d,c]=p.useState(!1),[u,m]=p.useState(null),h=O(C.comments.getComments,{postId:e}),x=O(C.comments.getCommentSettings,{}),g=O(C.comments.hasUserCommented,n!=null&&n._id&&s?{postId:e,userId:n._id}:"skip"),v=V(C.comments.createComment),w=async j=>{if(j.preventDefault(),!(!n||!a.trim()||d)&&!(s&&g)){c(!0);try{await v({postId:e,authorId:n._id,content:a.trim()}),i("")}catch(S){console.error("Failed to create comment:",S),alert(S instanceof Error?S.message:"Failed to post comment")}finally{c(!1)}}},f=async(j,S)=>{if(j.preventDefault(),!(!n||!o.trim()||d)){c(!0);try{await v({postId:e,authorId:n._id,content:o.trim(),parentId:S}),l(""),m(null)}catch(P){console.error("Failed to post reply:",P),alert(P instanceof Error?P.message:"Failed to post reply")}finally{c(!1)}}},y=(()=>{if(!h)return[];const j=new Map;h.forEach(P=>j.set(P._id,{...P,replies:[]}));const S=[];return h.forEach(P=>{if(P.parentId){const R=j.get(P.parentId);R&&R.replies.push(j.get(P._id))}else S.push(j.get(P._id))}),S})();function k({comment:j,isReply:S=!1}){var N,I,A,W,G,se;const P=((N=j.author)==null?void 0:N.name)||"U",R=P.charAt(0).toUpperCase(),L=(I=j.author)==null?void 0:I.avatarUrl;return r.jsxs("div",{className:`flex gap-2 md:gap-3 ${S?"ml-8 md:ml-12 mt-2":""} group`,children:[r.jsx(re,{to:`/profile/${(A=j.author)==null?void 0:A._id}`,className:"shrink-0 mt-1",children:L?r.jsx(mt,{src:L,alt:P,size:S?"xs":"sm"}):r.jsx("div",{className:`flex items-center justify-center rounded-full bg-primary-500/20 text-primary-600 dark:text-primary-400 font-bold flex-shrink-0 ${S?"w-6 h-6 text-[10px]":"w-8 h-8 text-sm"}`,children:R})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsxs("div",{className:"bg-light-card dark:bg-dark-card rounded-2xl px-3 py-2 md:px-4 md:py-2.5 inline-block max-w-full shadow-sm border border-light-border/50 dark:border-dark-border/50",children:[r.jsxs(re,{to:`/profile/${(W=j.author)==null?void 0:W._id}`,className:"font-bold text-sm text-light-text dark:text-dark-text hover:underline block mb-0.5 truncate",children:[P,((G=j.author)==null?void 0:G.role)==="admin"&&r.jsx(qe,{className:"w-3 h-3 inline-block ml-1 text-primary-500"})]}),r.jsx("p",{className:"text-sm text-light-text dark:text-dark-text break-words leading-relaxed whitespace-pre-wrap",children:j.content})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-1 ml-2",children:[r.jsx("span",{className:"text-[11px] md:text-xs text-light-muted dark:text-dark-muted font-medium",children:ct(j.createdAt,{addSuffix:!0})}),!S&&n&&r.jsx("button",{onClick:()=>{m(u===j._id?null:j._id),l("")},className:"text-[11px] md:text-xs font-bold text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:"Reply"})]})]}),r.jsx(te,{children:u===j._id&&r.jsxs(T.form,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},onSubmit:Q=>f(Q,j._id),className:"mt-3 flex gap-2",children:[r.jsx(mt,{src:n==null?void 0:n.avatarUrl,size:"xs",className:"hidden md:block shrink-0 mt-1"}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",value:o,onChange:Q=>l(Q.target.value),placeholder:`Reply to ${P}...`,className:"w-full pl-3 pr-10 py-2 text-sm rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg focus:ring-1 focus:ring-primary-500 outline-none",autoFocus:!0}),r.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"absolute right-1 top-1/2 -translate-y-1/2 p-1.5 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg disabled:opacity-50",children:r.jsx(ra,{className:"w-4 h-4"})})]})]},"reply-form")}),((se=j.replies)==null?void 0:se.length)>0&&r.jsx("div",{className:"space-y-3 mt-3 relative before:absolute before:left-[-1.5rem] before:top-2 before:bottom-4 before:w-px before:bg-light-border/50 dark:before:bg-dark-border/50 md:before:hidden",children:j.replies.map(Q=>r.jsx(k,{comment:Q,isReply:!0},Q._id))})]})]})}return x===!1?r.jsx("div",{className:"mt-4 p-4 rounded-lg bg-light-card dark:bg-dark-card text-center",children:r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Comments are currently disabled"})}):r.jsxs("div",{className:"mt-4 pt-4 border-t border-light-border dark:border-dark-border space-y-4",children:[n&&r.jsx(te,{mode:"wait",children:g&&s?r.jsxs(T.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-3 px-4 py-3 rounded-2xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/15 flex items-center justify-center flex-shrink-0",children:r.jsx(et,{className:"w-4 h-4 text-green-500"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:"You've already commented "}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Each user can only comment once per admin post to keep things fair. You can still reply to others below."})]}),r.jsx(s3,{className:"w-5 h-5 text-light-muted dark:text-dark-muted flex-shrink-0"})]},"locked"):r.jsxs(T.form,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onSubmit:w,className:"flex items-start gap-2 md:gap-3",children:[r.jsx("div",{className:"mt-1 flex-shrink-0",children:r.jsx(mt,{src:n.avatarUrl,alt:n.name,size:"sm"})}),r.jsxs("div",{className:"flex-1 min-w-0 relative",children:[r.jsx("textarea",{value:a,onChange:j=>i(j.target.value),placeholder:t?"Join us in praying this prayer...":s?"Write a comment... (once per post)":"Write a comment...",className:`w-full px-4 py-2.5 pr-12 rounded-2xl border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:border-transparent resize-none overflow-hidden min-h-[44px] max-h-32 text-sm md:text-base transition-all ${t?"border-purple-200 dark:border-purple-900/30 focus:ring-purple-500 placeholder:text-purple-400/70":"border-light-border dark:border-dark-border focus:ring-primary-500"}`,disabled:d,rows:1,onInput:j=>{const S=j.target;S.style.height="auto",S.style.height=`${S.scrollHeight}px`}}),r.jsx("button",{type:"submit",disabled:!a.trim()||d,className:"absolute right-1.5 bottom-1.5 p-2 rounded-xl bg-primary-500 hover:bg-primary-600 text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center shadow-lg shadow-primary-500/20 active:scale-95",children:t?r.jsx(Kx,{className:"w-4 h-4 md:w-5 md:h-5"}):r.jsx(ra,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]},"input")}),h?y.length>0?r.jsx("div",{className:"space-y-4",children:y.map(j=>r.jsx(k,{comment:j},j._id))}):r.jsx("div",{className:"text-center py-8 text-light-muted dark:text-dark-muted",children:r.jsx("p",{children:t?"No prayers yet. Be the first to join in prayer!":"No comments yet. Be the first to share your thoughts!"})}):r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ya,{}),r.jsx(Ya,{}),r.jsx(Ya,{})]})]})}function bO({postId:e}){const{user:t}=X(),[s,n]=p.useState(""),[a,i]=p.useState(!1),o=O(C.questions.getQuestionsByPost,{postId:e,publicOnly:!0}),l=O(C.questions.getUserQuestionsOnPost,t!=null&&t._id?{userId:t._id,postId:e}:"skip"),d=V(C.questions.submitQuestion),c=[...o||[]];l&&l.forEach(m=>{c.some(h=>h._id===m._id)||c.push({...m,userName:(t==null?void 0:t.name)||"Me",userAvatar:t==null?void 0:t.avatarUrl,adminName:void 0,adminAvatar:void 0})}),c.sort((m,h)=>h.createdAt-m.createdAt);const u=async m=>{if(m.preventDefault(),!(!t||!s.trim())){i(!0);try{await d({userId:t._id,postId:e,questionText:s.trim()}),n("")}catch(h){console.error("Failed to submit question:",h),alert("Failed to submit question. Please try again.")}finally{i(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[t&&(!l||l.length===0)&&r.jsxs("form",{onSubmit:u,className:"relative",children:[r.jsx("textarea",{value:s,onChange:m=>n(m.target.value),placeholder:"Ask a question about this teaching...",className:"w-full min-h-[100px] p-4 pr-12 rounded-xl bg-gray-50 dark:bg-[#222] border-transparent focus:border-primary-500 focus:ring-0 text-sm resize-none"}),r.jsx(M,{type:"submit",disabled:!s.trim()||a,size:"sm",className:"absolute bottom-3 right-3",children:a?"Sending...":r.jsx(ra,{className:"w-4 h-4"})})]}),t&&l&&l.length>0&&r.jsxs("div",{className:"text-center py-4 text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/10 rounded-xl border border-green-100 dark:border-green-900/30",children:[r.jsx(Qt,{className:"w-5 h-5 mx-auto mb-2"}),r.jsx("p",{className:"font-medium",children:"Question Submitted"}),r.jsx("p",{className:"text-xs opacity-80",children:"You can only ask one question per post."})]}),!t&&r.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Please log in to ask a question"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text flex items-center gap-2",children:["Questions (",c.length,")"]}),c.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No questions yet. Be the first to ask!"}):r.jsx("div",{className:"space-y-4",children:c.map(m=>r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-[#1A1A1A] shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mt,{src:m.userAvatar,alt:m.userName||"User",size:"sm"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:m.userName}),r.jsx("p",{className:"text-[10px] text-light-muted",children:ct(m.createdAt,{addSuffix:!0})})]})]}),m.isPublic?r.jsx("div",{title:"Public",className:"text-green-500",children:r.jsx(Qx,{className:"w-3.5 h-3.5"})}):r.jsx("div",{title:"Private",className:"text-gray-400",children:r.jsx(Nt,{className:"w-3.5 h-3.5"})})]}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 pl-10",children:m.questionText}),m.isAnswered?r.jsxs("div",{className:"ml-10 mt-3 p-3 rounded-lg bg-primary-50 dark:bg-primary-900/10 border border-primary-100 dark:border-primary-900/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(mt,{src:m.adminAvatar,alt:m.adminName||"Admin",size:"xs",className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold text-primary-700 dark:text-primary-400",children:m.adminName||"Admin Response"})]}),r.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:m.answerText})]}):r.jsxs("div",{className:"ml-10 mt-2 flex items-center gap-1.5 text-xs text-orange-500 bg-orange-50 dark:bg-orange-900/10 px-2 py-1 rounded-md w-fit",children:[r.jsx(yr,{className:"w-3 h-3"}),"Waiting for response"]})]},m._id))})]})]})}function yO(){var y,k,j,S,P,R,L,N,I;const{postId:e}=da(),[t,s]=$x(),n=t.get("tab")||"comments",{user:a}=X(),i=O(C.posts.getPost,{postId:e}),o=V(C.posts.likePost),[l,d]=p.useState(!1),[c,u]=p.useState(!1),[m,h]=p.useState(0),[x,g]=p.useState(0);if(p.useEffect(()=>{i&&(h(i.likeCount),g(0))},[i==null?void 0:i._id,i==null?void 0:i.likeCount]),!i)return r.jsxs("div",{className:"min-h-screen pb-20 md:pb-8",children:[r.jsx("div",{className:"container mx-auto px-4 pt-4 mb-4",children:r.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})}),r.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsx("div",{className:"aspect-[4/5] bg-gray-200 dark:bg-gray-700 rounded-2xl animate-pulse"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(Oe,{}),r.jsxs("div",{className:"p-6 glass rounded-2xl border border-light-border dark:border-dark-border space-y-4",children:[r.jsx(Ya,{}),r.jsx(Ya,{}),r.jsx(Ya,{})]})]})]})})]});const v=((y=i.author)==null?void 0:y.role)==="admin"||((k=i.author)==null?void 0:k.role)==="super_admin",w=async()=>{if(!a||l||v&&c)return;const A=!c;u(A),h(W=>A?W+1:W-1),d(!0);try{await o({userId:a._id,postId:i._id})}catch(W){(W instanceof Error?W.message:"").includes("already liked")||(u(!A),h(se=>A?se-1:se+1)),console.error("Failed to like post:",W)}finally{d(!1)}},f=i.content.length>250,b=i.content.length>1200;return r.jsxs("div",{className:"min-h-screen pb-20 md:pb-8",children:[r.jsx("div",{className:"container mx-auto px-4 pt-4 mb-4",children:r.jsx(nt,{})}),r.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[r.jsxs("div",{className:"lg:sticky lg:top-24 space-y-4",children:[i.imageUrl?r.jsx(T.div,{layoutId:`post-image-${i._id}`,className:"rounded-2xl overflow-hidden glass border border-light-border dark:border-dark-border shadow-2xl",children:r.jsx("img",{src:i.imageUrl,alt:"Post",className:"w-full h-auto max-h-[70vh] object-contain bg-black/5"})}):i.videoUrl?r.jsx("div",{className:"rounded-2xl overflow-hidden bg-black shadow-2xl",children:r.jsx("video",{src:i.videoUrl,controls:!0,className:"w-full max-h-[70vh]"})}):r.jsx("div",{className:"aspect-square flex items-center justify-center glass rounded-2xl border border-dashed border-light-border dark:border-dark-border opacity-50",children:r.jsx("p",{className:"text-light-muted",children:"No visual media"})}),r.jsxs("div",{className:"hidden lg:block p-6 glass rounded-2xl border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:w,className:`flex items-center gap-2 transition-all duration-300 ${c?"text-red-500":"text-light-text dark:text-dark-text hover:text-red-500"}`,children:[r.jsx(vn,{className:`w-6 h-6 transition-all duration-300 ${c?"fill-red-500 text-red-500 scale-110":""}`}),r.jsxs("span",{className:"font-bold",children:[m," Likes"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-light-muted",children:[r.jsx(ut,{className:"w-6 h-6"}),r.jsxs("span",{className:"font-bold",children:[i.commentCount," Comments"]})]})]}),r.jsx("button",{className:"p-2 rounded-full hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:r.jsx(bi,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"h-px bg-light-border dark:bg-dark-border mb-4"}),r.jsxs("p",{className:"text-xs text-light-muted flex items-center gap-2",children:[r.jsx(_t,{className:"w-3 h-3"}),"Posted on ",new Date(i.createdAt).toLocaleDateString(void 0,{dateStyle:"long"})," at ",new Date(i.createdAt).toLocaleTimeString(void 0,{timeStyle:"short"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-2xl border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(mt,{src:(j=i.author)==null?void 0:j.avatarUrl,alt:((S=i.author)==null?void 0:S.name)||"User",size:"md"}),r.jsxs("div",{children:[r.jsxs("h2",{className:"font-bold text-lg text-light-text dark:text-dark-text flex items-center gap-2",children:[(P=i.author)==null?void 0:P.name,((R=i.author)==null?void 0:R.role)==="admin"&&r.jsx(qe,{className:"w-4 h-4 text-primary-500"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(H,{variant:"outline",className:"text-[10px]",children:i.category}),r.jsx("span",{className:"text-xs text-light-muted",children:ct(i.createdAt,{addSuffix:!0})})]})]})]}),((L=i.author)==null?void 0:L.role)==="admin"?r.jsx(H,{variant:"primary",className:"hidden sm:flex",children:"Official"}):r.jsx(H,{variant:"default",className:"hidden sm:flex",children:"Member"})]}),r.jsxs("div",{className:"p-6 glass rounded-2xl border border-light-border dark:border-dark-border relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:r.jsx(St,{className:"w-20 h-20"})}),r.jsx(te,{initial:!1,children:r.jsx(T.p,{initial:{opacity:0},animate:{opacity:1},className:`text-light-text dark:text-dark-text leading-relaxed text-base md:text-lg break-words cursor-pointer ${x===0?"line-clamp-[6]":x===1?"line-clamp-[20]":""}`,onClick:()=>{f&&(b?x===0?g(1):x===1&&g(2):g(x===0?2:0))},children:i.content},x)}),f&&r.jsx("button",{onClick:()=>{g(b?x===0?1:x===1?2:0:x===0?2:0)},className:"mt-4 flex items-center gap-1 text-primary-500 font-bold hover:underline transition-all",children:x===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(Hn,{className:"w-4 h-4"})]}):x===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Je,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read More ",r.jsx(Je,{className:"w-4 h-4"})]})})]})]}),r.jsx("div",{className:"p-4 md:p-6 glass rounded-2xl border border-light-border dark:border-dark-border min-h-[400px]",children:((N=i.author)==null?void 0:N.role)==="admin"||((I=i.author)==null?void 0:I.role)==="super_admin"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-6 border-b border-light-border dark:border-dark-border mb-6",children:[r.jsx("button",{onClick:()=>s({tab:"comments"}),className:`pb-3 font-semibold text-sm transition-colors border-b-2 ${n==="comments"?"border-primary-500 text-primary-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ut,{className:"w-4 h-4"}),"Comments (",i.commentCount,")"]})}),r.jsx("button",{onClick:()=>s({tab:"questions"}),className:`pb-3 font-semibold text-sm transition-colors border-b-2 ${n==="questions"?"border-purple-500 text-purple-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(qe,{className:"w-4 h-4"}),"Questions (",i.questionCount||0,")"]})})]}),n==="comments"?r.jsx(Gb,{postId:i._id,isPrayer:i.postType==="prayer",isAdminPost:v}):r.jsx(bO,{postId:i._id})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-xl font-bold text-gradient mb-6 flex items-center gap-2",children:i.postType==="prayer"?r.jsxs(r.Fragment,{children:[r.jsx(Kx,{className:"w-6 h-6 text-purple-500"}),"Community Prayers"]}):r.jsxs(r.Fragment,{children:[r.jsx(ut,{className:"w-6 h-6 text-primary-500"}),"Community Discussion"]})}),r.jsx(Gb,{postId:i._id,isPrayer:i.postType==="prayer",isAdminPost:v})]})})]})})]})}function vO(){const{user:e,isLoading:t}=X(),s=le(),[n,a]=p.useState(""),i=V(C.follows.toggleFollow),[o,l]=p.useState(null),d=O(C.users.searchMembers,n.trim().length>0?{query:n}:"skip");return t?r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nr,{}),r.jsx(ia,{count:3})]})}):e?r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 md:mb-8",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-primary-600 dark:text-primary-400 mb-2",children:"Search Members"}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base",children:"Find and connect with community members"})]}),r.jsx("div",{className:"mb-6 md:mb-8",children:r.jsxs("div",{className:"relative flex items-center",children:[r.jsx("button",{onClick:()=>s(-1),className:"mr-2 p-2 text-primary-500 md:hidden","aria-label":"Go back",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"m12 19-7-7 7-7"}),r.jsx("path",{d:"M19 12H5"})]})}),r.jsxs("div",{className:"relative flex-1",children:[r.jsx(ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",value:n,onChange:c=>a(c.target.value),placeholder:"Search by name...",className:`
                                w-full
                                pl-10 pr-10 py-2.5
                                rounded-lg
                                border border-light-border dark:border-dark-border
                                bg-light-card dark:bg-dark-card
                                text-sm text-light-text dark:text-dark-text
                                placeholder-light-muted dark:placeholder-dark-muted
                                focus:ring-2 focus:ring-primary-500 focus:border-transparent
                                outline-none transition-all
                                `}),n&&r.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text","aria-label":"Clear search",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})}),n.trim().length===0?r.jsxs("div",{className:"text-center py-12 glass rounded-xl",children:[r.jsx(St,{className:"w-12 h-12 mx-auto mb-4 text-light-muted dark:text-dark-muted"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Start typing to search for members"})]}):d===void 0?r.jsx(ia,{count:3}):d.length===0?r.jsxs("div",{className:"text-center py-12 glass rounded-xl",children:[r.jsx(St,{className:"w-12 h-12 mx-auto mb-4 text-light-muted dark:text-dark-muted"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:['No members found matching "',n,'"']})]}):r.jsx("div",{className:"space-y-3",children:d.map(c=>r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>s(`/profile/${c._id}`),className:"glass rounded-lg p-4 hover:shadow-lg transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(mt,{src:c.avatarUrl,alt:c.name,size:"md"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text group-hover:text-primary-500 transition-colors",children:c.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(H,{variant:c.role==="admin"||c.role==="super_admin"?"primary":"default",className:"text-[10px]",children:c.role==="super_admin"?"Super Admin":c.role==="admin"?"Admin":"Member"}),r.jsxs("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:[c.followerCount||0," followers"]})]})]}),e._id!==c._id&&r.jsx("button",{onClick:u=>{u.stopPropagation(),!o&&(l(c._id),i({followerId:e._id,followingId:c._id}).finally(()=>l(null)))},className:"p-2 rounded-full hover:bg-primary-50 dark:hover:bg-primary-900/20 text-primary-500 transition-colors",children:r.jsx(St,{className:"w-5 h-5"})}),c.latestPost&&r.jsxs("div",{className:"w-full mt-2 p-2 bg-light-card/50 dark:bg-dark-card/50 rounded-lg border border-light-border/50 dark:border-dark-border/50 text-xs text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-semibold text-primary-500",children:"Latest: "}),r.jsx("span",{className:"line-clamp-1 break-all",children:c.latestPost.content})]})]})})]})},c._id))})]})}):r.jsx(Me,{to:"/login",replace:!0})}function wO(){const{userId:e}=da(),{user:t,isLoading:s}=X(),[n,a]=p.useState(""),i=O(C.users.getUserProfile,e?{userId:e}:"skip"),o=O(C.posts.getPosts,e?{authorId:e,userId:t==null?void 0:t._id}:"skip"),l=(o==null?void 0:o.filter(v=>v.content.toLowerCase().includes(n.toLowerCase())))||[],d=O(C.follows.isFollowing,t&&e?{followerId:t._id,followingId:e}:"skip"),c=V(C.follows.toggleFollow),[u,m]=p.useState(!1),h=async()=>{if(!(!t||!e||u)){m(!0);try{await c({followerId:t._id,followingId:e})}catch(v){console.error("Failed to toggle follow:",v)}finally{m(!1)}}};if(s)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsx(nr,{}),r.jsx("div",{className:"glass rounded-xl h-64 animate-pulse mb-6"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})});if(!t)return r.jsx(Me,{to:"/login",replace:!0});if(i===void 0)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsx(nr,{}),r.jsx("div",{className:"glass rounded-xl h-64 animate-pulse mb-6"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})});if(i===null)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsx("div",{className:"text-center py-12 glass rounded-xl mt-6",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Member not found"})})]})});const x=i.role==="admin"||i.role==="super_admin",g=i.role==="super_admin";return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[r.jsx("div",{className:"h-32 md:h-48 bg-gray-100 dark:bg-gray-800 relative",children:i.coverImageUrl?r.jsx("img",{src:i.coverImageUrl,className:"w-full h-full object-cover",alt:"Cover"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary-500/20 to-secondary-500/20"})}),r.jsxs("div",{className:"px-4 pb-4 md:px-8 md:pb-8 relative",children:[r.jsx("div",{className:"relative -mt-10 md:-mt-16 mb-3 md:mb-4 flex flex-col items-center md:items-start",children:r.jsx(mt,{src:i.avatarUrl,alt:i.name,size:"xl",className:`
                                        ring-4 ring-light-bg dark:ring-dark-bg 
                                        ${g?"ring-yellow-500":x?"ring-primary-500":""}
                                        w-20 h-20 md:w-32 md:h-32 shadow-lg
                                    `})}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 text-center md:text-left",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-center gap-2 mb-1",children:[r.jsx("h1",{className:"text-xl md:text-3xl font-bold text-light-text dark:text-dark-text truncate max-w-full",children:i.name}),g?r.jsxs(H,{variant:"primary",className:"bg-gradient-to-r from-yellow-500 to-amber-600 border-yellow-300 text-[10px] h-5",children:[r.jsx(qe,{className:"w-3 h-3 mr-1"})," Super Admin"]}):x?r.jsxs(H,{variant:"primary",className:"bg-gradient-to-r from-primary-500 to-primary-600 text-[10px] h-5",children:[r.jsx(qe,{className:"w-3 h-3 mr-1"})," Admin"]}):null]}),r.jsx("div",{className:"flex items-center justify-center md:justify-start gap-4 text-sm text-light-muted dark:text-dark-muted mb-4",children:r.jsxs("span",{children:["Joined ",ct(i.createdAt,{addSuffix:!0})]})}),r.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-6 mb-4 md:mb-0",children:[r.jsxs(re,{to:`/profile/${e}/followers`,className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:i.stats.followerCount||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Followers"})]}),r.jsxs(re,{to:`/profile/${e}/following`,className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:i.stats.followingCount||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Following"})]}),r.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:i.stats.likesReceived||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Likes"})]})]})]}),t._id!==e&&r.jsx("div",{className:"shrink-0 flex justify-center md:justify-start",children:r.jsx(M,{variant:d?"outline":"primary",onClick:h,isLoading:u,className:"min-w-[120px] rounded-lg h-9 text-sm",children:d?r.jsxs(r.Fragment,{children:[r.jsx(Xw,{className:"w-4 h-4 mr-2"})," Unfollow"]}):r.jsxs(r.Fragment,{children:[r.jsx(sc,{className:"w-4 h-4 mr-2"})," Follow"]})})})]})]})]}),r.jsxs("div",{className:"space-y-6 pt-6 border-t border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text",children:"Posts"}),r.jsxs("div",{className:"relative w-full md:w-64",children:[r.jsx(ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",placeholder:"Search posts...",value:n,onChange:v=>a(v.target.value),className:"w-full pl-9 pr-4 py-2 rounded-lg bg-light-card/50 dark:bg-dark-card/50 border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none text-sm"})]})]}),o===void 0?r.jsx("div",{className:"grid gap-6",children:[1,2].map(v=>r.jsx("div",{className:"glass rounded-2xl p-6 h-40 animate-pulse"},v))}):o.length===0?r.jsx("div",{className:"text-center py-12 glass rounded-2xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No posts yet"})}):l.length===0?r.jsx("div",{className:"text-center py-12 glass rounded-2xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No posts match your search"})}):r.jsx("div",{className:"grid gap-6",children:l.map(v=>r.jsx(ho,{post:v,onCommentClick:()=>window.location.href=`/post/${v._id}`,hasUserLiked:v.hasLiked},v._id))})]})]})]})})}function kO(){return r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 md:mt-6 space-y-6 md:space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"About Baptizo"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text max-w-2xl mx-auto",children:"A community dedicated to spiritual growth through ancient wisdom and modern insights"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"glass rounded-xl p-6 border border-primary-500/20",children:[r.jsx(p3,{className:"w-12 h-12 text-primary-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Purpose"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"To create a space where believers can deepen their understanding of both Old and New Testament teachings, fostering spiritual growth and community."})]}),r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"glass rounded-xl p-6 border border-secondary-500/20",children:[r.jsx(vn,{className:"w-12 h-12 text-secondary-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Values"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Authenticity, spiritual depth, community support, and continuous learning guide everything we do."})]}),r.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"glass rounded-xl p-6 border border-accent-500/20",children:[r.jsx(Se,{className:"w-12 h-12 text-accent-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Community"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"A diverse group of believers united by a shared desire to grow in faith and understanding."})]}),r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"glass rounded-xl p-6 border border-primary-500/20",children:[r.jsx(Ts,{className:"w-12 h-12 text-primary-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Approach"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Combining ancient prophetic wisdom with contemporary spiritual insights for holistic faith development."})]})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"glass rounded-xl p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-4",children:"Our Story"}),r.jsxs("div",{className:"space-y-4 text-light-muted dark:text-dark-muted",children:[r.jsx("p",{children:"Baptizo was founded with a vision to bridge the gap between ancient biblical wisdom and modern spiritual understanding. We believe that both the teachings of the Old Testament and the revelations of the New Testament hold profound truths for today's believers."}),r.jsx("p",{children:"Through our platform, we provide curated teachings, community discussions, and opportunities for spiritual engagement. Our admin team carefully crafts content that helps members explore Ancient Culture (Old Testament wisdom) and Wisdom of The Now (New Testament insights)."}),r.jsx("p",{children:"Whether you're seeking to deepen your understanding of prophetic systems, explore spiritual identity, or connect with like-minded believers, Baptizo offers a supportive community for your journey."})]})]})]})]})})}function jO(){return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Privacy Policy"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Last updated: December 2024"})]}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(qe,{className:"w-8 h-8 text-primary-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"Protected Data"})]}),r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(Nt,{className:"w-8 h-8 text-secondary-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"Secure Storage"})]}),r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(Et,{className:"w-8 h-8 text-accent-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"Transparent Use"})]}),r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(rc,{className:"w-8 h-8 text-primary-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"User Control"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(va,{title:"Information We Collect",content:["Account Information: Name, email address, and profile picture","Content: Posts, responses, comments, and interactions within the community","Usage Data: How you interact with our platform to improve user experience","Device Information: Browser type, IP address for security purposes"]}),r.jsx(va,{title:"How We Use Your Information",content:["Provide and maintain our services","Notify you about changes and updates","Allow participation in community features","Provide customer support","Monitor and analyze usage patterns","Detect and prevent fraudulent activity"]}),r.jsx(va,{title:"Data Sharing",content:["We do NOT sell your personal information to third parties","Your profile and public content are visible to other community members","We may share data with service providers who assist in operating our platform","We may disclose information if required by law or to protect our rights"]}),r.jsx(va,{title:"Your Rights",content:["Access your personal data","Correct inaccurate information","Request deletion of your account and data","Opt-out of marketing communications","Export your data"]}),r.jsx(va,{title:"Data Security",content:["We implement industry-standard security measures","All data is encrypted in transit and at rest","Regular security audits and updates","Access controls and authentication requirements"]}),r.jsx(va,{title:"Contact Us",content:["If you have questions about this Privacy Policy, please contact us through our Contact page or email us at privacy@baptizo.com"]})]})]})]})})}function va({title:e,content:t}){return r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-4",children:e}),r.jsx("ul",{className:"space-y-2",children:t.map((s,n)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-primary-500 mt-1",children:""}),r.jsx("span",{children:s})]},n))})]})}function NO(){return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx(rr,{className:"w-16 h-16 text-primary-500 mx-auto mb-4"}),r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Terms of Service"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Last updated: December 2024"})]}),r.jsx("div",{className:"glass rounded-xl p-6 bg-primary-50/50 dark:bg-primary-900/10 border border-primary-500/20",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(un,{className:"w-6 h-6 text-primary-500 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text mb-2",children:"Agreement to Terms"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"By accessing Baptizo, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree, please discontinue use of our platform."})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(Dr,{title:"1. User Accounts",content:["You must be at least 13 years old to create an account","Provide accurate and complete information during registration","Maintain the security of your account credentials","You are responsible for all activities under your account","Notify us immediately of any unauthorized access"]}),r.jsx(Dr,{title:"2. User Conduct",content:["Be respectful and courteous to all community members","Do not post hateful, abusive, or harassing content","Do not spam or post irrelevant content","Respect intellectual property rights","Do not impersonate others or misrepresent affiliations","Follow our Community Guidelines at all times"]}),r.jsx(Dr,{title:"3. Content Ownership",content:["You retain ownership of content you post","By posting, you grant Baptizo a license to use, display, and distribute your content","Admin-created content remains property of Baptizo","You may not use our content without permission"]}),r.jsx(Dr,{title:"4. Rewards & Recognition",content:["Rewards are granted at admin discretion for quality contributions","Rewards may have specific terms and conditions","We reserve the right to modify or discontinue reward programs","Fraudulent activity may result in reward forfeiture and account termination"]}),r.jsx(Dr,{title:"5. Prohibited Activities",content:["Attempting to hack or compromise platform security","Using automated tools or bots without permission","Selling or transferring your account","Posting illegal, harmful, or inappropriate content","Violating any applicable laws or regulations"]}),r.jsx(Dr,{title:"6. Termination",content:["We may suspend or terminate accounts that violate these terms","You may delete your account at any time","Upon termination, your right to use Baptizo ceases immediately","We may retain certain data as required by law"]}),r.jsx(Dr,{title:"7. Disclaimers",content:["Baptizo is provided 'as is' without warranties of any kind","We do not guarantee uninterrupted or error-free service","Content is for informational purposes and not professional advice","We are not responsible for user-generated content"]}),r.jsx(Dr,{title:"8. Limitation of Liability",content:["Baptizo shall not be liable for indirect, incidental, or consequential damages","Our liability is limited to the amount you paid, if any","Some jurisdictions do not allow these limitations"]}),r.jsx(Dr,{title:"9. Changes to Terms",content:["We may update these terms from time to time","Continued use after changes constitutes acceptance","Material changes will be announced to users"]}),r.jsx(Dr,{title:"10. Contact Information",content:["For questions about these Terms, contact us at terms@baptizo.com or through our Contact page"]})]}),r.jsx("div",{className:"glass rounded-xl p-6 border border-secondary-500/20",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(et,{className:"w-6 h-6 text-secondary-500 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text mb-2",children:"Acceptance"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"By using Baptizo, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."})]})]})})]})]})})}function Dr({title:e,content:t}){return r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text mb-4",children:e}),r.jsx("ul",{className:"space-y-2",children:t.map((s,n)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-primary-500 mt-1",children:""}),r.jsx("span",{children:s})]},n))})]})}function SO(){const[e,t]=p.useState({name:"",email:"",subject:"",message:""}),[s,n]=p.useState(!1),[a,i]=p.useState(!1),o=V(C.contacts.submitContact),l=async d=>{d.preventDefault(),i(!0);try{await o(e),n(!0),t({name:"",email:"",subject:"",message:""}),setTimeout(()=>n(!1),3e3)}catch(c){console.error("Failed to submit contact:",c)}finally{i(!1)}};return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Contact Us"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text",children:"We'd love to hear from you"})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"glass rounded-xl p-6 text-center hover:shadow-lg transition-shadow",children:[r.jsx(Kr,{className:"w-10 h-10 text-primary-500 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text mb-2",children:"Email"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"support@baptizo.com"})]}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center hover:shadow-lg transition-shadow",children:[r.jsx($t,{className:"w-10 h-10 text-secondary-500 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text mb-2",children:"Community"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Ask in the Feed"})]}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center hover:shadow-lg transition-shadow",children:[r.jsx(Zd,{className:"w-10 h-10 text-accent-500 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text mb-2",children:"FAQ"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Check our FAQ page"})]})]}),r.jsxs("div",{className:"glass rounded-xl p-6 md:p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-6",children:"Send us a message"}),s?r.jsxs("div",{className:"glass rounded-lg p-6 bg-secondary-50/50 dark:bg-secondary-900/10 border border-secondary-500/20 text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-secondary-600 dark:text-secondary-400 mb-2",children:"Message Sent!"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"We'll get back to you as soon as possible."})]}):r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Name"}),r.jsx("input",{type:"text",required:!0,value:e.name,onChange:d=>t({...e,name:d.target.value}),className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",placeholder:"Your name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Email"}),r.jsx("input",{type:"email",required:!0,value:e.email,onChange:d=>t({...e,email:d.target.value}),className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",placeholder:"your@email.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Subject"}),r.jsx("input",{type:"text",required:!0,value:e.subject,onChange:d=>t({...e,subject:d.target.value}),className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",placeholder:"What's this about?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Message"}),r.jsx("textarea",{required:!0,value:e.message,onChange:d=>t({...e,message:d.target.value}),rows:6,className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none resize-none",placeholder:"Tell us more..."})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full md:w-auto px-8 py-3 rounded-lg bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white font-semibold transition-colors shadow-lg shadow-primary-500/20",children:a?"Sending...":"Send Message"})]})]})]})]})})}const CO=[{category:"Getting Started",questions:[{q:"What is Baptizo?",a:"Baptizo is a faith-based community platform focused on spiritual growth through Ancient Culture (Old Testament wisdom) and Wisdom of The Now (New Testament insights)."},{q:"How do I create an account?",a:"Click the 'Get Started' button on the homepage, fill in your details, and verify your email address. You'll gain immediate access to the community."},{q:"Is Baptizo free to use?",a:"Yes! Baptizo is completely free for all members. We believe spiritual growth should be accessible to everyone."}]},{category:"Using the Platform",questions:[{q:"What's the difference between Ancient Culture and Wisdom of The Now?",a:"Ancient Culture focuses on Old Testament teachings, prophetic wisdom, and ancient systems. Wisdom of The Now explores New Testament insights, spiritual identity, and contemporary applications of faith."},{q:"Who can create posts?",a:"Admin-created posts appear in Ancient Culture and Wisdom sections. All members can engage through responses, comments, and the community feed."},{q:"How do I submit a response to a post?",a:"When you see an official admin post, look for the 'Submit Official Response' button. Click it to share your thoughts and insights."}]},{category:"Rewards & Recognition",questions:[{q:"How does the reward system work?",a:"Admins review responses to official posts and assign rewards based on quality, depth, and insight. Top responses are featured and may receive recognition or benefits."},{q:"What happens after I submit a response?",a:"Your response is reviewed by admins who may grade it and provide feedback. Exceptional responses are featured and rewarded."}]},{category:"Community Guidelines",questions:[{q:"What content is allowed?",a:"We welcome respectful, faith-based discussions. Content should be relevant, thoughtful, and align with our values of spiritual growth and community support."},{q:"What should I do if I see inappropriate content?",a:"Use the report function or contact admins directly. We take community standards seriously and review all reports promptly."}]},{category:"Account & Privacy",questions:[{q:"How do I update my profile?",a:"Navigate to your Profile page and click the edit button. You can update your name, avatar, and other personal information."},{q:"Is my data safe?",a:"Yes! We use industry-standard encryption and security measures. Read our Privacy Policy for full details on how we protect your information."},{q:"Can I delete my account?",a:"Yes, you can delete your account anytime from your profile settings. Note that this action is permanent and cannot be undone."}]}];function TO(){return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Frequently Asked Questions"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text",children:"Find answers to common questions about Baptizo"})]}),r.jsx("div",{className:"space-y-8",children:CO.map((e,t)=>r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-4",children:e.category}),r.jsx("div",{className:"space-y-3",children:e.questions.map((s,n)=>r.jsx(_O,{question:s.q,answer:s.a},n))})]},t))}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Still have questions?"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-4",children:"Can't find what you're looking for? Reach out to our support team."}),r.jsx("a",{href:"/contact",className:"inline-block px-6 py-3 rounded-lg bg-primary-500 hover:bg-primary-600 text-white font-semibold transition-colors shadow-lg shadow-primary-500/20",children:"Contact Support"})]})]})]})})}function _O({question:e,answer:t}){const[s,n]=p.useState(!1);return r.jsxs(T.div,{initial:!1,className:"glass rounded-lg overflow-hidden border border-light-border dark:border-dark-border",children:[r.jsxs("button",{onClick:()=>n(!s),className:"w-full px-6 py-4 flex items-center justify-between text-left hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:[r.jsx("span",{className:"font-semibold text-light-text dark:text-dark-text pr-4",children:e}),s?r.jsx(Hn,{className:"w-5 h-5 text-primary-500 flex-shrink-0"}):r.jsx(Je,{className:"w-5 h-5 text-light-muted dark:text-dark-muted flex-shrink-0"})]}),r.jsx(T.div,{initial:!1,animate:{height:s?"auto":0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"px-6 pb-4 text-light-muted dark:text-dark-muted",children:t})})]})}function IO(){const e=[{icon:vn,title:"Be Respectful",description:"Treat all community members with kindness and respect. No harassment, hate speech, or discriminatory language.",color:"text-red-500"},{icon:ut,title:"Stay On Topic",description:"Keep discussions relevant to faith, spiritual growth, and biblical teachings. Avoid spam or irrelevant content.",color:"text-primary-500"},{icon:Se,title:"Support Others",description:"Encourage fellow members in their faith journey. Offer constructive feedback and genuine support.",color:"text-secondary-500"},{icon:qe,title:"Protect Privacy",description:"Don't share personal information about yourself or others. Respect everyone's privacy and confidentiality.",color:"text-accent-500"}],t=["Engage thoughtfully with posts and responses","Cite scriptures and sources when appropriate","Ask genuine questions and seek understanding","Celebrate others' insights and growth","Report concerning content to admins","Use appropriate language and tone"],s=["Post hateful, abusive, or harassing content","Spam or post repetitive content","Share misleading or false information","Impersonate others or misrepresent yourself","Promote non-faith-related products or services","Engage in heated arguments or flame wars"];return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nt,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Community Guidelines"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text max-w-2xl mx-auto",children:"Our guidelines help maintain a welcoming, respectful community for spiritual growth"})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.map((n,a)=>{const i=n.icon;return r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"glass rounded-xl p-6 border border-light-border dark:border-dark-border hover:shadow-lg transition-shadow",children:[r.jsx(i,{className:`w-10 h-10 ${n.color} mb-4`}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:n.title}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted text-sm",children:n.description})]},a)})}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Qt,{className:"w-6 h-6 text-green-500"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text",children:"Do"})]}),r.jsx("ul",{className:"space-y-2",children:t.map((n,a)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-green-500 mt-1 flex-shrink-0",children:""}),r.jsx("span",{children:n})]},a))})]}),r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(yr,{className:"w-6 h-6 text-red-500"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text",children:"Don't"})]}),r.jsx("ul",{className:"space-y-2",children:s.map((n,a)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-red-500 mt-1 flex-shrink-0",children:""}),r.jsx("span",{children:n})]},a))})]})]}),r.jsxs("div",{className:"glass rounded-xl p-6 bg-primary-50/50 dark:bg-primary-900/10 border border-primary-500/20",children:[r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-4",children:"Enforcement"}),r.jsxs("div",{className:"space-y-3 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("p",{children:"Violations of these guidelines may result in:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[r.jsx("li",{children:"Warning from moderators"}),r.jsx("li",{children:"Temporary suspension of posting privileges"}),r.jsx("li",{children:"Permanent account termination for severe or repeated violations"})]}),r.jsx("p",{className:"mt-4",children:"We're committed to maintaining a positive community. If you see content that violates these guidelines, please report it to our admin team."})]})]}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Questions about our guidelines?"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-4",children:"Reach out to our team for clarification."}),r.jsx("a",{href:"/contact",className:"inline-block px-6 py-3 rounded-lg bg-primary-500 hover:bg-primary-600 text-white font-semibold transition-colors shadow-lg shadow-primary-500/20",children:"Contact Us"})]})]})]})})}function PO(){const{user:e,isLoading:t}=X(),s=le(),n=O(C.users.getAllUsers,e?{adminId:e._id}:"skip"),a=V(C.users.updateUserRole),i=V(C.finance.assignFinancialManager),[o,l]=p.useState(""),[d,c]=p.useState(!1),[u,m]=p.useState(!1),[h,x]=p.useState(null),[g,v]=p.useState(null),[w,f]=p.useState(1),b=10;p.useEffect(()=>{f(1)},[o]);const y=(n==null?void 0:n.filter(N=>N.name.toLowerCase().includes(o.toLowerCase())||N.email.toLowerCase().includes(o.toLowerCase())))||[],k=w*b,j=k-b,S=y.slice(j,k),P=Math.ceil(y.length/b),R=(N,I,A,W,G)=>{let se="",Q="",de=qe,z="text-primary-500";W==="admin"?A==="admin"?G==="board_member"?(se="revert this user from Admin to Board Member",Q="board_member",de=Se,z="text-blue-500"):(se="demote this user from Admin to Member",Q="member",de=Se,z="text-gray-500"):(se="promote this user to Admin",Q="admin",de=u3,z="text-primary-500"):W==="board"&&(A==="board_member"?(se="remove this user from Board Members",Q="member",de=Se,z="text-gray-500"):(se="add this user to Board Members",Q="board_member",de=rc,z="text-blue-500")),v({id:N,name:I,action:se,newRole:Q,icon:de,color:z}),c(!0)},L=async()=>{if(!(!g||!e))try{await a({adminId:e._id,userId:g.id,newRole:g.newRole}),c(!1),v(null)}catch(N){console.error("Failed to update role",N)}};return t?r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):!e||e.role!=="admin"&&e.role!=="super_admin"?r.jsx(Me,{to:"/feed",replace:!0}):r.jsxs("div",{className:"space-y-8 pb-12",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gradient font-display mb-1",children:"Role Management"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Assign and manage administrative privileges for community members"})]}),r.jsx("div",{className:"w-full md:w-80",children:r.jsx(be,{placeholder:"Search by name or email...",value:o,onChange:N=>l(N.target.value),icon:r.jsx(ft,{className:"w-5 h-5 text-light-muted"}),className:"bg-white/50 dark:bg-dark-card/50 backdrop-blur-sm border-light-border dark:border-dark-border"})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(D,{glass:!0,className:"border-primary-500/20",children:r.jsxs(U,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary-500/10 flex items-center justify-center",children:r.jsx(qe,{className:"w-6 h-6 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Admins"}),r.jsx("p",{className:"text-2xl font-bold",children:(n==null?void 0:n.filter(N=>N.role==="admin"||N.role==="super_admin").length)||0})]})]})}),r.jsx(D,{glass:!0,className:"border-blue-500/20",children:r.jsxs(U,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center",children:r.jsx(rc,{className:"w-6 h-6 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Board Members"}),r.jsx("p",{className:"text-2xl font-bold",children:(n==null?void 0:n.filter(N=>N.role==="board_member").length)||0})]})]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.jsx(te,{mode:"popLayout",children:n===void 0?Array.from({length:6}).map((N,I)=>r.jsx("div",{children:r.jsx(ND,{})},I)):S.length>0?S.map(N=>r.jsx(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:r.jsxs(D,{glass:!0,className:`h-full group hover:border-primary-500/30 transition-all duration-300 overflow-hidden relative ${N.role==="admin"||N.role==="super_admin"?"border-primary-500/50":N.role==="board_member"?"border-blue-500/50":""}`,children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary-500/5 to-transparent rounded-bl-full pointer-events-none"}),r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{onClick:()=>s(`/admin/user/${N._id}`),className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-light-bg to-light-card dark:from-dark-bg dark:to-dark-card border border-light-border dark:border-dark-border flex items-center justify-center text-xl font-bold text-gradient overflow-hidden shadow-sm cursor-pointer hover:scale-105 transition-transform duration-200",children:N.avatarUrl?r.jsx("img",{src:N.avatarUrl,alt:N.name,className:"w-full h-full object-cover"}):N.name[0]}),r.jsx(H,{variant:N.role==="admin"||N.role==="super_admin"?"primary":N.role==="board_member"?"secondary":"default",className:"px-3 py-1",children:N.role.replace("_"," ")})]}),r.jsxs("div",{className:"space-y-1 mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text truncate",children:N.name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-light-muted dark:text-dark-muted",children:[r.jsx(Kr,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"truncate",children:N.email})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-light-muted dark:text-dark-muted",children:[r.jsx(Jx,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:N.phone||"No phone"})]})]}),e.role==="super_admin"&&N.role!=="super_admin"&&r.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t border-light-border/50 dark:border-dark-border/50",children:[r.jsx(M,{variant:N.role==="admin"?"outline":"primary",size:"sm",className:"w-full text-[10px] font-bold h-9",onClick:()=>R(N._id,N.name,N.role,"admin",N.previousRole),children:N.role==="admin"?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Se,{className:"w-3 h-3"}),"Demote"]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(qe,{className:"w-3 h-3"}),"Make Admin"]})}),r.jsx(M,{variant:N.role==="board_member"?"outline":"secondary",size:"sm",className:`w-full text-[10px] font-bold h-9 ${N.role==="board_member"?"border-blue-500 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/10":""}`,onClick:()=>R(N._id,N.name,N.role,"board"),children:N.role==="board_member"?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(sc,{className:"w-3 h-3"}),"Remove Board"]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(sc,{className:"w-3 h-3"}),"Add Board"]})})]}),e.role==="super_admin"&&N.role==="board_member"&&r.jsx("div",{className:"pt-3",children:r.jsx(M,{variant:N.isFinancialManager?"primary":"outline",size:"sm",className:"w-full text-[10px] font-bold h-9",onClick:()=>{x({id:N._id,name:N.name,isCurrentlyManager:N.isFinancialManager||!1}),m(!0)},children:r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ar,{className:"w-3 h-3"}),N.isFinancialManager?"Remove Finance Role":"Make Finance Manager"]})})})]})]})},N._id)):r.jsxs("div",{className:"col-span-full py-12 text-center text-light-muted",children:[r.jsx(Se,{className:"w-16 h-16 mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"text-lg",children:"No users found matching your search"})]})})}),P>1&&r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-12 bg-light-card/30 dark:bg-dark-card/30 p-4 rounded-3xl border border-light-border/20 dark:border-dark-border/20 max-w-fit mx-auto",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>f(N=>Math.max(1,N-1)),disabled:w===1,className:"rounded-xl h-10 w-10 p-0",children:r.jsx(ta,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex items-center gap-1.5 px-2",children:Array.from({length:P},(N,I)=>I+1).map(N=>r.jsx("button",{onClick:()=>f(N),className:`
                                    w-10 h-10 rounded-xl text-sm font-bold transition-all
                                    ${w===N?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-light-muted hover:bg-light-card dark:hover:bg-dark-card hover:text-primary-500"}
                                `,children:N},N))}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>f(N=>Math.min(P,N+1)),disabled:w===P,className:"rounded-xl h-10 w-10 p-0",children:r.jsx(Oo,{className:"w-5 h-5"})})]}),r.jsx(gt,{isOpen:d,onClose:()=>c(!1),title:"Confirm Role Change",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[r.jsx("div",{className:`w-20 h-20 rounded-3xl bg-gradient-to-br from-light-bg to-light-card dark:from-dark-bg dark:to-dark-card border border-light-border dark:border-dark-border flex items-center justify-center mb-4 shadow-xl ${g==null?void 0:g.color}`,children:g&&r.jsx(g.icon,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:"Confirm Action"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs",children:["Are you sure you want to ",g==null?void 0:g.action," ",r.jsx("strong",{children:g==null?void 0:g.name}),"?"]})]}),r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-amber-500/5 border border-amber-500/20",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center shrink-0",children:r.jsx(un,{className:"w-6 h-6 text-amber-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-amber-700 dark:text-amber-500 mb-1",children:"Important Security Note"}),r.jsx("p",{className:"text-xs text-amber-700/70 dark:text-amber-500/70",children:"This user will gain or lose access to administrative tools and sensitive data. This action is logged."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(M,{variant:"ghost",className:"w-full rounded-2xl h-12",onClick:()=>c(!1),children:"Cancel"}),r.jsx(M,{variant:"primary",className:"w-full rounded-2xl h-12 shadow-lg shadow-primary-500/20",onClick:L,children:"Yes, Update Role"})]})]})}),r.jsx(gt,{isOpen:u,onClose:()=>m(!1),title:"Financial Manager Assignment",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-emerald-500/10 to-emerald-500/5 border border-emerald-500/20 flex items-center justify-center mb-4 shadow-xl",children:r.jsx(Ar,{className:"w-10 h-10 text-emerald-500"})}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:"Confirm Action"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs",children:h!=null&&h.isCurrentlyManager?`Remove ${h==null?void 0:h.name} from Financial Manager role?`:`Assign ${h==null?void 0:h.name} as Financial Manager?`})]}),r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-blue-500/5 border border-blue-500/20",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center shrink-0",children:r.jsx(un,{className:"w-6 h-6 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-blue-700 dark:text-blue-500 mb-1",children:"Financial Manager Permissions"}),r.jsx("p",{className:"text-xs text-blue-700/70 dark:text-blue-500/70",children:h!=null&&h.isCurrentlyManager?"This user will lose access to add/reverse financial transactions.":"This user will be able to add and reverse financial transactions (within 24 hours) but cannot create meetings."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(M,{variant:"ghost",className:"w-full rounded-2xl h-12",onClick:()=>m(!1),children:"Cancel"}),r.jsxs(M,{variant:"primary",className:"w-full rounded-2xl h-12 shadow-lg shadow-primary-500/20",onClick:async()=>{h&&(await i({adminId:e._id,userId:h.id,assign:!h.isCurrentlyManager}),m(!1),x(null))},children:["Yes, ",h!=null&&h.isCurrentlyManager?"Remove":"Assign"]})]})]})})]})}function AO(){const{userId:e}=da(),t=le(),{user:s}=X(),[n,a]=p.useState(null),i=O(C.users.getUser,{userId:e}),o=O(C.users.getUserStats,{userId:e}),l=(d,c)=>{navigator.clipboard.writeText(d),a(c),setTimeout(()=>a(null),2e3)};return i===void 0?r.jsx("div",{className:"py-8",children:r.jsx(_D,{})}):i?r.jsxs("div",{className:"max-w-5xl mx-auto pb-20",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors group",children:[r.jsx("div",{className:"p-2 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border group-hover:border-primary-500/50 transition-all",children:r.jsx(ta,{className:"w-5 h-5"})}),r.jsx("span",{className:"font-bold text-sm uppercase tracking-widest italic text-[10px]",children:"Back to Directory"})]}),r.jsxs(H,{variant:"outline",className:"px-4 py-1.5 border-primary-500/30 text-primary-500 font-bold",children:["USER_ID: ",i._id]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs(D,{glass:!0,className:"overflow-hidden border-primary-500/10",children:[r.jsx("div",{className:"h-24 bg-gradient-to-br from-primary-500/20 to-secondary-500/20 relative"}),r.jsx(U,{className:"px-6 pb-8 -mt-12 relative",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-24 h-24 rounded-[32px] bg-gradient-to-br from-primary-500 to-secondary-500 p-1 shadow-2xl shadow-primary-500/20 mb-4 bg-white dark:bg-dark-card border-4 border-light-bg dark:border-dark-bg",children:r.jsx("div",{className:"w-full h-full rounded-[28px] overflow-hidden flex items-center justify-center font-black text-3xl text-gradient",children:i.avatarUrl?r.jsx("img",{src:i.avatarUrl,alt:i.name,className:"w-full h-full object-cover"}):i.name[0]})}),r.jsx("h2",{className:"text-2xl font-black text-center text-light-text dark:text-dark-text",children:i.name}),r.jsx("p",{className:"text-primary-500 font-bold uppercase tracking-widest text-[10px] mt-1",children:i.role.replace("_"," ")}),r.jsxs("div",{className:"mt-8 w-full grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-3 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30 text-center",children:[r.jsx("p",{className:"text-lg font-black",children:(o==null?void 0:o.totalPosts)||0}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-tighter italic",children:"Total Posts"})]}),r.jsxs("div",{className:"p-3 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30 text-center",children:[r.jsx("p",{className:"text-lg font-black text-emerald-500",children:(o==null?void 0:o.totalRewards)||0}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-tighter italic",children:"Rewards"})]})]})]})})]}),r.jsxs(D,{glass:!0,className:"p-6 border-emerald-500/10",children:[r.jsxs(pe,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-light-muted mb-6 flex items-center gap-2",children:[r.jsx(WC,{className:"w-3 h-3 text-emerald-500"})," Community Activity"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-light-muted",children:"Followers"}),r.jsx("span",{className:"text-sm font-bold",children:(o==null?void 0:o.followerCount)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-light-muted",children:"Following"}),r.jsx("span",{className:"text-sm font-bold",children:(o==null?void 0:o.followingCount)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-light-muted",children:"Member Since"}),r.jsxs("span",{className:"text-sm font-bold flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3.5 h-3.5"}),new Date(i._creationTime).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs(D,{glass:!0,className:"overflow-hidden border-light-border/20 dark:border-dark-border/20",children:[r.jsx(xe,{className:"bg-light-card/30 dark:bg-dark-card/30 border-b border-light-border/20 dark:border-dark-border/20",children:r.jsxs(pe,{className:"text-xs font-black uppercase tracking-widest flex items-center gap-2",children:[r.jsx(St,{className:"w-4 h-4 text-primary-500"})," Identity Information"]})}),r.jsxs(U,{className:"p-8 grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(Kr,{className:"w-3 h-3"})," Email Address"]}),r.jsx("p",{className:"font-bold text-base truncate",children:i.email})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(Jx,{className:"w-3 h-3"})," Phone Number"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-bold text-base",children:i.phone||"N/A"}),i.network&&r.jsx(H,{variant:"secondary",className:"text-[9px] px-1.5 italic h-5",children:i.network})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(Vw,{className:"w-3 h-3"})," Profession / Field"]}),r.jsx("p",{className:"font-bold text-base capitalize",children:i.profession||"Community Member"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(et,{className:"w-3 h-3 text-emerald-500"})," Verification"]}),r.jsx("p",{className:"font-bold text-sm",children:i.whatsappVerified?r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1.5",children:["WhatsApp Verified ",r.jsx(qe,{className:"w-3 h-3"})]}):r.jsx("span",{className:"text-rose-500",children:"Unverified Account"})})]})]})]})]}),r.jsxs(D,{glass:!0,className:"overflow-hidden border-amber-500/10",children:[r.jsx(xe,{className:"bg-amber-500/5 border-b border-amber-500/10",children:r.jsxs(pe,{className:"text-xs font-black uppercase tracking-widest flex items-center gap-2",children:[r.jsx(ii,{className:"w-4 h-4 text-amber-500"})," Payment & Bank Details"]})}),r.jsx(U,{className:"p-8",children:i.bankDetails?r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"md:col-span-2 p-5 rounded-2xl bg-amber-500/5 border border-amber-500/10 relative group",children:[r.jsx("label",{className:"text-[10px] font-black text-amber-600/60 uppercase tracking-widest mb-1 block",children:"Account Full Name"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xl font-black text-light-text dark:text-dark-text tracking-tight uppercase",children:i.bankDetails.accountName}),r.jsx("button",{onClick:()=>l(i.bankDetails.accountName,"accName"),className:"p-2 rounded-xl bg-amber-500/10 text-amber-600 hover:bg-amber-500/20 transition-all",children:n==="accName"?r.jsx(pt,{className:"w-4 h-4"}):r.jsx(bh,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"p-5 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30",children:[r.jsx("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1 block italic",children:"Financial Institution"}),r.jsx("p",{className:"text-lg font-bold",children:i.bankDetails.bankName})]}),r.jsxs("div",{className:"p-5 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30 relative group",children:[r.jsx("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1 block italic",children:"Account Identifier"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-lg font-mono font-black tracking-[0.2em]",children:i.bankDetails.accountNumber}),r.jsx("button",{onClick:()=>l(i.bankDetails.accountNumber,"accNum"),className:"p-2 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-all",children:n==="accNum"?r.jsx(pt,{className:"w-4 h-4 text-emerald-500"}):r.jsx(bh,{className:"w-4 h-4 text-light-muted"})})]})]})]}):r.jsxs("div",{className:"text-center py-10 opacity-60",children:[r.jsx(ii,{className:"w-12 h-12 text-light-muted mx-auto mb-4 stroke-1"}),r.jsx("p",{className:"font-bold text-light-muted",children:"No banking information provided yet."}),r.jsx("p",{className:"text-xs italic",children:"User needs to update their profile settings."})]})})]})]})]})]}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User not found"}),r.jsx(M,{onClick:()=>t(-1),children:"Go Back"})]})}function EO(){var n;const{id:e}=da(),t=le(),s=O(C.announcements.getAnnouncementById,e?{id:e}:"skip");return s===void 0?r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[r.jsx(nr,{}),r.jsx("div",{className:"h-64 bg-light-card dark:dark-card rounded-3xl animate-pulse mt-8"})]}):s?r.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg py-8",children:r.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors mb-8 group",children:[r.jsx("div",{className:"p-2 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border group-hover:border-primary-500/50",children:r.jsx(ta,{className:"w-5 h-5"})}),r.jsx("span",{className:"font-bold text-sm uppercase tracking-widest",children:"Back"})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[s.imageUrl&&r.jsxs("div",{className:"w-full h-80 md:h-[400px] rounded-[40px] overflow-hidden border border-light-border/20 dark:border-dark-border/20 shadow-2xl relative",children:[r.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),r.jsxs("div",{className:"absolute bottom-8 left-8 right-8",children:[r.jsx(H,{variant:"primary",className:"mb-4",children:"Official Announcement"}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-white font-display leading-tight",children:s.title})]})]}),!s.imageUrl&&r.jsxs("div",{className:"mb-4",children:[r.jsx(H,{variant:"primary",className:"mb-4",children:"Official Announcement"}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-light-text dark:text-dark-text font-display leading-tight",children:s.title})]}),r.jsx(D,{glass:!0,className:"border-primary-500/10",children:r.jsx(U,{className:"p-6",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center text-primary-500",children:r.jsx(St,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider leading-none mb-1",children:"Posted By"}),r.jsx("p",{className:"font-bold text-sm capitalize",children:((n=s.creatorRole)==null?void 0:n.replace("_"," "))||"Community Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center text-emerald-500",children:r.jsx(_t,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider leading-none mb-1",children:"Date Published"}),r.jsx("p",{className:"font-bold text-sm",children:new Date(s._creationTime).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/10 flex items-center justify-center text-orange-500",children:r.jsx(Fo,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider leading-none mb-1",children:"Category"}),r.jsx("p",{className:"font-bold text-sm",children:"General Update"})]})]})]})})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:r.jsx("p",{className:"text-light-text dark:text-dark-text text-xl md:text-2xl leading-relaxed font-medium",children:s.description})}),r.jsx("div",{className:"pt-12 flex items-center justify-center",children:r.jsx(M,{variant:"primary",size:"lg",onClick:()=>t("/feed"),className:"px-12 rounded-2xl shadow-xl shadow-primary-500/20",children:"Return to Feed"})})]})]})]})}):r.jsxs("div",{className:"container mx-auto px-4 py-32 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Announcement not found"}),r.jsx(M,{onClick:()=>t("/feed"),children:"Back to Feed"})]})}function MO(){const{user:e,isLoading:t}=X(),s=le(),n=O(C.governance.getMeetings),a=O(C.finance.getTransactions,{limit:5}),i=O(C.finance.getMyContributions,e?{userId:e._id,year:new Date().getFullYear()}:"skip"),o=O(C.governance.getUserAttendance,e?{userId:e._id}:"skip"),l=O(C.finance.getCurrentBalance);if(t||n===void 0||a===void 0||i===void 0||o===void 0)return r.jsxs("div",{className:"space-y-8 p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("div",{className:"h-4 w-48 bg-light-muted/10 animate-pulse rounded"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(x=>r.jsx(Wt,{},x))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx(Oe,{}),r.jsx(Oe,{}),r.jsx(Oe,{})]})]});if(!e)return r.jsx(Me,{to:"/login",replace:!0});if(e.role!=="board_member"&&e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Me,{to:"/feed",replace:!0});const d=o!=null&&o.length?Math.round(o.filter(x=>x.status==="present"||x.status==="late"||x.status==="excused").length/o.length*100):100,c=(i==null?void 0:i.reduce((x,g)=>x+g.totalPaid,0))||0,u=i&&i.length>0?i[0]:null,m=x=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(x),h=[{label:"Attendance Rate",value:`${d}%`,icon:_t,color:"text-primary-500",bg:"bg-primary-500/10",path:"/board/attendance"},{label:"Community Balance",value:m(l||0),icon:qe,color:"text-amber-500",bg:"bg-amber-500/10",path:"/board/finance"},{label:"Yearly Contributions",value:m(c),icon:Ar,color:"text-emerald-500",bg:"bg-emerald-500/10",path:"/board/contributions"},{label:"Current Status",value:u?u.status.charAt(0).toUpperCase()+u.status.slice(1):"Cleared",icon:et,color:(u==null?void 0:u.status)==="owing"?"text-rose-500":"text-emerald-500",bg:(u==null?void 0:u.status)==="owing"?"bg-rose-500/10":"bg-emerald-500/10",path:"/board/contributions"}];return r.jsxs("div",{className:"space-y-8 pb-20",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Board Hub Dashboard"})]}),r.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:["Shalom, ",e.name.split(" ")[0]]}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Centralized overview of governance, finance, and your contributions."})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((x,g)=>r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},children:r.jsx(D,{className:"cursor-pointer hover:border-primary-500/30 transition-all group",onClick:()=>s(x.path),children:r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`p-3 rounded-2xl ${x.bg} ${x.color}`,children:r.jsx(x.icon,{className:"w-6 h-6"})}),r.jsx("div",{className:`text-xl font-black ${x.color}`,children:x.value})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted",children:x.label})]})})},x.label))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs(D,{className:"lg:col-span-1",children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Se,{className:"w-5 h-5 text-primary-500"}),"Meeting Records"]}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:()=>s("/board/attendance"),children:r.jsx(Mt,{className:"w-4 h-4"})})]})}),r.jsxs(U,{className:"space-y-4",children:[n&&n.slice(0,4).map(x=>r.jsxs("div",{className:"p-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg/30 dark:bg-dark-bg/30",children:[r.jsx("p",{className:"font-bold text-sm truncate",children:x.title}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("span",{className:"text-[10px] text-light-muted font-medium",children:new Date(x.date).toLocaleDateString()}),r.jsx(H,{className:`${x.status==="active"?"bg-emerald-500 animate-pulse":x.status==="ended"?"bg-light-muted/20 text-light-muted":"bg-primary-500/50"}`,children:x.status})]})]},x._id)),(!n||n.length===0)&&r.jsx("div",{className:"text-center py-6 text-xs text-light-muted italic",children:"No meeting records yet"})]})]}),r.jsxs(D,{className:"lg:col-span-1 border-emerald-500/20",children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yx,{className:"w-5 h-5 text-emerald-500"}),"Financial History"]}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 px-2 text-emerald-500 hover:text-emerald-600",onClick:()=>s("/board/finance"),children:r.jsx(Mt,{className:"w-4 h-4"})})]})}),r.jsx(U,{className:"space-y-4",children:a&&a.map(x=>r.jsxs("div",{className:"p-3 rounded-xl border border-emerald-500/10 bg-emerald-500/5",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("p",{className:"text-xs font-bold truncate max-w-[120px]",children:x.description}),r.jsxs("p",{className:`text-xs font-black ${x.type==="deposit"?"text-emerald-500":"text-rose-500"}`,children:[x.type==="deposit"?"+":"-",m(x.amount)]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-[9px] text-light-muted",children:new Date(x.createdAt).toLocaleDateString()}),r.jsx("span",{className:"text-[9px] text-light-muted uppercase font-black",children:x.memberName||"System"})]})]},x._id))})]}),r.jsxs(D,{className:"lg:col-span-1 border-primary-500/20",children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ii,{className:"w-5 h-5 text-primary-500"}),"My Stake"]}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:()=>s("/board/contributions"),children:r.jsx(Mt,{className:"w-4 h-4"})})]})}),r.jsxs(U,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[r.jsxs("div",{className:"p-3 rounded-xl bg-primary-500/5 text-center border border-primary-500/10",children:[r.jsx("p",{className:"text-[9px] font-black text-light-muted uppercase",children:"Paid this Year"}),r.jsx("p",{className:"text-sm font-black text-primary-500",children:m(c)})]}),r.jsxs("div",{className:"p-3 rounded-xl bg-primary-500/5 text-center border border-primary-500/10",children:[r.jsx("p",{className:"text-[9px] font-black text-light-muted uppercase",children:"Monthly Due"}),r.jsx("p",{className:"text-sm font-black text-primary-500",children:"1,000"})]})]}),r.jsx("div",{className:"space-y-2",children:i&&i.slice(0,3).map((x,g)=>r.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-light-bg/50 dark:bg-dark-bg/50 text-xs",children:[r.jsx("span",{className:"font-bold",children:new Date(2024,x.month-1).toLocaleDateString("en-US",{month:"short"})}),r.jsx("span",{className:"font-medium",children:m(x.totalPaid)}),r.jsx(H,{className:x.status==="cleared"?"bg-emerald-500":"bg-rose-500",children:x.status})]},g))})]})]})]})]})}function RO(){const{user:e,isLoading:t}=X(),[s,n]=p.useState("all"),a=O(C.boardTasks.getTasks,e&&(e.role==="board_member"||e.role==="admin"||e.role==="super_admin")?{userId:e._id}:"skip"),i=V(C.boardTasks.updateTaskStatus);if(t)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl",children:[r.jsx(nr,{}),r.jsx(n1,{}),r.jsx(ia,{count:4})]})});if(!e)return r.jsx(Me,{to:"/login",replace:!0});if(e.role!=="board_member"&&e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Me,{to:"/feed",replace:!0});const[o,l]=p.useState("my_tasks"),d=(a==null?void 0:a.filter(u=>o==="my_tasks"&&u.assignedTo!==e._id?!1:s==="all"?!0:u.status===s))||[],c=async(u,m)=>{if(e)try{await i({userId:e._id,taskId:u,status:m})}catch(h){console.error("Failed to update task status:",h)}};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Service & Operations"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Mission Control"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 justify-between items-start lg:items-center mb-10",children:[r.jsx("div",{className:"flex bg-light-card/50 dark:bg-dark-card/50 p-1.5 rounded-2xl border border-light-border dark:border-dark-border overflow-x-auto no-scrollbar max-w-full",children:[{key:"all",label:"All Directives",count:(a==null?void 0:a.length)||0},{key:"todo",label:"Pending",count:(a==null?void 0:a.filter(u=>u.status==="todo").length)||0},{key:"in_progress",label:"Active",count:(a==null?void 0:a.filter(u=>u.status==="in_progress").length)||0},{key:"completed",label:"Fulfilled",count:(a==null?void 0:a.filter(u=>u.status==="completed").length)||0}].map(u=>r.jsxs("button",{onClick:()=>n(u.key),className:`px-6 py-2.5 rounded-xl font-black uppercase tracking-widest text-[10px] transition-all whitespace-nowrap ${s===u.key?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:[u.label," ",r.jsx("span",{className:`ml-1 opacity-60 ${s===u.key?"text-white":""}`,children:u.count})]},u.key))}),r.jsxs("div",{className:"flex bg-light-bg dark:bg-dark-bg p-1 rounded-xl border border-light-border dark:border-dark-border self-end lg:self-auto",children:[r.jsx("button",{onClick:()=>l("my_tasks"),className:`px-4 py-2 rounded-lg text-xs font-black uppercase tracking-tighter transition-all ${o==="my_tasks"?"bg-primary-500 text-white shadow-sm":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Personal"}),r.jsx("button",{onClick:()=>l("all_tasks"),className:`px-4 py-2 rounded-lg text-xs font-black uppercase tracking-tighter transition-all ${o==="all_tasks"?"bg-primary-500 text-white shadow-sm":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Collective"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:r.jsx(te,{mode:"popLayout",children:d.length===0?r.jsx("div",{className:"col-span-full",children:r.jsx(D,{glass:!0,className:"border-dashed border-light-border dark:border-dark-border",children:r.jsxs(U,{className:"p-20 text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-light-muted/5 dark:bg-dark-muted/5 flex items-center justify-center mx-auto mb-4 border border-light-border/20",children:r.jsx(ke,{className:"w-8 h-8 text-light-muted opacity-30"})}),r.jsx("p",{className:"text-sm font-bold text-light-muted dark:text-dark-muted tracking-widest uppercase",children:"No directivies in this sector"})]})})}):d.map(u=>{var m;return r.jsx(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full",children:r.jsxs(D,{glass:!0,className:`h-full border-primary-500/10 hover:border-primary-500/40 transition-all duration-300 relative group overflow-hidden ${u.status==="completed"?"opacity-70 grayscale-[0.5]":""}`,children:[r.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 opacity-[0.03] pointer-events-none rounded-bl-full ${u.priority==="urgent"?"bg-rose-500":"bg-primary-500"}`}),r.jsxs(U,{className:"p-6 flex flex-col h-full",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2.5 rounded-xl border ${u.status==="completed"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":u.status==="in_progress"?"bg-amber-500/10 border-amber-500/20 text-amber-500":"bg-primary-500/10 border-primary-500/20 text-primary-500"}`,children:u.status==="completed"?r.jsx(et,{className:"w-5 h-5"}):u.status==="in_progress"?r.jsx(Ze,{className:"w-5 h-5"}):r.jsx(Xd,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs(H,{variant:"outline",className:`text-[8px] font-black uppercase h-5 mb-1 ${u.priority==="urgent"?"text-rose-500 border-rose-500":u.priority==="high"?"text-amber-500 border-amber-500":"text-primary-500 border-primary-500"}`,children:[u.priority," Priority"]}),r.jsx("h3",{className:"text-lg font-black text-light-text dark:text-dark-text leading-tight tracking-tight",children:u.title})]})]})}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-6 leading-relaxed flex-grow",children:u.description}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-light-border/30 dark:border-dark-border/30",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-light-muted/10 flex items-center justify-center border border-light-border/20",children:r.jsx(St,{className:"w-4 h-4 text-light-muted"})}),r.jsxs("div",{className:"text-[10px] font-bold uppercase tracking-tighter",children:[r.jsx("p",{className:"text-light-muted/60 leading-none mb-0.5",children:"Assigned To"}),r.jsx("p",{className:"text-light-text dark:text-dark-text",children:((m=u.assignee)==null?void 0:m.name)||"Unassigned"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-light-muted/10 flex items-center justify-center border border-light-border/20",children:r.jsx(_t,{className:"w-4 h-4 text-light-muted"})}),r.jsxs("div",{className:"text-[10px] font-bold uppercase tracking-tighter",children:[r.jsx("p",{className:"text-light-muted/60 leading-none mb-0.5",children:"Deadline"}),r.jsx("p",{className:`${u.dueDate&&u.dueDate<Date.now()&&u.status!=="completed"?"text-rose-500 font-bold":"text-light-text dark:text-dark-text"}`,children:u.dueDate?new Date(u.dueDate).toLocaleDateString():"OPEN"})]})]})]}),u.assignedTo===e._id&&u.status!=="completed"&&r.jsxs("div",{className:"flex gap-2 w-full",children:[u.status==="todo"&&r.jsxs(M,{className:"flex-1 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-black text-[10px] uppercase tracking-widest h-10 shadow-lg shadow-primary-500/20",onClick:()=>c(u._id,"in_progress"),children:["Initiate Task ",r.jsx(Mt,{className:"w-4 h-4 ml-2"})]}),u.status==="in_progress"&&r.jsxs(M,{className:"flex-1 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-black text-[10px] uppercase tracking-widest h-10 shadow-lg shadow-emerald-500/20",onClick:()=>c(u._id,"completed"),children:["Verify Completion ",r.jsx(et,{className:"w-4 h-4 ml-2"})]})]})]})]})]})},u._id)})})})]})}function LO(){var v;const{user:e,isLoading:t}=X(),[s,n]=p.useState(null),[a,i]=p.useState(void 0),o=O(C.training.getModules,{category:a}),l=O(C.training.getProgress,e?{userId:e._id}:"skip"),d=O(C.training.getTrainingStats,e?{userId:e._id}:"skip"),c=V(C.training.startModule),u=V(C.training.completeModule);if(t)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl",children:[r.jsx(nr,{}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[r.jsx(Wt,{}),r.jsx(Wt,{}),r.jsx(Wt,{}),r.jsx(Wt,{})]})]})});if(!e)return r.jsx(Me,{to:"/login",replace:!0});if(e.role!=="board_member"&&e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Me,{to:"/feed",replace:!0});const m=w=>l==null?void 0:l.find(f=>{var b;return((b=f.module)==null?void 0:b._id)===w}),h=async w=>{try{await c({userId:e._id,moduleId:w})}catch(f){console.error("Failed to start module:",f)}},x=async w=>{try{await u({userId:e._id,moduleId:w}),n(null)}catch(f){console.error("Failed to complete module:",f)}},g=["Leadership","Ministry Skills","Spiritual Growth","Technical Skills","Team Building"];return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-secondary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-secondary-500",children:"Wisdom Hub"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Training Center"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Elevating your capacity for leadership and service."})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-emerald-500/10 hover:border-emerald-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 text-emerald-500",children:r.jsx(et,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-right text-3xl font-black font-display text-emerald-500",children:(d==null?void 0:d.completed)||0})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Fulfilled"}),r.jsx("p",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-tighter",children:"Modules Mastered"})]})]}),r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-amber-500/10 hover:border-amber-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-amber-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-amber-500/10 text-amber-500",children:r.jsx(Ze,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-right text-3xl font-black font-display text-amber-500",children:(d==null?void 0:d.inProgress)||0})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"In Transit"}),r.jsx("p",{className:"text-[10px] font-bold text-amber-500 uppercase tracking-tighter",children:"Currently Active"})]})]}),r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-primary-500/10 hover:border-primary-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-primary-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-primary-500/10 text-primary-500",children:r.jsx(gi,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-right text-3xl font-black font-display text-primary-500",children:(d==null?void 0:d.totalModules)||0})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Wisdom Repository"}),r.jsx("p",{className:"text-[10px] font-bold text-primary-500 uppercase tracking-tighter",children:"Total Curated content"})]})]}),r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-secondary-500/10 hover:border-secondary-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-secondary-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-secondary-500/10 text-secondary-500",children:r.jsx(Fn,{className:"w-6 h-6"})}),r.jsxs("div",{className:"text-right text-3xl font-black font-display text-secondary-500",children:[(d==null?void 0:d.completionPercentage)||0,"%"]})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Proficiency"}),r.jsx("div",{className:"h-1.5 w-full bg-light-muted/10 dark:bg-dark-muted/10 rounded-full overflow-hidden mt-2",children:r.jsx("div",{className:"h-full bg-secondary-500 transition-all duration-1000",style:{width:`${(d==null?void 0:d.completionPercentage)||0}%`}})})]})]})]}),r.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:r.jsxs("div",{className:"flex bg-light-card/50 dark:bg-dark-card/50 p-1.5 rounded-2xl border border-light-border dark:border-dark-border overflow-x-auto no-scrollbar max-w-full",children:[r.jsx("button",{onClick:()=>i(void 0),className:`px-6 py-2.5 rounded-xl font-black uppercase tracking-widest text-[10px] transition-all whitespace-nowrap ${a===void 0?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"All Sectors"}),g.map(w=>r.jsx("button",{onClick:()=>i(w),className:`px-6 py-2.5 rounded-xl font-black uppercase tracking-widest text-[10px] transition-all whitespace-nowrap ${a===w?"bg-secondary-500 text-white shadow-lg shadow-secondary-500/30":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:w},w))]})}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:o==null?void 0:o.map(w=>{const f=m(w._id);return r.jsx(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{y:-8},className:"h-full",children:r.jsx(D,{glass:!0,className:`h-full border-secondary-500/10 hover:border-secondary-500/40 transition-all duration-300 relative group overflow-hidden ${(f==null?void 0:f.status)==="completed"?"opacity-80":""}`,children:r.jsxs(U,{className:"p-8 flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx(H,{variant:"outline",className:"text-[8px] font-black uppercase h-5 text-secondary-500 border-secondary-500/30",children:w.category}),f&&r.jsx(H,{className:`text-[8px] font-black uppercase h-5 ${f.status==="completed"?"bg-emerald-500":"bg-primary-500"}`,children:f.status==="completed"?"Fulfilled":"In Transit"})]}),r.jsx("h3",{className:"font-black text-xl text-light-text dark:text-dark-text mb-3 leading-tight tracking-tight group-hover:text-secondary-500 transition-colors",children:w.title}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-8 line-clamp-3 leading-relaxed flex-grow",children:w.description}),r.jsxs("div",{className:"flex items-center gap-6 mb-8 text-[10px] font-black uppercase tracking-widest text-light-muted/60",children:[w.videoUrl&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(o3,{className:"w-3.5 h-3.5 text-secondary-500"}),"Video"]}),w.documentUrl&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rr,{className:"w-3.5 h-3.5 text-secondary-500"}),"Text"]}),w.duration&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ze,{className:"w-3.5 h-3.5 text-secondary-500"}),w.duration," MIN"]})]}),r.jsx(M,{variant:(f==null?void 0:f.status)==="completed"?"ghost":"secondary",className:`w-full rounded-2xl h-12 font-black text-[10px] uppercase tracking-[0.2em] transition-all duration-300 ${(f==null?void 0:f.status)==="completed"?"border-2 border-secondary-500/20 hover:bg-secondary-500 hover:text-white":"shadow-xl shadow-secondary-500/20"}`,onClick:()=>{n(w),f||h(w._id)},children:(f==null?void 0:f.status)==="completed"?"Review Directive":f?"Resume Mission":"Commence Training"})]})})},w._id)})}),s&&r.jsx(gt,{isOpen:!!s,onClose:()=>n(null),title:s.title,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(H,{variant:"secondary",children:s.category}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:s.description}),s.videoUrl&&r.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:r.jsx("iframe",{width:"100%",height:"100%",src:s.videoUrl,title:s.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),s.content&&r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})}),s.documentUrl&&r.jsxs("a",{href:s.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary-500 hover:text-primary-600",children:[r.jsx(rr,{className:"w-4 h-4"}),"Download Course Material"]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(M,{variant:"ghost",onClick:()=>n(null),children:"Close"}),((v=m(s._id))==null?void 0:v.status)!=="completed"&&r.jsx(M,{variant:"primary",onClick:()=>x(s._id),children:"Mark as Complete"})]})]})})]})}function DO({isOpen:e,onClose:t,userId:s}){const[n,a]=p.useState(""),[i,o]=p.useState(""),[l,d]=p.useState(""),[c,u]=p.useState("60"),[m,h]=p.useState(!1),x=V(C.governance.createMeeting),{showToast:g}=kn(),v=async w=>{w.preventDefault(),h(!0);try{await x({adminId:s,title:n,date:new Date(i).getTime(),startTime:l,durationMinutes:parseInt(c)}),a(""),o(""),d(""),u("60"),t(),g("success",`Meeting "${n}" created successfully!`)}catch(f){console.error("Failed to create meeting:",f),g("error","Failed to create meeting. Please try again.")}finally{h(!1)}};return r.jsx(gt,{isOpen:e,onClose:t,title:"Create Board Meeting",children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(rr,{className:"w-4 h-4"}),"Meeting Title"]}),r.jsx(be,{value:n,onChange:w=>a(w.target.value),placeholder:"e.g., Monthly Board Meeting",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(_t,{className:"w-4 h-4"}),"Date"]}),r.jsx(be,{type:"date",value:i,onChange:w=>o(w.target.value),required:!0,className:"w-full"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(Ze,{className:"w-4 h-4"}),"Start Time"]}),r.jsx(be,{type:"time",value:l,onChange:w=>d(w.target.value),required:!0,className:"w-full"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Duration (minutes)"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:[30,60,90,120].map(w=>r.jsxs("button",{type:"button",onClick:()=>u(w.toString()),className:`px-4 py-2 rounded-lg border-2 transition-all ${c===w.toString()?"border-primary-500 bg-primary-500/10 text-primary-500":"border-light-border dark:border-dark-border hover:border-primary-500/50"}`,children:[w,"m"]},w))}),r.jsx(be,{type:"number",value:c,onChange:w=>u(w.target.value),placeholder:"Custom duration",min:"15",max:"480",className:"mt-2"})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,className:"flex-1",disabled:m,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:m,children:m?"Creating...":"Create Meeting"})]})]})})}function OO({isOpen:e,onClose:t,userId:s}){const[n,a]=p.useState(""),[i,o]=p.useState(!1),l=V(C.governance.clockIn),{showToast:d}=kn(),c=async u=>{u.preventDefault(),o(!0);try{await l({userId:s,code:n}),a(""),t(),d("success"," Successfully clocked in to the meeting!")}catch(m){console.error("Failed to clock in:",m),d("error",m.message||"Failed to clock in. Please check the code and try again.")}finally{o(!1)}};return r.jsx(gt,{isOpen:e,onClose:t,title:"Clock In to Meeting",children:r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Meeting Code"}),r.jsx(be,{value:n,onChange:u=>a(u.target.value.toUpperCase()),placeholder:"Enter 6-digit code",maxLength:6,className:"text-center text-2xl font-mono tracking-widest",required:!0}),r.jsx("p",{className:"text-xs text-light-muted mt-2",children:"Enter the 6-digit code provided by the admin"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,className:"flex-1",disabled:i,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:i||n.length!==6,children:i?"Clocking In...":"Clock In"})]})]})})}function FO({isOpen:e,onClose:t,userId:s}){const[n,a]=p.useState(""),[i,o]=p.useState(""),[l,d]=p.useState(""),[c,u]=p.useState(!1),m=O(C.governance.getMeetings),h=V(C.governance.submitExcuse),{showToast:x}=kn(),g=(m==null?void 0:m.map(w=>({value:w._id,label:`${w.title} - ${new Date(w.date).toLocaleDateString()}`})))||[],v=async w=>{w.preventDefault(),u(!0);try{await h({userId:s,meetingId:n,reason:i,proofUrl:l||void 0}),a(""),o(""),d(""),t(),x("success","Excuse submitted successfully! Awaiting admin review.")}catch(f){console.error("Failed to submit excuse:",f),x("error","Failed to submit excuse. Please try again.")}finally{u(!1)}};return r.jsx(gt,{isOpen:e,onClose:t,title:"Submit Excuse",children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Select Meeting"}),r.jsx(Ns,{options:g,value:n,onChange:a,placeholder:"Choose a meeting..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Reason for Absence"}),r.jsx("textarea",{value:i,onChange:w=>o(w.target.value),placeholder:"Please explain why you couldn't attend...",className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg min-h-[100px]",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Proof URL (Optional)"}),r.jsx(be,{type:"url",value:l,onChange:w=>d(w.target.value),placeholder:"https://example.com/proof.jpg"}),r.jsx("p",{className:"text-xs text-light-muted mt-2",children:"Upload proof to ImageKit or another service and paste the URL here"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,className:"flex-1",disabled:c,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:c,children:c?"Submitting...":"Submit Excuse"})]})]})})}function UO({isOpen:e,onClose:t,meeting:s}){const[n,a]=p.useState(!0),i=O(C.governance.getMeetingAttendance,s?{meetingId:s._id}:"skip"),o=m=>{switch(m){case"present":return r.jsx(H,{className:"bg-emerald-500 text-white",children:"Present"});case"late":return r.jsx(H,{className:"bg-amber-500 text-white",children:"Late"});case"absent":return r.jsx(H,{className:"bg-rose-500 text-white",children:"Absent"});case"excused":return r.jsx(H,{className:"bg-blue-500 text-white",children:"Excused"});default:return r.jsx(H,{variant:"outline",children:"Unknown"})}},l=m=>{switch(m){case"present":return r.jsx(Qt,{className:"w-5 h-5 text-emerald-500"});case"late":return r.jsx(Ze,{className:"w-5 h-5 text-amber-500"});case"absent":return r.jsx(ys,{className:"w-5 h-5 text-rose-500"});case"excused":return r.jsx(Qt,{className:"w-5 h-5 text-blue-500"});default:return r.jsx(ys,{className:"w-5 h-5 text-light-muted"})}},d={present:(i==null?void 0:i.filter(m=>m.status==="present").length)||0,late:(i==null?void 0:i.filter(m=>m.status==="late").length)||0,absent:(i==null?void 0:i.filter(m=>m.status==="absent").length)||0,excused:(i==null?void 0:i.filter(m=>m.status==="excused").length)||0},c=(i==null?void 0:i.length)||0,u=i===void 0;return r.jsx(gt,{isOpen:e,onClose:t,title:"Meeting Attendance",className:"max-w-2xl",children:s&&r.jsxs("div",{className:"space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"p-3 md:p-4 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",children:[r.jsx("h3",{className:"font-bold text-base md:text-lg mb-2",children:s.title}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 text-xs md:text-sm text-light-muted",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(_t,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsx("span",{className:"text-xs md:text-sm",children:new Date(s.date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsx("span",{className:"text-xs md:text-sm",children:s.startTime})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Se,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsxs("span",{className:"text-xs md:text-sm",children:[c," Total"]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between px-1",children:[r.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-light-muted",children:"Attendance Summary"}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-7 text-[10px] font-bold gap-1",onClick:()=>a(!n),children:n?r.jsxs(r.Fragment,{children:[r.jsx(Hn,{className:"w-3 h-3"})," Hide Stats"]}):r.jsxs(r.Fragment,{children:[r.jsx(Je,{className:"w-3 h-3"})," Show Stats"]})})]}),r.jsx(te,{children:n&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3",children:[r.jsx(D,{className:"border-emerald-500/20 bg-emerald-500/5",children:r.jsxs(U,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-emerald-500",children:d.present}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Present"})]})}),r.jsx(D,{className:"border-amber-500/20 bg-amber-500/5",children:r.jsxs(U,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-amber-500",children:d.late}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Late"})]})}),r.jsx(D,{className:"border-rose-500/20 bg-rose-500/5",children:r.jsxs(U,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-rose-500",children:d.absent}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Absent"})]})}),r.jsx(D,{className:"border-blue-500/20 bg-blue-500/5",children:r.jsxs(U,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-blue-500",children:d.excused}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Excused"})]})})]})})}),r.jsxs("div",{className:"border-t border-light-border dark:border-dark-border pt-4",children:[r.jsxs("h4",{className:"font-bold text-sm md:text-base mb-3 flex items-center gap-2",children:[r.jsx(Se,{className:"w-4 h-4 text-primary-500"}),"Board Member Roster"]}),r.jsx("div",{className:"space-y-2 max-h-[40vh] md:max-h-96 overflow-y-auto pr-2 thin-scrollbar",children:u?[1,2,3,4].map(m=>r.jsx("div",{className:"h-16 w-full bg-light-muted/10 animate-pulse rounded-xl border border-light-border/50 dark:border-dark-border/50"},m)):i&&i.length>0?i.map(m=>r.jsxs("div",{className:"flex items-center justify-between p-2 md:p-3 rounded-lg border border-light-border dark:border-dark-border hover:border-primary-500/30 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[l(m.status),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-sm md:text-base truncate",children:m.userName}),m.joinTime&&r.jsxs("p",{className:"text-[10px] md:text-xs text-light-muted",children:["Clocked in at ",new Date(m.joinTime).toLocaleTimeString()]})]})]}),r.jsx("div",{className:"flex-shrink-0",children:o(m.status)})]},m._id)):r.jsxs("div",{className:"text-center py-8 text-light-muted",children:[r.jsx(Se,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),r.jsx("p",{className:"text-sm",children:"No attendance records yet"})]})})]})]})})}function BO({isOpen:e,onClose:t,meeting:s,userId:n}){const[a,i]=p.useState(!1),o=V(C.governance.endMeeting),{showToast:l}=kn(),d=async()=>{i(!0);try{await o({adminId:n,meetingId:s._id}),t(),l("success","Meeting ended successfully! Attendance has been processed.")}catch(c){console.error("Failed to end meeting:",c),l("error",c.message||"Failed to end meeting. Please try again.")}finally{i(!1)}};return s?r.jsx(gt,{isOpen:e,onClose:t,title:"End Meeting",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-rose-500/10 to-rose-500/5 border border-rose-500/20 flex items-center justify-center mb-4 shadow-xl",children:r.jsx(Yw,{className:"w-10 h-10 text-rose-500"})}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:"End This Meeting?"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs",children:['Are you sure you want to end "',s.title,'"?']})]}),r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-amber-500/5 border border-amber-500/20",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center shrink-0",children:r.jsx(un,{className:"w-6 h-6 text-amber-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-amber-700 dark:text-amber-500 mb-1",children:"What Happens Next"}),r.jsxs("ul",{className:"text-xs text-amber-700/70 dark:text-amber-500/70 space-y-1",children:[r.jsx("li",{children:" Meeting will be marked as ended"}),r.jsx("li",{children:" Attendance will be automatically processed"}),r.jsx("li",{children:" Members who didn't clock in will be marked absent"}),r.jsx("li",{children:" Notifications will be sent to all board members"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-light-bg dark:bg-dark-bg",children:[r.jsx(Se,{className:"w-4 h-4 text-light-muted"}),r.jsxs("p",{className:"text-xs text-light-muted",children:["Started: ",new Date(s.date).toLocaleDateString()," at ",s.startTime]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(M,{variant:"ghost",className:"w-full rounded-2xl h-12",onClick:t,disabled:a,children:"Cancel"}),r.jsx(M,{variant:"danger",className:"w-full rounded-2xl h-12 shadow-lg shadow-rose-500/20",onClick:d,disabled:a,children:a?"Ending...":"Yes, End Meeting"})]})]})}):null}function u1({user:e}){const[t,s]=p.useState(!1),[n,a]=p.useState(!1),[i,o]=p.useState(!1),[l,d]=p.useState(!1),[c,u]=p.useState(!1),[m,h]=p.useState(null),x=O(C.governance.getMeetings),g=O(C.governance.getActiveMeeting),v=O(C.governance.getPendingExcuses),w=O(C.governance.getUserAttendance,e?{userId:e._id}:"skip"),f=V(C.governance.reviewExcuse);if(x===void 0||w===void 0)return r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(j=>r.jsx(Wt,{},j))}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(j=>r.jsx(Oe,{},j))})]});const y=(e==null?void 0:e.role)==="super_admin"||(e==null?void 0:e.role)==="admin",k=j=>{switch(j){case"present":return r.jsx(H,{className:"bg-emerald-500 text-white",children:"Present"});case"late":return r.jsx(H,{className:"bg-amber-500 text-white",children:"Late"});case"absent":return r.jsx(H,{className:"bg-rose-500 text-white",children:"Absent"});case"excused":return r.jsx(H,{className:"bg-blue-500 text-white",children:"Excused"});default:return r.jsx(H,{variant:"outline",children:"Unknown"})}};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[r.jsx(D,{className:"border-primary-500/20",children:r.jsxs(U,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-primary-500/10 text-primary-500",children:r.jsx(_t,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-primary-500",children:(x==null?void 0:x.length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Total Meetings"})]})}),r.jsx(D,{className:"border-emerald-500/20",children:r.jsxs(U,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-emerald-500/10 text-emerald-500",children:r.jsx(Qt,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-emerald-500",children:(w==null?void 0:w.filter(j=>j.status==="present").length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Present"})]})}),r.jsx(D,{className:"border-amber-500/20",children:r.jsxs(U,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-amber-500/10 text-amber-500",children:r.jsx(Ze,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-amber-500",children:(w==null?void 0:w.filter(j=>j.status==="late").length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Late"})]})}),r.jsx(D,{className:"border-rose-500/20",children:r.jsxs(U,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-rose-500/10 text-rose-500",children:r.jsx(ys,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-rose-500",children:(w==null?void 0:w.filter(j=>j.status==="absent").length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Absent"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g&&r.jsx(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:r.jsxs(D,{className:"border-primary-500 bg-primary-500/5 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:scale-110 transition-transform",children:r.jsx(tc,{className:"w-32 h-32 text-primary-500"})}),r.jsxs(xe,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(H,{className:"bg-primary-500 text-white animate-pulse",children:"Meeting In Progress"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-primary-500",children:[r.jsx(Ze,{className:"w-4 h-4"}),r.jsxs("span",{children:["Started ",ct(g.createdAt)," ago"]})]})]}),r.jsx(pe,{className:"text-2xl font-black",children:g.title})]}),r.jsxs(U,{className:"space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-[10px] md:text-xs font-bold text-light-muted uppercase tracking-wider",children:"Attendance Code"}),y&&r.jsxs(M,{variant:"ghost",size:"sm",className:"h-6 gap-1 text-[10px] px-2",onClick:()=>{navigator.clipboard.writeText(g.code)},children:[r.jsx(bh,{className:"w-3 h-3"}),"Copy"]})]}),r.jsx("div",{className:"text-2xl md:text-4xl font-black tracking-[0.3em] md:tracking-[0.5em] text-center text-primary-500 font-mono",children:y?g.code:""})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 md:gap-3",children:[!y&&r.jsx(r.Fragment,{children:w!=null&&w.some(j=>j.meetingId===g._id)?r.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 p-2.5 md:p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 font-bold text-xs md:text-sm",children:[r.jsx(Qt,{className:"w-4 h-4 md:w-5 md:h-5"}),"You are clocked in"]}):r.jsxs(M,{className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white rounded-xl h-11 md:h-12 text-sm md:text-base font-bold shadow-lg shadow-primary-500/20",onClick:()=>a(!0),children:[r.jsx(tc,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Clock In Now"]})}),y&&r.jsxs(M,{variant:"danger",className:"flex-1 rounded-xl h-11 md:h-12 text-sm md:text-base font-bold shadow-lg shadow-rose-500/20",onClick:()=>u(!0),children:[r.jsx(Yw,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"End Meeting"]}),r.jsxs(M,{variant:"outline",className:"flex-1 rounded-xl h-11 md:h-12 text-sm md:text-base font-bold border-2",onClick:()=>{h(g),d(!0)},children:[r.jsx(Se,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"View Attendees"]})]})]})]})}),!g&&y&&r.jsxs(D,{className:"border-dashed border-2 flex flex-col items-center justify-center p-8 text-center bg-light-bg/30 dark:bg-dark-bg/30",children:[r.jsx("div",{className:"p-4 rounded-full bg-primary-500/10 text-primary-500 mb-4",children:r.jsx(oi,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Active Meeting"}),r.jsx("p",{className:"text-light-muted mb-6 max-w-xs",children:"Ready to start the next session? Setup a meeting and generate an attendance code."}),r.jsx(M,{className:"bg-primary-500 hover:bg-primary-600 text-white rounded-xl h-12 px-8 font-bold shadow-lg shadow-primary-500/20",onClick:()=>s(!0),children:"Create Meeting"})]}),!g&&!y&&r.jsx(D,{className:"p-8 bg-gradient-to-br from-primary-500/5 to-transparent border-primary-500/20",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-primary-500/10 text-primary-500",children:r.jsx(_t,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:"Next Meeting"}),r.jsx("p",{className:"text-light-muted",children:"No meetings currently in progress. Stay tuned for announcements."})]})]})}),y&&v&&v.length>0&&r.jsxs(D,{className:"border-amber-500/50 bg-amber-500/5",children:[r.jsxs(xe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsxs(pe,{className:"text-base font-bold flex items-center gap-2",children:[r.jsx(yr,{className:"w-5 h-5 text-amber-500"}),"Pending Excuses"]}),r.jsx(H,{variant:"outline",className:"text-amber-500 border-amber-500",children:v.length})]}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:v.map(j=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50 dark:bg-black/20 border border-amber-500/20",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:j.userName}),r.jsx("p",{className:"text-xs text-light-muted",children:j.meetingTitle})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-rose-500 hover:bg-rose-500/10",onClick:()=>f({adminId:e._id,excuseId:j._id,approved:!1}),children:r.jsx(Ne,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-emerald-500 hover:bg-emerald-500/10",onClick:()=>f({adminId:e._id,excuseId:j._id,approved:!0}),children:r.jsx(pt,{className:"w-4 h-4"})})]})]},j._id))})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h2",{className:"text-xl md:text-2xl font-black flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-500"}),"Meeting History"]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:x==null?void 0:x.map(j=>{const S=w==null?void 0:w.find(P=>P.meetingId===j._id);return r.jsxs(D,{className:"hover:border-primary-500/30 transition-all group",children:[r.jsxs(xe,{className:"pb-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(H,{variant:"outline",className:"text-[10px] font-bold",children:new Date(j.date).toLocaleDateString()}),S?k(S.status):j.status==="ended"?r.jsx(H,{className:"bg-rose-500 text-white",children:"Absent"}):r.jsx(H,{variant:"secondary",children:"Scheduled"})]}),r.jsx(pe,{className:"text-lg font-bold group-hover:text-primary-500 transition-colors",children:j.title})]}),r.jsxs(U,{children:[r.jsxs("div",{className:"flex items-center gap-4 text-xs text-light-muted mb-6",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3 h-3"}),j.startTime]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Se,{className:"w-3 h-3"}),j.durationMinutes," mins"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{variant:"outline",className:"flex-1 text-[10px] h-9 rounded-lg font-bold",onClick:()=>{h(j),d(!0)},children:[r.jsx(Et,{className:"w-3.5 h-3.5 mr-1.5"}),"Attendance"]}),!S&&j.status==="ended"&&r.jsx(M,{variant:"secondary",className:"flex-1 text-[10px] h-9 rounded-lg font-bold text-amber-500",onClick:()=>{h(j),o(!0)},children:"Submit Excuse"})]}),(S==null?void 0:S.joinTime)&&r.jsxs("p",{className:"text-[10px] md:text-xs text-light-muted mt-2",children:["Clocked in at ",new Date(S.joinTime).toLocaleTimeString()]})]})]},j._id)})})]}),r.jsx(DO,{isOpen:t,onClose:()=>s(!1),userId:e==null?void 0:e._id}),g&&r.jsx(OO,{isOpen:n,onClose:()=>a(!1),userId:e==null?void 0:e._id}),r.jsx(BO,{isOpen:c,onClose:()=>u(!1),meeting:g,userId:e==null?void 0:e._id}),r.jsx(FO,{isOpen:i,onClose:()=>o(!1),userId:e==null?void 0:e._id}),r.jsx(UO,{isOpen:l,onClose:()=>d(!1),meeting:m})]})}function VO({isOpen:e,onClose:t,userId:s}){const[n,a]=p.useState(1),[i,o]=p.useState("deposit"),[l,d]=p.useState(""),[c,u]=p.useState(""),[m,h]=p.useState(""),[x,g]=p.useState(""),[v,w]=p.useState(null),[f,b]=p.useState(""),[y,k]=p.useState(!1),[j,S]=p.useState(!1),P=V(C.files.generateUploadUrl),R=O(C.users.getAllUsers,{adminId:s}),L=V(C.finance.addTransaction),{showToast:N}=kn(),I=(R==null?void 0:R.filter(E=>E.role==="board_member"))||[],A=[{value:"",label:"Not linked to a member"},...I.length>0?[{value:"__board_header__",label:"--- Board Members (Monthly Dues) ---",disabled:!0},...I.map(E=>({value:E._id,label:E.name}))]:[],{value:"__other_header__",label:"--- Other Members ---",disabled:!0},{value:"__other__",label:"+ Add Other Person (Non-Board)"}],W=async E=>{var q;const B=(q=E.target.files)==null?void 0:q[0];if(B){if(!B.type.startsWith("image/")){N("error","Please upload an image file");return}if(B.size>5*1024*1024){N("error","File size must be less than 5MB");return}w(B)}},G=async()=>{S(!0);try{let E=f;if(v){k(!0);try{const B=await P(),q=await fetch(B,{method:"POST",headers:{"Content-Type":v.type},body:v}),{storageId:ce}=await q.json();E=(await fetch(`${window.location.origin}/api/storage/${ce}`)).url}catch(B){console.error("Upload failed:",B),N("error","Failed to upload proof image"),k(!1),S(!1);return}finally{k(!1)}}await L({userId:s,type:i,amount:parseFloat(l),description:c,memberId:m&&m!=="__other__"?m:void 0,memberName:m==="__other__"?x:void 0,proofUrl:E||void 0}),a(1),o("deposit"),d(""),u(""),h(""),g(""),w(null),b(""),t(),N("success",`${i==="deposit"?"Deposit":"Withdrawal"} of ${parseFloat(l).toLocaleString()} added successfully!`)}catch(E){console.error("Failed to add transaction:",E),N("error","Failed to add transaction. Please try again.")}finally{S(!1)}},se=()=>{a(1),o("deposit"),d(""),u(""),h(""),b(""),t()},Q=i!==null,de=l&&parseFloat(l)>0,z=c.trim().length>0;return r.jsx(gt,{isOpen:e,onClose:se,title:"Add Financial Transaction",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:[1,2,3,4].map(E=>r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all ${E===n?"bg-primary-500 text-white scale-110":E<n?"bg-emerald-500 text-white":"bg-light-muted/20 text-light-muted"}`,children:E<n?"":E}),E<4&&r.jsx("div",{className:`flex-1 h-1 mx-2 rounded-full transition-all ${E<n?"bg-emerald-500":"bg-light-muted/20"}`})]},E))}),n===1&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Select Transaction Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("button",{type:"button",onClick:()=>o("deposit"),className:`p-6 rounded-2xl border-2 transition-all ${i==="deposit"?"border-emerald-500 bg-emerald-500/10 scale-105":"border-light-border dark:border-dark-border hover:border-emerald-500/50"}`,children:[r.jsx(mn,{className:"w-12 h-12 mx-auto mb-3 text-emerald-500"}),r.jsx("div",{className:"font-bold text-lg",children:"Deposit"}),r.jsx("div",{className:"text-xs text-light-muted mt-1",children:"Money In"})]}),r.jsxs("button",{type:"button",onClick:()=>o("withdrawal"),className:`p-6 rounded-2xl border-2 transition-all ${i==="withdrawal"?"border-rose-500 bg-rose-500/10 scale-105":"border-light-border dark:border-dark-border hover:border-rose-500/50"}`,children:[r.jsx(yh,{className:"w-12 h-12 mx-auto mb-3 text-rose-500"}),r.jsx("div",{className:"font-bold text-lg",children:"Withdrawal"}),r.jsx("div",{className:"text-xs text-light-muted mt-1",children:"Money Out"})]})]})]}),n===2&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Enter Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl font-bold text-light-muted",children:""}),r.jsx(be,{type:"number",value:l,onChange:E=>d(E.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"text-3xl font-bold pl-12 py-6 text-center",autoFocus:!0})]}),r.jsx("p",{className:"text-sm text-light-muted text-center",children:l&&parseFloat(l)>0?r.jsx("span",{className:"font-bold text-primary-500",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(parseFloat(l))}):"Enter the transaction amount"})]}),n===3&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5"}),"Transaction Details"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Description"}),r.jsx("textarea",{value:c,onChange:E=>u(E.target.value),placeholder:"e.g., Monthly dues collection, Office supplies purchase...",className:"w-full px-4 py-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg min-h-[120px]",autoFocus:!0})]})]}),n===4&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Additional Information (Optional)"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(St,{className:"w-4 h-4"}),"Link to Member"]}),r.jsx(Ns,{options:A.filter(E=>!E.disabled),value:m,onChange:h,placeholder:"Select a member..."}),r.jsx("p",{className:"text-xs text-light-muted mt-2",children:'Board members pay monthly dues. Select "Other" for non-board members.'})]}),m==="__other__"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Person's Name"}),r.jsx(be,{value:x,onChange:E=>g(E.target.value),placeholder:"Enter name of person...",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(Wr,{className:"w-4 h-4"}),"Proof/Receipt Image"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"hidden",id:"proof-upload"}),r.jsxs("label",{htmlFor:"proof-upload",className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 border-dashed border-light-border dark:border-dark-border hover:border-primary-500 cursor-pointer transition-colors bg-light-bg dark:bg-dark-bg",children:[r.jsx(Wr,{className:"w-5 h-5 text-light-muted"}),r.jsx("span",{className:"text-sm font-medium",children:v?v.name:"Choose Image"})]}),v&&r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded bg-emerald-500/20 flex items-center justify-center",children:r.jsx(Wr,{className:"w-4 h-4 text-emerald-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:v.name}),r.jsxs("p",{className:"text-xs text-light-muted",children:[(v.size/1024).toFixed(1)," KB"]})]})]}),r.jsx("button",{type:"button",onClick:()=>w(null),className:"text-rose-500 hover:text-rose-600",children:r.jsx(Ne,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Upload a screenshot or photo of the receipt/proof (Max 5MB)"})]})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[n>1&&r.jsxs(M,{type:"button",variant:"ghost",onClick:()=>a(n-1),className:"flex-1",disabled:j,children:[r.jsx(fr,{className:"w-4 h-4 mr-2"}),"Back"]}),n<4?r.jsxs(M,{type:"button",variant:"primary",onClick:()=>a(n+1),className:"flex-1",disabled:n===1&&!Q||n===2&&!de||n===3&&!z,children:["Next",r.jsx(Mt,{className:"w-4 h-4 ml-2"})]}):r.jsx(M,{type:"button",variant:"primary",onClick:G,className:"flex-1",disabled:j||y,children:y?"Uploading...":j?"Adding...":"Complete Transaction"})]})]})})}function m1({isOpen:e,onClose:t,imageUrl:s,title:n}){return p.useEffect(()=>{const a=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t]),p.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),r.jsx(te,{children:e&&r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8",children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/90 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative max-w-5xl w-full max-h-full flex flex-col bg-light-bg dark:bg-dark-bg rounded-2xl md:rounded-3xl overflow-hidden shadow-2xl",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-light-border dark:border-dark-border bg-light-bg/80 dark:bg-dark-bg/80 backdrop-blur-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-primary-500/10 text-primary-500",children:r.jsx(t3,{className:"w-5 h-5"})}),r.jsx("h3",{className:"font-display font-bold text-light-text dark:text-dark-text truncate max-w-[200px] md:max-w-md",children:n||"View Proof"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("a",{href:s,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-light-muted hover:text-primary-500 transition-colors",title:"Download Image",children:r.jsx(Zo,{className:"w-5 h-5"})}),r.jsx("button",{onClick:t,className:"p-2.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-light-muted hover:text-rose-500 transition-colors",children:r.jsx(Ne,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex-1 overflow-auto p-2 md:p-4 bg-black/5 dark:bg-white/5 flex items-center justify-center min-h-[300px]",children:r.jsx("img",{src:s,alt:n||"Proof",className:"max-w-full max-h-[70vh] object-contain rounded-lg shadow-lg"})}),r.jsx("div",{className:"p-4 md:p-6 bg-light-bg/80 dark:bg-dark-bg/80 backdrop-blur-md border-t border-light-border dark:border-dark-border flex justify-center",children:r.jsx(zO,{onClick:t,variant:"outline",className:"px-8 rounded-xl border-light-border dark:border-dark-border",children:"Close Preview"})})]})]})})}function zO({children:e,onClick:t,variant:s="primary",className:n=""}){const a="px-4 py-2 rounded-lg font-bold transition-all flex items-center justify-center",i={primary:"bg-primary-500 text-white hover:bg-primary-600 shadow-lg shadow-primary-500/20",outline:"border border-light-border dark:border-dark-border text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card",secondary:"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text hover:bg-light-border dark:hover:bg-dark-border"};return r.jsx("button",{onClick:t,className:`${a} ${i[s]} ${n}`,children:e})}function $O({user:e}){const[t,s]=p.useState(null),n=O(C.finance.getPendingSubmissions),a=V(C.finance.approvePaymentSubmission),i=V(C.finance.rejectPaymentSubmission),[o,l]=p.useState(null),{showToast:d}=kn();if(n===void 0)return r.jsxs(D,{className:"animate-pulse",children:[r.jsx(xe,{children:r.jsx("div",{className:"h-6 w-48 bg-light-muted/10 rounded"})}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:[1,2].map(x=>r.jsx("div",{className:"h-40 bg-light-muted/10 rounded-2xl"},x))})})]});const c=x=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(x),u=x=>new Date(2024,x-1).toLocaleDateString("en-US",{month:"long"}),m=async x=>{if(confirm("Approve this payment? It will increase the total balance and update member dues.")){s(x);try{await a({adminId:e._id,submissionId:x}),d("success","Payment approved successfully!")}catch(g){console.error("Failed to approve:",g),d("error",g.message||"Failed to approve")}finally{s(null)}}},h=async x=>{const g=prompt("Please enter rejection reason:");if(g!==null){s(x);try{await i({adminId:e._id,submissionId:x,reason:g||"Information provided is incomplete/incorrect"}),d("success","Payment rejected.")}catch(v){console.error("Failed to reject:",v),d("error",v.message||"Failed to reject")}finally{s(null)}}};return r.jsxs(D,{children:[r.jsx(xe,{className:"py-4 px-4 md:px-6",children:r.jsxs(pe,{className:"flex items-center gap-2 text-lg md:text-xl",children:[r.jsx(Ze,{className:"w-5 h-5 text-primary-500"}),"Pending Payment Submissions",n&&n.length>0&&r.jsx(H,{className:"ml-2 bg-primary-500 text-[10px] h-5 min-w-5 flex items-center justify-center",children:n.length})]})}),r.jsx(U,{children:r.jsx("div",{className:"space-y-4",children:n&&n.length>0?n.map(x=>r.jsxs("div",{className:"p-4 rounded-2xl border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50 flex flex-col md:flex-row gap-6",children:[r.jsxs("div",{className:"flex-1 space-y-3 md:space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 rounded-full bg-primary-500/10 flex items-center justify-center flex-shrink-0",children:r.jsx(St,{className:"w-4 h-4 md:w-5 md:h-5 text-primary-500"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-black truncate",children:x.userName}),r.jsxs("p",{className:"text-[10px] md:text-xs text-light-muted",children:["Submitted ",new Date(x.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[r.jsxs("div",{className:"p-2 md:p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-light-muted uppercase mb-0.5 md:mb-1",children:"Amount"}),r.jsx("p",{className:"text-base md:text-lg font-black text-emerald-500 truncate",children:c(x.amount)})]}),r.jsxs("div",{className:"p-2 md:p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-light-muted uppercase mb-0.5 md:mb-1",children:"Period"}),r.jsxs("p",{className:"font-bold text-xs md:text-sm truncate",children:[u(x.month)," ",x.year]})]})]})]}),r.jsx("div",{className:"md:w-48 shrink-0",children:r.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-light-border dark:border-dark-border aspect-video md:aspect-square bg-black/5",children:[x.proofUrl?r.jsx("img",{src:x.proofUrl,alt:"Proof",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(yr,{className:"w-6 h-6 text-light-muted"})}),r.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx("button",{onClick:()=>l({url:x.proofUrl,title:`Proof - ${x.userName}`}),className:"p-2 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 hover:scale-110 transition-transform",children:r.jsx(Et,{className:"w-5 h-5"})})})]})}),r.jsxs("div",{className:"md:w-40 shrink-0 flex flex-row md:flex-col gap-2",children:[r.jsxs(M,{onClick:()=>m(x._id),className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white font-bold h-11 md:h-12 text-xs md:text-sm",disabled:t!==null,children:[r.jsx(pt,{className:"w-3.5 h-3.5 md:w-4 md:h-4 mr-1 md:mr-2"}),"Approve"]}),r.jsxs(M,{onClick:()=>h(x._id),variant:"outline",className:"flex-1 border-rose-500/30 text-rose-500 hover:bg-rose-500/10 font-bold h-11 md:h-12 text-xs md:text-sm",disabled:t!==null,children:[r.jsx(Ne,{className:"w-3.5 h-3.5 md:w-4 md:h-4 mr-1 md:mr-2"}),"Reject"]})]})]},x._id)):r.jsxs("div",{className:"text-center py-12 text-light-muted flex flex-col items-center gap-2",children:[r.jsx(Qt,{className:"w-8 h-8 text-emerald-500/50"}),r.jsx("p",{children:"No pending submissions to review"})]})})}),r.jsx(m1,{isOpen:!!o,onClose:()=>l(null),imageUrl:(o==null?void 0:o.url)||"",title:o==null?void 0:o.title})]})}function WO({isOpen:e,onClose:t,report:s,isLoading:n,month:a,year:i}){const o=new Intl.DateTimeFormat("en-US",{month:"long"}).format(new Date(i,a-1));return r.jsx(gt,{isOpen:e,onClose:t,title:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ts,{className:"w-5 h-5 text-primary-500"}),r.jsx("span",{children:"AI Financial Insights"})]}),maxWidth:"3xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl bg-gradient-to-br from-primary-500 to-indigo-600 text-white relative overflow-hidden shadow-xl shadow-primary-500/20",children:[r.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:r.jsx(Bg,{size:120})}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Qb,{className:"bg-white/20 hover:bg-white/30 text-white border-white/20 backdrop-blur-md",children:"Gemini 2.0 Flash"}),r.jsx(Qb,{className:"bg-emerald-500/20 text-emerald-100 border-emerald-500/20 backdrop-blur-md",children:"Financial Analysis"})]}),r.jsxs("h2",{className:"text-2xl md:text-3xl font-black mb-1",children:[o," ",i," Report"]}),r.jsx("p",{className:"text-sm text-primary-100 max-w-md font-medium",children:"Automated deep-dive into community liquidity, transaction trends, and sustainability metrics."})]})]}),r.jsx("div",{className:"relative min-h-[400px] max-h-[60vh] overflow-y-auto premium-scrollbar px-1",children:r.jsx(te,{mode:"wait",children:n?r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center p-12 text-center",children:[r.jsxs("div",{className:"relative w-20 h-20 mb-6",children:[r.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/20"}),r.jsx("div",{className:"absolute inset-0 rounded-full border-t-4 border-primary-500 animate-spin"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary-500",children:r.jsx(Bg,{className:"w-8 h-8 animate-pulse"})})]}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Analyzing Data..."}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs mx-auto",children:"Gemini is processing your transactions and calculating growth metrics."})]},"loading"):s?r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"prose prose-sm dark:prose-invert max-w-none ai-report-content pb-8",children:r.jsx("div",{className:"p-4 md:p-6 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",dangerouslySetInnerHTML:{__html:qO(s)}})},"content"):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-12 text-center",children:[r.jsx(rr,{className:"w-12 h-12 text-light-muted mb-4 opacity-50"}),r.jsx("p",{className:"text-light-muted",children:"No report data found."})]})})}),r.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row gap-3",children:[r.jsx(M,{variant:"ghost",className:"flex-1 rounded-2xl h-12 border border-light-border dark:border-dark-border",onClick:t,children:"Close Analysis"}),!n&&s&&r.jsxs(M,{className:"flex-1 rounded-2xl h-12 bg-primary-500 hover:bg-primary-600 shadow-lg shadow-primary-500/20 gap-2",onClick:()=>window.print(),children:[r.jsx(Zo,{className:"w-4 h-4"}),"Export PDF"]})]})]})})}function Qb({children:e,className:t}){return r.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-wider border ${t}`,children:e})}function qO(e){let t=e.replace(/```html|```/g,"");return!t.includes("<strong")&&!t.includes("<span")&&(t=t.replace(/\*\*(.*?)\*\*/g,'<strong class="text-primary-600 dark:text-primary-400">$1</strong>'),t=t.replace(/^\s*\*\s+(.*)$/gm,'<li class="ml-4 mb-2">$1</li>'),t=t.replace(/^\s*#\s+(.*)$/gm,'<h3 class="text-lg font-bold mt-6 mb-3">$1</h3>'),t=t.replace(/^\s*##\s+(.*)$/gm,'<h4 class="text-base font-bold mt-4 mb-2">$1</h4>')),t}function h1({user:e}){const[t,s]=p.useState("overview"),[n,a]=p.useState(!1),[i,o]=p.useState(new Date().getMonth()+1),[l,d]=p.useState(new Date().getFullYear()),c=O(C.finance.getCurrentBalance),u=O(C.finance.getTransactions,{limit:50}),m=O(C.finance.getMonthlySummary,{month:i,year:l}),h=V(C.finance.reverseTransaction),x=SC(C.finance.generateAIReport),[g,v]=p.useState(!1),[w,f]=p.useState(null),[b,y]=p.useState(!1),{showToast:k}=kn(),j=(e==null?void 0:e.role)==="super_admin",S=(e==null?void 0:e.isFinancialManager)===!0,P=j||S,R=N=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(N);return c===void 0||u===void 0?r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(N=>r.jsx(Wt,{},N))}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(N=>r.jsx(Oe,{},N))})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[r.jsx(D,{className:"md:col-span-1 border-primary-500/20 bg-gradient-to-br from-primary-500/10 to-transparent",children:r.jsxs(U,{className:"p-4 md:p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-primary-500/20 text-primary-500",children:r.jsx(Ar,{className:"w-6 h-6 md:w-8 md:h-8"})})}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1 md:mb-2 text-balance",children:"Current Balance"}),r.jsx("p",{className:"text-2xl md:text-4xl font-black text-primary-500 truncate",children:R(c||0)})]})}),r.jsx(D,{className:"border-emerald-500/20",children:r.jsxs(U,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-emerald-500/10 text-emerald-500",children:r.jsx(mn,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-xl md:text-2xl font-black text-emerald-500 truncate ml-2",children:R((m==null?void 0:m.totalDeposits)||0)})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Monthly Deposits"}),r.jsxs("p",{className:"text-[10px] text-light-muted",children:[i,"/",l]})]})}),r.jsx(D,{className:"border-rose-500/20",children:r.jsxs(U,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-rose-500/10 text-rose-500",children:r.jsx(yh,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-xl md:text-2xl font-black text-rose-500 truncate ml-2",children:R((m==null?void 0:m.totalWithdrawals)||0)})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Monthly Withdrawals"}),r.jsxs("p",{className:"text-[10px] text-light-muted",children:[i,"/",l]})]})})]}),r.jsxs("div",{className:"flex items-center gap-1 p-1 rounded-xl md:rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border w-fit max-w-full overflow-x-auto hide-scrollbar",children:[r.jsx("button",{onClick:()=>s("overview"),className:`px-4 md:px-6 py-2 md:py-2.5 rounded-lg md:rounded-xl text-xs md:text-sm font-bold transition-all whitespace-nowrap ${t==="overview"?"bg-primary-500 text-white shadow-lg shadow-primary-500/20":"text-light-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Overview"}),P&&r.jsx("button",{onClick:()=>s("pending"),className:`px-4 md:px-6 py-2 md:py-2.5 rounded-lg md:rounded-xl text-xs md:text-sm font-bold transition-all whitespace-nowrap ${t==="pending"?"bg-primary-500 text-white shadow-lg shadow-primary-500/20":"text-light-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Pending Submissions"})]}),t==="overview"&&r.jsxs(r.Fragment,{children:[P&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[r.jsxs(M,{onClick:()=>a(!0),className:"bg-primary-500 hover:bg-primary-600 w-full sm:w-auto",children:[r.jsx(oi,{className:"w-4 h-4 mr-2"}),"Add Transaction"]}),r.jsxs(M,{variant:"outline",className:"w-full sm:w-auto border-light-border dark:border-dark-border mb-4 sm:mb-0 hover:border-primary-500 hover:text-primary-500 transition-colors",disabled:b,onClick:async()=>{const N=m;if(N!=null&&N.aiReportText){f(N.aiReportText),v(!0);return}y(!0),v(!0),f(null);try{const I=await x({userId:e._id,month:i,year:l});I.success&&(f(I.aiReportText),k("success","Financial analysis complete!"))}catch(I){console.error("Report generation failed:",I),k("error","Failed to generate financial analysis"),v(!1)}finally{y(!1)}},children:[r.jsx(Ts,{className:`w-4 h-4 mr-2 ${b?"animate-spin":"text-primary-500"}`}),b?"Analyzing...":"Generate Report"]})]}),r.jsxs(D,{children:[r.jsx(xe,{className:"py-4 px-4 md:px-6",children:r.jsxs(pe,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(rr,{className:"w-5 h-5 text-primary-500"}),r.jsx("span",{className:"text-lg md:text-xl",children:"Transaction History"})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx("select",{value:i,onChange:N=>o(Number(N.target.value)),className:"flex-1 sm:flex-none px-2 py-1 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-xs md:text-sm outline-none focus:ring-1 focus:ring-primary-500",children:Array.from({length:12},(N,I)=>r.jsx("option",{value:I+1,children:new Date(2024,I).toLocaleDateString("en-US",{month:"short"})},I+1))}),r.jsx("select",{value:l,onChange:N=>d(Number(N.target.value)),className:"flex-1 sm:flex-none px-2 py-1 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-xs md:text-sm outline-none focus:ring-1 focus:ring-primary-500",children:Array.from({length:5},(N,I)=>r.jsx("option",{value:2024+I,children:2024+I},2024+I))})]})]})}),r.jsx(U,{children:r.jsx("div",{className:"space-y-3",children:u&&u.length>0?u.map(N=>{const I=Date.now()-N.createdAt<864e5,A=P&&I&&!N.isReversed;return r.jsx("div",{className:`p-4 rounded-lg border transition-colors ${N.isReversed?"border-light-border/50 dark:border-dark-border/50 opacity-50":"border-light-border dark:border-dark-border hover:border-primary-500/30"}`,children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start md:items-center gap-4 flex-1",children:[r.jsx("div",{className:`p-3 rounded-xl shrink-0 ${N.type==="deposit"?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:N.type==="deposit"?r.jsx(mn,{className:"w-5 h-5 md:w-6 md:h-6"}):r.jsx(yh,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-bold text-sm md:text-base truncate",children:N.description}),N.isReversed&&r.jsx(H,{variant:"outline",className:"text-[10px] h-4",children:"Reversed"}),N.reversedFrom&&r.jsx(H,{className:"bg-amber-500 text-[10px] h-4",children:"Reversal"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-[10px] md:text-xs text-light-muted",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(St,{className:"w-3 h-3"}),N.recordedByName]}),N.memberName&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Se,{className:"w-3 h-3"}),N.memberName]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3 h-3"}),ct(N.createdAt,{addSuffix:!0})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-4 pl-14 md:pl-0",children:[r.jsx("div",{className:"text-left md:text-right",children:r.jsxs("p",{className:`text-lg md:text-xl font-black ${N.type==="deposit"?"text-emerald-500":"text-rose-500"}`,children:[N.type==="deposit"?"+":"-",R(N.amount)]})}),r.jsxs("div",{className:"flex gap-2",children:[N.proofStorageId&&r.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(Et,{className:"w-4 h-4"})}),A&&r.jsxs(M,{size:"sm",variant:"outline",onClick:async()=>{confirm("Are you sure you want to reverse this transaction?")&&await h({userId:e._id,transactionId:N._id})},className:"h-8 px-2 text-amber-500 border-amber-500/30 hover:bg-amber-500/10 text-xs gap-1",children:[r.jsx(c3,{className:"w-3 h-3"}),r.jsx("span",{className:"hidden sm:inline",children:"Reverse"})]})]})]})]})},N._id)}):r.jsx("div",{className:"text-center py-12 text-light-muted",children:"No transactions yet"})})})]})]}),t==="pending"&&r.jsx($O,{user:e}),r.jsx(VO,{isOpen:n,onClose:()=>a(!1),userId:e._id}),r.jsx(WO,{isOpen:g,onClose:()=>v(!1),report:w,isLoading:b,month:i,year:l})]})}function HO(){const{user:e}=X(),[t,s]=p.useState("attendance");return!e||e.role!=="super_admin"&&e.role!=="board_member"?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs(D,{className:"p-8 text-center",children:[r.jsx(qe,{className:"w-16 h-16 mx-auto mb-4 text-rose-500"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"You don't have permission to access this page."})]})}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Governance System"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Board Governance"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Professional attendance tracking and financial management system"})]}),r.jsxs("div",{className:"flex gap-4 border-b border-light-border dark:border-dark-border",children:[r.jsxs("button",{onClick:()=>s("attendance"),className:`px-6 py-3 font-bold text-sm transition-all relative ${t==="attendance"?"text-primary-500":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_t,{className:"w-4 h-4"}),"Attendance"]}),t==="attendance"&&r.jsx(T.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-500"})]}),r.jsxs("button",{onClick:()=>s("finance"),className:`px-6 py-3 font-bold text-sm transition-all relative ${t==="finance"?"text-primary-500":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ar,{className:"w-4 h-4"}),"Finance"]}),t==="finance"&&r.jsx(T.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-500"})]})]}),r.jsx(te,{mode:"wait",children:r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:t==="attendance"?r.jsx(u1,{user:e}):r.jsx(h1,{user:e})},t)})]})}function GO(){const{user:e}=X();return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Attendance System"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Meeting Attendance"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Track your meeting participation and submit excuses"})]}),r.jsx(u1,{user:e})]})}function QO(){const{user:e}=X();return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-emerald-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500",children:"Financial Management"})]}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Community Finance"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Overview of community funds and financial transactions"})]}),r.jsx(h1,{user:e})]})}function Kb({label:e,options:t,value:s,onChange:n}){var d;const[a,i]=p.useState(!1),o=p.useRef(null),l=((d=t.find(c=>c.value===s))==null?void 0:d.label)??"";return p.useEffect(()=>{const c=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),r.jsxs("div",{ref:o,className:"relative",children:[r.jsx("label",{className:"block text-sm font-bold mb-2 uppercase tracking-wide text-light-muted",children:e}),r.jsxs("button",{type:"button",onClick:()=>i(c=>!c),className:`
                    w-full flex items-center justify-between gap-2
                    px-4 py-3 rounded-xl border text-sm font-bold
                    bg-light-bg dark:bg-dark-bg
                    text-light-text dark:text-dark-text
                    transition-all duration-200
                    ${a?"border-primary-500 ring-2 ring-primary-500/20":"border-light-border dark:border-dark-border hover:border-primary-400"}
                `,children:[r.jsx("span",{children:l}),r.jsx(Je,{className:`w-4 h-4 text-light-muted transition-transform duration-300 ${a?"rotate-180":""}`})]}),r.jsx(te,{children:a&&r.jsx(T.div,{initial:{opacity:0,y:-6,scale:.97},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-6,scale:.97},transition:{duration:.15,ease:"easeOut"},className:`\r
                            absolute z-50 left-0 right-0 mt-1\r
                            bg-white dark:bg-dark-card\r
                            border border-light-border dark:border-dark-border\r
                            rounded-xl shadow-xl shadow-black/10\r
                            overflow-hidden\r
                        `,children:r.jsx("div",{className:"max-h-48 overflow-y-auto premium-scrollbar py-1",children:t.map(c=>{const u=c.value===s;return r.jsxs("button",{type:"button",onClick:()=>{n(c.value),i(!1)},className:`
                                            w-full flex items-center justify-between
                                            px-4 py-2.5 text-sm font-semibold text-left
                                            transition-colors duration-150
                                            ${u?"bg-primary-500/10 text-primary-600 dark:text-primary-400":"text-light-text dark:text-dark-text hover:bg-light-bg dark:hover:bg-dark-bg"}
                                        `,children:[c.label,u&&r.jsx(pt,{className:"w-4 h-4 shrink-0 text-primary-500"})]},c.value)})})})})]})}const KO=Array.from({length:12},(e,t)=>({value:t+1,label:new Date(2024,t).toLocaleDateString("en-US",{month:"long"})})),YO=[2024,2025,2026,2027].map(e=>({value:e,label:String(e)}));function JO({isOpen:e,onClose:t,user:s}){const[n,a]=p.useState("1000"),[i,o]=p.useState(new Date().getMonth()+1),[l,d]=p.useState(new Date().getFullYear()),[c,u]=p.useState(null),[m,h]=p.useState(!1),[x,g]=p.useState(!1),v=V(C.files.generateUploadUrl),w=V(C.finance.submitPaymentSubmission),{showToast:f}=kn(),b=S=>{var R;const P=(R=S.target.files)==null?void 0:R[0];if(P){if(!P.type.startsWith("image/")){f("error","Please upload an image file");return}if(P.size>5*1024*1024){f("error","File size must be less than 5MB");return}u(P)}},y=async()=>{if(!c){f("error","Please upload a proof of payment");return}g(!0);try{h(!0);const S=await v(),P=await fetch(S,{method:"POST",headers:{"Content-Type":c.type},body:c}),{storageId:R}=await P.json();h(!1),await w({userId:s._id,amount:parseFloat(n),month:i,year:l,proofStorageId:R}),f("success","Payment submission sent for approval!"),k()}catch(S){console.error("Failed to submit payment:",S),f("error",S.message||"Failed to submit payment")}finally{h(!1),g(!1)}},k=()=>{a("1000"),o(new Date().getMonth()+1),d(new Date().getFullYear()),u(null),t()},j=new Date(l,i-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});return r.jsx(gt,{isOpen:e,onClose:k,title:"Submit Board Due Payment",children:r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"p-4 rounded-2xl bg-primary-500/5 border border-primary-500/10 flex items-center gap-4",children:[r.jsx("div",{className:"w-11 h-11 rounded-full bg-primary-500/10 flex items-center justify-center shrink-0",children:r.jsx(_t,{className:"w-5 h-5 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-widest",children:"Paying For"}),r.jsx("p",{className:"font-bold text-light-text dark:text-dark-text",children:j})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2 uppercase tracking-wide text-light-muted",children:"Amount ()"}),r.jsx(be,{type:"number",value:n,onChange:S=>a(S.target.value),placeholder:"1000",className:"font-bold text-lg"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Kb,{label:"Month",options:KO,value:i,onChange:o}),r.jsx(Kb,{label:"Year",options:YO,value:l,onChange:d})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2 uppercase tracking-wide text-light-muted",children:"Payment Proof (Screenshot)"}),c?r.jsxs("div",{className:"relative group rounded-2xl overflow-hidden border border-light-border dark:border-dark-border bg-black/5",children:[r.jsx("img",{src:URL.createObjectURL(c),alt:"Proof Preview",className:"w-full h-44 object-contain"}),r.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx("button",{onClick:()=>u(null),className:"p-3 rounded-full bg-rose-500 text-white shadow-lg hover:scale-110 transition-transform",children:r.jsx(Ne,{className:"w-5 h-5"})})}),r.jsxs("div",{className:"p-3 bg-light-bg dark:bg-dark-bg border-t border-light-border dark:border-dark-border flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Wr,{className:"w-4 h-4 text-light-muted"}),r.jsx("span",{className:"text-xs font-bold truncate max-w-[150px]",children:c.name})]}),r.jsxs("span",{className:"text-[10px] text-light-muted",children:[(c.size/1024/1024).toFixed(2)," MB"]})]})]}):r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-36 border-2 border-dashed border-light-border dark:border-dark-border rounded-2xl hover:border-primary-500 cursor-pointer bg-light-bg/30 dark:bg-dark-bg/30 transition-all group",children:[r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"p-3 rounded-full bg-primary-500/10 text-primary-500 group-hover:bg-primary-500/20 transition-colors",children:r.jsx(vh,{className:"w-5 h-5"})}),r.jsx("p",{className:"text-sm font-bold text-light-text dark:text-dark-text",children:"Click to upload proof"}),r.jsx("p",{className:"text-xs text-light-muted",children:"PNG or JPG (Max 5MB)"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:b})]})]}),r.jsxs("div",{className:"pt-2 flex gap-3",children:[r.jsx(M,{variant:"ghost",className:"flex-1 rounded-2xl h-12",onClick:k,disabled:x,children:"Cancel"}),r.jsx(M,{className:"flex-1 rounded-2xl h-12 bg-primary-500 hover:bg-primary-600 shadow-lg shadow-primary-500/20",onClick:y,disabled:x||m||!c,children:m?"Uploading":x?"Submitting":"Submit Payment"})]})]})})}function XO({admin:e}){const[t,s]=p.useState(null),[n,a]=p.useState(new Date().getFullYear()),[i,o]=p.useState(""),l=O(C.users.getBoardMembers),d=l==null?void 0:l.find(w=>w._id===t),c=O(C.finance.getMemberContributions,t?{adminId:e._id,targetUserId:t,year:n}:"skip"),u=l==null?void 0:l.filter(w=>w.name.toLowerCase().includes(i.toLowerCase())),m=w=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(w),h=w=>new Date(2024,w-1).toLocaleDateString("en-US",{month:"long"});if(!t)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h2",{className:"text-xl md:text-2xl font-black text-gradient truncate",children:"Member Ledger"}),r.jsx("p",{className:"text-light-muted text-[10px] md:text-sm font-medium",children:"Select a member to view records."})]}),r.jsxs("div",{className:"relative w-full md:w-72",children:[r.jsx(ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted"}),r.jsx("input",{type:"text",placeholder:"Search board members...",value:i,onChange:w=>o(w.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-light-bg/50 border border-light-border focus:border-primary-500/50 outline-none text-xs md:text-sm transition-all"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u==null?void 0:u.map(w=>r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{y:-4},children:r.jsx(D,{className:"cursor-pointer hover:border-primary-500/30 transition-all border-light-border/50 bg-light-card/40",onClick:()=>s(w._id),children:r.jsxs(U,{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center text-primary-500 font-bold shrink-0",children:w.name.charAt(0)}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-bold text-sm truncate",children:w.name}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-black tracking-widest",children:w.role.replace("_"," ")})]})]}),r.jsx(Oo,{className:"w-4 h-4 text-light-muted"})]})})},w._id)),(u==null?void 0:u.length)===0&&r.jsxs("div",{className:"col-span-full py-12 text-center text-light-muted bg-light-bg/20 rounded-2xl border-2 border-dashed border-light-border",children:[r.jsx(Se,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),r.jsx("p",{className:"text-sm",children:"No members found matching your search"})]})]})]});const x=(c==null?void 0:c.reduce((w,f)=>w+f.totalPaid,0))||0,g=(c==null?void 0:c.reduce((w,f)=>w+f.outstanding,0))||0,v=(c==null?void 0:c.reduce((w,f)=>w+f.surplus,0))||0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 md:gap-4 min-w-0",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>s(null),className:"rounded-xl h-10 w-10 p-0 flex-shrink-0",children:r.jsx(fr,{className:"w-5 h-5"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("h2",{className:"text-lg md:text-2xl font-black text-gradient truncate",children:["Ledger: ",d==null?void 0:d.name]}),r.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:r.jsx("select",{value:n,onChange:w=>a(Number(w.target.value)),className:"bg-transparent text-[10px] md:text-xs font-black text-primary-500 border-none outline-none cursor-pointer",children:[2024,2025,2026].map(w=>r.jsxs("option",{value:w,children:[w," Fiscal Year"]},w))})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[r.jsx(D,{className:"bg-emerald-500/5 border-emerald-500/20",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Ar,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-500"}),r.jsx(H,{className:"bg-emerald-500 text-[10px]",children:"Total Paid"})]}),r.jsx("p",{className:"text-xl md:text-2xl font-black text-emerald-500",children:m(x)})]})}),r.jsx(D,{className:"bg-rose-500/5 border-rose-500/20",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(_t,{className:"w-4 h-4 md:w-5 md:h-5 text-rose-500"}),r.jsx(H,{className:"bg-rose-500 text-[10px]",children:"Outstanding"})]}),r.jsx("p",{className:"text-xl md:text-2xl font-black text-rose-500",children:m(g)})]})}),r.jsx(D,{className:"bg-primary-500/5 border-primary-500/20",children:r.jsxs(U,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(ZO,{className:"w-4 h-4 md:w-5 md:h-5 text-primary-500"}),r.jsx(H,{className:"bg-primary-500 text-[10px]",children:"Surplus"})]}),r.jsx("p",{className:"text-xl md:text-2xl font-black text-primary-500",children:m(v)})]})})]}),r.jsxs(D,{className:"border-light-border/50",children:[r.jsx(xe,{className:"pb-2",children:r.jsx(pe,{className:"text-sm font-black uppercase tracking-widest text-light-muted",children:"Monthly Breakdown"})}),r.jsx(U,{className:"px-1 md:px-6",children:r.jsx("div",{className:"overflow-x-auto hide-scrollbar",children:r.jsxs("table",{className:"w-full text-left min-w-[600px] md:min-w-0",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-light-border text-[9px] md:text-[10px] font-black uppercase tracking-wider text-light-muted",children:[r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Month"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Required"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Paid"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Surplus"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Outstanding"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-light-border/50",children:c==null?void 0:c.map(w=>r.jsxs("tr",{className:"text-[10px] md:text-xs hover:bg-light-bg/30 transition-colors",children:[r.jsx("td",{className:"py-3 px-3 md:px-4 font-bold",children:h(w.month)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-medium",children:m(w.requiredAmount)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-black text-emerald-500",children:m(w.totalPaid)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-black text-primary-500",children:m(w.surplus)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-black text-rose-500",children:m(w.outstanding)}),r.jsx("td",{className:"py-3 px-3 md:px-4 text-[9px] md:text-[10px] font-black uppercase italic text-light-muted",children:r.jsx(H,{className:`text-[9px] h-5 min-w-[50px] flex items-center justify-center ${w.status==="cleared"?"bg-emerald-500/20 text-emerald-500 hover:bg-emerald-500/30":w.status==="partial"?"bg-amber-500/20 text-amber-500 hover:bg-amber-500/30":"bg-rose-500/20 text-rose-500 hover:bg-rose-500/30"}`,children:w.status})})]},w.month))})]})})})]})]})}function ZO(e){return r.jsxs("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),r.jsx("polyline",{points:"17 6 23 6 23 12"})]})}function eF({user:e}){const[t,s]=p.useState("personal"),[n,a]=p.useState(!1),[i,o]=p.useState(null),[l]=p.useState(new Date().getFullYear()),d=(e==null?void 0:e.role)==="super_admin",c=O(C.finance.getMyContributions,{userId:e._id,year:l}),u=O(C.finance.getMyPaymentSubmissions,{userId:e._id}),m=f=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(f),h=f=>{switch(f){case"cleared":return r.jsx(H,{className:"bg-emerald-500",children:"Cleared"});case"partial":return r.jsx(H,{className:"bg-amber-500",children:"Partial"});case"owing":return r.jsx(H,{className:"bg-rose-500",children:"Owing"});default:return r.jsx(H,{variant:"outline",children:f})}},x=f=>new Date(2024,f-1).toLocaleDateString("en-US",{month:"long"});if(c===void 0||u===void 0)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(f=>r.jsx(Wt,{},f))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Oe,{})}),r.jsx("div",{className:"lg:col-span-1 border rounded-xl p-4 space-y-4",children:[1,2,3].map(f=>r.jsx("div",{className:"h-20 bg-light-muted/10 animate-pulse rounded-xl"},f))})]})]});if(t==="ledger"&&d)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end mb-4",children:r.jsxs("div",{className:"flex bg-light-bg/50 dark:bg-dark-bg/50 p-1 rounded-xl border border-light-border dark:border-dark-border",children:[r.jsx("button",{onClick:()=>s("personal"),className:"px-4 py-1.5 rounded-lg text-xs font-bold transition-all text-light-muted hover:text-light-text",children:"Personal"}),r.jsx("button",{onClick:()=>s("ledger"),className:"px-4 py-1.5 rounded-lg text-xs font-bold transition-all bg-white dark:bg-dark-card shadow-sm text-primary-500",children:"Member Ledger"})]})}),e&&r.jsx(XO,{admin:e})]});const v=(c==null?void 0:c.reduce((f,b)=>f+b.totalPaid,0))||0,w=(c==null?void 0:c.reduce((f,b)=>f+b.surplus,0))||0;return r.jsxs("div",{className:"space-y-6",children:[d&&r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-primary-500/5 p-3 md:p-4 rounded-2xl border border-primary-500/10 gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-xs md:text-sm font-black text-primary-500 uppercase tracking-wider truncate",children:"Contribution Management"}),r.jsx("p",{className:"text-[9px] md:text-[10px] text-light-muted font-bold leading-tight",children:"Switch between personal and board records."})]}),r.jsxs("div",{className:"grid grid-cols-2 bg-light-bg/50 dark:bg-dark-bg/50 p-1 rounded-xl border border-light-border dark:border-dark-border w-full sm:w-auto sm:flex shrink-0",children:[r.jsx("button",{onClick:()=>s("personal"),className:`px-2 md:px-4 py-2 sm:py-1.5 rounded-lg text-[10px] md:text-xs font-bold transition-all whitespace-nowrap ${t==="personal"?"bg-white dark:bg-dark-card shadow-sm text-primary-500":"text-light-muted hover:text-light-text"}`,children:"Personal"}),r.jsx("button",{onClick:()=>s("ledger"),className:`px-2 md:px-4 py-2 sm:py-1.5 rounded-lg text-[10px] md:text-xs font-bold transition-all whitespace-nowrap ${t==="ledger"?"bg-white dark:bg-dark-card shadow-sm text-primary-500":"text-light-muted hover:text-light-text"}`,children:"Member Ledger"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 md:gap-4",children:[r.jsx(D,{className:"bg-gradient-to-br from-primary-500/5 to-transparent border-primary-500/10",children:r.jsxs(U,{className:"p-3 md:p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-1 md:mb-2",children:[r.jsx("div",{className:"p-1.5 rounded-lg bg-primary-500/10 text-primary-500 shrink-0",children:r.jsx(mn,{className:"w-4 h-4 md:w-5 h-5"})}),r.jsxs("span",{className:"text-[10px] md:text-xs font-bold text-light-muted uppercase whitespace-nowrap",children:["Total Paid ",l]})]}),r.jsx("p",{className:"text-lg md:text-2xl font-black text-primary-500",children:m(v)})]})}),r.jsx(D,{className:"bg-gradient-to-br from-emerald-500/5 to-transparent border-emerald-500/10",children:r.jsxs(U,{className:"p-3 md:p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-1 md:mb-2",children:[r.jsx("div",{className:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 shrink-0",children:r.jsx(oi,{className:"w-4 h-4 md:w-5 h-5"})}),r.jsx("span",{className:"text-[10px] md:text-xs font-bold text-light-muted uppercase whitespace-nowrap",children:"Total Surplus"})]}),r.jsx("p",{className:"text-lg md:text-2xl font-black text-emerald-500",children:m(w)})]})}),r.jsx(D,{className:"sm:col-span-2 md:col-span-1",children:r.jsx(U,{className:"p-3 md:p-4 flex flex-col justify-center",children:r.jsxs(M,{onClick:()=>a(!0),className:"w-full bg-primary-500 hover:bg-primary-600 h-11 md:h-full py-2 text-sm font-bold shadow-lg shadow-primary-500/10",children:[r.jsx(ii,{className:"w-4 h-4 mr-2"}),"Pay Monthly Due"]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(D,{className:"lg:col-span-2",children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center gap-2",children:[r.jsx(_t,{className:"w-5 h-5"}),"Monthly Contribution Ledger (",l,")"]})}),r.jsx(U,{className:"px-1 md:px-6",children:r.jsx("div",{className:"overflow-x-auto hide-scrollbar",children:r.jsxs("table",{className:"w-full text-left min-w-[500px] md:min-w-0",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-light-border dark:border-dark-border",children:[r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Month"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Required"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Paid"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Status"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted text-right",children:"Surplus"})]})}),r.jsx("tbody",{children:c==null?void 0:c.map((f,b)=>r.jsxs("tr",{className:"border-b border-light-border/50 dark:border-dark-border/50 last:border-0 hover:bg-light-bg/30 dark:hover:bg-dark-bg/30 transition-colors",children:[r.jsx("td",{className:"py-4 px-3",children:r.jsx("span",{className:"font-bold text-sm md:text-base",children:x(f.month)})}),r.jsxs("td",{className:"py-4 px-3 text-xs md:text-sm font-medium",children:["",f.requiredAmount]}),r.jsxs("td",{className:"py-4 px-3",children:[r.jsx("div",{className:"text-xs md:text-sm font-bold",children:m(f.totalPaid)}),f.outstanding>0&&r.jsxs("div",{className:"text-[9px] md:text-[10px] text-rose-500 font-bold",children:["Outstanding: ",m(f.outstanding)]})]}),r.jsx("td",{className:"py-4 px-3",children:h(f.status)}),r.jsx("td",{className:"py-4 px-3 text-right",children:f.surplus>0?r.jsxs("div",{className:"text-xs md:text-sm font-bold text-emerald-500",children:["+",m(f.surplus)]}):r.jsx("span",{className:"text-light-muted",children:"--"})})]},b))})]})})})]}),r.jsxs(D,{className:"lg:col-span-1",children:[r.jsx(xe,{children:r.jsxs(pe,{className:"flex items-center gap-2",children:[r.jsx(Yx,{className:"w-5 h-5"}),"Recent Submissions"]})}),r.jsx(U,{className:"p-3 md:p-6",children:r.jsx("div",{className:"space-y-4",children:u&&u.length>0?u.map(f=>r.jsxs("div",{className:"p-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-sm",children:[x(f.month)," ",f.year]}),r.jsx("p",{className:"text-lg font-black text-primary-500",children:m(f.amount)})]}),r.jsx(H,{className:f.status==="approved"?"bg-emerald-500":f.status==="rejected"?"bg-rose-500":"bg-amber-500",children:f.status.charAt(0).toUpperCase()+f.status.slice(1)})]}),r.jsxs("div",{className:"flex items-center justify-between text-[10px] text-light-muted",children:[r.jsx("span",{children:new Date(f.createdAt).toLocaleDateString()}),f.proofUrl&&r.jsxs("button",{onClick:()=>o({url:f.proofUrl,title:`Proof - ${x(f.month)} ${f.year}`}),className:"flex items-center gap-1 text-primary-500 hover:text-primary-600 font-bold",children:[r.jsx(Et,{className:"w-3 h-3"})," View Proof"]})]}),f.rejectionReason&&r.jsxs("div",{className:"mt-2 p-2 rounded bg-rose-500/10 text-rose-500 text-[10px]",children:[r.jsx("strong",{children:"Reason:"})," ",f.rejectionReason]})]},f._id)):r.jsx("div",{className:"text-center py-8 text-light-muted text-sm",children:"No payment submissions yet"})})})]})]}),r.jsx(JO,{isOpen:n,onClose:()=>a(!1),user:e}),r.jsx(m1,{isOpen:!!i,onClose:()=>o(null),imageUrl:(i==null?void 0:i.url)||"",title:i==null?void 0:i.title})]})}function tF(){const{user:e}=X();return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Personal Contributions"})]}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"My Contributions"}),r.jsx("p",{className:"text-xs md:text-base text-light-muted dark:text-dark-muted font-medium max-w-xl",children:"Manage your monthly dues and track surplus payments"})]}),r.jsx(eF,{user:e})]})}function rF(){const{user:e,isLoading:t}=X(),s=bt(),n=le();if(t)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});if(!e)return r.jsx(Me,{to:"/login",state:{from:s},replace:!0});const a=()=>{QN(),setTimeout(()=>{var o,l;const i=((l=(o=s.state)==null?void 0:o.from)==null?void 0:l.pathname)||"/feed";n(i,{replace:!0})},1e3)};return r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-white dark:bg-[#0A0A0A]",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none opacity-50",children:[r.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary-500/10 rounded-full blur-[120px] -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-secondary-500/10 rounded-full blur-[120px] translate-y-1/2 -translate-x-1/2"})]}),r.jsxs(T.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},transition:{type:"spring",damping:25,stiffness:200},className:"relative w-full max-w-md bg-white dark:bg-[#151515] border border-light-border dark:border-dark-border shadow-2xl rounded-[2.5rem] p-6 sm:p-10 text-center",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-16 w-auto rounded-2xl shadow-xl shadow-primary-500/10"})}),r.jsx(T.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",damping:15},className:"w-20 h-20 mx-auto mb-6 rounded-3xl bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center shadow-lg shadow-primary-500/30",children:r.jsx(pt,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-3 tracking-tight",children:"Welcome Aboard!"}),r.jsxs("p",{className:"text-base text-light-muted dark:text-dark-muted mb-8 leading-relaxed px-2",children:["Your journey with Baptizo Community begins now. We're thrilled to have you here ",e.name.split(" ")[0],"."]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"relative group overflow-hidden bg-emerald-50/50 dark:bg-emerald-900/10 p-5 rounded-3xl border border-emerald-100 dark:border-emerald-900/30 transition-all",children:[r.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:scale-110 transition-transform",children:r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"",className:"w-12 h-12"})}),r.jsxs("h3",{className:"font-bold text-emerald-800 dark:text-emerald-400 mb-2 flex items-center justify-center gap-2",children:[r.jsxs("span",{className:"relative flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]}),"Final Step: Join the Community"]}),r.jsx("p",{className:"text-sm text-emerald-700/80 dark:text-emerald-300/70",children:"Connect with other members and get real-time updates in our exclusive WhatsApp group."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(M,{onClick:a,className:"w-full h-14 text-lg font-semibold bg-[#25D366] hover:bg-[#128C7E] text-white rounded-2xl shadow-xl shadow-green-500/20 active:scale-[0.98] transition-all flex items-center justify-center gap-3",children:[r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"",className:"w-6 h-6 contrast-125"}),"Join WhatsApp Group"]}),r.jsx("button",{onClick:()=>n("/feed"),className:"w-full py-3 text-sm font-medium text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:"Skip for now & Go to Feed"})]})]})]})]})}function sF(){var b,y,k;const{postId:e}=da(),t=le(),{user:s}=X(),n=O(C.posts.getPost,e?{postId:e}:"skip"),a=V(C.responses.submitResponse),[i,o]=p.useState(""),[l,d]=p.useState(!1),[c,u]=p.useState(""),[m,h]=p.useState(0);p.useEffect(()=>{const j=i.trim().split(/\s+/).filter(S=>S.length>0);h(j.length)},[i]);const x=async j=>{if(j.preventDefault(),!(!s||!i.trim()||!e)){d(!0),u("");try{await a({userId:s._id,postId:e,content:i.trim()}),t(-1)}catch(S){console.error("Failed to submit response:",S),S.message.includes("Vacancy Filled")?u("Sorry, the response slots for this post are full."):S.message.includes("already responded")?u("You have already responded to this post."):u("Failed to submit response. Please try again.")}finally{d(!1)}}},[g,v]=p.useState(!1),w=()=>{i.trim()?v(!0):t(-1)},f=()=>{v(!1),t(-1)};return n?r.jsxs("div",{className:"min-h-screen bg-[#f8f9fa] dark:bg-[#0a0a0a] pb-20",children:[r.jsx("header",{className:"sticky top-0 z-50 bg-white/80 dark:bg-black/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:w,className:"p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/10 text-gray-500 hover:text-red-500 transition-colors",title:"Cancel & Exit",children:r.jsx(Ne,{className:"w-5 h-5"})}),r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 hidden sm:block",children:"Official Response"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-xs font-medium text-gray-500",children:[m," words"]}),r.jsxs(M,{variant:"primary",size:"sm",disabled:!i.trim()||l,onClick:x,className:"flex items-center gap-2",children:[r.jsx(ra,{className:"w-4 h-4"}),l?"Submitting...":"Submit"]})]})]})}),r.jsx("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:r.jsxs("div",{className:"grid gap-8 md:grid-cols-[1fr,1.5fr]",children:[r.jsx(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-4",children:r.jsxs("div",{className:"bg-white dark:bg-[#151515] p-6 rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm sticky top-24",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[r.jsx(rr,{className:"w-4 h-4"}),"Responding To"]}),r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.jsxs("p",{className:"text-lg font-medium leading-relaxed text-gray-800 dark:text-gray-200",children:['"',n.content,'"']})}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400 font-bold text-xs",children:(y=(b=n.author)==null?void 0:b.name)==null?void 0:y.charAt(0)}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(k=n.author)==null?void 0:k.name}),r.jsx("p",{className:"text-xs text-gray-500",children:"Admin Post"})]})]})]})}),r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"relative",children:[c&&r.jsxs("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-xl flex items-center gap-2 text-sm border border-red-100 dark:border-red-900/30",children:[r.jsx(yr,{className:"w-4 h-4 flex-shrink-0"}),c]}),r.jsxs("div",{className:"bg-[#fff9e6] dark:bg-[#1a1a1a] min-h-[60vh] rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 relative overflow-hidden",style:{backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"100% 2rem",backgroundPosition:"0 1.5rem"},children:[r.jsx("div",{className:"absolute left-12 top-0 bottom-0 w-px bg-red-300/50 dark:bg-red-500/20 h-full pointer-events-none"}),r.jsx("div",{className:"p-0",children:r.jsx("textarea",{className:"w-full h-[60vh] bg-transparent border-0 focus:ring-0 resize-none p-6 pl-16 text-lg leading-[2rem] text-gray-800 dark:text-gray-200 placeholder:text-gray-400/50 dark:placeholder:text-gray-600",placeholder:"Start writing your thoughts here...",value:i,onChange:j=>o(j.target.value),autoFocus:!0,style:{lineHeight:"2rem"}})})]}),r.jsx("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-500",children:r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(i3,{className:"w-3 h-3"}),"Express yourself freely"]})})]})]})}),r.jsx(gt,{isOpen:g,onClose:()=>v(!1),title:"Discard Changes?",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"You have unsaved text. Are you sure you want to discard your response?"}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(M,{variant:"ghost",onClick:()=>v(!1),children:"Keep Editing"}),r.jsx(M,{variant:"danger",onClick:f,children:"Discard & Leave"})]})]})})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})})}const Yb=`
  .premium-scrollbar::-webkit-scrollbar {
    width: 4px;
  }
  .premium-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
  }
  .dark .premium-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.05);
  }
  .dark .premium-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.1);
  }
`;function nF({isOpen:e,onClose:t}){const s=bt(),n=le(),{user:a}=X(),{theme:i,toggleTheme:o}=Bc(),[l,d]=p.useState(["Board Hub"]),c=p.useRef({}),u=p.useRef(null);p.useEffect(()=>{s.pathname.startsWith("/board")&&d(b=>b.includes("Board Hub")?b:[...b,"Board Hub"])},[s.pathname]);const m=f=>{const b=!l.includes(f);d(y=>y.includes(f)?y.filter(k=>k!==f):[...y,f]),setTimeout(b?()=>{const y=c.current[f],k=u.current;if(y&&k){const S=y.offsetTop+y.offsetHeight,R=k.scrollTop+k.clientHeight;S>R-16&&k.scrollTo({top:S-k.clientHeight+24,behavior:"smooth"})}}:()=>{const y=c.current[f],k=u.current;if(y&&k){const j=y.offsetTop;k.scrollTop>j-8&&k.scrollTo({top:Math.max(0,j-8),behavior:"smooth"})}},50)},h=O(C.stats.getAdminBadgeCounts,{adminId:a==null?void 0:a._id}),x=f=>{if(!h)return 0;const b=(a==null?void 0:a.role)==="super_admin"||(a==null?void 0:a.role)==="admin",y=(a==null?void 0:a.isFinancialManager)===!0;return f==="Questions"?b?h.questions:0:f==="Messages"?b?h.contacts:0:f==="Banking System"?b?h.withdrawals:0:f==="Finance Hub"&&(b||y)?h.pendingPaymentSubmissions:0},v=[{path:"/admin",label:"Dashboard",icon:an,roles:["admin","super_admin"]},{path:"/admin/master-pool",label:"Master Pool",icon:$w,roles:["admin","super_admin"]},{path:"/admin/announcements",label:"Announcements",icon:Fo,roles:["admin","super_admin"]},{label:"Banking System",icon:ii,roles:["admin","super_admin"],children:[{path:"/admin/banking?tab=overview",label:"Overview",icon:an},{path:"/admin/banking?tab=withdrawals",label:"Withdrawals",icon:Ar},{path:"/admin/banking?tab=wallets",label:"User Wallets",icon:Se},{path:"/admin/banking?tab=rewards",label:"Reward Activity",icon:ke}]},{path:"/admin/polls",label:"Weekly Polls",icon:qw,roles:["admin","super_admin"]},{path:"/admin/diamond-challenge",label:"Challenge Manager",icon:_r,roles:["admin","super_admin"]},{path:"/admin/questions",label:"Questions",icon:Zd,roles:["admin","super_admin"]},{path:"/admin/user-tags",label:"User Tags",icon:x3,roles:["admin","super_admin"]},{path:"/admin/contacts",label:"Messages",icon:Kr,roles:["admin","super_admin"]},{path:"/admin/roles",label:"User Roles",icon:qe,roles:["admin","super_admin"]},{path:"/admin/settings",label:"Settings",icon:Kw,roles:["admin","super_admin"]},{label:"Board Hub",icon:qe,roles:["board_member","admin","super_admin"],children:[{path:"/board",label:"Dashboard",icon:an},{path:"/board/attendance",label:"Attendance",icon:rc},{path:"/board/finance",label:"Finance Hub",icon:Ar},{path:"/board/contributions",label:"My Contributions",icon:ii}]}].filter(f=>f.roles?f.roles.includes(a==null?void 0:a.role):!0),w=r.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0d0d0f] border-r border-light-border dark:border-dark-border py-6 px-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2 flex-shrink-0",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Logo",className:"w-10 h-10 object-contain"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-gradient font-display",children:(a==null?void 0:a.role)==="board_member"?"Board Hub":"Admin"}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted dark:text-dark-muted uppercase tracking-widest",children:"Baptizo Community"})]}),r.jsx("button",{onClick:t,className:"lg:hidden ml-auto p-2 text-light-muted",children:r.jsx(Ne,{className:"w-6 h-6"})})]}),r.jsx("nav",{ref:u,className:"flex-1 space-y-1 overflow-y-auto premium-scrollbar pr-1 min-h-0",children:v.map(f=>{const b=f.icon,y=f.children&&f.children.length>0,k=l.includes(f.label),j=y&&f.children.some(P=>s.pathname===P.path),S=s.pathname===f.path||j;return y?r.jsxs("div",{className:"space-y-1",ref:P=>{c.current[f.label]=P},children:[r.jsxs("button",{onClick:()=>m(f.label),className:`
                                        w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                        ${j?"bg-primary-500/10 text-primary-500 font-bold border border-primary-500/20":"text-light-text dark:text-dark-text hover:bg-light-card/80 dark:hover:bg-dark-card/80"}
                                    `,children:[r.jsx(b,{className:`w-5 h-5 transition-transform duration-300 ${j?"scale-110":"group-hover:scale-110"}`}),r.jsx("span",{className:"text-sm font-medium",children:f.label}),r.jsx(Je,{className:`ml-auto w-4 h-4 transition-transform duration-300 ${k?"rotate-180":""}`})]}),r.jsx(te,{initial:!1,children:k&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"overflow-hidden pl-4 space-y-1",children:f.children.map(P=>{const R=P.icon,L=s.pathname===P.path;return r.jsxs(re,{to:P.path,onClick:()=>{window.innerWidth<1024&&t()},className:`
                                                            flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-200 group
                                                            ${L?"text-primary-500 font-bold bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text hover:bg-light-card/50 dark:hover:bg-dark-card/50"}
                                                        `,children:[r.jsx(R,{className:`w-4 h-4 transition-transform ${L?"scale-110":"group-hover:scale-110"}`}),r.jsx("span",{className:"text-xs font-medium",children:P.label}),x(P.label)>0&&r.jsx("span",{className:`
                                                                ml-auto px-1.5 py-0.5 rounded-full text-[8px] font-bold
                                                                ${L?"bg-primary-500 text-white":"bg-primary-500/20 text-primary-500"}
                                                            `,children:x(P.label)}),L&&!x(P.label)&&r.jsx(T.div,{layoutId:"activeIndicator",className:"ml-auto w-1 h-1 rounded-full bg-primary-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"})]},P.path)})})})]},f.label):r.jsxs(re,{to:f.path,onClick:()=>{window.innerWidth<1024&&t()},className:`
                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                ${S?"bg-primary-500 text-white shadow-lg shadow-primary-500/30 font-bold":"text-light-text dark:text-dark-text hover:bg-light-card/80 dark:hover:bg-dark-card/80"}
                            `,children:[r.jsx(b,{className:`w-5 h-5 transition-transform duration-300 ${S?"scale-110":"group-hover:scale-110"}`}),r.jsx("span",{className:"text-sm font-medium",children:f.label}),x(f.label)>0&&r.jsx("span",{className:`
                                    ml-auto px-2 py-0.5 rounded-full text-[10px] font-bold
                                    ${S?"bg-white text-primary-500":"bg-primary-500 text-white shadow-sm shadow-primary-500/20"}
                                `,children:x(f.label)}),S&&!x(f.label)&&r.jsx(T.div,{layoutId:"activeIndicatorMain",className:"ml-auto w-1.5 h-1.5 rounded-full bg-white shadow-[0_0_8px_white]"})]},f.path)})}),r.jsxs("div",{className:"mt-4 flex-shrink-0 space-y-4 px-2",children:[r.jsx("div",{className:"p-4 rounded-xl glass border border-light-border/50 dark:border-dark-border/50",children:r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold overflow-hidden",children:a!=null&&a.avatarUrl?r.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover"}):a==null?void 0:a.name[0]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-bold truncate",children:a==null?void 0:a.name}),r.jsx("p",{className:"text-[10px] text-primary-500 font-bold uppercase tracking-wider",children:a==null?void 0:a.role.replace("_"," ")})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:hidden",children:[r.jsxs("button",{onClick:()=>{n("/search"),t()},className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm font-bold text-light-text dark:text-dark-text",children:[r.jsx(ft,{className:"w-4 h-4"}),"Search"]}),r.jsx("button",{onClick:o,className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm font-bold text-light-text dark:text-dark-text",children:i==="dark"?r.jsxs(r.Fragment,{children:[r.jsx(zc,{className:"w-4 h-4 text-yellow-500"}),"Light"]}):r.jsxs(r.Fragment,{children:[r.jsx(Vc,{className:"w-4 h-4 text-slate-700"}),"Dark"]})})]}),r.jsxs(re,{to:"/feed",className:"flex items-center justify-center gap-2 w-full py-3 rounded-xl border border-light-border dark:border-dark-border hover:bg-light-card dark:hover:bg-dark-card transition-all text-sm font-bold text-light-muted dark:text-dark-muted hover:text-primary-500",children:[r.jsx(ta,{className:"w-4 h-4"}),"Back to Feed"]})]})]});return r.jsxs(r.Fragment,{children:[r.jsxs("aside",{className:"hidden lg:block fixed inset-y-0 left-0 w-64 z-50",children:[r.jsx("style",{children:Yb}),w]}),r.jsx(te,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] lg:hidden"}),r.jsxs(T.aside,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-y-0 left-0 w-64 z-[70] lg:hidden",children:[r.jsx("style",{children:Yb}),w]})]})})]})}function Jb({children:e}){var c;const{user:t,isLoading:s}=X(),{theme:n,toggleTheme:a}=Bc(),i=le(),[o,l]=p.useState(!1),d=bt();return p.useEffect(()=>{l(!1)},[d.pathname]),s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):!t||t.role!=="admin"&&t.role!=="super_admin"&&t.role!=="board_member"?r.jsx(Me,{to:"/feed",replace:!0}):r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg transition-colors duration-300",children:[r.jsx(nF,{isOpen:o,onClose:()=>l(!1)}),r.jsxs("div",{className:"lg:ml-64 flex flex-col min-h-screen",children:[r.jsx("header",{className:"sticky top-0 z-40 bg-white/80 dark:bg-dark-bg/80 backdrop-blur-md border-b border-light-border dark:border-dark-border px-4 md:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>l(!0),className:"lg:hidden p-2 hover:bg-light-card dark:hover:bg-dark-card rounded-lg",children:r.jsx(r3,{className:"w-6 h-6"})}),r.jsx("div",{className:"hidden md:block",children:r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text capitalize",children:((c=d.pathname.split("/").pop())==null?void 0:c.replace("-"," "))||"Dashboard"})})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsx("button",{onClick:()=>i("/search"),className:"hidden md:flex p-2.5 text-light-muted dark:text-dark-muted hover:bg-light-card dark:hover:bg-dark-card rounded-xl transition-all",children:r.jsx(ft,{className:"w-5 h-5"})}),r.jsx("button",{onClick:a,className:"hidden md:flex p-2.5 text-light-muted dark:text-dark-muted hover:bg-light-card dark:hover:bg-dark-card rounded-xl transition-all",children:n==="dark"?r.jsx(zc,{className:"w-5 h-5 text-yellow-500"}):r.jsx(Vc,{className:"w-5 h-5 text-slate-700"})}),r.jsxs("button",{onClick:()=>i("/notifications"),className:"p-2.5 text-light-muted dark:text-dark-muted hover:bg-light-card dark:hover:bg-dark-card rounded-xl transition-all relative",children:[r.jsx(ao,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-primary-500 rounded-full border-2 border-white dark:border-dark-bg"})]}),r.jsxs("div",{className:"hidden md:flex ml-2 pl-4 border-l border-light-border dark:border-dark-border items-center gap-3",children:[r.jsxs("div",{className:"hidden sm:block text-right",children:[r.jsx("p",{className:"text-xs font-bold truncate",children:t==null?void 0:t.name}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-medium",children:t==null?void 0:t.role})]}),r.jsx("div",{className:"w-9 h-9 rounded-xl bg-primary-500/10 dark:bg-primary-500/20 flex items-center justify-center text-primary-500 font-bold border border-primary-500/20 overflow-hidden",children:t!=null&&t.avatarUrl?r.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full object-cover rounded-xl"}):t==null?void 0:t.name[0]})]})]})]})}),r.jsx("main",{className:"flex-1 p-4 md:p-8",children:r.jsx(te,{mode:"wait",children:r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e},d.pathname)})})]})]})}const aF=["Access Bank","Citibank","Ecobank Nigeria","Fairmoney","Fidelity Bank","First Bank of Nigeria","First City Monument Bank (FCMB)","Globus Bank","Guaranty Trust Bank (GTBank)","Heritage Bank","Keystone Bank","Kuda Bank","Moniepoint","OPay","PalmPay","Polaris Bank","Providus Bank","Stanbic IBTC Bank","Standard Chartered","Sterling Bank","SunTrust Bank","Union Bank of Nigeria","United Bank for Africa (UBA)","Unity Bank","Wema Bank","Zenith Bank"].sort();function iF({poolType:e,amount:t,talents:s,nairaAmount:n,exchangeRate:a,onSubmit:i,onCancel:o}){const[l,d]=p.useState(1),[c,u]=p.useState(""),[m,h]=p.useState(""),[x,g]=p.useState(""),[v,w]=p.useState(""),[f,b]=p.useState(!1),[y,k]=p.useState(""),j=p.useMemo(()=>aF.filter(I=>I.toLowerCase().includes(y.toLowerCase())),[y]),S=()=>{if(l===2){if(!c){w("Please select a bank");return}if(!m||m.length!==10){w("Account number must be exactly 10 digits");return}if(!x||x.trim().length<3){w("Please enter a valid account name");return}}w(""),d(l+1)},P=()=>{d(l-1),w("")},R=()=>{i({bankName:c,accountNumber:m,accountName:x.trim()})},L={diamond:"",gold:"",silver:"",bronze:"",big_pull:""},N={diamond:"Diamond",gold:"Gold",silver:"Silver",bronze:"Bronze",big_pull:"Big Pull"};return r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-light-bg dark:bg-dark-bg rounded-2xl shadow-2xl max-w-md w-full relative overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-4 md:p-6 pb-2 md:pb-4 border-b border-light-border dark:border-dark-border flex justify-between items-center bg-light-bg dark:bg-dark-bg sticky top-0 z-10",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs("h2",{className:"text-lg md:text-xl font-bold text-light-text dark:text-dark-text flex items-center gap-2 truncate",children:[L[e]," Withdraw ",N[e]]}),r.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3].map(I=>r.jsx("div",{className:`h-1 w-6 md:w-8 rounded-full transition-colors duration-300 ${l>=I?"bg-primary-500":"bg-light-border dark:bg-dark-border"}`},I))})]}),r.jsx("button",{onClick:o,className:"p-1.5 md:p-2 rounded-lg hover:bg-light-card dark:hover:bg-dark-card transition-colors flex-shrink-0",children:r.jsx(Ne,{className:"w-4 h-4 md:w-5 md:h-5 text-light-muted dark:text-dark-muted"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[r.jsxs(te,{mode:"wait",children:[l===1&&r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-dark-text",children:"Review Earnings"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:["You are about to withdraw your earnings from the ",N[e]," pool."]})]}),r.jsx("div",{className:"p-4 md:p-6 rounded-2xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10 border border-primary-500/20",children:r.jsxs("div",{className:"flex flex-col items-center gap-4 md:gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl md:text-4xl font-display font-bold text-light-text dark:text-dark-text mb-1",children:t.toFixed(2)}),r.jsx("p",{className:"text-[10px] md:text-sm font-medium text-light-muted dark:text-dark-muted uppercase tracking-wider",children:"Rubies"})]}),r.jsx("div",{className:"w-full h-px bg-primary-500/20"}),r.jsxs("div",{className:"flex justify-between w-full gap-2 md:gap-4",children:[r.jsxs("div",{className:"text-center flex-1",children:[r.jsx("p",{className:"text-lg md:text-xl font-bold text-amber-500 mb-0.5 md:mb-1",children:s.toFixed(2)}),r.jsx("p",{className:"text-[10px] md:text-xs font-medium text-light-muted dark:text-dark-muted uppercase tracking-wider",children:"Talents"})]}),r.jsx("div",{className:"w-px h-8 md:h-10 bg-primary-500/20"}),r.jsxs("div",{className:"text-center flex-1",children:[r.jsxs("p",{className:"text-lg md:text-xl font-bold text-green-500 mb-0.5 md:mb-1",children:["",n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsx("p",{className:"text-[10px] md:text-xs font-medium text-light-muted dark:text-dark-muted uppercase tracking-wider",children:"Naira"})]})]})]})}),r.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-xs text-center text-blue-600 dark:text-blue-400 font-medium",children:["Current Exchange Rate: 1 Ruby = ",a]})]},"step1"),l===2&&r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-dark-text",children:"Bank Details"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Enter your bank information to receive payments."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-light-muted dark:text-dark-muted ml-1",children:"Bank Name"}),r.jsxs("button",{onClick:()=>b(!0),className:"w-full px-3 md:px-4 py-2.5 md:py-3.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-left flex items-center justify-between hover:border-primary-500 transition-colors group",children:[r.jsx("span",{className:`text-sm md:text-base ${c?"text-light-text dark:text-dark-text":"text-light-muted/70 dark:text-dark-muted/70"}`,children:c||"Select Bank"}),r.jsx(Oo,{className:"w-4 h-4 text-light-muted group-hover:text-primary-500 transition-colors"})]})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-light-muted dark:text-dark-muted ml-1",children:"Account Number"}),r.jsx("input",{type:"text",value:m,onChange:I=>h(I.target.value.replace(/\D/g,"").slice(0,10)),className:"w-full px-3 md:px-4 py-2.5 md:py-3.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm md:text-base text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none font-mono tracking-wider transition-shadow placeholder:text-light-muted/50 dark:placeholder:text-dark-muted/50",placeholder:"0123456789"}),r.jsxs("p",{className:"text-[10px] text-right text-light-muted dark:text-dark-muted pr-1",children:[m.length,"/10 digits"]})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-light-muted dark:text-dark-muted ml-1",children:"Account Name"}),r.jsx("input",{type:"text",value:x,onChange:I=>g(I.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm md:text-base text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-shadow placeholder:text-light-muted/50 dark:placeholder:text-dark-muted/50",placeholder:"John Doe"})]}),r.jsx(te,{children:v&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-sm text-red-600 dark:text-red-400 flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),v]})})]})]},"step2"),l===3&&r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-dark-text",children:"Confirm Pay Out"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Please review your details before confirming."})]}),r.jsxs("div",{className:"bg-light-card dark:bg-dark-card rounded-2xl p-5 border border-light-border dark:border-dark-border space-y-4 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-light-border/50 dark:border-dark-border/50",children:[r.jsx("span",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total Amount"}),r.jsxs("span",{className:"font-bold text-xl text-green-500",children:["",n.toLocaleString()]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Bank Name"}),r.jsx("span",{className:"font-medium text-light-text dark:text-dark-text text-right",children:c})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Account Number"}),r.jsx("span",{className:"font-mono text-light-text dark:text-dark-text",children:m})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Account Name"}),r.jsx("span",{className:"font-medium text-light-text dark:text-dark-text text-right",children:x})]})]})]}),r.jsxs("div",{className:"flex gap-4 p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:[r.jsx(et,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400/90 leading-relaxed",children:"Your withdrawal request will be reviewed by an admin. Once approved, the Naira amount will be transferred to your account within 1-3 business days."})]})]},"step3")]}),r.jsx(te,{children:f&&r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-light-bg dark:bg-dark-bg z-20 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex gap-3 items-center bg-light-card dark:bg-dark-card sticky top-0",children:[r.jsx("button",{onClick:()=>b(!1),className:"p-2 -ml-2 rounded-lg hover:bg-light-border dark:hover:bg-dark-border transition-colors",children:r.jsx(ta,{className:"w-5 h-5 text-light-text dark:text-dark-text"})}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted"}),r.jsx("input",{type:"text",placeholder:"Search banks...",autoFocus:!0,value:y,onChange:I=>k(I.target.value),className:"w-full pl-9 pr-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-sm outline-none focus:ring-2 focus:ring-primary-500"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:r.jsx("div",{className:"space-y-1",children:j.length>0?j.map(I=>r.jsxs("button",{onClick:()=>{u(I),b(!1),k("")},className:`w-full text-left px-4 py-3 rounded-xl flex items-center justify-between transition-colors ${c===I?"bg-primary-500/10 text-primary-500":"hover:bg-light-card dark:hover:bg-dark-card text-light-text dark:text-dark-text"}`,children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(KC,{className:`w-4 h-4 ${c===I?"text-primary-500":"text-light-muted"}`}),I]}),c===I&&r.jsx(et,{className:"w-4 h-4 text-primary-500"})]},I)):r.jsx("div",{className:"text-center py-8 text-light-muted dark:text-dark-muted",children:r.jsxs("p",{children:['No banks found matching "',y,'"']})})})})]})})]}),r.jsx("div",{className:"p-4 md:p-6 pt-2 bg-light-bg dark:bg-dark-bg sticky bottom-0 z-10 border-t border-light-border/50 dark:border-dark-border/50",children:r.jsxs("div",{className:"flex gap-3 md:gap-4",children:[l>1&&r.jsxs(M,{variant:"outline",onClick:P,className:"flex-1 py-4 md:py-6 rounded-xl hover:bg-light-card dark:hover:bg-dark-card border-light-border dark:border-dark-border text-sm",children:[r.jsx(ta,{className:"w-4 h-4 mr-1"})," Back"]}),r.jsx(M,{variant:"primary",onClick:l===3?R:S,className:`flex-[2] py-4 md:py-6 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 shadow-lg shadow-primary-500/20 hover:shadow-primary-500/30 transition-all text-sm ${l===1?"w-full":""}`,children:l===3?"Confirm & Withdraw":r.jsxs("span",{className:"flex items-center",children:["Next Step ",r.jsx(Oo,{className:"w-4 h-4 ml-1"})]})})]})})]})})}const oF=[{icon:"",label:"Reaction on Admin Post",reward:"+0.02 Rubies",cap:"0.5/day"},{icon:"",label:"Comment on Admin Post",reward:"+0.05 Rubies",cap:"1.0/day"},{icon:"",label:"Mini Game / Weekly Poll",reward:"+0.1 Rubies",cap:"0.4/day"},{icon:"",label:"Quiz Participation",reward:"+0.5 Rubies",cap:"per quiz"},{icon:"",label:"Quiz Winner",reward:"+5.05 Rubies",cap:"5 withdrawable now!"}];function lF(){const{user:e}=X(),t=le(),[s,n]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(null),[d,c]=p.useState(null),u=O(C.wallets.getWallet,e!=null&&e._id?{userId:e._id}:"skip"),m=O(C.wallets.getWithdrawals,e!=null&&e._id?{userId:e._id}:"skip"),h=O(C.wallets.getUserBadges,e!=null&&e._id?{userId:e._id}:"skip"),x=V(C.wallets.initializeWallet),g=V(C.wallets.requestWithdrawal);if(p.useEffect(()=>{e&&u===null&&x({userId:e._id})},[e,u,x]),!e)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-light-bg dark:bg-dark-bg",children:r.jsx(D,{className:"max-w-md w-full mx-4",children:r.jsxs(U,{className:"pt-6",children:[r.jsx("p",{className:"text-center text-light-muted dark:text-dark-muted",children:"Please log in to view your banking details"}),r.jsx(M,{onClick:()=>t("/login"),className:"w-full mt-4",children:"Log In"})]})})});if(u===void 0)return r.jsx(PD,{});const v=(u==null?void 0:u.totalRubiesDisplay)??0,w=(u==null?void 0:u.totalTalentsDisplay)??0,f=(u==null?void 0:u.nairaEquivalent)??0,b=(u==null?void 0:u.activeRate)??200,y=(u==null?void 0:u.canWithdrawNormal)??!1,k=(u==null?void 0:u.canWithdrawWinner)??!1,j=(u==null?void 0:u.withdrawableDisplay)??0,S=(u==null?void 0:u.minWithdrawalRubies)??24,P=Math.min(v/S*100,100),R=async I=>{if(!(!d||!e))try{const A=await g({userId:e._id,mode:d,bankDetails:I});alert(` Withdrawal request submitted!
${A.amountRubies} Rubies  ${A.nairaAmount.toLocaleString()}
We'll process it shortly.`),c(null)}catch(A){alert(A.message||"Withdrawal failed. Please try again.")}},L=d==="winner"?j:S,N=L*b;return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg",children:[r.jsx("div",{className:"gradient-primary text-white py-6 md:py-8 px-4",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsxs("button",{onClick:()=>t("/feed"),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors text-sm",children:[r.jsx(fr,{className:"w-4 h-4"})," Back to Feed"]}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center flex-shrink-0",children:r.jsx(tl,{className:"w-6 h-6 md:w-8 md:h-8"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-display font-bold truncate",children:"Banking"}),r.jsx("p",{className:"text-white/80 text-xs md:text-base truncate",children:"Manage your Rubies & withdrawals"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass p-4 md:p-6 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Gx,{className:"w-4 h-4 text-amber-300"}),r.jsx("p",{className:"text-xs md:text-sm text-white/60",children:"Total Rubies"})]}),r.jsx("p",{className:"text-3xl md:text-4xl font-display font-bold",children:v.toFixed(2)}),r.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:["= ",w.toFixed(4)," Talents"]})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass p-4 md:p-6 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(mn,{className:"w-4 h-4 text-green-300"}),r.jsx("p",{className:"text-xs md:text-sm text-white/60",children:"Naira Value"})]}),r.jsxs("p",{className:"text-3xl md:text-4xl font-display font-bold",children:["",f.toLocaleString()]}),r.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:["@ ",b," per Ruby (live rate)"]})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass p-4 md:p-6 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ke,{className:"w-4 h-4 text-amber-300"}),r.jsx("p",{className:"text-xs md:text-sm text-white/60",children:"Talents"})]}),r.jsx("p",{className:"text-3xl md:text-4xl font-display font-bold",children:w.toFixed(4)}),r.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:["1 Talent = 100 Rubies = ",(100*b).toLocaleString()]})]})]})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-8 py-6 md:py-8 space-y-6",children:[r.jsx(te,{children:k&&r.jsx(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-5 bg-gradient-to-r from-amber-500/20 to-yellow-500/20 border-2 border-amber-500/60 rounded-2xl",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-500/20 flex items-center justify-center flex-shrink-0 text-2xl",children:""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text",children:"Winner Window Open!"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted mt-1",children:["You won the quiz and have"," ",r.jsxs("strong",{className:"text-amber-600 dark:text-amber-400",children:[j," Rubies ( ",(j*b).toLocaleString(),")"]})," ","available to withdraw right now  no 24-ruby minimum needed!"]}),r.jsxs(M,{id:"winner-withdraw-btn",onClick:()=>c("winner"),variant:"primary",className:"mt-3 bg-amber-500 hover:bg-amber-600 border-0",size:"sm",children:[r.jsx(y3,{className:"w-4 h-4 mr-1"}),"Withdraw ",j," Rubies Now"]})]})]})},"winner-alert")}),r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:r.jsxs(D,{glass:!0,className:"overflow-hidden",children:[r.jsx("div",{className:"h-1.5 bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500"}),r.jsxs(U,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-500/20 to-secondary-500/20 flex items-center justify-center",children:y?r.jsx(Jw,{className:"w-6 h-6 text-green-500"}):r.jsx(Nt,{className:"w-6 h-6 text-light-muted dark:text-dark-muted"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:"Standard Withdrawal"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Withdraw exactly 24 Rubies at a time"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs text-light-muted dark:text-dark-muted mb-1.5",children:[r.jsxs("span",{children:[v.toFixed(2)," Rubies"]}),r.jsxs("span",{children:["Goal: ",S," Rubies"]})]}),r.jsx("div",{className:"h-3 bg-light-border dark:bg-dark-border rounded-full overflow-hidden",children:r.jsx(T.div,{initial:{width:0},animate:{width:`${P}%`},transition:{duration:1},className:"h-full bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full"})}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-1.5 text-right",children:y?" Ready to withdraw!":`${(S-v).toFixed(2)} more Rubies needed`})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3 mb-5",children:[{label:"Your Rubies",value:v.toFixed(2),unit:""},{label:"Withdraw Amount",value:`${S}`,unit:""},{label:"Naira You Get",value:`${(S*b).toLocaleString()}`,unit:""}].map(I=>r.jsxs("div",{className:"text-center p-3 rounded-xl bg-light-card dark:bg-dark-card",children:[r.jsx("p",{className:"text-xl mb-1",children:I.unit}),r.jsx("p",{className:"font-bold text-light-text dark:text-dark-text text-sm",children:I.value}),r.jsx("p",{className:"text-[10px] text-light-muted dark:text-dark-muted",children:I.label})]},I.label))}),r.jsx(M,{id:"normal-withdraw-btn",onClick:()=>c("normal"),disabled:!y,variant:"primary",className:"w-full",children:y?`Withdraw 24 Rubies  ${(S*b).toLocaleString()}`:`Need ${S} Rubies to Withdraw`}),!y&&r.jsx("p",{className:"text-xs text-center text-light-muted dark:text-dark-muted mt-2",children:"Keep earning through quizzes, comments, reactions & mini-games!"})]})]})}),r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsxs("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(h3,{className:"w-5 h-5 text-primary-500"}),r.jsx(pe,{children:"How to Earn Rubies"})]}),r.jsx(Je,{className:`w-5 h-5 transition-transform ${a?"rotate-180":""}`})]})}),r.jsx(te,{children:a&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:r.jsxs(U,{children:[r.jsx("div",{className:"space-y-3",children:oF.map(I=>r.jsxs("div",{className:"overflow-hidden border border-light-border dark:border-dark-border rounded-xl",children:[r.jsxs("button",{onClick:()=>l(o===I.label?null:I.label),className:"w-full flex items-center gap-3 p-4 bg-light-card dark:bg-dark-card hover:bg-light-bg/50 dark:hover:bg-dark-bg/50 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-light-bg dark:bg-dark-bg flex items-center justify-center text-xl shadow-sm flex-shrink-0",children:I.icon}),r.jsxs("div",{className:"flex-1 text-left min-w-0",children:[r.jsx("p",{className:"text-sm sm:text-base font-bold text-light-text dark:text-dark-text leading-tight truncate sm:whitespace-normal",children:I.label}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5 sm:hidden",children:[r.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded",children:I.reward}),r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted italic",children:I.cap})]})]}),r.jsxs("div",{className:"hidden sm:flex flex-col items-end gap-1 px-4 border-r border-light-border dark:border-dark-border flex-shrink-0",children:[r.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 whitespace-nowrap",children:I.reward}),r.jsxs("span",{className:"text-[10px] text-light-muted dark:text-dark-muted whitespace-nowrap",children:["Cap: ",I.cap]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500/10 flex items-center justify-center flex-shrink-0",children:o===I.label?r.jsx(T.span,{initial:{rotate:90},animate:{rotate:0},className:"text-primary-500 font-bold text-lg",children:""}):r.jsx(T.span,{initial:{rotate:-90},animate:{rotate:0},className:"text-primary-500 font-bold text-lg",children:"+"})})]}),r.jsx(te,{children:o===I.label&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-light-bg/30 dark:bg-dark-bg/30 border-t border-light-border dark:border-dark-border",children:r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Daily Limit"}),r.jsx("span",{className:"text-light-text dark:text-dark-text font-bold",children:I.cap})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Reward Rate"}),r.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:I.reward})]}),r.jsxs("p",{className:"text-[11px] text-light-muted dark:text-dark-muted pt-2 border-t border-light-border/50 dark:border-dark-border/50 leading-relaxed italic",children:[I.label==="Reaction on Admin Post"&&"Support teaching sessions by reacting to official posts from the admin team.",I.label==="Comment on Admin Post"&&"Contribute to the lesson by dropping thoughtful comments on admin-led teaching posts.",I.label==="Mini Game / Weekly Poll"&&"Engage with the community by participating in fun mini-games and voting in weekly polls.",I.label==="Quiz Participation"&&"Test your knowledge! Get rewarded for every quiz you participate in during the sessions.",I.label==="Quiz Winner"&&"The ultimate reward for top scholars. If you win the quiz, you can withdraw your first 5 rubies immediately!"]})]})})})]},I.label))}),r.jsx("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[r.jsx("strong",{children:"Withdrawal rules:"})," Standard withdrawals require a minimum of 24 Rubies and deduct exactly 24 Rubies. Quiz winners can withdraw 5 Rubies immediately. After any withdrawal the button locks again until you reach 24 Rubies."]})})]})})})]}),r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsxs("button",{onClick:()=>n(!s),className:"w-full flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yx,{className:"w-5 h-5 text-primary-500"}),r.jsx(pe,{children:"Withdrawal History"})]}),r.jsx(Je,{className:`w-5 h-5 transition-transform ${s?"rotate-180":""}`})]})}),r.jsx(te,{children:s&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:r.jsx(U,{children:m&&m.length>0?r.jsx("div",{className:"space-y-3",children:m.map(I=>r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-light-text dark:text-dark-text capitalize",children:[I.type==="big_pull"?"Standard":I.type==="diamond"?"Winner":I.type," Withdrawal"]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:new Date(I.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-light-text dark:text-dark-text",children:[I.amountRubies," Rubies"]}),r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:["",(I.nairaAmount||0).toLocaleString()]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${I.status==="paid"?"bg-green-500/20 text-green-600":I.status==="pending"?"bg-yellow-500/20 text-yellow-600":"bg-gray-500/20 text-gray-600"}`,children:I.status})]})]},I._id))}):r.jsx("p",{className:"text-center text-light-muted dark:text-dark-muted py-8",children:"No withdrawal history yet"})})})})]}),h&&h.length>0&&r.jsxs(D,{glass:!0,children:[r.jsx(xe,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ke,{className:"w-5 h-5 text-amber-500"}),r.jsx(pe,{children:"Your Badges"})]})}),r.jsx(U,{children:r.jsx("div",{className:"flex flex-wrap gap-3",children:h.map(I=>r.jsxs("div",{className:"px-4 py-2 rounded-full glass border border-primary-500/30 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{className:"text-sm font-semibold text-light-text dark:text-dark-text capitalize",children:I.type.replace(/_/g," ")})]},I._id))})})]})]}),d&&u&&r.jsx(iF,{poolType:d==="winner"?"diamond":"big_pull",amount:L,talents:L/100,nairaAmount:N,exchangeRate:b,onSubmit:R,onCancel:()=>c(null)})]})}function dF(){const e=V(C.passwordReset.requestReset),[t,s]=p.useState(""),[n,a]=p.useState(!1),[i,o]=p.useState(!1),[l,d]=p.useState(""),[c,u]=p.useState(""),m=async h=>{h.preventDefault(),d(""),a(!0);try{const x=await e({email:t.toLowerCase().trim()});if(x.success&&(o(!0),x.token)){const g=`${window.location.origin}/reset-password?token=${x.token}`;u(g),console.log("Reset Link:",g)}}catch(x){d(x.message||"Failed to request reset")}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,children:[r.jsxs(xe,{className:"pt-8 pt-6",children:[r.jsxs(re,{to:"/login",className:"flex items-center gap-2 text-sm text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors mb-4 w-fit",children:[r.jsx(fr,{className:"w-4 h-4"}),"Back to Login"]}),r.jsx(pe,{className:"text-2xl font-bold",children:"Forgot Password?"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),r.jsx(U,{className:"pb-8",children:r.jsx(te,{mode:"wait",children:i?r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(et,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Check your inbox"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted mb-6",children:["We've sent a password reset link to ",r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t}),"."]}),c&&r.jsxs("div",{className:"p-4 bg-primary-50 dark:bg-primary-900/10 border border-primary-100 dark:border-primary-900/30 rounded-2xl mb-6",children:[r.jsx("p",{className:"text-xs font-semibold text-primary-600 dark:text-primary-400 uppercase tracking-wider mb-2",children:"Developer Preview Link (No Email Provider Configured)"}),r.jsx(re,{to:c.replace(window.location.origin,""),className:"text-sm font-medium text-primary-500 break-all underline",children:c})]}),r.jsx(M,{variant:"outline",className:"w-full",onClick:()=>o(!1),children:"Didn't receive it? Try again"})]},"success"):r.jsxs(T.form,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onSubmit:m,className:"space-y-4",children:[l&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 text-sm text-red-600 dark:text-red-400",children:l}),r.jsx(be,{label:"Email Address",type:"email",value:t,onChange:h=>s(h.target.value),icon:r.jsx(Kr,{className:"w-5 h-5"}),placeholder:"your@email.com",required:!0,autoFocus:!0}),r.jsxs(M,{type:"submit",variant:"primary",className:"w-full h-12",isLoading:n,children:[r.jsx(ra,{className:"w-4 h-4 mr-2"}),"Send Reset Link"]})]},"form")})})]})})})}function cF(){const e=le(),[t]=$x(),s=t.get("token"),n=V(C.passwordReset.resetPassword),[a,i]=p.useState(""),[o,l]=p.useState(""),[d,c]=p.useState(!1),[u,m]=p.useState(!1),[h,x]=p.useState("");p.useEffect(()=>{s||x("Missing reset token. Please use the link from your email.")},[s]);const g=async v=>{if(v.preventDefault(),x(""),!!s){if(a.length<6){x("Password must be at least 6 characters");return}if(a!==o){x("Passwords do not match");return}c(!0);try{await n({token:s,newPassword:a}),m(!0),setTimeout(()=>{e("/login")},3e3)}catch(w){x(w.message||"Failed to reset password")}finally{c(!1)}}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,children:[r.jsxs(xe,{className:"pt-8 pt-6",children:[r.jsx(pe,{className:"text-2xl font-bold",children:"Reset Password"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mt-2",children:"Enter your new password below."})]}),r.jsx(U,{className:"pb-8",children:r.jsx(te,{mode:"wait",children:u?r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(et,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Password Updated!"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-6",children:"Your password has been successfully reset. Redirecting you to login..."}),r.jsx(M,{variant:"primary",className:"w-full",onClick:()=>e("/login"),children:"Go to Login Now"})]},"success"):r.jsxs(T.form,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onSubmit:g,className:"space-y-4",children:[h&&r.jsxs("div",{className:"p-3 rounded-xl bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 text-sm text-red-600 dark:text-red-400 flex items-start gap-3",children:[r.jsx(yr,{className:"w-5 h-5 flex-shrink-0"}),h]}),r.jsx(be,{label:"New Password",type:"password",value:a,onChange:v=>i(v.target.value),icon:r.jsx(Nt,{className:"w-5 h-5"}),placeholder:"",required:!0,autoFocus:!0,disabled:!s}),r.jsx(be,{label:"Confirm New Password",type:"password",value:o,onChange:v=>l(v.target.value),icon:r.jsx(Nt,{className:"w-5 h-5"}),placeholder:"",required:!0,disabled:!s}),r.jsx(M,{type:"submit",variant:"primary",className:"w-full h-12 mt-2",isLoading:d,disabled:!s,children:"Update Password"}),!s&&r.jsx(re,{to:"/forgot-password",className:"block text-center text-primary-500 hover:underline",children:"Request a new link"})]},"form")})})]})})})}const Xb="BGwc3-C9heX7WHfc8hJwJ08smI0rWbqoyoOXN1IoaHN33auBdJ7GIr82XZKUdl5MW9XZyElzyxIuMQA_J-xWhEE";function uF(){const{user:e}=X(),t=V(C.users.updateFcmToken),[s,n]=p.useState(typeof window<"u"?Notification.permission:"default");return p.useEffect(()=>{if(!e||!fm||!Xb)return;(async()=>{try{const o=await Notification.requestPermission();if(n(o),o==="granted"){const l=await IM(fm,{vapidKey:Xb});l&&(console.log("FCM Token:",l),await t({userId:e._id,fcmToken:l}))}}catch(o){console.error("Error setting up notifications:",o)}})();const i=PM(fm,o=>{console.log("Foreground message received:",o),o.notification&&new Notification(o.notification.title||"New Notification",{body:o.notification.body,icon:o.notification.image||"/logo192.png"})});return()=>i()},[e,t]),{permissionStatus:s}}function mF(){const[e,t]=p.useState(null),[s,n]=p.useState(!1);p.useEffect(()=>{const o=l=>{l.preventDefault(),t(l),localStorage.getItem("pwa_dismissed")||n(!0)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const a=async()=>{if(!e)return;n(!1),e.prompt();const{outcome:o}=await e.userChoice;console.log(`User response to the install prompt: ${o}`),t(null)},i=()=>{n(!1),localStorage.setItem("pwa_dismissed","true")};return s?r.jsx(te,{children:r.jsx(T.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-0 left-0 right-0 z-[100] p-4 md:p-6 flex justify-center pointer-events-none",children:r.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/95 backdrop-blur-xl border border-light-border dark:border-dark-border shadow-2xl rounded-2xl p-4 w-[95%] max-w-sm pointer-events-auto relative overflow-hidden mx-auto mb-4 md:mb-6",children:[r.jsx("div",{className:"absolute -top-10 -right-10 w-24 h-24 bg-primary-500/20 rounded-full blur-2xl pointer-events-none"}),r.jsx("div",{className:"absolute -bottom-10 -left-10 w-24 h-24 bg-secondary-500/20 rounded-full blur-2xl pointer-events-none"}),r.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors z-10",children:r.jsx(Ne,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"w-12 h-12 rounded-xl shadow-md mb-2"}),r.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Install Baptizo Application"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4 max-w-[90%]",children:"Get the best experience with offline access and real-time updates."}),r.jsxs("div",{className:"flex gap-2 w-full",children:[r.jsx(M,{variant:"outline",className:"flex-1 h-9 text-xs",onClick:i,children:"Not Now"}),r.jsxs(M,{className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white shadow-lg shadow-primary-500/25 h-9 text-xs",onClick:a,children:[r.jsx(Zo,{className:"w-3 h-3 mr-1.5"}),"Install App"]})]})]})]})})}):null}function hF({users:e,selectedUserId:t,onSelect:s,label:n="Assign To"}){const[a,i]=p.useState(!1),[o,l]=p.useState(""),d=p.useRef(null),c=e.find(m=>m._id===t),u=e.filter(m=>m.name.toLowerCase().includes(o.toLowerCase())||m.role.toLowerCase().includes(o.toLowerCase()));return p.useEffect(()=>{const m=h=>{d.current&&!d.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),r.jsxs("div",{className:"w-full relative",ref:d,children:[n&&r.jsx("label",{className:"block text-sm font-medium mb-1.5 text-light-text dark:text-dark-text",children:n}),r.jsxs("button",{type:"button",onClick:()=>i(!a),className:`w-full flex items-center justify-between p-3 rounded-xl border transition-all ${a?"border-primary-500 ring-2 ring-primary-500/20 bg-light-card/80 dark:bg-dark-card/80":"border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg hover:border-primary-500/50"}`,children:[c?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 p-0.5",children:r.jsx("div",{className:"w-full h-full rounded-lg bg-light-bg dark:bg-dark-bg flex items-center justify-center overflow-hidden",children:c.avatarUrl?r.jsx("img",{src:c.avatarUrl,alt:c.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-xs font-bold",children:c.name[0]})})}),r.jsxs("div",{className:"flex flex-col items-start leading-none",children:[r.jsx("span",{className:"font-semibold text-sm",children:c.name}),r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted font-bold uppercase tracking-wider mt-0.5",children:c.role.replace("_"," ")})]})]}):r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Select a member..."}),r.jsx(Je,{className:`w-5 h-5 text-light-muted dark:text-dark-muted transition-transform ${a?"rotate-180":""}`})]}),r.jsx(te,{children:a&&r.jsxs(T.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:"absolute top-full left-0 right-0 mt-2 z-50 bg-light-card/95 dark:bg-dark-card/95 backdrop-blur-xl border border-light-border/20 dark:border-dark-border/20 rounded-xl shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"p-2 border-b border-light-border/10 dark:border-dark-border/10",children:r.jsxs("div",{className:"relative",children:[r.jsx(ft,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",placeholder:"Search members...",value:o,onChange:m=>l(m.target.value),className:"w-full pl-9 pr-3 py-2 bg-light-bg/50 dark:bg-dark-bg/50 rounded-lg text-sm border-none focus:ring-1 focus:ring-primary-500 outline-none",autoFocus:!0})]})}),r.jsx("div",{className:"max-h-[250px] overflow-y-auto thin-scrollbar p-1",children:u.length>0?u.map(m=>r.jsxs("button",{onClick:()=>{s(m._id),i(!1)},className:`w-full flex items-center justify-between p-2 rounded-lg transition-colors ${t===m._id?"bg-primary-500/10 text-primary-500":"hover:bg-light-bg/80 dark:hover:bg-dark-bg/80"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 p-0.5",children:r.jsx("div",{className:"w-full h-full rounded-lg bg-light-bg dark:bg-dark-bg flex items-center justify-center overflow-hidden",children:m.avatarUrl?r.jsx("img",{src:m.avatarUrl,alt:m.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-xs font-bold",children:m.name[0]})})}),r.jsxs("div",{className:"flex flex-col items-start leading-none",children:[r.jsx("span",{className:"font-semibold text-sm",children:m.name}),r.jsx("span",{className:"text-[10px] opacity-70 font-bold uppercase tracking-wider mt-0.5",children:m.role.replace("_"," ")})]})]}),t===m._id&&r.jsx(pt,{className:"w-4 h-4"})]},m._id)):r.jsx("div",{className:"p-4 text-center text-sm text-light-muted dark:text-dark-muted",children:"No members found"})})]})})]})}function xF(){const{user:e,isLoading:t}=X(),s=le(),n=V(C.boardTasks.createTask),[a,i]=p.useState(""),[o,l]=p.useState(""),[d,c]=p.useState("Ministry Assignment"),[u,m]=p.useState("medium"),[h,x]=p.useState(""),[g,v]=p.useState(""),[w,f]=p.useState(!1),b=O(C.users.getAllUsers,e&&(e.role==="admin"||e.role==="super_admin")?{adminId:e._id}:"skip"),y=(b==null?void 0:b.filter(j=>j.role==="board_member"||j.role==="admin"||j.role==="super_admin"))||[];if(t)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[r.jsx(nr,{}),r.jsx(ia,{count:4})]})});if(!e)return r.jsx(Me,{to:"/login",replace:!0});if(e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Me,{to:"/board",replace:!0});const k=async()=>{if(!(!a||!o||!h)){f(!0);try{await n({adminId:e._id,title:a,description:o,type:d,priority:u,assignedTo:h,dueDate:g?new Date(g).getTime():void 0}),s("/board/admin")}catch(j){console.error("Failed to create task:",j)}finally{f(!1)}}};return r.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Operation Command"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Issue Directive"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Formulate and deploy a new mission objective."})]}),r.jsxs(D,{glass:!0,className:"overflow-hidden border-primary-500/20",children:[r.jsx("div",{className:"h-2 bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500"}),r.jsxs(U,{className:"p-8 md:p-12 space-y-10",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx(be,{label:"Directive Title",value:a,onChange:j=>i(j.target.value),placeholder:"State the core objective...",className:"text-lg font-bold h-14 rounded-2xl border-2 focus:border-primary-500 transition-all"}),r.jsx(Go,{label:"Operational Details",value:o,onChange:j=>l(j.target.value),rows:6,placeholder:"Elucidate the mission requirements and expected outcomes...",className:"rounded-[24px] border-2 focus:border-primary-500 transition-all p-6 text-base italic"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx(Ns,{label:"Mission Classification",value:d,onChange:c,options:[{value:"Ministry Assignment",label:"Ministry Assignment"},{value:"Administrative",label:"Administrative"},{value:"Training",label:"Training"},{value:"Personal Development",label:"Personal Development"},{value:"Team Project",label:"Team Project"}]}),r.jsx(Ns,{label:"Intensity Priority",value:u,onChange:m,options:[{value:"low",label:"Low Priority"},{value:"medium",label:"Standard Priority"},{value:"high",label:"High Priority"},{value:"urgent",label:"Immediate Attention"}]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx("div",{className:"relative z-40",children:r.jsx(hF,{users:y,selectedUserId:h,onSelect:x,label:"Assigned Personnel"})}),r.jsx(be,{type:"date",label:"Deadline Alignment",value:g,onChange:j=>v(j.target.value),className:"h-14 rounded-2xl border-2 focus:border-primary-500"})]}),r.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-4 pt-8",children:[r.jsx(M,{variant:"ghost",onClick:()=>s(-1),className:"h-14 px-8 rounded-2xl font-black text-[10px] uppercase tracking-widest border-2 hover:bg-light-muted/10",children:"Abort"}),r.jsx(M,{variant:"primary",onClick:k,disabled:w,className:"h-14 px-12 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] shadow-2xl shadow-primary-500/40",children:w?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Deploying..."})]}):"Deploy Directive"})]})]})]})]})}function pF(){const{user:e,isLoading:t}=X(),s=le(),n=V(C.training.createModule),a=O(C.training.getTrainingStats,e?{userId:e._id}:"skip"),[i,o]=p.useState(""),[l,d]=p.useState(""),[c,u]=p.useState("Leadership"),[m,h]=p.useState(""),[x,g]=p.useState(""),[v,w]=p.useState(""),[f,b]=p.useState(""),[y,k]=p.useState(!1);if(t)return r.jsx("div",{className:"flex justify-center p-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})});if(!e)return r.jsx(Me,{to:"/login",replace:!0});if(e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Me,{to:"/board",replace:!0});const j=async()=>{if(!(!i||!l)){k(!0);try{const S=(a==null?void 0:a.totalModules)||0;await n({adminId:e._id,title:i,description:l,category:c,content:m,videoUrl:x||void 0,documentUrl:v||void 0,duration:f?parseInt(f):void 0,order:S+1}),s("/board/admin")}catch(S){console.error("Failed to create module:",S)}finally{k(!1)}}};return r.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-secondary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-secondary-500",children:"Wisdom Forge"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Author Wisdom"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Create a transformative learning experience for the board."})]}),r.jsxs(D,{glass:!0,className:"overflow-hidden border-secondary-500/20",children:[r.jsx("div",{className:"h-2 bg-gradient-to-r from-secondary-500 via-primary-500 to-secondary-500"}),r.jsxs(U,{className:"p-8 md:p-12 space-y-10",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx(be,{label:"Module Title",value:i,onChange:S=>o(S.target.value),placeholder:"Enter a compelling title...",className:"text-lg font-bold h-14 rounded-2xl border-2 focus:border-secondary-500 transition-all"}),r.jsx(Go,{label:"Executive Summary",value:l,onChange:S=>d(S.target.value),rows:2,placeholder:"What is the core essence of this wisdom?",className:"rounded-[24px] border-2 focus:border-secondary-500 transition-all p-6 text-base italic"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx(Ns,{label:"Sector Category",value:c,onChange:u,options:[{value:"Leadership",label:"Leadership"},{value:"Ministry Skills",label:"Ministry Skills"},{value:"Spiritual Growth",label:"Spiritual Growth"},{value:"Technical Skills",label:"Technical Skills"},{value:"Team Building",label:"Team Building"}]}),r.jsx(be,{label:"Estimated Duration (MIN)",type:"number",value:f,onChange:S=>b(S.target.value),placeholder:"e.g., 30",className:"h-14 rounded-2xl border-2 focus:border-secondary-500"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-light-muted/60 ml-1",children:"Deep Content (Markdown/HTML Compatible)"}),r.jsx(Go,{value:m,onChange:S=>h(S.target.value),rows:10,placeholder:"<h2>Core Principles</h2><p>Synthesize the wisdom here...</p>",className:"rounded-[32px] border-2 focus:border-secondary-500 transition-all p-8 text-base font-mono bg-light-muted/5"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx(be,{label:"Visual Transmission (Video URL)",value:x,onChange:S=>g(S.target.value),placeholder:"Embed URL (YT/Vimeo)...",className:"h-14 rounded-2xl border-2 focus:border-secondary-500"}),r.jsx(be,{label:"Resource Reference (Document URL)",value:v,onChange:S=>w(S.target.value),placeholder:"Cloud Link (Drive/Dropbox)...",className:"h-14 rounded-2xl border-2 focus:border-secondary-500"})]}),r.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-4 pt-8 border-t border-light-border dark:border-dark-border",children:[r.jsx(M,{variant:"ghost",onClick:()=>s(-1),className:"h-14 px-8 rounded-2xl font-black text-[10px] uppercase tracking-widest border-2 hover:bg-light-muted/10 transition-all",children:"Discard Draft"}),r.jsx(M,{variant:"primary",onClick:j,disabled:y,className:"h-14 px-12 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] bg-secondary-500 hover:bg-secondary-600 shadow-2xl shadow-secondary-500/40 border-none",children:y?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Forging Module..."})]}):"Authorize Wisdom"})]})]})]})]})}function fF(){const{user:e,isLoading:t}=X(),s=le(),[n,a]=p.useState(()=>{const b=localStorage.getItem("teachings_activeTab");return b==="ancient"||b==="wisdom"?b:"wisdom"}),[i,o]=p.useState(0),[l,d]=p.useState(0),[c,u]=p.useState(()=>{const b=localStorage.getItem("ancientCulture_postsVisible");return b!==null?JSON.parse(b):!0}),[m,h]=p.useState(()=>{const b=localStorage.getItem("wisdomNow_postsVisible");return b!==null?JSON.parse(b):!0});if(p.useEffect(()=>{localStorage.setItem("teachings_activeTab",n)},[n]),p.useEffect(()=>{localStorage.setItem("ancientCulture_postsVisible",JSON.stringify(c))},[c]),p.useEffect(()=>{localStorage.setItem("wisdomNow_postsVisible",JSON.stringify(m))},[m]),t)return r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(nr,{}),r.jsx(n1,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})});if(!e)return r.jsx(Me,{to:"/login",replace:!0});const x=n==="ancient"?"Ancient Culture":"Wisdom of The Now",g=n==="ancient"?c:m,v=n==="ancient"?u:h,w=n==="ancient"?i:l,f=()=>{n==="ancient"?o(b=>b+1):d(b=>b+1)};return r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:Y("mb-6 md:mb-8 p-6 md:p-8 rounded-2xl border transition-all duration-300",n==="ancient"?"bg-gradient-to-br from-primary-500/10 via-primary-500/5 to-primary-600/10 border-primary-500/20":"bg-gradient-to-br from-secondary-500/10 via-secondary-500/5 to-secondary-600/10 border-secondary-500/20"),children:[r.jsxs("div",{className:"flex items-start gap-4 justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:Y("w-12 h-12 md:w-16 md:h-16 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0 transition-colors duration-300",n==="ancient"?"bg-primary-500 shadow-primary-500/30":"bg-secondary-500 shadow-secondary-500/30"),children:n==="ancient"?r.jsx(gi,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}):r.jsx(Ts,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})},n),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h1",{className:Y("text-2xl md:text-4xl font-bold font-display transition-colors duration-300",n==="ancient"?"text-primary-600 dark:text-primary-400":"text-secondary-600 dark:text-secondary-400"),children:n==="ancient"?"Ancient Culture":"Wisdom of The Now"}),r.jsx(Wp,{title:n==="ancient"?"Ancient Culture":"Wisdom of The Now",content:n==="ancient"?"This section features teachings based on prophetic wisdom and systems from the Old Testament. Admin-created posts appear here for community learning and discussion.":"This section features teachings based on spiritual identity and insights from the New Testament. Engage with admin posts to deepen your understanding."})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base leading-relaxed",children:n==="ancient"?"Prophetic wisdom and systems from the Old Testament":"Spiritual identity and insights from the New Testament"})]})]}),r.jsx(T.button,{whileTap:{scale:.95},onClick:async()=>{const b=`${window.location.origin}/teachings`;navigator.share?await navigator.share({title:"Teachings - Baptizo",url:b}):(await navigator.clipboard.writeText(b),alert("Link copied to clipboard!"))},className:Y("p-2 rounded-lg transition-all flex-shrink-0",n==="ancient"?"hover:bg-primary-100 dark:hover:bg-primary-900/20 text-primary-500":"hover:bg-secondary-100 dark:hover:bg-secondary-900/20 text-secondary-500"),title:"Share this page",children:r.jsx(bi,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex p-1 bg-light-bg/50 dark:bg-dark-bg/50 backdrop-blur-sm rounded-xl border border-light-border dark:border-dark-border mt-6 relative",children:[r.jsx(T.div,{layout:!0,className:Y("absolute top-1 bottom-1 rounded-lg bg-white dark:bg-dark-card shadow-sm z-0",n==="ancient"?"left-1 right-1/2":"left-1/2 right-1"),initial:!1,transition:{type:"spring",bounce:.2,duration:.6}}),r.jsx("button",{onClick:()=>a("wisdom"),className:Y("flex-1 py-2 text-sm md:text-base font-bold rounded-lg relative z-10 transition-colors duration-300",n==="wisdom"?"text-secondary-600 dark:text-secondary-400":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"),children:"Wisdom of The Now"}),r.jsx("button",{onClick:()=>a("ancient"),className:Y("flex-1 py-2 text-sm md:text-base font-bold rounded-lg relative z-10 transition-colors duration-300",n==="ancient"?"text-primary-600 dark:text-primary-400":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"),children:"Ancient Culture"})]})]}),r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx(au,{onSuccess:f,defaultCategory:x})}),r.jsx("div",{className:"flex justify-end",children:r.jsx($p,{isVisible:g,onToggle:()=>v(!g),category:x})}),g?r.jsxs("div",{children:[" ",r.jsx(nu,{category:x,onlyOfficial:!0,onCommentClick:b=>s(`/post/${b._id}`)},`${n}-${w}`)]},n):r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:'Posts are hidden. Click "Show Posts" to view them.'})})]})]})})}function gF(){const{user:e,isLoading:t}=X(),s=le(),n=O(C.settings.canUserCreatePosts,e!=null&&e._id?{userId:e._id}:"skip");if(t)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});if(!e)return r.jsx(Me,{to:"/login",replace:!0});const a=e.role==="admin"||e.role==="super_admin",i=o=>{a?s("/teachings",{state:{newPostId:o}}):s("/feed",{state:{newPostId:o}})};return r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8 bg-light-bg dark:bg-dark-bg",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-2xl",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6 md:mb-8",children:[r.jsx("button",{onClick:()=>s(-1),className:"p-2 -ml-2 rounded-full hover:bg-light-card dark:hover:bg-dark-card transition-colors",children:r.jsx(fr,{className:"w-6 h-6 text-light-text dark:text-dark-text"})}),r.jsx("h1",{className:"text-2xl font-bold font-display text-light-text dark:text-dark-text",children:"Create Post"})]}),r.jsxs("div",{className:"space-y-6",children:[a||(n==null?void 0:n.canCreate)!==!1?r.jsx(au,{onSuccess:i,variant:"default"}):r.jsxs("div",{className:"p-8 text-center glass rounded-2xl border border-light-border dark:border-dark-border",children:[r.jsx(Nt,{className:"w-12 h-12 text-orange-500 mx-auto mb-4 opacity-50"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:"Posting is Locked"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:(n==null?void 0:n.reason)||"Post creation is currently inactive for members."})]}),!a&&(n==null?void 0:n.canCreate)===!1&&r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 p-4 rounded-xl bg-orange-500/5 border border-orange-500/20 flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:r.jsx(Nt,{className:"w-4 h-4 text-orange-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 font-display",children:"Post Creation Paused"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-0.5 leading-relaxed",children:"This feature is currently inactive. It will be available once an administrator enables post creation permissions."})]})]})]})]})})}function bF(){const{user:e}=X(),t=le(),s=O(C.wordUnderPressure.getActivePassageStatus,e?{userId:e._id}:"skip"),n=V(C.wordUnderPressure.startAttempt),a=V(C.wordUnderPressure.getQuestion),i=V(C.wordUnderPressure.submitAnswer),[o,l]=p.useState("loading"),[d,c]=p.useState(""),[u,m]=p.useState(""),h=p.useRef(""),[x,g]=p.useState(20),[v,w]=p.useState(0),[f,b]=p.useState([]),[y,k]=p.useState(""),[j,S]=p.useState([]),[P,R]=p.useState(null),[L,N]=p.useState(null),[I,A]=p.useState(null),W=p.useRef(null),[G,se]=p.useState(!0),Q=p.useRef(!1);p.useEffect(()=>{s!==void 0&&G&&(l("landing"),se(!1))},[s,G]),p.useEffect(()=>{const ee=()=>{document.hidden&&(o==="viewing"||o==="answering")&&de("Focus lost. Challenge failed.")};return document.addEventListener("visibilitychange",ee),()=>{document.removeEventListener("visibilitychange",ee)}},[o]);const de=async ee=>{if(!Q.current&&(Q.current=!0,l("error"),c(ee),W.current&&clearInterval(W.current),I))try{await i({attemptId:I,selectedOptionId:"failed_focus_lost",userId:e==null?void 0:e._id})}catch(me){console.error("Failed to report failure",me)}},z=async()=>{if(!(!(s!=null&&s.hasActivePassage)||!e)){W.current&&clearInterval(W.current),Q.current=!1;try{const ee=await n({userId:e._id});A(ee.attemptId),b(ee.textLines),w(ee.displayTime),l("viewing"),W.current=setInterval(()=>{w(me=>me<=1?(clearInterval(W.current),E(ee.attemptId),0):me-1)},1e3)}catch(ee){c(ee.message||"Failed to start"),l("error")}}},E=async ee=>{W.current&&clearInterval(W.current),b([]);try{l("loading"),await new Promise(fe=>setTimeout(fe,800));const me=await a({attemptId:ee,userId:e==null?void 0:e._id});k(me.question),S(me.options),w(me.timeLimit),l("answering"),Q.current=!1,W.current=setInterval(()=>{w(fe=>fe<=1?(clearInterval(W.current),B(ee),0):fe-1)},1e3)}catch(me){c(me.message||"Failed to fetch question"),l("error")}},B=async ee=>{if(!(Q.current||o!=="answering")){Q.current=!0,W.current&&clearInterval(W.current),l("error"),c("Time expired.");try{await i({attemptId:ee,selectedOptionId:"timeout",userId:e==null?void 0:e._id})}catch{}}},q=async ee=>{if(!(Q.current||o!=="answering")){Q.current=!0,R(ee),W.current&&clearInterval(W.current);try{const me=await i({attemptId:I,selectedOptionId:ee,userId:e==null?void 0:e._id});if(N({isCorrect:me.isCorrect||!1,participationRuby:me.participationRuby||0}),me.skipExplanation){l("result");return}l("explaining"),g(20),W.current&&clearInterval(W.current),W.current=setInterval(()=>{g(fe=>fe<=1?(clearInterval(W.current),He(),0):fe-1)},1e3)}catch(me){c(me.message||"Failed to submit answer"),l("error")}}},ce=V(C.wordUnderPressure.submitExplanation),He=async ee=>{if(W.current&&clearInterval(W.current),o==="result")return;const me=h.current;try{await ce({attemptId:I,explanation:me,userId:e==null?void 0:e._id}),l("result")}catch(fe){console.error(fe),l("result")}};return s===void 0?r.jsx("div",{className:"min-h-screen bg-black/95 flex items-center justify-center text-white",children:"Loading..."}):r.jsx("div",{className:"min-h-screen bg-black text-white font-sans selection:bg-none",children:r.jsxs("div",{className:"max-w-md mx-auto min-h-screen flex flex-col p-6 items-center justify-center relative",children:[r.jsxs("div",{className:"absolute top-6 left-0 w-full flex justify-between px-6 opacity-40",children:[r.jsx("span",{className:"text-[10px] tracking-[0.3em] font-medium uppercase text-emerald-500",children:"Word Under Pressure"}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(ke,{className:"w-3 h-3 text-emerald-400"}),r.jsx("span",{className:"text-[10px] font-mono font-medium text-emerald-200/50",children:s!=null&&s.rewardClaimed?"PRACTICE MODE":"MONTHLY CHALLENGE"})]})]}),o==="landing"&&r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center w-full",children:[r.jsx("div",{className:"w-20 h-20 rounded-full border border-emerald-500/20 flex items-center justify-center mx-auto mb-8 bg-emerald-950/20 shadow-[0_0_40px_rgba(16,185,129,0.05)]",children:r.jsx(_r,{className:"w-8 h-8 text-emerald-400"})}),r.jsx("h1",{className:"text-4xl font-display font-light mb-2 tracking-tight",children:"Focus."}),r.jsx("p",{className:"text-emerald-200/40 text-sm mb-10 font-light",children:"Memorize the Word accurately."}),s!=null&&s.hasActivePassage?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 text-[10px] text-emerald-500/60 mb-10 font-mono tracking-[0.2em]",children:[r.jsx("span",{className:"bg-emerald-500/10 px-2 py-0.5 rounded",children:"FREE ENTRY"}),r.jsx("span",{className:"opacity-30",children:""}),r.jsx("span",{className:"bg-emerald-500/10 px-2 py-0.5 rounded",children:s.rewardClaimed?"PRACTICE ONLY":"WINNER: 11.5 RUBIES"})]}),s.hasAttempted&&r.jsxs("div",{className:"bg-emerald-950/40 border border-emerald-500/10 text-emerald-200/60 text-[10px] p-4 rounded-xl mb-6 font-mono leading-relaxed",children:[s.rewardClaimed?r.jsx("span",{className:"text-emerald-400",children:"Monthly reward claimed. "}):r.jsx("span",{children:"Participated. "}),"Improve your time to win the month! ",r.jsx("br",{}),s.bestTime?r.jsxs("span",{className:"text-emerald-400 mt-1 block",children:["Your Best: ",s.bestTime,"ms"]}):""]}),r.jsx(M,{className:"w-full h-16 bg-emerald-600 hover:bg-emerald-500 text-white tracking-[0.3em] text-xs font-bold shadow-[0_10px_30px_rgba(5,150,105,0.2)] transition-all active:scale-[0.98] rounded-2xl",onClick:z,children:s.hasAttempted?"RETRY CHALLENGE":"BEGIN CHALLENGE"}),r.jsxs("p",{className:"text-[10px] text-emerald-200/20 max-w-[220px] mx-auto leading-relaxed uppercase tracking-widest font-medium",children:["No interruptions. No screenshots.",r.jsx("br",{}),s.memoTime,"s study  ",s.recallTime,"s recall."]})]}):r.jsx(D,{className:"bg-emerald-950/20 border-emerald-500/10 backdrop-blur-xl",children:r.jsxs(U,{className:"p-8 text-center",children:[r.jsx(_r,{className:"w-12 h-12 text-emerald-500/10 mx-auto mb-4"}),r.jsx("h3",{className:"text-emerald-100 text-lg font-light mb-2",children:"No Active Challenge"}),r.jsx("p",{className:"text-emerald-200/30 text-xs mb-8 leading-relaxed",children:"The scribes are preparing the next monthly portion. Check back soon."}),r.jsx(M,{variant:"ghost",className:"w-full text-emerald-400/50 hover:text-emerald-300 hover:bg-emerald-500/5 text-xs tracking-widest uppercase font-bold",onClick:()=>t("/leaderboard"),children:"View Leaderboard"})]})})]}),o==="viewing"&&r.jsxs("div",{className:"w-full h-full flex flex-col justify-center select-none",onContextMenu:ee=>ee.preventDefault(),children:[r.jsx("div",{className:"mb-12 flex justify-center",children:r.jsxs("div",{className:"relative w-20 h-20 rounded-full border border-emerald-500/10 flex items-center justify-center bg-emerald-950/20",children:[r.jsx("span",{className:"font-mono text-3xl font-light text-emerald-400",children:v}),r.jsxs("svg",{className:"absolute w-full h-full -rotate-90",children:[r.jsx("circle",{cx:"40",cy:"40",r:"38",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-emerald-500/10"}),r.jsx("circle",{cx:"40",cy:"40",r:"38",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"238.7",strokeDashoffset:238.7-238.7*v/((s==null?void 0:s.memoTime)||20),className:"text-emerald-500 transition-all duration-1000 ease-linear shadow-[0_0_10px_rgba(16,185,129,0.5)]"})]})]})}),r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-8 text-center",children:[r.jsx("div",{className:"space-y-4",children:f.map((ee,me)=>r.jsx("p",{className:"text-xl md:text-2xl font-serif text-emerald-50/90 leading-relaxed tracking-wide italic",children:ee},me))}),r.jsxs("div",{className:"pt-8 opacity-20",children:[r.jsx("div",{className:"h-px w-12 bg-emerald-500 mx-auto mb-4"}),r.jsx("p",{className:"text-[10px] uppercase tracking-[0.4em] text-emerald-200 font-medium",children:"Internalize"})]})]})]}),o==="answering"&&r.jsxs("div",{className:"w-full max-w-sm",children:[r.jsxs("div",{className:"mb-12 text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-4 px-4 py-2 bg-emerald-500/10 rounded-full border border-emerald-500/20 mb-8",children:[r.jsx(Ze,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("span",{className:"font-mono text-lg font-medium text-emerald-400",children:[v,"s"]})]}),r.jsx("h2",{className:"text-2xl font-light leading-snug text-emerald-50 px-4",children:y})]}),r.jsx("div",{className:"grid grid-cols-1 gap-4",children:j.map(ee=>r.jsxs(M,{variant:"outline",className:Y("h-16 justify-start px-6 text-sm font-light tracking-wide rounded-2xl transition-all border-emerald-500/10 bg-emerald-950/10 hover:bg-emerald-500/10 hover:border-emerald-500/30",P===ee.id?"bg-emerald-500/20 border-emerald-500":"text-emerald-200/80"),onClick:()=>q(ee.id),children:[r.jsx("span",{className:"w-6 text-[10px] font-mono text-emerald-500/50 uppercase",children:ee.id}),r.jsx("span",{className:"flex-1 text-left",children:ee.text})]},ee.id))})]}),o==="explaining"&&r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-4 px-4 py-2 bg-emerald-500/10 rounded-full border border-emerald-500/20 mb-8",children:[r.jsx(Ze,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("span",{className:"font-mono text-lg font-medium text-emerald-400",children:[x,"s"]})]}),r.jsx("h2",{className:"text-2xl font-light mb-2 text-emerald-50",children:"Reasoning."}),r.jsx("p",{className:"text-emerald-200/40 text-sm",children:"Why did you choose this answer? Explain in less than 250 words."})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("textarea",{className:"w-full h-40 p-4 rounded-2xl bg-emerald-950/20 border border-emerald-500/10 text-emerald-50 text-sm font-light leading-relaxed focus:outline-none focus:border-emerald-500/30 transition-all resize-none",placeholder:"Explain your logic...",value:u,onChange:ee=>{(ee.target.value.trim().split(/\s+/).filter(fe=>fe!=="").length<=250||ee.target.value.length<u.length)&&(m(ee.target.value),h.current=ee.target.value)},onPaste:ee=>{ee.preventDefault()}}),r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("span",{className:Y("text-[10px] font-mono tracking-widest",u.trim().split(/\s+/).filter(ee=>ee!=="").length>240?"text-amber-500":"text-emerald-500/40"),children:[u.trim().split(/\s+/).filter(ee=>ee!=="").length," / 250 WORDS"]}),r.jsx(M,{className:"bg-emerald-600 hover:bg-emerald-500 text-white px-8 rounded-xl h-10 text-[10px] tracking-widest uppercase font-bold",onClick:()=>He(),disabled:u.trim().length<5,children:"SUBMIT"})]})]})]}),o==="result"&&L&&r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center w-full",children:[L.isCorrect?r.jsxs("div",{className:"mb-10",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-500/20 flex items-center justify-center mx-auto mb-6",children:r.jsx(ke,{className:"w-10 h-10 text-emerald-400"})}),r.jsx("h2",{className:"text-3xl font-display font-light mb-2",children:"Well Done."}),r.jsx("p",{className:"text-emerald-200/50 text-sm mb-10",children:"Focus rewarded."}),L.participationRuby>0?r.jsxs("div",{className:"inline-flex flex-col items-center p-6 bg-emerald-500/10 rounded-3xl border border-emerald-500/20 shadow-[0_10px_40px_rgba(16,185,129,0.1)]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Gx,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("span",{className:"text-4xl font-mono text-emerald-400",children:["+",L.participationRuby]})]}),r.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-emerald-500/60 font-bold",children:"Rubies Earned"})]}):r.jsxs("div",{className:"inline-flex flex-col items-center p-6 bg-emerald-950/40 rounded-3xl border border-white/5",children:[r.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-white/30 font-bold mb-1",children:"Practice Complete"}),r.jsx("p",{className:"text-[10px] text-emerald-500/40",children:"Monthly reward already claimed."})]})]}):r.jsxs("div",{className:"mb-10",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:r.jsx(_r,{className:"w-10 h-10 text-red-400"})}),r.jsx("h2",{className:"text-3xl font-display font-light mb-2 text-red-200",children:"Refocus."}),r.jsx("p",{className:"text-red-200/40 text-sm mb-10",children:"Try again to improve your standing."})]}),r.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-[240px] mx-auto",children:[r.jsx(M,{className:"w-full h-14 bg-white text-emerald-950 hover:bg-emerald-50 rounded-2xl font-bold tracking-widest text-[10px] uppercase",onClick:()=>l("landing"),children:"Play Again"}),r.jsx(M,{variant:"outline",className:"w-full h-14 border-emerald-500/20 text-emerald-400 hover:bg-emerald-500/5 rounded-2xl font-bold tracking-widest text-[10px] uppercase",onClick:()=>t("/leaderboard"),children:"Leaderboard"})]})]}),o==="error"&&r.jsxs("div",{className:"text-center w-full",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-6",children:r.jsx(Ze,{className:"w-8 h-8 text-red-500"})}),r.jsx("h2",{className:"text-2xl font-light mb-4",children:"Interrupted."}),r.jsx("p",{className:"text-red-200/40 text-sm mb-10 bg-red-500/5 p-4 rounded-xl border border-red-500/10",children:d}),r.jsx(M,{className:"bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl px-8 h-12",onClick:()=>l("landing"),children:"Return to Start"})]})]})})}const yF=new jC("https://lovely-falcon-994.convex.cloud");function vF(){const e=bt(),[t,s]=Qr.useState(!0);if(uF(),Qr.useEffect(()=>{const d=setTimeout(()=>s(!1),2e3);return()=>clearTimeout(d)},[]),t)return r.jsx(d1,{});const n=e.pathname.startsWith("/admin")||e.pathname.startsWith("/board"),a=e.pathname==="/",o=!n&&["/feed","/ancient-culture","/wisdom-now","/teachings","/profile","/admin","/board","/notifications","/tasks","/leaderboard","/admin/reward-responses","/my-responses","/admin/responses","/post","/search","/banking","/chat"].some(d=>e.pathname.startsWith(d))&&e.pathname!=="/chat";return r.jsxs("div",{className:"flex flex-col min-h-screen",children:[!n&&e.pathname!=="/chat"&&r.jsx(gA,{}),!1,r.jsx("main",{className:`flex-1 ${!n&&e.pathname!=="/chat"?"pt-14 md:pt-20":""} ${o?"pb-20 md:pb-0":""}`,children:r.jsxs(Lu,{children:[r.jsx(Z,{path:"/",element:r.jsx(vA,{})}),r.jsx(Z,{path:"/login",element:r.jsx(PL,{})}),r.jsx(Z,{path:"/forgot-password",element:r.jsx(dF,{})}),r.jsx(Z,{path:"/reset-password",element:r.jsx(cF,{})}),r.jsx(Z,{path:"/register",element:r.jsx(LL,{})}),r.jsx(Z,{path:"/feed",element:r.jsx(LD,{})}),r.jsx(Z,{path:"/ancient-culture",element:r.jsx(OD,{})}),r.jsx(Z,{path:"/wisdom-now",element:r.jsx(FD,{})}),r.jsx(Z,{path:"/profile",element:r.jsx(GD,{})}),r.jsx(Z,{path:"/profile/followers",element:r.jsx(td,{})}),r.jsx(Z,{path:"/profile/following",element:r.jsx(td,{})}),r.jsx(Z,{path:"/profile/:userId/followers",element:r.jsx(td,{})}),r.jsx(Z,{path:"/profile/:userId/following",element:r.jsx(td,{})}),r.jsx(Z,{path:"/saved-posts",element:r.jsx(DD,{})}),r.jsx(Z,{path:"/admin/*",element:r.jsx(Jb,{children:r.jsxs(Lu,{children:[r.jsx(Z,{index:!0,element:r.jsx(QD,{})}),r.jsx(Z,{path:"banking",element:r.jsx(XD,{})}),r.jsx(Z,{path:"master-pool",element:r.jsx(iO,{})}),r.jsx(Z,{path:"announcements",element:r.jsx(dO,{})}),r.jsx(Z,{path:"polls",element:r.jsx(cO,{})}),r.jsx(Z,{path:"diamond-challenge",element:r.jsx(sO,{})}),r.jsx(Z,{path:"questions",element:r.jsx(nO,{})}),r.jsx(Z,{path:"user-tags",element:r.jsx(aO,{})}),r.jsx(Z,{path:"contacts",element:r.jsx(mO,{})}),r.jsx(Z,{path:"settings",element:r.jsx(lO,{})}),r.jsx(Z,{path:"roles",element:r.jsx(PO,{})}),r.jsx(Z,{path:"user/:userId",element:r.jsx(AO,{})})]})})}),r.jsx(Z,{path:"/my-responses",element:r.jsx(hO,{})}),r.jsx(Z,{path:"/banking",element:r.jsx(lF,{})}),r.jsx(Z,{path:"/tasks",element:r.jsx(YD,{})}),r.jsx(Z,{path:"/leaderboard",element:r.jsx(pO,{})}),r.jsx(Z,{path:"/notifications",element:r.jsx(KD,{})}),r.jsx(Z,{path:"/setup",element:r.jsx(JD,{})}),r.jsx(Z,{path:"/search",element:r.jsx(vO,{})}),r.jsx(Z,{path:"/member-onboarding",element:r.jsx(rF,{})}),r.jsx(Z,{path:"/board/*",element:r.jsx(Jb,{children:r.jsxs(Lu,{children:[r.jsx(Z,{index:!0,element:r.jsx(MO,{})}),r.jsx(Z,{path:"tasks",element:r.jsx(RO,{})}),r.jsx(Z,{path:"task/new",element:r.jsx(xF,{})}),r.jsx(Z,{path:"training",element:r.jsx(LO,{})}),r.jsx(Z,{path:"training/new",element:r.jsx(pF,{})}),r.jsx(Z,{path:"attendance",element:r.jsx(GO,{})}),r.jsx(Z,{path:"finance",element:r.jsx(QO,{})}),r.jsx(Z,{path:"contributions",element:r.jsx(tF,{})}),r.jsx(Z,{path:"admin",element:r.jsx(HO,{})})]})})}),r.jsx(Z,{path:"/profile/:userId",element:r.jsx(wO,{})}),r.jsx(Z,{path:"/about",element:r.jsx(kO,{})}),r.jsx(Z,{path:"/privacy",element:r.jsx(jO,{})}),r.jsx(Z,{path:"/terms",element:r.jsx(NO,{})}),r.jsx(Z,{path:"/contact",element:r.jsx(SO,{})}),r.jsx(Z,{path:"/faq",element:r.jsx(TO,{})}),r.jsx(Z,{path:"/guidelines",element:r.jsx(IO,{})}),r.jsx(Z,{path:"/post/:postId/responses",element:r.jsx(gO,{})}),r.jsx(Z,{path:"/post/:postId",element:r.jsx(yO,{})}),r.jsx(Z,{path:"/official-response/:postId",element:r.jsx(sF,{})}),r.jsx(Z,{path:"/teachings",element:r.jsx(fF,{})}),r.jsx(Z,{path:"/create-post",element:r.jsx(gF,{})}),r.jsx(Z,{path:"/announcement/:id",element:r.jsx(EO,{})}),r.jsx(Z,{path:"/chat",element:r.jsx(c1,{})}),r.jsx(Z,{path:"/diamond-challenge",element:r.jsx(bF,{})})]})}),a&&r.jsx(bA,{}),o&&r.jsx(yA,{})]})}function wF(){return r.jsx(NC,{client:yF,children:r.jsx(FC,{children:r.jsx(BC,{children:r.jsx(DP,{children:r.jsxs(ZS,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[r.jsx(mF,{}),r.jsx(vF,{})]})})})})})}bm.createRoot(document.getElementById("root")).render(r.jsx(Qr.StrictMode,{children:r.jsx(wF,{})}));
//# sourceMappingURL=index-CtT7BQPh.js.map
