function d1(e,t){for(var s=0;s<t.length;s++){const n=t[s];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=s(a);fetch(a.href,i)}})();function c1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Fb={exports:{}},rc={},Ub={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Uo=Symbol.for("react.element"),u1=Symbol.for("react.portal"),m1=Symbol.for("react.fragment"),h1=Symbol.for("react.strict_mode"),x1=Symbol.for("react.profiler"),p1=Symbol.for("react.provider"),f1=Symbol.for("react.context"),g1=Symbol.for("react.forward_ref"),b1=Symbol.for("react.suspense"),y1=Symbol.for("react.memo"),v1=Symbol.for("react.lazy"),Wp=Symbol.iterator;function w1(e){return e===null||typeof e!="object"?null:(e=Wp&&e[Wp]||e["@@iterator"],typeof e=="function"?e:null)}var Bb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vb=Object.assign,$b={};function oi(e,t,s){this.props=e,this.context=t,this.refs=$b,this.updater=s||Bb}oi.prototype.isReactComponent={};oi.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};oi.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zb(){}zb.prototype=oi.prototype;function Ah(e,t,s){this.props=e,this.context=t,this.refs=$b,this.updater=s||Bb}var Eh=Ah.prototype=new zb;Eh.constructor=Ah;Vb(Eh,oi.prototype);Eh.isPureReactComponent=!0;var qp=Array.isArray,Wb=Object.prototype.hasOwnProperty,Mh={current:null},qb={key:!0,ref:!0,__self:!0,__source:!0};function Hb(e,t,s){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)Wb.call(t,n)&&!qb.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=s;else if(1<l){for(var d=Array(l),c=0;c<l;c++)d[c]=arguments[c+2];a.children=d}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Uo,type:e,key:i,ref:o,props:a,_owner:Mh.current}}function k1(e,t){return{$$typeof:Uo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Rh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Uo}function j1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Hp=/\/+/g;function Kc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?j1(""+e.key):t.toString(36)}function Dl(e,t,s,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Uo:case u1:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+Kc(o,0):n,qp(a)?(s="",e!=null&&(s=e.replace(Hp,"$&/")+"/"),Dl(a,t,s,"",function(c){return c})):a!=null&&(Rh(a)&&(a=k1(a,s+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(Hp,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",qp(e))for(var l=0;l<e.length;l++){i=e[l];var d=n+Kc(i,l);o+=Dl(i,t,s,d,a)}else if(d=w1(e),typeof d=="function")for(e=d.call(e),l=0;!(i=e.next()).done;)i=i.value,d=n+Kc(i,l++),o+=Dl(i,t,s,d,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ll(e,t,s){if(e==null)return e;var n=[],a=0;return Dl(e,n,"","",function(i){return t.call(s,i,a++)}),n}function N1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var At={current:null},Ol={transition:null},S1={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:Mh};function Gb(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:ll,forEach:function(e,t,s){ll(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return ll(e,function(){t++}),t},toArray:function(e){return ll(e,function(t){return t})||[]},only:function(e){if(!Rh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};he.Component=oi;he.Fragment=m1;he.Profiler=x1;he.PureComponent=Ah;he.StrictMode=h1;he.Suspense=b1;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S1;he.act=Gb;he.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Vb({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Mh.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(d in t)Wb.call(t,d)&&!qb.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&l!==void 0?l[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=s;else if(1<d){l=Array(d);for(var c=0;c<d;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Uo,type:e.type,key:a,ref:i,props:n,_owner:o}};he.createContext=function(e){return e={$$typeof:f1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:p1,_context:e},e.Consumer=e};he.createElement=Hb;he.createFactory=function(e){var t=Hb.bind(null,e);return t.type=e,t};he.createRef=function(){return{current:null}};he.forwardRef=function(e){return{$$typeof:g1,render:e}};he.isValidElement=Rh;he.lazy=function(e){return{$$typeof:v1,_payload:{_status:-1,_result:e},_init:N1}};he.memo=function(e,t){return{$$typeof:y1,type:e,compare:t===void 0?null:t}};he.startTransition=function(e){var t=Ol.transition;Ol.transition={};try{e()}finally{Ol.transition=t}};he.unstable_act=Gb;he.useCallback=function(e,t){return At.current.useCallback(e,t)};he.useContext=function(e){return At.current.useContext(e)};he.useDebugValue=function(){};he.useDeferredValue=function(e){return At.current.useDeferredValue(e)};he.useEffect=function(e,t){return At.current.useEffect(e,t)};he.useId=function(){return At.current.useId()};he.useImperativeHandle=function(e,t,s){return At.current.useImperativeHandle(e,t,s)};he.useInsertionEffect=function(e,t){return At.current.useInsertionEffect(e,t)};he.useLayoutEffect=function(e,t){return At.current.useLayoutEffect(e,t)};he.useMemo=function(e,t){return At.current.useMemo(e,t)};he.useReducer=function(e,t,s){return At.current.useReducer(e,t,s)};he.useRef=function(e){return At.current.useRef(e)};he.useState=function(e){return At.current.useState(e)};he.useSyncExternalStore=function(e,t,s){return At.current.useSyncExternalStore(e,t,s)};he.useTransition=function(){return At.current.useTransition()};he.version="18.3.1";Ub.exports=he;var f=Ub.exports;const $r=c1(f),C1=d1({__proto__:null,default:$r},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T1=f,_1=Symbol.for("react.element"),I1=Symbol.for("react.fragment"),P1=Object.prototype.hasOwnProperty,A1=T1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E1={key:!0,ref:!0,__self:!0,__source:!0};function Qb(e,t,s){var n,a={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)P1.call(t,n)&&!E1.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:_1,type:e,key:i,ref:o,props:a,_owner:A1.current}}rc.Fragment=I1;rc.jsx=Qb;rc.jsxs=Qb;Fb.exports=rc;var r=Fb.exports,am={},Kb={exports:{}},Zt={},Yb={exports:{}},Jb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,I){var F=$.length;$.push(I);e:for(;0<F;){var q=F-1>>>1,ce=$[q];if(0<a(ce,I))$[q]=I,$[F]=ce,F=q;else break e}}function s($){return $.length===0?null:$[0]}function n($){if($.length===0)return null;var I=$[0],F=$.pop();if(F!==I){$[0]=F;e:for(var q=0,ce=$.length,ae=ce>>>1;q<ae;){var H=2*(q+1)-1,le=$[H],ue=H+1,xr=$[ue];if(0>a(le,F))ue<ce&&0>a(xr,le)?($[q]=xr,$[ue]=F,q=ue):($[q]=le,$[H]=F,q=H);else if(ue<ce&&0>a(xr,F))$[q]=xr,$[ue]=F,q=ue;else break e}}return I}function a($,I){var F=$.sortIndex-I.sortIndex;return F!==0?F:$.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],c=[],u=1,m=null,h=3,x=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var I=s(c);I!==null;){if(I.callback===null)n(c);else if(I.startTime<=$)n(c),I.sortIndex=I.expirationTime,t(d,I);else break;I=s(c)}}function k($){if(v=!1,w($),!g)if(s(d)!==null)g=!0,Q(j);else{var I=s(c);I!==null&&pe(k,I.startTime-$)}}function j($,I){g=!1,v&&(v=!1,p(A),A=-1),x=!0;var F=h;try{for(w(I),m=s(d);m!==null&&(!(m.expirationTime>I)||$&&!P());){var q=m.callback;if(typeof q=="function"){m.callback=null,h=m.priorityLevel;var ce=q(m.expirationTime<=I);I=e.unstable_now(),typeof ce=="function"?m.callback=ce:m===s(d)&&n(d),w(I)}else n(d);m=s(d)}if(m!==null)var ae=!0;else{var H=s(c);H!==null&&pe(k,H.startTime-I),ae=!1}return ae}finally{m=null,h=F,x=!1}}var N=!1,_=null,A=-1,L=5,C=-1;function P(){return!(e.unstable_now()-C<L)}function R(){if(_!==null){var $=e.unstable_now();C=$;var I=!0;try{I=_(!0,$)}finally{I?W():(N=!1,_=null)}}else N=!1}var W;if(typeof b=="function")W=function(){b(R)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,se=Y.port2;Y.port1.onmessage=R,W=function(){se.postMessage(null)}}else W=function(){y(R,0)};function Q($){_=$,N||(N=!0,W())}function pe($,I){A=y(function(){$(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){g||x||(g=!0,Q(j))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function($){switch(h){case 1:case 2:case 3:var I=3;break;default:I=h}var F=h;h=I;try{return $()}finally{h=F}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,I){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var F=h;h=$;try{return I()}finally{h=F}},e.unstable_scheduleCallback=function($,I,F){var q=e.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?q+F:q):F=q,$){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=F+ce,$={id:u++,callback:I,priorityLevel:$,startTime:F,expirationTime:ce,sortIndex:-1},F>q?($.sortIndex=F,t(c,$),s(d)===null&&$===s(c)&&(v?(p(A),A=-1):v=!0,pe(k,F-q))):($.sortIndex=ce,t(d,$),g||x||(g=!0,Q(j))),$},e.unstable_shouldYield=P,e.unstable_wrapCallback=function($){var I=h;return function(){var F=h;h=I;try{return $.apply(this,arguments)}finally{h=F}}}})(Jb);Yb.exports=Jb;var M1=Yb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=f,Qt=M1;function z(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xb=new Set,no={};function ia(e,t){Qa(e,t),Qa(e+"Capture",t)}function Qa(e,t){for(no[e]=t,e=0;e<t.length;e++)Xb.add(t[e])}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=Object.prototype.hasOwnProperty,L1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gp={},Qp={};function D1(e){return im.call(Qp,e)?!0:im.call(Gp,e)?!1:L1.test(e)?Qp[e]=!0:(Gp[e]=!0,!1)}function O1(e,t,s,n){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function F1(e,t,s,n){if(t===null||typeof t>"u"||O1(e,t,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Et(e,t,s,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new Et(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new Et(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new Et(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new Et(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new Et(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new Et(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new Et(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new Et(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new Et(e,5,!1,e.toLowerCase(),null,!1,!1)});var Lh=/[\-:]([a-z])/g;function Dh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Lh,Dh);ut[t]=new Et(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Lh,Dh);ut[t]=new Et(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Lh,Dh);ut[t]=new Et(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new Et(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Et("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new Et(e,1,!1,e.toLowerCase(),null,!0,!0)});function Oh(e,t,s,n){var a=ut.hasOwnProperty(t)?ut[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(F1(t,s,a,n)&&(s=null),n||a===null?D1(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):a.mustUseProperty?e[a.propertyName]=s===null?a.type===3?!1:"":s:(t=a.attributeName,n=a.attributeNamespace,s===null?e.removeAttribute(t):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,n?e.setAttributeNS(n,t,s):e.setAttribute(t,s))))}var vs=R1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),ya=Symbol.for("react.portal"),va=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),om=Symbol.for("react.profiler"),Zb=Symbol.for("react.provider"),ey=Symbol.for("react.context"),Uh=Symbol.for("react.forward_ref"),lm=Symbol.for("react.suspense"),dm=Symbol.for("react.suspense_list"),Bh=Symbol.for("react.memo"),Rs=Symbol.for("react.lazy"),ty=Symbol.for("react.offscreen"),Kp=Symbol.iterator;function vi(e){return e===null||typeof e!="object"?null:(e=Kp&&e[Kp]||e["@@iterator"],typeof e=="function"?e:null)}var Ue=Object.assign,Yc;function Ri(e){if(Yc===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Yc=t&&t[1]||""}return`
`+Yc+e}var Jc=!1;function Xc(e,t){if(!e||Jc)return"";Jc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var a=c.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var d=`
`+a[o].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=o&&0<=l);break}}}finally{Jc=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ri(e):""}function U1(e){switch(e.tag){case 5:return Ri(e.type);case 16:return Ri("Lazy");case 13:return Ri("Suspense");case 19:return Ri("SuspenseList");case 0:case 2:case 15:return e=Xc(e.type,!1),e;case 11:return e=Xc(e.type.render,!1),e;case 1:return e=Xc(e.type,!0),e;default:return""}}function cm(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case va:return"Fragment";case ya:return"Portal";case om:return"Profiler";case Fh:return"StrictMode";case lm:return"Suspense";case dm:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ey:return(e.displayName||"Context")+".Consumer";case Zb:return(e._context.displayName||"Context")+".Provider";case Uh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bh:return t=e.displayName||null,t!==null?t:cm(e.type)||"Memo";case Rs:t=e._payload,e=e._init;try{return cm(e(t))}catch{}}return null}function B1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return cm(t);case 8:return t===Fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function an(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ry(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function V1(e){var t=ry(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,i=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cl(e){e._valueTracker||(e._valueTracker=V1(e))}function sy(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),n="";return e&&(n=ry(e)?e.checked?"true":"false":e.value),e=n,e!==s?(t.setValue(e),!0):!1}function nd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function um(e,t){var s=t.checked;return Ue({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Yp(e,t){var s=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;s=an(t.value!=null?t.value:s),e._wrapperState={initialChecked:n,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ny(e,t){t=t.checked,t!=null&&Oh(e,"checked",t,!1)}function mm(e,t){ny(e,t);var s=an(t.value),n=t.type;if(s!=null)n==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hm(e,t.type,s):t.hasOwnProperty("defaultValue")&&hm(e,t.type,an(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jp(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function hm(e,t,s){(t!=="number"||nd(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Li=Array.isArray;function Da(e,t,s,n){if(e=e.options,t){t={};for(var a=0;a<s.length;a++)t["$"+s[a]]=!0;for(s=0;s<e.length;s++)a=t.hasOwnProperty("$"+e[s].value),e[s].selected!==a&&(e[s].selected=a),a&&n&&(e[s].defaultSelected=!0)}else{for(s=""+an(s),t=null,a=0;a<e.length;a++){if(e[a].value===s){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function xm(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ue({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xp(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(z(92));if(Li(s)){if(1<s.length)throw Error(z(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:an(s)}}function ay(e,t){var s=an(t.value),n=an(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),n!=null&&(e.defaultValue=""+n)}function Zp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function iy(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pm(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?iy(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ul,oy=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,s,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ul=ul||document.createElement("div"),ul.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ul.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ao(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Bi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(Bi).forEach(function(e){$1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bi[t]=Bi[e]})});function ly(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Bi.hasOwnProperty(e)&&Bi[e]?(""+t).trim():t+"px"}function dy(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var n=s.indexOf("--")===0,a=ly(s,t[s],n);s==="float"&&(s="cssFloat"),n?e.setProperty(s,a):e[s]=a}}var z1=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fm(e,t){if(t){if(z1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(z(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(z(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(z(61))}if(t.style!=null&&typeof t.style!="object")throw Error(z(62))}}function gm(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=null;function Vh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ym=null,Oa=null,Fa=null;function ef(e){if(e=$o(e)){if(typeof ym!="function")throw Error(z(280));var t=e.stateNode;t&&(t=oc(t),ym(e.stateNode,e.type,t))}}function cy(e){Oa?Fa?Fa.push(e):Fa=[e]:Oa=e}function uy(){if(Oa){var e=Oa,t=Fa;if(Fa=Oa=null,ef(e),t)for(e=0;e<t.length;e++)ef(t[e])}}function my(e,t){return e(t)}function hy(){}var Zc=!1;function xy(e,t,s){if(Zc)return e(t,s);Zc=!0;try{return my(e,t,s)}finally{Zc=!1,(Oa!==null||Fa!==null)&&(hy(),uy())}}function io(e,t){var s=e.stateNode;if(s===null)return null;var n=oc(s);if(n===null)return null;s=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(z(231,t,typeof s));return s}var vm=!1;if(us)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){vm=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{vm=!1}function W1(e,t,s,n,a,i,o,l,d){var c=Array.prototype.slice.call(arguments,3);try{t.apply(s,c)}catch(u){this.onError(u)}}var Vi=!1,ad=null,id=!1,wm=null,q1={onError:function(e){Vi=!0,ad=e}};function H1(e,t,s,n,a,i,o,l,d){Vi=!1,ad=null,W1.apply(q1,arguments)}function G1(e,t,s,n,a,i,o,l,d){if(H1.apply(this,arguments),Vi){if(Vi){var c=ad;Vi=!1,ad=null}else throw Error(z(198));id||(id=!0,wm=c)}}function oa(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function py(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function tf(e){if(oa(e)!==e)throw Error(z(188))}function Q1(e){var t=e.alternate;if(!t){if(t=oa(e),t===null)throw Error(z(188));return t!==e?null:e}for(var s=e,n=t;;){var a=s.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){s=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===s)return tf(a),e;if(i===n)return tf(a),t;i=i.sibling}throw Error(z(188))}if(s.return!==n.return)s=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o)throw Error(z(189))}}if(s.alternate!==n)throw Error(z(190))}if(s.tag!==3)throw Error(z(188));return s.stateNode.current===s?e:t}function fy(e){return e=Q1(e),e!==null?gy(e):null}function gy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=gy(e);if(t!==null)return t;e=e.sibling}return null}var by=Qt.unstable_scheduleCallback,rf=Qt.unstable_cancelCallback,K1=Qt.unstable_shouldYield,Y1=Qt.unstable_requestPaint,Ve=Qt.unstable_now,J1=Qt.unstable_getCurrentPriorityLevel,$h=Qt.unstable_ImmediatePriority,yy=Qt.unstable_UserBlockingPriority,od=Qt.unstable_NormalPriority,X1=Qt.unstable_LowPriority,vy=Qt.unstable_IdlePriority,sc=null,Or=null;function Z1(e){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(sc,e,void 0,(e.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:r2,e2=Math.log,t2=Math.LN2;function r2(e){return e>>>=0,e===0?32:31-(e2(e)/t2|0)|0}var ml=64,hl=4194304;function Di(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ld(e,t){var s=e.pendingLanes;if(s===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=s&268435455;if(o!==0){var l=o&~a;l!==0?n=Di(l):(i&=o,i!==0&&(n=Di(i)))}else o=s&~a,o!==0?n=Di(o):i!==0&&(n=Di(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)s=31-kr(t),a=1<<s,n|=e[s],t&=~a;return n}function s2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function n2(e,t){for(var s=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-kr(i),l=1<<o,d=a[o];d===-1?(!(l&s)||l&n)&&(a[o]=s2(l,t)):d<=t&&(e.expiredLanes|=l),i&=~l}}function km(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function wy(){var e=ml;return ml<<=1,!(ml&4194240)&&(ml=64),e}function eu(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Bo(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kr(t),e[t]=s}function a2(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<s;){var a=31-kr(s),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,s&=~i}}function zh(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var n=31-kr(s),a=1<<n;a&t|e[n]&t&&(e[n]|=t),s&=~a}}var we=0;function ky(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jy,Wh,Ny,Sy,Cy,jm=!1,xl=[],Hs=null,Gs=null,Qs=null,oo=new Map,lo=new Map,Os=[],i2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sf(e,t){switch(e){case"focusin":case"focusout":Hs=null;break;case"dragenter":case"dragleave":Gs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":oo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(t.pointerId)}}function ki(e,t,s,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=$o(t),t!==null&&Wh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function o2(e,t,s,n,a){switch(t){case"focusin":return Hs=ki(Hs,e,t,s,n,a),!0;case"dragenter":return Gs=ki(Gs,e,t,s,n,a),!0;case"mouseover":return Qs=ki(Qs,e,t,s,n,a),!0;case"pointerover":var i=a.pointerId;return oo.set(i,ki(oo.get(i)||null,e,t,s,n,a)),!0;case"gotpointercapture":return i=a.pointerId,lo.set(i,ki(lo.get(i)||null,e,t,s,n,a)),!0}return!1}function Ty(e){var t=En(e.target);if(t!==null){var s=oa(t);if(s!==null){if(t=s.tag,t===13){if(t=py(s),t!==null){e.blockedOn=t,Cy(e.priority,function(){Ny(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Nm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var n=new s.constructor(s.type,s);bm=n,s.target.dispatchEvent(n),bm=null}else return t=$o(s),t!==null&&Wh(t),e.blockedOn=s,!1;t.shift()}return!0}function nf(e,t,s){Fl(e)&&s.delete(t)}function l2(){jm=!1,Hs!==null&&Fl(Hs)&&(Hs=null),Gs!==null&&Fl(Gs)&&(Gs=null),Qs!==null&&Fl(Qs)&&(Qs=null),oo.forEach(nf),lo.forEach(nf)}function ji(e,t){e.blockedOn===t&&(e.blockedOn=null,jm||(jm=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,l2)))}function co(e){function t(a){return ji(a,e)}if(0<xl.length){ji(xl[0],e);for(var s=1;s<xl.length;s++){var n=xl[s];n.blockedOn===e&&(n.blockedOn=null)}}for(Hs!==null&&ji(Hs,e),Gs!==null&&ji(Gs,e),Qs!==null&&ji(Qs,e),oo.forEach(t),lo.forEach(t),s=0;s<Os.length;s++)n=Os[s],n.blockedOn===e&&(n.blockedOn=null);for(;0<Os.length&&(s=Os[0],s.blockedOn===null);)Ty(s),s.blockedOn===null&&Os.shift()}var Ua=vs.ReactCurrentBatchConfig,dd=!0;function d2(e,t,s,n){var a=we,i=Ua.transition;Ua.transition=null;try{we=1,qh(e,t,s,n)}finally{we=a,Ua.transition=i}}function c2(e,t,s,n){var a=we,i=Ua.transition;Ua.transition=null;try{we=4,qh(e,t,s,n)}finally{we=a,Ua.transition=i}}function qh(e,t,s,n){if(dd){var a=Nm(e,t,s,n);if(a===null)cu(e,t,n,cd,s),sf(e,n);else if(o2(a,e,t,s,n))n.stopPropagation();else if(sf(e,n),t&4&&-1<i2.indexOf(e)){for(;a!==null;){var i=$o(a);if(i!==null&&jy(i),i=Nm(e,t,s,n),i===null&&cu(e,t,n,cd,s),i===a)break;a=i}a!==null&&n.stopPropagation()}else cu(e,t,n,null,s)}}var cd=null;function Nm(e,t,s,n){if(cd=null,e=Vh(n),e=En(e),e!==null)if(t=oa(e),t===null)e=null;else if(s=t.tag,s===13){if(e=py(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cd=e,null}function _y(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(J1()){case $h:return 1;case yy:return 4;case od:case X1:return 16;case vy:return 536870912;default:return 16}default:return 16}}var $s=null,Hh=null,Ul=null;function Iy(){if(Ul)return Ul;var e,t=Hh,s=t.length,n,a="value"in $s?$s.value:$s.textContent,i=a.length;for(e=0;e<s&&t[e]===a[e];e++);var o=s-e;for(n=1;n<=o&&t[s-n]===a[i-n];n++);return Ul=a.slice(e,1<n?1-n:void 0)}function Bl(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function pl(){return!0}function af(){return!1}function er(e){function t(s,n,a,i,o){this._reactName=s,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(s=e[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?pl:af,this.isPropagationStopped=af,this}return Ue(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pl)},persist:function(){},isPersistent:pl}),t}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gh=er(li),Vo=Ue({},li,{view:0,detail:0}),u2=er(Vo),tu,ru,Ni,nc=Ue({},Vo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ni&&(Ni&&e.type==="mousemove"?(tu=e.screenX-Ni.screenX,ru=e.screenY-Ni.screenY):ru=tu=0,Ni=e),tu)},movementY:function(e){return"movementY"in e?e.movementY:ru}}),of=er(nc),m2=Ue({},nc,{dataTransfer:0}),h2=er(m2),x2=Ue({},Vo,{relatedTarget:0}),su=er(x2),p2=Ue({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),f2=er(p2),g2=Ue({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),b2=er(g2),y2=Ue({},li,{data:0}),lf=er(y2),v2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function j2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=k2[e])?!!t[e]:!1}function Qh(){return j2}var N2=Ue({},Vo,{key:function(e){if(e.key){var t=v2[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?w2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(e){return e.type==="keypress"?Bl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),S2=er(N2),C2=Ue({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),df=er(C2),T2=Ue({},Vo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),_2=er(T2),I2=Ue({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),P2=er(I2),A2=Ue({},nc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),E2=er(A2),M2=[9,13,27,32],Kh=us&&"CompositionEvent"in window,$i=null;us&&"documentMode"in document&&($i=document.documentMode);var R2=us&&"TextEvent"in window&&!$i,Py=us&&(!Kh||$i&&8<$i&&11>=$i),cf=" ",uf=!1;function Ay(e,t){switch(e){case"keyup":return M2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ey(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var wa=!1;function L2(e,t){switch(e){case"compositionend":return Ey(t);case"keypress":return t.which!==32?null:(uf=!0,cf);case"textInput":return e=t.data,e===cf&&uf?null:e;default:return null}}function D2(e,t){if(wa)return e==="compositionend"||!Kh&&Ay(e,t)?(e=Iy(),Ul=Hh=$s=null,wa=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Py&&t.locale!=="ko"?null:t.data;default:return null}}var O2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!O2[e.type]:t==="textarea"}function My(e,t,s,n){cy(n),t=ud(t,"onChange"),0<t.length&&(s=new Gh("onChange","change",null,s,n),e.push({event:s,listeners:t}))}var zi=null,uo=null;function F2(e){Wy(e,0)}function ac(e){var t=Na(e);if(sy(t))return e}function U2(e,t){if(e==="change")return t}var Ry=!1;if(us){var nu;if(us){var au="oninput"in document;if(!au){var hf=document.createElement("div");hf.setAttribute("oninput","return;"),au=typeof hf.oninput=="function"}nu=au}else nu=!1;Ry=nu&&(!document.documentMode||9<document.documentMode)}function xf(){zi&&(zi.detachEvent("onpropertychange",Ly),uo=zi=null)}function Ly(e){if(e.propertyName==="value"&&ac(uo)){var t=[];My(t,uo,e,Vh(e)),xy(F2,t)}}function B2(e,t,s){e==="focusin"?(xf(),zi=t,uo=s,zi.attachEvent("onpropertychange",Ly)):e==="focusout"&&xf()}function V2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ac(uo)}function $2(e,t){if(e==="click")return ac(t)}function z2(e,t){if(e==="input"||e==="change")return ac(t)}function W2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cr=typeof Object.is=="function"?Object.is:W2;function mo(e,t){if(Cr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var a=s[n];if(!im.call(t,a)||!Cr(e[a],t[a]))return!1}return!0}function pf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ff(e,t){var s=pf(e);e=0;for(var n;s;){if(s.nodeType===3){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=pf(s)}}function Dy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Dy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Oy(){for(var e=window,t=nd();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=nd(e.document)}return t}function Yh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function q2(e){var t=Oy(),s=e.focusedElem,n=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&Dy(s.ownerDocument.documentElement,s)){if(n!==null&&Yh(s)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=s.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=ff(s,i);var o=ff(s,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H2=us&&"documentMode"in document&&11>=document.documentMode,ka=null,Sm=null,Wi=null,Cm=!1;function gf(e,t,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Cm||ka==null||ka!==nd(n)||(n=ka,"selectionStart"in n&&Yh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Wi&&mo(Wi,n)||(Wi=n,n=ud(Sm,"onSelect"),0<n.length&&(t=new Gh("onSelect","select",null,t,s),e.push({event:t,listeners:n}),t.target=ka)))}function fl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var ja={animationend:fl("Animation","AnimationEnd"),animationiteration:fl("Animation","AnimationIteration"),animationstart:fl("Animation","AnimationStart"),transitionend:fl("Transition","TransitionEnd")},iu={},Fy={};us&&(Fy=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function ic(e){if(iu[e])return iu[e];if(!ja[e])return e;var t=ja[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Fy)return iu[e]=t[s];return e}var Uy=ic("animationend"),By=ic("animationiteration"),Vy=ic("animationstart"),$y=ic("transitionend"),zy=new Map,bf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hn(e,t){zy.set(e,t),ia(t,[e])}for(var ou=0;ou<bf.length;ou++){var lu=bf[ou],G2=lu.toLowerCase(),Q2=lu[0].toUpperCase()+lu.slice(1);hn(G2,"on"+Q2)}hn(Uy,"onAnimationEnd");hn(By,"onAnimationIteration");hn(Vy,"onAnimationStart");hn("dblclick","onDoubleClick");hn("focusin","onFocus");hn("focusout","onBlur");hn($y,"onTransitionEnd");Qa("onMouseEnter",["mouseout","mouseover"]);Qa("onMouseLeave",["mouseout","mouseover"]);Qa("onPointerEnter",["pointerout","pointerover"]);Qa("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),K2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function yf(e,t,s){var n=e.type||"unknown-event";e.currentTarget=s,G1(n,t,void 0,e),e.currentTarget=null}function Wy(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var n=e[s],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],d=l.instance,c=l.currentTarget;if(l=l.listener,d!==i&&a.isPropagationStopped())break e;yf(a,l,c),i=d}else for(o=0;o<n.length;o++){if(l=n[o],d=l.instance,c=l.currentTarget,l=l.listener,d!==i&&a.isPropagationStopped())break e;yf(a,l,c),i=d}}}if(id)throw e=wm,id=!1,wm=null,e}function Ie(e,t){var s=t[Am];s===void 0&&(s=t[Am]=new Set);var n=e+"__bubble";s.has(n)||(qy(t,e,2,!1),s.add(n))}function du(e,t,s){var n=0;t&&(n|=4),qy(s,e,n,t)}var gl="_reactListening"+Math.random().toString(36).slice(2);function ho(e){if(!e[gl]){e[gl]=!0,Xb.forEach(function(s){s!=="selectionchange"&&(K2.has(s)||du(s,!1,e),du(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[gl]||(t[gl]=!0,du("selectionchange",!1,t))}}function qy(e,t,s,n){switch(_y(t)){case 1:var a=d2;break;case 4:a=c2;break;default:a=qh}s=a.bind(null,t,s,e),a=void 0,!vm||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,s,{capture:!0,passive:a}):e.addEventListener(t,s,!0):a!==void 0?e.addEventListener(t,s,{passive:a}):e.addEventListener(t,s,!1)}function cu(e,t,s,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var d=o.tag;if((d===3||d===4)&&(d=o.stateNode.containerInfo,d===a||d.nodeType===8&&d.parentNode===a))return;o=o.return}for(;l!==null;){if(o=En(l),o===null)return;if(d=o.tag,d===5||d===6){n=i=o;continue e}l=l.parentNode}}n=n.return}xy(function(){var c=i,u=Vh(s),m=[];e:{var h=zy.get(e);if(h!==void 0){var x=Gh,g=e;switch(e){case"keypress":if(Bl(s)===0)break e;case"keydown":case"keyup":x=S2;break;case"focusin":g="focus",x=su;break;case"focusout":g="blur",x=su;break;case"beforeblur":case"afterblur":x=su;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=of;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=h2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=_2;break;case Uy:case By:case Vy:x=f2;break;case $y:x=P2;break;case"scroll":x=u2;break;case"wheel":x=E2;break;case"copy":case"cut":case"paste":x=b2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=df}var v=(t&4)!==0,y=!v&&e==="scroll",p=v?h!==null?h+"Capture":null:h;v=[];for(var b=c,w;b!==null;){w=b;var k=w.stateNode;if(w.tag===5&&k!==null&&(w=k,p!==null&&(k=io(b,p),k!=null&&v.push(xo(b,k,w)))),y)break;b=b.return}0<v.length&&(h=new x(h,g,null,s,u),m.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&s!==bm&&(g=s.relatedTarget||s.fromElement)&&(En(g)||g[ms]))break e;if((x||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,x?(g=s.relatedTarget||s.toElement,x=c,g=g?En(g):null,g!==null&&(y=oa(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(x=null,g=c),x!==g)){if(v=of,k="onMouseLeave",p="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(v=df,k="onPointerLeave",p="onPointerEnter",b="pointer"),y=x==null?h:Na(x),w=g==null?h:Na(g),h=new v(k,b+"leave",x,s,u),h.target=y,h.relatedTarget=w,k=null,En(u)===c&&(v=new v(p,b+"enter",g,s,u),v.target=w,v.relatedTarget=y,k=v),y=k,x&&g)t:{for(v=x,p=g,b=0,w=v;w;w=pa(w))b++;for(w=0,k=p;k;k=pa(k))w++;for(;0<b-w;)v=pa(v),b--;for(;0<w-b;)p=pa(p),w--;for(;b--;){if(v===p||p!==null&&v===p.alternate)break t;v=pa(v),p=pa(p)}v=null}else v=null;x!==null&&vf(m,h,x,v,!1),g!==null&&y!==null&&vf(m,y,g,v,!0)}}e:{if(h=c?Na(c):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var j=U2;else if(mf(h))if(Ry)j=z2;else{j=V2;var N=B2}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=$2);if(j&&(j=j(e,c))){My(m,j,s,u);break e}N&&N(e,h,c),e==="focusout"&&(N=h._wrapperState)&&N.controlled&&h.type==="number"&&hm(h,"number",h.value)}switch(N=c?Na(c):window,e){case"focusin":(mf(N)||N.contentEditable==="true")&&(ka=N,Sm=c,Wi=null);break;case"focusout":Wi=Sm=ka=null;break;case"mousedown":Cm=!0;break;case"contextmenu":case"mouseup":case"dragend":Cm=!1,gf(m,s,u);break;case"selectionchange":if(H2)break;case"keydown":case"keyup":gf(m,s,u)}var _;if(Kh)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else wa?Ay(e,s)&&(A="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(A="onCompositionStart");A&&(Py&&s.locale!=="ko"&&(wa||A!=="onCompositionStart"?A==="onCompositionEnd"&&wa&&(_=Iy()):($s=u,Hh="value"in $s?$s.value:$s.textContent,wa=!0)),N=ud(c,A),0<N.length&&(A=new lf(A,e,null,s,u),m.push({event:A,listeners:N}),_?A.data=_:(_=Ey(s),_!==null&&(A.data=_)))),(_=R2?L2(e,s):D2(e,s))&&(c=ud(c,"onBeforeInput"),0<c.length&&(u=new lf("onBeforeInput","beforeinput",null,s,u),m.push({event:u,listeners:c}),u.data=_))}Wy(m,t)})}function xo(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ud(e,t){for(var s=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=io(e,s),i!=null&&n.unshift(xo(e,i,a)),i=io(e,t),i!=null&&n.push(xo(e,i,a))),e=e.return}return n}function pa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vf(e,t,s,n,a){for(var i=t._reactName,o=[];s!==null&&s!==n;){var l=s,d=l.alternate,c=l.stateNode;if(d!==null&&d===n)break;l.tag===5&&c!==null&&(l=c,a?(d=io(s,i),d!=null&&o.unshift(xo(s,d,l))):a||(d=io(s,i),d!=null&&o.push(xo(s,d,l)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Y2=/\r\n?/g,J2=/\u0000|\uFFFD/g;function wf(e){return(typeof e=="string"?e:""+e).replace(Y2,`
`).replace(J2,"")}function bl(e,t,s){if(t=wf(t),wf(e)!==t&&s)throw Error(z(425))}function md(){}var Tm=null,_m=null;function Im(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pm=typeof setTimeout=="function"?setTimeout:void 0,X2=typeof clearTimeout=="function"?clearTimeout:void 0,kf=typeof Promise=="function"?Promise:void 0,Z2=typeof queueMicrotask=="function"?queueMicrotask:typeof kf<"u"?function(e){return kf.resolve(null).then(e).catch(e5)}:Pm;function e5(e){setTimeout(function(){throw e})}function uu(e,t){var s=t,n=0;do{var a=s.nextSibling;if(e.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(n===0){e.removeChild(a),co(t);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=a}while(s);co(t)}function Ks(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function jf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),Mr="__reactFiber$"+di,po="__reactProps$"+di,ms="__reactContainer$"+di,Am="__reactEvents$"+di,t5="__reactListeners$"+di,r5="__reactHandles$"+di;function En(e){var t=e[Mr];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ms]||s[Mr]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=jf(e);e!==null;){if(s=e[Mr])return s;e=jf(e)}return t}e=s,s=e.parentNode}return null}function $o(e){return e=e[Mr]||e[ms],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Na(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(z(33))}function oc(e){return e[po]||null}var Em=[],Sa=-1;function xn(e){return{current:e}}function Pe(e){0>Sa||(e.current=Em[Sa],Em[Sa]=null,Sa--)}function Se(e,t){Sa++,Em[Sa]=e.current,e.current=t}var on={},wt=xn(on),Ut=xn(!1),Gn=on;function Ka(e,t){var s=e.type.contextTypes;if(!s)return on;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in s)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Bt(e){return e=e.childContextTypes,e!=null}function hd(){Pe(Ut),Pe(wt)}function Nf(e,t,s){if(wt.current!==on)throw Error(z(168));Se(wt,t),Se(Ut,s)}function Hy(e,t,s){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(z(108,B1(e)||"Unknown",a));return Ue({},s,n)}function xd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||on,Gn=wt.current,Se(wt,e),Se(Ut,Ut.current),!0}function Sf(e,t,s){var n=e.stateNode;if(!n)throw Error(z(169));s?(e=Hy(e,t,Gn),n.__reactInternalMemoizedMergedChildContext=e,Pe(Ut),Pe(wt),Se(wt,e)):Pe(Ut),Se(Ut,s)}var Xr=null,lc=!1,mu=!1;function Gy(e){Xr===null?Xr=[e]:Xr.push(e)}function s5(e){lc=!0,Gy(e)}function pn(){if(!mu&&Xr!==null){mu=!0;var e=0,t=we;try{var s=Xr;for(we=1;e<s.length;e++){var n=s[e];do n=n(!0);while(n!==null)}Xr=null,lc=!1}catch(a){throw Xr!==null&&(Xr=Xr.slice(e+1)),by($h,pn),a}finally{we=t,mu=!1}}return null}var Ca=[],Ta=0,pd=null,fd=0,or=[],lr=0,Qn=null,ts=1,rs="";function Sn(e,t){Ca[Ta++]=fd,Ca[Ta++]=pd,pd=e,fd=t}function Qy(e,t,s){or[lr++]=ts,or[lr++]=rs,or[lr++]=Qn,Qn=e;var n=ts;e=rs;var a=32-kr(n)-1;n&=~(1<<a),s+=1;var i=32-kr(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ts=1<<32-kr(t)+a|s<<a|n,rs=i+e}else ts=1<<i|s<<a|n,rs=e}function Jh(e){e.return!==null&&(Sn(e,1),Qy(e,1,0))}function Xh(e){for(;e===pd;)pd=Ca[--Ta],Ca[Ta]=null,fd=Ca[--Ta],Ca[Ta]=null;for(;e===Qn;)Qn=or[--lr],or[lr]=null,rs=or[--lr],or[lr]=null,ts=or[--lr],or[lr]=null}var Ht=null,qt=null,Re=!1,vr=null;function Ky(e,t){var s=dr(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Cf(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ht=e,qt=Ks(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ht=e,qt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Qn!==null?{id:ts,overflow:rs}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=dr(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Ht=e,qt=null,!0):!1;default:return!1}}function Mm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Rm(e){if(Re){var t=qt;if(t){var s=t;if(!Cf(e,t)){if(Mm(e))throw Error(z(418));t=Ks(s.nextSibling);var n=Ht;t&&Cf(e,t)?Ky(n,s):(e.flags=e.flags&-4097|2,Re=!1,Ht=e)}}else{if(Mm(e))throw Error(z(418));e.flags=e.flags&-4097|2,Re=!1,Ht=e}}}function Tf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ht=e}function yl(e){if(e!==Ht)return!1;if(!Re)return Tf(e),Re=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Im(e.type,e.memoizedProps)),t&&(t=qt)){if(Mm(e))throw Yy(),Error(z(418));for(;t;)Ky(e,t),t=Ks(t.nextSibling)}if(Tf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(z(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){qt=Ks(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}qt=null}}else qt=Ht?Ks(e.stateNode.nextSibling):null;return!0}function Yy(){for(var e=qt;e;)e=Ks(e.nextSibling)}function Ya(){qt=Ht=null,Re=!1}function Zh(e){vr===null?vr=[e]:vr.push(e)}var n5=vs.ReactCurrentBatchConfig;function Si(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(z(309));var n=s.stateNode}if(!n)throw Error(z(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(z(284));if(!s._owner)throw Error(z(290,e))}return e}function vl(e,t){throw e=Object.prototype.toString.call(t),Error(z(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function _f(e){var t=e._init;return t(e._payload)}function Jy(e){function t(p,b){if(e){var w=p.deletions;w===null?(p.deletions=[b],p.flags|=16):w.push(b)}}function s(p,b){if(!e)return null;for(;b!==null;)t(p,b),b=b.sibling;return null}function n(p,b){for(p=new Map;b!==null;)b.key!==null?p.set(b.key,b):p.set(b.index,b),b=b.sibling;return p}function a(p,b){return p=Zs(p,b),p.index=0,p.sibling=null,p}function i(p,b,w){return p.index=w,e?(w=p.alternate,w!==null?(w=w.index,w<b?(p.flags|=2,b):w):(p.flags|=2,b)):(p.flags|=1048576,b)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,b,w,k){return b===null||b.tag!==6?(b=yu(w,p.mode,k),b.return=p,b):(b=a(b,w),b.return=p,b)}function d(p,b,w,k){var j=w.type;return j===va?u(p,b,w.props.children,k,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rs&&_f(j)===b.type)?(k=a(b,w.props),k.ref=Si(p,b,w),k.return=p,k):(k=Gl(w.type,w.key,w.props,null,p.mode,k),k.ref=Si(p,b,w),k.return=p,k)}function c(p,b,w,k){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=vu(w,p.mode,k),b.return=p,b):(b=a(b,w.children||[]),b.return=p,b)}function u(p,b,w,k,j){return b===null||b.tag!==7?(b=Vn(w,p.mode,k,j),b.return=p,b):(b=a(b,w),b.return=p,b)}function m(p,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=yu(""+b,p.mode,w),b.return=p,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case dl:return w=Gl(b.type,b.key,b.props,null,p.mode,w),w.ref=Si(p,null,b),w.return=p,w;case ya:return b=vu(b,p.mode,w),b.return=p,b;case Rs:var k=b._init;return m(p,k(b._payload),w)}if(Li(b)||vi(b))return b=Vn(b,p.mode,w,null),b.return=p,b;vl(p,b)}return null}function h(p,b,w,k){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(p,b,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dl:return w.key===j?d(p,b,w,k):null;case ya:return w.key===j?c(p,b,w,k):null;case Rs:return j=w._init,h(p,b,j(w._payload),k)}if(Li(w)||vi(w))return j!==null?null:u(p,b,w,k,null);vl(p,w)}return null}function x(p,b,w,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return p=p.get(w)||null,l(b,p,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case dl:return p=p.get(k.key===null?w:k.key)||null,d(b,p,k,j);case ya:return p=p.get(k.key===null?w:k.key)||null,c(b,p,k,j);case Rs:var N=k._init;return x(p,b,w,N(k._payload),j)}if(Li(k)||vi(k))return p=p.get(w)||null,u(b,p,k,j,null);vl(b,k)}return null}function g(p,b,w,k){for(var j=null,N=null,_=b,A=b=0,L=null;_!==null&&A<w.length;A++){_.index>A?(L=_,_=null):L=_.sibling;var C=h(p,_,w[A],k);if(C===null){_===null&&(_=L);break}e&&_&&C.alternate===null&&t(p,_),b=i(C,b,A),N===null?j=C:N.sibling=C,N=C,_=L}if(A===w.length)return s(p,_),Re&&Sn(p,A),j;if(_===null){for(;A<w.length;A++)_=m(p,w[A],k),_!==null&&(b=i(_,b,A),N===null?j=_:N.sibling=_,N=_);return Re&&Sn(p,A),j}for(_=n(p,_);A<w.length;A++)L=x(_,p,A,w[A],k),L!==null&&(e&&L.alternate!==null&&_.delete(L.key===null?A:L.key),b=i(L,b,A),N===null?j=L:N.sibling=L,N=L);return e&&_.forEach(function(P){return t(p,P)}),Re&&Sn(p,A),j}function v(p,b,w,k){var j=vi(w);if(typeof j!="function")throw Error(z(150));if(w=j.call(w),w==null)throw Error(z(151));for(var N=j=null,_=b,A=b=0,L=null,C=w.next();_!==null&&!C.done;A++,C=w.next()){_.index>A?(L=_,_=null):L=_.sibling;var P=h(p,_,C.value,k);if(P===null){_===null&&(_=L);break}e&&_&&P.alternate===null&&t(p,_),b=i(P,b,A),N===null?j=P:N.sibling=P,N=P,_=L}if(C.done)return s(p,_),Re&&Sn(p,A),j;if(_===null){for(;!C.done;A++,C=w.next())C=m(p,C.value,k),C!==null&&(b=i(C,b,A),N===null?j=C:N.sibling=C,N=C);return Re&&Sn(p,A),j}for(_=n(p,_);!C.done;A++,C=w.next())C=x(_,p,A,C.value,k),C!==null&&(e&&C.alternate!==null&&_.delete(C.key===null?A:C.key),b=i(C,b,A),N===null?j=C:N.sibling=C,N=C);return e&&_.forEach(function(R){return t(p,R)}),Re&&Sn(p,A),j}function y(p,b,w,k){if(typeof w=="object"&&w!==null&&w.type===va&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case dl:e:{for(var j=w.key,N=b;N!==null;){if(N.key===j){if(j=w.type,j===va){if(N.tag===7){s(p,N.sibling),b=a(N,w.props.children),b.return=p,p=b;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Rs&&_f(j)===N.type){s(p,N.sibling),b=a(N,w.props),b.ref=Si(p,N,w),b.return=p,p=b;break e}s(p,N);break}else t(p,N);N=N.sibling}w.type===va?(b=Vn(w.props.children,p.mode,k,w.key),b.return=p,p=b):(k=Gl(w.type,w.key,w.props,null,p.mode,k),k.ref=Si(p,b,w),k.return=p,p=k)}return o(p);case ya:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){s(p,b.sibling),b=a(b,w.children||[]),b.return=p,p=b;break e}else{s(p,b);break}else t(p,b);b=b.sibling}b=vu(w,p.mode,k),b.return=p,p=b}return o(p);case Rs:return N=w._init,y(p,b,N(w._payload),k)}if(Li(w))return g(p,b,w,k);if(vi(w))return v(p,b,w,k);vl(p,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(s(p,b.sibling),b=a(b,w),b.return=p,p=b):(s(p,b),b=yu(w,p.mode,k),b.return=p,p=b),o(p)):s(p,b)}return y}var Ja=Jy(!0),Xy=Jy(!1),gd=xn(null),bd=null,_a=null,ex=null;function tx(){ex=_a=bd=null}function rx(e){var t=gd.current;Pe(gd),e._currentValue=t}function Lm(e,t,s){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===s)break;e=e.return}}function Ba(e,t){bd=e,ex=_a=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Dt=!0),e.firstContext=null)}function mr(e){var t=e._currentValue;if(ex!==e)if(e={context:e,memoizedValue:t,next:null},_a===null){if(bd===null)throw Error(z(308));_a=e,bd.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Mn=null;function sx(e){Mn===null?Mn=[e]:Mn.push(e)}function Zy(e,t,s,n){var a=t.interleaved;return a===null?(s.next=s,sx(t)):(s.next=a.next,a.next=s),t.interleaved=s,hs(e,n)}function hs(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var Ls=!1;function nx(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ev(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function is(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ys(e,t,s){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,be&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,hs(e,s)}return a=n.interleaved,a===null?(t.next=t,sx(n)):(t.next=a.next,a.next=t),n.interleaved=t,hs(e,s)}function Vl(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,zh(e,s)}}function If(e,t){var s=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var a=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?a=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?a=i=t:i=i.next=t}else a=i=t;s={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function yd(e,t,s,n){var a=e.updateQueue;Ls=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var d=l,c=d.next;d.next=null,o===null?i=c:o.next=c,o=d;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=d))}if(i!==null){var m=a.baseState;o=0,u=c=d=null,l=i;do{var h=l.lane,x=l.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,v=l;switch(h=t,x=s,v.tag){case 1:if(g=v.payload,typeof g=="function"){m=g.call(x,m,h);break e}m=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(x,m,h):g,h==null)break e;m=Ue({},m,h);break e;case 2:Ls=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else x={eventTime:x,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=x,d=m):u=u.next=x,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(d=m),a.baseState=d,a.firstBaseUpdate=c,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Yn|=o,e.lanes=o,e.memoizedState=m}}function Pf(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=s,typeof a!="function")throw Error(z(191,a));a.call(n)}}}var zo={},Fr=xn(zo),fo=xn(zo),go=xn(zo);function Rn(e){if(e===zo)throw Error(z(174));return e}function ax(e,t){switch(Se(go,t),Se(fo,e),Se(Fr,zo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pm(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pm(t,e)}Pe(Fr),Se(Fr,t)}function Xa(){Pe(Fr),Pe(fo),Pe(go)}function tv(e){Rn(go.current);var t=Rn(Fr.current),s=pm(t,e.type);t!==s&&(Se(fo,e),Se(Fr,s))}function ix(e){fo.current===e&&(Pe(Fr),Pe(fo))}var Le=xn(0);function vd(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hu=[];function ox(){for(var e=0;e<hu.length;e++)hu[e]._workInProgressVersionPrimary=null;hu.length=0}var $l=vs.ReactCurrentDispatcher,xu=vs.ReactCurrentBatchConfig,Kn=0,Fe=null,Qe=null,tt=null,wd=!1,qi=!1,bo=0,a5=0;function pt(){throw Error(z(321))}function lx(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Cr(e[s],t[s]))return!1;return!0}function dx(e,t,s,n,a,i){if(Kn=i,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$l.current=e===null||e.memoizedState===null?d5:c5,e=s(n,a),qi){i=0;do{if(qi=!1,bo=0,25<=i)throw Error(z(301));i+=1,tt=Qe=null,t.updateQueue=null,$l.current=u5,e=s(n,a)}while(qi)}if($l.current=kd,t=Qe!==null&&Qe.next!==null,Kn=0,tt=Qe=Fe=null,wd=!1,t)throw Error(z(300));return e}function cx(){var e=bo!==0;return bo=0,e}function Er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Fe.memoizedState=tt=e:tt=tt.next=e,tt}function hr(){if(Qe===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Qe.next;var t=tt===null?Fe.memoizedState:tt.next;if(t!==null)tt=t,Qe=e;else{if(e===null)throw Error(z(310));Qe=e,e={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},tt===null?Fe.memoizedState=tt=e:tt=tt.next=e}return tt}function yo(e,t){return typeof t=="function"?t(e):t}function pu(e){var t=hr(),s=t.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=e;var n=Qe,a=n.baseQueue,i=s.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,s.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,d=null,c=i;do{var u=c.lane;if((Kn&u)===u)d!==null&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:e(n,c.action);else{var m={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};d===null?(l=d=m,o=n):d=d.next=m,Fe.lanes|=u,Yn|=u}c=c.next}while(c!==null&&c!==i);d===null?o=n:d.next=l,Cr(n,t.memoizedState)||(Dt=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=d,s.lastRenderedState=n}if(e=s.interleaved,e!==null){a=e;do i=a.lane,Fe.lanes|=i,Yn|=i,a=a.next;while(a!==e)}else a===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function fu(e){var t=hr(),s=t.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=e;var n=s.dispatch,a=s.pending,i=t.memoizedState;if(a!==null){s.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Cr(i,t.memoizedState)||(Dt=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),s.lastRenderedState=i}return[i,n]}function rv(){}function sv(e,t){var s=Fe,n=hr(),a=t(),i=!Cr(n.memoizedState,a);if(i&&(n.memoizedState=a,Dt=!0),n=n.queue,ux(iv.bind(null,s,n,e),[e]),n.getSnapshot!==t||i||tt!==null&&tt.memoizedState.tag&1){if(s.flags|=2048,vo(9,av.bind(null,s,n,a,t),void 0,null),st===null)throw Error(z(349));Kn&30||nv(s,t,a)}return a}function nv(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function av(e,t,s,n){t.value=s,t.getSnapshot=n,ov(t)&&lv(e)}function iv(e,t,s){return s(function(){ov(t)&&lv(e)})}function ov(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Cr(e,s)}catch{return!0}}function lv(e){var t=hs(e,1);t!==null&&jr(t,e,1,-1)}function Af(e){var t=Er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yo,lastRenderedState:e},t.queue=e,e=e.dispatch=l5.bind(null,Fe,e),[t.memoizedState,e]}function vo(e,t,s,n){return e={tag:e,create:t,destroy:s,deps:n,next:null},t=Fe.updateQueue,t===null?(t={lastEffect:null,stores:null},Fe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(n=s.next,s.next=e,e.next=n,t.lastEffect=e)),e}function dv(){return hr().memoizedState}function zl(e,t,s,n){var a=Er();Fe.flags|=e,a.memoizedState=vo(1|t,s,void 0,n===void 0?null:n)}function dc(e,t,s,n){var a=hr();n=n===void 0?null:n;var i=void 0;if(Qe!==null){var o=Qe.memoizedState;if(i=o.destroy,n!==null&&lx(n,o.deps)){a.memoizedState=vo(t,s,i,n);return}}Fe.flags|=e,a.memoizedState=vo(1|t,s,i,n)}function Ef(e,t){return zl(8390656,8,e,t)}function ux(e,t){return dc(2048,8,e,t)}function cv(e,t){return dc(4,2,e,t)}function uv(e,t){return dc(4,4,e,t)}function mv(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hv(e,t,s){return s=s!=null?s.concat([e]):null,dc(4,4,mv.bind(null,t,e),s)}function mx(){}function xv(e,t){var s=hr();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&lx(t,n[1])?n[0]:(s.memoizedState=[e,t],e)}function pv(e,t){var s=hr();t=t===void 0?null:t;var n=s.memoizedState;return n!==null&&t!==null&&lx(t,n[1])?n[0]:(e=e(),s.memoizedState=[e,t],e)}function fv(e,t,s){return Kn&21?(Cr(s,t)||(s=wy(),Fe.lanes|=s,Yn|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=s)}function i5(e,t){var s=we;we=s!==0&&4>s?s:4,e(!0);var n=xu.transition;xu.transition={};try{e(!1),t()}finally{we=s,xu.transition=n}}function gv(){return hr().memoizedState}function o5(e,t,s){var n=Xs(e);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},bv(e))yv(t,s);else if(s=Zy(e,t,s,n),s!==null){var a=It();jr(s,e,n,a),vv(s,t,n)}}function l5(e,t,s){var n=Xs(e),a={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(bv(e))yv(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,s);if(a.hasEagerState=!0,a.eagerState=l,Cr(l,o)){var d=t.interleaved;d===null?(a.next=a,sx(t)):(a.next=d.next,d.next=a),t.interleaved=a;return}}catch{}finally{}s=Zy(e,t,a,n),s!==null&&(a=It(),jr(s,e,n,a),vv(s,t,n))}}function bv(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function yv(e,t){qi=wd=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function vv(e,t,s){if(s&4194240){var n=t.lanes;n&=e.pendingLanes,s|=n,t.lanes=s,zh(e,s)}}var kd={readContext:mr,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useInsertionEffect:pt,useLayoutEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useMutableSource:pt,useSyncExternalStore:pt,useId:pt,unstable_isNewReconciler:!1},d5={readContext:mr,useCallback:function(e,t){return Er().memoizedState=[e,t===void 0?null:t],e},useContext:mr,useEffect:Ef,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,zl(4194308,4,mv.bind(null,t,e),s)},useLayoutEffect:function(e,t){return zl(4194308,4,e,t)},useInsertionEffect:function(e,t){return zl(4,2,e,t)},useMemo:function(e,t){var s=Er();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var n=Er();return t=s!==void 0?s(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=o5.bind(null,Fe,e),[n.memoizedState,e]},useRef:function(e){var t=Er();return e={current:e},t.memoizedState=e},useState:Af,useDebugValue:mx,useDeferredValue:function(e){return Er().memoizedState=e},useTransition:function(){var e=Af(!1),t=e[0];return e=i5.bind(null,e[1]),Er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var n=Fe,a=Er();if(Re){if(s===void 0)throw Error(z(407));s=s()}else{if(s=t(),st===null)throw Error(z(349));Kn&30||nv(n,t,s)}a.memoizedState=s;var i={value:s,getSnapshot:t};return a.queue=i,Ef(iv.bind(null,n,i,e),[e]),n.flags|=2048,vo(9,av.bind(null,n,i,s,t),void 0,null),s},useId:function(){var e=Er(),t=st.identifierPrefix;if(Re){var s=rs,n=ts;s=(n&~(1<<32-kr(n)-1)).toString(32)+s,t=":"+t+"R"+s,s=bo++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=a5++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},c5={readContext:mr,useCallback:xv,useContext:mr,useEffect:ux,useImperativeHandle:hv,useInsertionEffect:cv,useLayoutEffect:uv,useMemo:pv,useReducer:pu,useRef:dv,useState:function(){return pu(yo)},useDebugValue:mx,useDeferredValue:function(e){var t=hr();return fv(t,Qe.memoizedState,e)},useTransition:function(){var e=pu(yo)[0],t=hr().memoizedState;return[e,t]},useMutableSource:rv,useSyncExternalStore:sv,useId:gv,unstable_isNewReconciler:!1},u5={readContext:mr,useCallback:xv,useContext:mr,useEffect:ux,useImperativeHandle:hv,useInsertionEffect:cv,useLayoutEffect:uv,useMemo:pv,useReducer:fu,useRef:dv,useState:function(){return fu(yo)},useDebugValue:mx,useDeferredValue:function(e){var t=hr();return Qe===null?t.memoizedState=e:fv(t,Qe.memoizedState,e)},useTransition:function(){var e=fu(yo)[0],t=hr().memoizedState;return[e,t]},useMutableSource:rv,useSyncExternalStore:sv,useId:gv,unstable_isNewReconciler:!1};function br(e,t){if(e&&e.defaultProps){t=Ue({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Dm(e,t,s,n){t=e.memoizedState,s=s(n,t),s=s==null?t:Ue({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var cc={isMounted:function(e){return(e=e._reactInternals)?oa(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var n=It(),a=Xs(e),i=is(n,a);i.payload=t,s!=null&&(i.callback=s),t=Ys(e,i,a),t!==null&&(jr(t,e,a,n),Vl(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var n=It(),a=Xs(e),i=is(n,a);i.tag=1,i.payload=t,s!=null&&(i.callback=s),t=Ys(e,i,a),t!==null&&(jr(t,e,a,n),Vl(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=It(),n=Xs(e),a=is(s,n);a.tag=2,t!=null&&(a.callback=t),t=Ys(e,a,n),t!==null&&(jr(t,e,n,s),Vl(t,e,n))}};function Mf(e,t,s,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!mo(s,n)||!mo(a,i):!0}function wv(e,t,s){var n=!1,a=on,i=t.contextType;return typeof i=="object"&&i!==null?i=mr(i):(a=Bt(t)?Gn:wt.current,n=t.contextTypes,i=(n=n!=null)?Ka(e,a):on),t=new t(s,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=cc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function Rf(e,t,s,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,n),t.state!==e&&cc.enqueueReplaceState(t,t.state,null)}function Om(e,t,s,n){var a=e.stateNode;a.props=s,a.state=e.memoizedState,a.refs={},nx(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=mr(i):(i=Bt(t)?Gn:wt.current,a.context=Ka(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Dm(e,t,i,s),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&cc.enqueueReplaceState(a,a.state,null),yd(e,s,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Za(e,t){try{var s="",n=t;do s+=U1(n),n=n.return;while(n);var a=s}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function gu(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Fm(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var m5=typeof WeakMap=="function"?WeakMap:Map;function kv(e,t,s){s=is(-1,s),s.tag=3,s.payload={element:null};var n=t.value;return s.callback=function(){Nd||(Nd=!0,Qm=n),Fm(e,t)},s}function jv(e,t,s){s=is(-1,s),s.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;s.payload=function(){return n(a)},s.callback=function(){Fm(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Fm(e,t),typeof n!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function Lf(e,t,s){var n=e.pingCache;if(n===null){n=e.pingCache=new m5;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(s)||(a.add(s),e=C5.bind(null,e,t,s),t.then(e,e))}function Df(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Of(e,t,s,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=is(-1,1),t.tag=2,Ys(s,t,1))),s.lanes|=1),e)}var h5=vs.ReactCurrentOwner,Dt=!1;function Ct(e,t,s,n){t.child=e===null?Xy(t,null,s,n):Ja(t,e.child,s,n)}function Ff(e,t,s,n,a){s=s.render;var i=t.ref;return Ba(t,a),n=dx(e,t,s,n,i,a),s=cx(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xs(e,t,a)):(Re&&s&&Jh(t),t.flags|=1,Ct(e,t,n,a),t.child)}function Uf(e,t,s,n,a){if(e===null){var i=s.type;return typeof i=="function"&&!vx(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=i,Nv(e,t,i,n,a)):(e=Gl(s.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:mo,s(o,n)&&e.ref===t.ref)return xs(e,t,a)}return t.flags|=1,e=Zs(i,n),e.ref=t.ref,e.return=t,t.child=e}function Nv(e,t,s,n,a){if(e!==null){var i=e.memoizedProps;if(mo(i,n)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(Dt=!0);else return t.lanes=e.lanes,xs(e,t,a)}return Um(e,t,s,n,a)}function Sv(e,t,s){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Pa,Wt),Wt|=s;else{if(!(s&1073741824))return e=i!==null?i.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Se(Pa,Wt),Wt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Se(Pa,Wt),Wt|=n}else i!==null?(n=i.baseLanes|s,t.memoizedState=null):n=s,Se(Pa,Wt),Wt|=n;return Ct(e,t,a,s),t.child}function Cv(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Um(e,t,s,n,a){var i=Bt(s)?Gn:wt.current;return i=Ka(t,i),Ba(t,a),s=dx(e,t,s,n,i,a),n=cx(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,xs(e,t,a)):(Re&&n&&Jh(t),t.flags|=1,Ct(e,t,s,a),t.child)}function Bf(e,t,s,n,a){if(Bt(s)){var i=!0;xd(t)}else i=!1;if(Ba(t,a),t.stateNode===null)Wl(e,t),wv(t,s,n),Om(t,s,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var d=o.context,c=s.contextType;typeof c=="object"&&c!==null?c=mr(c):(c=Bt(s)?Gn:wt.current,c=Ka(t,c));var u=s.getDerivedStateFromProps,m=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||d!==c)&&Rf(t,o,n,c),Ls=!1;var h=t.memoizedState;o.state=h,yd(t,n,o,a),d=t.memoizedState,l!==n||h!==d||Ut.current||Ls?(typeof u=="function"&&(Dm(t,s,u,n),d=t.memoizedState),(l=Ls||Mf(t,s,l,n,h,d,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=d),o.props=n,o.state=d,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,ev(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:br(t.type,l),o.props=c,m=t.pendingProps,h=o.context,d=s.contextType,typeof d=="object"&&d!==null?d=mr(d):(d=Bt(s)?Gn:wt.current,d=Ka(t,d));var x=s.getDerivedStateFromProps;(u=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||h!==d)&&Rf(t,o,n,d),Ls=!1,h=t.memoizedState,o.state=h,yd(t,n,o,a);var g=t.memoizedState;l!==m||h!==g||Ut.current||Ls?(typeof x=="function"&&(Dm(t,s,x,n),g=t.memoizedState),(c=Ls||Mf(t,s,c,n,h,g,d)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,d),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,d)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=d,n=c):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Bm(e,t,s,n,i,a)}function Bm(e,t,s,n,a,i){Cv(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Sf(t,s,!1),xs(e,t,i);n=t.stateNode,h5.current=t;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Ja(t,e.child,null,i),t.child=Ja(t,null,l,i)):Ct(e,t,l,i),t.memoizedState=n.state,a&&Sf(t,s,!0),t.child}function Tv(e){var t=e.stateNode;t.pendingContext?Nf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Nf(e,t.context,!1),ax(e,t.containerInfo)}function Vf(e,t,s,n,a){return Ya(),Zh(a),t.flags|=256,Ct(e,t,s,n),t.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function $m(e){return{baseLanes:e,cachePool:null,transitions:null}}function _v(e,t,s){var n=t.pendingProps,a=Le.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Se(Le,a&1),e===null)return Rm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=hc(o,n,0,null),e=Vn(e,n,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=$m(s),t.memoizedState=Vm,e):hx(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return x5(e,t,o,n,l,a,s);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var d={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=d,t.deletions=null):(n=Zs(a,d),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=Zs(l,i):(i=Vn(i,o,s,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?$m(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=Vm,n}return i=e.child,e=i.sibling,n=Zs(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=s),n.return=t,n.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=n,t.memoizedState=null,n}function hx(e,t){return t=hc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function wl(e,t,s,n){return n!==null&&Zh(n),Ja(t,e.child,null,s),e=hx(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function x5(e,t,s,n,a,i,o){if(s)return t.flags&256?(t.flags&=-257,n=gu(Error(z(422))),wl(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=hc({mode:"visible",children:n.children},a,0,null),i=Vn(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Ja(t,e.child,null,o),t.child.memoizedState=$m(o),t.memoizedState=Vm,i);if(!(t.mode&1))return wl(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(z(419)),n=gu(i,n,void 0),wl(e,t,o,n)}if(l=(o&e.childLanes)!==0,Dt||l){if(n=st,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,hs(e,a),jr(n,e,a,-1))}return yx(),n=gu(Error(z(421))),wl(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=T5.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,qt=Ks(a.nextSibling),Ht=t,Re=!0,vr=null,e!==null&&(or[lr++]=ts,or[lr++]=rs,or[lr++]=Qn,ts=e.id,rs=e.overflow,Qn=t),t=hx(t,n.children),t.flags|=4096,t)}function $f(e,t,s){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Lm(e.return,t,s)}function bu(e,t,s,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=a)}function Iv(e,t,s){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Ct(e,t,n.children,s),n=Le.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$f(e,s,t);else if(e.tag===19)$f(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Se(Le,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(s=t.child,a=null;s!==null;)e=s.alternate,e!==null&&vd(e)===null&&(a=s),s=s.sibling;s=a,s===null?(a=t.child,t.child=null):(a=s.sibling,s.sibling=null),bu(t,!1,a,s,i);break;case"backwards":for(s=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&vd(e)===null){t.child=a;break}e=a.sibling,a.sibling=s,s=a,a=e}bu(t,!0,s,null,i);break;case"together":bu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xs(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Yn|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(z(153));if(t.child!==null){for(e=t.child,s=Zs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Zs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function p5(e,t,s){switch(t.tag){case 3:Tv(t),Ya();break;case 5:tv(t);break;case 1:Bt(t.type)&&xd(t);break;case 4:ax(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;Se(gd,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Se(Le,Le.current&1),t.flags|=128,null):s&t.child.childLanes?_v(e,t,s):(Se(Le,Le.current&1),e=xs(e,t,s),e!==null?e.sibling:null);Se(Le,Le.current&1);break;case 19:if(n=(s&t.childLanes)!==0,e.flags&128){if(n)return Iv(e,t,s);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Se(Le,Le.current),n)break;return null;case 22:case 23:return t.lanes=0,Sv(e,t,s)}return xs(e,t,s)}var Pv,zm,Av,Ev;Pv=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};zm=function(){};Av=function(e,t,s,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Rn(Fr.current);var i=null;switch(s){case"input":a=um(e,a),n=um(e,n),i=[];break;case"select":a=Ue({},a,{value:void 0}),n=Ue({},n,{value:void 0}),i=[];break;case"textarea":a=xm(e,a),n=xm(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=md)}fm(s,n);var o;s=null;for(c in a)if(!n.hasOwnProperty(c)&&a.hasOwnProperty(c)&&a[c]!=null)if(c==="style"){var l=a[c];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(no.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var d=n[c];if(l=a!=null?a[c]:void 0,n.hasOwnProperty(c)&&d!==l&&(d!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||d&&d.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in d)d.hasOwnProperty(o)&&l[o]!==d[o]&&(s||(s={}),s[o]=d[o])}else s||(i||(i=[]),i.push(c,s)),s=d;else c==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,l=l?l.__html:void 0,d!=null&&l!==d&&(i=i||[]).push(c,d)):c==="children"?typeof d!="string"&&typeof d!="number"||(i=i||[]).push(c,""+d):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(no.hasOwnProperty(c)?(d!=null&&c==="onScroll"&&Ie("scroll",e),i||l===d||(i=[])):(i=i||[]).push(c,d))}s&&(i=i||[]).push("style",s);var c=i;(t.updateQueue=c)&&(t.flags|=4)}};Ev=function(e,t,s,n){s!==n&&(t.flags|=4)};function Ci(e,t){if(!Re)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,n=0;if(t)for(var a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)s|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=s,t}function f5(e,t,s){var n=t.pendingProps;switch(Xh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return Bt(t.type)&&hd(),ft(t),null;case 3:return n=t.stateNode,Xa(),Pe(Ut),Pe(wt),ox(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(yl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,vr!==null&&(Jm(vr),vr=null))),zm(e,t),ft(t),null;case 5:ix(t);var a=Rn(go.current);if(s=t.type,e!==null&&t.stateNode!=null)Av(e,t,s,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(z(166));return ft(t),null}if(e=Rn(Fr.current),yl(t)){n=t.stateNode,s=t.type;var i=t.memoizedProps;switch(n[Mr]=t,n[po]=i,e=(t.mode&1)!==0,s){case"dialog":Ie("cancel",n),Ie("close",n);break;case"iframe":case"object":case"embed":Ie("load",n);break;case"video":case"audio":for(a=0;a<Oi.length;a++)Ie(Oi[a],n);break;case"source":Ie("error",n);break;case"img":case"image":case"link":Ie("error",n),Ie("load",n);break;case"details":Ie("toggle",n);break;case"input":Yp(n,i),Ie("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",n);break;case"textarea":Xp(n,i),Ie("invalid",n)}fm(s,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&bl(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&bl(n.textContent,l,e),a=["children",""+l]):no.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ie("scroll",n)}switch(s){case"input":cl(n),Jp(n,i,!0);break;case"textarea":cl(n),Zp(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=md)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=iy(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(s,{is:n.is}):(e=o.createElement(s),s==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,s),e[Mr]=t,e[po]=n,Pv(e,t,!1,!1),t.stateNode=e;e:{switch(o=gm(s,n),s){case"dialog":Ie("cancel",e),Ie("close",e),a=n;break;case"iframe":case"object":case"embed":Ie("load",e),a=n;break;case"video":case"audio":for(a=0;a<Oi.length;a++)Ie(Oi[a],e);a=n;break;case"source":Ie("error",e),a=n;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),a=n;break;case"details":Ie("toggle",e),a=n;break;case"input":Yp(e,n),a=um(e,n),Ie("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Ue({},n,{value:void 0}),Ie("invalid",e);break;case"textarea":Xp(e,n),a=xm(e,n),Ie("invalid",e);break;default:a=n}fm(s,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var d=l[i];i==="style"?dy(e,d):i==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&oy(e,d)):i==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&ao(e,d):typeof d=="number"&&ao(e,""+d):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(no.hasOwnProperty(i)?d!=null&&i==="onScroll"&&Ie("scroll",e):d!=null&&Oh(e,i,d,o))}switch(s){case"input":cl(e),Jp(e,n,!1);break;case"textarea":cl(e),Zp(e);break;case"option":n.value!=null&&e.setAttribute("value",""+an(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Da(e,!!n.multiple,i,!1):n.defaultValue!=null&&Da(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=md)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)Ev(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(z(166));if(s=Rn(go.current),Rn(Fr.current),yl(t)){if(n=t.stateNode,s=t.memoizedProps,n[Mr]=t,(i=n.nodeValue!==s)&&(e=Ht,e!==null))switch(e.tag){case 3:bl(n.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&bl(n.nodeValue,s,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Mr]=t,t.stateNode=n}return ft(t),null;case 13:if(Pe(Le),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Re&&qt!==null&&t.mode&1&&!(t.flags&128))Yy(),Ya(),t.flags|=98560,i=!1;else if(i=yl(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(z(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Mr]=t}else Ya(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),i=!1}else vr!==null&&(Jm(vr),vr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Le.current&1?Je===0&&(Je=3):yx())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return Xa(),zm(e,t),e===null&&ho(t.stateNode.containerInfo),ft(t),null;case 10:return rx(t.type._context),ft(t),null;case 17:return Bt(t.type)&&hd(),ft(t),null;case 19:if(Pe(Le),i=t.memoizedState,i===null)return ft(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)Ci(i,!1);else{if(Je!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=vd(e),o!==null){for(t.flags|=128,Ci(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=s,s=t.child;s!==null;)i=s,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Se(Le,Le.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ve()>ei&&(t.flags|=128,n=!0,Ci(i,!1),t.lanes=4194304)}else{if(!n)if(e=vd(o),e!==null){if(t.flags|=128,n=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ci(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return ft(t),null}else 2*Ve()-i.renderingStartTime>ei&&s!==1073741824&&(t.flags|=128,n=!0,Ci(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(s=i.last,s!==null?s.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ve(),t.sibling=null,s=Le.current,Se(Le,n?s&1|2:s&1),t):(ft(t),null);case 22:case 23:return bx(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Wt&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(z(156,t.tag))}function g5(e,t){switch(Xh(t),t.tag){case 1:return Bt(t.type)&&hd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xa(),Pe(Ut),Pe(wt),ox(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ix(t),null;case 13:if(Pe(Le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(z(340));Ya()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Pe(Le),null;case 4:return Xa(),null;case 10:return rx(t.type._context),null;case 22:case 23:return bx(),null;case 24:return null;default:return null}}var kl=!1,bt=!1,b5=typeof WeakSet=="function"?WeakSet:Set,K=null;function Ia(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Be(e,t,n)}else s.current=null}function Wm(e,t,s){try{s()}catch(n){Be(e,t,n)}}var zf=!1;function y5(e,t){if(Tm=dd,e=Oy(),Yh(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,d=-1,c=0,u=0,m=e,h=null;t:for(;;){for(var x;m!==s||a!==0&&m.nodeType!==3||(l=o+a),m!==i||n!==0&&m.nodeType!==3||(d=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===e)break t;if(h===s&&++c===a&&(l=o),h===i&&++u===n&&(d=o),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}s=l===-1||d===-1?null:{start:l,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(_m={focusedElem:e,selectionRange:s},dd=!1,K=t;K!==null;)if(t=K,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,K=e;else for(;K!==null;){t=K;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,p=t.stateNode,b=p.getSnapshotBeforeUpdate(t.elementType===t.type?v:br(t.type,v),y);p.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){Be(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,K=e;break}K=t.return}return g=zf,zf=!1,g}function Hi(e,t,s){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Wm(t,s,i)}a=a.next}while(a!==n)}}function uc(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var n=s.create;s.destroy=n()}s=s.next}while(s!==t)}}function qm(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Mv(e){var t=e.alternate;t!==null&&(e.alternate=null,Mv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Mr],delete t[po],delete t[Am],delete t[t5],delete t[r5])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Rv(e){return e.tag===5||e.tag===3||e.tag===4}function Wf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Rv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hm(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=md));else if(n!==4&&(e=e.child,e!==null))for(Hm(e,t,s),e=e.sibling;e!==null;)Hm(e,t,s),e=e.sibling}function Gm(e,t,s){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Gm(e,t,s),e=e.sibling;e!==null;)Gm(e,t,s),e=e.sibling}var it=null,yr=!1;function _s(e,t,s){for(s=s.child;s!==null;)Lv(e,t,s),s=s.sibling}function Lv(e,t,s){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(sc,s)}catch{}switch(s.tag){case 5:bt||Ia(s,t);case 6:var n=it,a=yr;it=null,_s(e,t,s),it=n,yr=a,it!==null&&(yr?(e=it,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):it.removeChild(s.stateNode));break;case 18:it!==null&&(yr?(e=it,s=s.stateNode,e.nodeType===8?uu(e.parentNode,s):e.nodeType===1&&uu(e,s),co(e)):uu(it,s.stateNode));break;case 4:n=it,a=yr,it=s.stateNode.containerInfo,yr=!0,_s(e,t,s),it=n,yr=a;break;case 0:case 11:case 14:case 15:if(!bt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Wm(s,t,o),a=a.next}while(a!==n)}_s(e,t,s);break;case 1:if(!bt&&(Ia(s,t),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Be(s,t,l)}_s(e,t,s);break;case 21:_s(e,t,s);break;case 22:s.mode&1?(bt=(n=bt)||s.memoizedState!==null,_s(e,t,s),bt=n):_s(e,t,s);break;default:_s(e,t,s)}}function qf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new b5),t.forEach(function(n){var a=_5.bind(null,e,n);s.has(n)||(s.add(n),n.then(a,a))})}}function gr(e,t){var s=t.deletions;if(s!==null)for(var n=0;n<s.length;n++){var a=s[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:it=l.stateNode,yr=!1;break e;case 3:it=l.stateNode.containerInfo,yr=!0;break e;case 4:it=l.stateNode.containerInfo,yr=!0;break e}l=l.return}if(it===null)throw Error(z(160));Lv(i,o,a),it=null,yr=!1;var d=a.alternate;d!==null&&(d.return=null),a.return=null}catch(c){Be(a,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Dv(t,e),t=t.sibling}function Dv(e,t){var s=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gr(t,e),Ir(e),n&4){try{Hi(3,e,e.return),uc(3,e)}catch(v){Be(e,e.return,v)}try{Hi(5,e,e.return)}catch(v){Be(e,e.return,v)}}break;case 1:gr(t,e),Ir(e),n&512&&s!==null&&Ia(s,s.return);break;case 5:if(gr(t,e),Ir(e),n&512&&s!==null&&Ia(s,s.return),e.flags&32){var a=e.stateNode;try{ao(a,"")}catch(v){Be(e,e.return,v)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=s!==null?s.memoizedProps:i,l=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ny(a,i),gm(l,o);var c=gm(l,i);for(o=0;o<d.length;o+=2){var u=d[o],m=d[o+1];u==="style"?dy(a,m):u==="dangerouslySetInnerHTML"?oy(a,m):u==="children"?ao(a,m):Oh(a,u,m,c)}switch(l){case"input":mm(a,i);break;case"textarea":ay(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Da(a,!!i.multiple,x,!1):h!==!!i.multiple&&(i.defaultValue!=null?Da(a,!!i.multiple,i.defaultValue,!0):Da(a,!!i.multiple,i.multiple?[]:"",!1))}a[po]=i}catch(v){Be(e,e.return,v)}}break;case 6:if(gr(t,e),Ir(e),n&4){if(e.stateNode===null)throw Error(z(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(v){Be(e,e.return,v)}}break;case 3:if(gr(t,e),Ir(e),n&4&&s!==null&&s.memoizedState.isDehydrated)try{co(t.containerInfo)}catch(v){Be(e,e.return,v)}break;case 4:gr(t,e),Ir(e);break;case 13:gr(t,e),Ir(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(fx=Ve())),n&4&&qf(e);break;case 22:if(u=s!==null&&s.memoizedState!==null,e.mode&1?(bt=(c=bt)||u,gr(t,e),bt=c):gr(t,e),Ir(e),n&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!u&&e.mode&1)for(K=e,u=e.child;u!==null;){for(m=K=u;K!==null;){switch(h=K,x=h.child,h.tag){case 0:case 11:case 14:case 15:Hi(4,h,h.return);break;case 1:Ia(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,s=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(v){Be(n,s,v)}}break;case 5:Ia(h,h.return);break;case 22:if(h.memoizedState!==null){Gf(m);continue}}x!==null?(x.return=h,K=x):Gf(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,c?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,d=m.memoizedProps.style,o=d!=null&&d.hasOwnProperty("display")?d.display:null,l.style.display=ly("display",o))}catch(v){Be(e,e.return,v)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(v){Be(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gr(t,e),Ir(e),n&4&&qf(e);break;case 21:break;default:gr(t,e),Ir(e)}}function Ir(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Rv(s)){var n=s;break e}s=s.return}throw Error(z(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(ao(a,""),n.flags&=-33);var i=Wf(e);Gm(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Wf(e);Hm(e,l,o);break;default:throw Error(z(161))}}catch(d){Be(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function v5(e,t,s){K=e,Ov(e)}function Ov(e,t,s){for(var n=(e.mode&1)!==0;K!==null;){var a=K,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||kl;if(!o){var l=a.alternate,d=l!==null&&l.memoizedState!==null||bt;l=kl;var c=bt;if(kl=o,(bt=d)&&!c)for(K=a;K!==null;)o=K,d=o.child,o.tag===22&&o.memoizedState!==null?Qf(a):d!==null?(d.return=o,K=d):Qf(a);for(;i!==null;)K=i,Ov(i),i=i.sibling;K=a,kl=l,bt=c}Hf(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,K=i):Hf(e)}}function Hf(e){for(;K!==null;){var t=K;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:bt||uc(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!bt)if(s===null)n.componentDidMount();else{var a=t.elementType===t.type?s.memoizedProps:br(t.type,s.memoizedProps);n.componentDidUpdate(a,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Pf(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Pf(t,o,s)}break;case 5:var l=t.stateNode;if(s===null&&t.flags&4){s=l;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&co(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}bt||t.flags&512&&qm(t)}catch(h){Be(t,t.return,h)}}if(t===e){K=null;break}if(s=t.sibling,s!==null){s.return=t.return,K=s;break}K=t.return}}function Gf(e){for(;K!==null;){var t=K;if(t===e){K=null;break}var s=t.sibling;if(s!==null){s.return=t.return,K=s;break}K=t.return}}function Qf(e){for(;K!==null;){var t=K;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{uc(4,t)}catch(d){Be(t,s,d)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(d){Be(t,a,d)}}var i=t.return;try{qm(t)}catch(d){Be(t,i,d)}break;case 5:var o=t.return;try{qm(t)}catch(d){Be(t,o,d)}}}catch(d){Be(t,t.return,d)}if(t===e){K=null;break}var l=t.sibling;if(l!==null){l.return=t.return,K=l;break}K=t.return}}var w5=Math.ceil,jd=vs.ReactCurrentDispatcher,xx=vs.ReactCurrentOwner,cr=vs.ReactCurrentBatchConfig,be=0,st=null,Ge=null,ct=0,Wt=0,Pa=xn(0),Je=0,wo=null,Yn=0,mc=0,px=0,Gi=null,Lt=null,fx=0,ei=1/0,Yr=null,Nd=!1,Qm=null,Js=null,jl=!1,zs=null,Sd=0,Qi=0,Km=null,ql=-1,Hl=0;function It(){return be&6?Ve():ql!==-1?ql:ql=Ve()}function Xs(e){return e.mode&1?be&2&&ct!==0?ct&-ct:n5.transition!==null?(Hl===0&&(Hl=wy()),Hl):(e=we,e!==0||(e=window.event,e=e===void 0?16:_y(e.type)),e):1}function jr(e,t,s,n){if(50<Qi)throw Qi=0,Km=null,Error(z(185));Bo(e,s,n),(!(be&2)||e!==st)&&(e===st&&(!(be&2)&&(mc|=s),Je===4&&Fs(e,ct)),Vt(e,n),s===1&&be===0&&!(t.mode&1)&&(ei=Ve()+500,lc&&pn()))}function Vt(e,t){var s=e.callbackNode;n2(e,t);var n=ld(e,e===st?ct:0);if(n===0)s!==null&&rf(s),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(s!=null&&rf(s),t===1)e.tag===0?s5(Kf.bind(null,e)):Gy(Kf.bind(null,e)),Z2(function(){!(be&6)&&pn()}),s=null;else{switch(ky(n)){case 1:s=$h;break;case 4:s=yy;break;case 16:s=od;break;case 536870912:s=vy;break;default:s=od}s=qv(s,Fv.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Fv(e,t){if(ql=-1,Hl=0,be&6)throw Error(z(327));var s=e.callbackNode;if(Va()&&e.callbackNode!==s)return null;var n=ld(e,e===st?ct:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Cd(e,n);else{t=n;var a=be;be|=2;var i=Bv();(st!==e||ct!==t)&&(Yr=null,ei=Ve()+500,Bn(e,t));do try{N5();break}catch(l){Uv(e,l)}while(!0);tx(),jd.current=i,be=a,Ge!==null?t=0:(st=null,ct=0,t=Je)}if(t!==0){if(t===2&&(a=km(e),a!==0&&(n=a,t=Ym(e,a))),t===1)throw s=wo,Bn(e,0),Fs(e,n),Vt(e,Ve()),s;if(t===6)Fs(e,n);else{if(a=e.current.alternate,!(n&30)&&!k5(a)&&(t=Cd(e,n),t===2&&(i=km(e),i!==0&&(n=i,t=Ym(e,i))),t===1))throw s=wo,Bn(e,0),Fs(e,n),Vt(e,Ve()),s;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(z(345));case 2:Cn(e,Lt,Yr);break;case 3:if(Fs(e,n),(n&130023424)===n&&(t=fx+500-Ve(),10<t)){if(ld(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){It(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Pm(Cn.bind(null,e,Lt,Yr),t);break}Cn(e,Lt,Yr);break;case 4:if(Fs(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-kr(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Ve()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*w5(n/1960))-n,10<n){e.timeoutHandle=Pm(Cn.bind(null,e,Lt,Yr),n);break}Cn(e,Lt,Yr);break;case 5:Cn(e,Lt,Yr);break;default:throw Error(z(329))}}}return Vt(e,Ve()),e.callbackNode===s?Fv.bind(null,e):null}function Ym(e,t){var s=Gi;return e.current.memoizedState.isDehydrated&&(Bn(e,t).flags|=256),e=Cd(e,t),e!==2&&(t=Lt,Lt=s,t!==null&&Jm(t)),e}function Jm(e){Lt===null?Lt=e:Lt.push.apply(Lt,e)}function k5(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var a=s[n],i=a.getSnapshot;a=a.value;try{if(!Cr(i(),a))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fs(e,t){for(t&=~px,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-kr(t),n=1<<s;e[s]=-1,t&=~n}}function Kf(e){if(be&6)throw Error(z(327));Va();var t=ld(e,0);if(!(t&1))return Vt(e,Ve()),null;var s=Cd(e,t);if(e.tag!==0&&s===2){var n=km(e);n!==0&&(t=n,s=Ym(e,n))}if(s===1)throw s=wo,Bn(e,0),Fs(e,t),Vt(e,Ve()),s;if(s===6)throw Error(z(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cn(e,Lt,Yr),Vt(e,Ve()),null}function gx(e,t){var s=be;be|=1;try{return e(t)}finally{be=s,be===0&&(ei=Ve()+500,lc&&pn())}}function Jn(e){zs!==null&&zs.tag===0&&!(be&6)&&Va();var t=be;be|=1;var s=cr.transition,n=we;try{if(cr.transition=null,we=1,e)return e()}finally{we=n,cr.transition=s,be=t,!(be&6)&&pn()}}function bx(){Wt=Pa.current,Pe(Pa)}function Bn(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,X2(s)),Ge!==null)for(s=Ge.return;s!==null;){var n=s;switch(Xh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&hd();break;case 3:Xa(),Pe(Ut),Pe(wt),ox();break;case 5:ix(n);break;case 4:Xa();break;case 13:Pe(Le);break;case 19:Pe(Le);break;case 10:rx(n.type._context);break;case 22:case 23:bx()}s=s.return}if(st=e,Ge=e=Zs(e.current,null),ct=Wt=t,Je=0,wo=null,px=mc=Yn=0,Lt=Gi=null,Mn!==null){for(t=0;t<Mn.length;t++)if(s=Mn[t],n=s.interleaved,n!==null){s.interleaved=null;var a=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}s.pending=n}Mn=null}return e}function Uv(e,t){do{var s=Ge;try{if(tx(),$l.current=kd,wd){for(var n=Fe.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}wd=!1}if(Kn=0,tt=Qe=Fe=null,qi=!1,bo=0,xx.current=null,s===null||s.return===null){Je=1,wo=t,Ge=null;break}e:{var i=e,o=s.return,l=s,d=t;if(t=ct,l.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var c=d,u=l,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=Df(o);if(x!==null){x.flags&=-257,Of(x,o,l,i,t),x.mode&1&&Lf(i,c,t),t=x,d=c;var g=t.updateQueue;if(g===null){var v=new Set;v.add(d),t.updateQueue=v}else g.add(d);break e}else{if(!(t&1)){Lf(i,c,t),yx();break e}d=Error(z(426))}}else if(Re&&l.mode&1){var y=Df(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Of(y,o,l,i,t),Zh(Za(d,l));break e}}i=d=Za(d,l),Je!==4&&(Je=2),Gi===null?Gi=[i]:Gi.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=kv(i,d,t);If(i,p);break e;case 1:l=d;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Js===null||!Js.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=jv(i,l,t);If(i,k);break e}}i=i.return}while(i!==null)}$v(s)}catch(j){t=j,Ge===s&&s!==null&&(Ge=s=s.return);continue}break}while(!0)}function Bv(){var e=jd.current;return jd.current=kd,e===null?kd:e}function yx(){(Je===0||Je===3||Je===2)&&(Je=4),st===null||!(Yn&268435455)&&!(mc&268435455)||Fs(st,ct)}function Cd(e,t){var s=be;be|=2;var n=Bv();(st!==e||ct!==t)&&(Yr=null,Bn(e,t));do try{j5();break}catch(a){Uv(e,a)}while(!0);if(tx(),be=s,jd.current=n,Ge!==null)throw Error(z(261));return st=null,ct=0,Je}function j5(){for(;Ge!==null;)Vv(Ge)}function N5(){for(;Ge!==null&&!K1();)Vv(Ge)}function Vv(e){var t=Wv(e.alternate,e,Wt);e.memoizedProps=e.pendingProps,t===null?$v(e):Ge=t,xx.current=null}function $v(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=g5(s,t),s!==null){s.flags&=32767,Ge=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Ge=null;return}}else if(s=f5(s,t,Wt),s!==null){Ge=s;return}if(t=t.sibling,t!==null){Ge=t;return}Ge=t=e}while(t!==null);Je===0&&(Je=5)}function Cn(e,t,s){var n=we,a=cr.transition;try{cr.transition=null,we=1,S5(e,t,s,n)}finally{cr.transition=a,we=n}return null}function S5(e,t,s,n){do Va();while(zs!==null);if(be&6)throw Error(z(327));s=e.finishedWork;var a=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(z(177));e.callbackNode=null,e.callbackPriority=0;var i=s.lanes|s.childLanes;if(a2(e,i),e===st&&(Ge=st=null,ct=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||jl||(jl=!0,qv(od,function(){return Va(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=cr.transition,cr.transition=null;var o=we;we=1;var l=be;be|=4,xx.current=null,y5(e,s),Dv(s,e),q2(_m),dd=!!Tm,_m=Tm=null,e.current=s,v5(s),Y1(),be=l,we=o,cr.transition=i}else e.current=s;if(jl&&(jl=!1,zs=e,Sd=a),i=e.pendingLanes,i===0&&(Js=null),Z1(s.stateNode),Vt(e,Ve()),t!==null)for(n=e.onRecoverableError,s=0;s<t.length;s++)a=t[s],n(a.value,{componentStack:a.stack,digest:a.digest});if(Nd)throw Nd=!1,e=Qm,Qm=null,e;return Sd&1&&e.tag!==0&&Va(),i=e.pendingLanes,i&1?e===Km?Qi++:(Qi=0,Km=e):Qi=0,pn(),null}function Va(){if(zs!==null){var e=ky(Sd),t=cr.transition,s=we;try{if(cr.transition=null,we=16>e?16:e,zs===null)var n=!1;else{if(e=zs,zs=null,Sd=0,be&6)throw Error(z(331));var a=be;for(be|=4,K=e.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var d=0;d<l.length;d++){var c=l[d];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:Hi(8,u,i)}var m=u.child;if(m!==null)m.return=u,K=m;else for(;K!==null;){u=K;var h=u.sibling,x=u.return;if(Mv(u),u===c){K=null;break}if(h!==null){h.return=x,K=h;break}K=x}}}var g=i.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Hi(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,K=p;break e}K=i.return}}var b=e.current;for(K=b;K!==null;){o=K;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,K=w;else e:for(o=b;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uc(9,l)}}catch(j){Be(l,l.return,j)}if(l===o){K=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,K=k;break e}K=l.return}}if(be=a,pn(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(sc,e)}catch{}n=!0}return n}finally{we=s,cr.transition=t}}return!1}function Yf(e,t,s){t=Za(s,t),t=kv(e,t,1),e=Ys(e,t,1),t=It(),e!==null&&(Bo(e,1,t),Vt(e,t))}function Be(e,t,s){if(e.tag===3)Yf(e,e,s);else for(;t!==null;){if(t.tag===3){Yf(t,e,s);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Js===null||!Js.has(n))){e=Za(s,e),e=jv(t,e,1),t=Ys(t,e,1),e=It(),t!==null&&(Bo(t,1,e),Vt(t,e));break}}t=t.return}}function C5(e,t,s){var n=e.pingCache;n!==null&&n.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&s,st===e&&(ct&s)===s&&(Je===4||Je===3&&(ct&130023424)===ct&&500>Ve()-fx?Bn(e,0):px|=s),Vt(e,t)}function zv(e,t){t===0&&(e.mode&1?(t=hl,hl<<=1,!(hl&130023424)&&(hl=4194304)):t=1);var s=It();e=hs(e,t),e!==null&&(Bo(e,t,s),Vt(e,s))}function T5(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),zv(e,s)}function _5(e,t){var s=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(s=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(t),zv(e,s)}var Wv;Wv=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ut.current)Dt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Dt=!1,p5(e,t,s);Dt=!!(e.flags&131072)}else Dt=!1,Re&&t.flags&1048576&&Qy(t,fd,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Wl(e,t),e=t.pendingProps;var a=Ka(t,wt.current);Ba(t,s),a=dx(null,t,n,e,a,s);var i=cx();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bt(n)?(i=!0,xd(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,nx(t),a.updater=cc,t.stateNode=a,a._reactInternals=t,Om(t,n,e,s),t=Bm(null,t,n,!0,i,s)):(t.tag=0,Re&&i&&Jh(t),Ct(null,t,a,s),t=t.child),t;case 16:n=t.elementType;e:{switch(Wl(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=P5(n),e=br(n,e),a){case 0:t=Um(null,t,n,e,s);break e;case 1:t=Bf(null,t,n,e,s);break e;case 11:t=Ff(null,t,n,e,s);break e;case 14:t=Uf(null,t,n,br(n.type,e),s);break e}throw Error(z(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:br(n,a),Um(e,t,n,a,s);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:br(n,a),Bf(e,t,n,a,s);case 3:e:{if(Tv(t),e===null)throw Error(z(387));n=t.pendingProps,i=t.memoizedState,a=i.element,ev(e,t),yd(t,n,null,s);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=Za(Error(z(423)),t),t=Vf(e,t,n,s,a);break e}else if(n!==a){a=Za(Error(z(424)),t),t=Vf(e,t,n,s,a);break e}else for(qt=Ks(t.stateNode.containerInfo.firstChild),Ht=t,Re=!0,vr=null,s=Xy(t,null,n,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ya(),n===a){t=xs(e,t,s);break e}Ct(e,t,n,s)}t=t.child}return t;case 5:return tv(t),e===null&&Rm(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Im(n,a)?o=null:i!==null&&Im(n,i)&&(t.flags|=32),Cv(e,t),Ct(e,t,o,s),t.child;case 6:return e===null&&Rm(t),null;case 13:return _v(e,t,s);case 4:return ax(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Ja(t,null,n,s):Ct(e,t,n,s),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:br(n,a),Ff(e,t,n,a,s);case 7:return Ct(e,t,t.pendingProps,s),t.child;case 8:return Ct(e,t,t.pendingProps.children,s),t.child;case 12:return Ct(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Se(gd,n._currentValue),n._currentValue=o,i!==null)if(Cr(i.value,o)){if(i.children===a.children&&!Ut.current){t=xs(e,t,s);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var d=l.firstContext;d!==null;){if(d.context===n){if(i.tag===1){d=is(-1,s&-s),d.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}i.lanes|=s,d=i.alternate,d!==null&&(d.lanes|=s),Lm(i.return,s,t),l.lanes|=s;break}d=d.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Lm(o,s,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ct(e,t,a.children,s),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,Ba(t,s),a=mr(a),n=n(a),t.flags|=1,Ct(e,t,n,s),t.child;case 14:return n=t.type,a=br(n,t.pendingProps),a=br(n.type,a),Uf(e,t,n,a,s);case 15:return Nv(e,t,t.type,t.pendingProps,s);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:br(n,a),Wl(e,t),t.tag=1,Bt(n)?(e=!0,xd(t)):e=!1,Ba(t,s),wv(t,n,a),Om(t,n,a,s),Bm(null,t,n,!0,e,s);case 19:return Iv(e,t,s);case 22:return Sv(e,t,s)}throw Error(z(156,t.tag))};function qv(e,t){return by(e,t)}function I5(e,t,s,n){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dr(e,t,s,n){return new I5(e,t,s,n)}function vx(e){return e=e.prototype,!(!e||!e.isReactComponent)}function P5(e){if(typeof e=="function")return vx(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Uh)return 11;if(e===Bh)return 14}return 2}function Zs(e,t){var s=e.alternate;return s===null?(s=dr(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Gl(e,t,s,n,a,i){var o=2;if(n=e,typeof e=="function")vx(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case va:return Vn(s.children,a,i,t);case Fh:o=8,a|=8;break;case om:return e=dr(12,s,t,a|2),e.elementType=om,e.lanes=i,e;case lm:return e=dr(13,s,t,a),e.elementType=lm,e.lanes=i,e;case dm:return e=dr(19,s,t,a),e.elementType=dm,e.lanes=i,e;case ty:return hc(s,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Zb:o=10;break e;case ey:o=9;break e;case Uh:o=11;break e;case Bh:o=14;break e;case Rs:o=16,n=null;break e}throw Error(z(130,e==null?e:typeof e,""))}return t=dr(o,s,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function Vn(e,t,s,n){return e=dr(7,e,n,t),e.lanes=s,e}function hc(e,t,s,n){return e=dr(22,e,n,t),e.elementType=ty,e.lanes=s,e.stateNode={isHidden:!1},e}function yu(e,t,s){return e=dr(6,e,null,t),e.lanes=s,e}function vu(e,t,s){return t=dr(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function A5(e,t,s,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eu(0),this.expirationTimes=eu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eu(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function wx(e,t,s,n,a,i,o,l,d){return e=new A5(e,t,s,l,d),t===1?(t=1,i===!0&&(t|=8)):t=0,i=dr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},nx(i),e}function E5(e,t,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ya,key:n==null?null:""+n,children:e,containerInfo:t,implementation:s}}function Hv(e){if(!e)return on;e=e._reactInternals;e:{if(oa(e)!==e||e.tag!==1)throw Error(z(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(z(171))}if(e.tag===1){var s=e.type;if(Bt(s))return Hy(e,s,t)}return t}function Gv(e,t,s,n,a,i,o,l,d){return e=wx(s,n,!0,e,a,i,o,l,d),e.context=Hv(null),s=e.current,n=It(),a=Xs(s),i=is(n,a),i.callback=t??null,Ys(s,i,a),e.current.lanes=a,Bo(e,a,n),Vt(e,n),e}function xc(e,t,s,n){var a=t.current,i=It(),o=Xs(a);return s=Hv(s),t.context===null?t.context=s:t.pendingContext=s,t=is(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ys(a,t,o),e!==null&&(jr(e,a,o,i),Vl(e,a,o)),o}function Td(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function kx(e,t){Jf(e,t),(e=e.alternate)&&Jf(e,t)}function M5(){return null}var Qv=typeof reportError=="function"?reportError:function(e){console.error(e)};function jx(e){this._internalRoot=e}pc.prototype.render=jx.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(z(409));xc(e,t,null,null)};pc.prototype.unmount=jx.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jn(function(){xc(null,e,null,null)}),t[ms]=null}};function pc(e){this._internalRoot=e}pc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Sy();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Os.length&&t!==0&&t<Os[s].priority;s++);Os.splice(s,0,e),s===0&&Ty(e)}};function Nx(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function fc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xf(){}function R5(e,t,s,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var c=Td(o);i.call(c)}}var o=Gv(t,n,e,0,null,!1,!1,"",Xf);return e._reactRootContainer=o,e[ms]=o.current,ho(e.nodeType===8?e.parentNode:e),Jn(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var c=Td(d);l.call(c)}}var d=wx(e,0,!1,null,null,!1,!1,"",Xf);return e._reactRootContainer=d,e[ms]=d.current,ho(e.nodeType===8?e.parentNode:e),Jn(function(){xc(t,d,s,n)}),d}function gc(e,t,s,n,a){var i=s._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var d=Td(o);l.call(d)}}xc(t,o,e,a)}else o=R5(s,t,e,a,n);return Td(o)}jy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Di(t.pendingLanes);s!==0&&(zh(t,s|1),Vt(t,Ve()),!(be&6)&&(ei=Ve()+500,pn()))}break;case 13:Jn(function(){var n=hs(e,1);if(n!==null){var a=It();jr(n,e,1,a)}}),kx(e,1)}};Wh=function(e){if(e.tag===13){var t=hs(e,134217728);if(t!==null){var s=It();jr(t,e,134217728,s)}kx(e,134217728)}};Ny=function(e){if(e.tag===13){var t=Xs(e),s=hs(e,t);if(s!==null){var n=It();jr(s,e,t,n)}kx(e,t)}};Sy=function(){return we};Cy=function(e,t){var s=we;try{return we=e,t()}finally{we=s}};ym=function(e,t,s){switch(t){case"input":if(mm(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var n=s[t];if(n!==e&&n.form===e.form){var a=oc(n);if(!a)throw Error(z(90));sy(n),mm(n,a)}}}break;case"textarea":ay(e,s);break;case"select":t=s.value,t!=null&&Da(e,!!s.multiple,t,!1)}};my=gx;hy=Jn;var L5={usingClientEntryPoint:!1,Events:[$o,Na,oc,cy,uy,gx]},Ti={findFiberByHostInstance:En,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D5={bundleType:Ti.bundleType,version:Ti.version,rendererPackageName:Ti.rendererPackageName,rendererConfig:Ti.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:vs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=fy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ti.findFiberByHostInstance||M5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{sc=Nl.inject(D5),Or=Nl}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L5;Zt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nx(t))throw Error(z(200));return E5(e,t,null,s)};Zt.createRoot=function(e,t){if(!Nx(e))throw Error(z(299));var s=!1,n="",a=Qv;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=wx(e,1,!1,null,null,s,!1,n,a),e[ms]=t.current,ho(e.nodeType===8?e.parentNode:e),new jx(t)};Zt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(z(188)):(e=Object.keys(e).join(","),Error(z(268,e)));return e=fy(t),e=e===null?null:e.stateNode,e};Zt.flushSync=function(e){return Jn(e)};Zt.hydrate=function(e,t,s){if(!fc(t))throw Error(z(200));return gc(null,e,t,!0,s)};Zt.hydrateRoot=function(e,t,s){if(!Nx(e))throw Error(z(405));var n=s!=null&&s.hydratedSources||null,a=!1,i="",o=Qv;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=Gv(t,null,e,1,s??null,a,!1,i,o),e[ms]=t.current,ho(e),n)for(e=0;e<n.length;e++)s=n[e],a=s._getVersion,a=a(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,a]:t.mutableSourceEagerHydrationData.push(s,a);return new pc(t)};Zt.render=function(e,t,s){if(!fc(t))throw Error(z(200));return gc(null,e,t,!1,s)};Zt.unmountComponentAtNode=function(e){if(!fc(e))throw Error(z(40));return e._reactRootContainer?(Jn(function(){gc(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0):!1};Zt.unstable_batchedUpdates=gx;Zt.unstable_renderSubtreeIntoContainer=function(e,t,s,n){if(!fc(s))throw Error(z(200));if(e==null||e._reactInternals===void 0)throw Error(z(38));return gc(e,t,s,!1,n)};Zt.version="18.3.1-next-f1338f8080-20240426";function Kv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Kv)}catch(e){console.error(e)}}Kv(),Kb.exports=Zt;var Yv=Kb.exports,Zf=Yv;am.createRoot=Zf.createRoot,am.hydrateRoot=Zf.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},ko.apply(this,arguments)}var Ws;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ws||(Ws={}));const eg="popstate";function O5(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return Xm("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(n,a){return typeof a=="string"?a:_d(a)}return U5(t,s,null,e)}function ze(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Sx(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function F5(){return Math.random().toString(36).substr(2,8)}function tg(e,t){return{usr:e.state,key:e.key,idx:t}}function Xm(e,t,s,n){return s===void 0&&(s=null),ko({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ci(t):t,{state:s,key:t&&t.key||n||F5()})}function _d(e){let{pathname:t="/",search:s="",hash:n=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function ci(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function U5(e,t,s,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Ws.Pop,d=null,c=u();c==null&&(c=0,o.replaceState(ko({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function m(){l=Ws.Pop;let y=u(),p=y==null?null:y-c;c=y,d&&d({action:l,location:v.location,delta:p})}function h(y,p){l=Ws.Push;let b=Xm(v.location,y,p);c=u()+1;let w=tg(b,c),k=v.createHref(b);try{o.pushState(w,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;a.location.assign(k)}i&&d&&d({action:l,location:v.location,delta:1})}function x(y,p){l=Ws.Replace;let b=Xm(v.location,y,p);c=u();let w=tg(b,c),k=v.createHref(b);o.replaceState(w,"",k),i&&d&&d({action:l,location:v.location,delta:0})}function g(y){let p=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof y=="string"?y:_d(y);return b=b.replace(/ $/,"%20"),ze(p,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,p)}let v={get action(){return l},get location(){return e(a,o)},listen(y){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(eg,m),d=y,()=>{a.removeEventListener(eg,m),d=null}},createHref(y){return t(a,y)},createURL:g,encodeLocation(y){let p=g(y);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:x,go(y){return o.go(y)}};return v}var rg;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(rg||(rg={}));function B5(e,t,s){return s===void 0&&(s="/"),V5(e,t,s)}function V5(e,t,s,n){let a=typeof t=="string"?ci(t):t,i=Cx(a.pathname||"/",s);if(i==null)return null;let o=Jv(e);$5(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let c=eS(i);l=J5(o[d],c)}return l}function Jv(e,t,s,n){t===void 0&&(t=[]),s===void 0&&(s=[]),n===void 0&&(n="");let a=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(ze(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let c=en([n,d.relativePath]),u=s.concat(d);i.children&&i.children.length>0&&(ze(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),Jv(i.children,t,u,c)),!(i.path==null&&!i.index)&&t.push({path:c,score:K5(c,i.index),routesMeta:u})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let d of Xv(i.path))a(i,o,d)}),t}function Xv(e){let t=e.split("/");if(t.length===0)return[];let[s,...n]=t,a=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=Xv(n.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),a&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function $5(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Y5(t.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const z5=/^:[\w-]+$/,W5=3,q5=2,H5=1,G5=10,Q5=-2,sg=e=>e==="*";function K5(e,t){let s=e.split("/"),n=s.length;return s.some(sg)&&(n+=Q5),t&&(n+=q5),s.filter(a=>!sg(a)).reduce((a,i)=>a+(z5.test(i)?W5:i===""?H5:G5),n)}function Y5(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function J5(e,t,s){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let d=n[l],c=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",m=X5({path:d.relativePath,caseSensitive:d.caseSensitive,end:c},u),h=d.route;if(!m)return null;Object.assign(a,m.params),o.push({params:a,pathname:en([i,m.pathname]),pathnameBase:aS(en([i,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(i=en([i,m.pathnameBase]))}return o}function X5(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,n]=Z5(e.path,e.caseSensitive,e.end),a=t.match(s);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((c,u,m)=>{let{paramName:h,isOptional:x}=u;if(h==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const g=l[m];return x&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:e}}function Z5(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Sx(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(n.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function eS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Sx(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Cx(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,n=e.charAt(s);return n&&n!=="/"?null:e.slice(s)||"/"}const tS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rS=e=>tS.test(e);function sS(e,t){t===void 0&&(t="/");let{pathname:s,search:n="",hash:a=""}=typeof e=="string"?ci(e):e,i;if(s)if(rS(s))i=s;else{if(s.includes("//")){let o=s;s=s.replace(/\/\/+/g,"/"),Sx(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+s))}s.startsWith("/")?i=ng(s.substring(1),"/"):i=ng(s,t)}else i=t;return{pathname:i,search:iS(n),hash:oS(a)}}function ng(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function wu(e,t,s,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nS(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Tx(e,t){let s=nS(e);return t?s.map((n,a)=>a===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function _x(e,t,s,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=ci(e):(a=ko({},e),ze(!a.pathname||!a.pathname.includes("?"),wu("?","pathname","search",a)),ze(!a.pathname||!a.pathname.includes("#"),wu("#","pathname","hash",a)),ze(!a.search||!a.search.includes("#"),wu("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=s;else{let m=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}l=m>=0?t[m]:"/"}let d=sS(a,l),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(c||u)&&(d.pathname+="/"),d}const en=e=>e.join("/").replace(/\/\/+/g,"/"),aS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),iS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,oS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function lS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Zv=["post","put","patch","delete"];new Set(Zv);const dS=["get",...Zv];new Set(dS);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},jo.apply(this,arguments)}const Ix=f.createContext(null),cS=f.createContext(null),fn=f.createContext(null),bc=f.createContext(null),ws=f.createContext({outlet:null,matches:[],isDataRoute:!1}),ew=f.createContext(null);function uS(e,t){let{relative:s}=t===void 0?{}:t;ui()||ze(!1);let{basename:n,navigator:a}=f.useContext(fn),{hash:i,pathname:o,search:l}=rw(e,{relative:s}),d=o;return n!=="/"&&(d=o==="/"?n:en([n,o])),a.createHref({pathname:d,search:l,hash:i})}function ui(){return f.useContext(bc)!=null}function jt(){return ui()||ze(!1),f.useContext(bc).location}function tw(e){f.useContext(fn).static||f.useLayoutEffect(e)}function de(){let{isDataRoute:e}=f.useContext(ws);return e?NS():mS()}function mS(){ui()||ze(!1);let e=f.useContext(Ix),{basename:t,future:s,navigator:n}=f.useContext(fn),{matches:a}=f.useContext(ws),{pathname:i}=jt(),o=JSON.stringify(Tx(a,s.v7_relativeSplatPath)),l=f.useRef(!1);return tw(()=>{l.current=!0}),f.useCallback(function(c,u){if(u===void 0&&(u={}),!l.current)return;if(typeof c=="number"){n.go(c);return}let m=_x(c,JSON.parse(o),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:en([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,o,i,e])}function la(){let{matches:e}=f.useContext(ws),t=e[e.length-1];return t?t.params:{}}function rw(e,t){let{relative:s}=t===void 0?{}:t,{future:n}=f.useContext(fn),{matches:a}=f.useContext(ws),{pathname:i}=jt(),o=JSON.stringify(Tx(a,n.v7_relativeSplatPath));return f.useMemo(()=>_x(e,JSON.parse(o),i,s==="path"),[e,o,i,s])}function hS(e,t){return xS(e,t)}function xS(e,t,s,n){ui()||ze(!1);let{navigator:a}=f.useContext(fn),{matches:i}=f.useContext(ws),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let c=jt(),u;if(t){var m;let y=typeof t=="string"?ci(t):t;d==="/"||(m=y.pathname)!=null&&m.startsWith(d)||ze(!1),u=y}else u=c;let h=u.pathname||"/",x=h;if(d!=="/"){let y=d.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=B5(e,{pathname:x}),v=yS(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:en([d,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:en([d,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,s,n);return t&&v?f.createElement(bc.Provider,{value:{location:jo({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ws.Pop}},v):v}function pS(){let e=jS(),t=lS(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),s?f.createElement("pre",{style:a},s):null,null)}const fS=f.createElement(pS,null);class gS extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?f.createElement(ws.Provider,{value:this.props.routeContext},f.createElement(ew.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bS(e){let{routeContext:t,match:s,children:n}=e,a=f.useContext(Ix);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),f.createElement(ws.Provider,{value:t},n)}function yS(e,t,s,n){var a;if(t===void 0&&(t=[]),s===void 0&&(s=null),n===void 0&&(n=null),e==null){var i;if(!s)return null;if(s.errors)e=s.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let o=e,l=(a=s)==null?void 0:a.errors;if(l!=null){let u=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);u>=0||ze(!1),o=o.slice(0,Math.min(o.length,u+1))}let d=!1,c=-1;if(s&&n&&n.v7_partialHydration)for(let u=0;u<o.length;u++){let m=o[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=u),m.route.id){let{loaderData:h,errors:x}=s,g=m.route.loader&&h[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||g){d=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,m,h)=>{let x,g=!1,v=null,y=null;s&&(x=l&&m.route.id?l[m.route.id]:void 0,v=m.route.errorElement||fS,d&&(c<0&&h===0?(SS("route-fallback"),g=!0,y=null):c===h&&(g=!0,y=m.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,h+1)),b=()=>{let w;return x?w=v:g?w=y:m.route.Component?w=f.createElement(m.route.Component,null):m.route.element?w=m.route.element:w=u,f.createElement(bS,{match:m,routeContext:{outlet:u,matches:p,isDataRoute:s!=null},children:w})};return s&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?f.createElement(gS,{location:s.location,revalidation:s.revalidation,component:v,error:x,children:b(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):b()},null)}var sw=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(sw||{}),nw=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(nw||{});function vS(e){let t=f.useContext(Ix);return t||ze(!1),t}function wS(e){let t=f.useContext(cS);return t||ze(!1),t}function kS(e){let t=f.useContext(ws);return t||ze(!1),t}function aw(e){let t=kS(),s=t.matches[t.matches.length-1];return s.route.id||ze(!1),s.route.id}function jS(){var e;let t=f.useContext(ew),s=wS(),n=aw();return t!==void 0?t:(e=s.errors)==null?void 0:e[n]}function NS(){let{router:e}=vS(sw.UseNavigateStable),t=aw(nw.UseNavigateStable),s=f.useRef(!1);return tw(()=>{s.current=!0}),f.useCallback(function(a,i){i===void 0&&(i={}),s.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,jo({fromRouteId:t},i)))},[e,t])}const ag={};function SS(e,t,s){ag[e]||(ag[e]=!0)}function CS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Ee(e){let{to:t,replace:s,state:n,relative:a}=e;ui()||ze(!1);let{future:i,static:o}=f.useContext(fn),{matches:l}=f.useContext(ws),{pathname:d}=jt(),c=de(),u=_x(t,Tx(l,i.v7_relativeSplatPath),d,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>c(JSON.parse(m),{replace:s,state:n,relative:a}),[c,m,a,s,n]),null}function ee(e){ze(!1)}function TS(e){let{basename:t="/",children:s=null,location:n,navigationType:a=Ws.Pop,navigator:i,static:o=!1,future:l}=e;ui()&&ze(!1);let d=t.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:d,navigator:i,static:o,future:jo({v7_relativeSplatPath:!1},l)}),[d,l,i,o]);typeof n=="string"&&(n=ci(n));let{pathname:u="/",search:m="",hash:h="",state:x=null,key:g="default"}=n,v=f.useMemo(()=>{let y=Cx(u,d);return y==null?null:{location:{pathname:y,search:m,hash:h,state:x,key:g},navigationType:a}},[d,u,m,h,x,g,a]);return v==null?null:f.createElement(fn.Provider,{value:c},f.createElement(bc.Provider,{children:s,value:v}))}function ku(e){let{children:t,location:s}=e;return hS(Zm(t),s)}new Promise(()=>{});function Zm(e,t){t===void 0&&(t=[]);let s=[];return f.Children.forEach(e,(n,a)=>{if(!f.isValidElement(n))return;let i=[...t,a];if(n.type===f.Fragment){s.push.apply(s,Zm(n.props.children,i));return}n.type!==ee&&ze(!1),!n.props.index||!n.props.children||ze(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Zm(n.props.children,i)),s.push(o)}),s}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eh(){return eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e},eh.apply(this,arguments)}function _S(e,t){if(e==null)return{};var s={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(s[a]=e[a]);return s}function IS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function PS(e,t){return e.button===0&&(!t||t==="_self")&&!IS(e)}function th(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let n=e[s];return t.concat(Array.isArray(n)?n.map(a=>[s,a]):[[s,n]])},[]))}function AS(e,t){let s=th(e);return t&&t.forEach((n,a)=>{s.has(a)||t.getAll(a).forEach(i=>{s.append(a,i)})}),s}const ES=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],MS="6";try{window.__reactRouterVersion=MS}catch{}const RS="startTransition",ig=C1[RS];function LS(e){let{basename:t,children:s,future:n,window:a}=e,i=f.useRef();i.current==null&&(i.current=O5({window:a,v5Compat:!0}));let o=i.current,[l,d]=f.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},u=f.useCallback(m=>{c&&ig?ig(()=>d(m)):d(m)},[d,c]);return f.useLayoutEffect(()=>o.listen(u),[o,u]),f.useEffect(()=>CS(n),[n]),f.createElement(TS,{basename:t,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const DS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,te=f.forwardRef(function(t,s){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:d,to:c,preventScrollReset:u,viewTransition:m}=t,h=_S(t,ES),{basename:x}=f.useContext(fn),g,v=!1;if(typeof c=="string"&&OS.test(c)&&(g=c,DS))try{let w=new URL(window.location.href),k=c.startsWith("//")?new URL(w.protocol+c):new URL(c),j=Cx(k.pathname,x);k.origin===w.origin&&j!=null?c=j+k.search+k.hash:v=!0}catch{}let y=uS(c,{relative:a}),p=FS(c,{replace:o,state:l,target:d,preventScrollReset:u,relative:a,viewTransition:m});function b(w){n&&n(w),w.defaultPrevented||p(w)}return f.createElement("a",eh({},h,{href:g||y,onClick:v||i?n:b,ref:s,target:d}))});var og;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(og||(og={}));var lg;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(lg||(lg={}));function FS(e,t){let{target:s,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,d=de(),c=jt(),u=rw(e,{relative:o});return f.useCallback(m=>{if(PS(m,s)){m.preventDefault();let h=n!==void 0?n:_d(c)===_d(u);d(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[c,d,u,n,a,s,e,i,o,l])}function Px(e){let t=f.useRef(th(e)),s=f.useRef(!1),n=jt(),a=f.useMemo(()=>AS(n.search,s.current?null:t.current),[n.search]),i=de(),o=f.useCallback((l,d)=>{const c=th(typeof l=="function"?l(a):l);s.current=!0,i("?"+c,d)},[i,a]);return[a,o]}var Rr=[],ir=[],US=Uint8Array,ju="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var fa=0,BS=ju.length;fa<BS;++fa)Rr[fa]=ju[fa],ir[ju.charCodeAt(fa)]=fa;ir[45]=62;ir[95]=63;function VS(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=e.indexOf("=");s===-1&&(s=t);var n=s===t?0:4-s%4;return[s,n]}function $S(e,t,s){return(t+s)*3/4-s}function No(e){var t,s=VS(e),n=s[0],a=s[1],i=new US($S(e,n,a)),o=0,l=a>0?n-4:n,d;for(d=0;d<l;d+=4)t=ir[e.charCodeAt(d)]<<18|ir[e.charCodeAt(d+1)]<<12|ir[e.charCodeAt(d+2)]<<6|ir[e.charCodeAt(d+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=ir[e.charCodeAt(d)]<<2|ir[e.charCodeAt(d+1)]>>4,i[o++]=t&255),a===1&&(t=ir[e.charCodeAt(d)]<<10|ir[e.charCodeAt(d+1)]<<4|ir[e.charCodeAt(d+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function zS(e){return Rr[e>>18&63]+Rr[e>>12&63]+Rr[e>>6&63]+Rr[e&63]}function WS(e,t,s){for(var n,a=[],i=t;i<s;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(zS(n));return a.join("")}function So(e){for(var t,s=e.length,n=s%3,a=[],i=16383,o=0,l=s-n;o<l;o+=i)a.push(WS(e,o,o+i>l?l:o+i));return n===1?(t=e[s-1],a.push(Rr[t>>2]+Rr[t<<4&63]+"==")):n===2&&(t=(e[s-2]<<8)+e[s-1],a.push(Rr[t>>10]+Rr[t>>4&63]+Rr[t<<2&63]+"=")),a.join("")}function Zr(e){if(e===void 0)return{};if(!iw(e))throw new Error(`The arguments to a Convex function must be an object. Received: ${e}`);return e}function qS(e){if(typeof e>"u")throw new Error("Client created with undefined deployment address. If you used an environment variable, check that it's set.");if(typeof e!="string")throw new Error(`Invalid deployment address: found ${e}".`);if(!(e.startsWith("http:")||e.startsWith("https:")))throw new Error(`Invalid deployment address: Must start with "https://" or "http://". Found "${e}".`);try{new URL(e)}catch{throw new Error(`Invalid deployment address: "${e}" is not a valid URL. If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}if(e.endsWith(".convex.site"))throw new Error(`Invalid deployment address: "${e}" ends with .convex.site, which is used for HTTP Actions. Convex deployment URLs typically end with .convex.cloud? If you believe this URL is correct, use the \`skipConvexDeploymentUrlCheck\` option to bypass this.`)}function iw(e){var a;const t=typeof e=="object",s=Object.getPrototypeOf(e),n=s===null||s===Object.prototype||((a=s==null?void 0:s.constructor)==null?void 0:a.name)==="Object";return t&&n}const ow=!0,ti=BigInt("-9223372036854775808"),Ax=BigInt("9223372036854775807"),rh=BigInt("0"),HS=BigInt("8"),GS=BigInt("256");function lw(e){return Number.isNaN(e)||!Number.isFinite(e)||Object.is(e,-0)}function QS(e){e<rh&&(e-=ti+ti);let t=e.toString(16);t.length%2===1&&(t="0"+t);const s=new Uint8Array(new ArrayBuffer(8));let n=0;for(const a of t.match(/.{2}/g).reverse())s.set([parseInt(a,16)],n++),e>>=HS;return So(s)}function KS(e){const t=No(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);let s=rh,n=rh;for(const a of t)s+=BigInt(a)*GS**n,n++;return s>Ax&&(s+=ti+ti),s}function YS(e){if(e<ti||Ax<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);const t=new ArrayBuffer(8);return new DataView(t).setBigInt64(0,e,!0),So(new Uint8Array(t))}function JS(e){const t=No(e);if(t.byteLength!==8)throw new Error(`Received ${t.byteLength} bytes, expected 8 for $integer`);return new DataView(t.buffer).getBigInt64(0,!0)}const XS=DataView.prototype.setBigInt64?YS:QS,ZS=DataView.prototype.getBigInt64?JS:KS,dg=1024;function dw(e){if(e.length>dg)throw new Error(`Field name ${e} exceeds maximum field name length ${dg}.`);if(e.startsWith("$"))throw new Error(`Field name ${e} starts with a '$', which is reserved.`);for(let t=0;t<e.length;t+=1){const s=e.charCodeAt(t);if(s<32||s>=127)throw new Error(`Field name ${e} has invalid character '${e[t]}': Field names can only contain non-control ASCII characters`)}}function ri(e){if(e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string")return e;if(Array.isArray(e))return e.map(n=>ri(n));if(typeof e!="object")throw new Error(`Unexpected type of ${e}`);const t=Object.entries(e);if(t.length===1){const n=t[0][0];if(n==="$bytes"){if(typeof e.$bytes!="string")throw new Error(`Malformed $bytes field on ${e}`);return No(e.$bytes).buffer}if(n==="$integer"){if(typeof e.$integer!="string")throw new Error(`Malformed $integer field on ${e}`);return ZS(e.$integer)}if(n==="$float"){if(typeof e.$float!="string")throw new Error(`Malformed $float field on ${e}`);const a=No(e.$float);if(a.byteLength!==8)throw new Error(`Received ${a.byteLength} bytes, expected 8 for $float`);const o=new DataView(a.buffer).getFloat64(0,ow);if(!lw(o))throw new Error(`Float ${o} should be encoded as a number`);return o}if(n==="$set")throw new Error("Received a Set which is no longer supported as a Convex type.");if(n==="$map")throw new Error("Received a Map which is no longer supported as a Convex type.")}const s={};for(const[n,a]of Object.entries(e))dw(n),s[n]=ri(a);return s}const cg=16384;function Ki(e){const t=JSON.stringify(e,(s,n)=>n===void 0?"undefined":typeof n=="bigint"?`${n.toString()}n`:n);if(t.length>cg){const s="[...truncated]";let n=cg-s.length;const a=t.codePointAt(n-1);return a!==void 0&&a>65535&&(n-=1),t.substring(0,n)+s}return t}function sh(e,t,s,n){var o;if(e===void 0){const l=s&&` (present at path ${s} in original object ${Ki(t)})`;throw new Error(`undefined is not a valid Convex value${l}. To learn about Convex's supported types, see https://docs.convex.dev/using/types.`)}if(e===null)return e;if(typeof e=="bigint"){if(e<ti||Ax<e)throw new Error(`BigInt ${e} does not fit into a 64-bit signed integer.`);return{$integer:XS(e)}}if(typeof e=="number")if(lw(e)){const l=new ArrayBuffer(8);return new DataView(l).setFloat64(0,e,ow),{$float:So(new Uint8Array(l))}}else return e;if(typeof e=="boolean"||typeof e=="string")return e;if(e instanceof ArrayBuffer)return{$bytes:So(new Uint8Array(e))};if(Array.isArray(e))return e.map((l,d)=>sh(l,t,s+`[${d}]`));if(e instanceof Set)throw new Error(Nu(s,"Set",[...e],t));if(e instanceof Map)throw new Error(Nu(s,"Map",[...e],t));if(!iw(e)){const l=(o=e==null?void 0:e.constructor)==null?void 0:o.name,d=l?`${l} `:"";throw new Error(Nu(s,d,e,t))}const a={},i=Object.entries(e);i.sort(([l,d],[c,u])=>l===c?0:l<c?-1:1);for(const[l,d]of i)d!==void 0&&(dw(l),a[l]=sh(d,t,s+`.${l}`));return a}function Nu(e,t,s,n){return e?`${t}${Ki(s)} is not a supported Convex type (present at path ${e} in original object ${Ki(n)}). To learn about Convex's supported types, see https://docs.convex.dev/using/types.`:`${t}${Ki(s)} is not a supported Convex type.`}function Gt(e){return sh(e,e,"")}var e4=Object.defineProperty,t4=(e,t,s)=>t in e?e4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Su=(e,t,s)=>t4(e,typeof t!="symbol"?t+"":t,s),ug,mg;const r4=Symbol.for("ConvexError");class Id extends(mg=Error,ug=r4,mg){constructor(t){super(typeof t=="string"?t:Ki(t)),Su(this,"name","ConvexError"),Su(this,"data"),Su(this,ug,!0),this.data=t}}const cw=()=>Array.from({length:4},()=>0);cw();cw();const hg="1.30.0";var s4=Object.defineProperty,n4=(e,t,s)=>t in e?s4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,xg=(e,t,s)=>n4(e,typeof t!="symbol"?t+"":t,s);const a4="color:rgb(0, 145, 255)";function uw(e){switch(e){case"query":return"Q";case"mutation":return"M";case"action":return"A";case"any":return"?"}}class mw{constructor(t){xg(this,"_onLogLineFuncs"),xg(this,"_verbose"),this._onLogLineFuncs={},this._verbose=t.verbose}addLogLineListener(t){let s=Math.random().toString(36).substring(2,15);for(let n=0;n<10&&this._onLogLineFuncs[s]!==void 0;n++)s=Math.random().toString(36).substring(2,15);return this._onLogLineFuncs[s]=t,()=>{delete this._onLogLineFuncs[s]}}logVerbose(...t){if(this._verbose)for(const s of Object.values(this._onLogLineFuncs))s("debug",`${new Date().toISOString()}`,...t)}log(...t){for(const s of Object.values(this._onLogLineFuncs))s("info",...t)}warn(...t){for(const s of Object.values(this._onLogLineFuncs))s("warn",...t)}error(...t){for(const s of Object.values(this._onLogLineFuncs))s("error",...t)}}function hw(e){const t=new mw(e);return t.addLogLineListener((s,...n)=>{switch(s){case"debug":console.debug(...n);break;case"info":console.log(...n);break;case"warn":console.warn(...n);break;case"error":console.error(...n);break;default:console.log(...n)}}),t}function xw(e){return new mw(e)}function Pd(e,t,s,n,a){const i=uw(s);if(typeof a=="object"&&(a=`ConvexError ${JSON.stringify(a.errorData,null,2)}`),t==="info"){const o=a.match(/^\[.*?\] /);if(o===null){e.error(`[CONVEX ${i}(${n})] Could not parse console.log`);return}const l=a.slice(1,o[0].length-2),d=a.slice(o[0].length);e.log(`%c[CONVEX ${i}(${n})] [${l}]`,a4,d)}else e.error(`[CONVEX ${i}(${n})] ${a}`)}function i4(e,t){const s=`[CONVEX FATAL ERROR] ${t}`;return e.error(s),new Error(s)}function Aa(e,t,s){return`[CONVEX ${uw(e)}(${t})] ${s.errorMessage}
  Called by client`}function nh(e,t){return t.data=e.errorData,t}function Xn(e){const t=e.split(":");let s,n;return t.length===1?(s=t[0],n="default"):(s=t.slice(0,t.length-1).join(":"),n=t[t.length-1]),s.endsWith(".js")&&(s=s.slice(0,-3)),`${s}:${n}`}function $n(e,t){return JSON.stringify({udfPath:Xn(e),args:Gt(t)})}function pg(e,t,s){const{initialNumItems:n,id:a}=s;return JSON.stringify({type:"paginated",udfPath:Xn(e),args:Gt(t),options:Gt({initialNumItems:n,id:a})})}var o4=Object.defineProperty,l4=(e,t,s)=>t in e?o4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Pr=(e,t,s)=>l4(e,typeof t!="symbol"?t+"":t,s);class d4{constructor(){Pr(this,"nextQueryId"),Pr(this,"querySetVersion"),Pr(this,"querySet"),Pr(this,"queryIdToToken"),Pr(this,"identityVersion"),Pr(this,"auth"),Pr(this,"outstandingQueriesOlderThanRestart"),Pr(this,"outstandingAuthOlderThanRestart"),Pr(this,"paused"),Pr(this,"pendingQuerySetModifications"),this.nextQueryId=0,this.querySetVersion=0,this.identityVersion=0,this.querySet=new Map,this.queryIdToToken=new Map,this.outstandingQueriesOlderThanRestart=new Set,this.outstandingAuthOlderThanRestart=!1,this.paused=!1,this.pendingQuerySetModifications=new Map}hasSyncedPastLastReconnect(){return this.outstandingQueriesOlderThanRestart.size===0&&!this.outstandingAuthOlderThanRestart}markAuthCompletion(){this.outstandingAuthOlderThanRestart=!1}subscribe(t,s,n,a){const i=Xn(t),o=$n(i,s),l=this.querySet.get(o);if(l!==void 0)return l.numSubscribers+=1,{queryToken:o,modification:null,unsubscribe:()=>this.removeSubscriber(o)};{const d=this.nextQueryId++,c={id:d,canonicalizedUdfPath:i,args:s,numSubscribers:1,journal:n,componentPath:a};this.querySet.set(o,c),this.queryIdToToken.set(d,o);const u=this.querySetVersion,m=this.querySetVersion+1,h={type:"Add",queryId:d,udfPath:i,args:[Gt(s)],journal:n,componentPath:a};return this.paused?this.pendingQuerySetModifications.set(d,h):this.querySetVersion=m,{queryToken:o,modification:{type:"ModifyQuerySet",baseVersion:u,newVersion:m,modifications:[h]},unsubscribe:()=>this.removeSubscriber(o)}}}transition(t){for(const s of t.modifications)switch(s.type){case"QueryUpdated":case"QueryFailed":{this.outstandingQueriesOlderThanRestart.delete(s.queryId);const n=s.journal;if(n!==void 0){const a=this.queryIdToToken.get(s.queryId);a!==void 0&&(this.querySet.get(a).journal=n)}break}case"QueryRemoved":{this.outstandingQueriesOlderThanRestart.delete(s.queryId);break}default:throw new Error(`Invalid modification ${s.type}`)}}queryId(t,s){const n=Xn(t),a=$n(n,s),i=this.querySet.get(a);return i!==void 0?i.id:null}isCurrentOrNewerAuthVersion(t){return t>=this.identityVersion}getAuth(){return this.auth}setAuth(t){this.auth={tokenType:"User",value:t};const s=this.identityVersion;return this.paused||(this.identityVersion=s+1),{type:"Authenticate",baseVersion:s,...this.auth}}setAdminAuth(t,s){const n={tokenType:"Admin",value:t,impersonating:s};this.auth=n;const a=this.identityVersion;return this.paused||(this.identityVersion=a+1),{type:"Authenticate",baseVersion:a,...n}}clearAuth(){this.auth=void 0,this.markAuthCompletion();const t=this.identityVersion;return this.paused||(this.identityVersion=t+1),{type:"Authenticate",tokenType:"None",baseVersion:t}}hasAuth(){return!!this.auth}isNewAuth(t){var s;return((s=this.auth)==null?void 0:s.value)!==t}queryPath(t){const s=this.queryIdToToken.get(t);return s?this.querySet.get(s).canonicalizedUdfPath:null}queryArgs(t){const s=this.queryIdToToken.get(t);return s?this.querySet.get(s).args:null}queryToken(t){return this.queryIdToToken.get(t)??null}queryJournal(t){var s;return(s=this.querySet.get(t))==null?void 0:s.journal}restart(t){this.unpause(),this.outstandingQueriesOlderThanRestart.clear();const s=[];for(const i of this.querySet.values()){const o={type:"Add",queryId:i.id,udfPath:i.canonicalizedUdfPath,args:[Gt(i.args)],journal:i.journal,componentPath:i.componentPath};s.push(o),t.has(i.id)||this.outstandingQueriesOlderThanRestart.add(i.id)}this.querySetVersion=1;const n={type:"ModifyQuerySet",baseVersion:0,newVersion:1,modifications:s};if(!this.auth)return this.identityVersion=0,[n,void 0];this.outstandingAuthOlderThanRestart=!0;const a={type:"Authenticate",baseVersion:0,...this.auth};return this.identityVersion=1,[n,a]}pause(){this.paused=!0}resume(){const t=this.pendingQuerySetModifications.size>0?{type:"ModifyQuerySet",baseVersion:this.querySetVersion,newVersion:++this.querySetVersion,modifications:Array.from(this.pendingQuerySetModifications.values())}:void 0,s=this.auth!==void 0?{type:"Authenticate",baseVersion:this.identityVersion++,...this.auth}:void 0;return this.unpause(),[t,s]}unpause(){this.paused=!1,this.pendingQuerySetModifications.clear()}removeSubscriber(t){const s=this.querySet.get(t);if(s.numSubscribers>1)return s.numSubscribers-=1,null;{this.querySet.delete(t),this.queryIdToToken.delete(s.id),this.outstandingQueriesOlderThanRestart.delete(s.id);const n=this.querySetVersion,a=this.querySetVersion+1,i={type:"Remove",queryId:s.id};return this.paused?this.pendingQuerySetModifications.has(s.id)?this.pendingQuerySetModifications.delete(s.id):this.pendingQuerySetModifications.set(s.id,i):this.querySetVersion=a,{type:"ModifyQuerySet",baseVersion:n,newVersion:a,modifications:[i]}}}}var c4=Object.defineProperty,u4=(e,t,s)=>t in e?c4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Sl=(e,t,s)=>u4(e,typeof t!="symbol"?t+"":t,s);class m4{constructor(t,s){this.logger=t,this.markConnectionStateDirty=s,Sl(this,"inflightRequests"),Sl(this,"requestsOlderThanRestart"),Sl(this,"inflightMutationsCount",0),Sl(this,"inflightActionsCount",0),this.inflightRequests=new Map,this.requestsOlderThanRestart=new Set}request(t,s){const n=new Promise(a=>{const i=s?"Requested":"NotSent";this.inflightRequests.set(t.requestId,{message:t,status:{status:i,requestedAt:new Date,onResult:a}}),t.type==="Mutation"?this.inflightMutationsCount++:t.type==="Action"&&this.inflightActionsCount++});return this.markConnectionStateDirty(),n}onResponse(t){const s=this.inflightRequests.get(t.requestId);if(s===void 0||s.status.status==="Completed")return null;const n=s.message.type==="Mutation"?"mutation":"action",a=s.message.udfPath;for(const d of t.logLines)Pd(this.logger,"info",n,a,d);const i=s.status;let o,l;if(t.success)o={success:!0,logLines:t.logLines,value:ri(t.result)},l=()=>i.onResult(o);else{const d=t.result,{errorData:c}=t;Pd(this.logger,"error",n,a,d),o={success:!1,errorMessage:d,errorData:c!==void 0?ri(c):void 0,logLines:t.logLines},l=()=>i.onResult(o)}return t.type==="ActionResponse"||!t.success?(l(),this.inflightRequests.delete(t.requestId),this.requestsOlderThanRestart.delete(t.requestId),s.message.type==="Action"?this.inflightActionsCount--:s.message.type==="Mutation"&&this.inflightMutationsCount--,this.markConnectionStateDirty(),{requestId:t.requestId,result:o}):(s.status={status:"Completed",result:o,ts:t.ts,onResolve:l},null)}removeCompleted(t){const s=new Map;for(const[n,a]of this.inflightRequests.entries()){const i=a.status;i.status==="Completed"&&i.ts.lessThanOrEqual(t)&&(i.onResolve(),s.set(n,i.result),a.message.type==="Mutation"?this.inflightMutationsCount--:a.message.type==="Action"&&this.inflightActionsCount--,this.inflightRequests.delete(n),this.requestsOlderThanRestart.delete(n))}return s.size>0&&this.markConnectionStateDirty(),s}restart(){this.requestsOlderThanRestart=new Set(this.inflightRequests.keys());const t=[];for(const[s,n]of this.inflightRequests){if(n.status.status==="NotSent"){n.status.status="Requested",t.push(n.message);continue}if(n.message.type==="Mutation")t.push(n.message);else if(n.message.type==="Action"){if(this.inflightRequests.delete(s),this.requestsOlderThanRestart.delete(s),this.inflightActionsCount--,n.status.status==="Completed")throw new Error("Action should never be in 'Completed' state");n.status.onResult({success:!1,errorMessage:"Connection lost while action was in flight",logLines:[]})}}return this.markConnectionStateDirty(),t}resume(){const t=[];for(const[,s]of this.inflightRequests)if(s.status.status==="NotSent"){s.status.status="Requested",t.push(s.message);continue}return t}hasIncompleteRequests(){for(const t of this.inflightRequests.values())if(t.status.status==="Requested")return!0;return!1}hasInflightRequests(){return this.inflightRequests.size>0}hasSyncedPastLastReconnect(){return this.requestsOlderThanRestart.size===0}timeOfOldestInflightRequest(){if(this.inflightRequests.size===0)return null;let t=Date.now();for(const s of this.inflightRequests.values())s.status.status!=="Completed"&&s.status.requestedAt.getTime()<t&&(t=s.status.requestedAt.getTime());return new Date(t)}inflightMutations(){return this.inflightMutationsCount}inflightActions(){return this.inflightActionsCount}}const Co=Symbol.for("functionName"),pw=Symbol.for("toReferencePath");function h4(e){return e[pw]??null}function x4(e){return e.startsWith("function://")}function p4(e){let t;if(typeof e=="string")x4(e)?t={functionHandle:e}:t={name:e};else if(e[Co])t={name:e[Co]};else{const s=h4(e);if(!s)throw new Error(`${e} is not a functionReference`);t={reference:s}}return t}function rt(e){const t=p4(e);if(t.name===void 0)throw t.functionHandle!==void 0?new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received function handle ${t.functionHandle}`):t.reference!==void 0?new Error(`Expected function reference in the current component like "api.file.func" or "internal.file.func", but received reference ${t.reference}`):new Error(`Expected function reference like "api.file.func" or "internal.file.func", but received ${JSON.stringify(t)}`);if(typeof e=="string")return e;const s=e[Co];if(!s)throw new Error(`${e} is not a functionReference`);return s}function Ex(e){return{[Co]:e}}function fw(e=[]){const t={get(s,n){if(typeof n=="string"){const a=[...e,n];return fw(a)}else if(n===Co){if(e.length<2){const o=["api",...e].join(".");throw new Error(`API path is expected to be of the form \`api.moduleName.functionName\`. Found: \`${o}\``)}const a=e.slice(0,-1).join("/"),i=e[e.length-1];return i==="default"?a:a+":"+i}else return n===Symbol.toStringTag?"FunctionReference":void 0}};return new Proxy({},t)}const f4=fw();var g4=Object.defineProperty,b4=(e,t,s)=>t in e?g4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Ad=(e,t,s)=>b4(e,typeof t!="symbol"?t+"":t,s);class To{constructor(t){Ad(this,"queryResults"),Ad(this,"modifiedQueries"),this.queryResults=t,this.modifiedQueries=[]}getQuery(t,...s){const n=Zr(s[0]),a=rt(t),i=this.queryResults.get($n(a,n));if(i!==void 0)return To.queryValue(i.result)}getAllQueries(t){const s=[],n=rt(t);for(const a of this.queryResults.values())a.udfPath===Xn(n)&&s.push({args:a.args,value:To.queryValue(a.result)});return s}setQuery(t,s,n){const a=Zr(s),i=rt(t),o=$n(i,a);let l;n===void 0?l=void 0:l={success:!0,value:n,logLines:[]};const d={udfPath:i,args:a,result:l};this.queryResults.set(o,d),this.modifiedQueries.push(o)}static queryValue(t){if(t!==void 0)return t.success?t.value:void 0}}class y4{constructor(){Ad(this,"queryResults"),Ad(this,"optimisticUpdates"),this.queryResults=new Map,this.optimisticUpdates=[]}ingestQueryResultsFromServer(t,s){this.optimisticUpdates=this.optimisticUpdates.filter(o=>!s.has(o.mutationId));const n=this.queryResults;this.queryResults=new Map(t);const a=new To(this.queryResults);for(const o of this.optimisticUpdates)o.update(a);const i=[];for(const[o,l]of this.queryResults){const d=n.get(o);(d===void 0||d.result!==l.result)&&i.push(o)}return i}applyOptimisticUpdate(t,s){this.optimisticUpdates.push({update:t,mutationId:s});const n=new To(this.queryResults);return t(n),n.modifiedQueries}rawQueryResult(t){const s=this.queryResults.get(t);if(s!==void 0)return s.result}queryResult(t){const s=this.queryResults.get(t);if(s===void 0)return;const n=s.result;if(n!==void 0){if(n.success)return n.value;throw n.errorData!==void 0?nh(n,new Id(Aa("query",s.udfPath,n))):new Error(Aa("query",s.udfPath,n))}}hasQueryResult(t){return this.queryResults.get(t)!==void 0}queryLogs(t){var n;const s=this.queryResults.get(t);return(n=s==null?void 0:s.result)==null?void 0:n.logLines}}var v4=Object.defineProperty,w4=(e,t,s)=>t in e?v4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Cu=(e,t,s)=>w4(e,typeof t!="symbol"?t+"":t,s);class Rt{constructor(t,s){Cu(this,"low"),Cu(this,"high"),Cu(this,"__isUnsignedLong__"),this.low=t|0,this.high=s|0,this.__isUnsignedLong__=!0}static isLong(t){return(t&&t.__isUnsignedLong__)===!0}static fromBytesLE(t){return new Rt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24)}toBytesLE(){const t=this.high,s=this.low;return[s&255,s>>>8&255,s>>>16&255,s>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]}static fromNumber(t){return isNaN(t)||t<0?fg:t>=k4?j4:new Rt(t%Yi|0,t/Yi|0)}toString(){return(BigInt(this.high)*BigInt(Yi)+BigInt(this.low)).toString()}equals(t){return Rt.isLong(t)||(t=Rt.fromValue(t)),this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low}notEquals(t){return!this.equals(t)}comp(t){return Rt.isLong(t)||(t=Rt.fromValue(t)),this.equals(t)?0:t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1}lessThanOrEqual(t){return this.comp(t)<=0}static fromValue(t){return typeof t=="number"?Rt.fromNumber(t):new Rt(t.low,t.high)}}const fg=new Rt(0,0),gg=65536,Yi=gg*gg,k4=Yi*Yi,j4=new Rt(-1,-1);var N4=Object.defineProperty,S4=(e,t,s)=>t in e?N4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Cl=(e,t,s)=>S4(e,typeof t!="symbol"?t+"":t,s);class bg{constructor(t,s){Cl(this,"version"),Cl(this,"remoteQuerySet"),Cl(this,"queryPath"),Cl(this,"logger"),this.version={querySet:0,ts:Rt.fromNumber(0),identity:0},this.remoteQuerySet=new Map,this.queryPath=t,this.logger=s}transition(t){const s=t.startVersion;if(this.version.querySet!==s.querySet||this.version.ts.notEquals(s.ts)||this.version.identity!==s.identity)throw new Error(`Invalid start version: ${s.ts.toString()}:${s.querySet}:${s.identity}, transitioning from ${this.version.ts.toString()}:${this.version.querySet}:${this.version.identity}`);for(const n of t.modifications)switch(n.type){case"QueryUpdated":{const a=this.queryPath(n.queryId);if(a)for(const o of n.logLines)Pd(this.logger,"info","query",a,o);const i=ri(n.value??null);this.remoteQuerySet.set(n.queryId,{success:!0,value:i,logLines:n.logLines});break}case"QueryFailed":{const a=this.queryPath(n.queryId);if(a)for(const o of n.logLines)Pd(this.logger,"info","query",a,o);const{errorData:i}=n;this.remoteQuerySet.set(n.queryId,{success:!1,errorMessage:n.errorMessage,errorData:i!==void 0?ri(i):void 0,logLines:n.logLines});break}case"QueryRemoved":{this.remoteQuerySet.delete(n.queryId);break}default:throw new Error(`Invalid modification ${n.type}`)}this.version=t.endVersion}remoteQueryResults(){return this.remoteQuerySet}timestamp(){return this.version.ts}}function Tu(e){const t=No(e);return Rt.fromBytesLE(Array.from(t))}function C4(e){const t=new Uint8Array(e.toBytesLE());return So(t)}function yg(e){switch(e.type){case"FatalError":case"AuthError":case"ActionResponse":case"TransitionChunk":case"Ping":return{...e};case"MutationResponse":return e.success?{...e,ts:Tu(e.ts)}:{...e};case"Transition":return{...e,startVersion:{...e.startVersion,ts:Tu(e.startVersion.ts)},endVersion:{...e.endVersion,ts:Tu(e.endVersion.ts)}}}}function T4(e){switch(e.type){case"Authenticate":case"ModifyQuerySet":case"Mutation":case"Action":case"Event":return{...e};case"Connect":return e.maxObservedTimestamp!==void 0?{...e,maxObservedTimestamp:C4(e.maxObservedTimestamp)}:{...e,maxObservedTimestamp:void 0}}}var _4=Object.defineProperty,I4=(e,t,s)=>t in e?_4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,at=(e,t,s)=>I4(e,typeof t!="symbol"?t+"":t,s);const P4=1e3,A4=1001,E4=1005,M4=4040;let Ql;function Kl(){return Ql===void 0&&(Ql=Date.now()),typeof performance>"u"||!performance.now?Date.now():Math.round(Ql+performance.now())}function vg(){return`t=${Math.round((Kl()-Ql)/100)/10}s`}const gw={InternalServerError:{timeout:1e3},SubscriptionsWorkerFullError:{timeout:3e3},TooManyConcurrentRequests:{timeout:3e3},CommitterFullError:{timeout:3e3},AwsTooManyRequestsException:{timeout:3e3},ExecuteFullError:{timeout:3e3},SystemTimeoutError:{timeout:3e3},ExpiredInQueue:{timeout:3e3},VectorIndexesUnavailable:{timeout:1e3},SearchIndexesUnavailable:{timeout:1e3},TableSummariesUnavailable:{timeout:1e3},VectorIndexTooLarge:{timeout:3e3},SearchIndexTooLarge:{timeout:3e3},TooManyWritesInTimePeriod:{timeout:3e3}};function R4(e){if(e===void 0)return"Unknown";for(const t of Object.keys(gw))if(e.startsWith(t))return t;return"Unknown"}class L4{constructor(t,s,n,a,i,o){this.markConnectionStateDirty=i,this.debug=o,at(this,"socket"),at(this,"connectionCount"),at(this,"_hasEverConnected",!1),at(this,"lastCloseReason"),at(this,"transitionChunkBuffer",null),at(this,"defaultInitialBackoff"),at(this,"maxBackoff"),at(this,"retries"),at(this,"serverInactivityThreshold"),at(this,"reconnectDueToServerInactivityTimeout"),at(this,"uri"),at(this,"onOpen"),at(this,"onResume"),at(this,"onMessage"),at(this,"webSocketConstructor"),at(this,"logger"),at(this,"onServerDisconnectError"),this.webSocketConstructor=n,this.socket={state:"disconnected"},this.connectionCount=0,this.lastCloseReason="InitialConnect",this.defaultInitialBackoff=1e3,this.maxBackoff=16e3,this.retries=0,this.serverInactivityThreshold=6e4,this.reconnectDueToServerInactivityTimeout=null,this.uri=t,this.onOpen=s.onOpen,this.onResume=s.onResume,this.onMessage=s.onMessage,this.onServerDisconnectError=s.onServerDisconnectError,this.logger=a,this.connect()}setSocketState(t){this.socket=t,this._logVerbose(`socket state changed: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}`),this.markConnectionStateDirty()}assembleTransition(t){if(t.partNumber<0||t.partNumber>=t.totalParts||t.totalParts===0||this.transitionChunkBuffer&&(this.transitionChunkBuffer.totalParts!==t.totalParts||this.transitionChunkBuffer.transitionId!==t.transitionId))throw this.transitionChunkBuffer=null,new Error("Invalid TransitionChunk");if(this.transitionChunkBuffer===null&&(this.transitionChunkBuffer={chunks:[],totalParts:t.totalParts,transitionId:t.transitionId}),t.partNumber!==this.transitionChunkBuffer.chunks.length){const s=this.transitionChunkBuffer.chunks.length;throw this.transitionChunkBuffer=null,new Error(`TransitionChunk received out of order: expected part ${s}, got ${t.partNumber}`)}if(this.transitionChunkBuffer.chunks.push(t.chunk),this.transitionChunkBuffer.chunks.length===t.totalParts){const s=this.transitionChunkBuffer.chunks.join("");this.transitionChunkBuffer=null;const n=yg(JSON.parse(s));if(n.type!=="Transition")throw new Error(`Expected Transition, got ${n.type} after assembling chunks`);return n}return null}connect(){if(this.socket.state==="terminated")return;if(this.socket.state!=="disconnected"&&this.socket.state!=="stopped")throw new Error("Didn't start connection from disconnected state: "+this.socket.state);const t=new this.webSocketConstructor(this.uri);this._logVerbose("constructed WebSocket"),this.setSocketState({state:"connecting",ws:t,paused:"no"}),this.resetServerInactivityTimeout(),t.onopen=()=>{if(this.logger.logVerbose("begin ws.onopen"),this.socket.state!=="connecting")throw new Error("onopen called with socket not in connecting state");this.setSocketState({state:"ready",ws:t,paused:this.socket.paused==="yes"?"uninitialized":"no"}),this.resetServerInactivityTimeout(),this.socket.paused==="no"&&(this._hasEverConnected=!0,this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:Kl()})),this.lastCloseReason!=="InitialConnect"&&(this.lastCloseReason?this.logger.log("WebSocket reconnected at",vg(),"after disconnect due to",this.lastCloseReason):this.logger.log("WebSocket reconnected at",vg())),this.connectionCount+=1,this.lastCloseReason=null},t.onerror=s=>{this.transitionChunkBuffer=null;const n=s.message;n&&this.logger.log(`WebSocket error message: ${n}`)},t.onmessage=s=>{this.resetServerInactivityTimeout();const n=s.data.length;let a=yg(JSON.parse(s.data));if(this._logVerbose(`received ws message with type ${a.type}`),a.type==="Ping")return;if(a.type==="TransitionChunk"){const o=this.assembleTransition(a);if(!o)return;a=o,this._logVerbose(`assembled full ws message of type ${a.type}`)}this.transitionChunkBuffer!==null&&(this.transitionChunkBuffer=null,this.logger.log(`Received unexpected ${a.type} while buffering TransitionChunks`)),a.type==="Transition"&&this.reportLargeTransition({messageLength:n,transition:a}),this.onMessage(a).hasSyncedPastLastReconnect&&(this.retries=0,this.markConnectionStateDirty())},t.onclose=s=>{if(this._logVerbose("begin ws.onclose"),this.transitionChunkBuffer=null,this.lastCloseReason===null&&(this.lastCloseReason=s.reason||`closed with code ${s.code}`),s.code!==P4&&s.code!==A4&&s.code!==E4&&s.code!==M4){let a=`WebSocket closed with code ${s.code}`;s.reason&&(a+=`: ${s.reason}`),this.logger.log(a),this.onServerDisconnectError&&s.reason&&this.onServerDisconnectError(a)}const n=R4(s.reason);this.scheduleReconnect(n)}}socketState(){return this.socket.state}sendMessage(t){const s={type:t.type,...t.type==="Authenticate"&&t.tokenType==="User"?{value:`...${t.value.slice(-7)}`}:{}};if(this.socket.state==="ready"&&this.socket.paused==="no"){const n=T4(t),a=JSON.stringify(n);let i=!1;try{this.socket.ws.send(a),i=!0}catch(o){this.logger.log(`Failed to send message on WebSocket, reconnecting: ${o}`),this.closeAndReconnect("FailedToSendMessage")}return this._logVerbose(`${i?"sent":"failed to send"} message with type ${t.type}: ${JSON.stringify(s)}`),!0}return this._logVerbose(`message not sent (socket state: ${this.socket.state}, paused: ${"paused"in this.socket?this.socket.paused:void 0}): ${JSON.stringify(s)}`),!1}resetServerInactivityTimeout(){this.socket.state!=="terminated"&&(this.reconnectDueToServerInactivityTimeout!==null&&(clearTimeout(this.reconnectDueToServerInactivityTimeout),this.reconnectDueToServerInactivityTimeout=null),this.reconnectDueToServerInactivityTimeout=setTimeout(()=>{this.closeAndReconnect("InactiveServer")},this.serverInactivityThreshold))}scheduleReconnect(t){this.socket={state:"disconnected"};const s=this.nextBackoff(t);this.markConnectionStateDirty(),this.logger.log(`Attempting reconnect in ${Math.round(s)}ms`),setTimeout(()=>this.connect(),s)}closeAndReconnect(t){switch(this._logVerbose(`begin closeAndReconnect with reason ${t}`),this.socket.state){case"disconnected":case"terminated":case"stopped":return;case"connecting":case"ready":{this.lastCloseReason=t,this.close(),this.scheduleReconnect("client");return}default:this.socket}}close(){switch(this.transitionChunkBuffer=null,this.socket.state){case"disconnected":case"terminated":case"stopped":return Promise.resolve();case"connecting":{const t=this.socket.ws;return t.onmessage=s=>{this._logVerbose("Ignoring message received after close")},new Promise(s=>{t.onclose=()=>{this._logVerbose("Closed after connecting"),s()},t.onopen=()=>{this._logVerbose("Opened after connecting"),t.close()}})}case"ready":{this._logVerbose("ws.close called");const t=this.socket.ws;t.onmessage=n=>{this._logVerbose("Ignoring message received after close")};const s=new Promise(n=>{t.onclose=()=>{n()}});return t.close(),s}default:return this.socket,Promise.resolve()}}terminate(){switch(this.reconnectDueToServerInactivityTimeout&&clearTimeout(this.reconnectDueToServerInactivityTimeout),this.socket.state){case"terminated":case"stopped":case"disconnected":case"connecting":case"ready":{const t=this.close();return this.setSocketState({state:"terminated"}),t}default:throw this.socket,new Error(`Invalid websocket state: ${this.socket.state}`)}}stop(){switch(this.socket.state){case"terminated":return Promise.resolve();case"connecting":case"stopped":case"disconnected":case"ready":{const t=this.close();return this.socket={state:"stopped"},t}default:return this.socket,Promise.resolve()}}tryRestart(){switch(this.socket.state){case"stopped":break;case"terminated":case"connecting":case"ready":case"disconnected":this.logger.logVerbose("Restart called without stopping first");return;default:this.socket}this.connect()}pause(){switch(this.socket.state){case"disconnected":case"stopped":case"terminated":return;case"connecting":case"ready":{this.socket={...this.socket,paused:"yes"};return}default:{this.socket;return}}}resume(){switch(this.socket.state){case"connecting":this.socket={...this.socket,paused:"no"};return;case"ready":this.socket.paused==="uninitialized"?(this.socket={...this.socket,paused:"no"},this.onOpen({connectionCount:this.connectionCount,lastCloseReason:this.lastCloseReason,clientTs:Kl()})):this.socket.paused==="yes"&&(this.socket={...this.socket,paused:"no"},this.onResume());return;case"terminated":case"stopped":case"disconnected":return;default:this.socket}this.connect()}connectionState(){return{isConnected:this.socket.state==="ready",hasEverConnected:this._hasEverConnected,connectionCount:this.connectionCount,connectionRetries:this.retries}}_logVerbose(t){this.logger.logVerbose(t)}nextBackoff(t){const n=(t==="client"?100:t==="Unknown"?this.defaultInitialBackoff:gw[t].timeout)*Math.pow(2,this.retries);this.retries+=1;const a=Math.min(n,this.maxBackoff),i=a*(Math.random()-.5);return a+i}reportLargeTransition({transition:t,messageLength:s}){if(t.clientClockSkew===void 0||t.serverTs===void 0)return;const n=Kl()-t.clientClockSkew-t.serverTs/1e6,a=`${Math.round(n)}ms`,i=`${Math.round(s/1e4)/100}MB`,o=s/(n/1e3),l=`${Math.round(o/1e4)/100}MB per second`;this._logVerbose(`received ${i} transition in ${a} at ${l}`),s>2e7?this.logger.log(`received query results totaling more that 20MB (${i}) which will take a long time to download on slower connections`):n>2e4&&this.logger.log(`received query results totaling ${i} which took more than 20s to arrive (${a})`),this.debug&&this.sendMessage({type:"Event",eventType:"ClientReceivedTransition",event:{transitionTransitTime:n,messageLength:s}})}}function D4(){return O4()}function O4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}class Fi extends Error{}Fi.prototype.name="InvalidTokenError";function F4(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,s)=>{let n=s.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function U4(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return F4(t)}catch{return atob(t)}}function bw(e,t){if(typeof e!="string")throw new Fi("Invalid token specified: must be a string");t||(t={});const s=t.header===!0?0:1,n=e.split(".")[s];if(typeof n!="string")throw new Fi(`Invalid token specified: missing part #${s+1}`);let a;try{a=U4(n)}catch(i){throw new Fi(`Invalid token specified: invalid base64 for part #${s+1} (${i.message})`)}try{return JSON.parse(a)}catch(i){throw new Fi(`Invalid token specified: invalid json for part #${s+1} (${i.message})`)}}var B4=Object.defineProperty,V4=(e,t,s)=>t in e?B4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,sr=(e,t,s)=>V4(e,typeof t!="symbol"?t+"":t,s);const $4=20*24*60*60*1e3,wg=2;class z4{constructor(t,s,n){sr(this,"authState",{state:"noAuth"}),sr(this,"configVersion",0),sr(this,"syncState"),sr(this,"authenticate"),sr(this,"stopSocket"),sr(this,"tryRestartSocket"),sr(this,"pauseSocket"),sr(this,"resumeSocket"),sr(this,"clearAuth"),sr(this,"logger"),sr(this,"refreshTokenLeewaySeconds"),sr(this,"tokenConfirmationAttempts",0),this.syncState=t,this.authenticate=s.authenticate,this.stopSocket=s.stopSocket,this.tryRestartSocket=s.tryRestartSocket,this.pauseSocket=s.pauseSocket,this.resumeSocket=s.resumeSocket,this.clearAuth=s.clearAuth,this.logger=n.logger,this.refreshTokenLeewaySeconds=n.refreshTokenLeewaySeconds}async setConfig(t,s){this.resetAuthState(),this._logVerbose("pausing WS for auth token fetch"),this.pauseSocket();const n=await this.fetchTokenAndGuardAgainstRace(t,{forceRefreshToken:!1});n.isFromOutdatedConfig||(n.value?(this.setAuthState({state:"waitingForServerConfirmationOfCachedToken",config:{fetchToken:t,onAuthChange:s},hasRetried:!1}),this.authenticate(n.value)):(this.setAuthState({state:"initialRefetch",config:{fetchToken:t,onAuthChange:s}}),await this.refetchToken()),this._logVerbose("resuming WS after auth token fetch"),this.resumeSocket())}onTransition(t){if(this.syncState.isCurrentOrNewerAuthVersion(t.endVersion.identity)&&!(t.endVersion.identity<=t.startVersion.identity)){if(this.authState.state==="waitingForServerConfirmationOfCachedToken"){this._logVerbose("server confirmed auth token is valid"),this.refetchToken(),this.authState.config.onAuthChange(!0);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this._logVerbose("server confirmed new auth token is valid"),this.scheduleTokenRefetch(this.authState.token),this.tokenConfirmationAttempts=0,this.authState.hadAuth||this.authState.config.onAuthChange(!0))}}onAuthError(t){if(t.authUpdateAttempted===!1&&(this.authState.state==="waitingForServerConfirmationOfFreshToken"||this.authState.state==="waitingForServerConfirmationOfCachedToken")){this._logVerbose("ignoring non-auth token expired error");return}const{baseVersion:s}=t;if(!this.syncState.isCurrentOrNewerAuthVersion(s+1)){this._logVerbose("ignoring auth error for previous auth attempt");return}this.tryToReauthenticate(t)}async tryToReauthenticate(t){if(this._logVerbose(`attempting to reauthenticate: ${t.error}`),this.authState.state==="noAuth"||this.authState.state==="waitingForServerConfirmationOfFreshToken"&&this.tokenConfirmationAttempts>=wg){this.logger.error(`Failed to authenticate: "${t.error}", check your server auth config`),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.authState.state!=="noAuth"&&this.setAndReportAuthFailed(this.authState.config.onAuthChange);return}this.authState.state==="waitingForServerConfirmationOfFreshToken"&&(this.tokenConfirmationAttempts++,this._logVerbose(`retrying reauthentication, ${wg-this.tokenConfirmationAttempts} attempts remaining`)),await this.stopSocket();const s=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});s.isFromOutdatedConfig||(s.value&&this.syncState.isNewAuth(s.value)?(this.authenticate(s.value),this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",config:this.authState.config,token:s.value,hadAuth:this.authState.state==="notRefetching"||this.authState.state==="waitingForScheduledRefetch"})):(this._logVerbose("reauthentication failed, could not fetch a new token"),this.syncState.hasAuth()&&this.syncState.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this.tryRestartSocket())}async refetchToken(){if(this.authState.state==="noAuth")return;this._logVerbose("refetching auth token");const t=await this.fetchTokenAndGuardAgainstRace(this.authState.config.fetchToken,{forceRefreshToken:!0});t.isFromOutdatedConfig||(t.value?this.syncState.isNewAuth(t.value)?(this.setAuthState({state:"waitingForServerConfirmationOfFreshToken",hadAuth:this.syncState.hasAuth(),token:t.value,config:this.authState.config}),this.authenticate(t.value)):this.setAuthState({state:"notRefetching",config:this.authState.config}):(this._logVerbose("refetching token failed"),this.syncState.hasAuth()&&this.clearAuth(),this.setAndReportAuthFailed(this.authState.config.onAuthChange)),this._logVerbose("restarting WS after auth token fetch (if currently stopped)"),this.tryRestartSocket())}scheduleTokenRefetch(t){if(this.authState.state==="noAuth")return;const s=this.decodeToken(t);if(!s){this.logger.error("Auth token is not a valid JWT, cannot refetch the token");return}const{iat:n,exp:a}=s;if(!n||!a){this.logger.error("Auth token does not have required fields, cannot refetch the token");return}const i=a-n;if(i<=2){this.logger.error("Auth token does not live long enough, cannot refetch the token");return}let o=Math.min($4,(i-this.refreshTokenLeewaySeconds)*1e3);o<=0&&(this.logger.warn(`Refetching auth token immediately, configured leeway ${this.refreshTokenLeewaySeconds}s is larger than the token's lifetime ${i}s`),o=0);const l=setTimeout(()=>{this._logVerbose("running scheduled token refetch"),this.refetchToken()},o);this.setAuthState({state:"waitingForScheduledRefetch",refetchTokenTimeoutId:l,config:this.authState.config}),this._logVerbose(`scheduled preemptive auth token refetching in ${o}ms`)}async fetchTokenAndGuardAgainstRace(t,s){const n=++this.configVersion;this._logVerbose(`fetching token with config version ${n}`);const a=await t(s);return this.configVersion!==n?(this._logVerbose(`stale config version, expected ${n}, got ${this.configVersion}`),{isFromOutdatedConfig:!0}):{isFromOutdatedConfig:!1,value:a}}stop(){this.resetAuthState(),this.configVersion++,this._logVerbose(`config version bumped to ${this.configVersion}`)}setAndReportAuthFailed(t){t(!1),this.resetAuthState()}resetAuthState(){this.setAuthState({state:"noAuth"})}setAuthState(t){const s=t.state==="waitingForServerConfirmationOfFreshToken"?{hadAuth:t.hadAuth,state:t.state,token:`...${t.token.slice(-7)}`}:{state:t.state};switch(this._logVerbose(`setting auth state to ${JSON.stringify(s)}`),t.state){case"waitingForScheduledRefetch":case"notRefetching":case"noAuth":this.tokenConfirmationAttempts=0;break}this.authState.state==="waitingForScheduledRefetch"&&(clearTimeout(this.authState.refetchTokenTimeoutId),this.syncState.markAuthCompletion()),this.authState=t}decodeToken(t){try{return bw(t)}catch(s){return this._logVerbose(`Error decoding token: ${s instanceof Error?s.message:"Unknown error"}`),null}}_logVerbose(t){this.logger.logVerbose(`${t} [v${this.configVersion}]`)}}const W4=["convexClientConstructed","convexWebSocketOpen","convexFirstMessageReceived"];function q4(e,t){const s={sessionId:t};typeof performance>"u"||!performance.mark||performance.mark(e,{detail:s})}function H4(e){let t=e.name.slice(6);return t=t.charAt(0).toLowerCase()+t.slice(1),{name:t,startTime:e.startTime}}function G4(e){if(typeof performance>"u"||!performance.getEntriesByName)return[];const t=[];for(const s of W4){const n=performance.getEntriesByName(s).filter(a=>a.entryType==="mark").filter(a=>a.detail.sessionId===e);t.push(...n)}return t.map(H4)}var Q4=Object.defineProperty,K4=(e,t,s)=>t in e?Q4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,qe=(e,t,s)=>K4(e,typeof t!="symbol"?t+"":t,s);class Y4{constructor(t,s,n){if(qe(this,"address"),qe(this,"state"),qe(this,"requestManager"),qe(this,"webSocketManager"),qe(this,"authenticationManager"),qe(this,"remoteQuerySet"),qe(this,"optimisticQueryResults"),qe(this,"_transitionHandlerCounter",0),qe(this,"_nextRequestId"),qe(this,"_onTransitionFns",new Map),qe(this,"_sessionId"),qe(this,"firstMessageReceived",!1),qe(this,"debug"),qe(this,"logger"),qe(this,"maxObservedTimestamp"),qe(this,"connectionStateSubscribers",new Map),qe(this,"nextConnectionStateSubscriberId",0),qe(this,"_lastPublishedConnectionState"),qe(this,"markConnectionStateDirty",()=>{Promise.resolve().then(()=>{const x=this.connectionState();if(JSON.stringify(x)!==JSON.stringify(this._lastPublishedConnectionState)){this._lastPublishedConnectionState=x;for(const g of this.connectionStateSubscribers.values())g(x)}})}),qe(this,"mark",x=>{this.debug&&q4(x,this.sessionId)}),typeof t=="object")throw new Error("Passing a ClientConfig object is no longer supported. Pass the URL of the Convex deployment as a string directly.");(n==null?void 0:n.skipConvexDeploymentUrlCheck)!==!0&&qS(t),n={...n};const a=n.authRefreshTokenLeewaySeconds??2;let i=n.webSocketConstructor;if(!i&&typeof WebSocket>"u")throw new Error("No WebSocket global variable defined! To use Convex in an environment without WebSocket try the HTTP client: https://docs.convex.dev/api/classes/browser.ConvexHttpClient");i=i||WebSocket,this.debug=n.reportDebugInfoToConvex??!1,this.address=t,this.logger=n.logger===!1?xw({verbose:n.verbose??!1}):n.logger!==!0&&n.logger?n.logger:hw({verbose:n.verbose??!1});const o=t.search("://");if(o===-1)throw new Error("Provided address was not an absolute URL.");const l=t.substring(o+3),d=t.substring(0,o);let c;if(d==="http")c="ws";else if(d==="https")c="wss";else throw new Error(`Unknown parent protocol ${d}`);const u=`${c}://${l}/api/${hg}/sync`;this.state=new d4,this.remoteQuerySet=new bg(x=>this.state.queryPath(x),this.logger),this.requestManager=new m4(this.logger,this.markConnectionStateDirty);const m=()=>{this.webSocketManager.pause(),this.state.pause()};this.authenticationManager=new z4(this.state,{authenticate:x=>{const g=this.state.setAuth(x);return this.webSocketManager.sendMessage(g),g.baseVersion},stopSocket:()=>this.webSocketManager.stop(),tryRestartSocket:()=>this.webSocketManager.tryRestart(),pauseSocket:m,resumeSocket:()=>this.webSocketManager.resume(),clearAuth:()=>{this.clearAuth()}},{logger:this.logger,refreshTokenLeewaySeconds:a}),this.optimisticQueryResults=new y4,this.addOnTransitionHandler(x=>{s(x.queries.map(g=>g.token))}),this._nextRequestId=0,this._sessionId=D4();const{unsavedChangesWarning:h}=n;if(typeof window>"u"||typeof window.addEventListener>"u"){if(h===!0)throw new Error("unsavedChangesWarning requested, but window.addEventListener not found! Remove {unsavedChangesWarning: true} from Convex client options.")}else h!==!1&&window.addEventListener("beforeunload",x=>{if(this.requestManager.hasIncompleteRequests()){x.preventDefault();const g="Are you sure you want to leave? Your changes may not be saved.";return(x||window.event).returnValue=g,g}});this.webSocketManager=new L4(u,{onOpen:x=>{this.mark("convexWebSocketOpen"),this.webSocketManager.sendMessage({...x,type:"Connect",sessionId:this._sessionId,maxObservedTimestamp:this.maxObservedTimestamp});const g=new Set(this.remoteQuerySet.remoteQueryResults().keys());this.remoteQuerySet=new bg(p=>this.state.queryPath(p),this.logger);const[v,y]=this.state.restart(g);y&&this.webSocketManager.sendMessage(y),this.webSocketManager.sendMessage(v);for(const p of this.requestManager.restart())this.webSocketManager.sendMessage(p)},onResume:()=>{const[x,g]=this.state.resume();g&&this.webSocketManager.sendMessage(g),x&&this.webSocketManager.sendMessage(x);for(const v of this.requestManager.resume())this.webSocketManager.sendMessage(v)},onMessage:x=>{switch(this.firstMessageReceived||(this.firstMessageReceived=!0,this.mark("convexFirstMessageReceived"),this.reportMarks()),x.type){case"Transition":{this.observedTimestamp(x.endVersion.ts),this.authenticationManager.onTransition(x),this.remoteQuerySet.transition(x),this.state.transition(x);const g=this.requestManager.removeCompleted(this.remoteQuerySet.timestamp());this.notifyOnQueryResultChanges(g);break}case"MutationResponse":{x.success&&this.observedTimestamp(x.ts);const g=this.requestManager.onResponse(x);g!==null&&this.notifyOnQueryResultChanges(new Map([[g.requestId,g.result]]));break}case"ActionResponse":{this.requestManager.onResponse(x);break}case"AuthError":{this.authenticationManager.onAuthError(x);break}case"FatalError":{const g=i4(this.logger,x.error);throw this.webSocketManager.terminate(),g}}return{hasSyncedPastLastReconnect:this.hasSyncedPastLastReconnect()}},onServerDisconnectError:n.onServerDisconnectError},i,this.logger,this.markConnectionStateDirty,this.debug),this.mark("convexClientConstructed"),n.expectAuth&&m()}hasSyncedPastLastReconnect(){return this.requestManager.hasSyncedPastLastReconnect()||this.state.hasSyncedPastLastReconnect()}observedTimestamp(t){(this.maxObservedTimestamp===void 0||this.maxObservedTimestamp.lessThanOrEqual(t))&&(this.maxObservedTimestamp=t)}getMaxObservedTimestamp(){return this.maxObservedTimestamp}notifyOnQueryResultChanges(t){const s=this.remoteQuerySet.remoteQueryResults(),n=new Map;for(const[i,o]of s){const l=this.state.queryToken(i);if(l!==null){const d={result:o,udfPath:this.state.queryPath(i),args:this.state.queryArgs(i)};n.set(l,d)}}const a=this.optimisticQueryResults.ingestQueryResultsFromServer(n,new Set(t.keys()));this.handleTransition({queries:a.map(i=>{const o=this.optimisticQueryResults.rawQueryResult(i);return{token:i,modification:{kind:"Updated",result:o}}}),reflectedMutations:Array.from(t).map(([i,o])=>({requestId:i,result:o})),timestamp:this.remoteQuerySet.timestamp()})}handleTransition(t){for(const s of this._onTransitionFns.values())s(t)}addOnTransitionHandler(t){const s=this._transitionHandlerCounter++;return this._onTransitionFns.set(s,t),()=>this._onTransitionFns.delete(s)}getCurrentAuthClaims(){const t=this.state.getAuth();let s={};if(t&&t.tokenType==="User")try{s=t?bw(t.value):{}}catch{s={}}else return;return{token:t.value,decoded:s}}setAuth(t,s){this.authenticationManager.setConfig(t,s)}hasAuth(){return this.state.hasAuth()}setAdminAuth(t,s){const n=this.state.setAdminAuth(t,s);this.webSocketManager.sendMessage(n)}clearAuth(){const t=this.state.clearAuth();this.webSocketManager.sendMessage(t)}subscribe(t,s,n){const a=Zr(s),{modification:i,queryToken:o,unsubscribe:l}=this.state.subscribe(t,a,n==null?void 0:n.journal,n==null?void 0:n.componentPath);return i!==null&&this.webSocketManager.sendMessage(i),{queryToken:o,unsubscribe:()=>{const d=l();d&&this.webSocketManager.sendMessage(d)}}}localQueryResult(t,s){const n=Zr(s),a=$n(t,n);return this.optimisticQueryResults.queryResult(a)}localQueryResultByToken(t){return this.optimisticQueryResults.queryResult(t)}hasLocalQueryResultByToken(t){return this.optimisticQueryResults.hasQueryResult(t)}localQueryLogs(t,s){const n=Zr(s),a=$n(t,n);return this.optimisticQueryResults.queryLogs(a)}queryJournal(t,s){const n=Zr(s),a=$n(t,n);return this.state.queryJournal(a)}connectionState(){const t=this.webSocketManager.connectionState();return{hasInflightRequests:this.requestManager.hasInflightRequests(),isWebSocketConnected:t.isConnected,hasEverConnected:t.hasEverConnected,connectionCount:t.connectionCount,connectionRetries:t.connectionRetries,timeOfOldestInflightRequest:this.requestManager.timeOfOldestInflightRequest(),inflightMutations:this.requestManager.inflightMutations(),inflightActions:this.requestManager.inflightActions()}}subscribeToConnectionState(t){const s=this.nextConnectionStateSubscriberId++;return this.connectionStateSubscribers.set(s,t),()=>{this.connectionStateSubscribers.delete(s)}}async mutation(t,s,n){const a=await this.mutationInternal(t,s,n);if(!a.success)throw a.errorData!==void 0?nh(a,new Id(Aa("mutation",t,a))):new Error(Aa("mutation",t,a));return a.value}async mutationInternal(t,s,n,a){const{mutationPromise:i}=this.enqueueMutation(t,s,n,a);return i}enqueueMutation(t,s,n,a){const i=Zr(s);this.tryReportLongDisconnect();const o=this.nextRequestId;if(this._nextRequestId++,n!==void 0){const u=n.optimisticUpdate;if(u!==void 0){const m=g=>{u(g,i)instanceof Promise&&this.logger.warn("Optimistic update handler returned a Promise. Optimistic updates should be synchronous.")},x=this.optimisticQueryResults.applyOptimisticUpdate(m,o).map(g=>{const v=this.localQueryResultByToken(g);return{token:g,modification:{kind:"Updated",result:v===void 0?void 0:{success:!0,value:v,logLines:[]}}}});this.handleTransition({queries:x,reflectedMutations:[],timestamp:this.remoteQuerySet.timestamp()})}}const l={type:"Mutation",requestId:o,udfPath:t,componentPath:a,args:[Gt(i)]},d=this.webSocketManager.sendMessage(l),c=this.requestManager.request(l,d);return{requestId:o,mutationPromise:c}}async action(t,s){const n=await this.actionInternal(t,s);if(!n.success)throw n.errorData!==void 0?nh(n,new Id(Aa("action",t,n))):new Error(Aa("action",t,n));return n.value}async actionInternal(t,s,n){const a=Zr(s),i=this.nextRequestId;this._nextRequestId++,this.tryReportLongDisconnect();const o={type:"Action",requestId:i,udfPath:t,componentPath:n,args:[Gt(a)]},l=this.webSocketManager.sendMessage(o);return this.requestManager.request(o,l)}async close(){return this.authenticationManager.stop(),this.webSocketManager.terminate()}get url(){return this.address}get nextRequestId(){return this._nextRequestId}get sessionId(){return this._sessionId}reportMarks(){if(this.debug){const t=G4(this.sessionId);this.webSocketManager.sendMessage({type:"Event",eventType:"ClientConnect",event:t})}}tryReportLongDisconnect(){if(!this.debug)return;const t=this.connectionState().timeOfOldestInflightRequest;if(t===null||Date.now()-t.getTime()<=60*1e3)return;const s=`${this.address}/api/debug_event`;fetch(s,{method:"POST",headers:{"Content-Type":"application/json","Convex-Client":`npm-${hg}`},body:JSON.stringify({event:"LongWebsocketDisconnect"})}).then(n=>{n.ok||this.logger.warn("Analytics request failed with response:",n.body)}).catch(n=>{this.logger.warn("Analytics response failed with error:",n)})}}function _u(e){if(typeof e!="object"||e===null||!Array.isArray(e.page)||typeof e.isDone!="boolean"||typeof e.continueCursor!="string")throw new Error(`Not a valid paginated query result: ${e==null?void 0:e.toString()}`);return e}var J4=Object.defineProperty,X4=(e,t,s)=>t in e?J4(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,kg=(e,t,s)=>X4(e,typeof t!="symbol"?t+"":t,s);class Z4{constructor(t,s){this.client=t,this.onTransition=s,kg(this,"paginatedQuerySet",new Map),kg(this,"lastTransitionTs"),this.lastTransitionTs=Rt.fromNumber(0),this.client.addOnTransitionHandler(n=>this.onBaseTransition(n))}subscribe(t,s,n){const a=Xn(t),i=pg(a,s,n),o=()=>this.removePaginatedQuerySubscriber(i),l=this.paginatedQuerySet.get(i);return l?(l.numSubscribers+=1,{paginatedQueryToken:i,unsubscribe:o}):(this.paginatedQuerySet.set(i,{token:i,canonicalizedUdfPath:a,args:s,numSubscribers:1,options:{initialNumItems:n.initialNumItems},nextPageKey:0,pageKeys:[],pageKeyToQuery:new Map,ongoingSplits:new Map,skip:!1,id:n.id}),this.addPageToPaginatedQuery(i,null,n.initialNumItems),{paginatedQueryToken:i,unsubscribe:o})}localQueryResult(t,s,n){const a=Xn(t),i=pg(a,s,n);return this.localQueryResultByToken(i)}localQueryResultByToken(t){const s=this.paginatedQuerySet.get(t);if(!s)return;const n=this.activePageQueryTokens(s);if(n.length===0)return{results:[],status:"LoadingFirstPage",loadMore:d=>this.loadMoreOfPaginatedQuery(t,d)};let a=[],i=!1,o=!1;for(const d of n){const c=this.client.localQueryResultByToken(d);if(c===void 0){i=!0,o=!1;continue}const u=_u(c);a=a.concat(u.page),o=!!u.isDone}let l;return i?l=a.length===0?"LoadingFirstPage":"LoadingMore":o?l="Exhausted":l="CanLoadMore",{results:a,status:l,loadMore:d=>this.loadMoreOfPaginatedQuery(t,d)}}onBaseTransition(t){const s=t.queries.map(o=>o.token),n=this.queriesContainingTokens(s);let a=[];n.length>0&&(this.processPaginatedQuerySplits(n,o=>this.client.localQueryResultByToken(o)),a=n.map(o=>({token:o,modification:{kind:"Updated",result:this.localQueryResultByToken(o)}})));const i={...t,paginatedQueries:a};this.onTransition(i)}loadMoreOfPaginatedQuery(t,s){this.mustGetPaginatedQuery(t);const n=this.queryTokenForLastPageOfPaginatedQuery(t),a=this.client.localQueryResultByToken(n);if(!a)return!1;const i=_u(a);if(i.isDone)return!1;this.addPageToPaginatedQuery(t,i.continueCursor,s);const o={timestamp:this.lastTransitionTs,reflectedMutations:[],queries:[],paginatedQueries:[{token:t,modification:{kind:"Updated",result:this.localQueryResultByToken(t)}}]};return this.onTransition(o),!0}queriesContainingTokens(t){if(t.length===0)return[];const s=[],n=new Set(t);for(const[a,i]of this.paginatedQuerySet)for(const o of this.allQueryTokens(i))if(n.has(o)){s.push(a);break}return s}processPaginatedQuerySplits(t,s){for(const n of t){const a=this.mustGetPaginatedQuery(n),{ongoingSplits:i,pageKeyToQuery:o,pageKeys:l}=a;for(const[d,[c,u]]of i)s(o.get(c).queryToken)!==void 0&&s(o.get(u).queryToken)!==void 0&&this.completePaginatedQuerySplit(a,d,c,u);for(const d of l){if(i.has(d))continue;const c=o.get(d).queryToken,u=s(c);if(!u)continue;const m=_u(u);m.splitCursor&&(m.pageStatus==="SplitRecommended"||m.pageStatus==="SplitRequired"||m.page.length>a.options.initialNumItems*2)&&this.splitPaginatedQueryPage(a,d,m.splitCursor,m.continueCursor)}}}splitPaginatedQueryPage(t,s,n,a){const i=t.nextPageKey++,o=t.nextPageKey++,l={cursor:a,numItems:t.options.initialNumItems,id:t.id},d=this.client.subscribe(t.canonicalizedUdfPath,{...t.args,paginationOpts:{...l,cursor:null,endCursor:n}});t.pageKeyToQuery.set(i,d);const c=this.client.subscribe(t.canonicalizedUdfPath,{...t.args,paginationOpts:{...l,cursor:n,endCursor:a}});t.pageKeyToQuery.set(o,c),t.ongoingSplits.set(s,[i,o])}addPageToPaginatedQuery(t,s,n){const a=this.mustGetPaginatedQuery(t),i=a.nextPageKey++,o={cursor:s,numItems:n,id:a.id},l={...a.args,paginationOpts:o},d=this.client.subscribe(a.canonicalizedUdfPath,l);return a.pageKeys.push(i),a.pageKeyToQuery.set(i,d),d}removePaginatedQuerySubscriber(t){const s=this.paginatedQuerySet.get(t);if(s&&(s.numSubscribers-=1,!(s.numSubscribers>0))){for(const n of s.pageKeyToQuery.values())n.unsubscribe();this.paginatedQuerySet.delete(t)}}completePaginatedQuerySplit(t,s,n,a){const i=t.pageKeyToQuery.get(s);t.pageKeyToQuery.delete(s);const o=t.pageKeys.indexOf(s);t.pageKeys.splice(o,1,n,a),t.ongoingSplits.delete(s),i.unsubscribe()}activePageQueryTokens(t){return t.pageKeys.map(s=>t.pageKeyToQuery.get(s).queryToken)}allQueryTokens(t){return Array.from(t.pageKeyToQuery.values()).map(s=>s.queryToken)}queryTokenForLastPageOfPaginatedQuery(t){const s=this.mustGetPaginatedQuery(t),n=s.pageKeys[s.pageKeys.length-1];if(n===void 0)throw new Error(`No pages for paginated query ${t}`);return s.pageKeyToQuery.get(n).queryToken}mustGetPaginatedQuery(t){const s=this.paginatedQuerySet.get(t);if(!s)throw new Error("paginated query no longer exists for token "+t);return s}}function eC({getCurrentValue:e,subscribe:t}){const[s,n]=f.useState(()=>({getCurrentValue:e,subscribe:t,value:e()}));let a=s.value;return(s.getCurrentValue!==e||s.subscribe!==t)&&(a=e(),n({getCurrentValue:e,subscribe:t,value:a})),f.useEffect(()=>{let i=!1;const o=()=>{i||n(d=>{if(d.getCurrentValue!==e||d.subscribe!==t)return d;const c=e();return d.value===c?d:{...d,value:c}})},l=t(o);return o(),()=>{i=!0,l()}},[e,t]),a}var tC=Object.defineProperty,rC=(e,t,s)=>t in e?tC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Qr=(e,t,s)=>rC(e,typeof t!="symbol"?t+"":t,s);const sC=5e3;if(typeof $r>"u")throw new Error("Required dependency 'react' not found");function yw(e,t,s){function n(a){return lC(a),t.mutation(e,a,{optimisticUpdate:s})}return n.withOptimisticUpdate=function(i){if(s!==void 0)throw new Error(`Already specified optimistic update for mutation ${rt(e)}`);return yw(e,t,i)},n}function nC(e,t){return function(s){return t.action(e,s)}}class aC{constructor(t,s){if(Qr(this,"address"),Qr(this,"cachedSync"),Qr(this,"cachedPaginatedQueryClient"),Qr(this,"listeners"),Qr(this,"options"),Qr(this,"closed",!1),Qr(this,"_logger"),Qr(this,"adminAuth"),Qr(this,"fakeUserIdentity"),t===void 0)throw new Error("No address provided to ConvexReactClient.\nIf trying to deploy to production, make sure to follow all the instructions found at https://docs.convex.dev/production/hosting/\nIf running locally, make sure to run `convex dev` and ensure the .env.local file is populated.");if(typeof t!="string")throw new Error(`ConvexReactClient requires a URL like 'https://happy-otter-123.convex.cloud', received something of type ${typeof t} instead.`);if(!t.includes("://"))throw new Error("Provided address was not an absolute URL.");this.address=t,this.listeners=new Map,this._logger=(s==null?void 0:s.logger)===!1?xw({verbose:(s==null?void 0:s.verbose)??!1}):(s==null?void 0:s.logger)!==!0&&(s!=null&&s.logger)?s.logger:hw({verbose:(s==null?void 0:s.verbose)??!1}),this.options={...s,logger:this._logger}}get url(){return this.address}get sync(){if(this.closed)throw new Error("ConvexReactClient has already been closed.");return this.cachedSync?this.cachedSync:(this.cachedSync=new Y4(this.address,()=>{},this.options),this.adminAuth&&this.cachedSync.setAdminAuth(this.adminAuth,this.fakeUserIdentity),this.cachedPaginatedQueryClient=new Z4(this.cachedSync,t=>this.handleTransition(t)),this.cachedSync)}get paginatedQueryClient(){if(this.sync,this.cachedPaginatedQueryClient)return this.cachedPaginatedQueryClient;throw new Error("Should already be instantiated")}setAuth(t,s){if(typeof t=="string")throw new Error("Passing a string to ConvexReactClient.setAuth is no longer supported, please upgrade to passing in an async function to handle reauthentication.");this.sync.setAuth(t,s??(()=>{}))}clearAuth(){this.sync.clearAuth()}setAdminAuth(t,s){if(this.adminAuth=t,this.fakeUserIdentity=s,this.closed)throw new Error("ConvexReactClient has already been closed.");this.cachedSync&&this.sync.setAdminAuth(t,s)}watchQuery(t,...s){const[n,a]=s,i=rt(t);return{onUpdate:o=>{const{queryToken:l,unsubscribe:d}=this.sync.subscribe(i,n,a),c=this.listeners.get(l);return c!==void 0?c.add(o):this.listeners.set(l,new Set([o])),()=>{if(this.closed)return;const u=this.listeners.get(l);u.delete(o),u.size===0&&this.listeners.delete(l),d()}},localQueryResult:()=>{if(this.cachedSync)return this.cachedSync.localQueryResult(i,n)},localQueryLogs:()=>{if(this.cachedSync)return this.cachedSync.localQueryLogs(i,n)},journal:()=>{if(this.cachedSync)return this.cachedSync.queryJournal(i,n)}}}prewarmQuery(t){const s=t.extendSubscriptionFor??sC,a=this.watchQuery(t.query,t.args||{}).onUpdate(()=>{});setTimeout(a,s)}watchPaginatedQuery(t,s,n){const a=rt(t);return{onUpdate:i=>{const{paginatedQueryToken:o,unsubscribe:l}=this.paginatedQueryClient.subscribe(a,s||{},n),d=this.listeners.get(o);return d!==void 0?d.add(i):this.listeners.set(o,new Set([i])),()=>{if(this.closed)return;const c=this.listeners.get(o);c.delete(i),c.size===0&&this.listeners.delete(o),l()}},localQueryResult:()=>this.paginatedQueryClient.localQueryResult(a,s,n)}}mutation(t,...s){const[n,a]=s,i=rt(t);return this.sync.mutation(i,n,a)}action(t,...s){const n=rt(t);return this.sync.action(n,...s)}query(t,...s){const n=this.watchQuery(t,...s),a=n.localQueryResult();return a!==void 0?Promise.resolve(a):new Promise((i,o)=>{const l=n.onUpdate(()=>{l();try{i(n.localQueryResult())}catch(d){o(d)}})})}connectionState(){return this.sync.connectionState()}subscribeToConnectionState(t){return this.sync.subscribeToConnectionState(t)}get logger(){return this._logger}async close(){if(this.closed=!0,this.listeners=new Map,this.cachedPaginatedQueryClient&&(this.cachedPaginatedQueryClient=void 0),this.cachedSync){const t=this.cachedSync;this.cachedSync=void 0,await t.close()}}handleTransition(t){const s=t.queries.map(a=>a.token),n=t.paginatedQueries.map(a=>a.token);this.transition([...s,...n])}transition(t){for(const s of t){const n=this.listeners.get(s);if(n)for(const a of n)a()}}}const yc=$r.createContext(void 0);function vw(){return f.useContext(yc)}const iC=({client:e,children:t})=>$r.createElement(yc.Provider,{value:e},t);function U(e,...t){const s=t[0]==="skip",n=t[0]==="skip"?{}:Zr(t[0]),a=typeof e=="string"?Ex(e):e,i=rt(a),o=f.useMemo(()=>s?{}:{query:{query:a,args:n}},[JSON.stringify(Gt(n)),i,s]),d=ww(o).query;if(d instanceof Error)throw d;return d}function V(e){const t=typeof e=="string"?Ex(e):e,s=f.useContext(yc);if(s===void 0)throw new Error("Could not find Convex client! `useMutation` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return f.useMemo(()=>yw(t,s),[s,rt(t)])}function oC(e){const t=f.useContext(yc),s=typeof e=="string"?Ex(e):e;if(t===void 0)throw new Error("Could not find Convex client! `useAction` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");return f.useMemo(()=>nC(s,t),[t,rt(s)])}function lC(e){if(typeof e=="object"&&e!==null&&"bubbles"in e&&"persist"in e&&"isDefaultPrevented"in e)throw new Error("Convex function called with SyntheticEvent object. Did you use a Convex function as an event handler directly? Event handlers like onClick receive an event object as their first argument. These SyntheticEvent objects are not valid Convex values. Try wrapping the function like `const handler = () => myMutation();` and using `handler` in the event handler.")}var dC=Object.defineProperty,cC=(e,t,s)=>t in e?dC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,Iu=(e,t,s)=>cC(e,typeof t!="symbol"?t+"":t,s);class uC{constructor(t){Iu(this,"createWatch"),Iu(this,"queries"),Iu(this,"listeners"),this.createWatch=t,this.queries={},this.listeners=new Set}setQueries(t){for(const s of Object.keys(t)){const{query:n,args:a,paginationOptions:i}=t[s];if(rt(n),this.queries[s]===void 0)this.addQuery(s,n,a,i?{paginationOptions:i}:{});else{const o=this.queries[s];(rt(n)!==rt(o.query)||JSON.stringify(Gt(a))!==JSON.stringify(Gt(o.args))||JSON.stringify(i)!==JSON.stringify(o.paginationOptions))&&(this.removeQuery(s),this.addQuery(s,n,a,i?{paginationOptions:i}:{}))}}for(const s of Object.keys(this.queries))t[s]===void 0&&this.removeQuery(s)}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}getLocalResults(t){const s={};for(const n of Object.keys(t)){const{query:a,args:i}=t[n],o=t[n].paginationOptions;rt(a);const l=this.createWatch(a,i,o?{paginationOptions:o}:{});let d;try{d=l.localQueryResult()}catch(c){if(c instanceof Error)d=c;else throw c}s[n]=d}return s}setCreateWatch(t){this.createWatch=t;for(const s of Object.keys(this.queries)){const{query:n,args:a,watch:i,paginationOptions:o}=this.queries[s],l="journal"in i?i.journal():void 0;this.removeQuery(s),this.addQuery(s,n,a,{...l?{journal:l}:[],...o?{paginationOptions:o}:{}})}}destroy(){for(const t of Object.keys(this.queries))this.removeQuery(t);this.listeners=new Set}addQuery(t,s,n,{paginationOptions:a,journal:i}){if(this.queries[t]!==void 0)throw new Error(`Tried to add a new query with identifier ${t} when it already exists.`);const o=this.createWatch(s,n,{...i?{journal:i}:[],...a?{paginationOptions:a}:{}}),l=o.onUpdate(()=>this.notifyListeners());this.queries[t]={query:s,args:n,watch:o,unsubscribe:l,...a?{paginationOptions:a}:{}}}removeQuery(t){const s=this.queries[t];if(s===void 0)throw new Error(`No query found with identifier ${t}.`);s.unsubscribe(),delete this.queries[t]}notifyListeners(){for(const t of this.listeners)t()}}function ww(e){const t=vw();if(t===void 0)throw new Error("Could not find Convex client! `useQuery` must be used in the React component tree under `ConvexProvider`. Did you forget it? See https://docs.convex.dev/quick-start#set-up-convex-in-your-react-app");const s=f.useMemo(()=>(n,a,{journal:i,paginationOptions:o})=>o?t.watchPaginatedQuery(n,a,o):t.watchQuery(n,a,i?{journal:i}:{}),[t]);return mC(e,s)}function mC(e,t){const[s]=f.useState(()=>new uC(t));s.createWatch!==t&&s.setCreateWatch(t),f.useEffect(()=>()=>s.destroy(),[s]);const n=f.useMemo(()=>({getCurrentValue:()=>s.getLocalResults(e),subscribe:a=>(s.setQueries(e),s.subscribe(a))}),[s,e]);return eC(n)}const hC=(e,t,s)=>n=>{const a={...n.queries},i=n.nextPageKey,o=n.nextPageKey+1,l=n.nextPageKey+2;a[i]={query:n.query,args:{...n.args,paginationOpts:{...n.queries[e].args.paginationOpts,endCursor:t}}},a[o]={query:n.query,args:{...n.args,paginationOpts:{...n.queries[e].args.paginationOpts,cursor:t,endCursor:s}}};const d={...n.ongoingSplits};return d[e]=[i,o],{...n,nextPageKey:l,queries:a,ongoingSplits:d}},xC=e=>t=>{const s=t.ongoingSplits[e];if(s===void 0)return t;const n={...t.queries};delete n[e];const a={...t.ongoingSplits};delete a[e];let i=t.pageKeys.slice();const o=t.pageKeys.findIndex(l=>l===e);return o>=0&&(i=[...t.pageKeys.slice(0,o),...s,...t.pageKeys.slice(o+1)]),{...t,queries:n,pageKeys:i,ongoingSplits:a}};function pC(e,t,s){const{user:n}=bC(e,t,s);return n}const fC=Symbol("includePageKeys"),gC=Symbol("page");function bC(e,t,s){if(typeof(s==null?void 0:s.initialNumItems)!="number"||s.initialNumItems<0)throw new Error(`\`options.initialNumItems\` must be a positive number. Received \`${s==null?void 0:s.initialNumItems}\`.`);const n=t==="skip",a=n?{}:t,i=rt(e),o=f.useMemo(()=>()=>{const p=yC();return{query:e,args:a,id:p,nextPageKey:1,pageKeys:n?[]:[0],queries:n?{}:{0:{query:e,args:{...a,paginationOpts:{numItems:s.initialNumItems,cursor:null,id:p}}}},ongoingSplits:{},skip:n}},[JSON.stringify(Gt(a)),i,s.initialNumItems,n]),[l,d]=f.useState(o);let c=l;(rt(e)!==rt(l.query)||JSON.stringify(Gt(a))!==JSON.stringify(Gt(l.args))||n!==l.skip)&&(c=o(),d(c));const m=vw().logger,h=ww(c.queries),x=s[fC]??!1,[g,v]=f.useMemo(()=>{var w,k;let p;const b=[];for(const j of c.pageKeys){if(p=h[j],p===void 0)break;if(p instanceof Error){if(p.message.includes("InvalidCursor")||p instanceof Id&&typeof p.data=="object"&&((w=p.data)==null?void 0:w.isConvexSystemError)===!0&&((k=p.data)==null?void 0:k.paginationError)==="InvalidCursor")return m.warn("usePaginatedQuery hit error, resetting pagination state: "+p.message),d(o),[[],void 0];throw p}const N=c.ongoingSplits[j];if(N!==void 0?h[N[0]]!==void 0&&h[N[1]]!==void 0&&d(xC(j)):p.splitCursor&&(p.pageStatus==="SplitRecommended"||p.pageStatus==="SplitRequired"||p.page.length>s.initialNumItems*2)&&d(hC(j,p.splitCursor,p.continueCursor)),p.pageStatus==="SplitRequired")return[b,void 0];b.push(...x?p.page.map(_=>({..._,[gC]:j.toString()})):p.page)}return[b,p]},[h,c.pageKeys,c.ongoingSplits,s.initialNumItems,o,m,x]),y=f.useMemo(()=>{if(v===void 0)return c.nextPageKey===1?{status:"LoadingFirstPage",isLoading:!0,loadMore:w=>{}}:{status:"LoadingMore",isLoading:!0,loadMore:w=>{}};if(v.isDone)return{status:"Exhausted",isLoading:!1,loadMore:w=>{}};const p=v.continueCursor;let b=!1;return{status:"CanLoadMore",isLoading:!1,loadMore:w=>{b||(b=!0,d(k=>{const j=[...k.pageKeys,k.nextPageKey],N={...k.queries};return N[k.nextPageKey]={query:k.query,args:{...k.args,paginationOpts:{numItems:w,cursor:p,id:k.id}}},{...k,nextPageKey:k.nextPageKey+1,pageKeys:j,queries:N}}))}}},[v,c.nextPageKey]);return{user:{results:g,...y},internal:{state:c}}}let jg=0;function yC(){return jg++,jg}const kw=f.createContext(void 0);function vC({children:e}){const[t,s]=f.useState(()=>{const i=localStorage.getItem("baptizo-theme");return i==="dark"||i==="light"?i:"light"});f.useEffect(()=>{const i=window.document.documentElement;i.classList.remove("light","dark"),i.classList.add(t),localStorage.setItem("baptizo-theme",t)},[t]);const n=()=>{s(i=>i==="light"?"dark":"light")},a=i=>{s(i)};return r.jsx(kw.Provider,{value:{theme:t,toggleTheme:n,setTheme:a},children:e})}function vc(){const e=f.useContext(kw);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}function jw(e,t){const s={get(n,a){if(typeof a=="string"){const i=[...t,a];return jw(e,i)}else if(a===pw){if(t.length<1){const i=[e,...t].join(".");throw new Error(`API path is expected to be of the form \`${e}.childComponent.functionName\`. Found: \`${i}\``)}return"_reference/childComponent/"+t.join("/")}else return}};return new Proxy({},s)}const wC=()=>jw("components",[]),S=f4;wC();const Nw=f.createContext(void 0),Tl="baptizo-auth-user";function kC({children:e}){const[t,s]=f.useState(null),[n,a]=f.useState(!0);f.useEffect(()=>{const c=localStorage.getItem(Tl);if(c)try{const u=JSON.parse(c);s(u)}catch(u){console.error("Failed to parse stored user:",u),localStorage.removeItem(Tl)}a(!1)},[]);const i=U(S.users.getUser,t!=null&&t._id?{userId:t._id}:"skip");f.useEffect(()=>{if(i&&t&&(i.role!==t.role||i.name!==t.name||i.avatarUrl!==t.avatarUrl||i.coverImageUrl!==t.coverImageUrl||i.lastViewedCommunityChatAt!==t.lastViewedCommunityChatAt||i.lastViewedBanking!==t.lastViewedBanking||i.lastViewedLeaderboard!==t.lastViewedLeaderboard||i.lastViewedNotifications!==t.lastViewedNotifications)){const u={...t,...i};s(u)}},[i,t]),f.useEffect(()=>{t?localStorage.setItem(Tl,JSON.stringify(t)):localStorage.removeItem(Tl)},[t]);const o=c=>{s(c)},l=()=>{s(null)},d=c=>{t&&s({...t,...c})};return r.jsx(Nw.Provider,{value:{user:t,isLoading:n,login:o,logout:l,updateUser:d},children:e})}function jC(){const e=f.useContext(Nw);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var NC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),B=(e,t)=>{const s=f.forwardRef(({color:n="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:d,...c},u)=>f.createElement("svg",{ref:u,...NC,width:a,height:a,stroke:n,strokeWidth:o?Number(i)*24/Number(a):i,className:["lucide",`lucide-${SC(e)}`,l].join(" "),...c},[...t.map(([m,h])=>f.createElement(m,h)),...Array.isArray(d)?d:[d]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=B("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tr=B("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=B("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=B("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=B("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=B("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sw=B("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=B("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=B("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=B("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=B("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=B("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=B("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mx=B("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sg=B("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=B("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=B("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=B("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=B("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=B("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=B("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=B("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=B("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=B("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=B("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=B("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ed=B("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=B("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=B("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=B("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cw=B("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=B("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=B("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=B("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=B("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qo=B("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=B("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=B("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=B("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=B("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=B("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=B("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=B("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dx=B("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=B("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=B("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=B("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fx=B("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=B("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=B("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aw=B("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=B("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=B("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=B("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=B("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=B("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=B("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=B("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=B("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Io=B("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=B("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=B("MessageCircleOff",[["path",{d:"M20.5 14.9A9 9 0 0 0 9.1 3.5",key:"1iebmn"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.6 5.6C3 8.3 2.2 12.5 4 16l-2 6 6-2c3.4 1.8 7.6 1.1 10.3-1.7",key:"1ov8ce"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lt=B("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=B("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wc=B("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=B("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=B("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=B("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=B("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=B("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=B("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=B("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=B("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=B("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cg=B("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=B("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=B("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=B("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mw=B("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=B("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=B("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=B("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=B("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=B("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=B("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=B("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=B("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=B("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=B("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=B("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ih=B("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=B("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=B("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=B("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=B("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oh=B("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=B("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=B("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=B("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=B("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=B("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=B("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=B("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=B("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=B("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=B("Youtube",[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=B("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ow=f.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Sc=f.createContext({}),Cc=f.createContext(null),Tc=typeof document<"u",Ux=Tc?f.useLayoutEffect:f.useEffect,Fw=f.createContext({strict:!1}),Bx=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),e3="framerAppearId",Uw="data-"+Bx(e3);function t3(e,t,s,n){const{visualElement:a}=f.useContext(Sc),i=f.useContext(Fw),o=f.useContext(Cc),l=f.useContext(Ow).reducedMotion,d=f.useRef();n=n||i.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:a,props:s,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const c=d.current;f.useInsertionEffect(()=>{c&&c.update(s,o)});const u=f.useRef(!!(s[Uw]&&!window.HandoffComplete));return Ux(()=>{c&&(c.render(),u.current&&c.animationState&&c.animationState.animateChanges())}),f.useEffect(()=>{c&&(c.updateFeatures(),!u.current&&c.animationState&&c.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),c}function Ea(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function r3(e,t,s){return f.useCallback(n=>{n&&e.mount&&e.mount(n),t&&(n?t.mount(n):t.unmount()),s&&(typeof s=="function"?s(n):Ea(s)&&(s.current=n))},[t])}function Po(e){return typeof e=="string"||Array.isArray(e)}function _c(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const Vx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$x=["initial",...Vx];function Ic(e){return _c(e.animate)||$x.some(t=>Po(e[t]))}function Bw(e){return!!(Ic(e)||e.variants)}function s3(e,t){if(Ic(e)){const{initial:s,animate:n}=e;return{initial:s===!1||Po(s)?s:void 0,animate:Po(n)?n:void 0}}return e.inherit!==!1?t:{}}function n3(e){const{initial:t,animate:s}=s3(e,f.useContext(Sc));return f.useMemo(()=>({initial:t,animate:s}),[Tg(t),Tg(s)])}function Tg(e){return Array.isArray(e)?e.join(" "):e}const _g={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ao={};for(const e in _g)Ao[e]={isEnabled:t=>_g[e].some(s=>!!t[s])};function a3(e){for(const t in e)Ao[t]={...Ao[t],...e[t]}}const zx=f.createContext({}),Vw=f.createContext({}),i3=Symbol.for("motionComponentSymbol");function o3({preloadedFeatures:e,createVisualElement:t,useRender:s,useVisualState:n,Component:a}){e&&a3(e);function i(l,d){let c;const u={...f.useContext(Ow),...l,layoutId:l3(l)},{isStatic:m}=u,h=n3(l),x=n(l,m);if(!m&&Tc){h.visualElement=t3(a,x,u,t);const g=f.useContext(Vw),v=f.useContext(Fw).strict;h.visualElement&&(c=h.visualElement.loadFeatures(u,v,e,g))}return f.createElement(Sc.Provider,{value:h},c&&h.visualElement?f.createElement(c,{visualElement:h.visualElement,...u}):null,s(a,l,r3(x,h.visualElement,d),x,m,h.visualElement))}const o=f.forwardRef(i);return o[i3]=a,o}function l3({layoutId:e}){const t=f.useContext(zx).id;return t&&e!==void 0?t+"-"+e:e}function d3(e){function t(n,a={}){return o3(e(n,a))}if(typeof Proxy>"u")return t;const s=new Map;return new Proxy(t,{get:(n,a)=>(s.has(a)||s.set(a,t(a)),s.get(a))})}const c3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Wx(e){return typeof e!="string"||e.includes("-")?!1:!!(c3.indexOf(e)>-1||/[A-Z]/.test(e))}const Fd={};function u3(e){Object.assign(Fd,e)}const Go=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ca=new Set(Go);function $w(e,{layout:t,layoutId:s}){return ca.has(e)||e.startsWith("origin")||(t||s!==void 0)&&(!!Fd[e]||e==="opacity")}const $t=e=>!!(e&&e.getVelocity),m3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},h3=Go.length;function x3(e,{enableHardwareAcceleration:t=!0,allowTransformNone:s=!0},n,a){let i="";for(let o=0;o<h3;o++){const l=Go[o];if(e[l]!==void 0){const d=m3[l]||l;i+=`${d}(${e[l]}) `}}return t&&!e.z&&(i+="translateZ(0)"),i=i.trim(),a?i=a(e,n?"":i):s&&n&&(i="none"),i}const zw=e=>t=>typeof t=="string"&&t.startsWith(e),Ww=zw("--"),lh=zw("var(--"),p3=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,f3=(e,t)=>t&&typeof e=="number"?t.transform(e):e,cn=(e,t,s)=>Math.min(Math.max(s,e),t),ua={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Xi={...ua,transform:e=>cn(0,1,e)},_l={...ua,default:1},Zi=e=>Math.round(e*1e5)/1e5,Pc=/(-)?([\d]*\.?[\d])+/g,qw=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,g3=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qo(e){return typeof e=="string"}const Ko=e=>({test:t=>Qo(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ms=Ko("deg"),Ur=Ko("%"),ne=Ko("px"),b3=Ko("vh"),y3=Ko("vw"),Ig={...Ur,parse:e=>Ur.parse(e)/100,transform:e=>Ur.transform(e*100)},Pg={...ua,transform:Math.round},Hw={borderWidth:ne,borderTopWidth:ne,borderRightWidth:ne,borderBottomWidth:ne,borderLeftWidth:ne,borderRadius:ne,radius:ne,borderTopLeftRadius:ne,borderTopRightRadius:ne,borderBottomRightRadius:ne,borderBottomLeftRadius:ne,width:ne,maxWidth:ne,height:ne,maxHeight:ne,size:ne,top:ne,right:ne,bottom:ne,left:ne,padding:ne,paddingTop:ne,paddingRight:ne,paddingBottom:ne,paddingLeft:ne,margin:ne,marginTop:ne,marginRight:ne,marginBottom:ne,marginLeft:ne,rotate:Ms,rotateX:Ms,rotateY:Ms,rotateZ:Ms,scale:_l,scaleX:_l,scaleY:_l,scaleZ:_l,skew:Ms,skewX:Ms,skewY:Ms,distance:ne,translateX:ne,translateY:ne,translateZ:ne,x:ne,y:ne,z:ne,perspective:ne,transformPerspective:ne,opacity:Xi,originX:Ig,originY:Ig,originZ:ne,zIndex:Pg,fillOpacity:Xi,strokeOpacity:Xi,numOctaves:Pg};function qx(e,t,s,n){const{style:a,vars:i,transform:o,transformOrigin:l}=e;let d=!1,c=!1,u=!0;for(const m in t){const h=t[m];if(Ww(m)){i[m]=h;continue}const x=Hw[m],g=f3(h,x);if(ca.has(m)){if(d=!0,o[m]=g,!u)continue;h!==(x.default||0)&&(u=!1)}else m.startsWith("origin")?(c=!0,l[m]=g):a[m]=g}if(t.transform||(d||n?a.transform=x3(e.transform,s,u,n):a.transform&&(a.transform="none")),c){const{originX:m="50%",originY:h="50%",originZ:x=0}=l;a.transformOrigin=`${m} ${h} ${x}`}}const Hx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Gw(e,t,s){for(const n in t)!$t(t[n])&&!$w(n,s)&&(e[n]=t[n])}function v3({transformTemplate:e},t,s){return f.useMemo(()=>{const n=Hx();return qx(n,t,{enableHardwareAcceleration:!s},e),Object.assign({},n.vars,n.style)},[t])}function w3(e,t,s){const n=e.style||{},a={};return Gw(a,n,e),Object.assign(a,v3(e,t,s)),e.transformValues?e.transformValues(a):a}function k3(e,t,s){const n={},a=w3(e,t,s);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,a.userSelect=a.WebkitUserSelect=a.WebkitTouchCallout="none",a.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=a,n}const j3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ud(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||j3.has(e)}let Qw=e=>!Ud(e);function N3(e){e&&(Qw=t=>t.startsWith("on")?!Ud(t):e(t))}try{N3(require("@emotion/is-prop-valid").default)}catch{}function S3(e,t,s){const n={};for(const a in e)a==="values"&&typeof e.values=="object"||(Qw(a)||s===!0&&Ud(a)||!t&&!Ud(a)||e.draggable&&a.startsWith("onDrag"))&&(n[a]=e[a]);return n}function Ag(e,t,s){return typeof e=="string"?e:ne.transform(t+s*e)}function C3(e,t,s){const n=Ag(t,e.x,e.width),a=Ag(s,e.y,e.height);return`${n} ${a}`}const T3={offset:"stroke-dashoffset",array:"stroke-dasharray"},_3={offset:"strokeDashoffset",array:"strokeDasharray"};function I3(e,t,s=1,n=0,a=!0){e.pathLength=1;const i=a?T3:_3;e[i.offset]=ne.transform(-n);const o=ne.transform(t),l=ne.transform(s);e[i.array]=`${o} ${l}`}function Gx(e,{attrX:t,attrY:s,attrScale:n,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:d=0,...c},u,m,h){if(qx(e,c,u,h),m){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:x,style:g,dimensions:v}=e;x.transform&&(v&&(g.transform=x.transform),delete x.transform),v&&(a!==void 0||i!==void 0||g.transform)&&(g.transformOrigin=C3(v,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(x.x=t),s!==void 0&&(x.y=s),n!==void 0&&(x.scale=n),o!==void 0&&I3(x,o,l,d,!1)}const Kw=()=>({...Hx(),attrs:{}}),Qx=e=>typeof e=="string"&&e.toLowerCase()==="svg";function P3(e,t,s,n){const a=f.useMemo(()=>{const i=Kw();return Gx(i,t,{enableHardwareAcceleration:!1},Qx(n),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Gw(i,e.style,e),a.style={...i,...a.style}}return a}function A3(e=!1){return(s,n,a,{latestValues:i},o)=>{const d=(Wx(s)?P3:k3)(n,i,o,s),u={...S3(n,typeof s=="string",e),...d,ref:a},{children:m}=n,h=f.useMemo(()=>$t(m)?m.get():m,[m]);return f.createElement(s,{...u,children:h})}}function Yw(e,{style:t,vars:s},n,a){Object.assign(e.style,t,a&&a.getProjectionStyles(n));for(const i in s)e.style.setProperty(i,s[i])}const Jw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Xw(e,t,s,n){Yw(e,t,void 0,n);for(const a in t.attrs)e.setAttribute(Jw.has(a)?a:Bx(a),t.attrs[a])}function Kx(e,t){const{style:s}=e,n={};for(const a in s)($t(s[a])||t.style&&$t(t.style[a])||$w(a,e))&&(n[a]=s[a]);return n}function Zw(e,t){const s=Kx(e,t);for(const n in e)if($t(e[n])||$t(t[n])){const a=Go.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[a]=e[n]}return s}function Yx(e,t,s,n={},a={}){return typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,a)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(s!==void 0?s:e.custom,n,a)),t}function ek(e){const t=f.useRef(null);return t.current===null&&(t.current=e()),t.current}const Bd=e=>Array.isArray(e),E3=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),M3=e=>Bd(e)?e[e.length-1]||0:e;function Jl(e){const t=$t(e)?e.get():e;return E3(t)?t.toValue():t}function R3({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:s},n,a,i){const o={latestValues:L3(n,a,i,e),renderState:t()};return s&&(o.mount=l=>s(n,l,o)),o}const tk=e=>(t,s)=>{const n=f.useContext(Sc),a=f.useContext(Cc),i=()=>R3(e,t,n,a);return s?i():ek(i)};function L3(e,t,s,n){const a={},i=n(e,{});for(const h in i)a[h]=Jl(i[h]);let{initial:o,animate:l}=e;const d=Ic(e),c=Bw(e);t&&c&&!d&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=s?s.initial===!1:!1;u=u||o===!1;const m=u?l:o;return m&&typeof m!="boolean"&&!_c(m)&&(Array.isArray(m)?m:[m]).forEach(x=>{const g=Yx(e,x);if(!g)return;const{transitionEnd:v,transition:y,...p}=g;for(const b in p){let w=p[b];if(Array.isArray(w)){const k=u?w.length-1:0;w=w[k]}w!==null&&(a[b]=w)}for(const b in v)a[b]=v[b]}),a}const $e=e=>e;class Eg{constructor(){this.order=[],this.scheduled=new Set}add(t){if(!this.scheduled.has(t))return this.scheduled.add(t),this.order.push(t),!0}remove(t){const s=this.order.indexOf(t);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(t))}clear(){this.order.length=0,this.scheduled.clear()}}function D3(e){let t=new Eg,s=new Eg,n=0,a=!1,i=!1;const o=new WeakSet,l={schedule:(d,c=!1,u=!1)=>{const m=u&&a,h=m?t:s;return c&&o.add(d),h.add(d)&&m&&a&&(n=t.order.length),d},cancel:d=>{s.remove(d),o.delete(d)},process:d=>{if(a){i=!0;return}if(a=!0,[t,s]=[s,t],s.clear(),n=t.order.length,n)for(let c=0;c<n;c++){const u=t.order[c];u(d),o.has(u)&&(l.schedule(u),e())}a=!1,i&&(i=!1,l.process(d))}};return l}const Il=["prepare","read","update","preRender","render","postRender"],O3=40;function F3(e,t){let s=!1,n=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=Il.reduce((m,h)=>(m[h]=D3(()=>s=!0),m),{}),o=m=>i[m].process(a),l=()=>{const m=performance.now();s=!1,a.delta=n?1e3/60:Math.max(Math.min(m-a.timestamp,O3),1),a.timestamp=m,a.isProcessing=!0,Il.forEach(o),a.isProcessing=!1,s&&t&&(n=!1,e(l))},d=()=>{s=!0,n=!0,a.isProcessing||e(l)};return{schedule:Il.reduce((m,h)=>{const x=i[h];return m[h]=(g,v=!1,y=!1)=>(s||d(),x.schedule(g,v,y)),m},{}),cancel:m=>Il.forEach(h=>i[h].cancel(m)),state:a,steps:i}}const{schedule:Ce,cancel:fs,state:gt,steps:Pu}=F3(typeof requestAnimationFrame<"u"?requestAnimationFrame:$e,!0),U3={useVisualState:tk({scrapeMotionValuesFromProps:Zw,createRenderState:Kw,onMount:(e,t,{renderState:s,latestValues:n})=>{Ce.read(()=>{try{s.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),Ce.render(()=>{Gx(s,n,{enableHardwareAcceleration:!1},Qx(t.tagName),e.transformTemplate),Xw(t,s)})}})},B3={useVisualState:tk({scrapeMotionValuesFromProps:Kx,createRenderState:Hx})};function V3(e,{forwardMotionProps:t=!1},s,n){return{...Wx(e)?U3:B3,preloadedFeatures:s,useRender:A3(t),createVisualElement:n,Component:e}}function ss(e,t,s,n={passive:!0}){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s)}const rk=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Ac(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const $3=e=>t=>rk(t)&&e(t,Ac(t));function os(e,t,s,n){return ss(e,t,$3(s),n)}const z3=(e,t)=>s=>t(e(s)),sn=(...e)=>e.reduce(z3);function sk(e){let t=null;return()=>{const s=()=>{t=null};return t===null?(t=e,s):!1}}const Mg=sk("dragHorizontal"),Rg=sk("dragVertical");function nk(e){let t=!1;if(e==="y")t=Rg();else if(e==="x")t=Mg();else{const s=Mg(),n=Rg();s&&n?t=()=>{s(),n()}:(s&&s(),n&&n())}return t}function ak(){const e=nk(!0);return e?(e(),!1):!0}class bn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function Lg(e,t){const s="pointer"+(t?"enter":"leave"),n="onHover"+(t?"Start":"End"),a=(i,o)=>{if(i.pointerType==="touch"||ak())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[n]&&Ce.update(()=>l[n](i,o))};return os(e.current,s,a,{passive:!e.getProps()[n]})}class W3 extends bn{mount(){this.unmount=sn(Lg(this.node,!0),Lg(this.node,!1))}unmount(){}}class q3 extends bn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sn(ss(this.node.current,"focus",()=>this.onFocus()),ss(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ik=(e,t)=>t?e===t?!0:ik(e,t.parentElement):!1;function Au(e,t){if(!t)return;const s=new PointerEvent("pointer"+e);t(s,Ac(s))}class H3 extends bn{constructor(){super(...arguments),this.removeStartListeners=$e,this.removeEndListeners=$e,this.removeAccessibleListeners=$e,this.startPointerPress=(t,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=os(window,"pointerup",(l,d)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:m}=this.node.getProps();Ce.update(()=>{!m&&!ik(this.node.current,l.target)?u&&u(l,d):c&&c(l,d)})},{passive:!(n.onTap||n.onPointerUp)}),o=os(window,"pointercancel",(l,d)=>this.cancelPress(l,d),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=sn(i,o),this.startPress(t,s)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Au("up",(d,c)=>{const{onTap:u}=this.node.getProps();u&&Ce.update(()=>u(d,c))})};this.removeEndListeners(),this.removeEndListeners=ss(this.node.current,"keyup",o),Au("down",(l,d)=>{this.startPress(l,d)})},s=ss(this.node.current,"keydown",t),n=()=>{this.isPressing&&Au("cancel",(i,o)=>this.cancelPress(i,o))},a=ss(this.node.current,"blur",n);this.removeAccessibleListeners=sn(s,a)}}startPress(t,s){this.isPressing=!0;const{onTapStart:n,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ce.update(()=>n(t,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ak()}cancelPress(t,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ce.update(()=>n(t,s))}mount(){const t=this.node.getProps(),s=os(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),n=ss(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=sn(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const dh=new WeakMap,Eu=new WeakMap,G3=e=>{const t=dh.get(e.target);t&&t(e)},Q3=e=>{e.forEach(G3)};function K3({root:e,...t}){const s=e||document;Eu.has(s)||Eu.set(s,{});const n=Eu.get(s),a=JSON.stringify(t);return n[a]||(n[a]=new IntersectionObserver(Q3,{root:e,...t})),n[a]}function Y3(e,t,s){const n=K3(t);return dh.set(e,s),n.observe(e),()=>{dh.delete(e),n.unobserve(e)}}const J3={some:0,all:1};class X3 extends bn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:s,margin:n,amount:a="some",once:i}=t,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof a=="number"?a:J3[a]},l=d=>{const{isIntersecting:c}=d;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:m}=this.node.getProps(),h=c?u:m;h&&h(d)};return Y3(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:s}=this.node;["amount","margin","root"].some(Z3(t,s))&&this.startObserver()}unmount(){}}function Z3({viewport:e={}},{viewport:t={}}={}){return s=>e[s]!==t[s]}const eT={inView:{Feature:X3},tap:{Feature:H3},focus:{Feature:q3},hover:{Feature:W3}};function ok(e,t){if(!Array.isArray(t))return!1;const s=t.length;if(s!==e.length)return!1;for(let n=0;n<s;n++)if(t[n]!==e[n])return!1;return!0}function tT(e){const t={};return e.values.forEach((s,n)=>t[n]=s.get()),t}function rT(e){const t={};return e.values.forEach((s,n)=>t[n]=s.getVelocity()),t}function Ec(e,t,s){const n=e.getProps();return Yx(n,t,s!==void 0?s:n.custom,tT(e),rT(e))}let Jx=$e;const qn=e=>e*1e3,ls=e=>e/1e3,sT={current:!1},lk=e=>Array.isArray(e)&&typeof e[0]=="number";function dk(e){return!!(!e||typeof e=="string"&&ck[e]||lk(e)||Array.isArray(e)&&e.every(dk))}const Ui=([e,t,s,n])=>`cubic-bezier(${e}, ${t}, ${s}, ${n})`,ck={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ui([0,.65,.55,1]),circOut:Ui([.55,0,1,.45]),backIn:Ui([.31,.01,.66,-.59]),backOut:Ui([.33,1.53,.69,.99])};function uk(e){if(e)return lk(e)?Ui(e):Array.isArray(e)?e.map(uk):ck[e]}function nT(e,t,s,{delay:n=0,duration:a,repeat:i=0,repeatType:o="loop",ease:l,times:d}={}){const c={[t]:s};d&&(c.offset=d);const u=uk(l);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function aT(e,{repeat:t,repeatType:s="loop"}){const n=t&&s!=="loop"&&t%2===1?0:e.length-1;return e[n]}const mk=(e,t,s)=>(((1-3*s+3*t)*e+(3*s-6*t))*e+3*t)*e,iT=1e-7,oT=12;function lT(e,t,s,n,a){let i,o,l=0;do o=t+(s-t)/2,i=mk(o,n,a)-e,i>0?s=o:t=o;while(Math.abs(i)>iT&&++l<oT);return o}function Yo(e,t,s,n){if(e===t&&s===n)return $e;const a=i=>lT(i,0,1,e,s);return i=>i===0||i===1?i:mk(a(i),t,n)}const dT=Yo(.42,0,1,1),cT=Yo(0,0,.58,1),hk=Yo(.42,0,.58,1),uT=e=>Array.isArray(e)&&typeof e[0]!="number",xk=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,pk=e=>t=>1-e(1-t),Xx=e=>1-Math.sin(Math.acos(e)),fk=pk(Xx),mT=xk(Xx),gk=Yo(.33,1.53,.69,.99),Zx=pk(gk),hT=xk(Zx),xT=e=>(e*=2)<1?.5*Zx(e):.5*(2-Math.pow(2,-10*(e-1))),pT={linear:$e,easeIn:dT,easeInOut:hk,easeOut:cT,circIn:Xx,circInOut:mT,circOut:fk,backIn:Zx,backInOut:hT,backOut:gk,anticipate:xT},Dg=e=>{if(Array.isArray(e)){Jx(e.length===4);const[t,s,n,a]=e;return Yo(t,s,n,a)}else if(typeof e=="string")return pT[e];return e},ep=(e,t)=>s=>!!(Qo(s)&&g3.test(s)&&s.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(s,t)),bk=(e,t,s)=>n=>{if(!Qo(n))return n;const[a,i,o,l]=n.match(Pc);return{[e]:parseFloat(a),[t]:parseFloat(i),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},fT=e=>cn(0,255,e),Mu={...ua,transform:e=>Math.round(fT(e))},Dn={test:ep("rgb","red"),parse:bk("red","green","blue"),transform:({red:e,green:t,blue:s,alpha:n=1})=>"rgba("+Mu.transform(e)+", "+Mu.transform(t)+", "+Mu.transform(s)+", "+Zi(Xi.transform(n))+")"};function gT(e){let t="",s="",n="",a="";return e.length>5?(t=e.substring(1,3),s=e.substring(3,5),n=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),s=e.substring(2,3),n=e.substring(3,4),a=e.substring(4,5),t+=t,s+=s,n+=n,a+=a),{red:parseInt(t,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:a?parseInt(a,16)/255:1}}const ch={test:ep("#"),parse:gT,transform:Dn.transform},Ma={test:ep("hsl","hue"),parse:bk("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:s,alpha:n=1})=>"hsla("+Math.round(e)+", "+Ur.transform(Zi(t))+", "+Ur.transform(Zi(s))+", "+Zi(Xi.transform(n))+")"},St={test:e=>Dn.test(e)||ch.test(e)||Ma.test(e),parse:e=>Dn.test(e)?Dn.parse(e):Ma.test(e)?Ma.parse(e):ch.parse(e),transform:e=>Qo(e)?e:e.hasOwnProperty("red")?Dn.transform(e):Ma.transform(e)},De=(e,t,s)=>-s*e+s*t+e;function Ru(e,t,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?e+(t-e)*6*s:s<1/2?t:s<2/3?e+(t-e)*(2/3-s)*6:e}function bT({hue:e,saturation:t,lightness:s,alpha:n}){e/=360,t/=100,s/=100;let a=0,i=0,o=0;if(!t)a=i=o=s;else{const l=s<.5?s*(1+t):s+t-s*t,d=2*s-l;a=Ru(d,l,e+1/3),i=Ru(d,l,e),o=Ru(d,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}const Lu=(e,t,s)=>{const n=e*e;return Math.sqrt(Math.max(0,s*(t*t-n)+n))},yT=[ch,Dn,Ma],vT=e=>yT.find(t=>t.test(e));function Og(e){const t=vT(e);let s=t.parse(e);return t===Ma&&(s=bT(s)),s}const yk=(e,t)=>{const s=Og(e),n=Og(t),a={...s};return i=>(a.red=Lu(s.red,n.red,i),a.green=Lu(s.green,n.green,i),a.blue=Lu(s.blue,n.blue,i),a.alpha=De(s.alpha,n.alpha,i),Dn.transform(a))};function wT(e){var t,s;return isNaN(e)&&Qo(e)&&(((t=e.match(Pc))===null||t===void 0?void 0:t.length)||0)+(((s=e.match(qw))===null||s===void 0?void 0:s.length)||0)>0}const vk={regex:p3,countKey:"Vars",token:"${v}",parse:$e},wk={regex:qw,countKey:"Colors",token:"${c}",parse:St.parse},kk={regex:Pc,countKey:"Numbers",token:"${n}",parse:ua.parse};function Du(e,{regex:t,countKey:s,token:n,parse:a}){const i=e.tokenised.match(t);i&&(e["num"+s]=i.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...i.map(a)))}function Vd(e){const t=e.toString(),s={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&Du(s,vk),Du(s,wk),Du(s,kk),s}function jk(e){return Vd(e).values}function Nk(e){const{values:t,numColors:s,numVars:n,tokenised:a}=Vd(e),i=t.length;return o=>{let l=a;for(let d=0;d<i;d++)d<n?l=l.replace(vk.token,o[d]):d<n+s?l=l.replace(wk.token,St.transform(o[d])):l=l.replace(kk.token,Zi(o[d]));return l}}const kT=e=>typeof e=="number"?0:e;function jT(e){const t=jk(e);return Nk(e)(t.map(kT))}const un={test:wT,parse:jk,createTransformer:Nk,getAnimatableNone:jT},Sk=(e,t)=>s=>`${s>0?t:e}`;function Ck(e,t){return typeof e=="number"?s=>De(e,t,s):St.test(e)?yk(e,t):e.startsWith("var(")?Sk(e,t):_k(e,t)}const Tk=(e,t)=>{const s=[...e],n=s.length,a=e.map((i,o)=>Ck(i,t[o]));return i=>{for(let o=0;o<n;o++)s[o]=a[o](i);return s}},NT=(e,t)=>{const s={...e,...t},n={};for(const a in s)e[a]!==void 0&&t[a]!==void 0&&(n[a]=Ck(e[a],t[a]));return a=>{for(const i in n)s[i]=n[i](a);return s}},_k=(e,t)=>{const s=un.createTransformer(t),n=Vd(e),a=Vd(t);return n.numVars===a.numVars&&n.numColors===a.numColors&&n.numNumbers>=a.numNumbers?sn(Tk(n.values,a.values),s):Sk(e,t)},Eo=(e,t,s)=>{const n=t-e;return n===0?1:(s-e)/n},Fg=(e,t)=>s=>De(e,t,s);function ST(e){return typeof e=="number"?Fg:typeof e=="string"?St.test(e)?yk:_k:Array.isArray(e)?Tk:typeof e=="object"?NT:Fg}function CT(e,t,s){const n=[],a=s||ST(e[0]),i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const d=Array.isArray(t)?t[o]||$e:t;l=sn(d,l)}n.push(l)}return n}function Ik(e,t,{clamp:s=!0,ease:n,mixer:a}={}){const i=e.length;if(Jx(i===t.length),i===1)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=CT(t,n,a),l=o.length,d=c=>{let u=0;if(l>1)for(;u<e.length-2&&!(c<e[u+1]);u++);const m=Eo(e[u],e[u+1],c);return o[u](m)};return s?c=>d(cn(e[0],e[i-1],c)):d}function TT(e,t){const s=e[e.length-1];for(let n=1;n<=t;n++){const a=Eo(0,t,n);e.push(De(s,1,a))}}function _T(e){const t=[0];return TT(t,e.length-1),t}function IT(e,t){return e.map(s=>s*t)}function PT(e,t){return e.map(()=>t||hk).splice(0,e.length-1)}function $d({duration:e=300,keyframes:t,times:s,ease:n="easeInOut"}){const a=uT(n)?n.map(Dg):Dg(n),i={done:!1,value:t[0]},o=IT(s&&s.length===t.length?s:_T(t),e),l=Ik(o,t,{ease:Array.isArray(a)?a:PT(t,a)});return{calculatedDuration:e,next:d=>(i.value=l(d),i.done=d>=e,i)}}function Pk(e,t){return t?e*(1e3/t):0}const AT=5;function Ak(e,t,s){const n=Math.max(t-AT,0);return Pk(s-e(n),t-n)}const Ou=.001,ET=.01,MT=10,RT=.05,LT=1;function DT({duration:e=800,bounce:t=.25,velocity:s=0,mass:n=1}){let a,i,o=1-t;o=cn(RT,LT,o),e=cn(ET,MT,ls(e)),o<1?(a=c=>{const u=c*o,m=u*e,h=u-s,x=uh(c,o),g=Math.exp(-m);return Ou-h/x*g},i=c=>{const m=c*o*e,h=m*s+s,x=Math.pow(o,2)*Math.pow(c,2)*e,g=Math.exp(-m),v=uh(Math.pow(c,2),o);return(-a(c)+Ou>0?-1:1)*((h-x)*g)/v}):(a=c=>{const u=Math.exp(-c*e),m=(c-s)*e+1;return-Ou+u*m},i=c=>{const u=Math.exp(-c*e),m=(s-c)*(e*e);return u*m});const l=5/e,d=FT(a,i,l);if(e=qn(e),isNaN(d))return{stiffness:100,damping:10,duration:e};{const c=Math.pow(d,2)*n;return{stiffness:c,damping:o*2*Math.sqrt(n*c),duration:e}}}const OT=12;function FT(e,t,s){let n=s;for(let a=1;a<OT;a++)n=n-e(n)/t(n);return n}function uh(e,t){return e*Math.sqrt(1-t*t)}const UT=["duration","bounce"],BT=["stiffness","damping","mass"];function Ug(e,t){return t.some(s=>e[s]!==void 0)}function VT(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Ug(e,BT)&&Ug(e,UT)){const s=DT(e);t={...t,...s,mass:1},t.isResolvedFromDuration=!0}return t}function Ek({keyframes:e,restDelta:t,restSpeed:s,...n}){const a=e[0],i=e[e.length-1],o={done:!1,value:a},{stiffness:l,damping:d,mass:c,duration:u,velocity:m,isResolvedFromDuration:h}=VT({...n,velocity:-ls(n.velocity||0)}),x=m||0,g=d/(2*Math.sqrt(l*c)),v=i-a,y=ls(Math.sqrt(l/c)),p=Math.abs(v)<5;s||(s=p?.01:2),t||(t=p?.005:.5);let b;if(g<1){const w=uh(y,g);b=k=>{const j=Math.exp(-g*y*k);return i-j*((x+g*y*v)/w*Math.sin(w*k)+v*Math.cos(w*k))}}else if(g===1)b=w=>i-Math.exp(-y*w)*(v+(x+y*v)*w);else{const w=y*Math.sqrt(g*g-1);b=k=>{const j=Math.exp(-g*y*k),N=Math.min(w*k,300);return i-j*((x+g*y*v)*Math.sinh(N)+w*v*Math.cosh(N))/w}}return{calculatedDuration:h&&u||null,next:w=>{const k=b(w);if(h)o.done=w>=u;else{let j=x;w!==0&&(g<1?j=Ak(b,w,k):j=0);const N=Math.abs(j)<=s,_=Math.abs(i-k)<=t;o.done=N&&_}return o.value=o.done?i:k,o}}}function Bg({keyframes:e,velocity:t=0,power:s=.8,timeConstant:n=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:d,restDelta:c=.5,restSpeed:u}){const m=e[0],h={done:!1,value:m},x=A=>l!==void 0&&A<l||d!==void 0&&A>d,g=A=>l===void 0?d:d===void 0||Math.abs(l-A)<Math.abs(d-A)?l:d;let v=s*t;const y=m+v,p=o===void 0?y:o(y);p!==y&&(v=p-m);const b=A=>-v*Math.exp(-A/n),w=A=>p+b(A),k=A=>{const L=b(A),C=w(A);h.done=Math.abs(L)<=c,h.value=h.done?p:C};let j,N;const _=A=>{x(h.value)&&(j=A,N=Ek({keyframes:[h.value,g(h.value)],velocity:Ak(w,A,h.value),damping:a,stiffness:i,restDelta:c,restSpeed:u}))};return _(0),{calculatedDuration:null,next:A=>{let L=!1;return!N&&j===void 0&&(L=!0,k(A),_(A)),j!==void 0&&A>j?N.next(A-j):(!L&&k(A),h)}}}const $T=e=>{const t=({timestamp:s})=>e(s);return{start:()=>Ce.update(t,!0),stop:()=>fs(t),now:()=>gt.isProcessing?gt.timestamp:performance.now()}},Vg=2e4;function $g(e){let t=0;const s=50;let n=e.next(t);for(;!n.done&&t<Vg;)t+=s,n=e.next(t);return t>=Vg?1/0:t}const zT={decay:Bg,inertia:Bg,tween:$d,keyframes:$d,spring:Ek};function zd({autoplay:e=!0,delay:t=0,driver:s=$T,keyframes:n,type:a="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:d,onStop:c,onComplete:u,onUpdate:m,...h}){let x=1,g=!1,v,y;const p=()=>{y=new Promise(q=>{v=q})};p();let b;const w=zT[a]||$d;let k;w!==$d&&typeof n[0]!="number"&&(k=Ik([0,100],n,{clamp:!1}),n=[0,100]);const j=w({...h,keyframes:n});let N;l==="mirror"&&(N=w({...h,keyframes:[...n].reverse(),velocity:-(h.velocity||0)}));let _="idle",A=null,L=null,C=null;j.calculatedDuration===null&&i&&(j.calculatedDuration=$g(j));const{calculatedDuration:P}=j;let R=1/0,W=1/0;P!==null&&(R=P+o,W=R*(i+1)-o);let Y=0;const se=q=>{if(L===null)return;x>0&&(L=Math.min(L,q)),x<0&&(L=Math.min(q-W/x,L)),A!==null?Y=A:Y=Math.round(q-L)*x;const ce=Y-t*(x>=0?1:-1),ae=x>=0?ce<0:ce>W;Y=Math.max(ce,0),_==="finished"&&A===null&&(Y=W);let H=Y,le=j;if(i){const vn=Math.min(Y,W)/R;let Ns=Math.floor(vn),tr=vn%1;!tr&&vn>=1&&(tr=1),tr===1&&Ns--,Ns=Math.min(Ns,i+1),!!(Ns%2)&&(l==="reverse"?(tr=1-tr,o&&(tr-=o/R)):l==="mirror"&&(le=N)),H=cn(0,1,tr)*R}const ue=ae?{done:!1,value:n[0]}:le.next(H);k&&(ue.value=k(ue.value));let{done:xr}=ue;!ae&&P!==null&&(xr=x>=0?Y>=W:Y<=0);const pi=A===null&&(_==="finished"||_==="running"&&xr);return m&&m(ue.value),pi&&$(),ue},Q=()=>{b&&b.stop(),b=void 0},pe=()=>{_="idle",Q(),v(),p(),L=C=null},$=()=>{_="finished",u&&u(),Q(),v()},I=()=>{if(g)return;b||(b=s(se));const q=b.now();d&&d(),A!==null?L=q-A:(!L||_==="finished")&&(L=q),_==="finished"&&p(),C=L,A=null,_="running",b.start()};e&&I();const F={then(q,ce){return y.then(q,ce)},get time(){return ls(Y)},set time(q){q=qn(q),Y=q,A!==null||!b||x===0?A=q:L=b.now()-q/x},get duration(){const q=j.calculatedDuration===null?$g(j):j.calculatedDuration;return ls(q)},get speed(){return x},set speed(q){q===x||!b||(x=q,F.time=ls(Y))},get state(){return _},play:I,pause:()=>{_="paused",A=Y},stop:()=>{g=!0,_!=="idle"&&(_="idle",c&&c(),pe())},cancel:()=>{C!==null&&se(C),pe()},complete:()=>{_="finished"},sample:q=>(L=0,se(q))};return F}function WT(e){let t;return()=>(t===void 0&&(t=e()),t)}const qT=WT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),HT=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Pl=10,GT=2e4,QT=(e,t)=>t.type==="spring"||e==="backgroundColor"||!dk(t.ease);function KT(e,t,{onUpdate:s,onComplete:n,...a}){if(!(qT()&&HT.has(t)&&!a.repeatDelay&&a.repeatType!=="mirror"&&a.damping!==0&&a.type!=="inertia"))return!1;let o=!1,l,d,c=!1;const u=()=>{d=new Promise(w=>{l=w})};u();let{keyframes:m,duration:h=300,ease:x,times:g}=a;if(QT(t,a)){const w=zd({...a,repeat:0,delay:0});let k={done:!1,value:m[0]};const j=[];let N=0;for(;!k.done&&N<GT;)k=w.sample(N),j.push(k.value),N+=Pl;g=void 0,m=j,h=N-Pl,x="linear"}const v=nT(e.owner.current,t,m,{...a,duration:h,ease:x,times:g}),y=()=>{c=!1,v.cancel()},p=()=>{c=!0,Ce.update(y),l(),u()};return v.onfinish=()=>{c||(e.set(aT(m,a)),n&&n(),p())},{then(w,k){return d.then(w,k)},attachTimeline(w){return v.timeline=w,v.onfinish=null,$e},get time(){return ls(v.currentTime||0)},set time(w){v.currentTime=qn(w)},get speed(){return v.playbackRate},set speed(w){v.playbackRate=w},get duration(){return ls(h)},play:()=>{o||(v.play(),fs(y))},pause:()=>v.pause(),stop:()=>{if(o=!0,v.playState==="idle")return;const{currentTime:w}=v;if(w){const k=zd({...a,autoplay:!1});e.setWithVelocity(k.sample(w-Pl).value,k.sample(w).value,Pl)}p()},complete:()=>{c||v.finish()},cancel:p}}function YT({keyframes:e,delay:t,onUpdate:s,onComplete:n}){const a=()=>(s&&s(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:$e,pause:$e,stop:$e,then:i=>(i(),Promise.resolve()),cancel:$e,complete:$e});return t?zd({keyframes:[0,1],duration:0,delay:t,onComplete:a}):a()}const JT={type:"spring",stiffness:500,damping:25,restSpeed:10},XT=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),ZT={type:"keyframes",duration:.8},e_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},t_=(e,{keyframes:t})=>t.length>2?ZT:ca.has(e)?e.startsWith("scale")?XT(t[1]):JT:e_,mh=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(un.test(t)||t==="0")&&!t.startsWith("url(")),r_=new Set(["brightness","contrast","saturate","opacity"]);function s_(e){const[t,s]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=s.match(Pc)||[];if(!n)return e;const a=s.replace(n,"");let i=r_.has(t)?1:0;return n!==s&&(i*=100),t+"("+i+a+")"}const n_=/([a-z-]*)\(.*?\)/g,hh={...un,getAnimatableNone:e=>{const t=e.match(n_);return t?t.map(s_).join(" "):e}},a_={...Hw,color:St,backgroundColor:St,outlineColor:St,fill:St,stroke:St,borderColor:St,borderTopColor:St,borderRightColor:St,borderBottomColor:St,borderLeftColor:St,filter:hh,WebkitFilter:hh},tp=e=>a_[e];function Mk(e,t){let s=tp(e);return s!==hh&&(s=un),s.getAnimatableNone?s.getAnimatableNone(t):void 0}const Rk=e=>/^0[^.\s]+$/.test(e);function i_(e){if(typeof e=="number")return e===0;if(e!==null)return e==="none"||e==="0"||Rk(e)}function o_(e,t,s,n){const a=mh(t,s);let i;Array.isArray(s)?i=[...s]:i=[null,s];const o=n.from!==void 0?n.from:e.get();let l;const d=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),i_(i[c])&&d.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(l=i[c]);if(a&&d.length&&l)for(let c=0;c<d.length;c++){const u=d[c];i[u]=Mk(t,l)}return i}function l_({when:e,delay:t,delayChildren:s,staggerChildren:n,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:d,elapsed:c,...u}){return!!Object.keys(u).length}function rp(e,t){return e[t]||e.default||e}const d_={skipAnimations:!1},sp=(e,t,s,n={})=>a=>{const i=rp(n,e)||{},o=i.delay||n.delay||0;let{elapsed:l=0}=n;l=l-qn(o);const d=o_(t,e,s,i),c=d[0],u=d[d.length-1],m=mh(e,c),h=mh(e,u);let x={keyframes:d,velocity:t.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:g=>{t.set(g),i.onUpdate&&i.onUpdate(g)},onComplete:()=>{a(),i.onComplete&&i.onComplete()}};if(l_(i)||(x={...x,...t_(e,x)}),x.duration&&(x.duration=qn(x.duration)),x.repeatDelay&&(x.repeatDelay=qn(x.repeatDelay)),!m||!h||sT.current||i.type===!1||d_.skipAnimations)return YT(x);if(!n.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const g=KT(t,e,x);if(g)return g}return zd(x)};function Wd(e){return!!($t(e)&&e.add)}const Lk=e=>/^\-?\d*\.?\d+$/.test(e);function np(e,t){e.indexOf(t)===-1&&e.push(t)}function ap(e,t){const s=e.indexOf(t);s>-1&&e.splice(s,1)}class ip{constructor(){this.subscriptions=[]}add(t){return np(this.subscriptions,t),()=>ap(this.subscriptions,t)}notify(t,s,n){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,s,n);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const c_=e=>!isNaN(parseFloat(e));class u_{constructor(t,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,a=!0)=>{this.prev=this.current,this.current=n;const{delta:i,timestamp:o}=gt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Ce.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ce.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=c_(this.current),this.owner=s.owner}onChange(t){return this.on("change",t)}on(t,s){this.events[t]||(this.events[t]=new ip);const n=this.events[t].add(s);return t==="change"?()=>{n(),Ce.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,s){this.passiveEffect=t,this.stopPassiveEffect=s}set(t,s=!0){!s||!this.passiveEffect?this.updateAndNotify(t,s):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,s,n){this.set(s),this.prev=t,this.timeDelta=n}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Pk(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=t(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function si(e,t){return new u_(e,t)}const Dk=e=>t=>t.test(e),m_={test:e=>e==="auto",parse:e=>e},Ok=[ua,ne,Ur,Ms,y3,b3,m_],_i=e=>Ok.find(Dk(e)),h_=[...Ok,St,un],x_=e=>h_.find(Dk(e));function p_(e,t,s){e.hasValue(t)?e.getValue(t).set(s):e.addValue(t,si(s))}function f_(e,t){const s=Ec(e,t);let{transitionEnd:n={},transition:a={},...i}=s?e.makeTargetAnimatable(s,!1):{};i={...i,...n};for(const o in i){const l=M3(i[o]);p_(e,o,l)}}function g_(e,t,s){var n,a;const i=Object.keys(t).filter(l=>!e.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const d=i[l],c=t[d];let u=null;Array.isArray(c)&&(u=c[0]),u===null&&(u=(a=(n=s[d])!==null&&n!==void 0?n:e.readValue(d))!==null&&a!==void 0?a:t[d]),u!=null&&(typeof u=="string"&&(Lk(u)||Rk(u))?u=parseFloat(u):!x_(u)&&un.test(c)&&(u=Mk(d,c)),e.addValue(d,si(u,{owner:e})),s[d]===void 0&&(s[d]=u),u!==null&&e.setBaseTarget(d,u))}}function b_(e,t){return t?(t[e]||t.default||t).from:void 0}function y_(e,t,s){const n={};for(const a in e){const i=b_(a,t);if(i!==void 0)n[a]=i;else{const o=s.getValue(a);o&&(n[a]=o.get())}}return n}function v_({protectedKeys:e,needsAnimating:t},s){const n=e.hasOwnProperty(s)&&t[s]!==!0;return t[s]=!1,n}function w_(e,t){const s=e.get();if(Array.isArray(t)){for(let n=0;n<t.length;n++)if(t[n]!==s)return!0}else return s!==t}function Fk(e,t,{delay:s=0,transitionOverride:n,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=e.makeTargetAnimatable(t);const d=e.getValue("willChange");n&&(i=n);const c=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const m in l){const h=e.getValue(m),x=l[m];if(!h||x===void 0||u&&v_(u,m))continue;const g={delay:s,elapsed:0,...rp(i||{},m)};if(window.HandoffAppearAnimations){const p=e.getProps()[Uw];if(p){const b=window.HandoffAppearAnimations(p,m,h,Ce);b!==null&&(g.elapsed=b,g.isHandoff=!0)}}let v=!g.isHandoff&&!w_(h,x);if(g.type==="spring"&&(h.getVelocity()||g.velocity)&&(v=!1),h.animation&&(v=!1),v)continue;h.start(sp(m,h,x,e.shouldReduceMotion&&ca.has(m)?{type:!1}:g));const y=h.animation;Wd(d)&&(d.add(m),y.then(()=>d.remove(m))),c.push(y)}return o&&Promise.all(c).then(()=>{o&&f_(e,o)}),c}function xh(e,t,s={}){const n=Ec(e,t,s.custom);let{transition:a=e.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(a=s.transitionOverride);const i=n?()=>Promise.all(Fk(e,n,s)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:c=0,staggerChildren:u,staggerDirection:m}=a;return k_(e,t,c+d,u,m,s)}:()=>Promise.resolve(),{when:l}=a;if(l){const[d,c]=l==="beforeChildren"?[i,o]:[o,i];return d().then(()=>c())}else return Promise.all([i(),o(s.delay)])}function k_(e,t,s=0,n=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*n,d=a===1?(c=0)=>c*n:(c=0)=>l-c*n;return Array.from(e.variantChildren).sort(j_).forEach((c,u)=>{c.notify("AnimationStart",t),o.push(xh(c,t,{...i,delay:s+d(u)}).then(()=>c.notify("AnimationComplete",t)))}),Promise.all(o)}function j_(e,t){return e.sortNodePosition(t)}function N_(e,t,s={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const a=t.map(i=>xh(e,i,s));n=Promise.all(a)}else if(typeof t=="string")n=xh(e,t,s);else{const a=typeof t=="function"?Ec(e,t,s.custom):t;n=Promise.all(Fk(e,a,s))}return n.then(()=>e.notify("AnimationComplete",t))}const S_=[...Vx].reverse(),C_=Vx.length;function T_(e){return t=>Promise.all(t.map(({animation:s,options:n})=>N_(e,s,n)))}function __(e){let t=T_(e);const s=P_();let n=!0;const a=(d,c)=>{const u=Ec(e,c);if(u){const{transition:m,transitionEnd:h,...x}=u;d={...d,...x,...h}}return d};function i(d){t=d(e)}function o(d,c){const u=e.getProps(),m=e.getVariantContext(!0)||{},h=[],x=new Set;let g={},v=1/0;for(let p=0;p<C_;p++){const b=S_[p],w=s[b],k=u[b]!==void 0?u[b]:m[b],j=Po(k),N=b===c?w.isActive:null;N===!1&&(v=p);let _=k===m[b]&&k!==u[b]&&j;if(_&&n&&e.manuallyAnimateOnMount&&(_=!1),w.protectedKeys={...g},!w.isActive&&N===null||!k&&!w.prevProp||_c(k)||typeof k=="boolean")continue;let L=I_(w.prevProp,k)||b===c&&w.isActive&&!_&&j||p>v&&j,C=!1;const P=Array.isArray(k)?k:[k];let R=P.reduce(a,{});N===!1&&(R={});const{prevResolvedValues:W={}}=w,Y={...W,...R},se=Q=>{L=!0,x.has(Q)&&(C=!0,x.delete(Q)),w.needsAnimating[Q]=!0};for(const Q in Y){const pe=R[Q],$=W[Q];if(g.hasOwnProperty(Q))continue;let I=!1;Bd(pe)&&Bd($)?I=!ok(pe,$):I=pe!==$,I?pe!==void 0?se(Q):x.add(Q):pe!==void 0&&x.has(Q)?se(Q):w.protectedKeys[Q]=!0}w.prevProp=k,w.prevResolvedValues=R,w.isActive&&(g={...g,...R}),n&&e.blockInitialAnimation&&(L=!1),L&&(!_||C)&&h.push(...P.map(Q=>({animation:Q,options:{type:b,...d}})))}if(x.size){const p={};x.forEach(b=>{const w=e.getBaseTarget(b);w!==void 0&&(p[b]=w)}),h.push({animation:p})}let y=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),n=!1,y?t(h):Promise.resolve()}function l(d,c,u){var m;if(s[d].isActive===c)return Promise.resolve();(m=e.variantChildren)===null||m===void 0||m.forEach(x=>{var g;return(g=x.animationState)===null||g===void 0?void 0:g.setActive(d,c)}),s[d].isActive=c;const h=o(u,d);for(const x in s)s[x].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>s}}function I_(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!ok(t,e):!1}function Nn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function P_(){return{animate:Nn(!0),whileInView:Nn(),whileHover:Nn(),whileTap:Nn(),whileDrag:Nn(),whileFocus:Nn(),exit:Nn()}}class A_ extends bn{constructor(t){super(t),t.animationState||(t.animationState=__(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),_c(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:s}=this.node.prevProps||{};t!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let E_=0;class M_ extends bn{constructor(){super(...arguments),this.id=E_++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:a}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===a)return;const i=this.node.animationState.setActive("exit",!t,{custom:n??this.node.getProps().custom});s&&!t&&i.then(()=>s(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const R_={animation:{Feature:A_},exit:{Feature:M_}},zg=(e,t)=>Math.abs(e-t);function L_(e,t){const s=zg(e.x,t.x),n=zg(e.y,t.y);return Math.sqrt(s**2+n**2)}class Uk{constructor(t,s,{transformPagePoint:n,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Uu(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,x=L_(m.offset,{x:0,y:0})>=3;if(!h&&!x)return;const{point:g}=m,{timestamp:v}=gt;this.history.push({...g,timestamp:v});const{onStart:y,onMove:p}=this.handlers;h||(y&&y(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),p&&p(this.lastMoveEvent,m)},this.handlePointerMove=(m,h)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Fu(h,this.transformPagePoint),Ce.update(this.updatePoint,!0)},this.handlePointerUp=(m,h)=>{this.end();const{onEnd:x,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=Uu(m.type==="pointercancel"?this.lastMoveEventInfo:Fu(h,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,y),g&&g(m,y)},!rk(t))return;this.dragSnapToOrigin=i,this.handlers=s,this.transformPagePoint=n,this.contextWindow=a||window;const o=Ac(t),l=Fu(o,this.transformPagePoint),{point:d}=l,{timestamp:c}=gt;this.history=[{...d,timestamp:c}];const{onSessionStart:u}=s;u&&u(t,Uu(l,this.history)),this.removeListeners=sn(os(this.contextWindow,"pointermove",this.handlePointerMove),os(this.contextWindow,"pointerup",this.handlePointerUp),os(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),fs(this.updatePoint)}}function Fu(e,t){return t?{point:t(e.point)}:e}function Wg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Uu({point:e},t){return{point:e,delta:Wg(e,Bk(t)),offset:Wg(e,D_(t)),velocity:O_(t,.1)}}function D_(e){return e[0]}function Bk(e){return e[e.length-1]}function O_(e,t){if(e.length<2)return{x:0,y:0};let s=e.length-1,n=null;const a=Bk(e);for(;s>=0&&(n=e[s],!(a.timestamp-n.timestamp>qn(t)));)s--;if(!n)return{x:0,y:0};const i=ls(a.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-n.x)/i,y:(a.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Jt(e){return e.max-e.min}function ph(e,t=0,s=.01){return Math.abs(e-t)<=s}function qg(e,t,s,n=.5){e.origin=n,e.originPoint=De(t.min,t.max,e.origin),e.scale=Jt(s)/Jt(t),(ph(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=De(s.min,s.max,e.origin)-e.originPoint,(ph(e.translate)||isNaN(e.translate))&&(e.translate=0)}function eo(e,t,s,n){qg(e.x,t.x,s.x,n?n.originX:void 0),qg(e.y,t.y,s.y,n?n.originY:void 0)}function Hg(e,t,s){e.min=s.min+t.min,e.max=e.min+Jt(t)}function F_(e,t,s){Hg(e.x,t.x,s.x),Hg(e.y,t.y,s.y)}function Gg(e,t,s){e.min=t.min-s.min,e.max=e.min+Jt(t)}function to(e,t,s){Gg(e.x,t.x,s.x),Gg(e.y,t.y,s.y)}function U_(e,{min:t,max:s},n){return t!==void 0&&e<t?e=n?De(t,e,n.min):Math.max(e,t):s!==void 0&&e>s&&(e=n?De(s,e,n.max):Math.min(e,s)),e}function Qg(e,t,s){return{min:t!==void 0?e.min+t:void 0,max:s!==void 0?e.max+s-(e.max-e.min):void 0}}function B_(e,{top:t,left:s,bottom:n,right:a}){return{x:Qg(e.x,s,a),y:Qg(e.y,t,n)}}function Kg(e,t){let s=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([s,n]=[n,s]),{min:s,max:n}}function V_(e,t){return{x:Kg(e.x,t.x),y:Kg(e.y,t.y)}}function $_(e,t){let s=.5;const n=Jt(e),a=Jt(t);return a>n?s=Eo(t.min,t.max-n,e.min):n>a&&(s=Eo(e.min,e.max-a,t.min)),cn(0,1,s)}function z_(e,t){const s={};return t.min!==void 0&&(s.min=t.min-e.min),t.max!==void 0&&(s.max=t.max-e.min),s}const fh=.35;function W_(e=fh){return e===!1?e=0:e===!0&&(e=fh),{x:Yg(e,"left","right"),y:Yg(e,"top","bottom")}}function Yg(e,t,s){return{min:Jg(e,t),max:Jg(e,s)}}function Jg(e,t){return typeof e=="number"?e:e[t]||0}const Xg=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ra=()=>({x:Xg(),y:Xg()}),Zg=()=>({min:0,max:0}),He=()=>({x:Zg(),y:Zg()});function ar(e){return[e("x"),e("y")]}function Vk({top:e,left:t,right:s,bottom:n}){return{x:{min:t,max:s},y:{min:e,max:n}}}function q_({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function H_(e,t){if(!t)return e;const s=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function Bu(e){return e===void 0||e===1}function gh({scale:e,scaleX:t,scaleY:s}){return!Bu(e)||!Bu(t)||!Bu(s)}function Tn(e){return gh(e)||$k(e)||e.z||e.rotate||e.rotateX||e.rotateY}function $k(e){return e0(e.x)||e0(e.y)}function e0(e){return e&&e!=="0%"}function qd(e,t,s){const n=e-s,a=t*n;return s+a}function t0(e,t,s,n,a){return a!==void 0&&(e=qd(e,a,n)),qd(e,s,n)+t}function bh(e,t=0,s=1,n,a){e.min=t0(e.min,t,s,n,a),e.max=t0(e.max,t,s,n,a)}function zk(e,{x:t,y:s}){bh(e.x,t.translate,t.scale,t.originPoint),bh(e.y,s.translate,s.scale,s.originPoint)}function G_(e,t,s,n=!1){const a=s.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=s[l],o=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&La(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,zk(e,o)),n&&Tn(i.latestValues)&&La(e,i.latestValues))}t.x=r0(t.x),t.y=r0(t.y)}function r0(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ds(e,t){e.min=e.min+t,e.max=e.max+t}function s0(e,t,[s,n,a]){const i=t[a]!==void 0?t[a]:.5,o=De(e.min,e.max,i);bh(e,t[s],t[n],o,t.scale)}const Q_=["x","scaleX","originX"],K_=["y","scaleY","originY"];function La(e,t){s0(e.x,t,Q_),s0(e.y,t,K_)}function Wk(e,t){return Vk(H_(e.getBoundingClientRect(),t))}function Y_(e,t,s){const n=Wk(e,s),{scroll:a}=t;return a&&(Ds(n.x,a.offset.x),Ds(n.y,a.offset.y)),n}const qk=({current:e})=>e?e.ownerDocument.defaultView:null,J_=new WeakMap;class X_{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=He(),this.visualElement=t}start(t,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Ac(u,"page").point)},i=(u,m)=>{const{drag:h,dragPropagation:x,onDragStart:g}=this.getProps();if(h&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=nk(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ar(y=>{let p=this.getAxisMotionValue(y).get()||0;if(Ur.test(p)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[y];w&&(p=Jt(w)*(parseFloat(p)/100))}}this.originPoint[y]=p}),g&&Ce.update(()=>g(u,m),!1,!0);const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},o=(u,m)=>{const{dragPropagation:h,dragDirectionLock:x,onDirectionLock:g,onDrag:v}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=m;if(x&&this.currentDirection===null){this.currentDirection=Z_(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",m.point,y),this.updateAxis("y",m.point,y),this.visualElement.render(),v&&v(u,m)},l=(u,m)=>this.stop(u,m),d=()=>ar(u=>{var m;return this.getAnimationState(u)==="paused"&&((m=this.getAxisMotionValue(u).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new Uk(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:qk(this.visualElement)})}stop(t,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Ce.update(()=>i(t,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:s}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(t,s,n){const{drag:a}=this.getProps();if(!n||!Al(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=U_(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:s,dragElastic:n}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;s&&Ea(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&a?this.constraints=B_(a.layoutBox,s):this.constraints=!1,this.elastic=W_(n),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ar(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=z_(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:s}=this.getProps();if(!t||!Ea(t))return!1;const n=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Y_(n,a.root,this.visualElement.getTransformPagePoint());let o=V_(a.layout.layoutBox,i);if(s){const l=s(q_(o));this.hasMutatedConstraints=!!l,l&&(o=Vk(l))}return o}startAnimation(t){const{drag:s,dragMomentum:n,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),d=this.constraints||{},c=ar(u=>{if(!Al(u,s,this.currentDirection))return;let m=d&&d[u]||{};o&&(m={min:0,max:0});const h=a?200:1e6,x=a?40:1e7,g={type:"inertia",velocity:n?t[u]:0,bounceStiffness:h,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(u,g)});return Promise.all(c).then(l)}startAxisValueAnimation(t,s){const n=this.getAxisMotionValue(t);return n.start(sp(t,n,0,s))}stopAnimation(){ar(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ar(t=>{var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(t){var s;return(s=this.getAxisMotionValue(t).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(t){const s="_drag"+t.toUpperCase(),n=this.visualElement.getProps(),a=n[s];return a||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){ar(s=>{const{drag:n}=this.getProps();if(!Al(s,n,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(s);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[s];i.set(t[s]-De(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!Ea(s)||!n||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ar(o=>{const l=this.getAxisMotionValue(o);if(l){const d=l.get();a[o]=$_({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ar(o=>{if(!Al(o,t,null))return;const l=this.getAxisMotionValue(o),{min:d,max:c}=this.constraints[o];l.set(De(d,c,a[o]))})}addListeners(){if(!this.visualElement.current)return;J_.set(this.visualElement,this);const t=this.visualElement.current,s=os(t,"pointerdown",d=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(d)}),n=()=>{const{dragConstraints:d}=this.getProps();Ea(d)&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",n);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),n();const o=ss(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:d,hasLayoutChanged:c})=>{this.isDragging&&c&&(ar(u=>{const m=this.getAxisMotionValue(u);m&&(this.originPoint[u]+=d[u].translate,m.set(m.get()+d[u].translate))}),this.visualElement.render())});return()=>{o(),s(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=fh,dragMomentum:l=!0}=t;return{...t,drag:s,dragDirectionLock:n,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Al(e,t,s){return(t===!0||t===e)&&(s===null||s===e)}function Z_(e,t=10){let s=null;return Math.abs(e.y)>t?s="y":Math.abs(e.x)>t&&(s="x"),s}class eI extends bn{constructor(t){super(t),this.removeGroupControls=$e,this.removeListeners=$e,this.controls=new X_(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||$e}unmount(){this.removeGroupControls(),this.removeListeners()}}const n0=e=>(t,s)=>{e&&Ce.update(()=>e(t,s))};class tI extends bn{constructor(){super(...arguments),this.removePointerDownListener=$e}onPointerDown(t){this.session=new Uk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:s,onPan:n,onPanEnd:a}=this.node.getProps();return{onSessionStart:n0(t),onStart:n0(s),onMove:n,onEnd:(i,o)=>{delete this.session,a&&Ce.update(()=>a(i,o))}}}mount(){this.removePointerDownListener=os(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function rI(){const e=f.useContext(Cc);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:n}=e,a=f.useId();return f.useEffect(()=>n(a),[]),!t&&s?[!1,()=>s&&s(a)]:[!0]}const Xl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function a0(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ii={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ne.test(e))e=parseFloat(e);else return e;const s=a0(e,t.target.x),n=a0(e,t.target.y);return`${s}% ${n}%`}},sI={correct:(e,{treeScale:t,projectionDelta:s})=>{const n=e,a=un.parse(e);if(a.length>5)return n;const i=un.createTransformer(e),o=typeof a[0]!="number"?1:0,l=s.x.scale*t.x,d=s.y.scale*t.y;a[0+o]/=l,a[1+o]/=d;const c=De(l,d,.5);return typeof a[2+o]=="number"&&(a[2+o]/=c),typeof a[3+o]=="number"&&(a[3+o]/=c),i(a)}};class nI extends $r.Component{componentDidMount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n,layoutId:a}=this.props,{projection:i}=t;u3(aI),i&&(s.group&&s.group.add(i),n&&n.register&&a&&n.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Xl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:s,visualElement:n,drag:a,isPresent:i}=this.props,o=n.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Ce.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),queueMicrotask(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),n&&n.deregister&&n.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Hk(e){const[t,s]=rI(),n=f.useContext(zx);return $r.createElement(nI,{...e,layoutGroup:n,switchLayoutGroup:f.useContext(Vw),isPresent:t,safeToRemove:s})}const aI={borderRadius:{...Ii,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ii,borderTopRightRadius:Ii,borderBottomLeftRadius:Ii,borderBottomRightRadius:Ii,boxShadow:sI},Gk=["TopLeft","TopRight","BottomLeft","BottomRight"],iI=Gk.length,i0=e=>typeof e=="string"?parseFloat(e):e,o0=e=>typeof e=="number"||ne.test(e);function oI(e,t,s,n,a,i){a?(e.opacity=De(0,s.opacity!==void 0?s.opacity:1,lI(n)),e.opacityExit=De(t.opacity!==void 0?t.opacity:1,0,dI(n))):i&&(e.opacity=De(t.opacity!==void 0?t.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<iI;o++){const l=`border${Gk[o]}Radius`;let d=l0(t,l),c=l0(s,l);if(d===void 0&&c===void 0)continue;d||(d=0),c||(c=0),d===0||c===0||o0(d)===o0(c)?(e[l]=Math.max(De(i0(d),i0(c),n),0),(Ur.test(c)||Ur.test(d))&&(e[l]+="%")):e[l]=c}(t.rotate||s.rotate)&&(e.rotate=De(t.rotate||0,s.rotate||0,n))}function l0(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const lI=Qk(0,.5,fk),dI=Qk(.5,.95,$e);function Qk(e,t,s){return n=>n<e?0:n>t?1:s(Eo(e,t,n))}function d0(e,t){e.min=t.min,e.max=t.max}function nr(e,t){d0(e.x,t.x),d0(e.y,t.y)}function c0(e,t,s,n,a){return e-=t,e=qd(e,1/s,n),a!==void 0&&(e=qd(e,1/a,n)),e}function cI(e,t=0,s=1,n=.5,a,i=e,o=e){if(Ur.test(t)&&(t=parseFloat(t),t=De(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=De(i.min,i.max,n);e===i&&(l-=t),e.min=c0(e.min,t,s,l,a),e.max=c0(e.max,t,s,l,a)}function u0(e,t,[s,n,a],i,o){cI(e,t[s],t[n],t[a],t.scale,i,o)}const uI=["x","scaleX","originX"],mI=["y","scaleY","originY"];function m0(e,t,s,n){u0(e.x,t,uI,s?s.x:void 0,n?n.x:void 0),u0(e.y,t,mI,s?s.y:void 0,n?n.y:void 0)}function h0(e){return e.translate===0&&e.scale===1}function Kk(e){return h0(e.x)&&h0(e.y)}function hI(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function Yk(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function x0(e){return Jt(e.x)/Jt(e.y)}class xI{constructor(){this.members=[]}add(t){np(this.members,t),t.scheduleRender()}remove(t){if(ap(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(t){const s=this.members.findIndex(a=>t===a);if(s===0)return!1;let n;for(let a=s;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,s){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,s&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:s,resumingFrom:n}=t;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function p0(e,t,s){let n="";const a=e.x.translate/t.x,i=e.y.translate/t.y;if((a||i)&&(n=`translate3d(${a}px, ${i}px, 0) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),s){const{rotate:d,rotateX:c,rotateY:u}=s;d&&(n+=`rotate(${d}deg) `),c&&(n+=`rotateX(${c}deg) `),u&&(n+=`rotateY(${u}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const pI=(e,t)=>e.depth-t.depth;class fI{constructor(){this.children=[],this.isDirty=!1}add(t){np(this.children,t),this.isDirty=!0}remove(t){ap(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(pI),this.isDirty=!1,this.children.forEach(t)}}function gI(e,t){const s=performance.now(),n=({timestamp:a})=>{const i=a-s;i>=t&&(fs(n),e(i-t))};return Ce.read(n,!0),()=>fs(n)}function bI(e){window.MotionDebug&&window.MotionDebug.record(e)}function yI(e){return e instanceof SVGElement&&e.tagName!=="svg"}function vI(e,t,s){const n=$t(e)?e:si(e);return n.start(sp("",n,t,s)),n.animation}const f0=["","X","Y","Z"],wI={visibility:"hidden"},g0=1e3;let kI=0;const _n={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Jk({attachResizeListener:e,defaultParent:t,measureScroll:s,checkIsScrollRoot:n,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=kI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_n.totalNodes=_n.resolvedTargetDeltas=_n.recalculatedProjection=0,this.nodes.forEach(SI),this.nodes.forEach(PI),this.nodes.forEach(AI),this.nodes.forEach(CI),bI(_n)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new fI)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new ip),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const d=this.eventHandlers.get(o);d&&d.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=yI(o),this.instance=o;const{layoutId:d,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(c||d)&&(this.isLayoutDirty=!0),e){let m;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=gI(h,250),Xl.hasAnimatedSinceResize&&(Xl.hasAnimatedSinceResize=!1,this.nodes.forEach(y0))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&u&&(d||c)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:h,hasRelativeTargetChanged:x,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||DI,{onLayoutAnimationStart:y,onLayoutAnimationComplete:p}=u.getProps(),b=!this.targetLayout||!Yk(this.targetLayout,g)||x,w=!h&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,w);const k={...rp(v,"layout"),onPlay:y,onComplete:p};(u.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k)}else h||y0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(EI),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const m=this.path[u];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:d}=this.options;if(l===void 0&&!d)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(b0);return}this.isUpdating||this.nodes.forEach(_I),this.isUpdating=!1,this.nodes.forEach(II),this.nodes.forEach(jI),this.nodes.forEach(NI),this.clearAllSnapshots();const l=performance.now();gt.delta=cn(0,1e3/60,l-gt.timestamp),gt.timestamp=l,gt.isProcessing=!0,Pu.update.process(gt),Pu.preRender.process(gt),Pu.render.process(gt),gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(TI),this.sharedNodes.forEach(MI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ce.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ce.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=He(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Kk(this.projectionDelta),d=this.getTransformTemplate(),c=d?d(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(l||Tn(this.latestValues)||u)&&(a(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let d=this.removeElementScroll(l);return o&&(d=this.removeTransform(d)),OI(d),{animationId:this.root.animationId,measuredBox:l,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return He();const l=o.measureViewportBox(),{scroll:d}=this.root;return d&&(Ds(l.x,d.offset.x),Ds(l.y,d.offset.y)),l}removeElementScroll(o){const l=He();nr(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d],{scroll:u,options:m}=c;if(c!==this.root&&u&&m.layoutScroll){if(u.isRoot){nr(l,o);const{scroll:h}=this.root;h&&(Ds(l.x,-h.offset.x),Ds(l.y,-h.offset.y))}Ds(l.x,u.offset.x),Ds(l.y,u.offset.y)}}return l}applyTransform(o,l=!1){const d=He();nr(d,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&La(d,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),Tn(u.latestValues)&&La(d,u.latestValues)}return Tn(this.latestValues)&&La(d,this.latestValues),d}removeTransform(o){const l=He();nr(l,o);for(let d=0;d<this.path.length;d++){const c=this.path[d];if(!c.instance||!Tn(c.latestValues))continue;gh(c.latestValues)&&c.updateSnapshot();const u=He(),m=c.measurePageBox();nr(u,m),m0(l,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return Tn(this.latestValues)&&m0(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==d;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:h}=this.options;if(!(!this.layout||!(m||h))){if(this.resolvedRelativeTargetAt=gt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),to(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=He(),this.targetWithTransforms=He()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),F_(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):nr(this.target,this.layout.layoutBox),zk(this.target,this.targetDelta)):nr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=He(),this.relativeTargetOrigin=He(),to(this.relativeTargetOrigin,this.target,x.target),nr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_n.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||gh(this.parent.latestValues)||$k(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),d=!!this.resumingFrom||this!==l;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||m))return;nr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,x=this.treeScale.y;G_(this.layoutCorrected,this.treeScale,this.path,d),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:g}=l;if(!g){this.projectionTransform&&(this.projectionDelta=Ra(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ra(),this.projectionDeltaWithTransform=Ra());const v=this.projectionTransform;eo(this.projectionDelta,this.layoutCorrected,g,this.latestValues),this.projectionTransform=p0(this.projectionDelta,this.treeScale),(this.projectionTransform!==v||this.treeScale.x!==h||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),_n.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const d=this.snapshot,c=d?d.latestValues:{},u={...this.latestValues},m=Ra();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=He(),x=d?d.source:void 0,g=this.layout?this.layout.source:void 0,v=x!==g,y=this.getStack(),p=!y||y.members.length<=1,b=!!(v&&!p&&this.options.crossfade===!0&&!this.path.some(LI));this.animationProgress=0;let w;this.mixTargetDelta=k=>{const j=k/1e3;v0(m.x,o.x,j),v0(m.y,o.y,j),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(to(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),RI(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&hI(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=He()),nr(w,this.relativeTarget)),v&&(this.animationValues=u,oI(u,c,this.latestValues,j,b,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ce.update(()=>{Xl.hasAnimatedSinceResize=!0,this.currentAnimation=vI(0,g0,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(g0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:d,layout:c,latestValues:u}=o;if(!(!l||!d||!c)){if(this!==o&&this.layout&&c&&Xk(this.options.animationType,this.layout.layoutBox,c.layoutBox)){d=this.target||He();const m=Jt(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+m;const h=Jt(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+h}nr(l,d),La(l,u),eo(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new xI),this.sharedNodes.get(o).add(l);const c=l.options.initialPromotionConfig;l.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:d}={}){const c=this.getStack();c&&c.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(l=!0),!l)return;const c={};for(let u=0;u<f0.length;u++){const m="rotate"+f0[u];d[m]&&(c[m]=d[m],o.setStaticValue(m,0))}o.render();for(const u in c)o.setStaticValue(u,c[u]);o.scheduleRender()}getProjectionStyles(o){var l,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return wI;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Jl(o==null?void 0:o.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Jl(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Tn(this.latestValues)&&(v.transform=u?u({},""):"none",this.hasProjected=!1),v}const h=m.animationValues||m.latestValues;this.applyTransformsToTarget(),c.transform=p0(this.projectionDeltaWithTransform,this.treeScale,h),u&&(c.transform=u(h,c.transform));const{x,y:g}=this.projectionDelta;c.transformOrigin=`${x.origin*100}% ${g.origin*100}% 0`,m.animationValues?c.opacity=m===this?(d=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:c.opacity=m===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Fd){if(h[v]===void 0)continue;const{correct:y,applyTo:p}=Fd[v],b=c.transform==="none"?h[v]:y(h[v],m);if(p){const w=p.length;for(let k=0;k<w;k++)c[p[k]]=b}else c[v]=b}return this.options.layoutId&&(c.pointerEvents=m===this?Jl(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(b0),this.root.sharedNodes.clear()}}}function jI(e){e.updateLayout()}function NI(e){var t;const s=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&s&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:a}=e.layout,{animationType:i}=e.options,o=s.source!==e.layout.source;i==="size"?ar(m=>{const h=o?s.measuredBox[m]:s.layoutBox[m],x=Jt(h);h.min=n[m].min,h.max=h.min+x}):Xk(i,s.layoutBox,n)&&ar(m=>{const h=o?s.measuredBox[m]:s.layoutBox[m],x=Jt(n[m]);h.max=h.min+x,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[m].max=e.relativeTarget[m].min+x)});const l=Ra();eo(l,n,s.layoutBox);const d=Ra();o?eo(d,e.applyTransform(a,!0),s.measuredBox):eo(d,n,s.layoutBox);const c=!Kk(l);let u=!1;if(!e.resumeFrom){const m=e.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:h,layout:x}=m;if(h&&x){const g=He();to(g,s.layoutBox,h.layoutBox);const v=He();to(v,n,x.layoutBox),Yk(g,v)||(u=!0),m.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=g,e.relativeParent=m)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:d,layoutDelta:l,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function SI(e){_n.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function CI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function TI(e){e.clearSnapshot()}function b0(e){e.clearMeasurements()}function _I(e){e.isLayoutDirty=!1}function II(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function y0(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function PI(e){e.resolveTargetDelta()}function AI(e){e.calcProjection()}function EI(e){e.resetRotation()}function MI(e){e.removeLeadSnapshot()}function v0(e,t,s){e.translate=De(t.translate,0,s),e.scale=De(t.scale,1,s),e.origin=t.origin,e.originPoint=t.originPoint}function w0(e,t,s,n){e.min=De(t.min,s.min,n),e.max=De(t.max,s.max,n)}function RI(e,t,s,n){w0(e.x,t.x,s.x,n),w0(e.y,t.y,s.y,n)}function LI(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const DI={duration:.45,ease:[.4,0,.1,1]},k0=e=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(e),j0=k0("applewebkit/")&&!k0("chrome/")?Math.round:$e;function N0(e){e.min=j0(e.min),e.max=j0(e.max)}function OI(e){N0(e.x),N0(e.y)}function Xk(e,t,s){return e==="position"||e==="preserve-aspect"&&!ph(x0(t),x0(s),.2)}const FI=Jk({attachResizeListener:(e,t)=>ss(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Vu={current:void 0},Zk=Jk({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Vu.current){const e=new FI({});e.mount(window),e.setOptions({layoutScroll:!0}),Vu.current=e}return Vu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),UI={pan:{Feature:tI},drag:{Feature:eI,ProjectionNode:Zk,MeasureLayout:Hk}},BI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function VI(e){const t=BI.exec(e);if(!t)return[,];const[,s,n]=t;return[s,n]}function yh(e,t,s=1){const[n,a]=VI(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return Lk(o)?parseFloat(o):o}else return lh(a)?yh(a,t,s+1):a}function $I(e,{...t},s){const n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:s};s&&(s={...s}),e.values.forEach(a=>{const i=a.get();if(!lh(i))return;const o=yh(i,n);o&&a.set(o)});for(const a in t){const i=t[a];if(!lh(i))continue;const o=yh(i,n);o&&(t[a]=o,s||(s={}),s[a]===void 0&&(s[a]=i))}return{target:t,transitionEnd:s}}const zI=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ej=e=>zI.has(e),WI=e=>Object.keys(e).some(ej),S0=e=>e===ua||e===ne,C0=(e,t)=>parseFloat(e.split(", ")[t]),T0=(e,t)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const a=n.match(/^matrix3d\((.+)\)$/);if(a)return C0(a[1],t);{const i=n.match(/^matrix\((.+)\)$/);return i?C0(i[1],e):0}},qI=new Set(["x","y","z"]),HI=Go.filter(e=>!qI.has(e));function GI(e){const t=[];return HI.forEach(s=>{const n=e.getValue(s);n!==void 0&&(t.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),t.length&&e.render(),t}const ni={width:({x:e},{paddingLeft:t="0",paddingRight:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),height:({y:e},{paddingTop:t="0",paddingBottom:s="0"})=>e.max-e.min-parseFloat(t)-parseFloat(s),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:T0(4,13),y:T0(5,14)};ni.translateX=ni.x;ni.translateY=ni.y;const QI=(e,t,s)=>{const n=t.measureViewportBox(),a=t.current,i=getComputedStyle(a),{display:o}=i,l={};o==="none"&&t.setStaticValue("display",e.display||"block"),s.forEach(c=>{l[c]=ni[c](n,i)}),t.render();const d=t.measureViewportBox();return s.forEach(c=>{const u=t.getValue(c);u&&u.jump(l[c]),e[c]=ni[c](d,i)}),e},KI=(e,t,s={},n={})=>{t={...t},n={...n};const a=Object.keys(t).filter(ej);let i=[],o=!1;const l=[];if(a.forEach(d=>{const c=e.getValue(d);if(!e.hasValue(d))return;let u=s[d],m=_i(u);const h=t[d];let x;if(Bd(h)){const g=h.length,v=h[0]===null?1:0;u=h[v],m=_i(u);for(let y=v;y<g&&h[y]!==null;y++)x?Jx(_i(h[y])===x):x=_i(h[y])}else x=_i(h);if(m!==x)if(S0(m)&&S0(x)){const g=c.get();typeof g=="string"&&c.set(parseFloat(g)),typeof h=="string"?t[d]=parseFloat(h):Array.isArray(h)&&x===ne&&(t[d]=h.map(parseFloat))}else m!=null&&m.transform&&(x!=null&&x.transform)&&(u===0||h===0)?u===0?c.set(x.transform(u)):t[d]=m.transform(h):(o||(i=GI(e),o=!0),l.push(d),n[d]=n[d]!==void 0?n[d]:t[d],c.jump(h))}),l.length){const d=l.indexOf("height")>=0?window.pageYOffset:null,c=QI(t,e,l);return i.length&&i.forEach(([u,m])=>{e.getValue(u).set(m)}),e.render(),Tc&&d!==null&&window.scrollTo({top:d}),{target:c,transitionEnd:n}}else return{target:t,transitionEnd:n}};function YI(e,t,s,n){return WI(t)?KI(e,t,s,n):{target:t,transitionEnd:n}}const JI=(e,t,s,n)=>{const a=$I(e,t,n);return t=a.target,n=a.transitionEnd,YI(e,t,s,n)},vh={current:null},tj={current:!1};function XI(){if(tj.current=!0,!!Tc)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>vh.current=e.matches;e.addListener(t),t()}else vh.current=!1}function ZI(e,t,s){const{willChange:n}=t;for(const a in t){const i=t[a],o=s[a];if($t(i))e.addValue(a,i),Wd(n)&&n.add(a);else if($t(o))e.addValue(a,si(i,{owner:e})),Wd(n)&&n.remove(a);else if(o!==i)if(e.hasValue(a)){const l=e.getValue(a);!l.hasAnimated&&l.set(i)}else{const l=e.getStaticValue(a);e.addValue(a,si(l!==void 0?l:i,{owner:e}))}}for(const a in s)t[a]===void 0&&e.removeValue(a);return t}const _0=new WeakMap,rj=Object.keys(Ao),eP=rj.length,I0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tP=$x.length;class rP{constructor({parent:t,props:s,presenceContext:n,reducedMotionConfig:a,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ce.render(this.render,!1,!0);const{latestValues:l,renderState:d}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=d,this.parent=t,this.props=s,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.isControllingVariants=Ic(s),this.isVariantNode=Bw(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:c,...u}=this.scrapeMotionValuesFromProps(s,{});for(const m in u){const h=u[m];l[m]!==void 0&&$t(h)&&(h.set(l[m],!1),Wd(c)&&c.add(m))}}scrapeMotionValuesFromProps(t,s){return{}}mount(t){this.current=t,_0.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),tj.current||XI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:vh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){_0.delete(this.current),this.projection&&this.projection.unmount(),fs(this.notifyUpdate),fs(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,s){const n=ca.has(t),a=s.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ce.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),i=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{a(),i()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...s},n,a,i){let o,l;for(let d=0;d<eP;d++){const c=rj[d],{isEnabled:u,Feature:m,ProjectionNode:h,MeasureLayout:x}=Ao[c];h&&(o=h),u(s)&&(!this.features[c]&&m&&(this.features[c]=new m(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:c,drag:u,dragConstraints:m,layoutScroll:h,layoutRoot:x}=s;this.projection.setOptions({layoutId:d,layout:c,alwaysMeasureLayout:!!u||m&&Ea(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:x})}return l}updateFeatures(){for(const t in this.features){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):He()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,s){this.latestValues[t]=s}makeTargetAnimatable(t,s=!0){return this.makeTargetAnimatableFromInstance(t,this.props,s)}update(t,s){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<I0.length;n++){const a=I0[n];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i=t["on"+a];i&&(this.propEventSubscriptions[a]=this.on(a,i))}this.prevMotionValues=ZI(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<tP;n++){const a=$x[n],i=this.props[a];(Po(i)||i===!1)&&(s[a]=i)}return s}addVariantChild(t){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(t),()=>s.variantChildren.delete(t)}addValue(t,s){s!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,s)),this.values.set(t,s),this.latestValues[t]=s.get()}removeValue(t){this.values.delete(t);const s=this.valueSubscriptions.get(t);s&&(s(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,s){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&s!==void 0&&(n=si(s,{owner:this}),this.addValue(t,n)),n}readValue(t){var s;return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,s){this.baseTarget[t]=s}getBaseTarget(t){var s;const{initial:n}=this.props,a=typeof n=="string"||typeof n=="object"?(s=Yx(this.props,n))===null||s===void 0?void 0:s[t]:void 0;if(n&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!$t(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,s){return this.events[t]||(this.events[t]=new ip),this.events[t].add(s)}notify(t,...s){this.events[t]&&this.events[t].notify(...s)}}class sj extends rP{sortInstanceNodePosition(t,s){return t.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(t,s){return t.style?t.style[s]:void 0}removeValueFromRenderState(t,{vars:s,style:n}){delete s[t],delete n[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:s,...n},{transformValues:a},i){let o=y_(n,t||{},this);if(a&&(s&&(s=a(s)),n&&(n=a(n)),o&&(o=a(o))),i){g_(this,n,o);const l=JI(this,n,o,s);s=l.transitionEnd,n=l.target}return{transition:t,transitionEnd:s,...n}}}function sP(e){return window.getComputedStyle(e)}class nP extends sj{constructor(){super(...arguments),this.type="html"}readValueFromInstance(t,s){if(ca.has(s)){const n=tp(s);return n&&n.default||0}else{const n=sP(t),a=(Ww(s)?n.getPropertyValue(s):n[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:s}){return Wk(t,s)}build(t,s,n,a){qx(t,s,n,a.transformTemplate)}scrapeMotionValuesFromProps(t,s){return Kx(t,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;$t(t)&&(this.childSubscription=t.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(t,s,n,a){Yw(t,s,n,a)}}class aP extends sj{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(t,s){return t[s]}readValueFromInstance(t,s){if(ca.has(s)){const n=tp(s);return n&&n.default||0}return s=Jw.has(s)?s:Bx(s),t.getAttribute(s)}measureInstanceViewportBox(){return He()}scrapeMotionValuesFromProps(t,s){return Zw(t,s)}build(t,s,n,a){Gx(t,s,n,this.isSVGTag,a.transformTemplate)}renderInstance(t,s,n,a){Xw(t,s,n,a)}mount(t){this.isSVGTag=Qx(t.tagName),super.mount(t)}}const iP=(e,t)=>Wx(e)?new aP(t,{enableHardwareAcceleration:!1}):new nP(t,{enableHardwareAcceleration:!0}),oP={layout:{ProjectionNode:Zk,MeasureLayout:Hk}},lP={...R_,...eT,...UI,...oP},T=d3((e,t)=>V3(e,t,lP,iP));function nj(){const e=f.useRef(!1);return Ux(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function dP(){const e=nj(),[t,s]=f.useState(0),n=f.useCallback(()=>{e.current&&s(t+1)},[t]);return[f.useCallback(()=>Ce.postRender(n),[n]),t]}class cP extends f.Component{getSnapshotBeforeUpdate(t){const s=this.props.childRef.current;if(s&&t.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function uP({children:e,isPresent:t}){const s=f.useId(),n=f.useRef(null),a=f.useRef({width:0,height:0,top:0,left:0});return f.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:d}=a.current;if(t||!n.current||!i||!o)return;n.current.dataset.motionPopId=s;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[t]),f.createElement(cP,{isPresent:t,childRef:n,sizeRef:a},f.cloneElement(e,{ref:n}))}const $u=({children:e,initial:t,isPresent:s,onExitComplete:n,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=ek(mP),d=f.useId(),c=f.useMemo(()=>({id:d,initial:t,isPresent:s,custom:a,onExitComplete:u=>{l.set(u,!0);for(const m of l.values())if(!m)return;n&&n()},register:u=>(l.set(u,!1),()=>l.delete(u))}),i?void 0:[s]);return f.useMemo(()=>{l.forEach((u,m)=>l.set(m,!1))},[s]),f.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(e=f.createElement(uP,{isPresent:s},e)),f.createElement(Cc.Provider,{value:c},e)};function mP(){return new Map}function hP(e){return f.useEffect(()=>()=>e(),[])}const In=e=>e.key||"";function xP(e,t){e.forEach(s=>{const n=In(s);t.set(n,s)})}function pP(e){const t=[];return f.Children.forEach(e,s=>{f.isValidElement(s)&&t.push(s)}),t}const re=({children:e,custom:t,initial:s=!0,onExitComplete:n,exitBeforeEnter:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=f.useContext(zx).forceRender||dP()[0],d=nj(),c=pP(e);let u=c;const m=f.useRef(new Map).current,h=f.useRef(u),x=f.useRef(new Map).current,g=f.useRef(!0);if(Ux(()=>{g.current=!1,xP(c,x),h.current=u}),hP(()=>{g.current=!0,x.clear(),m.clear()}),g.current)return f.createElement(f.Fragment,null,u.map(b=>f.createElement($u,{key:In(b),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:i,mode:o},b)));u=[...u];const v=h.current.map(In),y=c.map(In),p=v.length;for(let b=0;b<p;b++){const w=v[b];y.indexOf(w)===-1&&!m.has(w)&&m.set(w,void 0)}return o==="wait"&&m.size&&(u=[]),m.forEach((b,w)=>{if(y.indexOf(w)!==-1)return;const k=x.get(w);if(!k)return;const j=v.indexOf(w);let N=b;if(!N){const _=()=>{m.delete(w);const A=Array.from(x.keys()).filter(L=>!y.includes(L));if(A.forEach(L=>x.delete(L)),h.current=c.filter(L=>{const C=In(L);return C===w||A.includes(C)}),!m.size){if(d.current===!1)return;l(),n&&n()}};N=f.createElement($u,{key:In(k),isPresent:!1,onExitComplete:_,custom:t,presenceAffectsLayout:i,mode:o},k),m.set(w,N)}u.splice(j,0,N)}),u=u.map(b=>{const w=b.key;return m.has(w)?b:f.createElement($u,{key:In(b),isPresent:!0,presenceAffectsLayout:i,mode:o},b)}),f.createElement(f.Fragment,null,m.size?u:u.map(b=>f.cloneElement(b)))},aj=f.createContext(void 0);function fP({children:e}){const[t,s]=f.useState([]),n=(l,d)=>{const c=Math.random().toString(36).substr(2,9);s(u=>[...u,{id:c,type:l,message:d}]),setTimeout(()=>{s(u=>u.filter(m=>m.id!==c))},4e3)},a=l=>{s(d=>d.filter(c=>c.id!==l))},i=l=>{switch(l){case"success":return r.jsx(Kt,{className:"w-5 h-5"});case"error":return r.jsx(ps,{className:"w-5 h-5"});case"warning":return r.jsx(Tr,{className:"w-5 h-5"});case"info":return r.jsx(Aw,{className:"w-5 h-5"})}},o=l=>{switch(l){case"success":return"bg-emerald-500/10 border-emerald-500/30 text-emerald-500";case"error":return"bg-rose-500/10 border-rose-500/30 text-rose-500";case"warning":return"bg-amber-500/10 border-amber-500/30 text-amber-500";case"info":return"bg-blue-500/10 border-blue-500/30 text-blue-500"}};return r.jsxs(aj.Provider,{value:{showToast:n},children:[e,r.jsx("div",{className:"fixed top-4 right-4 z-[9999] space-y-2",children:r.jsx(re,{children:t.map(l=>r.jsxs(T.div,{initial:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100},className:`flex items-center gap-3 px-4 py-3 rounded-xl border backdrop-blur-sm shadow-lg min-w-[300px] ${o(l.type)}`,children:[i(l.type),r.jsx("p",{className:"flex-1 text-sm font-medium",children:l.message}),r.jsx("button",{onClick:()=>a(l.id),className:"hover:opacity-70 transition-opacity",children:r.jsx(Ae,{className:"w-4 h-4"})})]},l.id))})})]})}function yn(){const e=f.useContext(aj);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const Z=jC;function ij(e){var t,s,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(s=ij(e[t]))&&(n&&(n+=" "),n+=s)}else for(s in e)e[s]&&(n&&(n+=" "),n+=s);return n}function gP(){for(var e,t,s=0,n="",a=arguments.length;s<a;s++)(e=arguments[s])&&(t=ij(e))&&(n&&(n+=" "),n+=t);return n}const op="-",bP=e=>{const t=vP(e),{conflictingClassGroups:s,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(op);return l[0]===""&&l.length!==1&&l.shift(),oj(l,t)||yP(o)},getConflictingClassGroupIds:(o,l)=>{const d=s[o]||[];return l&&n[o]?[...d,...n[o]]:d}}},oj=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const s=e[0],n=t.nextPart.get(s),a=n?oj(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(op);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},P0=/^\[(.+)\]$/,yP=e=>{if(P0.test(e)){const t=P0.exec(e)[1],s=t==null?void 0:t.substring(0,t.indexOf(":"));if(s)return"arbitrary.."+s}},vP=e=>{const{theme:t,prefix:s}=e,n={nextPart:new Map,validators:[]};return kP(Object.entries(e.classGroups),s).forEach(([i,o])=>{wh(o,n,i,t)}),n},wh=(e,t,s,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:A0(t,a);i.classGroupId=s;return}if(typeof a=="function"){if(wP(a)){wh(a(n),t,s,n);return}t.validators.push({validator:a,classGroupId:s});return}Object.entries(a).forEach(([i,o])=>{wh(o,A0(t,i),s,n)})})},A0=(e,t)=>{let s=e;return t.split(op).forEach(n=>{s.nextPart.has(n)||s.nextPart.set(n,{nextPart:new Map,validators:[]}),s=s.nextPart.get(n)}),s},wP=e=>e.isThemeGetter,kP=(e,t)=>t?e.map(([s,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[s,a]}):e,jP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,s=new Map,n=new Map;const a=(i,o)=>{s.set(i,o),t++,t>e&&(t=0,n=s,s=new Map)};return{get(i){let o=s.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){s.has(i)?s.set(i,o):a(i,o)}}},lj="!",NP=e=>{const{separator:t,experimentalParseClassName:s}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const d=[];let c=0,u=0,m;for(let y=0;y<l.length;y++){let p=l[y];if(c===0){if(p===a&&(n||l.slice(y,y+i)===t)){d.push(l.slice(u,y)),u=y+i;continue}if(p==="/"){m=y;continue}}p==="["?c++:p==="]"&&c--}const h=d.length===0?l:l.substring(u),x=h.startsWith(lj),g=x?h.substring(1):h,v=m&&m>u?m-u:void 0;return{modifiers:d,hasImportantModifier:x,baseClassName:g,maybePostfixModifierPosition:v}};return s?l=>s({className:l,parseClassName:o}):o},SP=e=>{if(e.length<=1)return e;const t=[];let s=[];return e.forEach(n=>{n[0]==="["?(t.push(...s.sort(),n),s=[]):s.push(n)}),t.push(...s.sort()),t},CP=e=>({cache:jP(e.cacheSize),parseClassName:NP(e),...bP(e)}),TP=/\s+/,_P=(e,t)=>{const{parseClassName:s,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(TP);let l="";for(let d=o.length-1;d>=0;d-=1){const c=o[d],{modifiers:u,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:x}=s(c);let g=!!x,v=n(g?h.substring(0,x):h);if(!v){if(!g){l=c+(l.length>0?" "+l:l);continue}if(v=n(h),!v){l=c+(l.length>0?" "+l:l);continue}g=!1}const y=SP(u).join(":"),p=m?y+lj:y,b=p+v;if(i.includes(b))continue;i.push(b);const w=a(v,g);for(let k=0;k<w.length;++k){const j=w[k];i.push(p+j)}l=c+(l.length>0?" "+l:l)}return l};function IP(){let e=0,t,s,n="";for(;e<arguments.length;)(t=arguments[e++])&&(s=dj(t))&&(n&&(n+=" "),n+=s);return n}const dj=e=>{if(typeof e=="string")return e;let t,s="";for(let n=0;n<e.length;n++)e[n]&&(t=dj(e[n]))&&(s&&(s+=" "),s+=t);return s};function PP(e,...t){let s,n,a,i=o;function o(d){const c=t.reduce((u,m)=>m(u),e());return s=CP(c),n=s.cache.get,a=s.cache.set,i=l,l(d)}function l(d){const c=n(d);if(c)return c;const u=_P(d,s);return a(d,u),u}return function(){return i(IP.apply(null,arguments))}}const _e=e=>{const t=s=>s[e]||[];return t.isThemeGetter=!0,t},cj=/^\[(?:([a-z-]+):)?(.+)\]$/i,AP=/^\d+\/\d+$/,EP=new Set(["px","full","screen"]),MP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,RP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,LP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,DP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,OP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Kr=e=>$a(e)||EP.has(e)||AP.test(e),Is=e=>hi(e,"length",qP),$a=e=>!!e&&!Number.isNaN(Number(e)),zu=e=>hi(e,"number",$a),Pi=e=>!!e&&Number.isInteger(Number(e)),FP=e=>e.endsWith("%")&&$a(e.slice(0,-1)),oe=e=>cj.test(e),Ps=e=>MP.test(e),UP=new Set(["length","size","percentage"]),BP=e=>hi(e,UP,uj),VP=e=>hi(e,"position",uj),$P=new Set(["image","url"]),zP=e=>hi(e,$P,GP),WP=e=>hi(e,"",HP),Ai=()=>!0,hi=(e,t,s)=>{const n=cj.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):s(n[2]):!1},qP=e=>RP.test(e)&&!LP.test(e),uj=()=>!1,HP=e=>DP.test(e),GP=e=>OP.test(e),QP=()=>{const e=_e("colors"),t=_e("spacing"),s=_e("blur"),n=_e("brightness"),a=_e("borderColor"),i=_e("borderRadius"),o=_e("borderSpacing"),l=_e("borderWidth"),d=_e("contrast"),c=_e("grayscale"),u=_e("hueRotate"),m=_e("invert"),h=_e("gap"),x=_e("gradientColorStops"),g=_e("gradientColorStopPositions"),v=_e("inset"),y=_e("margin"),p=_e("opacity"),b=_e("padding"),w=_e("saturate"),k=_e("scale"),j=_e("sepia"),N=_e("skew"),_=_e("space"),A=_e("translate"),L=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",oe,t],R=()=>[oe,t],W=()=>["",Kr,Is],Y=()=>["auto",$a,oe],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Q=()=>["solid","dashed","dotted","double","none"],pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],$=()=>["start","end","center","between","around","evenly","stretch"],I=()=>["","0",oe],F=()=>["auto","avoid","all","avoid-page","page","left","right","column"],q=()=>[$a,oe];return{cacheSize:500,separator:":",theme:{colors:[Ai],spacing:[Kr,Is],blur:["none","",Ps,oe],brightness:q(),borderColor:[e],borderRadius:["none","","full",Ps,oe],borderSpacing:R(),borderWidth:W(),contrast:q(),grayscale:I(),hueRotate:q(),invert:I(),gap:R(),gradientColorStops:[e],gradientColorStopPositions:[FP,Is],inset:P(),margin:P(),opacity:q(),padding:R(),saturate:q(),scale:q(),sepia:I(),skew:q(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",oe]}],container:["container"],columns:[{columns:[Ps]}],"break-after":[{"break-after":F()}],"break-before":[{"break-before":F()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),oe]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:L()}],"overscroll-x":[{"overscroll-x":L()}],"overscroll-y":[{"overscroll-y":L()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Pi,oe]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",oe]}],grow:[{grow:I()}],shrink:[{shrink:I()}],order:[{order:["first","last","none",Pi,oe]}],"grid-cols":[{"grid-cols":[Ai]}],"col-start-end":[{col:["auto",{span:["full",Pi,oe]},oe]}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":[Ai]}],"row-start-end":[{row:["auto",{span:[Pi,oe]},oe]}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",oe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",oe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...$()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...$(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...$(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[_]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[_]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",oe,t]}],"min-w":[{"min-w":[oe,t,"min","max","fit"]}],"max-w":[{"max-w":[oe,t,"none","full","min","max","fit","prose",{screen:[Ps]},Ps]}],h:[{h:[oe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[oe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[oe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[oe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ps,Is]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zu]}],"font-family":[{font:[Ai]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",oe]}],"line-clamp":[{"line-clamp":["none",$a,zu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Kr,oe]}],"list-image":[{"list-image":["none",oe]}],"list-style-type":[{list:["none","disc","decimal",oe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[p]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[p]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Q(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Kr,Is]}],"underline-offset":[{"underline-offset":["auto",Kr,oe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",oe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",oe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[p]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),VP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",BP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},zP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[p]}],"border-style":[{border:[...Q(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[p]}],"divide-style":[{divide:Q()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Q()]}],"outline-offset":[{"outline-offset":[Kr,oe]}],"outline-w":[{outline:[Kr,Is]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:W()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[p]}],"ring-offset-w":[{"ring-offset":[Kr,Is]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ps,WP]}],"shadow-color":[{shadow:[Ai]}],opacity:[{opacity:[p]}],"mix-blend":[{"mix-blend":[...pe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":pe()}],filter:[{filter:["","none"]}],blur:[{blur:[s]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Ps,oe]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[m]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[s]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[p]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",oe]}],duration:[{duration:q()}],ease:[{ease:["linear","in","out","in-out",oe]}],delay:[{delay:q()}],animate:[{animate:["none","spin","ping","pulse","bounce",oe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[k]}],"scale-x":[{"scale-x":[k]}],"scale-y":[{"scale-y":[k]}],rotate:[{rotate:[Pi,oe]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[N]}],"skew-y":[{"skew-y":[N]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",oe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",oe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",oe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Kr,Is,zu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},KP=PP(QP);function J(...e){return KP(gP(e))}function M({variant:e="primary",size:t="md",children:s,isLoading:n=!1,className:a,disabled:i,...o}){const l="inline-flex items-center justify-center font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2",d={primary:"bg-primary-700 hover:bg-primary-800 text-white focus:ring-primary-700",secondary:"bg-primary-600 hover:bg-primary-700 text-white focus:ring-primary-600",ghost:"bg-transparent hover:bg-light-card dark:hover:bg-dark-card text-light-text dark:text-dark-text focus:ring-primary-700",outline:"border-2 border-primary-700 text-primary-700 hover:bg-primary-50 dark:hover:bg-primary-950 focus:ring-primary-700",danger:"bg-red-500 hover:bg-red-600 text-white focus:ring-red-500"},c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg",icon:"p-2"};return r.jsx(T.button,{whileHover:{scale:i||n?1:1.02},whileTap:{scale:i||n?1:.98},className:J(l,d[e],c[t],a),disabled:i||n,...o,children:n?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):s})}function mj(){const e=U(S.users.getTickerData),[t,s]=f.useState(0);if(f.useEffect(()=>{if(!(e!=null&&e.recentUsers)||e.recentUsers.length===0)return;const a=setInterval(()=>{s(i=>(i+2)%e.recentUsers.length)},4e3);return()=>clearInterval(a)},[e]),!e)return r.jsxs("div",{className:"flex items-center gap-3 bg-light-card/50 dark:bg-dark-card/50 backdrop-blur-sm px-3 py-1.5 rounded-full border border-light-border/20 dark:border-dark-border/20 shadow-sm overflow-hidden w-[240px] xl:w-[280px] animate-pulse",children:[r.jsxs("div",{className:"flex items-center gap-2 pr-3 border-r border-light-border/20 dark:border-dark-border/20 shrink-0",children:[r.jsx("div",{className:"bg-light-bg dark:bg-dark-bg p-1 rounded-full w-5 h-5"}),r.jsxs("div",{className:"flex flex-col gap-1 leading-none",children:[r.jsx("div",{className:"h-2 w-12 bg-light-bg dark:bg-dark-bg rounded"}),r.jsx("div",{className:"h-3 w-8 bg-light-bg dark:bg-dark-bg rounded"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-light-bg dark:bg-dark-bg"}),r.jsx("div",{className:"h-2 w-12 bg-light-bg dark:bg-dark-bg rounded"})]})]});const n=[e.recentUsers[t%e.recentUsers.length],e.recentUsers[(t+1)%e.recentUsers.length]].filter(Boolean);return r.jsxs("div",{className:"flex items-center gap-3 bg-light-card/50 dark:bg-dark-card/50 backdrop-blur-sm px-3 py-1.5 rounded-full border border-light-border/20 dark:border-dark-border/20 shadow-sm overflow-hidden w-[240px] xl:w-[280px]",children:[r.jsxs("div",{className:"flex items-center gap-2 pr-3 border-r border-light-border/20 dark:border-dark-border/20 shrink-0",children:[r.jsx("div",{className:"bg-primary-500/10 p-1 rounded-full",children:r.jsx(ke,{className:"w-3 h-3 text-primary-500"})}),r.jsxs("div",{className:"flex flex-col leading-none",children:[r.jsx("span",{className:"text-[9px] uppercase font-bold text-light-muted dark:text-dark-muted",children:"Community"}),r.jsx("span",{className:"text-xs font-black text-light-text dark:text-dark-text font-display",children:e.totalCount.toLocaleString()})]})]}),r.jsx("div",{className:"flex-1 relative h-7 overflow-hidden",children:r.jsx(re,{mode:"popLayout",children:r.jsx(T.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},transition:{duration:.5,ease:"easeInOut"},className:"absolute inset-0 flex items-center gap-2",children:n.map(a=>r.jsxs("div",{className:"flex items-center gap-1.5 min-w-0 max-w-[90px]",children:[r.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-primary-400 to-secondary-400 p-[1px] flex-shrink-0",children:r.jsx("div",{className:"w-full h-full rounded-full bg-light-bg dark:bg-dark-bg overflow-hidden",children:a.avatarUrl?r.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-[8px] font-bold bg-light-muted/10",children:a.name.charAt(0)})})}),r.jsx("span",{className:"text-[10px] font-medium text-light-text dark:text-dark-text truncate",children:a.name.split(" ")[0]})]},a._id))},t)})})]})}function YP({isOpen:e,onClose:t}){const{user:s,logout:n}=Z(),{theme:a,toggleTheme:i}=vc(),o=de(),l=U(S.stats.getBadgeCounts,s!=null&&s._id?{userId:s._id}:"skip"),d=V(S.users.updateLastViewed),c=async(m,h)=>{h&&s&&await d({userId:s._id,field:h}),t(),o(m)},u=()=>{n(),t(),o("/")};return r.jsx(re,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 md:hidden"}),r.jsx(T.div,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:30,stiffness:300},className:"fixed top-0 bottom-0 left-0 w-[85%] max-w-[320px] bg-light-bg dark:bg-dark-bg z-[60] shadow-2xl overflow-hidden",children:r.jsxs("div",{className:"flex flex-col h-full p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs(te,{to:"/",onClick:t,className:"flex items-center gap-2",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-8 w-auto"}),r.jsx("span",{className:"text-xl font-bold font-display text-gradient",children:"Baptizo"})]}),r.jsx("button",{onClick:t,className:"p-2 -mr-2 text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text transition-colors",children:r.jsx(Ae,{className:"w-6 h-6"})})]}),s&&r.jsxs("div",{className:"mb-4 p-3 rounded-2xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10 border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold text-sm overflow-hidden shrink-0",children:s.avatarUrl?r.jsx("img",{src:s.avatarUrl,alt:s.name,className:"w-full h-full object-cover"}):s.name[0]}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text truncate text-sm",children:s.name}),r.jsx("p",{className:"text-[10px] text-light-muted dark:text-dark-muted truncate",children:s.email})]})]}),r.jsx(te,{to:"/profile",onClick:t,children:r.jsx(M,{variant:"outline",size:"sm",className:"w-full rounded-lg text-[10px] h-7 font-semibold",children:"View Profile"})})]}),r.jsx("nav",{className:"space-y-2 flex-1 overflow-y-auto green-scrollbar",children:s?r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>c("/feed"),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(Pw,{className:"w-5 h-5 text-primary-500"}),"Feed"]}),r.jsxs("button",{onClick:()=>c("/chat"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(lt,{className:"w-5 h-5 text-blue-500"}),"Messages"]}),((l==null?void 0:l.messages)||0)>0&&r.jsx("span",{className:"bg-green-500 text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full",children:l==null?void 0:l.messages})]}),r.jsxs("button",{onClick:()=>c("/banking","lastViewedBanking"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Ho,{className:"w-5 h-5 text-emerald-500"}),"Banking"]}),((l==null?void 0:l.banking)||0)>0&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]"})]}),r.jsxs("button",{onClick:()=>c("/leaderboard","lastViewedLeaderboard"),className:"w-full flex items-center justify-between p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ve,{className:"w-5 h-5 text-amber-500"}),"Leaderboard"]}),((l==null?void 0:l.leaderboard)||0)>0&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)]"})]}),r.jsxs(te,{to:"/saved-posts",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(Mx,{className:"w-5 h-5 text-purple-500"}),"Saved Posts"]}),r.jsxs(te,{to:"/diamond-challenge",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(Nr,{className:"w-5 h-5 text-cyan-500"}),"Diamond Challenge"]}),(s.role==="admin"||s.role==="super_admin")&&r.jsxs(te,{to:"/admin",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-primary-500/10 text-primary-500 transition-colors font-bold mt-4",children:[r.jsx(rn,{className:"w-5 h-5"}),"Admin Dashboard"]}),s.role==="board_member"&&r.jsxs(te,{to:"/board",onClick:t,className:"flex items-center gap-3 p-3 rounded-xl hover:bg-secondary-500/10 text-secondary-500 transition-colors font-bold mt-4",children:[r.jsx(rn,{className:"w-5 h-5"}),"Board Dashboard"]}),r.jsx("div",{className:"mt-6 flex justify-center",children:r.jsx(mj,{})})]}):r.jsxs(r.Fragment,{children:[r.jsx(te,{to:"/login",onClick:t,className:"block mb-4",children:r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text font-semibold",children:[r.jsx(yt,{className:"w-5 h-5"}),"Login"]})}),r.jsx(te,{to:"/register",onClick:t,className:"block",children:r.jsx(M,{className:"w-full font-bold",children:"Get Started"})})]})}),r.jsxs("div",{className:"pt-6 border-t border-light-border dark:border-dark-border mt-auto",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("span",{className:"text-sm font-medium text-light-text dark:text-dark-text",children:"Appearance"}),r.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-light-card dark:hover:bg-dark-card transition-colors text-light-text dark:text-dark-text",children:a==="dark"?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Nc,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"text-xs",children:"Dark"})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(wc,{className:"w-5 h-5 text-slate-700"}),r.jsx("span",{className:"text-xs",children:"Light"})]})})]}),s&&r.jsxs("button",{onClick:u,className:"w-full p-3 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition-all flex items-center justify-center gap-2 font-bold",children:[r.jsx(Ew,{className:"w-5 h-5"}),"Logout"]})]})]})})]})})}function E0(){const{user:e}=Z(),t=de();if(!(e!=null&&e._id))return null;const s=U(S.notifications.getUnreadCount,{userId:e._id})||0;return r.jsxs(T.button,{whileTap:{scale:.9},onClick:()=>t("/notifications"),className:"p-2 md:p-3 relative text-light-text dark:text-dark-text hover:text-primary-500 transition-colors",title:"Notifications",children:[r.jsx(Ji,{className:"w-6 h-6 md:w-6 md:h-6"}),(s??0)>0&&r.jsx("span",{className:"absolute top-0.5 right-0.5 md:top-2 md:right-2 bg-green-500 text-white text-[10px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-light-bg dark:border-dark-bg",children:s>9?"9+":s})]})}function JP(){const{user:e,logout:t}=Z(),{theme:s,toggleTheme:n}=vc(),a=de(),i=jt(),[o,l]=f.useState(!1),d=U(S.stats.getBadgeCounts,e!=null&&e._id?{userId:e._id}:"skip"),c=i.pathname==="/"||i.pathname==="/feed"||i.pathname==="/login"||i.pathname==="/register",u=()=>{t(),a("/")};return r.jsxs(r.Fragment,{children:[r.jsx("header",{className:`fixed ${c?"top-2 md:top-0":"top-0"} left-0 right-0 z-40 ${c?"px-3 md:px-0":"px-0"} transition-all duration-300`,children:r.jsx("div",{className:`mx-auto ${c?"max-w-7xl md:max-w-full relative":"w-full"}`,children:r.jsx("div",{className:`${c?"glass rounded-2xl md:rounded-b-3xl md:rounded-t-none border border-light-border/50 dark:border-dark-border/50 overflow-hidden":"bg-light-bg/95 dark:bg-dark-bg/95 backdrop-blur-sm border-b border-light-border dark:border-dark-border md:glass md:rounded-b-3xl md:border md:border-light-border/50 md:dark:border-dark-border/50"} md:overflow-hidden`,children:r.jsxs("div",{className:"px-4 md:px-12 h-14 md:h-20 flex items-center justify-between",children:[r.jsxs("div",{className:"md:hidden flex items-center justify-between w-full",children:[r.jsxs("button",{onClick:()=>l(!0),className:"p-2 -ml-2 text-light-text dark:text-dark-text hover:text-primary-500 transition-colors relative",children:[r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),r.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),r.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),d&&(d.messages>0||d.banking>0||d.leaderboard>0)&&r.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.5)] border border-light-bg dark:border-dark-bg"})]}),e?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("button",{onClick:()=>a("/search"),className:"p-2 text-light-text dark:text-dark-text hover:text-primary-500 transition-colors",children:r.jsx(mt,{className:"w-6 h-6"})}),r.jsx(E0,{})]}):c&&r.jsx(te,{to:"/",className:"flex items-center",children:r.jsx("span",{className:"text-xl font-black text-gradient font-display tracking-tight",children:"Baptizo"})})]}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 w-full",children:[r.jsx(te,{to:"/",state:{manual:!0},className:"flex items-center space-x-2 mr-auto",children:r.jsxs(T.div,{whileHover:{scale:1.05},className:"flex items-center gap-2",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-8 md:h-12 w-auto"}),r.jsx("span",{className:"text-xl md:text-3xl font-black text-gradient font-display tracking-tight",children:"Baptizo"})]})}),r.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:e?r.jsxs(r.Fragment,{children:[r.jsx(te,{to:"/feed",className:"text-light-text dark:text-dark-text hover:text-primary-500 transition-all font-semibold text-lg",children:"Feed"}),r.jsx(te,{to:"/profile",className:"text-light-text dark:text-dark-text hover:text-primary-500 transition-all font-semibold text-lg",children:"Profile"}),e.role==="admin"||e.role==="super_admin"?r.jsxs(te,{to:"/admin",className:"px-4 py-2 rounded-xl bg-primary-500/10 text-primary-500 hover:bg-primary-500 hover:text-white transition-all font-bold flex items-center gap-2",children:[r.jsx(rn,{className:"w-5 h-5"}),"Admin"]}):null,e.role==="board_member"&&r.jsxs(te,{to:"/board",className:"px-4 py-2 rounded-xl bg-secondary-500/10 text-secondary-500 hover:bg-secondary-500 hover:text-white transition-all font-bold flex items-center gap-2",children:[r.jsx(rn,{className:"w-5 h-5"}),"Board"]})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(te,{to:"/login",className:"text-light-text dark:text-dark-text hover:text-primary-500 transition-all font-semibold text-lg",children:"Login"}),r.jsx(te,{to:"/register",children:r.jsx(M,{size:"lg",className:"font-bold px-8",children:"Get Started"})})]})}),r.jsxs("div",{className:"hidden md:flex items-center space-x-2 md:space-x-4 ml-auto",children:[e&&r.jsxs(r.Fragment,{children:[r.jsxs(T.button,{whileTap:{scale:.9},onClick:()=>a("/chat"),className:"p-2 md:p-3 relative rounded-xl hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-all border border-transparent hover:border-light-border dark:hover:border-dark-border",title:"Messages",children:[r.jsx(lt,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-500"}),((d==null?void 0:d.messages)??0)>0&&r.jsx("span",{className:"absolute top-1.5 right-1.5 md:top-2 md:right-2 bg-green-500 text-white text-[9px] font-bold h-4 min-w-[16px] px-1 flex items-center justify-center rounded-full border-2 border-white dark:border-[#1A1A1A] animate-pulse",children:d.messages>9?"9+":d.messages})]}),r.jsx(T.button,{whileTap:{scale:.9},onClick:()=>a("/search"),className:"p-2 md:p-3 rounded-xl hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-all border border-transparent hover:border-light-border dark:hover:border-dark-border",title:"Search Members",children:r.jsx(mt,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-500"})}),r.jsx(E0,{})]}),r.jsx(T.button,{whileTap:{scale:.9},onClick:n,className:"p-2 md:p-3 rounded-xl hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-all border border-transparent hover:border-light-border dark:hover:border-dark-border",children:s==="dark"?r.jsx(Nc,{className:"w-5 h-5 md:w-6 md:h-6 text-yellow-500"}):r.jsx(wc,{className:"w-5 h-5 md:w-6 md:h-6 text-slate-700"})}),e&&r.jsxs("div",{className:"hidden md:flex items-center space-x-3",children:[r.jsxs("div",{className:"flex items-center space-x-3 p-1.5 rounded-xl bg-light-card/30 dark:bg-dark-card/30 border border-light-border/20 dark:border-dark-border/20 shadow-inner",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold overflow-hidden",children:e.avatarUrl?r.jsx("img",{src:e.avatarUrl,alt:e.name,className:"w-full h-full object-cover",referrerPolicy:"no-referrer"}):e.name[0]}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-sm font-bold text-light-text dark:text-dark-text pr-2 leading-none",children:e.name}),(e.role==="board_member"||e.role==="admin"||e.role==="super_admin")&&r.jsx("span",{className:"text-[9px] font-bold text-secondary-500 tracking-wide mt-0.5",children:e.role==="board_member"?"BOARD MEMBER":e.role.replace("_"," ").toUpperCase()})]})]}),r.jsx(T.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:u,className:"p-3 rounded-xl bg-red-500/10 text-red-500 hover:bg-red-500 hover:text-white transition-all",children:r.jsx(Ew,{className:"w-5 h-5"})})]})]})]})]})})})}),r.jsx(YP,{isOpen:o,onClose:()=>l(!1)})]})}function XP(){const e=new Date().getFullYear(),t={platform:[{label:"Feed",path:"/feed"},{label:"Ancient Culture",path:"/ancient-culture"},{label:"Wisdom of The Now",path:"/wisdom-now"},{label:"Leaderboard",path:"/leaderboard"}],community:[{label:"About Baptizo",path:"/about"},{label:"Our Mission",path:"/about"},{label:"Privacy Policy",path:"/privacy"},{label:"Terms of Service",path:"/terms"}],support:[{label:"Contact Us",path:"/contact"},{label:"FAQ",path:"/faq"},{label:"Community Guidelines",path:"/guidelines"}]},s=[{icon:YC,href:"https://x.com/innotechglobal",label:"Twitter"},{icon:LC,href:"https://www.instagram.com/photizo_foundation?utm_source=qr&igsh=ZncwOTVpcXM1d3Vv",label:"Instagram"},{icon:XC,href:"https://www.youtube.com/@innotechglobal",label:"YouTube"},{icon:RC,href:"https://www.github.com/vincobond/",label:"GitHub"}];return r.jsx("footer",{className:"relative mt-auto pt-24 pb-12 overflow-hidden bg-gray-100 dark:bg-gray-950",children:r.jsxs("div",{className:"max-w-[90rem] mx-auto px-4 relative z-10",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-12 mb-20",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs(te,{to:"/",className:"flex items-center gap-3",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-10 md:h-12 w-auto"}),r.jsx("span",{className:"text-2xl font-black text-gradient font-display",children:"Baptizo"})]}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted leading-relaxed font-medium",children:"A professional sanctuary for digital spiritual exploration. Bridging ancient wisdom with modern consciousness."}),r.jsx("div",{className:"flex items-center gap-4",children:s.map(n=>r.jsx(T.a,{href:n.href,whileHover:{y:-4},className:"p-3 bg-white dark:bg-gray-900 border border-light-border dark:border-dark-border text-light-muted dark:text-dark-muted hover:text-primary-700 hover:border-primary-700 transition-all","aria-label":n.label,children:r.jsx(n.icon,{className:"w-5 h-5"})},n.label))})]}),Object.entries(t).map(([n,a])=>r.jsxs("div",{className:"space-y-6",children:[r.jsx("h4",{className:"text-sm font-black uppercase tracking-[0.2em] text-light-text dark:text-dark-text",children:n}),r.jsx("ul",{className:"space-y-4",children:a.map(i=>r.jsx("li",{children:r.jsxs(te,{to:i.path,className:"text-light-muted dark:text-dark-muted hover:text-primary-700 dark:hover:text-primary-400 transition-all font-medium flex items-center group",children:[i.label,r.jsx(Sw,{className:"w-4 h-4 opacity-0 -translate-x-2 group-hover:opacity-100 group-hover:translate-x-1 transition-all"})]})},i.label))})]},n))]}),r.jsxs("div",{className:"pt-12 border-t border-light-border dark:border-dark-border flex flex-col md:flex-row items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-light-muted dark:text-dark-muted font-medium",children:[r.jsx("span",{children:"Built with"}),r.jsx(gn,{className:"w-4 h-4 text-red-500 fill-red-500"}),r.jsx("span",{children:"for the Global Community"})]}),r.jsxs("div",{className:"flex items-center gap-8 text-xs font-bold text-light-muted/60 dark:text-dark-muted/60",children:[r.jsxs("p",{children:[" ",e," Baptizo Inc. All rights reserved."]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Dx,{className:"w-3 h-3"}),r.jsx("span",{children:"v2.0 Premium"})]})]})]})]})})}function ZP(){const e=jt(),{user:t}=Z(),s=U(S.stats.getBadgeCounts,t!=null&&t._id?{userId:t._id}:"skip"),n=a=>!!(a==="/feed"&&e.pathname==="/feed"||a!=="/feed"&&e.pathname.startsWith(a));return r.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 border-t border-light-border dark:border-dark-border glass pb-safe",children:r.jsxs("div",{className:"flex items-center justify-around h-16 px-2",children:[r.jsxs(te,{to:"/feed",className:J("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/feed")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative",children:r.jsx(Pw,{className:J("w-5 h-5 md:w-6 md:h-6",n("/feed")&&"fill-primary-500/20")})}),r.jsx("span",{className:J("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/feed")?"opacity-100":"opacity-70"),children:"Feed"})]}),r.jsxs(te,{to:"/chat",className:J("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/chat")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsxs("div",{className:"relative",children:[r.jsx(lt,{className:J("w-5 h-5 md:w-6 md:h-6",n("/chat")&&"fill-primary-500/20")}),((s==null?void 0:s.messages)||0)>0&&r.jsx("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-[9px] font-bold h-4 min-w-[16px] px-0.5 flex items-center justify-center rounded-full border border-white dark:border-[#1A1A1A] z-10 animate-bounce",children:((s==null?void 0:s.messages)||0)>9?"9+":s==null?void 0:s.messages})]}),r.jsx("span",{className:J("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/chat")?"opacity-100":"opacity-70"),children:"Chat"})]}),t&&r.jsxs(te,{to:"/create-post",className:J("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/create-post")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative p-1",children:r.jsx(zC,{className:J("w-6 h-6 md:w-8 md:h-8 text-primary-500 fill-primary-500/10")})}),r.jsx("span",{className:J("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/create-post")?"opacity-100 font-bold":"opacity-70"),children:"Post"})]}),r.jsxs(te,{to:"/banking",className:J("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/banking")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative",children:r.jsx(Ho,{className:J("w-5 h-5 md:w-6 md:h-6",n("/banking")&&"fill-primary-500/20")})}),r.jsx("span",{className:J("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/banking")?"opacity-100":"opacity-70"),children:"Banking"})]}),r.jsxs(te,{to:"/profile",className:J("flex flex-col items-center justify-center flex-1 min-w-0 transition-all relative py-1 mx-0.5 rounded-xl",n("/profile")?"text-primary-500 bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-primary-500"),children:[r.jsx("div",{className:"relative",children:r.jsx(yt,{className:J("w-5 h-5 md:w-6 md:h-6",n("/profile")&&"fill-primary-500/20")})}),r.jsx("span",{className:J("text-[10px] font-semibold mt-1 truncate w-full text-center",n("/profile")?"opacity-100":"opacity-70"),children:"Profile"})]})]})})}function D({children:e,className:t,glass:s=!1,hover:n=!1,onClick:a}){const i=T.div;return r.jsx(i,{onClick:a,whileHover:n?{y:-4,transition:{duration:.2}}:void 0,className:J("p-6 transition-all duration-200",s?"glass":"bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",n&&"cursor-pointer",t),children:e})}function fe({children:e,className:t}){return r.jsx("div",{className:J("mb-4",t),children:e})}function ge({children:e,className:t}){return r.jsx("h3",{className:J("text-xl font-semibold text-light-text dark:text-dark-text",t),children:e})}function O({children:e,className:t}){return r.jsx("div",{className:J("text-light-text dark:text-dark-text",t),children:e})}function G({children:e,variant:t="default",className:s,animate:n=!1}){const a={default:"bg-light-border dark:bg-dark-border text-light-text dark:text-dark-text",primary:"bg-primary-100 dark:bg-primary-950 text-primary-800 dark:text-primary-300 border border-primary-200 dark:border-primary-800",secondary:"bg-secondary-100 dark:bg-secondary-950 text-secondary-700 dark:text-secondary-300 border border-secondary-200 dark:border-secondary-800",success:"bg-green-100 dark:bg-green-950 text-green-700 dark:text-green-300 border border-green-200 dark:border-green-800",warning:"bg-yellow-100 dark:bg-yellow-950 text-yellow-700 dark:text-yellow-300 border border-yellow-200 dark:border-yellow-800",danger:"bg-red-100 dark:bg-red-950 text-red-700 dark:text-red-300 border border-red-200 dark:border-red-800",outline:"bg-transparent border border-light-border dark:border-dark-border text-light-muted dark:text-dark-muted"},i=n?T.span:"span",o=n?{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:500,damping:30}}:{};return r.jsx(i,{...o,className:J("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",a[t],s),children:e})}function eA(){const{user:e}=Z(),t=de();f.useEffect(()=>{e&&t("/feed",{replace:!0})},[e,t]);const s=[{icon:da,title:"Ancient Culture",subtitle:"Prophetic Wisdom",description:"Dive deep into prophetic wisdom and systems from the Old Testament. Understand the foundations of spiritual authority.",image:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/ancient-culture.png?updatedAt=1766305387425",color:"from-primary-500 to-primary-700"},{icon:Gr,title:"Wisdom of The Now",subtitle:"Modern Insights",description:"Explore spiritual identity and insights from the New Testament. Discover your place in the modern spiritual landscape.",image:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/wisdom-now.png?updatedAt=1766305387356",color:"from-secondary-500 to-secondary-700"}],n=[{icon:ke,title:"Vibrant Community",description:"Connect with a global network of believers seeking deeper truth."},{icon:ve,title:"Real Impact",description:"Earn recognition and rewards for active participation and growth."},{icon:_t,title:"Guided Path",description:"Structured learning paths designed for progressive spiritual maturity."}];return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg selection:bg-primary-700/20 relative overflow-hidden",children:[r.jsx("section",{className:"relative min-h-[90vh] flex items-center pt-24 md:pt-0",children:r.jsxs("div",{className:"w-full relative z-10",children:[r.jsxs("div",{className:"grid lg:grid-cols-2 gap-0 items-center",children:[r.jsx("div",{className:"max-w-[90rem] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs(T.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1},className:"text-center lg:text-left py-12",children:[r.jsx(G,{variant:"primary",className:"mb-4 px-2 py-0.5 text-[8px] md:text-[9px] uppercase tracking-wider font-medium font-display",children:"The Pinnacle of Spiritual Growth"}),r.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black font-display leading-[1.1] md:leading-tight mb-6 text-light-text dark:text-dark-text",children:["Elevate Your ",r.jsx("br",{}),"Spirituality"]}),r.jsx("p",{className:"hidden lg:block text-xl md:text-2xl text-light-muted dark:text-dark-muted mb-10 leading-relaxed max-w-2xl",children:"Join a professional community dedicated to exploring ancient prophetic wisdom and modern spiritual insights. Experience growth like never before."}),r.jsx("div",{className:"hidden lg:flex flex-col sm:flex-row items-center gap-6",children:e?r.jsx(te,{to:"/feed",children:r.jsxs(M,{size:"lg",className:"h-14 px-10 text-lg group",children:["Enter the Feed",r.jsx(_t,{className:"w-5 h-5 ml-2 group-hover:translate-x-1 transition-transform"})]})}):r.jsxs(r.Fragment,{children:[r.jsx(te,{to:"/register",children:r.jsx(M,{size:"lg",className:"h-14 px-10 text-lg",children:"Start Your Journey"})}),r.jsx(te,{to:"/login",children:r.jsx(M,{size:"lg",variant:"outline",className:"h-14 px-10 text-lg border-light-border/50 dark:border-dark-border/50",children:"Sign In"})})]})})]})}),r.jsx("div",{className:"relative mt-12 lg:mt-0 w-full h-full",children:r.jsx(T.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:1.2,ease:"easeOut"},className:"w-full h-full",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/Image_fx%20(6).png",alt:"Spiritual Community",className:"w-full h-[500px] md:h-[600px] lg:h-[90vh] object-cover"})})})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"lg:hidden mt-12 text-center max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("p",{className:"text-base sm:text-lg text-light-muted dark:text-dark-muted mb-8 leading-relaxed px-2 font-medium",children:"Join a professional community dedicated to exploring ancient prophetic wisdom and modern spiritual insights. Experience growth like never before."}),r.jsx("div",{className:"flex flex-col gap-4 px-6 sm:px-20",children:e?r.jsx(te,{to:"/feed",children:r.jsxs(M,{size:"lg",className:"h-14 w-full text-lg",children:["Enter the Feed",r.jsx(_t,{className:"w-5 h-5 ml-2"})]})}):r.jsxs(r.Fragment,{children:[r.jsx(te,{to:"/register",children:r.jsx(M,{size:"lg",className:"h-14 w-full text-lg",children:"Start Your Journey"})}),r.jsx(te,{to:"/login",children:r.jsx(M,{size:"lg",variant:"outline",className:"h-14 w-full text-lg border-light-border/50 dark:border-dark-border/50",children:"Sign In"})})]})})]})]})}),r.jsx("section",{className:"py-24 md:py-32 relative bg-white dark:bg-dark-bg",children:r.jsxs("div",{className:"max-w-[90rem] mx-auto px-4",children:[r.jsx("div",{className:"text-left mb-16 md:mb-24",children:r.jsxs(T.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},children:[r.jsx("h2",{className:"text-2xl md:text-4xl font-black font-display mb-6 tracking-tight text-left",children:"Explore Our Core Pillars"}),r.jsx("p",{className:"text-lg md:text-xl text-light-muted dark:text-dark-muted max-w-2xl font-medium",children:"We bridge the gap between ancient foundations and contemporary applications."})]})}),r.jsx("div",{className:"grid lg:grid-cols-2 gap-8 md:gap-12",children:s.map((a,i)=>r.jsx(T.div,{initial:{opacity:0,x:i%2===0?-40:40},whileInView:{opacity:1,x:0},transition:{delay:i*.2,duration:.8},viewport:{once:!0},className:"group relative",children:r.jsxs(D,{className:"overflow-hidden border border-light-border dark:border-dark-border h-full flex flex-col bg-light-card dark:bg-dark-card",children:[r.jsxs("div",{className:"relative h-64 md:h-80 overflow-hidden",children:[r.jsx("img",{src:a.image,alt:a.title,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute top-6 left-6",children:r.jsx(G,{className:"bg-white/10 backdrop-blur-xl border-white/20 text-white px-4 py-2 font-bold uppercase tracking-wider text-[10px]",children:a.subtitle})})]}),r.jsxs("div",{className:"p-8 md:p-12 flex-1 flex flex-col bg-gray-100 dark:bg-gray-900",children:[r.jsx("div",{className:"w-16 h-16 bg-primary-700 flex items-center justify-center mb-8",children:r.jsx(a.icon,{className:"w-8 h-8 text-white"})}),r.jsx("h3",{className:"text-2xl md:text-3xl font-black font-display mb-4 tracking-tight",children:a.title}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted text-lg md:text-xl mb-10 leading-relaxed font-medium",children:a.description}),r.jsxs(te,{to:"/register",className:"mt-auto group/btn inline-flex items-center gap-3 text-primary-700 dark:text-primary-400 font-black text-lg",children:["Explore Deeply ",r.jsx(_t,{className:"w-6 h-6 transform group-hover/btn:translate-x-2 transition-transform"})]})]})]})},a.title))})]})}),r.jsx("section",{className:"py-24 relative overflow-hidden bg-primary-950 dark:bg-black",children:r.jsx("div",{className:"max-w-[90rem] mx-auto px-4 relative z-10",children:r.jsx("div",{className:"grid md:grid-cols-3 gap-12 lg:gap-20",children:n.map((a,i)=>r.jsx(T.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:i*.2},viewport:{once:!0},className:"group",children:r.jsxs("div",{className:"text-center md:text-left",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary-100 dark:bg-primary-900/20 text-primary-700 dark:text-primary-400 mb-8 transform group-hover:scale-110 group-hover:rotate-3 transition-all",children:r.jsx(a.icon,{className:"w-8 h-8"})}),r.jsx("h4",{className:"text-xl md:text-2xl font-black font-display mb-4 tracking-tight text-white dark:text-white",children:a.title}),r.jsx("p",{className:"text-gray-300 dark:text-gray-300 text-lg leading-relaxed font-medium",children:a.description})]})},a.title))})})}),r.jsx("section",{className:"py-24 md:py-32 relative overflow-hidden",children:r.jsx("div",{className:"max-w-[90rem] mx-auto px-4 relative z-10",children:r.jsxs(T.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"relative z-10 p-8 md:p-12 max-w-7xl mx-auto text-center bg-gray-100 dark:bg-gray-900 border border-light-border dark:border-dark-border",children:[r.jsx(G,{variant:"primary",className:"mb-6 px-6 py-2 text-xs md:text-sm uppercase tracking-[0.2em] font-black font-display",children:"Unleash Your Potential"}),r.jsxs("h2",{className:"text-2xl md:text-4xl font-black font-display mb-6 tracking-tight leading-[1.1]",children:["Ready for a ",r.jsx("br",{}),"Higher Experience?"]}),r.jsx("p",{className:"text-lg md:text-xl text-light-muted dark:text-dark-muted mb-8 max-w-2xl mx-auto leading-relaxed font-medium",children:"Join thousands of believers who have unlocked deeper spiritual dimensions through Baptizo."}),!e&&r.jsx("div",{children:r.jsx(te,{to:"/register",children:r.jsx(M,{size:"lg",className:"h-12 md:h-14 px-8 md:px-12 text-base md:text-lg font-black hover:scale-105 active:scale-95 transition-all",children:"Create Your Free Account"})})})]})})})]})}const me=f.forwardRef(({label:e,error:t,icon:s,className:n,...a},i)=>r.jsxs("div",{className:"w-full",children:[e&&r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:e}),r.jsxs("div",{className:"relative",children:[s&&r.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-light-muted dark:text-dark-muted",children:s}),r.jsx("input",{ref:i,className:J("w-full px-4 py-2.5 rounded-lg border transition-all duration-200","bg-light-bg dark:bg-dark-bg","border-light-border dark:border-dark-border","text-light-text dark:text-dark-text","placeholder:text-light-muted dark:placeholder:text-dark-muted","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:opacity-50 disabled:cursor-not-allowed",t&&"border-red-500 focus:ring-red-500",s&&"pl-10",n),...a})]}),t&&r.jsx("p",{className:"mt-1.5 text-sm text-red-500",children:t})]}));me.displayName="Input";const tA=()=>{};var M0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=function(e){const t=[];let s=0;for(let n=0;n<e.length;n++){let a=e.charCodeAt(n);a<128?t[s++]=a:a<2048?(t[s++]=a>>6|192,t[s++]=a&63|128):(a&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++n)&1023),t[s++]=a>>18|240,t[s++]=a>>12&63|128,t[s++]=a>>6&63|128,t[s++]=a&63|128):(t[s++]=a>>12|224,t[s++]=a>>6&63|128,t[s++]=a&63|128)}return t},rA=function(e){const t=[];let s=0,n=0;for(;s<e.length;){const a=e[s++];if(a<128)t[n++]=String.fromCharCode(a);else if(a>191&&a<224){const i=e[s++];t[n++]=String.fromCharCode((a&31)<<6|i&63)}else if(a>239&&a<365){const i=e[s++],o=e[s++],l=e[s++],d=((a&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(d>>10)),t[n++]=String.fromCharCode(56320+(d&1023))}else{const i=e[s++],o=e[s++];t[n++]=String.fromCharCode((a&15)<<12|(i&63)<<6|o&63)}}return t.join("")},xj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let a=0;a<e.length;a+=3){const i=e[a],o=a+1<e.length,l=o?e[a+1]:0,d=a+2<e.length,c=d?e[a+2]:0,u=i>>2,m=(i&3)<<4|l>>4;let h=(l&15)<<2|c>>6,x=c&63;d||(x=64,o||(h=64)),n.push(s[u],s[m],s[h],s[x])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(hj(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):rA(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let a=0;a<e.length;){const i=s[e.charAt(a++)],l=a<e.length?s[e.charAt(a)]:0;++a;const c=a<e.length?s[e.charAt(a)]:64;++a;const m=a<e.length?s[e.charAt(a)]:64;if(++a,i==null||l==null||c==null||m==null)throw new sA;const h=i<<2|l>>4;if(n.push(h),c!==64){const x=l<<4&240|c>>2;if(n.push(x),m!==64){const g=c<<6&192|m;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class sA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nA=function(e){const t=hj(e);return xj.encodeByteArray(t,!0)},pj=function(e){return nA(e).replace(/\./g,"")},fj=function(e){try{return xj.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=()=>aA().__FIREBASE_DEFAULTS__,oA=()=>{if(typeof process>"u"||typeof M0>"u")return;const e=M0.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},lA=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&fj(e[1]);return t&&JSON.parse(t)},lp=()=>{try{return tA()||iA()||oA()||lA()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},dA=e=>{var t,s;return(s=(t=lp())==null?void 0:t.emulatorHosts)==null?void 0:s[e]},gj=()=>{var e;return(e=lp())==null?void 0:e.config},bj=e=>{var t;return(t=lp())==null?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function uA(e){return(await fetch(e,{credentials:"include"})).ok}const ro={};function mA(){const e={prod:[],emulator:[]};for(const t of Object.keys(ro))ro[t]?e.emulator.push(t):e.prod.push(t);return e}function hA(e){let t=document.getElementById(e),s=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),s=!0),{created:s,element:t}}let R0=!1;function xA(e,t){if(typeof window>"u"||typeof document>"u"||!Mc(window.location.host)||ro[e]===t||ro[e]||R0)return;ro[e]=t;function s(h){return`__firebase__banner__${h}`}const n="__firebase__banner",i=mA().prod.length>0;function o(){const h=document.getElementById(n);h&&h.remove()}function l(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function d(h,x){h.setAttribute("width","24"),h.setAttribute("id",x),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function c(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{R0=!0,o()},h}function u(h,x){h.setAttribute("id",x),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function m(){const h=hA(n),x=s("text"),g=document.getElementById(x)||document.createElement("span"),v=s("learnmore"),y=document.getElementById(v)||document.createElement("a"),p=s("preprendIcon"),b=document.getElementById(p)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const w=h.element;l(w),u(y,v);const k=c();d(b,p),w.append(b,g,y,k),document.body.appendChild(w)}i?(g.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function fA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function gA(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function bA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function yA(){const e=Pt();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function yj(){try{return typeof indexedDB=="object"}catch{return!1}}function vj(){return new Promise((e,t)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(n);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(n),e(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var i;t(((i=a.error)==null?void 0:i.message)||"")}}catch(s){t(s)}})}function vA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="FirebaseError";class ks extends Error{constructor(t,s,n){super(s),this.code=t,this.customData=n,this.name=wA,Object.setPrototypeOf(this,ks.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ma.prototype.create)}}class ma{constructor(t,s,n){this.service=t,this.serviceName=s,this.errors=n}create(t,...s){const n=s[0]||{},a=`${this.service}/${t}`,i=this.errors[t],o=i?kA(i,n):"Error",l=`${this.serviceName}: ${o} (${a}).`;return new ks(a,l,n)}}function kA(e,t){return e.replace(jA,(s,n)=>{const a=t[n];return a!=null?String(a):`<${n}?>`})}const jA=/\{\$([^}]+)}/g;function NA(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ai(e,t){if(e===t)return!0;const s=Object.keys(e),n=Object.keys(t);for(const a of s){if(!n.includes(a))return!1;const i=e[a],o=t[a];if(L0(i)&&L0(o)){if(!ai(i,o))return!1}else if(i!==o)return!1}for(const a of n)if(!s.includes(a))return!1;return!0}function L0(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e){const t=[];for(const[s,n]of Object.entries(e))Array.isArray(n)?n.forEach(a=>{t.push(encodeURIComponent(s)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(s)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}function SA(e,t){const s=new CA(e,t);return s.subscribe.bind(s)}class CA{constructor(t,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{t(this)}).catch(n=>{this.error(n)})}next(t){this.forEachObserver(s=>{s.next(t)})}error(t){this.forEachObserver(s=>{s.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,s,n){let a;if(t===void 0&&s===void 0&&n===void 0)throw new Error("Missing Observer.");TA(t,["next","error","complete"])?a=t:a={next:t,error:s,complete:n},a.next===void 0&&(a.next=Wu),a.error===void 0&&(a.error=Wu),a.complete===void 0&&(a.complete=Wu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),i}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,t)}sendOne(t,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{s(this.observers[t])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TA(e,t){if(typeof e!="object"||e===null)return!1;for(const s of t)if(s in e&&typeof e[s]=="function")return!0;return!1}function Wu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(e){return e&&e._delegate?e._delegate:e}class Wr{constructor(t,s,n){this.name=t,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const n=new cA;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&n.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(n)return null;throw a}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(PA(t))try{this.getOrInitializeService({instanceIdentifier:Pn})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:a});n.resolve(i)}catch{}}}}clearInstance(t=Pn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Pn){return this.instances.has(t)}getOptions(t=Pn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(a)}return a}onInit(t,s){const n=this.normalizeInstanceIdentifier(s),a=this.onInitCallbacks.get(n)??new Set;a.add(t),this.onInitCallbacks.set(n,a);const i=this.instances.get(n);return i&&t(i,n),()=>{a.delete(t)}}invokeOnInitCallbacks(t,s){const n=this.onInitCallbacks.get(s);if(n)for(const a of n)try{a(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:IA(t),options:s}),this.instances.set(t,n),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=Pn){return this.component?this.component.multipleInstances?t:Pn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IA(e){return e===Pn?void 0:e}function PA(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new _A(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(je||(je={}));const EA={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},MA=je.INFO,RA={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},LA=(e,t,...s)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),a=RA[t];if(a)console[a](`[${n}]  ${e.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class wj{constructor(t){this.name=t,this._logLevel=MA,this._logHandler=LA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in je))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?EA[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...t),this._logHandler(this,je.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...t),this._logHandler(this,je.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,je.INFO,...t),this._logHandler(this,je.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,je.WARN,...t),this._logHandler(this,je.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...t),this._logHandler(this,je.ERROR,...t)}}const DA=(e,t)=>t.some(s=>e instanceof s);let D0,O0;function OA(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FA(){return O0||(O0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kj=new WeakMap,kh=new WeakMap,jj=new WeakMap,qu=new WeakMap,dp=new WeakMap;function UA(e){const t=new Promise((s,n)=>{const a=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{s(ds(e.result)),a()},o=()=>{n(e.error),a()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(s=>{s instanceof IDBCursor&&kj.set(s,e)}).catch(()=>{}),dp.set(t,e),t}function BA(e){if(kh.has(e))return;const t=new Promise((s,n)=>{const a=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{s(),a()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});kh.set(e,t)}let jh={get(e,t,s){if(e instanceof IDBTransaction){if(t==="done")return kh.get(e);if(t==="objectStoreNames")return e.objectStoreNames||jj.get(e);if(t==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return ds(e[t])},set(e,t,s){return e[t]=s,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function VA(e){jh=e(jh)}function $A(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...s){const n=e.call(Hu(this),t,...s);return jj.set(n,t.sort?t.sort():[t]),ds(n)}:FA().includes(e)?function(...t){return e.apply(Hu(this),t),ds(kj.get(this))}:function(...t){return ds(e.apply(Hu(this),t))}}function zA(e){return typeof e=="function"?$A(e):(e instanceof IDBTransaction&&BA(e),DA(e,OA())?new Proxy(e,jh):e)}function ds(e){if(e instanceof IDBRequest)return UA(e);if(qu.has(e))return qu.get(e);const t=zA(e);return t!==e&&(qu.set(e,t),dp.set(t,e)),t}const Hu=e=>dp.get(e);function Rc(e,t,{blocked:s,upgrade:n,blocking:a,terminated:i}={}){const o=indexedDB.open(e,t),l=ds(o);return n&&o.addEventListener("upgradeneeded",d=>{n(ds(o.result),d.oldVersion,d.newVersion,ds(o.transaction),d)}),s&&o.addEventListener("blocked",d=>s(d.oldVersion,d.newVersion,d)),l.then(d=>{i&&d.addEventListener("close",()=>i()),a&&d.addEventListener("versionchange",c=>a(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}function Gu(e,{blocked:t}={}){const s=indexedDB.deleteDatabase(e);return t&&s.addEventListener("blocked",n=>t(n.oldVersion,n)),ds(s).then(()=>{})}const WA=["get","getKey","getAll","getAllKeys","count"],qA=["put","add","delete","clear"],Qu=new Map;function F0(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Qu.get(t))return Qu.get(t);const s=t.replace(/FromIndex$/,""),n=t!==s,a=qA.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(a||WA.includes(s)))return;const i=async function(o,...l){const d=this.transaction(o,a?"readwrite":"readonly");let c=d.store;return n&&(c=c.index(l.shift())),(await Promise.all([c[s](...l),a&&d.done]))[0]};return Qu.set(t,i),i}VA(e=>({...e,get:(t,s,n)=>F0(t,s)||e.get(t,s,n),has:(t,s)=>!!F0(t,s)||e.has(t,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(GA(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function GA(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Nh="@firebase/app",U0="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs=new wj("@firebase/app"),QA="@firebase/app-compat",KA="@firebase/analytics-compat",YA="@firebase/analytics",JA="@firebase/app-check-compat",XA="@firebase/app-check",ZA="@firebase/auth",eE="@firebase/auth-compat",tE="@firebase/database",rE="@firebase/data-connect",sE="@firebase/database-compat",nE="@firebase/functions",aE="@firebase/functions-compat",iE="@firebase/installations",oE="@firebase/installations-compat",lE="@firebase/messaging",dE="@firebase/messaging-compat",cE="@firebase/performance",uE="@firebase/performance-compat",mE="@firebase/remote-config",hE="@firebase/remote-config-compat",xE="@firebase/storage",pE="@firebase/storage-compat",fE="@firebase/firestore",gE="@firebase/ai",bE="@firebase/firestore-compat",yE="firebase",vE="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sh="[DEFAULT]",wE={[Nh]:"fire-core",[QA]:"fire-core-compat",[YA]:"fire-analytics",[KA]:"fire-analytics-compat",[XA]:"fire-app-check",[JA]:"fire-app-check-compat",[ZA]:"fire-auth",[eE]:"fire-auth-compat",[tE]:"fire-rtdb",[rE]:"fire-data-connect",[sE]:"fire-rtdb-compat",[nE]:"fire-fn",[aE]:"fire-fn-compat",[iE]:"fire-iid",[oE]:"fire-iid-compat",[lE]:"fire-fcm",[dE]:"fire-fcm-compat",[cE]:"fire-perf",[uE]:"fire-perf-compat",[mE]:"fire-rc",[hE]:"fire-rc-compat",[xE]:"fire-gcs",[pE]:"fire-gcs-compat",[fE]:"fire-fst",[bE]:"fire-fst-compat",[gE]:"fire-vertex","fire-js":"fire-js",[yE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd=new Map,kE=new Map,Ch=new Map;function B0(e,t){try{e.container.addComponent(t)}catch(s){gs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,s)}}function bs(e){const t=e.name;if(Ch.has(t))return gs.debug(`There were multiple attempts to register component ${t}.`),!1;Ch.set(t,e);for(const s of Hd.values())B0(s,e);for(const s of kE.values())B0(s,e);return!0}function Xo(e,t){const s=e.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),e.container.getProvider(t)}function Lr(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nn=new ma("app","Firebase",jE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(t,s,n){this._isDeleted=!1,this._options={...t},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=vE;function Nj(e,t={}){let s=e;typeof t!="object"&&(t={name:t});const n={name:Sh,automaticDataCollectionEnabled:!0,...t},a=n.name;if(typeof a!="string"||!a)throw nn.create("bad-app-name",{appName:String(a)});if(s||(s=gj()),!s)throw nn.create("no-options");const i=Hd.get(a);if(i){if(ai(s,i.options)&&ai(n,i.config))return i;throw nn.create("duplicate-app",{appName:a})}const o=new AA(a);for(const d of Ch.values())o.addComponent(d);const l=new NE(s,n,o);return Hd.set(a,l),l}function Sj(e=Sh){const t=Hd.get(e);if(!t&&e===Sh&&gj())return Nj();if(!t)throw nn.create("no-app",{appName:e});return t}function Br(e,t,s){let n=wE[e]??e;s&&(n+=`-${s}`);const a=n.match(/\s|\//),i=t.match(/\s|\//);if(a||i){const o=[`Unable to register library "${n}" with version "${t}":`];a&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),gs.warn(o.join(" "));return}bs(new Wr(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="firebase-heartbeat-database",CE=1,Mo="firebase-heartbeat-store";let Ku=null;function Cj(){return Ku||(Ku=Rc(SE,CE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Mo)}catch(s){console.warn(s)}}}}).catch(e=>{throw nn.create("idb-open",{originalErrorMessage:e.message})})),Ku}async function TE(e){try{const s=(await Cj()).transaction(Mo),n=await s.objectStore(Mo).get(Tj(e));return await s.done,n}catch(t){if(t instanceof ks)gs.warn(t.message);else{const s=nn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});gs.warn(s.message)}}}async function V0(e,t){try{const n=(await Cj()).transaction(Mo,"readwrite");await n.objectStore(Mo).put(t,Tj(e)),await n.done}catch(s){if(s instanceof ks)gs.warn(s.message);else{const n=nn.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});gs.warn(n.message)}}}function Tj(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E=1024,IE=30;class PE{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new EE(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$0();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)==null?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:a}),this._heartbeatsCache.heartbeats.length>IE){const o=ME(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){gs.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=$0(),{heartbeatsToSend:n,unsentEntries:a}=AE(this._heartbeatsCache.heartbeats),i=pj(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return gs.warn(s),""}}}function $0(){return new Date().toISOString().substring(0,10)}function AE(e,t=_E){const s=[];let n=e.slice();for(const a of e){const i=s.find(o=>o.agent===a.agent);if(i){if(i.dates.push(a.date),z0(s)>t){i.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),z0(s)>t){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class EE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yj()?vj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await TE(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return V0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return V0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function z0(e){return pj(JSON.stringify({version:2,heartbeats:e})).length}function ME(e){if(e.length===0)return-1;let t=0,s=e[0].date;for(let n=1;n<e.length;n++)e[n].date<s&&(s=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(e){bs(new Wr("platform-logger",t=>new HA(t),"PRIVATE")),bs(new Wr("heartbeat",t=>new PE(t),"PRIVATE")),Br(Nh,U0,e),Br(Nh,U0,"esm2020"),Br("fire-js","")}RE("");var LE="firebase",DE="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(LE,DE,"app");const _j="@firebase/installations",cp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=1e4,Pj=`w:${cp}`,Aj="FIS_v2",OE="https://firebaseinstallations.googleapis.com/v1",FE=60*60*1e3,UE="installations",BE="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ra=new ma(UE,BE,VE);function Ej(e){return e instanceof ks&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj({projectId:e}){return`${OE}/projects/${e}/installations`}function Rj(e){return{token:e.token,requestStatus:2,expiresIn:zE(e.expiresIn),creationTime:Date.now()}}async function Lj(e,t){const n=(await t.json()).error;return ra.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Dj({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function $E(e,{refreshToken:t}){const s=Dj(e);return s.append("Authorization",WE(t)),s}async function Oj(e){const t=await e();return t.status>=500&&t.status<600?e():t}function zE(e){return Number(e.replace("s","000"))}function WE(e){return`${Aj} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE({appConfig:e,heartbeatServiceProvider:t},{fid:s}){const n=Mj(e),a=Dj(e),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const o={fid:s,authVersion:Aj,appId:e.appId,sdkVersion:Pj},l={method:"POST",headers:a,body:JSON.stringify(o)},d=await Oj(()=>fetch(n,l));if(d.ok){const c=await d.json();return{fid:c.fid||s,registrationStatus:2,refreshToken:c.refreshToken,authToken:Rj(c.authToken)}}else throw await Lj("Create Installation",d)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fj(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE=/^[cdef][\w-]{21}$/,Th="";function QE(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const s=KE(e);return GE.test(s)?s:Th}catch{return Th}}function KE(e){return HE(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uj=new Map;function Bj(e,t){const s=Lc(e);Vj(s,t),YE(s,t)}function Vj(e,t){const s=Uj.get(e);if(s)for(const n of s)n(t)}function YE(e,t){const s=JE();s&&s.postMessage({key:e,fid:t}),XE()}let On=null;function JE(){return!On&&"BroadcastChannel"in self&&(On=new BroadcastChannel("[Firebase] FID Change"),On.onmessage=e=>{Vj(e.data.key,e.data.fid)}),On}function XE(){Uj.size===0&&On&&(On.close(),On=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firebase-installations-database",e6=1,sa="firebase-installations-store";let Yu=null;function up(){return Yu||(Yu=Rc(ZE,e6,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(sa)}}})),Yu}async function Gd(e,t){const s=Lc(e),a=(await up()).transaction(sa,"readwrite"),i=a.objectStore(sa),o=await i.get(s);return await i.put(t,s),await a.done,(!o||o.fid!==t.fid)&&Bj(e,t.fid),t}async function $j(e){const t=Lc(e),n=(await up()).transaction(sa,"readwrite");await n.objectStore(sa).delete(t),await n.done}async function Dc(e,t){const s=Lc(e),a=(await up()).transaction(sa,"readwrite"),i=a.objectStore(sa),o=await i.get(s),l=t(o);return l===void 0?await i.delete(s):await i.put(l,s),await a.done,l&&(!o||o.fid!==l.fid)&&Bj(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mp(e){let t;const s=await Dc(e.appConfig,n=>{const a=t6(n),i=r6(e,a);return t=i.registrationPromise,i.installationEntry});return s.fid===Th?{installationEntry:await t}:{installationEntry:s,registrationPromise:t}}function t6(e){const t=e||{fid:QE(),registrationStatus:0};return zj(t)}function r6(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ra.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const s={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},n=s6(e,s);return{installationEntry:s,registrationPromise:n}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:n6(e)}:{installationEntry:t}}async function s6(e,t){try{const s=await qE(e,t);return Gd(e.appConfig,s)}catch(s){throw Ej(s)&&s.customData.serverCode===409?await $j(e.appConfig):await Gd(e.appConfig,{fid:t.fid,registrationStatus:0}),s}}async function n6(e){let t=await W0(e.appConfig);for(;t.registrationStatus===1;)await Fj(100),t=await W0(e.appConfig);if(t.registrationStatus===0){const{installationEntry:s,registrationPromise:n}=await mp(e);return n||s}return t}function W0(e){return Dc(e,t=>{if(!t)throw ra.create("installation-not-found");return zj(t)})}function zj(e){return a6(e)?{fid:e.fid,registrationStatus:0}:e}function a6(e){return e.registrationStatus===1&&e.registrationTime+Ij<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i6({appConfig:e,heartbeatServiceProvider:t},s){const n=o6(e,s),a=$E(e,s),i=t.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&a.append("x-firebase-client",c)}const o={installation:{sdkVersion:Pj,appId:e.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},d=await Oj(()=>fetch(n,l));if(d.ok){const c=await d.json();return Rj(c)}else throw await Lj("Generate Auth Token",d)}function o6(e,{fid:t}){return`${Mj(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(e,t=!1){let s;const n=await Dc(e.appConfig,i=>{if(!Wj(i))throw ra.create("not-registered");const o=i.authToken;if(!t&&c6(o))return i;if(o.requestStatus===1)return s=l6(e,t),i;{if(!navigator.onLine)throw ra.create("app-offline");const l=m6(i);return s=d6(e,l),l}});return s?await s:n.authToken}async function l6(e,t){let s=await q0(e.appConfig);for(;s.authToken.requestStatus===1;)await Fj(100),s=await q0(e.appConfig);const n=s.authToken;return n.requestStatus===0?hp(e,t):n}function q0(e){return Dc(e,t=>{if(!Wj(t))throw ra.create("not-registered");const s=t.authToken;return h6(s)?{...t,authToken:{requestStatus:0}}:t})}async function d6(e,t){try{const s=await i6(e,t),n={...t,authToken:s};return await Gd(e.appConfig,n),s}catch(s){if(Ej(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await $j(e.appConfig);else{const n={...t,authToken:{requestStatus:0}};await Gd(e.appConfig,n)}throw s}}function Wj(e){return e!==void 0&&e.registrationStatus===2}function c6(e){return e.requestStatus===2&&!u6(e)}function u6(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+FE}function m6(e){const t={requestStatus:1,requestTime:Date.now()};return{...e,authToken:t}}function h6(e){return e.requestStatus===1&&e.requestTime+Ij<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x6(e){const t=e,{installationEntry:s,registrationPromise:n}=await mp(t);return n?n.catch(console.error):hp(t).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p6(e,t=!1){const s=e;return await f6(s),(await hp(s,t)).token}async function f6(e){const{registrationPromise:t}=await mp(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g6(e){if(!e||!e.options)throw Ju("App Configuration");if(!e.name)throw Ju("App Name");const t=["projectId","apiKey","appId"];for(const s of t)if(!e.options[s])throw Ju(s);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Ju(e){return ra.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="installations",b6="installations-internal",y6=e=>{const t=e.getProvider("app").getImmediate(),s=g6(t),n=Xo(t,"heartbeat");return{app:t,appConfig:s,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},v6=e=>{const t=e.getProvider("app").getImmediate(),s=Xo(t,qj).getImmediate();return{getId:()=>x6(s),getToken:a=>p6(s,a)}};function w6(){bs(new Wr(qj,y6,"PUBLIC")),bs(new Wr(b6,v6,"PRIVATE"))}w6();Br(_j,cp);Br(_j,cp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k6="/firebase-messaging-sw.js",j6="/firebase-cloud-messaging-push-scope",Hj="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",N6="https://fcmregistrations.googleapis.com/v1",Gj="google.c.a.c_id",S6="google.c.a.c_l",C6="google.c.a.ts",T6="google.c.a.e",H0=1e4;var G0;(function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(G0||(G0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ro;(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"})(Ro||(Ro={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _6(e){const t="=".repeat((4-e.length%4)%4),s=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(s),a=new Uint8Array(n.length);for(let i=0;i<n.length;++i)a[i]=n.charCodeAt(i);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu="fcm_token_details_db",I6=5,Q0="fcm_token_object_Store";async function P6(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(Xu))return null;let t=null;return(await Rc(Xu,I6,{upgrade:async(n,a,i,o)=>{if(a<2||!n.objectStoreNames.contains(Q0))return;const l=o.objectStore(Q0),d=await l.index("fcmSenderId").get(e);if(await l.clear(),!!d){if(a===2){const c=d;if(!c.auth||!c.p256dh||!c.endpoint)return;t={token:c.fcmToken,createTime:c.createTime??Date.now(),subscriptionOptions:{auth:c.auth,p256dh:c.p256dh,endpoint:c.endpoint,swScope:c.swScope,vapidKey:typeof c.vapidKey=="string"?c.vapidKey:Jr(c.vapidKey)}}}else if(a===3){const c=d;t={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Jr(c.auth),p256dh:Jr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Jr(c.vapidKey)}}}else if(a===4){const c=d;t={token:c.fcmToken,createTime:c.createTime,subscriptionOptions:{auth:Jr(c.auth),p256dh:Jr(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:Jr(c.vapidKey)}}}}}})).close(),await Gu(Xu),await Gu("fcm_vapid_details_db"),await Gu("undefined"),A6(t)?t:null}function A6(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return typeof e.createTime=="number"&&e.createTime>0&&typeof e.token=="string"&&e.token.length>0&&typeof t.auth=="string"&&t.auth.length>0&&typeof t.p256dh=="string"&&t.p256dh.length>0&&typeof t.endpoint=="string"&&t.endpoint.length>0&&typeof t.swScope=="string"&&t.swScope.length>0&&typeof t.vapidKey=="string"&&t.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="firebase-messaging-database",M6=1,Lo="firebase-messaging-store";let Zu=null;function Qj(){return Zu||(Zu=Rc(E6,M6,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Lo)}}})),Zu}async function R6(e){const t=Kj(e),n=await(await Qj()).transaction(Lo).objectStore(Lo).get(t);if(n)return n;{const a=await P6(e.appConfig.senderId);if(a)return await xp(e,a),a}}async function xp(e,t){const s=Kj(e),a=(await Qj()).transaction(Lo,"readwrite");return await a.objectStore(Lo).put(t,s),await a.done,t}function Kj({appConfig:e}){return e.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},vt=new ma("messaging","Messaging",L6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D6(e,t){const s=await fp(e),n=Yj(t),a={method:"POST",headers:s,body:JSON.stringify(n)};let i;try{i=await(await fetch(pp(e.appConfig),a)).json()}catch(o){throw vt.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw vt.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw vt.create("token-subscribe-no-token");return i.token}async function O6(e,t){const s=await fp(e),n=Yj(t.subscriptionOptions),a={method:"PATCH",headers:s,body:JSON.stringify(n)};let i;try{i=await(await fetch(`${pp(e.appConfig)}/${t.token}`,a)).json()}catch(o){throw vt.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw vt.create("token-update-failed",{errorInfo:o})}if(!i.token)throw vt.create("token-update-no-token");return i.token}async function F6(e,t){const n={method:"DELETE",headers:await fp(e)};try{const i=await(await fetch(`${pp(e.appConfig)}/${t}`,n)).json();if(i.error){const o=i.error.message;throw vt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(a){throw vt.create("token-unsubscribe-failed",{errorInfo:a==null?void 0:a.toString()})}}function pp({projectId:e}){return`${N6}/projects/${e}/registrations`}async function fp({appConfig:e,installations:t}){const s=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function Yj({p256dh:e,auth:t,endpoint:s,vapidKey:n}){const a={web:{endpoint:s,auth:t,p256dh:e}};return n!==Hj&&(a.web.applicationPubKey=n),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U6=7*24*60*60*1e3;async function B6(e){const t=await $6(e.swRegistration,e.vapidKey),s={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:Jr(t.getKey("auth")),p256dh:Jr(t.getKey("p256dh"))},n=await R6(e.firebaseDependencies);if(n){if(z6(n.subscriptionOptions,s))return Date.now()>=n.createTime+U6?V6(e,{token:n.token,createTime:Date.now(),subscriptionOptions:s}):n.token;try{await F6(e.firebaseDependencies,n.token)}catch(a){console.warn(a)}return K0(e.firebaseDependencies,s)}else return K0(e.firebaseDependencies,s)}async function V6(e,t){try{const s=await O6(e.firebaseDependencies,t),n={...t,token:s,createTime:Date.now()};return await xp(e.firebaseDependencies,n),s}catch(s){throw s}}async function K0(e,t){const n={token:await D6(e,t),createTime:Date.now(),subscriptionOptions:t};return await xp(e,n),n.token}async function $6(e,t){const s=await e.pushManager.getSubscription();return s||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_6(t)})}function z6(e,t){const s=t.vapidKey===e.vapidKey,n=t.endpoint===e.endpoint,a=t.auth===e.auth,i=t.p256dh===e.p256dh;return s&&n&&a&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return W6(t,e),q6(t,e),H6(t,e),t}function W6(e,t){if(!t.notification)return;e.notification={};const s=t.notification.title;s&&(e.notification.title=s);const n=t.notification.body;n&&(e.notification.body=n);const a=t.notification.image;a&&(e.notification.image=a);const i=t.notification.icon;i&&(e.notification.icon=i)}function q6(e,t){t.data&&(e.data=t.data)}function H6(e,t){var a,i,o,l;if(!t.fcmOptions&&!((a=t.notification)!=null&&a.click_action))return;e.fcmOptions={};const s=((i=t.fcmOptions)==null?void 0:i.link)??((o=t.notification)==null?void 0:o.click_action);s&&(e.fcmOptions.link=s);const n=(l=t.fcmOptions)==null?void 0:l.analytics_label;n&&(e.fcmOptions.analyticsLabel=n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(e){return typeof e=="object"&&!!e&&Gj in e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q6(e){if(!e||!e.options)throw em("App Configuration Object");if(!e.name)throw em("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:s}=e;for(const n of t)if(!s[n])throw em(n);return{appName:e.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function em(e){return vt.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(t,s,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=Q6(t);this.firebaseDependencies={app:t,appConfig:a,installations:s,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y6(e){try{e.swRegistration=await navigator.serviceWorker.register(k6,{scope:j6}),e.swRegistration.update().catch(()=>{}),await J6(e.swRegistration)}catch(t){throw vt.create("failed-service-worker-registration",{browserErrorMessage:t==null?void 0:t.message})}}async function J6(e){return new Promise((t,s)=>{const n=setTimeout(()=>s(new Error(`Service worker not registered after ${H0} ms`)),H0),a=e.installing||e.waiting;e.active?(clearTimeout(n),t()):a?a.onstatechange=i=>{var o;((o=i.target)==null?void 0:o.state)==="activated"&&(a.onstatechange=null,clearTimeout(n),t())}:(clearTimeout(n),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X6(e,t){if(!t&&!e.swRegistration&&await Y6(e),!(!t&&e.swRegistration)){if(!(t instanceof ServiceWorkerRegistration))throw vt.create("invalid-sw-registration");e.swRegistration=t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z6(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=Hj)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jj(e,t){if(!navigator)throw vt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw vt.create("permission-blocked");return await Z6(e,t==null?void 0:t.vapidKey),await X6(e,t==null?void 0:t.serviceWorkerRegistration),B6(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(e,t,s){const n=tM(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:s[Gj],message_name:s[S6],message_time:s[C6],message_device_time:Math.floor(Date.now()/1e3)})}function tM(e){switch(e){case Ro.NOTIFICATION_CLICKED:return"notification_open";case Ro.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(e,t){const s=t.data;if(!s.isFirebaseMessaging)return;e.onMessageHandler&&s.messageType===Ro.PUSH_RECEIVED&&(typeof e.onMessageHandler=="function"?e.onMessageHandler(Y0(s)):e.onMessageHandler.next(Y0(s)));const n=s.data;G6(n)&&n[T6]==="1"&&await eM(e,s.messageType,n)}const J0="@firebase/messaging",X0="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=e=>{const t=new K6(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>rM(t,s)),t},nM=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:n=>Jj(t,n)}};function aM(){bs(new Wr("messaging",sM,"PUBLIC")),bs(new Wr("messaging-internal",nM,"PRIVATE")),Br(J0,X0),Br(J0,X0,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iM(){try{await vj()}catch{return!1}return typeof window<"u"&&yj()&&vA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(e,t){if(!navigator)throw vt.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(e=Sj()){return iM().then(t=>{if(!t)throw vt.create("unsupported-browser")},t=>{throw vt.create("indexed-db-unsupported")}),Xo(js(e),"messaging").getImmediate()}async function dM(e,t){return e=js(e),Jj(e,t)}function cM(e,t){return e=js(e),oM(e,t)}aM();function Xj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uM=Xj,Zj=new ma("auth","Firebase",Xj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qd=new wj("@firebase/auth");function mM(e,...t){Qd.logLevel<=je.WARN&&Qd.warn(`Auth (${Zo}): ${e}`,...t)}function Zl(e,...t){Qd.logLevel<=je.ERROR&&Qd.error(`Auth (${Zo}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(e,...t){throw bp(e,...t)}function Sr(e,...t){return bp(e,...t)}function gp(e,t,s){const n={...uM(),[t]:s};return new ma("auth","Firebase",n).create(t,{appName:e.name})}function Hn(e){return gp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hM(e,t,s){const n=s;if(!(t instanceof n))throw n.name!==t.constructor.name&&qr(e,"argument-error"),gp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bp(e,...t){if(typeof e!="string"){const s=t[0],n=[...t.slice(1)];return n[0]&&(n[0].appName=e.name),e._errorFactory.create(s,...n)}return Zj.create(e,...t)}function ie(e,t,...s){if(!e)throw bp(t,...s)}function ns(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Zl(t),new Error(t)}function ys(e,t){e||ns(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.href)||""}function xM(){return Z0()==="http:"||Z0()==="https:"}function Z0(){var e;return typeof self<"u"&&((e=self.location)==null?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xM()||gA()||"connection"in navigator)?navigator.onLine:!0}function fM(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,s){this.shortDelay=t,this.longDelay=s,ys(s>t,"Short delay should be less than long delay!"),this.isMobile=pA()||bA()}get(){return pM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(e,t){ys(e.emulator,"Emulator should always be set here");const{url:s}=e.emulator;return t?`${s}${t.startsWith("/")?t.slice(1):t}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{static initialize(t,s,n){this.fetchImpl=t,s&&(this.headersImpl=s),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],yM=new el(3e4,6e4);function vp(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function xi(e,t,s,n,a={}){return tN(e,a,async()=>{let i={},o={};n&&(t==="GET"?o=n:i={body:JSON.stringify(n)});const l=Jo({key:e.config.apiKey,...o}).slice(1),d=await e._getAdditionalHeaders();d["Content-Type"]="application/json",e.languageCode&&(d["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:d,...i};return fA()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&Mc(e.emulatorConfig.host)&&(c.credentials="include"),eN.fetch()(await rN(e,e.config.apiHost,s,l),c)})}async function tN(e,t,s){e._canInitEmulator=!1;const n={...gM,...t};try{const a=new wM(e),i=await Promise.race([s(),a.promise]);a.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw El(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[d,c]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw El(e,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw El(e,"email-already-in-use",o);if(d==="USER_DISABLED")throw El(e,"user-disabled",o);const u=n[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw gp(e,u,c);qr(e,u)}}catch(a){if(a instanceof ks)throw a;qr(e,"network-request-failed",{message:String(a)})}}async function vM(e,t,s,n,a={}){const i=await xi(e,t,s,n,a);return"mfaPendingCredential"in i&&qr(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function rN(e,t,s,n){const a=`${t}${s}?${n}`,i=e,o=i.config.emulator?yp(e.config,a):`${e.config.apiScheme}://${a}`;return bM.includes(s)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class wM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((s,n)=>{this.timer=setTimeout(()=>n(Sr(this.auth,"network-request-failed")),yM.get())})}}function El(e,t,s){const n={appName:e.name};s.email&&(n.email=s.email),s.phoneNumber&&(n.phoneNumber=s.phoneNumber);const a=Sr(e,t,n);return a.customData._tokenResponse=s,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kM(e,t){return xi(e,"POST","/v1/accounts:delete",t)}async function Kd(e,t){return xi(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function jM(e,t=!1){const s=js(e),n=await s.getIdToken(t),a=wp(n);ie(a&&a.exp&&a.auth_time&&a.iat,s.auth,"internal-error");const i=typeof a.firebase=="object"?a.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:a,token:n,authTime:so(tm(a.auth_time)),issuedAtTime:so(tm(a.iat)),expirationTime:so(tm(a.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function tm(e){return Number(e)*1e3}function wp(e){const[t,s,n]=e.split(".");if(t===void 0||s===void 0||n===void 0)return Zl("JWT malformed, contained fewer than 3 sections"),null;try{const a=fj(s);return a?JSON.parse(a):(Zl("Failed to decode base64 JWT payload"),null)}catch(a){return Zl("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function eb(e){const t=wp(e);return ie(t,"internal-error"),ie(typeof t.exp<"u","internal-error"),ie(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(e,t,s=!1){if(s)return t;try{return await t}catch(n){throw n instanceof ks&&NM(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}function NM({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const s=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(t,s){this.createdAt=t,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=so(this.lastLoginAt),this.creationTime=so(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yd(e){var m;const t=e.auth,s=await e.getIdToken(),n=await Do(e,Kd(t,{idToken:s}));ie(n==null?void 0:n.users.length,t,"internal-error");const a=n.users[0];e._notifyReloadListener(a);const i=(m=a.providerUserInfo)!=null&&m.length?sN(a.providerUserInfo):[],o=TM(e.providerData,i),l=e.isAnonymous,d=!(e.email&&a.passwordHash)&&!(o!=null&&o.length),c=l?d:!1,u={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new Ih(a.createdAt,a.lastLoginAt),isAnonymous:c};Object.assign(e,u)}async function CM(e){const t=js(e);await Yd(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function TM(e,t){return[...e.filter(n=>!t.some(a=>a.providerId===n.providerId)),...t]}function sN(e){return e.map(({providerId:t,...s})=>({providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _M(e,t){const s=await tN(e,{},async()=>{const n=Jo({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:i}=e.config,o=await rN(e,a,"/v1/token",`key=${i}`),l=await e._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:l,body:n};return e.emulatorConfig&&Mc(e.emulatorConfig.host)&&(d.credentials="include"),eN.fetch()(o,d)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function IM(e,t){return xi(e,"POST","/v2/accounts:revokeToken",vp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){ie(t.idToken,"internal-error"),ie(typeof t.idToken<"u","internal-error"),ie(typeof t.refreshToken<"u","internal-error");const s="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):eb(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,s)}updateFromIdToken(t){ie(t.length!==0,"internal-error");const s=eb(t);this.updateTokensAndExpiration(t,null,s)}async getToken(t,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,s){const{accessToken:n,refreshToken:a,expiresIn:i}=await _M(t,s);this.updateTokensAndExpiration(n,a,Number(i))}updateTokensAndExpiration(t,s,n){this.refreshToken=s||null,this.accessToken=t||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(t,s){const{refreshToken:n,accessToken:a,expirationTime:i}=s,o=new za;return n&&(ie(typeof n=="string","internal-error",{appName:t}),o.refreshToken=n),a&&(ie(typeof a=="string","internal-error",{appName:t}),o.accessToken=a),i&&(ie(typeof i=="number","internal-error",{appName:t}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new za,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(e,t){ie(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class wr{constructor({uid:t,auth:s,stsTokenManager:n,...a}){this.providerId="firebase",this.proactiveRefresh=new SM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ih(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const s=await Do(this,this.stsTokenManager.getToken(this.auth,t));return ie(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(t){return jM(this,t)}reload(){return CM(this)}_assign(t){this!==t&&(ie(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(s=>({...s})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const s=new wr({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return s.metadata._copy(this.metadata),s}_onReload(t){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,s=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),s&&await Yd(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Lr(this.auth.app))return Promise.reject(Hn(this.auth));const t=await this.getIdToken();return await Do(this,kM(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,s){const n=s.displayName??void 0,a=s.email??void 0,i=s.phoneNumber??void 0,o=s.photoURL??void 0,l=s.tenantId??void 0,d=s._redirectEventId??void 0,c=s.createdAt??void 0,u=s.lastLoginAt??void 0,{uid:m,emailVerified:h,isAnonymous:x,providerData:g,stsTokenManager:v}=s;ie(m&&v,t,"internal-error");const y=za.fromJSON(this.name,v);ie(typeof m=="string",t,"internal-error"),As(n,t.name),As(a,t.name),ie(typeof h=="boolean",t,"internal-error"),ie(typeof x=="boolean",t,"internal-error"),As(i,t.name),As(o,t.name),As(l,t.name),As(d,t.name),As(c,t.name),As(u,t.name);const p=new wr({uid:m,auth:t,email:a,emailVerified:h,displayName:n,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:y,createdAt:c,lastLoginAt:u});return g&&Array.isArray(g)&&(p.providerData=g.map(b=>({...b}))),d&&(p._redirectEventId=d),p}static async _fromIdTokenResponse(t,s,n=!1){const a=new za;a.updateFromServerResponse(s);const i=new wr({uid:s.localId,auth:t,stsTokenManager:a,isAnonymous:n});return await Yd(i),i}static async _fromGetAccountInfoResponse(t,s,n){const a=s.users[0];ie(a.localId!==void 0,"internal-error");const i=a.providerUserInfo!==void 0?sN(a.providerUserInfo):[],o=!(a.email&&a.passwordHash)&&!(i!=null&&i.length),l=new za;l.updateFromIdToken(n);const d=new wr({uid:a.localId,auth:t,stsTokenManager:l,isAnonymous:o}),c={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:i,metadata:new Ih(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,c),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new Map;function as(e){ys(e instanceof Function,"Expected a class definition");let t=tb.get(e);return t?(ys(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,tb.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,s){this.storage[t]=s}async _get(t){const s=this.storage[t];return s===void 0?null:s}async _remove(t){delete this.storage[t]}_addListener(t,s){}_removeListener(t,s){}}nN.type="NONE";const rb=nN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(e,t,s){return`firebase:${e}:${t}:${s}`}class Wa{constructor(t,s,n){this.persistence=t,this.auth=s,this.userKey=n;const{config:a,name:i}=this.auth;this.fullUserKey=ed(this.userKey,a.apiKey,i),this.fullPersistenceKey=ed("persistence",a.apiKey,i),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const s=await Kd(this.auth,{idToken:t}).catch(()=>{});return s?wr._fromGetAccountInfoResponse(this.auth,s,t):null}return wr._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,s,n="authUser"){if(!s.length)return new Wa(as(rb),t,n);const a=(await Promise.all(s.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=a[0]||as(rb);const o=ed(n,t.config.apiKey,t.name);let l=null;for(const c of s)try{const u=await c._get(o);if(u){let m;if(typeof u=="string"){const h=await Kd(t,{idToken:u}).catch(()=>{});if(!h)break;m=await wr._fromGetAccountInfoResponse(t,h,u)}else m=wr._fromJSON(t,u);c!==i&&(l=m),i=c;break}}catch{}const d=a.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Wa(i,t,n):(i=d[0],l&&await i._set(o,l.toJSON()),await Promise.all(s.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Wa(i,t,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sb(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(lN(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(aN(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(cN(t))return"Blackberry";if(uN(t))return"Webos";if(iN(t))return"Safari";if((t.includes("chrome/")||oN(t))&&!t.includes("edge/"))return"Chrome";if(dN(t))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(s);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function aN(e=Pt()){return/firefox\//i.test(e)}function iN(e=Pt()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function oN(e=Pt()){return/crios\//i.test(e)}function lN(e=Pt()){return/iemobile/i.test(e)}function dN(e=Pt()){return/android/i.test(e)}function cN(e=Pt()){return/blackberry/i.test(e)}function uN(e=Pt()){return/webos/i.test(e)}function kp(e=Pt()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function PM(e=Pt()){var t;return kp(e)&&!!((t=window.navigator)!=null&&t.standalone)}function AM(){return yA()&&document.documentMode===10}function mN(e=Pt()){return kp(e)||dN(e)||uN(e)||cN(e)||/windows phone/i.test(e)||lN(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(e,t=[]){let s;switch(e){case"Browser":s=sb(Pt());break;case"Worker":s=`${sb(Pt())}-${e}`;break;default:s=e}const n=t.length?t.join(","):"FirebaseCore-web";return`${s}/JsCore/${Zo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EM{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,s){const n=i=>new Promise((o,l)=>{try{const d=t(i);o(d)}catch(d){l(d)}});n.onAbort=s,this.queue.push(n);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const s=[];try{for(const n of this.queue)await n(t),n.onAbort&&s.push(n.onAbort)}catch(n){s.reverse();for(const a of s)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(e,t={}){return xi(e,"GET","/v2/passwordPolicy",vp(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RM=6;class LM{constructor(t){var n;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=s.minPasswordLength??RM,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=t.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,s),this.validatePasswordCharacterOptions(t,s),s.isValid&&(s.isValid=s.meetsMinPasswordLength??!0),s.isValid&&(s.isValid=s.meetsMaxPasswordLength??!0),s.isValid&&(s.isValid=s.containsLowercaseLetter??!0),s.isValid&&(s.isValid=s.containsUppercaseLetter??!0),s.isValid&&(s.isValid=s.containsNumericCharacter??!0),s.isValid&&(s.isValid=s.containsNonAlphanumericCharacter??!0),s}validatePasswordLengthOptions(t,s){const n=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;n&&(s.meetsMinPasswordLength=t.length>=n),a&&(s.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let n;for(let a=0;a<t.length;a++)n=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(s,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,s,n,a,i){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(t,s,n,a){this.app=t,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=n,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nb(this),this.idTokenSubscription=new nb(this),this.beforeStateQueue=new EM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Zj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(t,s){return s&&(this._popupRedirectResolver=as(s)),this._initializationPromise=this.queue(async()=>{var n,a,i;if(!this._deleted&&(this.persistenceManager=await Wa.create(this,t),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((a=this._popupRedirectResolver)!=null&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const s=await Kd(this,{idToken:t}),n=await wr._fromGetAccountInfoResponse(this,s,t);await this.directlySetCurrentUser(n)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var i;if(Lr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let n=s,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(t);(!o||o===l)&&(d!=null&&d.user)&&(n=d.user,a=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(n)}catch(o){n=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(t){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(t){try{await Yd(t)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=fM()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Lr(this.app))return Promise.reject(Hn(this));const s=t?js(t):null;return s&&ie(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(t,s=!1){if(!this._deleted)return t&&ie(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Lr(this.app)?Promise.reject(Hn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Lr(this.app)?Promise.reject(Hn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(as(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await MM(this),s=new LM(t);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new ma("auth","Firebase",t())}onAuthStateChanged(t,s,n){return this.registerStateListener(this.authStateSubscription,t,s,n)}beforeAuthStateChanged(t,s){return this.beforeStateQueue.pushCallback(t,s)}onIdTokenChanged(t,s,n){return this.registerStateListener(this.idTokenSubscription,t,s,n)}authStateReady(){return new Promise((t,s)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged(()=>{n(),t()},s)}})}async revokeAccessToken(t){if(this.currentUser){const s=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:s};this.tenantId!=null&&(n.tenantId=this.tenantId),await IM(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)==null?void 0:t.toJSON()}}async _setRedirectUser(t,s){const n=await this.getOrInitRedirectPersistenceManager(s);return t===null?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const s=t&&as(t)||this._popupRedirectResolver;ie(s,this,"argument-error"),this.redirectPersistenceManager=await Wa.create(this,[as(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var s,n;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)==null?void 0:s._redirectEventId)===t?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=((s=this.currentUser)==null?void 0:s.uid)??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,s,n,a){if(this._deleted)return()=>{};const i=typeof s=="function"?s:s.next.bind(s);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof s=="function"){const d=t.addObserver(s,n,a);return()=>{o=!0,d()}}else{const d=t.addObserver(s);return()=>{o=!0,d()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=hN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var a;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((a=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:a.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var s;if(Lr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((s=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getToken());return t!=null&&t.error&&mM(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Oc(e){return js(e)}class nb{constructor(t){this.auth=t,this.observer=null,this.addObserver=SA(s=>this.observer=s)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function OM(e){jp=e}function FM(e){return jp.loadJS(e)}function UM(){return jp.gapiScript}function BM(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(e,t){const s=Xo(e,"auth");if(s.isInitialized()){const a=s.getImmediate(),i=s.getOptions();if(ai(i,t??{}))return a;qr(a,"already-initialized")}return s.initialize({options:t})}function $M(e,t){const s=(t==null?void 0:t.persistence)||[],n=(Array.isArray(s)?s:[s]).map(as);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(n,t==null?void 0:t.popupRedirectResolver)}function zM(e,t,s){const n=Oc(e);ie(/^https?:\/\//.test(t),n,"invalid-emulator-scheme");const a=!1,i=xN(t),{host:o,port:l}=WM(t),d=l===null?"":`:${l}`,c={url:`${i}//${o}${d}/`},u=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!n._canInitEmulator){ie(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ie(ai(c,n.config.emulator)&&ai(u,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=c,n.emulatorConfig=u,n.settings.appVerificationDisabledForTesting=!0,Mc(o)?(uA(`${i}//${o}${d}`),xA("Auth",!0)):qM()}function xN(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function WM(e){const t=xN(e),s=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!s)return{host:"",port:null};const n=s[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(n);if(a){const i=a[1];return{host:i,port:ab(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:ab(o)}}}function ab(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function qM(){function e(){const t=document.createElement("p"),s=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(t,s){this.providerId=t,this.signInMethod=s}toJSON(){return ns("not implemented")}_getIdTokenResponse(t){return ns("not implemented")}_linkToIdToken(t,s){return ns("not implemented")}_getReauthenticationResolver(t){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(e,t){return vM(e,"POST","/v1/accounts:signInWithIdp",vp(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM="http://localhost";class na extends pN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const s=new na(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(s.idToken=t.idToken),t.accessToken&&(s.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(s.nonce=t.nonce),t.pendingToken&&(s.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(s.accessToken=t.oauthToken,s.secret=t.oauthTokenSecret):qr("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const s=typeof t=="string"?JSON.parse(t):t,{providerId:n,signInMethod:a,...i}=s;if(!n||!a)return null;const o=new na(n,a);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(t){const s=this.buildRequest();return qa(t,s)}_linkToIdToken(t,s){const n=this.buildRequest();return n.idToken=s,qa(t,n)}_getReauthenticationResolver(t){const s=this.buildRequest();return s.autoCreate=!1,qa(t,s)}buildRequest(){const t={requestUri:HM,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),t.postBody=Jo(s)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl extends Np{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends tl{constructor(){super("facebook.com")}static credential(t){return na._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Us.credentialFromTaggedObject(t)}static credentialFromError(t){return Us.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Us.credential(t.oauthAccessToken)}catch{return null}}}Us.FACEBOOK_SIGN_IN_METHOD="facebook.com";Us.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends tl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,s){return na._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:s})}static credentialFromResult(t){return es.credentialFromTaggedObject(t)}static credentialFromError(t){return es.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:s,oauthAccessToken:n}=t;if(!s&&!n)return null;try{return es.credential(s,n)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends tl{constructor(){super("github.com")}static credential(t){return na._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Bs.credentialFromTaggedObject(t)}static credentialFromError(t){return Bs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Bs.credential(t.oauthAccessToken)}catch{return null}}}Bs.GITHUB_SIGN_IN_METHOD="github.com";Bs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends tl{constructor(){super("twitter.com")}static credential(t,s){return na._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:s})}static credentialFromResult(t){return Vs.credentialFromTaggedObject(t)}static credentialFromError(t){return Vs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:s,oauthTokenSecret:n}=t;if(!s||!n)return null;try{return Vs.credential(s,n)}catch{return null}}}Vs.TWITTER_SIGN_IN_METHOD="twitter.com";Vs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,s,n,a=!1){const i=await wr._fromIdTokenResponse(t,n,a),o=ib(n);return new ii({user:i,providerId:o,_tokenResponse:n,operationType:s})}static async _forOperation(t,s,n){await t._updateTokensIfNecessary(n,!0);const a=ib(n);return new ii({user:t,providerId:a,_tokenResponse:n,operationType:s})}}function ib(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd extends ks{constructor(t,s,n,a){super(s.code,s.message),this.operationType=n,this.user=a,Object.setPrototypeOf(this,Jd.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:s.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,s,n,a){return new Jd(t,s,n,a)}}function fN(e,t,s,n){return(t==="reauthenticate"?s._getReauthenticationResolver(e):s._getIdTokenResponse(e)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Jd._fromErrorAndOperation(e,i,t,n):i})}async function GM(e,t,s=!1){const n=await Do(e,t._linkToIdToken(e.auth,await e.getIdToken()),s);return ii._forOperation(e,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QM(e,t,s=!1){const{auth:n}=e;if(Lr(n.app))return Promise.reject(Hn(n));const a="reauthenticate";try{const i=await Do(e,fN(n,a,t,e),s);ie(i.idToken,n,"internal-error");const o=wp(i.idToken);ie(o,n,"internal-error");const{sub:l}=o;return ie(e.uid===l,n,"user-mismatch"),ii._forOperation(e,a,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&qr(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM(e,t,s=!1){if(Lr(e.app))return Promise.reject(Hn(e));const n="signIn",a=await fN(e,n,t),i=await ii._fromIdTokenResponse(e,n,a);return s||await e._updateCurrentUser(i.user),i}function YM(e,t,s,n){return js(e).onIdTokenChanged(t,s,n)}function JM(e,t,s){return js(e).beforeAuthStateChanged(t,s)}const Xd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t,s){this.storageRetriever=t,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Xd,"1"),this.storage.removeItem(Xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,s){return this.storage.setItem(t,JSON.stringify(s)),Promise.resolve()}_get(t){const s=this.storage.getItem(t);return Promise.resolve(s?JSON.parse(s):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XM=1e3,ZM=10;class bN extends gN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,s)=>this.onStorageEvent(t,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const s of Object.keys(this.listeners)){const n=this.storage.getItem(s),a=this.localCache[s];n!==a&&t(s,a,n)}}onStorageEvent(t,s=!1){if(!t.key){this.forAllChangedKeys((o,l,d)=>{this.notifyListeners(o,d)});return}const n=t.key;s?this.detachListener():this.stopPolling();const a=()=>{const o=this.storage.getItem(n);!s&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);AM()&&i!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,ZM):a()}notifyListeners(t,s){this.localCache[t]=s;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,s,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:s,newValue:n}),!0)})},XM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,s){await super._set(t,s),this.localCache[t]=JSON.stringify(s)}async _get(t){const s=await super._get(t);return this.localCache[t]=JSON.stringify(s),s}async _remove(t){await super._remove(t),delete this.localCache[t]}}bN.type="LOCAL";const eR=bN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN extends gN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,s){}_removeListener(t,s){}}yN.type="SESSION";const vN=yN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const s=this.receivers.find(a=>a.isListeningto(t));if(s)return s;const n=new Fc(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const s=t,{eventId:n,eventType:a,data:i}=s.data,o=this.handlersMap[a];if(!(o!=null&&o.size))return;s.ports[0].postMessage({status:"ack",eventId:n,eventType:a});const l=Array.from(o).map(async c=>c(s.origin,i)),d=await tR(l);s.ports[0].postMessage({status:"done",eventId:n,eventType:a,response:d})}_subscribe(t,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(s)}_unsubscribe(t,s){this.handlersMap[t]&&s&&this.handlersMap[t].delete(s),(!s||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(e="",t=10){let s="";for(let n=0;n<t;n++)s+=Math.floor(Math.random()*10);return e+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,s,n=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let i,o;return new Promise((l,d)=>{const c=Sp("",20);a.port1.start();const u=setTimeout(()=>{d(new Error("unsupported_event"))},n);o={messageChannel:a,onMessage(m){const h=m;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(h.data.response);break;default:clearTimeout(u),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),a.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:c,data:s},[a.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return window}function sR(e){Vr().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(){return typeof Vr().WorkerGlobalScope<"u"&&typeof Vr().importScripts=="function"}async function nR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aR(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)==null?void 0:e.controller)||null}function iR(){return wN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="firebaseLocalStorageDb",oR=1,Zd="firebaseLocalStorage",jN="fbase_key";class rl{constructor(t){this.request=t}toPromise(){return new Promise((t,s)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function Uc(e,t){return e.transaction([Zd],t?"readwrite":"readonly").objectStore(Zd)}function lR(){const e=indexedDB.deleteDatabase(kN);return new rl(e).toPromise()}function Ph(){const e=indexedDB.open(kN,oR);return new Promise((t,s)=>{e.addEventListener("error",()=>{s(e.error)}),e.addEventListener("upgradeneeded",()=>{const n=e.result;try{n.createObjectStore(Zd,{keyPath:jN})}catch(a){s(a)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Zd)?t(n):(n.close(),await lR(),t(await Ph()))})})}async function ob(e,t,s){const n=Uc(e,!0).put({[jN]:t,value:s});return new rl(n).toPromise()}async function dR(e,t){const s=Uc(e,!1).get(t),n=await new rl(s).toPromise();return n===void 0?null:n.value}function lb(e,t){const s=Uc(e,!0).delete(t);return new rl(s).toPromise()}const cR=800,uR=3;class NN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ph(),this.db)}async _withRetries(t){let s=0;for(;;)try{const n=await this._openDb();return await t(n)}catch(n){if(s++>uR)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return wN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(iR()),this.receiver._subscribe("keyChanged",async(t,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(t,s)=>["keyChanged"])}async initializeSender(){var s,n;if(this.activeServiceWorker=await nR(),!this.activeServiceWorker)return;this.sender=new rR(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&(s=t[0])!=null&&s.fulfilled&&(n=t[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||aR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Ph();return await ob(t,Xd,"1"),await lb(t,Xd),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,s){return this._withPendingWrite(async()=>(await this._withRetries(n=>ob(n,t,s)),this.localCache[t]=s,this.notifyServiceWorker(t)))}async _get(t){const s=await this._withRetries(n=>dR(n,t));return this.localCache[t]=s,s}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(s=>lb(s,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const i=Uc(a,!1).getAll();return new rl(i).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const s=[],n=new Set;if(t.length!==0)for(const{fbase_key:a,value:i}of t)n.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(i)&&(this.notifyListeners(a,i),s.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!n.has(a)&&(this.notifyListeners(a,null),s.push(a));return s}notifyListeners(t,s){this.localCache[t]=s;const n=this.listeners[t];if(n)for(const a of Array.from(n))a(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(s)}_removeListener(t,s){this.listeners[t]&&(this.listeners[t].delete(s),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NN.type="LOCAL";const mR=NN;new el(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(e,t){return t?as(t):(ie(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp extends pN{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qa(t,this._buildIdpRequest())}_linkToIdToken(t,s){return qa(t,this._buildIdpRequest(s))}_getReauthenticationResolver(t){return qa(t,this._buildIdpRequest())}_buildIdpRequest(t){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(s.idToken=t),s}}function hR(e){return KM(e.auth,new Cp(e),e.bypassAuthState)}function xR(e){const{auth:t,user:s}=e;return ie(s,t,"internal-error"),QM(s,new Cp(e),e.bypassAuthState)}async function pR(e){const{auth:t,user:s}=e;return ie(s,t,"internal-error"),GM(s,new Cp(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(t,s,n,a,i=!1){this.auth=t,this.resolver=n,this.user=a,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(t,s)=>{this.pendingPromise={resolve:t,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(t){const{urlResponse:s,sessionId:n,postBody:a,tenantId:i,error:o,type:l}=t;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:s,sessionId:n,tenantId:i||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(c){this.reject(c)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return hR;case"linkViaPopup":case"linkViaRedirect":return pR;case"reauthViaPopup":case"reauthViaRedirect":return xR;default:qr(this.auth,"internal-error")}}resolve(t){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new el(2e3,1e4);async function TN(e,t,s){if(Lr(e.app))return Promise.reject(Sr(e,"operation-not-supported-in-this-environment"));const n=Oc(e);hM(e,t,Np);const a=SN(n,s);return new Fn(n,"signInViaPopup",t,a).executeNotNull()}class Fn extends CN{constructor(t,s,n,a,i){super(t,s,a,i),this.provider=n,this.authWindow=null,this.pollId=null,Fn.currentPopupAction&&Fn.currentPopupAction.cancel(),Fn.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return ie(t,this.auth,"internal-error"),t}async onExecution(){ys(this.filter.length===1,"Popup operations only handle one event");const t=Sp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)==null?void 0:t.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fn.currentPopupAction=null}pollUserCancellation(){const t=()=>{var s,n;if((n=(s=this.authWindow)==null?void 0:s.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,fR.get())};t()}}Fn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR="pendingRedirect",td=new Map;class bR extends CN{constructor(t,s,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,n),this.eventId=null}async execute(){let t=td.get(this.auth._key());if(!t){try{const n=await yR(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(n)}catch(s){t=()=>Promise.reject(s)}td.set(this.auth._key(),t)}return this.bypassAuthState||td.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const s=await this.auth._redirectUserForId(t.eventId);if(s)return this.user=s,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yR(e,t){const s=kR(t),n=wR(e);if(!await n._isAvailable())return!1;const a=await n._get(s)==="true";return await n._remove(s),a}function vR(e,t){td.set(e._key(),t)}function wR(e){return as(e._redirectPersistence)}function kR(e){return ed(gR,e.config.apiKey,e.name)}async function jR(e,t,s=!1){if(Lr(e.app))return Promise.reject(Hn(e));const n=Oc(e),a=SN(n,t),o=await new bR(n,a,s).execute();return o&&!s&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR=10*60*1e3;class SR{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let s=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(t,n)&&(s=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!CR(t)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=t,s=!0)),s}sendToConsumer(t,s){var n;if(t.error&&!_N(t)){const a=((n=t.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";s.onError(Sr(this.auth,a))}else s.onAuthEvent(t)}isEventForConsumer(t,s){const n=s.eventId===null||!!t.eventId&&t.eventId===s.eventId;return s.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=NR&&this.cachedEventUids.clear(),this.cachedEventUids.has(db(t))}saveEventToCache(t){this.cachedEventUids.add(db(t)),this.lastProcessedEventTime=Date.now()}}function db(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function _N({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function CR(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _N(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(e,t={}){return xi(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IR=/^https?/;async function PR(e){if(e.config.emulator)return;const{authorizedDomains:t}=await TR(e);for(const s of t)try{if(AR(s))return}catch{}qr(e,"unauthorized-domain")}function AR(e){const t=_h(),{protocol:s,hostname:n}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&n===""?s==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):s==="chrome-extension:"&&o.hostname===n}if(!IR.test(s))return!1;if(_R.test(e))return n===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER=new el(3e4,6e4);function cb(){const e=Vr().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let s=0;s<e.CP.length;s++)e.CP[s]=null}}function MR(e){return new Promise((t,s)=>{var a,i,o;function n(){cb(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{cb(),s(Sr(e,"network-request-failed"))},timeout:ER.get()})}if((i=(a=Vr().gapi)==null?void 0:a.iframes)!=null&&i.Iframe)t(gapi.iframes.getContext());else if((o=Vr().gapi)!=null&&o.load)n();else{const l=BM("iframefcb");return Vr()[l]=()=>{gapi.load?n():s(Sr(e,"network-request-failed"))},FM(`${UM()}?onload=${l}`).catch(d=>s(d))}}).catch(t=>{throw rd=null,t})}let rd=null;function RR(e){return rd=rd||MR(e),rd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new el(5e3,15e3),DR="__/auth/iframe",OR="emulator/auth/iframe",FR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function BR(e){const t=e.config;ie(t.authDomain,e,"auth-domain-config-required");const s=t.emulator?yp(t,OR):`https://${e.config.authDomain}/${DR}`,n={apiKey:t.apiKey,appName:e.name,v:Zo},a=UR.get(e.config.apiHost);a&&(n.eid=a);const i=e._getFrameworks();return i.length&&(n.fw=i.join(",")),`${s}?${Jo(n).slice(1)}`}async function VR(e){const t=await RR(e),s=Vr().gapi;return ie(s,e,"internal-error"),t.open({where:document.body,url:BR(e),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:FR,dontclear:!0},n=>new Promise(async(a,i)=>{await n.restyle({setHideOnLeave:!1});const o=Sr(e,"network-request-failed"),l=Vr().setTimeout(()=>{i(o)},LR.get());function d(){Vr().clearTimeout(l),a(n)}n.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zR=500,WR=600,qR="_blank",HR="http://localhost";class ub{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GR(e,t,s,n=zR,a=WR){const i=Math.max((window.screen.availHeight-a)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const d={...$R,width:n.toString(),height:a.toString(),top:i,left:o},c=Pt().toLowerCase();s&&(l=oN(c)?qR:s),aN(c)&&(t=t||HR,d.scrollbars="yes");const u=Object.entries(d).reduce((h,[x,g])=>`${h}${x}=${g},`,"");if(PM(c)&&l!=="_self")return QR(t||"",l),new ub(null);const m=window.open(t||"",l,u);ie(m,e,"popup-blocked");try{m.focus()}catch{}return new ub(m)}function QR(e,t){const s=document.createElement("a");s.href=e,s.target=t;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="__/auth/handler",YR="emulator/auth/handler",JR=encodeURIComponent("fac");async function mb(e,t,s,n,a,i){ie(e.config.authDomain,e,"auth-domain-config-required"),ie(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:s,redirectUrl:n,v:Zo,eventId:a};if(t instanceof Np){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",NA(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[u,m]of Object.entries({}))o[u]=m}if(t instanceof tl){const u=t.getScopes().filter(m=>m!=="");u.length>0&&(o.scopes=u.join(","))}e.tenantId&&(o.tid=e.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const d=await e._getAppCheckToken(),c=d?`#${JR}=${encodeURIComponent(d)}`:"";return`${XR(e)}?${Jo(l).slice(1)}${c}`}function XR({config:e}){return e.emulator?yp(e,YR):`https://${e.authDomain}/${KR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="webStorageSupport";class ZR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vN,this._completeRedirectFn=jR,this._overrideRedirectResult=vR}async _openPopup(t,s,n,a){var o;ys((o=this.eventManagers[t._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await mb(t,s,n,_h(),a);return GR(t,i,Sp())}async _openRedirect(t,s,n,a){await this._originValidation(t);const i=await mb(t,s,n,_h(),a);return sR(i),new Promise(()=>{})}_initialize(t){const s=t._key();if(this.eventManagers[s]){const{manager:a,promise:i}=this.eventManagers[s];return a?Promise.resolve(a):(ys(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(t);return this.eventManagers[s]={promise:n},n.catch(()=>{delete this.eventManagers[s]}),n}async initAndGetManager(t){const s=await VR(t),n=new SR(t);return s.register("authEvent",a=>(ie(a==null?void 0:a.authEvent,t,"invalid-auth-event"),{status:n.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=s,n}_isIframeWebStorageSupported(t,s){this.iframes[t._key()].send(rm,{type:rm},a=>{var o;const i=(o=a==null?void 0:a[0])==null?void 0:o[rm];i!==void 0&&s(!!i),qr(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const s=t._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=PR(t)),this.originValidationPromises[s]}get _shouldInitProactively(){return mN()||iN()||kp()}}const e8=ZR;var hb="@firebase/auth",xb="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t8{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)==null?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const s=this.auth.onIdTokenChanged(n=>{t((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,s),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const s=this.internalListeners.get(t);s&&(this.internalListeners.delete(t),s(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r8(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function s8(e){bs(new Wr("auth",(t,{options:s})=>{const n=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),i=t.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=n.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const d={apiKey:o,authDomain:l,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hN(e)},c=new DM(n,a,i,d);return $M(c,s),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,s,n)=>{t.getProvider("auth-internal").initialize()})),bs(new Wr("auth-internal",t=>{const s=Oc(t.getProvider("auth").getImmediate());return(n=>new t8(n))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(hb,xb,r8(e)),Br(hb,xb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8=5*60,a8=bj("authIdTokenMaxAge")||n8;let pb=null;const i8=e=>async t=>{const s=t&&await t.getIdTokenResult(),n=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(n&&n>a8)return;const a=s==null?void 0:s.token;pb!==a&&(pb=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function o8(e=Sj()){const t=Xo(e,"auth");if(t.isInitialized())return t.getImmediate();const s=VM(e,{popupRedirectResolver:e8,persistence:[mR,eR,vN]}),n=bj("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=i8(i.toString());JM(s,o,()=>o(s.currentUser)),YM(s,l=>o(l))}}const a=dA("auth");return a&&zM(s,`http://${a}`),s}function l8(){var e;return((e=document.getElementsByTagName("head"))==null?void 0:e[0])??document}OM({loadJS(e){return new Promise((t,s)=>{const n=document.createElement("script");n.setAttribute("src",e),n.onload=t,n.onerror=a=>{const i=Sr("internal-error");i.customData=a,s(i)},n.type="text/javascript",n.charset="UTF-8",l8().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});s8("Browser");const Tp={apiKey:"AIzaSyD_zaEB4r9OdxRhqjh_3knPThewK0Xr98I",authDomain:"baptizo-community.firebaseapp.com",projectId:"baptizo-community",storageBucket:"baptizo-community.firebasestorage.app",messagingSenderId:"781281083216",appId:"1:781281083216:web:4236621528ef828ab03655",measurementId:"G-7LD94T1B5D"};if(!Tp.projectId)throw new Error("Firebase projectId is required. Please set VITE_FIREBASE_PROJECT_ID in your .env.local file.");if(!Tp.apiKey)throw new Error("Firebase apiKey is required. Please set VITE_FIREBASE_API_KEY in your .env.local file.");const IN=Nj(Tp),PN=o8(IN),AN=new es,sm=typeof window<"u"?lM(IN):null;function d8(){var x;const e=de(),t=jt(),{login:s}=Z(),n=V(S.auth.loginUser),a=V(S.auth.googleLogin),[i,o]=f.useState({email:"",password:""}),[l,d]=f.useState({}),[c,u]=f.useState(!1),m=async g=>{var v,y;g.preventDefault(),d({}),u(!0);try{const p=await n({email:i.email.toLowerCase().trim(),password:i.password});if(p!=null&&p.success&&(p!=null&&p.user)){s(p.user);const b=((y=(v=t.state)==null?void 0:v.from)==null?void 0:y.pathname)||"/feed";e(b,{replace:!0})}else d({general:"Invalid email or password"})}catch{d({general:"Login failed. Please try again."})}finally{u(!1)}},h=async()=>{var g,v,y;u(!0),d({});try{const b=(await TN(PN,AN)).user,w=await a({email:b.email,name:b.displayName||"Anonymous",avatarUrl:b.photoURL||void 0});if(w.success)if(s(w.user),w.onboardingRequired)e("/member-onboarding",{state:{from:(g=t.state)==null?void 0:g.from,isNew:!0}});else{const k=((y=(v=t.state)==null?void 0:v.from)==null?void 0:y.pathname)||"/feed";e(k,{replace:!0})}}catch(p){console.error("Google Login Error:",p),d({general:"Google sign-in failed. Please try again."})}finally{u(!1)}};return r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,children:[r.jsxs(fe,{className:"pt-8",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-16 w-auto rounded-2xl shadow-xl"})}),r.jsx(ge,{className:"text-center text-3xl",children:"Welcome Back"}),r.jsx("p",{className:"text-center text-light-muted dark:text-dark-muted mt-2",children:"Sign in to continue to Baptizo Community"})]}),r.jsx(O,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.general&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:l.general})}),r.jsx(me,{label:"Email",type:"email",value:i.email,onChange:g=>o({...i,email:g.target.value}),icon:r.jsx(zr,{className:"w-5 h-5"}),placeholder:"your@email.com",required:!0}),r.jsx(me,{label:"Password",type:"password",value:i.password,onChange:g=>o({...i,password:g.target.value}),icon:r.jsx(Ye,{className:"w-5 h-5"}),placeholder:"",required:!0}),r.jsx("div",{className:"flex justify-end",children:r.jsx(te,{to:"/forgot-password",className:"text-sm font-medium text-primary-500 hover:text-primary-600 transition-colors",children:"Forgot password?"})}),r.jsx(M,{type:"submit",variant:"primary",className:"w-full",isLoading:c,children:"Sign In"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t border-light-border dark:border-dark-border"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white dark:bg-[#151515] px-2 text-light-muted dark:text-dark-muted",children:"Or continue with"})})]}),r.jsxs(M,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 h-12",onClick:h,disabled:c,children:[r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 12-4.53z",fill:"#EA4335"})]}),"Google"]}),r.jsxs("p",{className:"text-center text-sm text-light-muted dark:text-dark-muted pt-2",children:["Don't have an account?"," ",r.jsx(te,{to:"/register",state:{from:(x=t.state)==null?void 0:x.from},className:"text-primary-500 hover:text-primary-600 font-medium",children:"Sign Up"})]})]})})]})})}function c8(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(d8,{})})}function EN(e){const s=e.replace(/\D/g,"").substring(0,4),n=["0703","0706","0803","0806","0810","0813","0814","0816","0903","0906","07025","07026","0704"],a=["0705","0805","0807","0811","0815","0905"],i=["0701","0708","0802","0808","0812","0901","0902","0904","0907"],o=["0809","0817","0818","0909","0908"];return n.some(l=>s.startsWith(l))?"MTN":a.some(l=>s.startsWith(l))?"Glo":i.some(l=>s.startsWith(l))?"Airtel":o.some(l=>s.startsWith(l))?"9Mobile":"Unknown"}function u8(e){const t=e.replace(/\D/g,"");return t.length===11?`${t.substring(0,4)} ${t.substring(4,7)} ${t.substring(7)}`:e}function m8(){return"https://chat.whatsapp.com/J27yrVJZIix0A4wzMzTMT1?mode=hq1tcla"}function MN(){const e=m8();window.open(e,"_blank")}function h8(){var A;const e=de(),t=jt(),{login:s}=Z(),n=V(S.auth.registerUser),a=V(S.auth.googleLogin),[i,o]=f.useState(1),[l,d]=f.useState({name:"",email:"",phone:"",password:"",confirmPassword:"",whatsappConfirm:!1,profession:""}),[c,u]=f.useState(""),[m,h]=f.useState({}),[x,g]=f.useState(!1),v=async()=>{var L,C,P;g(!0),h({});try{const W=(await TN(PN,AN)).user,Y=await a({email:W.email,name:W.displayName||"Anonymous",avatarUrl:W.photoURL||void 0});if(Y.success)if(s(Y.user),Y.onboardingRequired)e("/member-onboarding",{state:{from:(L=t.state)==null?void 0:L.from,isNew:!0}});else{const se=((P=(C=t.state)==null?void 0:C.from)==null?void 0:P.pathname)||"/feed";e(se,{replace:!0})}}catch(R){console.error("Google Login Error:",R),h({general:"Google sign-in failed. Please try again."})}finally{g(!1)}},y=L=>{d({...l,phone:L});const C=EN(L);u(C)},p=()=>{const L={};return l.name||(L.name="Full name is required"),l.email||(L.email="Email is required"),l.password||(L.password="Password is required"),l.password.length<6&&(L.password="Password must be at least 6 characters"),l.password!==l.confirmPassword&&(L.confirmPassword="Passwords do not match"),h(L),Object.keys(L).length===0},b=()=>{const L={};return l.phone||(L.phone="Phone number is required"),(c==="Unknown"||!c)&&(L.phone="Valid network (MTN, Glo, Airtel, 9Mobile) required"),l.profession||(L.profession="Profession is required"),l.whatsappConfirm||(L.whatsappConfirm="Please confirm WhatsApp availability"),h(L),Object.keys(L).length===0},w=()=>{i===1&&p()&&o(2)},k=()=>{i===2&&o(1)},j=async L=>{if(L.preventDefault(),!!b()){g(!0);try{const C=await n({email:l.email.toLowerCase().trim(),password:l.password,name:l.name.trim(),phone:l.phone.trim(),network:c,profession:l.profession.trim()});C!=null&&C.success&&(C!=null&&C.user)?(s(C.user),o(3)):h({general:(C==null?void 0:C.error)||"Registration failed"})}catch(C){const R=(C.message||C.toString()).replace("Uncaught Error: ","");h({general:R})}finally{g(!1)}}},N=()=>{MN(),setTimeout(()=>{var C,P;const L=((P=(C=t.state)==null?void 0:C.from)==null?void 0:P.pathname)||"/feed";e(L,{replace:!0})},1e3)},_={enter:L=>({x:L>0?50:-50,opacity:0}),center:{x:0,opacity:1},exit:L=>({x:L<0?50:-50,opacity:0})};return i===3?r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-white dark:bg-[#0A0A0A]",children:[r.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none opacity-50",children:[r.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-primary-500/10 rounded-full blur-[120px] -translate-y-1/2 translate-x-1/2"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-[500px] h-[500px] bg-secondary-500/10 rounded-full blur-[120px] translate-y-1/2 -translate-x-1/2"})]}),r.jsxs(T.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},transition:{type:"spring",damping:25,stiffness:200},className:"relative w-full max-w-md bg-white dark:bg-[#151515] border border-light-border dark:border-dark-border shadow-2xl rounded-[2.5rem] p-6 sm:p-10 text-center",children:[r.jsx(T.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},transition:{delay:.2,type:"spring",damping:15},className:"w-20 h-20 mx-auto mb-6 rounded-3xl bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center shadow-lg shadow-primary-500/30",children:r.jsx(nt,{className:"w-10 h-10 text-white"})}),r.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 dark:text-white mb-3 tracking-tight",children:"Welcome Aboard!"}),r.jsx("p",{className:"text-base text-light-muted dark:text-dark-muted mb-8 leading-relaxed px-2",children:"Your journey with Baptizo Community begins now. We're thrilled to have you here."}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"relative group overflow-hidden bg-emerald-50/50 dark:bg-emerald-900/10 p-5 rounded-3xl border border-emerald-100 dark:border-emerald-900/30 transition-all",children:[r.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:scale-110 transition-transform",children:r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"",className:"w-12 h-12"})}),r.jsxs("h3",{className:"font-bold text-emerald-800 dark:text-emerald-400 mb-2 flex items-center justify-center gap-2",children:[r.jsxs("span",{className:"relative flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]}),"Final Step: Join the Community"]}),r.jsx("p",{className:"text-sm text-emerald-700/80 dark:text-emerald-300/70",children:"Connect with other members and get real-time updates in our exclusive WhatsApp group."})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs(M,{onClick:N,className:"w-full h-14 text-lg font-semibold bg-[#25D366] hover:bg-[#128C7E] text-white rounded-2xl shadow-xl shadow-green-500/20 active:scale-[0.98] transition-all flex items-center justify-center gap-3",children:[r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"",className:"w-6 h-6 contrast-125"}),"Join WhatsApp Group"]}),r.jsx("button",{onClick:()=>e("/feed"),className:"w-full py-3 text-sm font-medium text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:"Skip for now & Go to Feed"})]})]})]})]}):r.jsx("div",{className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,className:"overflow-hidden",children:[r.jsxs(fe,{className:"pt-8 pb-2",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"h-16 w-auto rounded-2xl shadow-xl shadow-primary-500/10"})}),r.jsx(ge,{className:"text-center text-3xl font-display",children:"Join Baptizo"}),r.jsxs("p",{className:"text-center text-light-muted dark:text-dark-muted mt-2",children:["Step ",i," of 2: ",i===1?"Account Details":"Personal Info"]}),r.jsxs("div",{className:"flex gap-2 mt-6 justify-center",children:[r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${i>=1?"w-16 bg-primary-500":"w-4 bg-gray-200 dark:bg-gray-700"}`}),r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${i>=2?"w-16 bg-primary-500":"w-4 bg-gray-200 dark:bg-gray-700"}`})]})]}),r.jsxs(O,{className:"pt-6",children:[r.jsx("form",{onSubmit:j,children:r.jsxs(re,{mode:"wait",custom:i,children:[i===1&&r.jsxs(T.div,{custom:1,variants:_,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},className:"space-y-4",children:[r.jsxs(M,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 h-12",onClick:v,disabled:x,children:[r.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),r.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),r.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l3.66-2.84z",fill:"#FBBC05"}),r.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.66l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 12-4.53z",fill:"#EA4335"})]}),"Continue with Google"]}),r.jsxs("div",{className:"relative my-4",children:[r.jsx("div",{className:"absolute inset-0 flex items-center",children:r.jsx("span",{className:"w-full border-t border-light-border dark:border-dark-border"})}),r.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:r.jsx("span",{className:"bg-white dark:bg-[#151515] px-2 text-light-muted dark:text-dark-muted",children:"Or register manually"})})]}),r.jsx(me,{label:"Full Name",value:l.name,onChange:L=>d({...l,name:L.target.value}),icon:r.jsx(yt,{className:"w-5 h-5"}),placeholder:"Enter your full name",error:m.name,required:!0,autoFocus:!0}),r.jsx(me,{label:"Email Address",type:"email",value:l.email,onChange:L=>d({...l,email:L.target.value}),icon:r.jsx(zr,{className:"w-5 h-5"}),placeholder:"your@email.com",error:m.email,required:!0}),r.jsx(me,{label:"Password",type:"password",value:l.password,onChange:L=>d({...l,password:L.target.value}),icon:r.jsx(Ye,{className:"w-5 h-5"}),placeholder:"Min. 6 characters",error:m.password,required:!0}),r.jsx(me,{label:"Confirm Password",type:"password",value:l.confirmPassword,onChange:L=>d({...l,confirmPassword:L.target.value}),icon:r.jsx(Ye,{className:"w-5 h-5"}),placeholder:"Confirm your password",error:m.confirmPassword,required:!0}),r.jsxs(M,{type:"button",onClick:w,className:"w-full mt-4",size:"lg",children:["Next Step ",r.jsx(_t,{className:"w-4 h-4 ml-2"})]})]},"step1"),i===2&&r.jsxs(T.div,{custom:2,variants:_,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},className:"space-y-5",children:[r.jsxs("div",{children:[r.jsx(me,{label:"Phone Number",type:"tel",value:l.phone,onChange:L=>y(L.target.value),icon:r.jsx(kc,{className:"w-5 h-5"}),placeholder:"080 1234 5678",error:m.phone,required:!0,autoFocus:!0}),r.jsx("div",{className:"mt-2 flex items-center justify-between",children:c&&c!=="Unknown"&&r.jsx(G,{variant:"primary",className:"animate-in fade-in zoom-in",children:c})})]}),r.jsx(me,{label:"Profession / Skill",value:l.profession,onChange:L=>d({...l,profession:L.target.value}),icon:r.jsx(Rx,{className:"w-5 h-5"}),placeholder:"e.g. Graphic Designer, Student",error:m.profession,required:!0}),r.jsx("div",{className:`p-4 rounded-xl border transition-all cursor-pointer ${l.whatsappConfirm?"bg-primary-50 dark:bg-primary-900/20 border-primary-500":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border hover:border-primary-300"}`,onClick:()=>d({...l,whatsappConfirm:!l.whatsappConfirm}),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:`mt-0.5 w-5 h-5 rounded border flex items-center justify-center transition-colors ${l.whatsappConfirm?"bg-primary-500 border-primary-500":"border-gray-400"}`,children:l.whatsappConfirm&&r.jsx(nt,{className:"w-3.5 h-3.5 text-white"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-sm",children:"WhatsApp Confirmation"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-0.5",children:"I confirm that the phone number provided is active on WhatsApp."})]})]})}),m.whatsappConfirm&&r.jsx("p",{className:"text-xs text-red-500 font-medium px-1",children:m.whatsappConfirm}),m.general&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:m.general})}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:k,className:"flex-1",children:"Back"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-[2]",isLoading:x,children:"Create Account"})]})]},"step2")]})}),r.jsxs("p",{className:"text-center text-sm text-light-muted dark:text-dark-muted mt-6 pb-2",children:["Already have an account?"," ",r.jsx(te,{to:"/login",state:{from:(A=t.state)==null?void 0:A.from},className:"text-primary-500 hover:text-primary-600 font-bold transition-colors",children:"Sign In"})]})]})]})})}function x8(){return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(h8,{})})}function Ha(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ha=function(t){return typeof t}:Ha=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ha(e)}function p8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f8(e,t){for(var s=0;s<t.length;s++){var n=t[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g8(e,t,s){return t&&f8(e.prototype,t),e}function RN(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function fb(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),s.push.apply(s,n)}return s}function Un(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?fb(Object(s),!0).forEach(function(n){RN(e,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fb(Object(s)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))})}return e}function b8(e,t){if(e){if(typeof e=="string")return gb(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return gb(e,t)}}function gb(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,n=new Array(t);s<t;s++)n[s]=e[s];return n}function y8(e,t){var s;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(s=b8(e))||t){s&&(e=s);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(d){throw d},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,l;return{s:function(){s=e[Symbol.iterator]()},n:function(){var d=s.next();return i=d.done,d},e:function(d){o=!0,l=d},f:function(){try{!i&&s.return!=null&&s.return()}finally{if(o)throw l}}}}var v8="3.1.0",Nt={MANDATORY_INITIALIZATION_MISSING:{message:"Missing urlEndpoint during SDK initialization",help:""},INVALID_TRANSFORMATION_POSITION:{message:"Invalid transformationPosition parameter",help:""},PRIVATE_KEY_CLIENT_SIDE:{message:"privateKey should not be passed on the client side",help:""},MISSING_UPLOAD_DATA:{message:"Missing data for upload",help:""},MISSING_UPLOAD_FILE_PARAMETER:{message:"Missing file parameter for upload",help:""},MISSING_UPLOAD_FILENAME_PARAMETER:{message:"Missing fileName parameter for upload",help:""},MISSING_AUTHENTICATION_ENDPOINT:{message:"Missing authentication endpoint for upload",help:""},MISSING_PUBLIC_KEY:{message:"Missing public key for upload",help:""},AUTH_ENDPOINT_TIMEOUT:{message:"The authenticationEndpoint you provided timed out in 60 seconds",help:""},AUTH_ENDPOINT_NETWORK_ERROR:{message:"Request to authenticationEndpoint failed due to network error",help:""},AUTH_INVALID_RESPONSE:{message:"Invalid response from authenticationEndpoint. The SDK expects a JSON response with three fields i.e. signature, token and expire.",help:""},UPLOAD_ENDPOINT_NETWORK_ERROR:{message:"Request to ImageKit upload endpoint failed due to network error",help:""},INVALID_UPLOAD_OPTIONS:{message:"Invalid uploadOptions parameter",help:""},MISSING_SIGNATURE:{message:"Missing signature for upload. The SDK expects token, signature and expire for authentication.",help:""},MISSING_TOKEN:{message:"Missing token for upload. The SDK expects token, signature and expire for authentication.",help:""},MISSING_EXPIRE:{message:"Missing expire for upload. The SDK expects token, signature and expire for authentication.",help:""},INVALID_TRANSFORMATION:{message:"Invalid transformation parameter. Please include at least pre, post, or both.",help:""},INVALID_PRE_TRANSFORMATION:{message:"Invalid pre transformation parameter.",help:""},INVALID_POST_TRANSFORMATION:{message:"Invalid post transformation parameter.",help:""}};function Mt(e,t,s){typeof s=="function"&&(e?s(t,null):s(null,t))}function w8(e){var t={},s=e.getAllResponseHeaders();return Object.keys(s).length&&s.trim().split(/[\r\n]+/).map(function(n){return n.split(/: /)}).forEach(function(n){t[n[0].trim()]=n[1].trim()}),t}var bb=function(t,s){var n=Un({},t),a={statusCode:s.status,headers:w8(s)};return Object.defineProperty(n,"$ResponseMetadata",{value:a,enumerable:!1,writable:!1}),n},k8=function(t,s,n){j8(t,s).then(function(a){return Mt(!1,a,n)},function(a){return Mt(!0,a,n)})},j8=function(t,s){return new Promise(function(n,a){t.open("POST","https://upload.imagekit.io/api/v1/files/upload"),t.onerror=function(i){return a(Nt.UPLOAD_ENDPOINT_NETWORK_ERROR)},t.onload=function(){if(t.status===200)try{var i=JSON.parse(t.responseText),o=bb(i,t);return n(o)}catch(d){return a(d)}else try{var i=JSON.parse(t.responseText),l=bb(i,t);return a(l)}catch(d){return a(d)}},t.send(s)})},N8=function(t,s,n,a){if(!s.file){Mt(!0,Nt.MISSING_UPLOAD_FILE_PARAMETER,a);return}if(!s.fileName){Mt(!0,Nt.MISSING_UPLOAD_FILENAME_PARAMETER,a);return}if(!n.publicKey){Mt(!0,Nt.MISSING_PUBLIC_KEY,a);return}if(!s.token){Mt(!0,Nt.MISSING_TOKEN,a);return}if(!s.signature){Mt(!0,Nt.MISSING_SIGNATURE,a);return}if(!s.expire){Mt(!0,Nt.MISSING_EXPIRE,a);return}if(s.transformation){if(!(Object.keys(s.transformation).includes("pre")||Object.keys(s.transformation).includes("post"))){Mt(!0,Nt.INVALID_TRANSFORMATION,a);return}if(Object.keys(s.transformation).includes("pre")&&!s.transformation.pre){Mt(!0,Nt.INVALID_PRE_TRANSFORMATION,a);return}if(Object.keys(s.transformation).includes("post"))if(Array.isArray(s.transformation.post)){var i=y8(s.transformation.post),o;try{for(i.s();!(o=i.n()).done;){var l=o.value;if(l.type==="abs"&&!(l.protocol||l.value)){Mt(!0,Nt.INVALID_POST_TRANSFORMATION,a);return}else if(l.type==="transformation"&&!l.value){Mt(!0,Nt.INVALID_POST_TRANSFORMATION,a);return}}}catch(u){i.e(u)}finally{i.f()}}else{Mt(!0,Nt.INVALID_POST_TRANSFORMATION,a);return}}var d=new FormData,c;for(c in s)c&&(c==="file"&&typeof s.file!="string"?d.append("file",s.file,String(s.fileName)):c==="tags"&&Array.isArray(s.tags)?d.append("tags",s.tags.join(",")):c==="signature"?d.append("signature",s.signature):c==="expire"?d.append("expire",String(s.expire)):c==="token"?d.append("token",s.token):c==="responseFields"&&Array.isArray(s.responseFields)?d.append("responseFields",s.responseFields.join(",")):c==="extensions"&&Array.isArray(s.extensions)?d.append("extensions",JSON.stringify(s.extensions)):c==="customMetadata"&&Ha(s.customMetadata)==="object"&&!Array.isArray(s.customMetadata)&&s.customMetadata!==null?d.append("customMetadata",JSON.stringify(s.customMetadata)):c==="transformation"&&Ha(s.transformation)==="object"&&s.transformation!==null?d.append(c,JSON.stringify(s.transformation)):c==="checks"&&s.checks?d.append("checks",s.checks):s[c]!==void 0&&d.append(c,String(s[c])));d.append("publicKey",n.publicKey),k8(t,d,a)},yb={width:"w",height:"h",aspectRatio:"ar",background:"bg",border:"b",crop:"c",cropMode:"cm",dpr:"dpr",focus:"fo",quality:"q",x:"x",xCenter:"xc",y:"y",yCenter:"yc",format:"f",videoCodec:"vc",audioCodec:"ac",radius:"r",rotation:"rt",blur:"bl",named:"n",defaultImage:"di",flip:"fl",original:"orig",startOffset:"so",endOffset:"eo",duration:"du",streamingResolutions:"sr",effectSharpen:"e-sharpen",effectUSM:"e-usm",effectContrast:"e-contrast",effectGray:"e-grayscale",effectShadow:"e-shadow",effectGradient:"e-gradient",rotate:"rt",grayscale:"e-grayscale",aiUpscale:"e-upscale",aiRetouch:"e-retouch",aiVariation:"e-genvar",aiDropShadow:"e-dropshadow",aiChangeBackground:"e-changebg",aiRemoveBackground:"e-bgremove",aiRemoveBackgroundExternal:"e-removedotbg",contrastStretch:"e-contrast",shadow:"e-shadow",sharpen:"e-sharpen",unsharpMask:"e-usm",gradient:"e-gradient",progressive:"pr",lossless:"lo",colorProfile:"cp",metadata:"md",opacity:"o",trim:"t",zoom:"z",page:"pg",raw:"raw"},LN="path",DN="query",S8=[LN,DN],C8=":",T8=",",_8="-",qs={getDefault:function(){return LN},addAsQueryParameter:function(t){return t.transformationPosition===DN},validParameters:function(t){return typeof t.transformationPosition>"u"?!1:S8.indexOf(t.transformationPosition)!=-1},getTransformKey:function(t){return t&&(yb[t]||yb[t.toLowerCase()])||""},getChainTransformDelimiter:function(){return C8},getTransformDelimiter:function(){return T8},getTransformKeyValueDelimiter:function(){return _8}},vb="tr";function I8(e){return typeof e=="string"&&e[e.length-1]=="/"&&(e=e.substring(0,e.length-1)),e}function P8(e){return typeof e=="string"&&e[0]=="/"&&(e=e.slice(1)),e}function Ml(e,t){var s="/",n=new RegExp(s+"{1,}","g");return e.join(s).replace(n,s)}var A8=function(t){if(!t.path&&!t.src)return"";var s,n,a;try{t.path?(a=new URL(t.urlEndpoint).pathname,s=new URL(Ml([t.urlEndpoint.replace(a,""),t.path]))):(s=new URL(t.src),n=!0)}catch(l){return console.error(l),""}for(var i in t.queryParameters)s.searchParams.append(i,String(t.queryParameters[i]));var o=E8(t.transformation);return o&&o.length&&(qs.addAsQueryParameter(t)||n?s.searchParams.append(vb,o):s.pathname=Ml([vb+qs.getChainTransformDelimiter()+o,s.pathname])),a?s.pathname=Ml([a,s.pathname]):s.pathname=Ml([s.pathname]),s.href};function E8(e){if(!Array.isArray(e))return"";for(var t=[],s=0,n=e.length;s<n;s++){var a=[];for(var i in e[s]){var o=e[s][i];if(o!=null){var l=qs.getTransformKey(i);if(l||(l=i),l!=="")if(["e-grayscale","e-contrast","e-removedotbg","e-bgremove","e-upscale","e-retouch","e-genvar"].includes(l))if(o===!0||o==="-"||o==="true")a.push(l);else continue;else["e-sharpen","e-shadow","e-gradient","e-usm","e-dropshadow"].includes(l)&&(o.toString().trim()===""||o===!0||o==="true")?a.push(l):i==="raw"?a.push(e[s][i]):(l==="di"&&(o=I8(P8(o||"")),o=o.replace(/\//g,"@@")),l==="sr"&&Array.isArray(o)&&(o=o.join("_")),l==="t"&&o.toString().trim()===""&&(o="true"),a.push([l,o].join(qs.getTransformKeyValueDelimiter())))}}a.length&&t.push(a.join(qs.getTransformDelimiter()))}return t.join(qs.getChainTransformDelimiter())}var M8=function(t,s){return A8(Un(Un({},s),t))};function R8(e){return e.urlEndpoint}var L8=function(t,s){return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];if(a.length===s.length&&typeof a[a.length-1]<"u"){if(typeof a[a.length-1]!="function")throw new Error("Callback must be a function.");s.call.apply(s,[t].concat(a))}else return new Promise(function(o,l){var d=function(u){if(u)return l(u);for(var m=arguments.length,h=new Array(m>1?m-1:0),x=1;x<m;x++)h[x-1]=arguments[x];o(h.length>1?h:h[0])};a.pop(),a.push(d),s.call.apply(s,[t].concat(a))})}},D8=function(){function e(t){if(p8(this,e),RN(this,"options",{sdkVersion:"javascript-".concat(v8),publicKey:"",urlEndpoint:"",transformationPosition:qs.getDefault()}),this.options=Un(Un({},this.options),t||{}),!R8(this.options))throw Nt.MANDATORY_INITIALIZATION_MISSING;if(!qs.validParameters(this.options))throw Nt.INVALID_TRANSFORMATION_POSITION}return g8(e,[{key:"url",value:function(s){return M8(s,this.options)}},{key:"upload",value:function(s,n,a){var i;if(typeof n=="function"?i=n:a=n||{},!s||Ha(s)!=="object")return Mt(!0,Nt.INVALID_UPLOAD_OPTIONS,i);var o=Un(Un({},this.options),a),l=s||{},d=l.xhr;delete s.xhr;var c=d||new XMLHttpRequest;return L8(this,N8)(c,s,o,i)}}]),e}();new D8({publicKey:"public_5uW+u/NO/xT9A9FY6w6pEZIIRIw=",urlEndpoint:"https://ik.imagekit.io/h3qzmviwv"});const Bc=async(e,t,s)=>new Promise((n,a)=>{const i=new FormData;i.append("file",e),i.append("fileName",e.name),i.append("folder",`/baptizo/${t}`),i.append("publicKey","public_5uW+u/NO/xT9A9FY6w6pEZIIRIw=");const o=new XMLHttpRequest;o.upload.addEventListener("progress",d=>{if(d.lengthComputable&&s){const c=Math.round(d.loaded/d.total*100);s(c)}}),o.addEventListener("load",()=>{if(o.status===200)try{const d=JSON.parse(o.responseText);n(d.url)}catch{a(new Error("Failed to parse response"))}else a(new Error(`Upload failed with status ${o.status}`))}),o.addEventListener("error",()=>{a(new Error("Upload failed"))}),o.open("POST","https://upload.imagekit.io/api/v1/files/upload");const l=btoa("private_RDhLHlvGS4fKh49gv6q5Ygv2bHg=:");o.setRequestHeader("Authorization",`Basic ${l}`),o.send(i)}),_p=e=>["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type),O8=e=>["video/mp4","video/webm","video/ogg"].includes(e.type),ON=(e,t,s)=>{if(!e)return"";const n=[];if(n.push(`w-${t}`),n.push(`h-${s}`),n.length===0||!e.includes("/baptizo/"))return e;const a=`tr:${n.join(",")}`;return e.replace("/baptizo/",`/baptizo/${a}/`)};function dt({src:e,alt:t="Avatar",size:s="md",className:n}){const a={xs:"w-6 h-6 text-[10px]",sm:"w-8 h-8 text-xs",md:"w-10 h-10 text-sm",lg:"w-14 h-14 text-lg",xl:"w-20 h-20 text-2xl"},i=(t||"User").split(" ").map(o=>o[0]).join("").slice(0,2).toUpperCase();return r.jsx("div",{className:J("rounded-full overflow-hidden bg-primary-100 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-bold flex items-center justify-center shrink-0 border border-primary-200 dark:border-primary-800",a[s],n),children:e?r.jsx("img",{src:ON(e,200,200),alt:t,className:"w-full h-full object-cover",referrerPolicy:"no-referrer",onError:o=>{var l;o.currentTarget.style.display="none",(l=o.currentTarget.parentElement)==null||l.classList.add("fallback-avatar")}}):r.jsx("span",{children:i})})}function Ne(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function mn(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}const FN=6048e5,F8=864e5,Rl=43200,wb=1440;let U8={};function sl(){return U8}function Oo(e,t){var l,d,c,u;const s=sl(),n=(t==null?void 0:t.weekStartsOn)??((d=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??s.weekStartsOn??((u=(c=s.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,a=Ne(e),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ec(e){return Oo(e,{weekStartsOn:1})}function UN(e){const t=Ne(e),s=t.getFullYear(),n=mn(e,0);n.setFullYear(s+1,0,4),n.setHours(0,0,0,0);const a=ec(n),i=mn(e,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const o=ec(i);return t.getTime()>=a.getTime()?s+1:t.getTime()>=o.getTime()?s:s-1}function kb(e){const t=Ne(e);return t.setHours(0,0,0,0),t}function tc(e){const t=Ne(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function B8(e,t){const s=kb(e),n=kb(t),a=+s-tc(s),i=+n-tc(n);return Math.round((a-i)/F8)}function V8(e){const t=UN(e),s=mn(e,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),ec(s)}function sd(e,t){const s=Ne(e),n=Ne(t),a=s.getTime()-n.getTime();return a<0?-1:a>0?1:a}function $8(e){return mn(e,Date.now())}function z8(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function W8(e){if(!z8(e)&&typeof e!="number")return!1;const t=Ne(e);return!isNaN(Number(t))}function q8(e,t){const s=Ne(e),n=Ne(t),a=s.getFullYear()-n.getFullYear(),i=s.getMonth()-n.getMonth();return a*12+i}function H8(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function G8(e,t){return+Ne(e)-+Ne(t)}function Q8(e){const t=Ne(e);return t.setHours(23,59,59,999),t}function K8(e){const t=Ne(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function Y8(e){const t=Ne(e);return+Q8(t)==+K8(t)}function J8(e,t){const s=Ne(e),n=Ne(t),a=sd(s,n),i=Math.abs(q8(s,n));let o;if(i<1)o=0;else{s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-a*i);let l=sd(s,n)===-a;Y8(Ne(e))&&i===1&&sd(e,n)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function X8(e,t,s){const n=G8(e,t)/1e3;return H8(s==null?void 0:s.roundingMethod)(n)}function Z8(e){const t=Ne(e),s=mn(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}const eL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},tL=(e,t,s)=>{let n;const a=eL[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),s!=null&&s.addSuffix?s.comparison&&s.comparison>0?"in "+n:n+" ago":n};function nm(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const rL={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sL={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nL={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},aL={date:nm({formats:rL,defaultWidth:"full"}),time:nm({formats:sL,defaultWidth:"full"}),dateTime:nm({formats:nL,defaultWidth:"full"})},iL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},oL=(e,t,s,n)=>iL[e];function Ei(e){return(t,s)=>{const n=s!=null&&s.context?String(s.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=s!=null&&s.width?String(s.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=s!=null&&s.width?String(s.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const lL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},uL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},xL=(e,t)=>{const s=Number(e),n=s%100;if(n>20||n<10)switch(n%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},pL={ordinalNumber:xL,era:Ei({values:lL,defaultWidth:"wide"}),quarter:Ei({values:dL,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ei({values:cL,defaultWidth:"wide"}),day:Ei({values:uL,defaultWidth:"wide"}),dayPeriod:Ei({values:mL,defaultWidth:"wide",formattingValues:hL,defaultFormattingWidth:"wide"})};function Mi(e){return(t,s={})=>{const n=s.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(l)?gL(l,m=>m.test(o)):fL(l,m=>m.test(o));let c;c=e.valueCallback?e.valueCallback(d):d,c=s.valueCallback?s.valueCallback(c):c;const u=t.slice(o.length);return{value:c,rest:u}}}function fL(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s}function gL(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s}function bL(e){return(t,s={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=s.valueCallback?s.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const yL=/^(\d+)(th|st|nd|rd)?/i,vL=/\d+/i,wL={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},kL={any:[/^b/i,/^(a|c)/i]},jL={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},NL={any:[/1/i,/2/i,/3/i,/4/i]},SL={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},CL={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TL={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_L={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},IL={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},PL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},AL={ordinalNumber:bL({matchPattern:yL,parsePattern:vL,valueCallback:e=>parseInt(e,10)}),era:Mi({matchPatterns:wL,defaultMatchWidth:"wide",parsePatterns:kL,defaultParseWidth:"any"}),quarter:Mi({matchPatterns:jL,defaultMatchWidth:"wide",parsePatterns:NL,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Mi({matchPatterns:SL,defaultMatchWidth:"wide",parsePatterns:CL,defaultParseWidth:"any"}),day:Mi({matchPatterns:TL,defaultMatchWidth:"wide",parsePatterns:_L,defaultParseWidth:"any"}),dayPeriod:Mi({matchPatterns:IL,defaultMatchWidth:"any",parsePatterns:PL,defaultParseWidth:"any"})},BN={code:"en-US",formatDistance:tL,formatLong:aL,formatRelative:oL,localize:pL,match:AL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function EL(e){const t=Ne(e);return B8(t,Z8(t))+1}function ML(e){const t=Ne(e),s=+ec(t)-+V8(t);return Math.round(s/FN)+1}function VN(e,t){var u,m,h,x;const s=Ne(e),n=s.getFullYear(),a=sl(),i=(t==null?void 0:t.firstWeekContainsDate)??((m=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??a.firstWeekContainsDate??((x=(h=a.locale)==null?void 0:h.options)==null?void 0:x.firstWeekContainsDate)??1,o=mn(e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Oo(o,t),d=mn(e,0);d.setFullYear(n,0,i),d.setHours(0,0,0,0);const c=Oo(d,t);return s.getTime()>=l.getTime()?n+1:s.getTime()>=c.getTime()?n:n-1}function RL(e,t){var l,d,c,u;const s=sl(),n=(t==null?void 0:t.firstWeekContainsDate)??((d=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??s.firstWeekContainsDate??((u=(c=s.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,a=VN(e,t),i=mn(e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Oo(i,t)}function LL(e,t){const s=Ne(e),n=+Oo(s,t)-+RL(s,t);return Math.round(n/FN)+1}function ye(e,t){const s=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return s+n}const Es={y(e,t){const s=e.getFullYear(),n=s>0?s:1-s;return ye(t==="yy"?n%100:n,t.length)},M(e,t){const s=e.getMonth();return t==="M"?String(s+1):ye(s+1,2)},d(e,t){return ye(e.getDate(),t.length)},a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(e,t){return ye(e.getHours()%12||12,t.length)},H(e,t){return ye(e.getHours(),t.length)},m(e,t){return ye(e.getMinutes(),t.length)},s(e,t){return ye(e.getSeconds(),t.length)},S(e,t){const s=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,s-3));return ye(a,t.length)}},ga={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},jb={G:function(e,t,s){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(n,{width:"abbreviated"});case"GGGGG":return s.era(n,{width:"narrow"});case"GGGG":default:return s.era(n,{width:"wide"})}},y:function(e,t,s){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return s.ordinalNumber(a,{unit:"year"})}return Es.y(e,t)},Y:function(e,t,s,n){const a=VN(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return ye(o,2)}return t==="Yo"?s.ordinalNumber(i,{unit:"year"}):ye(i,t.length)},R:function(e,t){const s=UN(e);return ye(s,t.length)},u:function(e,t){const s=e.getFullYear();return ye(s,t.length)},Q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ye(n,2);case"Qo":return s.ordinalNumber(n,{unit:"quarter"});case"QQQ":return s.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,s){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ye(n,2);case"qo":return s.ordinalNumber(n,{unit:"quarter"});case"qqq":return s.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,s){const n=e.getMonth();switch(t){case"M":case"MM":return Es.M(e,t);case"Mo":return s.ordinalNumber(n+1,{unit:"month"});case"MMM":return s.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,s){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ye(n+1,2);case"Lo":return s.ordinalNumber(n+1,{unit:"month"});case"LLL":return s.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,s,n){const a=LL(e,n);return t==="wo"?s.ordinalNumber(a,{unit:"week"}):ye(a,t.length)},I:function(e,t,s){const n=ML(e);return t==="Io"?s.ordinalNumber(n,{unit:"week"}):ye(n,t.length)},d:function(e,t,s){return t==="do"?s.ordinalNumber(e.getDate(),{unit:"date"}):Es.d(e,t)},D:function(e,t,s){const n=EL(e);return t==="Do"?s.ordinalNumber(n,{unit:"dayOfYear"}):ye(n,t.length)},E:function(e,t,s){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(n,{width:"short",context:"formatting"});case"EEEE":default:return s.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,s,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ye(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,s,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ye(i,t.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,s){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return ye(a,t.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(n,{width:"short",context:"formatting"});case"iiii":default:return s.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,s){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){const n=e.getHours();let a;switch(n===12?a=ga.noon:n===0?a=ga.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,s){const n=e.getHours();let a;switch(n>=17?a=ga.evening:n>=12?a=ga.afternoon:n>=4?a=ga.morning:a=ga.night,t){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,s){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),s.ordinalNumber(n,{unit:"hour"})}return Es.h(e,t)},H:function(e,t,s){return t==="Ho"?s.ordinalNumber(e.getHours(),{unit:"hour"}):Es.H(e,t)},K:function(e,t,s){const n=e.getHours()%12;return t==="Ko"?s.ordinalNumber(n,{unit:"hour"}):ye(n,t.length)},k:function(e,t,s){let n=e.getHours();return n===0&&(n=24),t==="ko"?s.ordinalNumber(n,{unit:"hour"}):ye(n,t.length)},m:function(e,t,s){return t==="mo"?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):Es.m(e,t)},s:function(e,t,s){return t==="so"?s.ordinalNumber(e.getSeconds(),{unit:"second"}):Es.s(e,t)},S:function(e,t){return Es.S(e,t)},X:function(e,t,s){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Sb(n);case"XXXX":case"XX":return An(n);case"XXXXX":case"XXX":default:return An(n,":")}},x:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"x":return Sb(n);case"xxxx":case"xx":return An(n);case"xxxxx":case"xxx":default:return An(n,":")}},O:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Nb(n,":");case"OOOO":default:return"GMT"+An(n,":")}},z:function(e,t,s){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Nb(n,":");case"zzzz":default:return"GMT"+An(n,":")}},t:function(e,t,s){const n=Math.trunc(e.getTime()/1e3);return ye(n,t.length)},T:function(e,t,s){const n=e.getTime();return ye(n,t.length)}};function Nb(e,t=""){const s=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?s+String(a):s+String(a)+t+ye(i,2)}function Sb(e,t){return e%60===0?(e>0?"-":"+")+ye(Math.abs(e)/60,2):An(e,t)}function An(e,t=""){const s=e>0?"-":"+",n=Math.abs(e),a=ye(Math.trunc(n/60),2),i=ye(n%60,2);return s+a+t+i}const Cb=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},$N=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},DL=(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],n=s[1],a=s[2];if(!a)return Cb(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",Cb(n,t)).replace("{{time}}",$N(a,t))},OL={p:$N,P:DL},FL=/^D+$/,UL=/^Y+$/,BL=["D","DD","YY","YYYY"];function VL(e){return FL.test(e)}function $L(e){return UL.test(e)}function zL(e,t,s){const n=WL(e,t,s);if(console.warn(n),BL.includes(e))throw new RangeError(n)}function WL(e,t,s){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const qL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,HL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,GL=/^'([^]*?)'?$/,QL=/''/g,KL=/[a-zA-Z]/;function YL(e,t,s){var u,m,h,x;const n=sl(),a=n.locale??BN,i=n.firstWeekContainsDate??((m=(u=n.locale)==null?void 0:u.options)==null?void 0:m.firstWeekContainsDate)??1,o=n.weekStartsOn??((x=(h=n.locale)==null?void 0:h.options)==null?void 0:x.weekStartsOn)??0,l=Ne(e);if(!W8(l))throw new RangeError("Invalid time value");let d=t.match(HL).map(g=>{const v=g[0];if(v==="p"||v==="P"){const y=OL[v];return y(g,a.formatLong)}return g}).join("").match(qL).map(g=>{if(g==="''")return{isToken:!1,value:"'"};const v=g[0];if(v==="'")return{isToken:!1,value:JL(g)};if(jb[v])return{isToken:!0,value:g};if(v.match(KL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");return{isToken:!1,value:g}});a.localize.preprocessor&&(d=a.localize.preprocessor(l,d));const c={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return d.map(g=>{if(!g.isToken)return g.value;const v=g.value;($L(v)||VL(v))&&zL(v,t,String(e));const y=jb[v[0]];return y(l,v,a.localize,c)}).join("")}function JL(e){const t=e.match(GL);return t?t[1].replace(QL,"'"):e}function XL(e,t,s){const n=sl(),a=(s==null?void 0:s.locale)??n.locale??BN,i=2520,o=sd(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:o});let d,c;o>0?(d=Ne(t),c=Ne(e)):(d=Ne(e),c=Ne(t));const u=X8(c,d),m=(tc(c)-tc(d))/1e3,h=Math.round((u-m)/60);let x;if(h<2)return s!=null&&s.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<wb){const g=Math.round(h/60);return a.formatDistance("aboutXHours",g,l)}else{if(h<i)return a.formatDistance("xDays",1,l);if(h<Rl){const g=Math.round(h/wb);return a.formatDistance("xDays",g,l)}else if(h<Rl*2)return x=Math.round(h/Rl),a.formatDistance("aboutXMonths",x,l)}if(x=J8(c,d),x<12){const g=Math.round(h/Rl);return a.formatDistance("xMonths",g,l)}else{const g=x%12,v=Math.trunc(x/12);return g<3?a.formatDistance("aboutXYears",v,l):g<9?a.formatDistance("overXYears",v,l):a.formatDistance("almostXYears",v+1,l)}}function ot(e,t){return XL(e,$8(e),t)}function ht({isOpen:e,onClose:t,children:s,title:n,className:a,maxWidth:i="max-w-md"}){return f.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),f.useEffect(()=>{const o=l=>{l.key==="Escape"&&e&&t()};return document.addEventListener("keydown",o),()=>document.removeEventListener("keydown",o)},[e,t]),Yv.createPortal(r.jsx(re,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[100]",onClick:t}),r.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.2},className:J("w-full max-h-[90vh] overflow-y-auto custom-scrollbar",i,"bg-light-card dark:bg-dark-card rounded-2xl shadow-2xl","border border-light-border dark:border-dark-border",a),onClick:o=>o.stopPropagation(),children:[n&&r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-light-border dark:border-dark-border",children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:n}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:r.jsx(Ae,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"})})]}),r.jsxs("div",{className:n?"p-6":"p-6 relative",children:[!n&&r.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:r.jsx(Ae,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"})}),s]})]})})]})}),document.body)}function ZL({isOpen:e,onClose:t,postId:s}){var y;const{user:n}=Z(),[a,i]=f.useState(""),[o,l]=f.useState(null),[d,c]=f.useState(""),[u,m]=f.useState(!1),h=U(S.users.getAllUsers,n&&(n.role==="admin"||n.role==="super_admin")?{adminId:n._id}:"skip"),x=V(S.assignments.createAssignment),g=h==null?void 0:h.filter(p=>{var b,w;return((b=p.name)==null?void 0:b.toLowerCase().includes(a.toLowerCase()))||((w=p.email)==null?void 0:w.toLowerCase().includes(a.toLowerCase()))}).slice(0,5),v=async p=>{if(p.preventDefault(),!(!n||!o||!d.trim())){m(!0);try{await x({adminId:n._id,userId:o,postId:s,instructions:d.trim()}),t(),l(null),c(""),i("")}catch(b){console.error("Failed to assign task:",b),alert("Failed to assign task. Please try again.")}finally{m(!1)}}};return r.jsx(ht,{isOpen:e,onClose:t,title:"Assign Task",children:r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:"Select Member"}),r.jsxs("div",{className:"relative",children:[r.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",value:a,onChange:p=>i(p.target.value),placeholder:"Search by name or email...",className:"w-full pl-9 pr-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500"})]}),a&&g&&r.jsx("div",{className:"mt-2 space-y-2 max-h-40 overflow-y-auto",children:g.map(p=>r.jsxs("div",{onClick:()=>l(p._id),className:`p-2 rounded-lg cursor-pointer flex items-center gap-2 transition-colors ${o===p._id?"bg-primary-500 text-white":"bg-light-card dark:bg-dark-card hover:bg-light-bg dark:hover:bg-dark-bg text-light-text dark:text-dark-text"}`,children:[r.jsx(yt,{className:"w-4 h-4"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium",children:p.name}),r.jsx("p",{className:"text-xs opacity-80",children:p.email})]}),o===p._id&&r.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})]},p._id))}),o&&!a&&r.jsxs("div",{className:"mt-2 p-2 rounded-lg bg-primary-100 dark:bg-primary-900 border border-primary-500 text-primary-700 dark:text-primary-300 text-sm",children:["Selected: ",(y=h==null?void 0:h.find(p=>p._id===o))==null?void 0:y.name]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:"Instructions"}),r.jsx("textarea",{value:d,onChange:p=>c(p.target.value),placeholder:"Describe the task for this member...",className:"w-full min-h-[100px] p-3 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 text-light-text dark:text-dark-text"})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",disabled:!o||!d.trim()||u,children:u?"Assigning...":"Assign Task"})]})]})})}function eD({src:e,alt:t,onClose:s,layoutId:n}){const a=async()=>{if(navigator.share)try{await navigator.share({title:t||"Baptizo Image",text:"Check out this image",url:e})}catch(o){console.error("Error sharing:",o)}else try{await navigator.clipboard.writeText(e),alert("Image link copied to clipboard!")}catch(o){console.error("Failed to copy:",o)}},i=async()=>{try{const l=await(await fetch(e)).blob(),d=window.URL.createObjectURL(l),c=document.createElement("a");c.href=d,c.download=t||"baptizo-image.jpg",document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d)}catch(o){console.error("Failed to download:",o),window.open(e,"_blank")}};return r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex flex-col items-center justify-center bg-black/95 backdrop-blur-sm shadow-2xl overflow-hidden",onClick:s,children:[r.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[110] flex items-center justify-between p-4 bg-gradient-to-b from-black/60 to-transparent",onClick:o=>o.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white","aria-label":"Back",children:r.jsx(ur,{className:"w-6 h-6"})}),r.jsx("span",{className:"text-white font-medium truncate max-w-[200px]",children:t||"Image"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:a,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white",title:"Share image",children:r.jsx(mi,{className:"w-5 h-5"})}),r.jsx("button",{onClick:i,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white",title:"Download image",children:r.jsx(Wo,{className:"w-5 h-5"})}),r.jsx("button",{onClick:s,className:"p-2 rounded-full hover:bg-white/10 transition-colors text-white",children:r.jsx(Ae,{className:"w-6 h-6"})})]})]}),r.jsx(T.div,{className:"relative z-[105] w-full h-full flex items-center justify-center p-4",onClick:o=>o.stopPropagation(),children:r.jsx(T.img,{layoutId:n,src:e,alt:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-sm",draggable:!1})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8 bg-gradient-to-t from-black/60 to-transparent pointer-events-none",children:r.jsx("p",{className:"text-white/60 text-sm text-center max-w-2xl mx-auto",children:t})})]})}function cs({isOpen:e,onClose:t,onConfirm:s,title:n,description:a,confirmText:i="Confirm",cancelText:o="Cancel",variant:l="primary"}){return r.jsx(ht,{isOpen:e,onClose:t,title:n,children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("p",{className:"text-light-muted dark:text-dark-muted leading-relaxed",children:a}),r.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx(M,{variant:"outline",onClick:t,className:"border-light-border dark:border-dark-border hover:bg-light-bg dark:hover:bg-dark-bg",children:o}),r.jsx(M,{variant:l==="danger"?"danger":"primary",onClick:()=>{s(),t()},className:l==="primary"?"bg-primary-500 hover:bg-primary-600 text-white shadow-lg shadow-primary-500/20":"",children:i})]})]})})}function Ip({post:e,onCommentClick:t,hasUserLiked:s=!1}){var wn,kn,Ss,pr,fr,Cs,Ts,fi,jn;const{user:n}=Z(),a=de(),i=V(S.posts.likePost),o=V(S.editDelete.deletePostUser),l=V(S.editDelete.editPost),d=V(S.follows.toggleFollow),c=V(S.posts.togglePostDisabled),u=U(S.settings.getCommentsEnabled),m=U(S.settings.getQuestionsOnPostsEnabled),h=U(S.posts.isPostSaved,n?{userId:n._id,postId:e._id}:"skip"),x=V(S.posts.toggleSavePost),[g,v]=f.useState(!1),[y,p]=f.useState(s),[b,w]=f.useState(e.likeCount),[k,j]=f.useState(!1),[N,_]=f.useState(!1),[A,L]=f.useState(!1),[C,P]=f.useState(e.content),[R,W]=f.useState(!1),[Y,se]=f.useState(0),Q=e.content.length>250,pe=e.content.length>1200;f.useEffect(()=>{se(0)},[e._id]);const $=xe=>{if(!Q){!e.imageUrl&&!e.videoUrl&&a(`/post/${e._id}`);return}xe.stopPropagation(),pe?Y===0?se(1):Y===1&&se(2):se(Y===0?2:0)},I=xe=>{xe.stopPropagation(),se(pe?Y===0?1:Y===1?2:0:Y===0?2:0)},[F,q]=f.useState(!1),ce=U(S.follows.isFollowing,n&&e.author?{followerId:n._id,followingId:e.author._id}:"skip"),ae=(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.role)==="super_admin",H=((wn=e.author)==null?void 0:wn.role)==="admin"||((kn=e.author)==null?void 0:kn.role)==="super_admin",le=e.postType==="question",ue=e.postType==="prayer";f.useEffect(()=>{p(s),w(e.likeCount)},[s,e.likeCount]);const xr=async()=>{if(!n||g||H&&y)return;const xe=!y;p(xe),w(rr=>xe?rr+1:rr-1),v(!0);try{await i({userId:n._id,postId:e._id})}catch(rr){(rr instanceof Error?rr.message:"").includes("already liked")||(p(!xe),w(il=>xe?il-1:il+1)),console.error("Failed to like post:",rr)}finally{v(!1)}},pi=async()=>{if(!(!n||!e.author))try{await d({followerId:n._id,followingId:e.author._id}),j(!1)}catch(xe){console.error("Failed to toggle follow:",xe)}},vn=async()=>{if(n)try{await x({userId:n._id,postId:e._id}),j(!1)}catch(xe){console.error("Failed to toggle save:",xe)}},Ns=()=>{n&&(q(!0),j(!1))},tr=async()=>{try{await o({userId:n._id,postId:e._id})}catch(xe){console.error("Failed to delete post:",xe)}},nl=async()=>{if(!ae||!n)return;const xe=prompt("Enter reason for disabling this post:","Violates community guidelines");if(xe!==null)try{await c({postId:e._id,adminId:n._id,disabled:!0,reason:xe||"Disabled by admin"}),j(!1)}catch(rr){console.error("Failed to disable post:",rr),alert("Failed to disable post.")}},zc=()=>{A?al():(L(!0),j(!1))},al=async()=>{if(n)try{await l({userId:n._id,postId:e._id,content:C}),L(!1)}catch(xe){console.error("Failed to edit post:",xe),alert("Failed to update post.")}},Wc=()=>{if(e.imageUrl){const xe=document.createElement("a");xe.href=e.imageUrl,xe.download=`post-${e._id}.jpg`,document.body.appendChild(xe),xe.click(),document.body.removeChild(xe)}else alert("Download feature coming soon!")},qc=()=>{var xe;navigator.share?navigator.share({title:`Post by ${(xe=e.author)==null?void 0:xe.name}`,text:e.content,url:window.location.href}).catch(console.error):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},Hc=()=>le?"border-l-4 border-l-blue-500 bg-gradient-to-br from-blue-50/30 to-white dark:from-blue-900/20 dark:to-[#1A1A1A]":ue?"border-l-4 border-l-purple-500 bg-gradient-to-br from-purple-50/30 to-white dark:from-purple-900/20 dark:to-[#1A1A1A]":"bg-white dark:bg-[#1A1A1A]";return r.jsxs(r.Fragment,{children:[r.jsxs(T.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:`group relative rounded-3xl shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100 dark:border-gray-800 overflow-hidden ${Hc()}`,children:[r.jsx("div",{className:"p-4 sm:p-5 pb-2",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs(te,{to:`/profile/${(Ss=e.author)==null?void 0:Ss._id}`,className:"relative block",children:[r.jsx(dt,{src:(pr=e.author)==null?void 0:pr.avatarUrl,alt:((fr=e.author)==null?void 0:fr.name)||"User",className:`w-12 h-12 ring-2 transition-transform hover:scale-105 ${H?"ring-primary-500 shadow-lg shadow-primary-500/20":le?"ring-blue-400":ue?"ring-purple-400":"ring-transparent"}`}),H&&r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-primary-500 text-white p-0.5 rounded-full ring-2 ring-white dark:ring-[#1A1A1A]",children:r.jsx(We,{className:"w-3 h-3"})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-0.5",children:[r.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100 text-sm sm:text-base leading-tight group-hover:text-primary-500 transition-colors",children:(Cs=e.author)==null?void 0:Cs.name}),H?r.jsx(G,{variant:"primary",className:"bg-primary-500/10 text-primary-600 dark:text-primary-400 border-0 text-[10px] py-0 px-1.5 h-4 flex-shrink-0",children:((Ts=e.author)==null?void 0:Ts.role)==="admin"?"Community Admin":"Super Admin"}):r.jsx(G,{variant:"outline",className:`text-[10px] py-0 px-1.5 h-4 flex-shrink-0 ${le?"text-blue-600 border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-900/20":ue?"text-purple-600 border-purple-200 dark:border-purple-800 bg-purple-50 dark:bg-purple-900/20":"text-gray-500 border-gray-200 dark:border-gray-700"}`,children:le?"Question":ue?"Prayer":"Member"})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 dark:text-gray-400 flex-wrap",children:[r.jsx("span",{className:"whitespace-nowrap",children:ot(e.createdAt,{addSuffix:!0})}),r.jsx("span",{children:""}),r.jsx("span",{className:"font-medium",children:e.category})]})]})]}),r.jsxs("div",{className:"relative z-10 flex items-start gap-2",children:[r.jsx("button",{onClick:()=>j(!k),className:"p-2 -mr-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 transition-colors opacity-0 group-hover:opacity-100 focus:opacity-100",children:r.jsx(UC,{className:"w-5 h-5"})}),r.jsx(re,{children:k&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>j(!1)}),r.jsxs(T.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-[#252525] rounded-xl shadow-xl border border-gray-100 dark:border-gray-700 z-20 py-1 overflow-hidden",children:[n&&e.author&&n._id!==e.author._id&&r.jsx("button",{onClick:pi,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:ce?r.jsxs(r.Fragment,{children:[r.jsx(Dw,{className:"w-4 h-4"})," Unfollow"]}):r.jsxs(r.Fragment,{children:[r.jsx(Od,{className:"w-4 h-4"})," Follow"]})}),n&&r.jsxs("button",{onClick:vn,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm hover:bg-gray-50 dark:hover:bg-white/5 text-gray-700 dark:text-gray-200",children:[r.jsx(Mx,{className:`w-4 h-4 ${h?"fill-current":""}`})," ",h?"Unsave Post":"Save Post"]}),ae&&r.jsx(r.Fragment,{children:!H&&r.jsxs("button",{onClick:nl,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[r.jsx(Tr,{className:"w-4 h-4"})," Disable Post"]})}),(ae||(n==null?void 0:n._id)===((fi=e.author)==null?void 0:fi._id))&&r.jsxs(r.Fragment,{children:[(ae||(n==null?void 0:n._id)===((jn=e.author)==null?void 0:jn._id)&&Date.now()-e.createdAt<30*60*1e3)&&r.jsxs("button",{onClick:zc,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-white/5 transition-colors",children:[r.jsx(Rd,{className:"w-4 h-4"})," Edit Post"]}),r.jsxs("button",{onClick:Ns,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors",children:[r.jsx(Dr,{className:"w-4 h-4"})," Delete Post"]})]})]})]})})]})]})}),r.jsxs("div",{className:"px-4 sm:px-6 py-2",children:[A?r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsx("textarea",{value:C,onChange:xe=>P(xe.target.value),className:"w-full p-4 rounded-xl bg-gray-50 dark:bg-[#222] border-transparent focus:border-primary-500 focus:ring-0 text-base resize-none",rows:4}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>L(!1),children:"Cancel"}),r.jsx(M,{variant:"primary",size:"sm",onClick:al,children:"Save"})]})]}):r.jsxs("div",{onClick:()=>!e.imageUrl&&!e.videoUrl&&a(`/post/${e._id}`),className:"cursor-pointer mb-4",children:[le&&r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 text-blue-600 rounded-full",children:r.jsx(Md,{className:"w-5 h-5"})}),r.jsx("span",{className:"text-sm font-semibold text-blue-600 dark:text-blue-400 uppercase tracking-wide",children:e.questionContext==="about_someone_else"?"Question for Others":"Personal Question"})]}),r.jsx("p",{onClick:$,className:`text-xl font-medium text-gray-900 dark:text-gray-100 leading-relaxed font-display break-words cursor-pointer transition-all ${Y===0?"line-clamp-4":Y===1?"line-clamp-[20]":""}`,children:e.content}),Q&&r.jsx("button",{onClick:I,className:"text-primary-500 text-base mt-1 font-sans hover:underline cursor-pointer flex items-center gap-1",children:Y===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(zn,{className:"w-4 h-4"})]}):Y===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Ke,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read more ",r.jsx(Ke,{className:"w-4 h-4"})]})})]}),ue&&r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-600 dark:text-purple-400",children:[r.jsx("div",{className:"p-1.5 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M19 14c1.49-1.28 3.6-1.28 5.09 0 1.49 1.28 1.49 3.36 0 4.63-1.49 1.28-3.6 1.28-5.09 0-1.49-1.28-1.49-3.36 0-4.63z"}),r.jsx("path",{d:"M24 6h-6a2 2 0 0 0-2 2v10.17a3 3 0 0 1-.5 1.7l-2 2.83"}),r.jsx("path",{d:"M13 14c1.49-1.28 3.6-1.28 5.09 0 1.49 1.28 1.49 3.36 0 4.63-1.49 1.28-3.6 1.28-5.09 0-1.49-1.28-1.49-3.36 0-4.63z"}),r.jsx("path",{d:"M7 6h6a2 2 0 0 1 2 2v10.17a3 3 0 0 0 .5 1.7l2 2.83"})]})}),r.jsx("span",{className:"text-sm font-semibold uppercase tracking-wide",children:"Prayer Request"})]}),e.scripture&&r.jsxs("div",{className:"flex items-center gap-2 mb-3 ml-1",children:[r.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/40 p-1 rounded text-purple-600 dark:text-purple-400",children:r.jsx(da,{className:"w-3.5 h-3.5"})}),r.jsx("span",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 font-display",children:e.scripture})]}),r.jsxs("p",{onClick:$,className:`text-lg italic text-gray-800 dark:text-gray-200 leading-relaxed border-l-4 border-purple-200 dark:border-purple-800 pl-4 py-2 bg-purple-50/50 dark:bg-purple-900/10 rounded-r-lg break-words cursor-pointer transition-all ${Y===0?"line-clamp-4":Y===1?"line-clamp-[20]":""}`,children:['"',e.content,'"']}),Q&&r.jsx("button",{onClick:I,className:"text-primary-500 text-base mt-1 ml-1 not-italic hover:underline flex items-center gap-1",children:Y===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(zn,{className:"w-4 h-4"})]}):Y===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Ke,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read more ",r.jsx(Ke,{className:"w-4 h-4"})]})})]}),!le&&!ue&&r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{onClick:$,className:`whitespace-pre-wrap break-words text-gray-800 dark:text-gray-200 text-base leading-relaxed cursor-pointer transition-all ${Y===0?"line-clamp-[6]":Y===1?"line-clamp-[20]":""}`,children:e.content}),Q&&r.jsx("button",{onClick:I,className:"text-primary-500 font-medium mt-1 hover:underline flex items-center gap-1",children:Y===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(zn,{className:"w-4 h-4"})]}):Y===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Ke,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read more ",r.jsx(Ke,{className:"w-4 h-4"})]})})]})]}),(e.imageUrl||e.videoUrl)&&r.jsxs("div",{className:"relative mt-3 mb-2 rounded-2xl overflow-hidden bg-gray-100 dark:bg-gray-800 cursor-pointer group/image",onClick:()=>e.imageUrl&&W(!0),children:[e.imageUrl&&r.jsx("img",{src:e.imageUrl,alt:"Post content",className:"w-full h-auto max-h-[600px] object-cover hover:scale-[1.01] transition-transform duration-500"}),e.videoUrl&&r.jsx("video",{src:e.videoUrl,controls:!0,className:"w-full h-full object-cover"}),e.imageUrl&&r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/image:bg-black/10 transition-colors duration-300 pointer-events-none"})]})]}),r.jsx("div",{className:"px-4 sm:px-6 py-3 border-t border-gray-100 dark:border-gray-800/50 bg-gray-50/50 dark:bg-black/20",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-1 sm:gap-4",children:[r.jsxs(M,{variant:"ghost",size:"sm",onClick:xr,disabled:H&&(y||g),title:H&&y?"You've already liked this post":"Like this post",className:`gap-2 hover:bg-pink-50 dark:hover:bg-pink-900/10 transition-colors ${y?`text-pink-500 ${H?"cursor-default opacity-90":""}`:"text-gray-500 dark:text-gray-400"}`,children:[r.jsx(gn,{className:`w-5 h-5 ${y?"fill-current":""} ${g?"scale-125":""} transition-transform`}),r.jsx("span",{className:"font-medium",children:b}),r.jsx("span",{className:"sr-only sm:not-sr-only text-xs sm:text-sm",children:"Likes"})]}),u&&r.jsxs(M,{variant:"ghost",size:"sm",onClick:t,className:`gap-2 hover:bg-blue-50 dark:hover:bg-blue-900/10 ${ue?"text-purple-500 hover:text-purple-600":"text-gray-500 dark:text-gray-400 hover:text-blue-500"}`,children:[ue?r.jsx(Ox,{className:"w-5 h-5"}):r.jsx(lt,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:e.commentCount}),r.jsx("span",{className:"sr-only sm:not-sr-only text-xs sm:text-sm",children:ue?"Prayers":"Comments"})]}),H&&m&&r.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>a(`/post/${e._id}?tab=questions`),className:"gap-2 hover:bg-purple-50 dark:hover:bg-purple-900/10 text-gray-500 dark:text-gray-400 hover:text-purple-500",children:[r.jsx(Md,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:e.questionCount||0}),r.jsx("span",{className:"sr-only sm:not-sr-only text-xs sm:text-sm",children:"Questions"})]})]}),r.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[r.jsx(M,{onClick:qc,variant:"ghost",size:"sm",className:"p-2 text-gray-500 hover:text-primary-500 dark:text-gray-400",children:r.jsx(mi,{className:"w-5 h-5"})}),e.imageUrl&&r.jsx(M,{onClick:Wc,variant:"ghost",size:"sm",className:"p-2 text-gray-500 hover:text-primary-500 dark:text-gray-400",children:r.jsx(Wo,{className:"w-5 h-5"})})]})]})})]}),r.jsx(re,{children:R&&e.imageUrl&&r.jsx(eD,{src:e.imageUrl,alt:"Post content",onClose:()=>W(!1)})}),r.jsx(re,{children:N&&r.jsx(ZL,{onClose:()=>_(!1),isOpen:N,postId:e._id})}),r.jsx(cs,{isOpen:F,onClose:()=>q(!1),onConfirm:tr,title:"Delete Post",description:"Are you sure you want to delete this post? This action cannot be undone.",confirmText:"Delete",variant:"danger"})]})}function Oe(){return r.jsxs("div",{className:"glass rounded-xl p-6 shadow-md animate-pulse",children:[r.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"h-4 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-3 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-3 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsx("div",{className:"h-4 w-full bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-5/6 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-4/6 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-light-border dark:border-dark-border",children:[r.jsx("div",{className:"h-8 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"}),r.jsx("div",{className:"h-8 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"})]})]})}function tD(){return r.jsxs("div",{className:"glass rounded-xl overflow-hidden shadow-lg animate-pulse",children:[r.jsx("div",{className:"h-48 bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"h-6 w-3/4 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-3"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-full bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-5/6 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]})]})}function Ft(){return r.jsxs("div",{className:"glass rounded-xl p-6 animate-pulse",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"h-6 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-8 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"h-4 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"h-4 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]})]})}function Xt(){return r.jsxs("div",{className:"mb-8 animate-pulse",children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})}function aa({count:e=5}){return r.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((t,s)=>r.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg border border-transparent animate-pulse",children:[r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-light-muted/20 dark:bg-dark-muted/20 rounded w-1/3"}),r.jsx("div",{className:"h-3 bg-light-muted/10 dark:bg-dark-muted/10 rounded w-1/2"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("div",{className:"h-5 w-12 bg-light-muted/20 dark:bg-dark-muted/20 rounded-full"}),r.jsx("div",{className:"h-5 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded-full"})]})]},s))})}const rD=f.forwardRef(function(t,s){return r.jsxs("div",{ref:s,className:"glass h-full rounded-3xl p-6 animate-pulse relative overflow-hidden",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-2xl bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsx("div",{className:"h-6 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded-full"})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-6 w-3/4 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-4 bg-light-muted/10 dark:bg-dark-muted/10 rounded"}),r.jsx("div",{className:"h-4 w-1/2 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-4 bg-light-muted/10 dark:bg-dark-muted/10 rounded"}),r.jsx("div",{className:"h-4 w-1/3 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]})]}),r.jsxs("div",{className:"mt-6 flex gap-2",children:[r.jsx("div",{className:"h-10 flex-1 bg-light-muted/10 dark:bg-dark-muted/10 rounded-xl"}),r.jsx("div",{className:"h-10 w-10 bg-light-muted/10 dark:bg-dark-muted/10 rounded-xl"})]})]})});function sD(){return r.jsxs("div",{className:"glass rounded-xl overflow-hidden animate-pulse",children:[r.jsx("div",{className:"h-20 bg-light-muted/10 dark:bg-dark-muted/10"}),r.jsxs("div",{className:"px-6 pb-6 -mt-10 flex flex-col items-center",children:[r.jsx("div",{className:"w-20 h-20 rounded-2xl bg-light-muted/20 dark:bg-dark-muted/20 border-4 border-light-bg dark:border-dark-bg transition-all"}),r.jsx("div",{className:"h-5 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded mt-3"}),r.jsx("div",{className:"h-3 w-20 bg-light-muted/10 dark:bg-dark-muted/10 rounded mt-2"}),r.jsxs("div",{className:"mt-6 w-full grid grid-cols-2 gap-4 border-t border-light-border/30 pt-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded mx-auto"}),r.jsx("div",{className:"h-2 w-12 bg-light-muted/10 dark:bg-dark-muted/10 rounded mx-auto"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded mx-auto"}),r.jsx("div",{className:"h-2 w-12 bg-light-muted/10 dark:bg-dark-muted/10 rounded mx-auto"})]})]})]})]})}function nD(){return r.jsxs("div",{className:"glass rounded-xl p-6 border-emerald-500/10 animate-pulse",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("div",{className:"h-3 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-4 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-light-muted/5 dark:bg-dark-muted/5 border border-light-muted/10 dark:border-dark-muted/10",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-8 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-2 w-20 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsx("div",{className:"w-10 h-10 rounded-xl bg-light-muted/20 dark:bg-dark-muted/20"})]})]})}function aD(){return r.jsxs("div",{className:"glass rounded-xl animate-pulse",children:[r.jsx("div",{className:"p-4 border-b border-light-border/30",children:r.jsx("div",{className:"h-3 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})}),r.jsx("div",{className:"divide-y divide-light-border/20",children:[1,2,3].map(e=>r.jsxs("div",{className:"p-4 space-y-3",children:[r.jsx("div",{className:"h-32 w-full rounded-xl bg-light-muted/10 dark:bg-dark-muted/10"}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{className:"h-4 w-3/4 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-4 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-3 w-full bg-light-muted/10 dark:bg-dark-muted/10 rounded"}),r.jsx("div",{className:"h-3 w-5/6 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsxs("div",{className:"flex justify-between items-center pt-1",children:[r.jsx("div",{className:"h-2 w-20 bg-light-muted/5 dark:bg-dark-muted/5 rounded"}),r.jsx("div",{className:"h-3 w-12 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]})]},e))})]})}function iD(){return r.jsxs("div",{className:"max-w-5xl mx-auto animate-pulse space-y-8",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"h-10 w-40 bg-light-muted/20 dark:bg-dark-muted/20 rounded-xl"}),r.jsx("div",{className:"h-8 w-48 bg-light-muted/10 dark:bg-dark-muted/10 rounded-lg"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs("div",{className:"glass rounded-xl overflow-hidden border-primary-500/10",children:[r.jsx("div",{className:"h-24 bg-light-muted/5 dark:bg-dark-muted/5"}),r.jsxs("div",{className:"px-6 pb-8 -mt-12 flex flex-col items-center",children:[r.jsx("div",{className:"w-24 h-24 rounded-[32px] bg-light-muted/20 dark:bg-dark-muted/20 border-4 border-light-bg dark:border-dark-bg shadow-2xl"}),r.jsx("div",{className:"h-8 w-48 bg-light-muted/20 dark:bg-dark-muted/20 rounded mt-4"}),r.jsx("div",{className:"h-4 w-32 bg-light-muted/10 dark:bg-dark-muted/10 rounded mt-2"}),r.jsxs("div",{className:"mt-8 w-full grid grid-cols-2 gap-4",children:[r.jsx("div",{className:"h-16 bg-light-muted/5 dark:bg-dark-muted/5 rounded-2xl"}),r.jsx("div",{className:"h-16 bg-light-muted/5 dark:bg-dark-muted/5 rounded-2xl"})]})]})]}),r.jsx("div",{className:"glass rounded-xl p-6 h-48 bg-light-muted/5"})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsx("div",{className:"glass h-64 rounded-xl"}),r.jsx("div",{className:"glass h-64 rounded-xl"})]})]})]})}function zN(){return r.jsxs("div",{className:"flex p-1 bg-light-bg/50 dark:bg-dark-bg/50 rounded-xl border border-light-border dark:border-dark-border mb-6 animate-pulse",children:[r.jsx("div",{className:"flex-1 h-10 bg-light-muted/10 dark:bg-dark-muted/10 rounded-lg m-1"}),r.jsx("div",{className:"flex-1 h-10 bg-light-muted/10 dark:bg-dark-muted/10 rounded-lg m-1"})]})}function Tb(){return r.jsx("div",{className:"space-y-4 p-4 animate-pulse",children:[1,2,3,4,5].map(e=>r.jsx("div",{className:`flex ${e%2===0?"justify-end":"justify-start"}`,children:r.jsx("div",{className:`h-12 w-1/2 rounded-2xl bg-light-muted/10 dark:bg-dark-muted/10 ${e%2===0?"rounded-br-md":"rounded-bl-md"}`})},e))})}function _b({count:e=6}){return r.jsx("div",{className:"divide-y divide-light-border/20 animate-pulse",children:[...Array(e)].map((t,s)=>r.jsxs("div",{className:"flex items-center gap-3 p-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-light-muted/20 dark:bg-dark-muted/20"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("div",{className:"h-4 w-1/3 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-3 w-12 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]}),r.jsx("div",{className:"h-3 w-3/4 bg-light-muted/10 dark:bg-dark-muted/10 rounded"})]})]},s))})}function Pp(){return r.jsxs("div",{className:"space-y-6 animate-pulse",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>r.jsxs("div",{className:"glass p-6 rounded-xl",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("div",{className:"h-5 w-5 bg-light-muted/20 dark:bg-dark-muted/20 rounded"}),r.jsx("div",{className:"h-8 w-16 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"h-4 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]},e))}),r.jsx("div",{className:"glass h-96 rounded-xl w-full"})]})}function oD(){return r.jsxs("div",{className:"space-y-6 animate-pulse",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"grid sm:grid-cols-3 gap-6",children:[1,2,3].map(e=>r.jsxs("div",{className:"glass p-6 rounded-xl border-l-4 border-light-muted/20",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"h-4 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-8 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"h-10 w-10 bg-light-muted/20 dark:bg-dark-muted/20 rounded-lg"})]}),r.jsx("div",{className:"h-3 w-40 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]},e))}),r.jsx("div",{className:"h-8 w-48 bg-light-muted/20 dark:bg-dark-muted/20 rounded mt-8 mb-4"}),r.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(e=>r.jsxs("div",{className:"glass p-6 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"h-8 w-8 bg-light-muted/20 dark:bg-dark-muted/20 rounded network-icon"}),r.jsx("div",{className:"h-5 w-24 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]}),r.jsx("div",{className:"h-8 w-20 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2"}),r.jsx("div",{className:"h-3 w-32 bg-light-muted/20 dark:bg-dark-muted/20 rounded"})]},e))})]})}function lD(){return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg animate-pulse",children:[r.jsx("div",{className:"gradient-primary text-white py-8 px-4 md:px-8 opacity-50",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("div",{className:"h-6 w-32 bg-white/20 rounded mb-4"}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20"}),r.jsxs("div",{children:[r.jsx("div",{className:"h-10 w-48 bg-white/20 rounded mb-2"}),r.jsx("div",{className:"h-4 w-64 bg-white/20 rounded"})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(e=>r.jsx("div",{className:"glass p-6 rounded-2xl h-32"},e))})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-8 py-8",children:[r.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[1,2,3,4].map(e=>r.jsx("div",{className:"glass h-64 rounded-2xl"},e))}),r.jsx("div",{className:"glass h-20 rounded-xl"})]})]})}function Vc(e){const{category:t,onCommentClick:s}=e,{user:n}=Z(),[a,i]=f.useState({type:"all"}),[o,l]=f.useState(Date.now()),{results:d,status:c,loadMore:u}=pC(S.posts.getPaginatedFeed,{postType:a.type==="postType"?a.value:void 0,cutoffTime:o,userId:n==null?void 0:n._id},{initialNumItems:10}),m=U(S.posts.getNewPostCount,{postType:a.type==="postType"?a.value:void 0,cutoffTime:o})||0,h=f.useRef(null);f.useEffect(()=>{const y=new IntersectionObserver(([p])=>{p.isIntersecting&&c==="CanLoadMore"&&u(10)},{threshold:.1});return h.current&&y.observe(h.current),()=>y.disconnect()},[c,u]);const[x,g]=f.useState(!1);f.useEffect(()=>{const y=()=>{window.scrollY>2e3?g(!0):g(!1)};return window.addEventListener("scroll",y,{passive:!0}),()=>window.removeEventListener("scroll",y)},[]);const v=()=>{l(Date.now()),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},150)};return c==="LoadingFirstPage"||d===void 0?r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{}),r.jsx(Oe,{})]}):r.jsxs("div",{className:"space-y-6 relative min-h-[50vh]",children:[r.jsx(re,{children:m>0&&r.jsx(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"flex justify-center mb-4 sticky top-24 z-30 pointer-events-none",children:r.jsxs(M,{onClick:v,size:"sm",className:"pointer-events-auto rounded-full shadow-xl bg-gray-900 hover:bg-gray-800 text-white gap-1.5 sm:gap-2 px-4 py-1.5 sm:px-6 sm:py-2 text-xs sm:text-sm border border-green-500/40 backdrop-blur-md",children:[r.jsx(Ng,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"}),m," New ",m===1?"Post":"Posts"]})})}),!t&&r.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide -mx-4 px-4 sm:mx-0 sm:px-0 scroll-smooth",children:[r.jsx("button",{onClick:()=>i({type:"all"}),className:`whitespace-nowrap px-3 py-2 sm:px-6 sm:py-2.5 rounded-full font-bold transition-all text-xs sm:text-sm border shadow-sm active:scale-95 ${a.type==="all"?"bg-primary-500 text-white border-primary-500 shadow-primary-500/20":"bg-white dark:bg-dark-card text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:"All Posts"}),r.jsx("button",{onClick:()=>i({type:"postType",value:"prayer"}),className:`whitespace-nowrap px-3 py-2 sm:px-6 sm:py-2.5 rounded-full font-bold transition-all text-xs sm:text-sm border shadow-sm active:scale-95 ${a.type==="postType"&&a.value==="prayer"?"bg-purple-500 text-white border-purple-500 shadow-purple-500/20":"bg-white dark:bg-dark-card text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:"Prayers"}),r.jsx("button",{onClick:()=>i({type:"postType",value:"question"}),className:`whitespace-nowrap px-3 py-2 sm:px-6 sm:py-2.5 rounded-full font-bold transition-all text-xs sm:text-sm border shadow-sm active:scale-95 ${a.type==="postType"&&a.value==="question"?"bg-blue-500 text-white border-blue-500 shadow-blue-500/20":"bg-white dark:bg-dark-card text-gray-600 dark:text-gray-300 border-gray-200 dark:border-gray-800 hover:bg-gray-50 dark:hover:bg-white/5"}`,children:"Questions"})]}),d.length===0?r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No posts found."})}):r.jsx("div",{className:"space-y-4",children:d.map(y=>r.jsx(Ip,{post:y,onCommentClick:()=>s==null?void 0:s(y),hasUserLiked:y.hasLiked},y._id))}),r.jsx("div",{ref:h,className:"h-20 flex items-center justify-center py-4",children:c==="LoadingMore"&&r.jsxs("div",{className:"flex items-center gap-2 text-light-muted dark:text-dark-muted",children:[r.jsx(Wn,{className:"w-5 h-5 animate-spin text-primary-500"}),r.jsx("span",{className:"text-sm font-medium",children:"Loading more..."})]})}),r.jsx(re,{children:x&&r.jsx(T.button,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-20 right-4 md:bottom-10 md:right-10 p-3 md:p-4 rounded-full bg-gray-900 text-white shadow-2xl z-40 hover:bg-gray-800 transition-all group border border-green-500/40",children:r.jsx(Ng,{className:"w-5 h-5 md:w-6 md:h-6 group-hover:-translate-y-1 transition-transform"})})})]})}function dD({id:e,title:t,description:s,imageUrl:n,creatorRole:a="admin",isActive:i,category:o}){const{user:l}=Z(),d=de(),c=V(S.announcements.updateAnnouncement),u=V(S.announcements.deleteAnnouncement),[m,h]=f.useState(!1),x=a==="super_admin",g=l&&(l.role==="admin"||l.role==="super_admin"),v=async p=>{if(p.stopPropagation(),!!g)try{await c({adminId:l._id,announcementId:e,isActive:!i})}catch(b){console.error("Failed to toggle visibility:",b)}},y=async p=>{if(p.stopPropagation(),!(!g||!window.confirm("Are you sure you want to delete this announcement?"))){h(!0);try{await u({adminId:l._id,announcementId:e})}catch(b){console.error("Failed to delete announcement:",b),h(!1)}}};return m?null:r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:i?1:.6,y:0},onClick:()=>d(`/announcement/${e}`),className:`glass rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 border-2 relative group cursor-pointer ${x?"border-secondary-500/50 shadow-secondary-500/10":"border-transparent"} ${i?"":"grayscale"}`,children:[g&&r.jsxs("div",{className:"absolute top-4 right-4 z-20 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:v,className:"p-2 rounded-full bg-black/50 text-white hover:bg-black/70 backdrop-blur-md transition-colors",title:i?"Hide from users":"Show to users",children:i?r.jsx(Tt,{className:"w-4 h-4"}):r.jsx(qo,{className:"w-4 h-4"})}),r.jsx("button",{onClick:y,className:"p-2 rounded-full bg-red-500/80 text-white hover:bg-red-600 backdrop-blur-md transition-colors",title:"Delete Announcement",children:r.jsx(Dr,{className:"w-4 h-4"})})]}),!i&&g&&r.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-20 bg-black/80 text-white px-4 py-2 rounded-lg font-bold backdrop-blur-md border border-white/20",children:"HIDDEN"}),r.jsxs("div",{className:"relative h-48 md:h-60 overflow-hidden",children:[r.jsx("img",{src:n,alt:t,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),r.jsx("div",{className:`absolute inset-0 bg-gradient-to-t ${x?"from-secondary-900/80":"from-black/60"} to-transparent`}),r.jsxs("div",{className:"absolute bottom-3 left-3 md:bottom-4 md:left-4 flex items-center gap-2",children:[x?r.jsxs("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-secondary-500 text-white text-[9px] md:text-[10px] font-bold flex items-center gap-1 md:gap-1.5 shadow-lg",children:[r.jsx(Cw,{className:"w-2.5 h-2.5 md:w-3 md:h-3 fill-current"}),"OFFICIAL ANNOUNCEMENT"]}):r.jsxs("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-primary-500 text-white text-[9px] md:text-[10px] font-bold flex items-center gap-1 md:gap-1.5 shadow-lg",children:[r.jsx(_C,{className:"w-2.5 h-2.5 md:w-3 md:h-3"}),"ADMIN UPDATE"]}),o&&o!=="General"&&r.jsx("span",{className:"px-2 py-0.5 md:px-3 md:py-1 rounded-full bg-blue-500 text-white text-[9px] md:text-[10px] font-bold shadow-lg uppercase",children:o})]})]}),r.jsxs("div",{className:`p-4 md:p-6 ${x?"bg-secondary-500/5 dark:bg-secondary-500/5":""}`,children:[r.jsx("h3",{className:`text-lg md:text-2xl font-black mb-2 md:mb-3 font-display tracking-tight group-hover:text-primary-500 transition-colors ${x?"text-secondary-600 dark:text-secondary-400":"text-light-text dark:text-dark-text"}`,children:t}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted leading-relaxed line-clamp-2 text-xs md:text-sm",children:s}),r.jsxs("div",{className:"mt-4 md:mt-6 pt-3 md:pt-4 border-t border-light-border/20 dark:border-dark-border/20 flex items-center justify-between",children:[r.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-light-muted/60 uppercase tracking-widest italic",children:"Read More Details"}),r.jsx("div",{className:"w-6 h-6 md:w-8 md:h-8 rounded-full bg-primary-500/10 flex items-center justify-center text-primary-500 group-hover:translate-x-1 transition-transform",children:r.jsx(_t,{className:"w-3 h-3 md:w-4 md:h-4"})})]})]})]})}function cD({announcements:e}){const[t,s]=f.useState(0);return f.useEffect(()=>{if(e.length<=1)return;const n=setInterval(()=>{s(a=>(a+1)%e.length)},5e3);return()=>clearInterval(n)},[e.length]),!e||e.length===0?null:r.jsxs("div",{className:"relative overflow-hidden w-full",children:[r.jsx("div",{className:"relative w-full",children:r.jsx(re,{mode:"wait",children:r.jsx(T.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.5,ease:"easeInOut"},className:"w-full",children:r.jsx(dD,{id:e[t]._id,title:e[t].title,description:e[t].description,imageUrl:e[t].imageUrl,creatorRole:e[t].creatorRole,isActive:e[t].isActive,category:e[t].category})},t)})}),e.length>1&&r.jsx("div",{className:"absolute bottom-4 right-4 flex gap-1.5 z-10",children:e.map((n,a)=>r.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${a===t?"bg-white w-4":"bg-white/50"}`},a))})]})}function WN(){const e=jt(),t=de(),{user:s}=Z();if(!(s!=null&&s._id))return null;const n=U(S.users.getUserStats,{userId:s._id}),a=U(S.stats.getBadgeCounts,{userId:s._id}),i=V(S.users.updateLastViewed),o=async(x,g)=>{g&&s&&await i({userId:s._id,field:g}),t(x)},l=x=>a?x==="Messages"?a.messages>0?a.messages:null:x==="Banking"?a.banking>0?!0:null:x==="Leaderboard"&&a.leaderboard>0?!0:null:null;if(!s)return null;const d=[{path:"/feed",label:"Home Feed",icon:Gr,color:"text-primary-500"},{path:"/teachings",label:"All Posts",icon:da,color:"text-blue-500"},{path:"/chat",label:"Messages",icon:lt,color:"text-indigo-500"},{path:"/banking",label:"Banking",icon:Ho,color:"text-emerald-500"},{path:"/leaderboard",label:"Leaderboard",icon:ve,color:"text-amber-500"},{path:"/diamond-challenge",label:"Diamond Challenge",icon:Nr,color:"text-cyan-500"},{path:"/saved-posts",label:"Saved Posts",icon:Mx,color:"text-purple-500"}],c=[{path:"/admin",label:"Admin Hub",icon:We,color:"text-orange-500"},{path:"/admin/roles",label:"Role Manager",icon:We,color:"text-red-500"}],u=[{path:"/board",label:"Board Dash",icon:rn,color:"text-amber-500"}],m=s.role==="admin"||s.role==="super_admin",h=s.role==="board_member";return r.jsxs("aside",{className:"hidden lg:block space-y-6 sticky top-24 max-h-[calc(100vh-120px)] overflow-y-auto pb-10 pr-1 transition-all custom-scrollbar-premium",children:[r.jsx("style",{children:`
                .custom-scrollbar-premium::-webkit-scrollbar {
                    width: 4px;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #ffffff;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #111827;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #374151;
                    border-radius: 10px;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #064e3b;
                }
                .custom-scrollbar-premium {
                    scrollbar-width: thin;
                    scrollbar-color: #374151 #ffffff;
                }
                .dark .custom-scrollbar-premium {
                    scrollbar-color: #064e3b #111827;
                }
            `}),n===void 0?r.jsx(sD,{}):r.jsxs(D,{glass:!0,className:"overflow-hidden border-primary-500/10 hover:border-primary-500/30 transition-all duration-300",children:[r.jsx("div",{className:"h-20 bg-gradient-to-br from-primary-500/20 via-primary-500/5 to-transparent relative",children:r.jsx("div",{className:"absolute inset-0 bg-grid-white/5 opacity-20"})}),r.jsxs(O,{className:"px-6 pb-6 -mt-10 relative",children:[r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gradient-to-br from-primary-500 to-secondary-500 p-1 shadow-xl shadow-primary-500/20 mb-3",children:r.jsx("div",{className:"w-full h-full rounded-2xl bg-white dark:bg-dark-bg overflow-hidden flex items-center justify-center font-bold text-2xl text-gradient",children:s.avatarUrl?r.jsx("img",{src:s.avatarUrl,alt:s.name,className:"w-full h-full object-cover"}):s.name[0]})}),r.jsx("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text truncate w-full",children:s.name}),r.jsx("p",{className:"text-[10px] font-bold text-primary-500 uppercase tracking-widest mt-1",children:s.role.replace("_"," ")})]}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-light-border/50 dark:border-dark-border/50 grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm font-bold",children:(n==null?void 0:n.totalPosts)||0}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-black",children:"Posts"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm font-bold",children:(n==null?void 0:n.totalRewards)||0}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-black",children:"Rewards"})]})]})]})]}),r.jsx(D,{glass:!0,className:"p-2",children:r.jsxs("nav",{className:"space-y-1",children:[d.map(x=>{const g=x.icon,v=e.pathname===x.path;return r.jsxs("button",{onClick:()=>{const y=x.label==="Banking"?"lastViewedBanking":x.label==="Leaderboard"?"lastViewedLeaderboard":void 0;o(x.path,y)},className:`
                                    w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 group
                                    ${v?"bg-primary-500 text-white shadow-lg shadow-primary-500/30 font-bold":"text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card"}
                                `,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(g,{className:`w-5 h-5 ${v?"text-white":x.color} transition-transform group-hover:scale-110`}),r.jsx("span",{className:"text-sm font-medium",children:x.label})]}),l(x.label)===!0?r.jsx("div",{className:`w-2 h-2 rounded-full ${v?"bg-white":"bg-primary-500 shadow-[0_0_8px_rgba(249,115,22,0.5)]"}`}):typeof l(x.label)=="number"?r.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-[10px] font-bold ${v?"bg-white text-primary-500":"bg-primary-500 text-white"}`,children:l(x.label)}):v&&r.jsx(T.div,{layoutId:"activeFeedIndicator",className:"w-1.5 h-1.5 rounded-full bg-white shadow-[0_0_8px_white]"})]},x.path)}),(m||h)&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-light-border/50 dark:border-dark-border/50 space-y-1",children:[r.jsx("p",{className:"px-4 mb-2 text-[10px] font-black text-light-muted dark:text-dark-muted uppercase tracking-[0.2em]",children:"Management"}),m&&c.map(x=>{const g=x.icon,v=e.pathname===x.path;return r.jsxs(te,{to:x.path,className:`
                                            flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                            ${v?"bg-primary-500 text-white shadow-lg":"text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card"}
                                        `,children:[r.jsx(g,{className:`w-5 h-5 ${v?"text-white":x.color} transition-transform group-hover:scale-110`}),r.jsx("span",{className:"text-sm font-medium",children:x.label})]},x.path)}),(m||h)&&u.map(x=>{const g=x.icon,v=e.pathname===x.path;return r.jsxs(te,{to:x.path,className:`
                                            flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                            ${v?"bg-primary-500 text-white shadow-lg":"text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card"}
                                        `,children:[r.jsx(g,{className:`w-5 h-5 ${v?"text-white":x.color} transition-transform group-hover:scale-110`}),r.jsx("span",{className:"text-sm font-medium",children:x.label})]},x.path)})]})]})}),r.jsxs(D,{glass:!0,className:"p-6",children:[r.jsx("h4",{className:"font-bold text-xs uppercase tracking-widest text-light-muted mb-4",children:"Quick Links"}),r.jsxs("div",{className:"flex flex-col gap-2",children:[r.jsx(te,{to:"/profile",className:"px-3 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-xs font-bold hover:border-primary-500 transition-colors flex items-center justify-center",children:"My Profile"}),r.jsx(te,{to:"/notifications",className:"px-3 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-xs font-bold hover:border-primary-500 transition-colors flex items-center justify-center",children:"Notifications"})]})]})]})}function qN(){var n;const e=de(),t=U(S.users.getTickerData),s=U(S.announcements.getAnnouncements,{});return r.jsxs("aside",{className:"hidden xl:block space-y-6 sticky top-24 max-h-[calc(100vh-120px)] overflow-y-auto pb-10 pr-1 transition-all custom-scrollbar-premium",children:[r.jsx("style",{children:`
                .custom-scrollbar-premium::-webkit-scrollbar {
                    width: 4px;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #ffffff;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-track {
                    background: #111827;
                }
                .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #374151;
                    border-radius: 10px;
                }
                .dark .custom-scrollbar-premium::-webkit-scrollbar-thumb {
                    background: #064e3b;
                }
                .custom-scrollbar-premium {
                    scrollbar-width: thin;
                    scrollbar-color: #374151 #ffffff;
                }
                .dark .custom-scrollbar-premium {
                    scrollbar-color: #064e3b #111827;
                }
            `}),t===void 0?r.jsx(nD,{}):r.jsxs(D,{glass:!0,className:"overflow-hidden border-emerald-500/10 hover:border-emerald-500/30 transition-all duration-300",children:[r.jsx(fe,{className:"pb-2",children:r.jsxs(ge,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-light-muted flex items-center justify-between",children:["Realtime Stats",r.jsx(dn,{className:"w-3.5 h-3.5 text-emerald-500"})]})}),r.jsxs(O,{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-emerald-500/5 border border-emerald-500/10",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-2xl font-black text-emerald-500 font-display",children:((n=t==null?void 0:t.totalCount)==null?void 0:n.toLocaleString())||"..."}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider",children:"Total Members"})]}),r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center",children:r.jsx(ke,{className:"w-5 h-5 text-emerald-500"})})]}),r.jsx("div",{className:"pt-2",children:r.jsx(mj,{})})]})]}),s===void 0?r.jsx(aD,{}):r.jsxs(D,{glass:!0,className:"border-primary-500/10",children:[r.jsx(fe,{className:"pb-3 border-b border-light-border/30 dark:border-dark-border/30",children:r.jsxs(ge,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-light-muted flex items-center justify-between",children:["Announcements",r.jsx(Io,{className:"w-3.5 h-3.5 text-primary-500"})]})}),r.jsx(O,{className:"p-0",children:r.jsx("div",{className:"divide-y divide-light-border/30 dark:divide-dark-border/30",children:s&&s.length>0?s.slice(0,4).map(a=>{var i;return r.jsxs("div",{onClick:()=>e(`/announcement/${a._id}`),className:"p-4 hover:bg-light-card/50 dark:hover:bg-dark-card/50 transition-colors group relative overflow-hidden cursor-pointer",children:[a.imageUrl&&r.jsx("div",{className:"h-32 w-full rounded-xl overflow-hidden mb-3 border border-light-border/20 dark:border-dark-border/20",children:r.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),r.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[r.jsx("h4",{className:"text-sm font-bold text-light-text dark:text-dark-text group-hover:text-primary-500 transition-colors",children:a.title}),r.jsx(G,{variant:"outline",className:"text-[8px] px-1.5 py-0 bg-primary-500/10 text-primary-500 border-primary-500/20",children:a.category||"New"})]}),r.jsx("p",{className:"text-xs text-light-muted line-clamp-2 leading-relaxed mb-3",children:a.description}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-[10px] font-bold text-light-muted/60 uppercase tracking-tighter italic",children:["By ",((i=a.creatorRole)==null?void 0:i.replace("_"," "))||"Admin"]}),r.jsxs("button",{className:"text-[10px] font-bold text-primary-500 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:["Read More ",r.jsx(EC,{className:"w-2.5 h-2.5"})]})]})]},a._id)}):r.jsxs("div",{className:"p-8 text-center",children:[r.jsx(Io,{className:"w-8 h-8 text-light-muted/20 mx-auto mb-2"}),r.jsx("p",{className:"text-xs text-light-muted italic",children:"No official announcements yet."})]})})})]})]})}function uD(){const e=de(),{user:t}=Z();return t?r.jsx(D,{glass:!0,className:"hidden md:block mb-6 overflow-hidden border-primary-500/10 hover:border-primary-500/20 transition-all duration-300 group",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-primary-500 to-secondary-500 p-[2px] shadow-lg shadow-primary-500/20 shrink-0",children:r.jsx("div",{className:"w-full h-full rounded-2xl bg-white dark:bg-dark-bg overflow-hidden flex items-center justify-center font-bold text-xl text-gradient",children:t.avatarUrl?r.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full object-cover"}):t.name[0]})}),r.jsxs("button",{onClick:()=>e("/create-post"),className:"flex-1 h-12 px-6 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/50 dark:border-dark-border/50 text-left text-light-muted dark:text-dark-muted hover:bg-light-bg dark:hover:bg-dark-bg hover:border-primary-500/30 transition-all text-base font-medium flex items-center justify-between group/input",children:[r.jsxs("span",{children:["What's on your mind, ",t.name.split(" ")[0],"?"]}),r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-xl bg-primary-500 text-white text-[10px] font-bold uppercase tracking-wider group-hover/input:scale-105 transition-transform",children:[r.jsx(mt,{className:"w-3 h-3"})," Post"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-6 border-t border-light-border/20 dark:border-dark-border/20",children:[r.jsxs("button",{onClick:()=>e("/create-post"),className:"flex items-center justify-center gap-2 p-3 rounded-xl hover:bg-red-500/10 transition-colors group/btn",children:[r.jsx(tn,{className:"w-5 h-5 text-red-500 group-hover/btn:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-bold text-light-muted dark:text-dark-muted group-hover/btn:text-red-500",children:"Media"})]}),r.jsxs("button",{onClick:()=>e("/create-post"),className:"flex items-center justify-center gap-2 p-3 rounded-xl hover:bg-emerald-500/10 transition-colors group/btn",children:[r.jsx(HC,{className:"w-5 h-5 text-emerald-500 group-hover/btn:scale-110 transition-transform"}),r.jsx("span",{className:"text-sm font-bold text-light-muted dark:text-dark-muted group-hover/btn:text-emerald-500",children:"Activity"})]})]})]})}):null}function HN(){var v;const{user:e}=Z(),t=U(S.polls.getActivePoll,e?{userId:e._id}:"skip"),s=V(S.polls.vote),[n,a]=f.useState(null),[i,o]=f.useState(!1),[l,d]=f.useState(""),[c,u]=f.useState(!1);f.useEffect(()=>{if(!t||!t.expiresAt)return;const y=()=>{const b=Date.now(),w=t.expiresAt-b;if(w<=0)d("Ended");else{const k=Math.floor(w/36e5),j=Math.floor(w%(1e3*60*60)/(1e3*60));d(`${k}h ${j}m`)}};y();const p=setInterval(y,6e4);return()=>clearInterval(p)},[t]);const[m,h]=f.useState(null),x=async()=>{if(!(!e||!t||!n)){o(!0),h(null);try{await s({pollId:t._id,userId:e._id,selectedOptionId:n}),u(!0)}catch(y){console.error(y),h(y.message||"Failed to submit vote")}finally{o(!1)}}};if(t===void 0||t===null)return null;const g=Date.now()>t.expiresAt;return r.jsxs(D,{glass:!0,className:"border-primary-500/20 overflow-hidden relative mb-6",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary-500 to-secondary-500"}),r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-2",children:[r.jsxs("div",{className:"flex-1 cursor-pointer",onClick:()=>u(!c),children:[r.jsxs("h3",{className:"text-lg sm:text-xl font-bold font-display text-gradient leading-tight flex items-center gap-2",children:["Weekly Wisdom Game",c?r.jsx(zn,{className:"w-5 h-5 text-light-muted"}):r.jsx(Ke,{className:"w-5 h-5 text-light-muted"})]}),r.jsx("p",{className:"text-xs sm:text-sm text-light-muted dark:text-dark-muted mt-1",children:c?"Test your knowledge & earn Rubies":"Tap to reveal the weekly question"})]}),r.jsxs("div",{className:"flex items-center gap-2 self-start sm:self-auto flex-wrap",children:[r.jsxs("div",{className:"flex items-center gap-1.5 bg-primary-50 dark:bg-primary-900/20 px-2.5 py-1.5 rounded-full border border-primary-100 dark:border-primary-900/50",children:[r.jsx(Ze,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-primary-600 dark:text-primary-400"}),r.jsx("span",{className:"text-xs font-bold text-primary-700 dark:text-primary-300 font-mono",children:l})]}),r.jsxs(te,{to:"/leaderboard",className:"flex items-center gap-1.5 bg-light-card dark:bg-dark-card hover:bg-light-bg dark:hover:bg-dark-bg px-2.5 py-1.5 rounded-full border border-light-border dark:border-dark-border transition-colors",children:[r.jsx(IC,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-light-muted dark:text-dark-muted"}),r.jsx("span",{className:"text-xs font-bold text-light-muted dark:text-dark-muted",children:"Leadersboard"})]})]})]}),r.jsx(re,{children:c&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsxs("div",{className:"pt-4 border-t border-light-border/50 dark:border-dark-border/50 mt-4",children:[r.jsx("h4",{className:"text-lg font-medium mb-6 leading-relaxed",children:t.question}),r.jsx("div",{className:"space-y-4",children:t.hasVoted?r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-500",children:[r.jsx("div",{className:"grid grid-cols-2 gap-3",children:t.options.map(y=>{var j;const p=((j=t.userVote)==null?void 0:j.selectedOptionId)===y.id,b=t.correctOptionId===y.id,w=t.totalVotes>0?Math.round(y.voteCount/t.totalVotes*100):0;let k="bg-light-bg/30 dark:bg-dark-bg/30 border-light-border dark:border-dark-border";return b?k="bg-green-500/10 border-green-500/50":p&&!b&&(k="bg-red-500/10 border-red-500/50"),r.jsxs("div",{className:J("relative p-3 rounded-xl border overflow-hidden min-h-[6rem] flex flex-col justify-center",k),children:[r.jsx(T.div,{initial:{height:0},animate:{height:`${w}%`},transition:{duration:1,ease:"easeOut",delay:.2},className:J("absolute bottom-0 left-0 w-full opacity-10",b?"bg-green-500":p?"bg-red-500":"bg-gray-400")}),r.jsxs("div",{className:"relative z-10 text-center",children:[r.jsxs("div",{className:"flex justify-center mb-1",children:[b&&r.jsx(Kt,{className:"w-5 h-5 text-green-500"}),p&&!b&&r.jsx(ps,{className:"w-5 h-5 text-red-500"})]}),r.jsx("span",{className:J("block text-sm font-medium leading-tight mb-1",b?"text-green-600 dark:text-green-400":""),children:y.text}),r.jsxs("span",{className:"font-bold text-lg",children:[w,"%"]})]})]},y.id)})}),r.jsxs("div",{className:"mt-6 p-4 rounded-xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10 border border-primary-500/20 text-center relative overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-white/5 opacity-50 backdrop-blur-[1px]"}),r.jsx("div",{className:"relative z-10",children:(v=t.userVote)!=null&&v.isCorrect?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-center mb-2",children:r.jsx(ve,{className:"w-8 h-8 text-yellow-500 fill-yellow-500 animate-bounce"})}),r.jsx("h5",{className:"font-bold text-lg text-primary-600 dark:text-primary-400",children:"Correct! +1 Ruby"}),r.jsx("p",{className:"text-xs text-light-muted",children:"Added to Silver Pool"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"flex justify-center mb-2",children:r.jsx(Tr,{className:"w-8 h-8 text-primary-400"})}),r.jsx("h5",{className:"font-bold text-lg text-light-text dark:text-dark-text",children:"Good Try! +0.3 Ruby"}),r.jsx("p",{className:"text-xs text-light-muted",children:"Participation Reward Added"})]})})]}),r.jsxs("div",{className:"text-center text-xs text-light-muted mt-2",children:["Total Votes: ",t.totalVotes]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3",children:t.options.map(y=>r.jsxs("button",{onClick:()=>!g&&a(y.id),disabled:g,className:J("w-full p-4 rounded-xl text-left transition-all duration-200 border relative overflow-hidden group outline-none focus:ring-2 focus:ring-primary-500",n===y.id?"bg-primary-500 text-white border-primary-600 shadow-lg shadow-primary-500/25":"bg-light-bg/50 dark:bg-dark-bg/50 border-light-border dark:border-dark-border hover:border-primary-300 dark:hover:border-primary-700 hover:bg-light-bg dark:hover:bg-dark-bg"),children:[r.jsx("span",{className:"relative z-10 font-medium",children:y.text}),n===y.id&&r.jsx(T.div,{layoutId:"selected-indicator",className:"absolute inset-0 bg-primary-500 z-0",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},y.id))}),m&&r.jsxs("div",{className:"mt-4 p-3 rounded-xl bg-red-500/10 border border-red-500/20 text-red-500 text-xs text-center flex items-center justify-center gap-2",children:[r.jsx(Tr,{className:"w-4 h-4"}),m]}),r.jsx(M,{onClick:x,disabled:!n||i||g,className:"w-full mt-4 bg-gradient-to-r from-primary-600 to-primary-500 hover:from-primary-700 hover:to-primary-600 shadow-xl shadow-primary-500/20",size:"lg",isLoading:i,children:g?"Poll Closed":"Submit Vote"})]})})]})})})]})]})}function mD({announcement:e,showGame:t}){const s=de(),{user:n}=Z(),[a,i]=f.useState(!1),[o,l]=f.useState("menu"),d=U(S.polls.getActivePoll,n?{userId:n._id}:"skip"),c=U(S.wordUnderPressure.getActivePassageStatus,n?{userId:n._id}:"skip"),u=d!=null,m=(c==null?void 0:c.hasActivePassage)===!0,h=u&&!d.hasVoted,x=m&&!c.rewardClaimed,g=(h?1:0)+(x?1:0),v=u||m;return!e&&(!t||!v)?null:r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"fixed top-20 left-4 z-40 flex flex-col gap-3 animate-in fade-in zoom-in duration-300",children:[e&&r.jsx("div",{onClick:()=>s(`/announcement/${e._id}`),className:"cursor-pointer",children:r.jsxs("div",{className:"relative group w-12 h-12",children:[r.jsx("div",{className:"absolute -inset-[3px] bg-gradient-to-tr from-yellow-500 via-orange-500 to-red-500 rounded-full opacity-90 group-hover:opacity-100 transition-opacity animate-pulse"}),r.jsx("div",{className:"absolute -inset-[1px] bg-light-bg dark:bg-dark-bg rounded-full z-0"}),r.jsx("div",{className:"relative w-full h-full rounded-full overflow-hidden z-10 border border-black/10 dark:border-white/10",children:r.jsx("img",{src:e.imageUrl,alt:e.title,className:"w-full h-full object-cover"})})]})}),t&&v&&r.jsx("div",{onClick:()=>{l("menu"),i(!0)},className:"cursor-pointer",children:r.jsxs("div",{className:"relative group w-10 h-10 ml-1",children:[r.jsx("div",{className:J("absolute -inset-[2px] rounded-full opacity-90 group-hover:opacity-100 transition-all duration-500",g>0?"bg-gradient-to-tr from-emerald-500 via-indigo-500 to-purple-500 animate-pulse":"bg-light-border dark:bg-dark-border")}),r.jsx("div",{className:"absolute -inset-[1px] bg-light-bg dark:bg-dark-bg rounded-full z-0"}),r.jsx("div",{className:"relative w-full h-full rounded-full overflow-hidden z-10 border border-black/10 dark:border-white/10 bg-white dark:bg-gray-900 flex items-center justify-center",children:r.jsx(ve,{className:J("w-5 h-5",g>0?"text-indigo-500":"text-light-muted opacity-50")})}),g>0&&r.jsx("div",{className:"absolute -top-1 -right-1 z-20 bg-red-500 text-white text-[8px] font-bold px-1.5 py-0.5 rounded-full border-2 border-light-bg dark:border-dark-bg animate-bounce shadow-lg",children:g})]})})]}),r.jsx(re,{children:a&&r.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(!1),className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},className:"relative w-full max-w-lg z-10 max-h-[90vh] overflow-y-auto custom-scrollbar rounded-[2.5rem]",children:[r.jsx(re,{mode:"wait",children:o==="menu"?r.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"bg-light-card dark:bg-dark-card rounded-[2.5rem] p-8 border border-light-border dark:border-dark-border shadow-2xl space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h2",{className:"text-2xl font-display font-bold text-gradient",children:"Active Challenges"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Choose a quest to earn Rubies"})]}),r.jsxs("div",{className:"grid gap-4",children:[u&&r.jsxs("button",{onClick:()=>l("poll"),className:J("group flex items-center gap-4 p-5 rounded-3xl border transition-all duration-300 text-left",h?"bg-primary-500/5 border-primary-500/20 hover:bg-primary-500/10 hover:border-primary-500/40":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border opacity-60"),children:[r.jsx("div",{className:J("w-12 h-12 rounded-2xl flex items-center justify-center transition-colors",h?"bg-primary-500 text-white":"bg-light-muted/10 text-light-muted"),children:r.jsx(_w,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold",children:"Weekly Wisdom"}),r.jsx("p",{className:"text-xs text-light-muted",children:h?"Earn up to 1 Ruby":"Poll completed"})]}),h?r.jsx(_t,{className:"w-5 h-5 text-primary-500 transform group-hover:translate-x-1 transition-transform"}):r.jsx(et,{className:"w-5 h-5 text-green-500"})]}),m&&r.jsxs("button",{onClick:()=>s("/diamond-challenge"),className:J("group flex items-center gap-4 p-5 rounded-3xl border transition-all duration-300 text-left",x?"bg-emerald-500/5 border-emerald-500/20 hover:bg-emerald-500/10 hover:border-emerald-500/40":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border opacity-60"),children:[r.jsx("div",{className:J("w-12 h-12 rounded-2xl flex items-center justify-center transition-colors",x?"bg-emerald-500 text-white":"bg-light-muted/10 text-light-muted"),children:r.jsx(Nr,{className:"w-6 h-6"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-bold",children:"Diamond Challenge"}),r.jsx("p",{className:"text-xs text-light-muted",children:x?"Earn up to 11.5 Rubies":"Challenge participated"})]}),x?r.jsx(_t,{className:"w-5 h-5 text-emerald-500 transform group-hover:translate-x-1 transition-transform"}):r.jsx(et,{className:"w-5 h-5 text-green-500"})]})]})]},"menu"):o==="poll"?r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:[r.jsx(HN,{}),r.jsx(M,{variant:"ghost",className:"mt-4 text-xs mx-auto block font-bold text-light-muted",onClick:()=>l("menu"),children:"Back to Menu"})]},"poll"):null}),r.jsx("button",{onClick:()=>i(!1),className:"absolute top-3 right-3 md:-top-12 md:-right-12 w-8 h-8 md:w-10 md:h-10 rounded-full bg-black/20 md:bg-white/10 hover:bg-black/30 md:hover:bg-white/20 flex items-center justify-center text-white backdrop-blur-md transition-colors border border-white/10 z-50",children:r.jsx(Ae,{className:"w-5 h-5 md:w-6 md:h-6"})})]})]})})]})}function hD(){const{user:e,isLoading:t}=Z(),s=de(),n=U(S.announcements.getAnnouncements,e?{userId:e._id}:"skip"),a=f.useRef(null),i=f.useRef(null),[o,l]=f.useState(!1),[d,c]=f.useState(!1);return f.useEffect(()=>{const u=new IntersectionObserver(m=>{m.forEach(h=>{h.target===a.current&&l(!h.isIntersecting&&h.boundingClientRect.top<0),h.target===i.current&&c(!h.isIntersecting&&h.boundingClientRect.top<0)})},{threshold:0});return a.current&&u.observe(a.current),i.current&&u.observe(i.current),()=>u.disconnect()},[n]),t?r.jsx("div",{className:"min-h-screen py-4 md:py-8 bg-light-bg dark:bg-dark-bg",children:r.jsx("div",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsx("div",{className:"hidden lg:block lg:col-span-4 xl:col-span-3",children:r.jsx("div",{className:"h-96 rounded-3xl bg-light-card/50 dark:bg-dark-card/50 animate-pulse"})}),r.jsxs("div",{className:"lg:col-span-8 xl:col-span-6 space-y-8",children:[r.jsx("div",{className:"h-40 rounded-3xl bg-light-card/50 dark:bg-dark-card/50 animate-pulse"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]}),r.jsx("div",{className:"hidden xl:block xl:col-span-3",children:r.jsx("div",{className:"h-96 rounded-3xl bg-light-card/50 dark:bg-dark-card/50 animate-pulse"})})]})})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 bg-light-bg/50 dark:bg-dark-bg/50",children:r.jsx("div",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsx("div",{className:"hidden lg:block lg:col-span-4 xl:col-span-3",children:r.jsx(WN,{})}),r.jsx("div",{className:"lg:col-span-8 xl:col-span-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto xl:max-w-none",children:[r.jsx(uD,{}),n&&n.length>0&&r.jsx("div",{ref:a,className:"xl:hidden mb-8",children:r.jsx(cD,{announcements:n})}),r.jsx("div",{ref:i,className:"mb-8",children:r.jsx(HN,{})}),r.jsx(mD,{announcement:o&&n&&n.length>0?n[0]:null,showGame:d}),r.jsx(Vc,{onCommentClick:u=>s(`/post/${u._id}`)})]})}),r.jsx("div",{className:"hidden xl:block xl:col-span-3",children:r.jsx(qN,{})})]})})}):r.jsx(Ee,{to:"/login",replace:!0})}function Xe(){const e=de();return r.jsxs("button",{onClick:()=>e(-1),className:"flex fixed top-20 left-4 z-40 p-3 rounded-full bg-light-card/80 dark:bg-dark-card/80 backdrop-blur-md border border-light-border dark:border-dark-border shadow-xl text-light-muted dark:text-dark-muted hover:text-primary-500 dark:hover:text-primary-400 transition-all hover:scale-110 active:scale-95 group focus:outline-none focus:ring-2 focus:ring-primary-500",title:"Go Back",children:[r.jsx(ur,{className:"w-6 h-6"}),r.jsx("span",{className:"sr-only",children:"Back"})]})}function xD(){const{user:e}=Z(),t=U(S.posts.getSavedPosts,e?{userId:e._id}:"skip");return e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 bg-light-bg/50 dark:bg-dark-bg/50",children:r.jsx("div",{className:"max-w-[1440px] mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[r.jsx("div",{className:"hidden lg:block lg:col-span-4 xl:col-span-3",children:r.jsx(WN,{})}),r.jsx("div",{className:"lg:col-span-8 xl:col-span-6",children:r.jsxs("div",{className:"max-w-2xl mx-auto xl:max-w-none",children:[r.jsx("div",{className:"lg:hidden",children:r.jsx(Xe,{})}),r.jsx("div",{className:"flex items-center gap-3 mb-6 pt-16 md:pt-0",children:r.jsx("h1",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:"Saved Posts"})}),r.jsx("div",{className:"space-y-6",children:t===void 0?[1,2,3].map(s=>r.jsx(Oe,{},s)):t.length===0?r.jsxs("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted glass rounded-2xl border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-lg font-semibold",children:"No saved posts yet"}),r.jsx("p",{className:"text-sm mt-2",children:"Posts you save will appear here for easy access."})]}):t.map(s=>r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:r.jsx(Ip,{post:s,hasUserLiked:s.hasLiked})},s._id))})]})}),r.jsx("div",{className:"hidden xl:block xl:col-span-3",children:r.jsx(qN,{})})]})})}):null}function GN({onUploadComplete:e,allowVideo:t=!1,currentMedia:s}){const[n,a]=f.useState(!1),[i,o]=f.useState(0),[l,d]=f.useState(s),c=f.useRef(null),u=f.useRef(null),m=async(x,g)=>{if(g==="image"&&!_p(x)){alert("Please upload a valid image file (JPG, PNG, GIF, or WebP)");return}if(g==="video"&&!O8(x)){alert("Please upload a valid video file (MP4, WebM, or OGG)");return}const v=new FileReader;v.onloadend=()=>{d({url:v.result,type:g})},v.readAsDataURL(x),a(!0),o(0);try{const p=await Bc(x,g==="image"?"posts/images":"posts/videos",o);e(p,g),d({url:p,type:g})}catch(y){console.error("Upload failed:",y),alert(`Failed to upload ${g}. Please try again.`),d(s)}finally{a(!1),o(0)}},h=()=>{d(void 0),e("","image"),c.current&&(c.current.value=""),u.current&&(u.current.value="")};return r.jsxs("div",{className:"space-y-3",children:[r.jsx(re,{children:l&&r.jsxs(T.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"relative rounded-lg overflow-hidden bg-light-card dark:bg-dark-card",children:[l.type==="image"?r.jsx("img",{src:l.url,alt:"Preview",className:"w-full max-h-96 object-contain"}):r.jsx("video",{src:l.url,controls:!0,className:"w-full max-h-96 object-contain"}),n&&r.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Wn,{className:"w-8 h-8 text-white animate-spin mx-auto mb-2"}),r.jsxs("span",{className:"text-sm text-white font-medium",children:[i,"%"]})]})}),!n&&r.jsx("button",{onClick:h,className:"absolute top-2 right-2 w-8 h-8 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-colors",children:r.jsx(Ae,{className:"w-5 h-5 text-white"})})]})}),!l&&r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{ref:c,type:"file",accept:"image/*",onChange:x=>{var v;const g=(v=x.target.files)==null?void 0:v[0];g&&m(g,"image")},className:"hidden",disabled:n}),r.jsxs("button",{type:"button",onClick:()=>{var x;return(x=c.current)==null?void 0:x.click()},disabled:n,className:"flex-1 px-4 py-2 rounded-lg border-2 border-dashed border-light-border dark:border-dark-border hover:border-primary-500 dark:hover:border-primary-500 transition-colors flex items-center justify-center gap-2 text-light-muted dark:text-dark-muted hover:text-primary-500",children:[r.jsx(tn,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Add Image"})]}),t&&r.jsxs(r.Fragment,{children:[r.jsx("input",{ref:u,type:"file",accept:"video/*",onChange:x=>{var v;const g=(v=x.target.files)==null?void 0:v[0];g&&m(g,"video")},className:"hidden",disabled:n}),r.jsxs("button",{type:"button",onClick:()=>{var x;return(x=u.current)==null?void 0:x.click()},disabled:n,className:"flex-1 px-4 py-2 rounded-lg border-2 border-dashed border-light-border dark:border-dark-border hover:border-secondary-500 dark:hover:border-secondary-500 transition-colors flex items-center justify-center gap-2 text-light-muted dark:text-dark-muted hover:text-secondary-500",children:[r.jsx(JC,{className:"w-5 h-5"}),r.jsx("span",{className:"text-sm font-medium",children:"Add Video"})]})]})]})]})}function $c({onSuccess:e,defaultCategory:t,variant:s="default",postType:n}){const{user:a}=Z(),i=V(S.posts.createPost),[o,l]=f.useState(""),[d,c]=f.useState(t||"Ancient Culture"),[u,m]=f.useState("personal_experience"),[h,x]=f.useState(""),[g,v]=f.useState(""),[y,p]=f.useState(null),[b,w]=f.useState(!1),[k,j]=f.useState(""),N=(A,L)=>{v(A),p(L)},_=async A=>{if(A.preventDefault(),!a){j("You must be logged in to post");return}if(o.trim().length<10){j("Post must be at least 10 characters");return}j(""),w(!0);try{await i({authorId:a._id,content:o.trim(),category:d,imageUrl:y==="image"?g:void 0,videoUrl:y==="video"?g:void 0,postType:n||"general",questionContext:n==="question"?u:void 0,scripture:n==="prayer"?h:void 0}),l(""),v(""),p(null),e==null||e()}catch(L){j(L instanceof Error?L.message:"Failed to create post")}finally{w(!1)}};return r.jsxs(T.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},onSubmit:_,className:s==="bottom-sheet"?"":"glass rounded-xl p-4 md:p-6 shadow-lg",children:[s==="default"&&r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Gr,{className:"w-5 h-5 text-primary-500"}),r.jsx("h3",{className:"text-xl font-semibold text-light-text dark:text-dark-text",children:n==="question"?"Ask a Question":n==="prayer"?"Share a Prayer Point":"Share Your Learning"})]}),k&&r.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800",children:r.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:k})}),r.jsxs("div",{className:"space-y-4",children:[!t&&r.jsxs(r.Fragment,{children:[n==="question"&&r.jsxs("div",{className:"mb-1",children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:"Question Context"}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${u==="personal_experience"?"bg-blue-500/10 border-blue-500/50":"bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border hover:border-blue-500/30"}`,children:[r.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u==="personal_experience"?"border-blue-500":"border-gray-400"}`,children:u==="personal_experience"&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"})}),r.jsx("input",{type:"radio",name:"questionContext",value:"personal_experience",checked:u==="personal_experience",onChange:()=>m("personal_experience"),className:"hidden"}),r.jsx("span",{className:`text-sm font-medium ${u==="personal_experience"?"text-blue-600 dark:text-blue-400":"text-light-text dark:text-dark-text"}`,children:"Personal"})]}),r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border cursor-pointer transition-all ${u==="about_someone_else"?"bg-purple-500/10 border-purple-500/50":"bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border hover:border-purple-500/30"}`,children:[r.jsx("div",{className:`w-4 h-4 rounded-full border flex items-center justify-center ${u==="about_someone_else"?"border-purple-500":"border-gray-400"}`,children:u==="about_someone_else"&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-purple-500"})}),r.jsx("input",{type:"radio",name:"questionContext",value:"about_someone_else",checked:u==="about_someone_else",onChange:()=>m("about_someone_else"),className:"hidden"}),r.jsx("span",{className:`text-sm font-medium ${u==="about_someone_else"?"text-purple-600 dark:text-purple-400":"text-light-text dark:text-dark-text"}`,children:"Someone Else"})]})]})]}),n!=="question"&&n!=="prayer"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:"Teaching Category"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>c("Ancient Culture"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${d==="Ancient Culture"?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text border border-light-border dark:border-dark-border"}`,children:"Ancient"}),r.jsx("button",{type:"button",onClick:()=>c("Wisdom of The Now"),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${d==="Wisdom of The Now"?"bg-secondary-500 text-white shadow-lg shadow-secondary-500/30":"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text border border-light-border dark:border-dark-border"}`,children:"Wisdom"})]})]})]}),n==="prayer"&&r.jsxs("div",{className:"mb-1",children:[r.jsxs("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:["Scripture Reference ",r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted font-normal ml-1",children:"(Optional)"})]}),r.jsx("input",{type:"text",value:h,onChange:A=>x(A.target.value),placeholder:"e.g. Philippians 4:6-7",className:"w-full px-4 py-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text placeholder:text-light-muted dark:placeholder:text-dark-muted focus:outline-none focus:ring-2 focus:ring-purple-500/50 focus:border-purple-500 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:n==="question"?"Your Question":n==="prayer"?"Your Prayer Point":"What did you learn?"}),r.jsx("textarea",{value:o,onChange:A=>l(A.target.value),placeholder:n==="question"?"Type your question here...":n==="prayer"?"Share your prayer request...":"Share your insights, revelations, and key takeaways from today's teaching session...",rows:6,className:"w-full px-4 py-3 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text placeholder:text-light-muted dark:placeholder:text-dark-muted focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent resize-none",required:!0}),r.jsxs("p",{className:"mt-1 text-xs text-light-muted dark:text-dark-muted",children:[o.length," characters"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:"Add Media (Optional)"}),r.jsx(GN,{onUploadComplete:N,allowVideo:(a==null?void 0:a.role)==="admin",currentMedia:g?{url:g,type:y}:void 0}),(a==null?void 0:a.role)==="admin"&&r.jsx("p",{className:"mt-1 text-xs text-accent-500",children:" As an admin, you can upload both images and videos"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:[" Be among the first 5 to post and earn the ",r.jsx("strong",{className:"text-primary-500",children:"SENT"})," badge!"]}),r.jsx(M,{type:"submit",variant:"primary",isLoading:b,disabled:o.trim().length<10,children:"Post"})]})]})]})}function Ap({isVisible:e,onToggle:t,category:s}){return r.jsx(T.button,{onClick:t,whileTap:{scale:.95},className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${e?"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text border border-light-border dark:border-dark-border hover:bg-light-bg dark:hover:bg-dark-bg":"bg-primary-500 text-white shadow-lg shadow-primary-500/20 hover:bg-primary-600"}`,children:e?r.jsxs(r.Fragment,{children:[r.jsx(qo,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm",children:["Hide ",s," Posts"]})]}):r.jsxs(r.Fragment,{children:[r.jsx(Tt,{className:"w-4 h-4"}),r.jsxs("span",{className:"text-sm",children:["Show ",s," Posts"]})]})})}function Ep({content:e,title:t}){const[s,n]=f.useState(!1);return r.jsxs("div",{className:"relative inline-block",children:[r.jsx("button",{onClick:()=>n(!s),className:"p-1 rounded-full hover:bg-light-bg dark:hover:bg-dark-bg transition-all focus:outline-none","aria-label":"Information",children:r.jsx(Aw,{className:"w-4 h-4 md:w-5 md:h-5 text-primary-500"})}),r.jsx(re,{children:s&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 bg-black/50 backdrop-blur-sm",onClick:()=>n(!1)}),r.jsx(T.div,{initial:{opacity:0,scale:.9,x:"-50%",y:"-40%"},animate:{opacity:1,scale:1,x:"-50%",y:"-50%"},exit:{opacity:0,scale:.9,x:"-50%",y:"-40%"},className:"fixed z-50 left-1/2 top-1/2 w-[90vw] max-w-sm",children:r.jsxs("div",{className:"glass rounded-xl p-6 shadow-2xl border border-light-border dark:border-dark-border bg-white/90 dark:bg-black/90",children:[t&&r.jsx("h4",{className:"font-bold text-lg text-primary-500 mb-2 font-display",children:t}),r.jsx("p",{className:"text-sm md:text-base text-light-text dark:text-dark-text leading-relaxed",children:e}),r.jsx("button",{onClick:()=>n(!1),className:"mt-4 w-full py-2 rounded-lg bg-primary-500/10 text-primary-500 hover:bg-primary-500/20 font-medium text-sm transition-colors",children:"Got it"})]})})]})})]})}function pD(){const{user:e,isLoading:t}=Z(),s=de(),[n,a]=f.useState(0),[i,o]=f.useState(()=>{const l=localStorage.getItem("ancientCulture_postsVisible");return l!==null?JSON.parse(l):!0});return f.useEffect(()=>{localStorage.setItem("ancientCulture_postsVisible",JSON.stringify(i))},[i]),t?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xt,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 md:mb-8 p-6 md:p-8 rounded-2xl bg-gradient-to-br from-primary-500/10 via-primary-500/5 to-primary-600/10 border border-primary-500/20",children:r.jsxs("div",{className:"flex items-start gap-4 justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-xl bg-primary-500 flex items-center justify-center shadow-lg shadow-primary-500/30 flex-shrink-0",children:r.jsx(da,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-primary-600 dark:text-primary-400 font-display",children:"Ancient Culture"}),r.jsx(Ep,{title:"Ancient Culture",content:"This section features teachings based on prophetic wisdom and systems from the Old Testament. Admin-created posts appear here for community learning and discussion."})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base leading-relaxed",children:"Prophetic wisdom and systems from the Old Testament"})]})]}),r.jsx(T.button,{whileTap:{scale:.95},onClick:async()=>{const l=`${window.location.origin}/ancient-culture`;navigator.share?await navigator.share({title:"Ancient Culture - Baptizo",url:l}):(await navigator.clipboard.writeText(l),alert("Link copied to clipboard!"))},className:"p-2 rounded-lg hover:bg-primary-100 dark:hover:bg-primary-900/20 transition-all flex-shrink-0",title:"Share this page",children:r.jsx(mi,{className:"w-5 h-5 text-primary-500"})})]})}),r.jsxs("div",{className:"space-y-8",children:[r.jsx($c,{onSuccess:()=>a(l=>l+1),defaultCategory:"Ancient Culture"}),r.jsx("div",{className:"flex justify-end",children:r.jsx(Ap,{isVisible:i,onToggle:()=>o(!i),category:"Ancient Culture"})}),i&&r.jsx(Vc,{category:"Ancient Culture",onlyOfficial:!0,onCommentClick:l=>s(`/post/${l._id}`)},n),!i&&r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:'Posts are hidden. Click "Show Ancient Culture Posts" to view them.'})})]})]})}):r.jsx(Ee,{to:"/login",replace:!0})}function fD(){const{user:e,isLoading:t}=Z(),s=de(),[n,a]=f.useState(0),[i,o]=f.useState(()=>{const l=localStorage.getItem("wisdomNow_postsVisible");return l!==null?JSON.parse(l):!0});return f.useEffect(()=>{localStorage.setItem("wisdomNow_postsVisible",JSON.stringify(i))},[i]),t?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xt,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 md:mb-8 p-6 md:p-8 rounded-2xl bg-gradient-to-br from-secondary-500/10 via-secondary-500/5 to-secondary-600/10 border border-secondary-500/20",children:r.jsxs("div",{className:"flex items-start gap-4 justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 rounded-xl bg-secondary-500 flex items-center justify-center shadow-lg shadow-secondary-500/30 flex-shrink-0",children:r.jsx(Gr,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-secondary-600 dark:text-secondary-400 font-display",children:"Wisdom of The Now"}),r.jsx(Ep,{title:"Wisdom of The Now",content:"This section features teachings based on spiritual identity and insights from the New Testament. Engage with admin posts to deepen your understanding."})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base leading-relaxed",children:"Spiritual identity and insights from the New Testament"})]})]}),r.jsx(T.button,{whileTap:{scale:.95},onClick:async()=>{const l=`${window.location.origin}/wisdom-now`;navigator.share?await navigator.share({title:"Wisdom of The Now - Baptizo",url:l}):(await navigator.clipboard.writeText(l),alert("Link copied to clipboard!"))},className:"p-2 rounded-lg hover:bg-secondary-100 dark:hover:bg-secondary-900/20 transition-all flex-shrink-0",title:"Share this page",children:r.jsx(mi,{className:"w-5 h-5 text-secondary-500"})})]})}),r.jsxs("div",{className:"space-y-8",children:[r.jsx($c,{onSuccess:()=>a(l=>l+1),defaultCategory:"Wisdom of The Now"}),r.jsx("div",{className:"flex justify-end",children:r.jsx(Ap,{isVisible:i,onToggle:()=>o(!i),category:"Wisdom of The Now"})}),i&&r.jsx(Vc,{category:"Wisdom of The Now",onlyOfficial:!0,onCommentClick:l=>s(`/post/${l._id}`)},n),!i&&r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:'Posts are hidden. Click "Show Wisdom of The Now Posts" to view them.'})})]})]})}):r.jsx(Ee,{to:"/login",replace:!0})}function gD({currentAvatarUrl:e,onUploadComplete:t,size:s="lg"}){const[n,a]=f.useState(!1),[i,o]=f.useState(0),[l,d]=f.useState(e),[c,u]=f.useState(!1),m=f.useRef(null),h={sm:"w-16 h-16",md:"w-24 h-24",lg:"w-32 h-32",xl:"w-40 h-40"},x=async v=>{var b;const y=(b=v.target.files)==null?void 0:b[0];if(!y)return;if(!_p(y)){alert("Please upload a valid image file (JPG, PNG, GIF, or WebP)");return}const p=new FileReader;p.onloadend=()=>{d(p.result)},p.readAsDataURL(y),a(!0),o(0),u(!1);try{const w=await Bc(y,"avatars",o);t(w),d(w),u(!0),setTimeout(()=>u(!1),3e3)}catch(w){console.error("Upload failed:",w),alert("Failed to upload avatar. Please try again."),d(e)}finally{a(!1),o(0)}},g=()=>{d(void 0),t(""),m.current&&(m.current.value="")};return r.jsxs("div",{className:"flex flex-col items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`${h[s]} rounded-full overflow-hidden border-4 border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card flex items-center justify-center`,children:l?r.jsx("img",{src:ON(l,200,200),alt:"Avatar",className:"w-full h-full object-cover"}):r.jsx(oh,{className:"w-8 h-8 text-light-muted dark:text-dark-muted"})}),n&&r.jsx("div",{className:"absolute inset-0 rounded-full bg-black/50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Wn,{className:"w-6 h-6 text-white animate-spin mx-auto mb-1"}),r.jsxs("span",{className:"text-xs text-white font-medium",children:[i,"%"]})]})}),l&&!n&&r.jsx("button",{onClick:g,className:"absolute -top-2 -right-2 w-6 h-6 rounded-full bg-red-500 hover:bg-red-600 flex items-center justify-center transition-colors",children:r.jsx(Ae,{className:"w-4 h-4 text-white"})})]}),r.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:x,className:"hidden",disabled:n}),r.jsxs(M,{onClick:()=>{var v;return(v=m.current)==null?void 0:v.click()},variant:"outline",size:"sm",disabled:n,children:[r.jsx(oh,{className:"w-4 h-4 mr-2"}),l?"Change Avatar":"Upload Avatar"]}),r.jsx(re,{children:c&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-green-50 dark:bg-green-950 border border-green-200 dark:border-green-800",children:[r.jsx(nt,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),r.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-300",children:"Avatar saved successfully!"})]})})]})}const bD=e=>{if(!e)return"";if(e.length<=4)return e;const t=e.slice(-4);return"*".repeat(e.length-4)+t},yD=e=>{const t=e.replace(/[\s-]/g,"");return/^\d{10}$/.test(t)},vD=e=>e.trim().length>=2&&e.trim().length<=100,wD=e=>e.trim().length>=2&&e.trim().length<=100,kD=["Access Bank","GTBank","First Bank","UBA","Zenith Bank","Fidelity Bank","Union Bank","Sterling Bank","Polaris Bank","Wema Bank","Ecobank","Stanbic IBTC","Keystone Bank","FCMB","Unity Bank","Jaiz Bank","Providus Bank","Kuda Bank","OPay","PalmPay","Moniepoint","Other"];function jD({userId:e,isAdminView:t=!1}){const{user:s}=Z(),n=e||(s==null?void 0:s._id),a=U(S.bankingCredentials.getBankingCredentials,n&&(s!=null&&s._id)?{userId:n,viewerId:s._id}:"skip"),i=V(S.bankingCredentials.updateBankingCredentials),[o,l]=f.useState(!1),[d,c]=f.useState(!1),[u,m]=f.useState({bankName:"",accountNumber:"",accountName:""}),[h,x]=f.useState({}),[g,v]=f.useState(!1);f.useEffect(()=>{a&&m({bankName:a.bankName||"",accountNumber:a.accountNumber||"",accountName:a.accountName||""})},[a]);const y=async w=>{w.preventDefault();const k={};if(vD(u.bankName)||(k.bankName="Please enter a valid bank name"),yD(u.accountNumber)||(k.accountNumber="Account number must be 10 digits"),wD(u.accountName)||(k.accountName="Please enter a valid account name"),x(k),!(Object.keys(k).length>0)&&n){v(!0);try{await i({userId:n,bankName:u.bankName.trim(),accountNumber:u.accountNumber.replace(/[\s-]/g,""),accountName:u.accountName.trim()}),l(!1),c(!1)}catch(j){console.error("Failed to update banking credentials:",j),x({submit:"Failed to save banking credentials. Please try again."})}finally{v(!1)}}},p=(a==null?void 0:a.bankName)&&(a==null?void 0:a.accountNumber)&&(a==null?void 0:a.accountName),b=!t&&(s==null?void 0:s._id)===n;return r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center gap-2",children:[r.jsx(_r,{className:"w-5 h-5 text-accent-500"}),"Banking Information"]})}),r.jsxs(O,{children:[!t&&r.jsxs("div",{className:"mb-4 p-3 rounded-lg bg-light-bg dark:bg-dark-bg flex items-start gap-2",children:[r.jsx(Ye,{className:"w-4 h-4 text-light-muted dark:text-dark-muted mt-0.5 flex-shrink-0"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Your banking information is secure and only visible to you and administrators. This is required to receive rewards for participating in teaching sessions."})]}),o?r.jsxs("form",{onSubmit:y,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:["Bank Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsxs("select",{value:u.bankName,onChange:w=>m({...u,bankName:w.target.value}),className:"w-full px-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-primary-500",children:[r.jsx("option",{value:"",children:"Select your bank"}),kD.map(w=>r.jsx("option",{value:w,children:w},w))]}),h.bankName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.bankName})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:["Account Number ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.accountNumber,onChange:w=>m({...u,accountNumber:w.target.value}),placeholder:"0123456789",maxLength:10,className:"w-full px-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-primary-500 font-mono"}),h.accountNumber&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.accountNumber})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-1",children:["Account Name ",r.jsx("span",{className:"text-red-500",children:"*"})]}),r.jsx("input",{type:"text",value:u.accountName,onChange:w=>m({...u,accountName:w.target.value}),placeholder:"John Doe",className:"w-full px-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-text dark:text-dark-text focus:outline-none focus:ring-2 focus:ring-primary-500"}),h.accountName&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.accountName})]}),h.submit&&r.jsx("p",{className:"text-red-500 text-sm",children:h.submit}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:g,children:g?"Saving...":"Save"}),r.jsx(M,{type:"button",onClick:()=>{l(!1),x({}),a&&m({bankName:a.bankName||"",accountNumber:a.accountNumber||"",accountName:a.accountName||""})},variant:"secondary",className:"flex-1",disabled:g,children:"Cancel"})]})]}):r.jsx("div",{className:"space-y-4",children:p?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-muted dark:text-dark-muted mb-1",children:"Bank Name"}),r.jsx("p",{className:"text-light-text dark:text-dark-text",children:a.bankName})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-muted dark:text-dark-muted mb-1",children:"Account Number"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"text-light-text dark:text-dark-text font-mono",children:d?a.accountNumber:bD(a.accountNumber||"")}),r.jsx("button",{onClick:()=>c(!d),className:"text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:d?r.jsx(qo,{className:"w-4 h-4"}):r.jsx(Tt,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-muted dark:text-dark-muted mb-1",children:"Account Name"}),r.jsx("p",{className:"text-light-text dark:text-dark-text",children:a.accountName})]}),b&&r.jsx(M,{onClick:()=>l(!0),variant:"secondary",className:"w-full",children:"Update Banking Information"})]}):r.jsxs("div",{className:"text-center py-6",children:[r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-4",children:t?"This user has not added banking information yet.":"Add your banking information to receive rewards."}),b&&r.jsx(M,{onClick:()=>l(!0),variant:"primary",children:"Add Banking Information"})]})})]})]})}function ND({currentCoverUrl:e,onUploadComplete:t}){const[s,n]=f.useState(!1),[a,i]=f.useState(e),o=f.useRef(null),l=async d=>{var m;const c=(m=d.target.files)==null?void 0:m[0];if(!c)return;if(!_p(c)){alert("Please upload a valid image file");return}const u=new FileReader;u.onloadend=()=>i(u.result),u.readAsDataURL(c),n(!0);try{const h=await Bc(c,"covers");t(h),i(h)}catch(h){console.error("Upload failed:",h),i(e),alert("Failed to upload cover image")}finally{n(!1)}};return r.jsxs("div",{className:"relative w-full h-full group",children:[a?r.jsx("img",{src:a,alt:"Cover",className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary-500/20 to-secondary-500/20"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-60"}),s&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-20",children:r.jsx(Wn,{className:"w-8 h-8 text-white animate-spin"})}),r.jsx("button",{onClick:()=>{var d;return(d=o.current)==null?void 0:d.click()},className:"absolute bottom-4 right-4 p-2.5 rounded-full bg-black/40 hover:bg-black/60 text-white backdrop-blur-md opacity-100 md:opacity-0 group-hover:opacity-100 transition-all transform hover:scale-110 z-20 border border-white/20",title:"Change Cover Photo",children:r.jsx(AC,{className:"w-5 h-5"})}),r.jsx("input",{type:"file",ref:o,className:"hidden",accept:"image/*",onChange:l})]})}function SD(){const{user:e,isLoading:t,updateUser:s}=Z(),n=V(S.presence.updateAvatar),a=V(S.users.updateProfile),i=e?U(S.users.getUserStats,{userId:e._id}):void 0,o=async d=>{if(e)try{await n({userId:e._id,avatarUrl:d}),s({avatarUrl:d})}catch(c){console.error("Failed to update avatar:",c)}},l=async d=>{if(e)try{await a({userId:e._id,coverImageUrl:d})}catch(c){console.error("Failed to update cover image:",c)}};return t?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xt,{}),r.jsx("div",{className:"glass rounded-xl h-64 animate-pulse mb-6"})," ",r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx(Ft,{}),r.jsx(Ft,{}),r.jsx(Ft,{})]})]})}):e?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs("div",{className:"mb-4 md:mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gradient font-display mb-2",children:"My Profile"}),r.jsx("p",{className:"text-sm md:text-base text-light-muted dark:text-dark-muted",children:"View your account details and community stats"})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[r.jsx("div",{className:"h-32 md:h-48 relative bg-gray-100 dark:bg-gray-800",children:r.jsx(ND,{currentCoverUrl:e.coverImageUrl,onUploadComplete:l})}),r.jsxs("div",{className:"px-4 pb-4 md:px-8 md:pb-8 relative",children:[r.jsx("div",{className:"relative -mt-10 md:-mt-16 mb-3 md:mb-4 flex flex-col items-center md:items-start whitespace-nowrap",children:r.jsx(gD,{currentAvatarUrl:e.avatarUrl,onUploadComplete:o,size:"xl"})}),r.jsx("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 text-center md:text-left",children:r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2 mb-1",children:[r.jsx("h1",{className:"text-xl md:text-3xl font-bold text-light-text dark:text-dark-text truncate",children:e.name}),r.jsx(G,{variant:e.role==="super_admin"?"secondary":e.role==="admin"?"primary":"default",className:"h-5 text-[10px]",children:e.role==="super_admin"?"Super Admin":e.role==="admin"?"Admin":"Member"})]}),r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center md:justify-start gap-1 md:gap-4 text-sm text-light-muted dark:text-dark-muted mb-4",children:[r.jsx("span",{children:e.email}),r.jsx("span",{className:"hidden md:inline",children:""}),r.jsx("span",{children:u8(e.phone)})]}),r.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-6 mb-4 md:mb-0",children:[r.jsxs(te,{to:"/profile/followers",className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:(i==null?void 0:i.followerCount)||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Followers"})]}),r.jsxs(te,{to:"/profile/following",className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:(i==null?void 0:i.followingCount)||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Following"})]})]})]})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(D,{glass:!0,className:"p-6 text-center",children:[r.jsx(Yt,{className:"w-8 h-8 mx-auto mb-2 text-primary-500"}),r.jsx("div",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(i==null?void 0:i.totalPosts)||0}),r.jsx("div",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Posts"})]}),r.jsxs(D,{glass:!0,className:"p-6 text-center",children:[r.jsx(ve,{className:"w-8 h-8 mx-auto mb-2 text-accent-500"}),r.jsx("div",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(i==null?void 0:i.totalRewards)||0}),r.jsx("div",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Awards Won"})]}),r.jsxs(D,{glass:!0,className:"p-6 text-center",children:[r.jsx("div",{className:"w-8 h-8 mx-auto mb-2 flex items-center justify-center text-xl",children:""}),r.jsx("div",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(i==null?void 0:i.totalEarned)||0}),r.jsx("div",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Rubies Earned"})]})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(jD,{})})]})}):r.jsx(Ee,{to:"/login",replace:!0})}function Ll(){const{userId:e}=la(),{user:t}=Z(),s=jt(),n=de(),a=s.pathname.includes("following")?"following":"followers",i=e||(t==null?void 0:t._id),o=U(S.follows.getFollowList,i?{userId:i,type:a,currentUserId:t==null?void 0:t._id}:"skip"),l=V(S.follows.toggleFollow),d=async c=>{t&&await l({followerId:t._id,followingId:c})};return i?r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 max-w-2xl",children:[r.jsx(Xe,{}),r.jsx("h1",{className:"text-2xl font-bold mb-6 capitalize text-light-text dark:text-dark-text",children:a}),r.jsx("div",{className:"space-y-4",children:o===void 0?[1,2,3].map(c=>r.jsx("div",{className:"h-16 glass rounded-xl animate-pulse"},c)):o.length===0?r.jsxs("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:["No ",a," found."]}):o.map(c=>r.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl hover:bg-black/5 dark:hover:bg-white/5 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3 cursor-pointer flex-1",onClick:()=>n(`/profile/${c._id}`),children:[r.jsx(dt,{src:c.avatarUrl,alt:c.name,className:"w-10 h-10 border border-light-border dark:border-dark-border"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-light-text dark:text-dark-text",children:c.name}),r.jsxs("div",{className:"text-xs text-light-muted dark:text-dark-muted",children:["@",c.username||"user"]})]})]}),(t==null?void 0:t._id)!==c._id&&r.jsx(M,{size:"sm",variant:c.isFollowing?"outline":"primary",onClick:()=>d(c._id),className:c.isFollowing?"hover:bg-red-500 hover:text-white hover:border-red-500":"",children:c.isFollowing?"Following":"Follow"})]},c._id))})]})}):null}function CD(){const{user:e,isLoading:t}=Z(),s=U(S.stats.getDashboardStats,e?{adminId:e._id}:"skip"),n=U(S.comments.getCommentSettings,{}),a=V(S.comments.toggleComments),i=U(S.assignments.getPendingReviews,e&&(e.role==="admin"||e.role==="super_admin")?{adminId:e._id}:"skip"),o=(i==null?void 0:i.length)||0,l=U(S.contacts.getContacts,e&&(e.role==="admin"||e.role==="super_admin")?{adminId:e._id}:"skip"),d=(l==null?void 0:l.filter(p=>!p.read).length)||0,[c,u]=f.useState(!1);if(t)return r.jsxs("div",{className:"space-y-8",children:[r.jsx(Xt,{}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsx(Ft,{}),r.jsx(Ft,{}),r.jsx(Ft,{})]})]});if(!e||e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Ee,{to:"/feed",replace:!0});const m=(s==null?void 0:s.totalMembers)||0,h=(s==null?void 0:s.admins)||0,x=(s==null?void 0:s.boardMembers)||0,g=m>0?m-h-x:0,v=(s==null?void 0:s.totalComments)||0,y=(s==null?void 0:s.totalLikes)||0;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gradient font-display mb-1",children:"System Overview"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Manage teaching sessions and view community statistics"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"grid gap-4",children:r.jsx(D,{glass:!0,className:"bg-gradient-to-br from-primary-500/10 to-transparent border-primary-500/20 h-full",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-bold text-lg",children:"Total Community"}),r.jsx(ke,{className:"w-8 h-8 text-primary-500"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Members"}),r.jsx("span",{className:"font-bold",children:g})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Admins"}),r.jsx("span",{className:"font-bold",children:h})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Board"}),r.jsx("span",{className:"font-bold",children:x})]})]}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-light-border dark:border-dark-border",children:[r.jsx("h4",{className:"text-[10px] font-bold text-light-muted dark:text-dark-muted mb-2 uppercase tracking-wider",children:"Engagement"}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-1.5",title:"Total Comments",children:[r.jsx(Ot,{className:"w-3.5 h-3.5 text-blue-500"}),r.jsx("span",{className:"text-sm font-bold text-light-text dark:text-dark-text",children:v})]}),r.jsxs("div",{className:"flex items-center gap-1.5",title:"Total Reactions",children:[r.jsx(gn,{className:"w-3.5 h-3.5 text-red-500 fill-red-500/20"}),r.jsx("span",{className:"text-sm font-bold text-light-text dark:text-dark-text",children:y})]})]})]})]})})}),r.jsxs("div",{className:"grid gap-4",children:[r.jsx(te,{to:"/board",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all h-full group",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg group-hover:text-primary-500 transition-colors",children:"Board Dashboard"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Manage Tasks & Training"})]}),r.jsx(ve,{className:"w-8 h-8 text-yellow-500 opacity-80"})]}),r.jsx("div",{className:"mt-4 flex items-center gap-2",children:r.jsxs(G,{variant:"secondary",children:[x," Active Members"]})})]})})}),r.jsx(te,{to:"/admin/contacts",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all h-full group",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg group-hover:text-blue-500 transition-colors",children:"Messages"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Contact submissions"})]}),r.jsx(Ot,{className:"w-8 h-8 text-blue-500 opacity-80"})]}),d>0?r.jsxs(G,{variant:"danger",className:"mt-2 animate-pulse",children:[d," Unread"]}):r.jsx("p",{className:"text-xs text-light-muted mt-2",children:"No new messages"})]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 gap-4",children:[r.jsx(D,{glass:!0,className:"cursor-pointer hover:border-primary-500 transition-colors group",onClick:()=>{const p=`${window.location.origin}/member-onboarding`;navigator.clipboard.writeText(p),u(!0)},children:r.jsxs(O,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center shrink-0 group-hover:bg-primary-500/20 transition-colors",children:r.jsx(Ed,{className:"w-5 h-5 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold",children:"Onboarding Link"}),r.jsx("p",{className:"text-[10px] text-light-muted",children:"Copy to clipboard"})]})]})}),r.jsx(te,{to:"/admin/roles",children:r.jsx(D,{glass:!0,className:"hover:border-primary-500 transition-colors group h-full",children:r.jsxs(O,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/10 flex items-center justify-center shrink-0 group-hover:bg-orange-500/20 transition-colors",children:r.jsx(We,{className:"w-5 h-5 text-orange-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-bold",children:"Role Management"}),r.jsx("p",{className:"text-[10px] text-light-muted",children:"Assign privileges"})]}),r.jsx(_t,{className:"w-4 h-4 text-light-muted group-hover:translate-x-1 transition-transform"})]})})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center gap-2 text-lg",children:[r.jsx(Ot,{className:"w-5 h-5 text-primary-500"}),"System Controls"]})}),r.jsx(O,{children:r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-light-text dark:text-dark-text text-sm",children:"Community Comments"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-0.5",children:n?"Public participation is enabled":"Comments are temporarily disabled"})]}),r.jsx("button",{onClick:async()=>{if(e)try{await a({adminId:e._id,enabled:!n})}catch(p){console.error("Failed to toggle comments:",p)}},className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${n?"bg-primary-500":"bg-gray-300 dark:bg-gray-700"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${n?"translate-x-6":"translate-x-1"}`})})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsx(te,{to:"/admin/tasks",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all group h-full",children:r.jsxs(O,{className:"p-6",children:[r.jsx(Ed,{className:"w-8 h-8 text-purple-500 mb-4 opacity-80"}),r.jsx("h3",{className:"font-bold",children:"Task Reviews"}),r.jsx("p",{className:"text-xs text-light-muted mb-4 font-medium",children:"Check student submissions"}),r.jsxs(G,{variant:"outline",className:"bg-purple-500/5 text-purple-500 border-purple-500/20",children:[o," Waiting"]})]})})}),r.jsx(te,{to:"/admin/banking",children:r.jsx(D,{glass:!0,className:"hover:shadow-lg transition-all group h-full",children:r.jsxs(O,{className:"p-6",children:[r.jsx(ve,{className:"w-8 h-8 text-emerald-500 mb-4 opacity-80"}),r.jsx("h3",{className:"font-bold",children:"Banking System"}),r.jsx("p",{className:"text-xs text-light-muted mb-4 font-medium",children:"Manage wallets & rewards"}),r.jsxs("div",{className:"flex items-center text-xs font-bold text-emerald-500 gap-1 group-hover:gap-2 transition-all",children:["Enter Hub ",r.jsx(_t,{className:"w-3 h-3"})]})]})})})]})]})]}),r.jsx(ht,{isOpen:c,onClose:()=>u(!1),title:"Link Copied!",children:r.jsxs("div",{className:"text-center p-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(nt,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-6",children:"Onboarding link has been copied to clipboard. Share this with new members."}),r.jsx(M,{variant:"primary",className:"w-full",onClick:()=>u(!1),children:"Close"})]})})]})}function TD(){const{user:e}=Z(),t=de(),s=U(S.notifications.getNotifications,e?{userId:e._id}:"skip"),n=V(S.notifications.markAllAsRead),a=V(S.notifications.markAsRead),i=V(S.notifications.deleteNotification),[o,l]=f.useState(null),d=async()=>{if(e)try{await n({userId:e._id})}catch(g){console.error("Failed to mark all as read:",g)}},c=async g=>{e&&(g.read||await a({notificationId:g._id,userId:e._id}),g.postId?g.type==="reward"?t(`/post/${g.postId}/responses`):t(`/post/${g.postId}`):g.type==="assignment"?t("/tasks"):g.type==="follower"?t(`/profile/${g.senderId}`):g.type==="chat"&&t("/chat"))},u=(g,v)=>{g.stopPropagation(),l(v)},m=async()=>{if(!(!o||!e))try{await i({notificationId:o,userId:e._id})}catch(g){console.error("Failed to delete notification:",g)}finally{l(null)}},h=g=>{switch(g){case"like":return r.jsx(gn,{className:"w-5 h-5 text-red-500 fill-red-500"});case"comment":return r.jsx(lt,{className:"w-5 h-5 text-blue-500 fill-blue-500"});case"reply":return r.jsx(lt,{className:"w-5 h-5 text-indigo-500 fill-indigo-500"});case"new_post":return r.jsx(Yt,{className:"w-5 h-5 text-green-500 fill-green-500"});case"reward":return r.jsx(Ln,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"});case"assignment":return r.jsx(Ed,{className:"w-5 h-5 text-purple-500 fill-purple-500"});case"follower":return r.jsx(yt,{className:"w-5 h-5 text-pink-500 fill-pink-500"});case"system_alert":return r.jsx(Tr,{className:"w-5 h-5 text-amber-500"});case"meeting":return r.jsx(kt,{className:"w-5 h-5 text-indigo-500"});case"question":return r.jsx(lt,{className:"w-5 h-5 text-cyan-500"});case"chat":return r.jsx(lt,{className:"w-5 h-5 text-blue-500"});default:return r.jsx(Ji,{className:"w-5 h-5 text-primary-500"})}},x=g=>{var y;if(g.message)return r.jsx("span",{children:g.message});const v=((y=g.sender)==null?void 0:y.name)||"Someone";switch(g.type){case"like":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," liked your post"]});case"comment":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," commented on your post"]});case"new_post":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," shared a new post"]});case"reply":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," replied to your comment"]});case"reward":return r.jsxs("span",{children:["Congratulations! You were ",r.jsx("span",{className:"font-semibold text-yellow-500",children:"awarded"})," for your response"]});case"assignment":return r.jsxs("span",{children:["You have a new ",r.jsx("span",{className:"font-semibold text-purple-500",children:"assignment"})," from an admin"]});case"follower":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," started following you"]});case"meeting":return r.jsxs("span",{children:["New update regarding a ",r.jsx("span",{className:"font-semibold text-indigo-500",children:"meeting"})]});case"question":return r.jsxs("span",{children:[r.jsx("span",{className:"font-semibold text-primary-500",children:v})," asked a question on your post"]});default:return r.jsxs("span",{children:["New notification from ",r.jsx("span",{className:"font-semibold text-primary-500",children:v})]})}};return e?r.jsxs("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:[r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-2xl",children:[r.jsx(Xe,{}),r.jsxs(D,{glass:!0,className:"mt-4",children:[r.jsxs(fe,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 border-b border-light-border dark:border-dark-border py-4 px-4 sm:px-6",children:[r.jsxs(ge,{className:"flex items-center gap-2 text-lg sm:text-xl",children:[r.jsx(Ji,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary-500"}),"Center of Alerts"]}),s&&s.some(g=>!g.read)&&r.jsxs("button",{onClick:d,className:"text-xs sm:text-sm text-primary-500 hover:text-primary-600 font-bold flex items-center justify-center gap-1.5 px-4 py-2 sm:px-3 sm:py-1 rounded-full bg-primary-500/10 dark:hover:bg-primary-950/20 transition-all w-full sm:w-auto border border-primary-500/20",children:[r.jsx(nt,{className:"w-4 h-4"}),"Mark all as read"]})]}),r.jsx(O,{className:"p-0",children:s?s.length===0?r.jsxs("div",{className:"text-center py-20 text-light-muted dark:text-dark-muted",children:[r.jsx("div",{className:"w-20 h-20 bg-light-card dark:bg-dark-card rounded-full flex items-center justify-center mx-auto mb-4 border border-light-border dark:border-dark-border",children:r.jsx(Ji,{className:"w-10 h-10 opacity-20"})}),r.jsx("h3",{className:"text-lg font-medium text-light-text dark:text-dark-text",children:"All Caught Up!"}),r.jsx("p",{className:"text-sm",children:"No new notifications at the moment."})]}):r.jsx("div",{className:"divide-y divide-light-border dark:divide-dark-border",children:s.map(g=>{var v,y;return r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},onClick:()=>c(g),className:`
                                            flex items-start gap-4 p-4 cursor-pointer transition-all group relative
                                            ${g.read?"bg-transparent":"bg-primary-50/30 dark:bg-primary-900/5"}
                                            hover:bg-light-card dark:hover:bg-dark-card
                                        `,children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx("button",{onClick:p=>{p.stopPropagation(),t(`/profile/${g.senderId}`)},children:r.jsx(dt,{src:(v=g.sender)==null?void 0:v.avatarUrl,alt:((y=g.sender)==null?void 0:y.name)||"User",size:"md",className:"ring-2 ring-transparent group-hover:ring-primary-500/20"})}),r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white dark:bg-dark-bg rounded-full p-1 shadow-md border border-light-border dark:border-dark-border",children:h(g.type)})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm leading-relaxed",children:x(g)}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted uppercase font-bold tracking-wider",children:ot(g.createdAt,{addSuffix:!0})}),!g.read&&r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-primary-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"})]})]}),r.jsx("div",{className:"flex flex-col gap-2",children:r.jsx("button",{onClick:p=>u(p,g._id),className:"p-2 text-light-muted hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-950/20 rounded-lg transition-all opacity-0 group-hover:opacity-100",title:"Delete notification",children:r.jsx(Dr,{className:"w-4 h-4"})})})]},g._id)})}):r.jsx("div",{className:"p-6",children:r.jsx(aa,{count:4})})})]})]}),r.jsx(cs,{isOpen:!!o,onClose:()=>l(null),onConfirm:m,title:"Delete Notification",description:"Are you sure you want to delete this notification? This action cannot be undone.",confirmText:"Delete",variant:"danger"})]}):null}function QN(){return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-light-bg dark:bg-dark-bg",children:r.jsxs("div",{className:"relative flex flex-col items-center",children:[r.jsxs(T.div,{className:"w-24 h-24 mb-8 relative",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5},children:[r.jsx("div",{className:"absolute inset-0 rounded-full bg-primary-500/20 animate-ping"}),r.jsx("div",{className:"absolute inset-2 rounded-full bg-primary-500/40 animate-pulse"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"w-16 h-16 rounded-2xl shadow-2xl z-10"})})]}),r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex flex-col items-center gap-2",children:[r.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-primary-500 to-accent-500 bg-clip-text text-transparent",children:"Baptizo Community"}),r.jsx("div",{className:"flex gap-1",children:[0,1,2].map(e=>r.jsx(T.div,{className:"w-2 h-2 rounded-full bg-primary-500",animate:{y:[0,-6,0],opacity:[.5,1,.5]},transition:{duration:.8,repeat:1/0,delay:e*.2}},e))})]})]})})}function _D(){const{user:e}=Z(),[t,s]=f.useState(""),[n,a]=f.useState(null),i=U(S.assignments.getUserAssignments,e?{userId:e._id}:"skip"),o=V(S.assignments.submitAssignment);if(!e)return null;if(i===void 0)return r.jsx(QN,{});const l=i.filter(u=>u.status==="pending"),d=i.filter(u=>u.status!=="pending"),c=async u=>{if(t.trim())try{await o({assignmentId:u,userId:e._id,content:t}),a(null),s("")}catch(m){console.error("Failed to submit:",m),alert("Failed to submit assignment")}};return r.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-8 pb-20",children:[r.jsx(Xe,{}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6 text-gradient font-display",children:"My Tasks"}),r.jsxs("div",{className:"mb-8",children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4 text-light-text dark:text-dark-text flex items-center gap-2",children:[r.jsx(Ze,{className:"w-5 h-5 text-amber-500"}),"Pending (",l.length,")"]}),l.length===0?r.jsx("p",{className:"text-light-muted dark:text-dark-muted italic",children:"No pending tasks."}):r.jsx("div",{className:"space-y-4",children:l.map(u=>{var m;return r.jsxs("div",{className:"glass p-6 rounded-xl shadow-sm border border-amber-500/20",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-lg text-light-text dark:text-dark-text mb-1",children:["Instruction from ",u.adminName]}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:['Re: "',(m=u.postContent)==null?void 0:m.substring(0,50),'..."']})]}),r.jsx(G,{variant:"warning",children:"Pending"})]}),r.jsx("div",{className:"bg-light-bg dark:bg-dark-bg p-4 rounded-lg mb-4 text-light-text dark:text-dark-text",children:u.instructions}),n===u._id?r.jsxs("div",{className:"space-y-3",children:[r.jsx("textarea",{value:t,onChange:h=>s(h.target.value),placeholder:"Type your response here...",className:"w-full min-h-[150px] p-4 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500"}),r.jsxs("div",{className:"flex gap-2 justify-end",children:[r.jsx(M,{variant:"ghost",onClick:()=>a(null),children:"Cancel"}),r.jsx(M,{variant:"primary",onClick:()=>c(u._id),disabled:!t.trim(),children:"Submit Response"})]})]}):r.jsx(M,{variant:"primary",onClick:()=>a(u._id),children:"Start Task"})]},u._id)})})]}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-semibold mb-4 text-light-text dark:text-dark-text flex items-center gap-2",children:[r.jsx(Yt,{className:"w-5 h-5 text-primary-500"}),"History"]}),r.jsx("div",{className:"space-y-4",children:d.map(u=>{var m;return r.jsxs("div",{className:"glass p-6 rounded-xl shadow-sm opacity-80 hover:opacity-100 transition-opacity",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-medium text-lg text-light-text dark:text-dark-text mb-1",children:["Task from ",u.adminName]}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:['Re: "',(m=u.postContent)==null?void 0:m.substring(0,30),'..."']})]}),r.jsx(G,{variant:u.status==="approved"?"success":u.status==="rejected"?"danger":"default",children:u.status.charAt(0).toUpperCase()+u.status.slice(1)})]}),r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:"Instructions:"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted bg-light-bg dark:bg-dark-bg p-2 rounded",children:u.instructions})]}),r.jsxs("div",{className:"mb-4 space-y-2",children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:"Your Submission:"}),r.jsx("p",{className:"text-sm text-light-text dark:text-dark-text bg-light-bg dark:bg-dark-bg p-3 rounded",children:u.submissionContent})]}),(u.grade||u.feedback)&&r.jsxs("div",{className:`p-4 rounded-lg ${u.status==="approved"?"bg-green-500/10 border border-green-500/20":u.status==="rejected"?"bg-red-500/10 border border-red-500/20":"bg-primary-500/10 border border-primary-500/20"}`,children:[u.grade&&r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Kt,{className:"w-4 h-4"}),r.jsxs("span",{className:"font-bold",children:["Grade: ",u.grade]})]}),u.feedback&&r.jsxs("p",{className:"text-sm italic",children:['"',u.feedback,'"']})]})]},u._id)})})]})]})}function ID(){const{user:e}=Z(),t=V(S.users.claimSuperAdmin),[s,n]=f.useState("idle"),[a,i]=f.useState(""),o=async()=>{if(e){n("loading");try{await t({userId:e._id}),n("success"),setTimeout(()=>{window.location.href="/admin"},2e3)}catch(l){n("error"),i(l.message||"Failed to claim super admin.")}}};return e?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsx(D,{className:"max-w-md w-full bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border",children:r.jsxs(O,{className:"p-8 text-center space-y-6",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/Gemini_Generated_Image_zcvetszcvetszcve%20(1).png",alt:"Baptizo",className:"h-20 w-auto rounded-3xl shadow-2xl"})}),r.jsx("div",{className:"mx-auto w-12 h-12 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center",children:r.jsx(We,{className:"w-6 h-6 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-2",children:"Super Admin Setup"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Initialize the system by claiming the first Super Admin role. This is a one-time setup step."})]}),s==="idle"&&r.jsx(M,{variant:"primary",size:"lg",className:"w-full",onClick:o,children:"Claim Super Admin Role"}),s==="loading"&&r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}),s==="success"&&r.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400 p-4 rounded-lg flex flex-col items-center gap-2",children:[r.jsx(Kt,{className:"w-6 h-6"}),r.jsx("p",{className:"font-medium",children:"Success! Redirecting..."})]}),s==="error"&&r.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-lg flex flex-col items-center gap-2",children:[r.jsx(ln,{className:"w-6 h-6"}),r.jsx("p",{className:"font-medium",children:a}),r.jsx(M,{variant:"outline",size:"sm",onClick:()=>n("idle"),className:"mt-2",children:"Try Again"})]})]})})}):r.jsx("div",{className:"p-8 text-center",children:"Please login first."})}function Hr({label:e,options:t,value:s,onChange:n,placeholder:a="Select an option",className:i,error:o}){const[l,d]=f.useState(!1),c=f.useRef(null),u=t.find(h=>h.value===s);f.useEffect(()=>{function h(x){c.current&&!c.current.contains(x.target)&&d(!1)}return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const m=h=>{n(h),d(!1)};return r.jsxs("div",{className:J("w-full relative",i),ref:c,children:[e&&r.jsx("label",{className:"block text-sm font-medium mb-2 text-light-text dark:text-dark-text",children:e}),r.jsxs("button",{type:"button",onClick:()=>d(!l),className:J("w-full flex items-center justify-between px-4 py-3 rounded-lg border transition-all duration-200","bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text",l?"border-primary-500 ring-2 ring-primary-500/20":"border-light-border dark:border-dark-border hover:border-primary-500",o&&"border-red-500"),children:[r.jsxs("span",{className:J("flex items-center gap-2",!u&&"text-light-muted dark:text-dark-muted"),children:[u==null?void 0:u.icon,(u==null?void 0:u.label)||a]}),r.jsx(Ke,{className:J("w-4 h-4 transition-transform",l&&"rotate-180")})]}),r.jsx(re,{children:l&&r.jsx(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.15},className:"absolute z-50 w-full mt-2 bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border rounded-lg shadow-xl overflow-hidden max-h-60 overflow-y-auto thin-scrollbar",children:t.map(h=>h.disabled?r.jsx("div",{className:"px-4 py-2 text-xs font-bold text-light-muted dark:text-dark-muted uppercase tracking-wide pointer-events-none",children:h.label},h.value):r.jsxs("button",{onClick:()=>m(h.value),className:J("w-full flex items-center justify-between px-4 py-3 text-sm transition-colors","hover:bg-primary-50 dark:hover:bg-primary-900/10",s===h.value?"text-primary-600 dark:text-primary-400 font-medium bg-primary-50/50 dark:bg-primary-900/5":"text-light-text dark:text-dark-text"),children:[r.jsxs("span",{className:"flex items-center gap-2",children:[h.icon,h.label]}),s===h.value&&r.jsx(nt,{className:"w-4 h-4"})]},h.value))})}),o&&r.jsx("p",{className:"mt-1 text-sm text-red-500",children:o})]})}function PD(){const{user:e}=Z(),[t,s]=Px(),n=t.get("tab")||"overview",[a,i]=f.useState(""),[o,l]=f.useState("all"),d=h=>{s({tab:h})},c=U(S.wallets.getAllWallets),u=U(S.wallets.getAllWithdrawals),m=U(S.masterPool.getMasterPool);return c===void 0||u===void 0||m===void 0?r.jsx(Pp,{}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Banking System Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Manage user wallets, withdrawals, and reward distribution"})]}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(ke,{className:"w-5 h-5 text-primary-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(c==null?void 0:c.length)||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Active Wallets"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(Ze,{className:"w-5 h-5 text-yellow-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(u==null?void 0:u.filter(h=>h.status==="pending").length)||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Pending Withdrawals"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(dn,{className:"w-5 h-5 text-green-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(c==null?void 0:c.reduce((h,x)=>h+(x.totalRubies||0),0).toFixed(0))||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total Rubies Distributed"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(_r,{className:"w-5 h-5 text-amber-500"}),r.jsx("span",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:(c==null?void 0:c.reduce((h,x)=>h+(x.totalTalents||0),0).toFixed(2))||0})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total Talents"})]})})]}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[{key:"overview",label:"Overview",icon:Ho},{key:"withdrawals",label:"Withdrawals",icon:_r},{key:"wallets",label:"User Wallets",icon:ke},{key:"rewards",label:"Reward Activity",icon:ve}].map(h=>{const x=h.icon,g=n===h.key;return r.jsxs("button",{onClick:()=>d(h.key),className:J("flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap",g?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text hover:bg-primary-500/10"),children:[r.jsx(x,{className:"w-5 h-5"}),h.label]},h.key)})}),r.jsxs("div",{children:[n==="overview"&&r.jsx(AD,{wallets:c,withdrawals:u,masterPool:m}),n==="withdrawals"&&r.jsx(ED,{withdrawals:u,statusFilter:o,setStatusFilter:l,user:e}),n==="wallets"&&r.jsx(MD,{wallets:c,searchTerm:a,setSearchTerm:i}),n==="rewards"&&r.jsx(RD,{})]})]})}function AD({wallets:e,withdrawals:t,masterPool:s}){if(!e||!t||!s)return r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"Loading..."});const n=[{name:"Diamond",icon:"",value:s.diamondDistributed,color:"text-blue-500",bg:"bg-blue-500/10"},{name:"Gold",icon:"",value:s.goldDistributed,color:"text-yellow-500",bg:"bg-yellow-500/10"},{name:"Silver",icon:"",value:s.silverDistributed,color:"text-gray-500",bg:"bg-gray-500/10"},{name:"Bronze",icon:"",value:s.bronzeDistributed,color:"text-orange-500",bg:"bg-orange-500/10"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[r.jsxs(D,{glass:!0,className:"lg:col-span-2",children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center gap-2",children:[r.jsx(dn,{className:"w-5 h-5 text-primary-500"}),"Master Pool Resource Tracking"]})}),r.jsx(O,{children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Total Distributed (Engagement)"}),r.jsxs("span",{className:"font-bold text-light-text dark:text-dark-text",children:[s.totalDistributed.toLocaleString()," / ",s.totalInitial.toLocaleString()," Rubies"]})]}),r.jsx("div",{className:"h-4 bg-light-border dark:bg-dark-border rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-500 transition-all duration-1000",style:{width:`${s.totalDistributed/s.totalInitial*100}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mb-1",children:"Total Withdrawn"}),r.jsxs("p",{className:"text-xl font-bold text-green-500",children:["",(s.totalWithdrawn*200).toLocaleString()]}),r.jsxs("p",{className:"text-[10px] text-light-muted dark:text-dark-muted mt-1",children:[s.totalWithdrawn.toLocaleString()," Rubies Paid"]})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mb-1",children:"Remaining in Pool"}),r.jsx("p",{className:"text-xl font-bold text-primary-500",children:s.remaining.toLocaleString()}),r.jsx("p",{className:"text-[10px] text-light-muted dark:text-dark-muted mt-1",children:"Available for distribution"})]})]})]})})]}),r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsx(ge,{children:"Pool Engagement"})}),r.jsx(O,{className:"space-y-4",children:n.map(a=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xl",children:a.icon}),r.jsx("span",{className:"font-semibold text-light-text dark:text-dark-text",children:a.name})]}),r.jsx("span",{className:J("font-bold",a.color),children:a.value.toFixed(1)})]},a.name))})]})]}),r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsx(ge,{children:"Recent Withdrawal Requests"})}),r.jsx(O,{children:t&&t.length>0?r.jsx("div",{className:"space-y-3",children:t.slice(0,5).map(a=>{var i,o,l;return r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-primary-500/10 flex items-center justify-center shrink-0 border border-primary-500/20",children:(i=a.user)!=null&&i.avatarUrl?r.jsx("img",{src:a.user.avatarUrl,alt:a.user.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"font-bold text-primary-500",children:(((o=a.user)==null?void 0:o.name)||"?")[0]})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-light-text dark:text-dark-text capitalize",children:((l=a.user)==null?void 0:l.name)||"Unknown User"}),r.jsxs("p",{className:"text-[10px] text-light-muted dark:text-dark-muted",children:[a.type.replace("_"," "),"  ",new Date(a.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"text-right flex items-center gap-3",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-light-text dark:text-dark-text",children:[a.amountRubies," Rubies"]}),r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:["",a.nairaAmount||0]})]}),r.jsx(G,{variant:a.status==="paid"?"success":a.status==="pending"?"warning":"default",children:a.status})]})]},a._id)})}):r.jsx("p",{className:"text-center py-8 text-light-muted dark:text-dark-muted",children:"No withdrawal requests yet"})})]})]})}function ED({withdrawals:e,statusFilter:t,setStatusFilter:s,user:n}){const a=V(S.wallets.approveWithdrawal),i=V(S.wallets.rejectWithdrawal),[o,l]=f.useState({isOpen:!1,type:null,withdrawalId:null,amount:0});if(!e)return r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"Loading withdrawals..."});const d=t==="all"?e:e.filter(m=>m.status===t),c=(m,h,x)=>{l({isOpen:!0,type:m,withdrawalId:h,amount:x})},u=async()=>{if(!(!o.withdrawalId||!o.type))try{o.type==="approve"&&n?await a({withdrawalId:o.withdrawalId,adminId:n._id}):await i({withdrawalId:o.withdrawalId})}catch(m){console.error("Action failed:",m)}finally{l({...o,isOpen:!1})}};return r.jsxs("div",{className:"space-y-4",children:[r.jsx(D,{glass:!0,children:r.jsx(O,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(MC,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"}),r.jsx("div",{className:"w-48",children:r.jsx(Hr,{value:t,onChange:m=>s(m),options:[{value:"all",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"paid",label:"Paid"},{value:"rejected",label:"Rejected"}]})}),r.jsxs("span",{className:"text-sm text-light-muted dark:text-dark-muted border-l border-light-border dark:border-dark-border pl-4 ml-2",children:[d.length," request",d.length!==1?"s":""]})]})})}),r.jsx("div",{className:"space-y-3",children:d.length>0?d.map(m=>{var h,x,g,v,y;return r.jsx(D,{glass:!0,children:r.jsx(O,{className:"p-5",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-primary-500/10 flex items-center justify-center shrink-0 border-2 border-primary-500/20 shadow-sm",children:(h=m.user)!=null&&h.avatarUrl?r.jsx("img",{src:m.user.avatarUrl,alt:m.user.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-lg font-bold text-primary-500",children:(((x=m.user)==null?void 0:x.name)||"?")[0]})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-lg text-light-text dark:text-dark-text",children:((g=m.user)==null?void 0:g.name)||"Unknown User"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G,{variant:m.status==="paid"?"success":m.status==="pending"?"warning":"danger",children:m.status}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted uppercase font-bold tracking-tight",children:m.type==="big_pull"?" Big Pull":" Winner"})]})]})]}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-y-2 gap-x-8 text-sm bg-light-bg/30 dark:bg-dark-bg/30 p-4 rounded-2xl border border-light-border dark:border-dark-border mt-3",children:[r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-bold text-[10px] uppercase text-primary-500 block mb-0.5",children:"Contact"}),r.jsx("span",{className:"font-medium text-light-text dark:text-dark-text",children:((v=m.user)==null?void 0:v.email)||"No Email"})]}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-bold text-[10px] uppercase text-primary-500 block mb-0.5",children:"Bank Information"}),r.jsxs("span",{className:"font-semibold text-light-text dark:text-dark-text",children:[m.bankName,"  ",m.accountNumber]})]}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-bold text-[10px] uppercase text-primary-500 block mb-0.5",children:"Asset Summary"}),r.jsxs("span",{className:"font-bold text-emerald-500",children:[m.amountRubies," Rubies"]}),r.jsx("span",{className:"mx-2 text-light-muted",children:"/"}),r.jsxs("span",{className:"font-black text-light-text dark:text-dark-text",children:["",(y=m.nairaAmount)==null?void 0:y.toLocaleString()]})]})]})]}),m.status==="pending"&&r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(M,{onClick:()=>c("approve",m._id,m.amountRubies),variant:"primary",size:"sm",className:"bg-green-500 hover:bg-green-600 border-none shadow-sm shadow-green-500/20",children:[r.jsx(Kt,{className:"w-4 h-4 mr-1.5"}),"Approve"]}),r.jsxs(M,{onClick:()=>c("reject",m._id,m.amountRubies),variant:"outline",size:"sm",className:"text-red-500 border-red-500 hover:bg-red-500/10 hover:text-red-600 hover:border-red-600",children:[r.jsx(ps,{className:"w-4 h-4 mr-1.5"}),"Reject"]})]})]})})},m._id)}):r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-12 text-center",children:[r.jsx(ln,{className:"w-12 h-12 text-light-muted dark:text-dark-muted mx-auto mb-3 opacity-50"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:["No ",t!=="all"?t:""," withdrawals found"]})]})})}),r.jsx(cs,{isOpen:o.isOpen,onClose:()=>l({...o,isOpen:!1}),onConfirm:u,title:o.type==="approve"?"Approve Withdrawal":"Reject Withdrawal",description:o.type==="approve"?`Are you sure you want to approve this withdrawal of ${o.amount} Rubies? This will mark it as paid.`:`Are you sure you want to reject this withdrawal of ${o.amount} Rubies? The amount will be refunded to the user's wallet.`,confirmText:o.type==="approve"?"Approve & Pay":"Reject & Refund",variant:o.type==="reject"?"danger":"primary"})]})}function MD({wallets:e,searchTerm:t,setSearchTerm:s}){if(!e)return r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"Loading wallets..."});const n=e.filter(a=>{var i,o;return(((i=a.user)==null?void 0:i.name)||"").toLowerCase().includes(t.toLowerCase())||(((o=a.user)==null?void 0:o.email)||"").toLowerCase().includes(t.toLowerCase())});return r.jsxs("div",{className:"space-y-4",children:[r.jsx(D,{glass:!0,children:r.jsx(O,{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(mt,{className:"w-5 h-5 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:t,onChange:a=>s(a.target.value),className:"flex-1 px-4 py-2 rounded-lg bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-light-text dark:text-dark-text"})]})})}),r.jsx("div",{className:"space-y-3",children:n.length>0?n.map(a=>{var i,o,l,d;return r.jsx(D,{glass:!0,children:r.jsx(O,{className:"p-5",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden bg-primary-500/10 flex items-center justify-center border-2 border-primary-500/20 shadow-md transform hover:scale-105 transition-transform",children:(i=a.user)!=null&&i.avatarUrl?r.jsx("img",{src:a.user.avatarUrl,alt:a.user.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-xl font-bold text-primary-500",children:(((o=a.user)==null?void 0:o.name)||"?")[0]})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-black text-xl text-light-text dark:text-dark-text leading-tight",children:((l=a.user)==null?void 0:l.name)||"Unknown User"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted font-medium",children:((d=a.user)==null?void 0:d.email)||"N/A"})]}),["diamond","gold","silver","bronze"].some(c=>(a[`${c}MonthlyEarned`]??0)>=21.6)&&r.jsx(G,{className:"bg-orange-500 text-white animate-pulse border-none shadow-lg shadow-orange-500/20",children:"CAP ALERT"})]}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 text-sm",children:["diamond","gold","silver","bronze"].map(c=>{const u=a[`${c}MonthlyEarned`]??0;return r.jsxs("div",{className:J("p-3 rounded-xl border transition-colors",u>=21.6?"bg-red-500/10 border-red-500/30":"bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border"),children:[r.jsxs("p",{className:"text-[10px] text-light-muted dark:text-dark-muted uppercase font-bold",children:[c," Monthly"]}),r.jsxs("p",{className:J("text-lg font-bold",u>=21.6?"text-red-500":"text-light-text dark:text-dark-text"),children:[u.toFixed(1)," / 24"]})]},c)})})]}),r.jsxs("div",{className:"text-right p-4 rounded-2xl bg-primary-500/5 border border-primary-500/10 min-w-[150px]",children:[r.jsx("p",{className:"text-xs text-primary-500 font-bold uppercase mb-1",children:"Total Assets"}),r.jsxs("p",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:[a.totalTalents.toFixed(2)," ",r.jsx("span",{className:"text-sm font-normal text-light-muted",children:"Talents"})]}),r.jsxs("p",{className:"text-sm font-medium text-green-500 mt-1",children:["",(a.actualizedNairaBalance||0).toLocaleString()," Paid"]})]})]})})},a._id)}):r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-12 text-center",children:[r.jsx(mt,{className:"w-12 h-12 text-light-muted dark:text-dark-muted mx-auto mb-3"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No wallets found"})]})})})]})}function RD(){return r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsx(ge,{children:"Fractional Reward Config"})}),r.jsx(O,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-blue-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Diamond (Quiz Participation)"}),r.jsx("span",{className:"font-bold",children:"0.1 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-indigo-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Diamond (Quiz Winner Jackpot)"}),r.jsx("span",{className:"font-bold",children:"5.1 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-yellow-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Gold (Comment Interaction)"}),r.jsx("span",{className:"font-bold",children:"0.1 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-gray-400",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Silver (Game Participation)"}),r.jsx("span",{className:"font-bold",children:"0.15 Rubies"})]}),r.jsxs("div",{className:"flex justify-between p-3 rounded-lg bg-light-card dark:bg-dark-card border-l-4 border-orange-500",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Bronze (React/Like)"}),r.jsx("span",{className:"font-bold",children:"0.05 Rubies"})]})]})})]}),r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsx(ge,{children:"Sustainability Rules"})}),r.jsxs(O,{className:"space-y-4",children:[r.jsxs("div",{className:"p-4 rounded-xl bg-primary-500/10 border border-primary-500/20",children:[r.jsx("h4",{className:"font-bold text-primary-500 mb-1",children:"Monthly Pool Caps"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Each user is limited to earning a maximum of 24 rubies per pool per month to prevent inflation. Diamond, Gold, Silver, and Bronze pools all share this rule."})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-amber-500/10 border border-amber-500/20",children:[r.jsx("h4",{className:"font-bold text-amber-600 mb-1",children:"Conversion Logic"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:["100 Rubies = 1 Talent. ",r.jsx("br",{}),"1 Ruby = 200. ",r.jsx("br",{}),"Withdrawals are paid in Naira via physical transfer bank details."]})]})]})]})]})}function LD(){const{user:e}=Z(),[t,s]=f.useState("list"),[n,a]=f.useState(null),[i,o]=f.useState(!1),[l,d]=f.useState(null),c=U(S.wordUnderPressure.getAdminPassages,e?{limit:50}:"skip"),u=U(S.wordUnderPressure.getPassageAttempts,n?{passageId:n}:"skip"),m=V(S.wordUnderPressure.createPassage),h=V(S.wordUnderPressure.setPassageActive),x=V(S.wordUnderPressure.determineWinner),g=V(S.wordUnderPressure.awardWinnerManually),v=V(S.wordUnderPressure.deletePassage),[y,p]=f.useState("all"),[b,w]=f.useState({isOpen:!1}),k=u==null?void 0:u.filter(I=>y==="all"?!0:y==="correct"?I.isCorrect:y==="incorrect"?!I.isCorrect:!0),[j,N]=f.useState({textLines:"",structuralQuestion:"",optionA:"",optionB:"",optionC:"",optionD:"",correctOptionId:"a",difficultyLevel:"medium",memoTime:20,recallTime:15}),[_,A]=f.useState({isOpen:!1}),[L,C]=f.useState(null),P=(I,F)=>{d({type:I,message:F}),setTimeout(()=>d(null),5e3)},R=async()=>{if(!(!e||!b.attemptId||!n)){try{(await g({adminId:e._id,attemptId:b.attemptId,passageId:n})).success&&P("success",`Awarded ${b.userName} as the winner!`)}catch(I){P("error",I.message)}w({isOpen:!1})}},W=async()=>{if(e)try{const I=j.textLines.split(`
`).filter(q=>q.trim()!==""),F=[{id:"a",text:j.optionA},{id:"b",text:j.optionB},{id:"c",text:j.optionC},{id:"d",text:j.optionD}];await m({textLines:I,structuralQuestion:j.structuralQuestion,options:F,correctOptionId:j.correctOptionId,difficultyLevel:j.difficultyLevel,memoTime:j.memoTime,recallTime:j.recallTime,adminId:e._id}),o(!1),P("success","Challenge created successfully"),N({textLines:"",structuralQuestion:"",optionA:"",optionB:"",optionC:"",optionD:"",correctOptionId:"a",difficultyLevel:"medium",memoTime:20,recallTime:15})}catch(I){P("error",I.message)}},Y=async(I,F)=>{if(e)try{await h({passageId:I,isActive:!F,adminId:e._id}),P("success",`Challenge ${F?"deactivated":"activated"}`)}catch(q){P("error",q.message)}},se=async(I,F)=>{A({isOpen:!0,year:I,month:F})},Q=async()=>{if(!(!e||!_.year||!_.month)){try{const I=await x({year:_.year,month:_.month,adminId:e._id});I.success?P("success",`Winner: ${I.winnerName} (${I.score}ms)`):P("error",I.message||"An error occurred")}catch(I){P("error",I.message)}A({isOpen:!1})}},pe=async()=>{if(!(!e||!L))try{await v({passageId:L,adminId:e._id}),P("success","Challenge deleted successfully"),C(null)}catch(I){P("error",I.message)}},$=(I,F)=>{if(!I||!F)return"Legacy Week";const q=F.toString().substring(0,4);return`${F.toString().substring(4,6)}/${q}`};if(t==="responses"&&n){const I=c==null?void 0:c.find(F=>F._id===n);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("button",{onClick:()=>{s("list"),a(null)},className:"flex items-center gap-2 text-primary-500 font-bold hover:underline mb-4",children:[r.jsx(ur,{className:"w-5 h-5"}),"Back to Challenges"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-2",children:[r.jsxs("div",{className:"max-w-2xl",children:[r.jsx("h2",{className:"text-xl sm:text-2xl font-bold bg-gradient-to-r from-primary-600 to-primary-400 bg-clip-text text-transparent",children:"User Responses"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mt-1 line-clamp-2 md:line-clamp-none",children:(I==null?void 0:I.structuralQuestion)||"Challenge Details"})]}),r.jsxs("div",{className:"flex flex-col xs:flex-row items-stretch xs:items-center gap-3 text-sm",children:[r.jsx("div",{className:"flex bg-light-card dark:bg-dark-card p-1 rounded-xl border border-light-border dark:border-dark-border overflow-x-auto no-scrollbar",children:[{id:"all",label:"All"},{id:"correct",label:"Correct"},{id:"incorrect",label:"Incorrect"}].map(F=>r.jsx("button",{onClick:()=>p(F.id),className:J("px-3 sm:px-4 py-1.5 rounded-lg font-bold transition-all whitespace-nowrap",y===F.id?"bg-primary-500 text-white shadow-lg":"text-light-muted hover:text-light-text dark:hover:text-dark-text"),children:F.label},F.id))}),r.jsxs("div",{className:"px-3 py-1.5 rounded-xl bg-primary-500/10 text-primary-500 font-bold border border-primary-500/20 text-center whitespace-nowrap",children:[(k==null?void 0:k.length)||0," Results"]})]})]}),r.jsx("div",{className:"grid gap-4",children:u?(k==null?void 0:k.length)===0?r.jsxs(D,{glass:!0,className:"p-12 text-center text-light-muted",children:[r.jsx(Nr,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),"No ",y!=="all"?y:""," responses found for this challenge yet."]}):k==null?void 0:k.map(F=>{var q;return r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:r.jsx(D,{glass:!0,className:"overflow-hidden",children:r.jsxs("div",{className:"p-4 sm:p-5",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[r.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 flex-shrink-0 rounded-xl bg-primary-500/10 flex items-center justify-center text-primary-500 font-bold border border-primary-500/20 shadow-inner text-base sm:text-lg",children:F.userName[0]}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"font-bold text-base sm:text-lg flex items-center gap-2 truncate",children:[r.jsx("span",{className:"truncate",children:F.userName}),F.isCorrect?r.jsx(et,{className:"w-4 h-4 sm:w-5 sm:h-5 text-emerald-500 flex-shrink-0"}):r.jsx(ps,{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 flex-shrink-0"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-y-1 gap-x-3 text-[10px] sm:text-xs text-light-muted dark:text-dark-muted mt-0.5",children:[r.jsxs("span",{className:"flex items-center gap-1 font-mono",children:[r.jsx(Ze,{className:"w-3 h-3"})," ",F.responseTime,"ms"]}),r.jsx("span",{className:"hidden xs:inline text-light-border/50",children:""}),r.jsxs("span",{className:"font-bold",children:["Option ",((q=F.selectedOptionId)==null?void 0:q.toUpperCase())||"N/A"]}),F.retryCount>0&&r.jsxs("span",{className:"text-amber-500 bg-amber-500/10 px-1.5 py-0.5 rounded text-[10px]",children:[F.retryCount," Retries"]})]})]})]}),r.jsxs("div",{className:"flex flex-row sm:flex-col items-center sm:items-end justify-between sm:justify-start w-full sm:w-auto pt-3 sm:pt-0 border-t sm:border-t-0 border-light-border/30 dark:border-white/5",children:[r.jsx("div",{className:"text-[10px] sm:text-xs text-light-muted",children:YL(F.endTime||F.startTime,"MMM dd, HH:mm")}),r.jsx("div",{className:"sm:mt-2",children:F.explanationSubmitTime?r.jsx(G,{variant:"primary",className:"text-[9px] sm:text-[10px]",children:"Explained"}):r.jsx(G,{variant:"default",className:"text-[9px] sm:text-[10px]",children:"No Logic"})})]})]}),r.jsxs("div",{className:J("p-4 rounded-xl border transition-colors",F.explanation?"bg-primary-500/5 border-primary-500/10":"bg-light-muted/5 border-light-muted/10 opacity-60"),children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2 text-[10px] font-bold uppercase tracking-widest text-primary-500/70",children:[r.jsx(Nr,{className:"w-3 h-3"})," logic & explanation"]}),r.jsx("p",{className:J("text-sm leading-relaxed",F.explanation?"text-light-text dark:text-dark-text":"italic text-light-muted"),children:F.explanation||"No explanation provided by user."})]}),F.isCorrect&&!(I!=null&&I.winnerId)&&r.jsx("div",{className:"mt-4 pt-4 border-t border-light-border/20 dark:border-white/5 flex justify-end",children:r.jsxs(M,{size:"sm",onClick:()=>w({isOpen:!0,attemptId:F._id,userName:F.userName}),className:"bg-emerald-500 hover:bg-emerald-600 text-white gap-2 shadow-lg shadow-emerald-500/20 w-full sm:w-auto",children:[r.jsx(ve,{className:"w-4 h-4"}),"Select as Winner"]})}),(I==null?void 0:I.winnerId)===F.userId&&r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsxs(G,{variant:"success",className:"gap-2 py-1.5 px-4",children:[r.jsx(ve,{className:"w-3.5 h-3.5"}),"Monthly Winner"]})})]})})},F._id)}):r.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(F=>r.jsx("div",{className:"h-32 bg-light-card dark:bg-dark-card rounded-xl"},F))})})]})}return r.jsxs("div",{className:"space-y-6",children:[r.jsx(cs,{isOpen:_.isOpen,onClose:()=>A({isOpen:!1}),onConfirm:Q,title:"Select Monthly Winner",description:`Are you sure you want to select and award the winner for ${_.month}/${_.year}? This will distribute 11.5 Rubies to the best performer.`,confirmText:"Select Winner"}),r.jsx(cs,{isOpen:b.isOpen,onClose:()=>w({isOpen:!1}),onConfirm:R,title:"Confirm Monthly Winner",description:`Are you sure you want to award ${b.userName} as the monthly winner? They will receive 11.5 Rubies and this challenge will be marked as completed.`,confirmText:"Award Rubies",variant:"primary"}),r.jsx(cs,{isOpen:!!L,onClose:()=>C(null),onConfirm:pe,title:"Delete Challenge",description:"Are you sure you want to permanently delete this memory challenge and all its user attempts? This action cannot be undone.",confirmText:"Delete Challenge",variant:"danger"}),r.jsx(re,{children:l&&r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:J("fixed top-4 right-4 z-50 px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 border backdrop-blur-md",l.type==="success"?"bg-emerald-500 text-white border-emerald-400":"bg-red-500 text-white border-red-400"),children:[l.type==="success"?r.jsx(et,{className:"w-5 h-5"}):r.jsx(ps,{className:"w-5 h-5"}),r.jsx("p",{className:"font-bold",children:l.message})]})}),r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold font-display text-gradient",children:"Diamond Challenges"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Configure monthly memory challenges and pick winners."})]}),r.jsxs(M,{onClick:()=>o(!i),variant:i?"outline":"primary",className:"w-full sm:w-auto",children:[i?r.jsx(Ae,{className:"mr-2 h-4 w-4"}):r.jsx(Ld,{className:"mr-2 h-4 w-4"}),i?"Cancel":"Create New Challenge"]})]}),r.jsx(re,{children:i&&r.jsx(T.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:r.jsx(D,{className:"border-t-4 border-t-primary-500",children:r.jsxs(O,{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-2 text-lg font-bold",children:[r.jsx(kt,{className:"w-5 h-5 text-primary-500"}),"Challenge Configuration"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block text-light-text dark:text-dark-text",children:"Passage Text (One line per line)"}),r.jsx("textarea",{className:"w-full p-4 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none transition-all font-serif italic",rows:5,value:j.textLines,onChange:I=>N({...j,textLines:I.target.value}),placeholder:"Line 1\\nLine 2..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block text-light-text dark:text-dark-text",children:"Structural Question"}),r.jsx("input",{className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none transition-all",value:j.structuralQuestion,onChange:I=>N({...j,structuralQuestion:I.target.value}),placeholder:"What follows the first comma?"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:["A","B","C","D"].map(I=>r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold mb-1 block opacity-50 uppercase tracking-tighter",children:["Option ",I]}),r.jsx("input",{className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none transition-all",value:j[`option${I}`],onChange:F=>N({...j,[`option${I}`]:F.target.value}),placeholder:`Enter value for ${I}`})]},I))}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 items-end",children:[r.jsx(Hr,{label:"Correct Answer",value:j.correctOptionId,onChange:I=>N({...j,correctOptionId:I}),options:[{value:"a",label:"Option A"},{value:"b",label:"Option B"},{value:"c",label:"Option C"},{value:"d",label:"Option D"}]}),r.jsx(Hr,{label:"Difficulty",value:j.difficultyLevel,onChange:I=>N({...j,difficultyLevel:I}),options:[{value:"easy",label:"Easy"},{value:"medium",label:"Medium"},{value:"hard",label:"Hard"}]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Memo Time (s)"}),r.jsx("input",{type:"number",className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",value:j.memoTime,onChange:I=>N({...j,memoTime:parseInt(I.target.value)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold mb-2 block",children:"Recall Time (s)"}),r.jsx("input",{type:"number",className:"w-full p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",value:j.recallTime,onChange:I=>N({...j,recallTime:parseInt(I.target.value)})})]})]}),r.jsx("div",{className:"flex justify-end pt-4",children:r.jsx(M,{onClick:W,size:"lg",className:"w-full sm:w-auto px-10",children:"Save & Activate Challenge"})})]})]})})})}),r.jsx("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-6",children:c?c.length===0?r.jsx("div",{className:"col-span-full py-20 text-center text-light-muted",children:"No challenges created yet."}):c.map(I=>r.jsx(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:r.jsx(D,{glass:!0,className:J("h-full border-l-4 transition-all duration-300",I.isActive?"border-l-primary-500 shadow-lg shadow-primary-500/10":"border-l-light-muted/20"),children:r.jsx(O,{className:"p-6",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("span",{className:J("px-2.5 py-1 rounded-full text-[10px] font-black tracking-widest uppercase",I.isActive?"bg-primary-500 text-white":"bg-light-muted/10 text-light-muted"),children:I.isActive?"Active":"Archived"}),r.jsx("button",{onClick:F=>{F.stopPropagation(),C(I._id)},className:"p-1 text-light-muted hover:text-red-500 hover:bg-red-500/10 rounded transition-colors",title:"Delete Challenge",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 6h18"}),r.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),r.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),r.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),r.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]})})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("span",{className:"px-2.5 py-1 rounded-full bg-light-muted/5 text-light-muted text-[10px] font-mono",children:I.month?$(I.year,I.month):`Week ${I.week}`}),r.jsx("span",{className:J("px-2.5 py-1 rounded-full text-[10px] font-black uppercase",I.difficultyLevel==="hard"?"bg-red-500/10 text-red-500":I.difficultyLevel==="medium"?"bg-amber-500/10 text-amber-500":"bg-emerald-500/10 text-emerald-500"),children:I.difficultyLevel})]}),I.winnerId&&r.jsx(ve,{className:"w-5 h-5 text-amber-500"})]}),r.jsx("h3",{className:"text-xl font-bold mb-2 line-clamp-2",children:I.structuralQuestion}),r.jsxs("p",{className:"text-sm text-light-muted mb-6 line-clamp-2 italic opacity-60",children:['"',I.textLines[0],'..."']}),r.jsxs("div",{className:"mt-auto grid grid-cols-2 gap-3",children:[r.jsxs(M,{size:"sm",variant:I.isActive?"danger":"primary",onClick:()=>Y(I._id,I.isActive),className:"flex-1",children:[I.isActive?r.jsx(BC,{className:"w-4 h-4 mr-2"}):r.jsx(Ld,{className:"w-4 h-4 mr-2"}),I.isActive?"Deactivate":"Activate"]}),r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{a(I._id),s("responses")},className:"flex-1",children:[r.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Responses"]}),I.month&&!I.winnerId&&r.jsxs(M,{size:"sm",variant:"outline",onClick:()=>se(I.year,I.month),className:"col-span-2 text-amber-500 border-amber-500/20 hover:bg-amber-500/10 mt-1",children:[r.jsx(ve,{className:"w-4 h-4 mr-2"}),"Select Winner"]}),I.winnerId&&r.jsx("div",{className:"col-span-2 text-center py-2 bg-amber-500/10 rounded-lg border border-amber-500/20 mt-1 text-xs font-bold text-amber-500",children:"Challenge Completed  Winner Awarded"})]})]})})})},I._id)):[1,2,3,4].map(I=>r.jsx("div",{className:"h-48 rounded-2xl bg-light-card dark:bg-dark-card animate-pulse"},I))})]})}function DD(){const{user:e}=Z(),[t,s]=f.useState("pending"),n=U(S.questions.getAllQuestions,e!=null&&e._id?{adminId:e._id,status:t}:"skip"),a=V(S.questions.adminAnswerQuestion),i=V(S.questions.deleteQuestion),o=V(S.questions.makeQuestionPublic),[l,d]=f.useState(null),[c,u]=f.useState(""),[m,h]=f.useState(!1),[x,g]=f.useState(!1);if(n===void 0)return r.jsx(Pp,{});const v=async b=>{if(b.preventDefault(),!(!e||!l||!c.trim())){g(!0);try{await a({adminId:e._id,questionId:l._id,answerText:c.trim(),makePublic:m}),d(null),u(""),h(!1)}catch(w){console.error("Failed to answer:",w),alert("Failed to submit answer.")}finally{g(!1)}}},y=async b=>{if(!(!e||!confirm("Are you sure you want to delete this question?")))try{await i({adminId:e._id,questionId:b})}catch{alert("Failed to delete question")}},p=async b=>{if(e)try{await o({adminId:e._id,questionId:b})}catch{alert("Failed to make public")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Questions Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Answer user questions and manage Q&A visibility"})]}),r.jsxs("div",{className:"flex gap-4 border-b border-light-border dark:border-dark-border overflow-x-auto",children:[r.jsxs("button",{onClick:()=>s("pending"),className:`pb-3 px-4 font-semibold text-sm transition-colors border-b-2 whitespace-nowrap ${t==="pending"?"border-primary-500 text-primary-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:["Pending (",(n==null?void 0:n.filter(b=>!b.isAnswered).length)||0,")"]}),r.jsx("button",{onClick:()=>s("answered"),className:`pb-3 px-4 font-semibold text-sm transition-colors border-b-2 whitespace-nowrap ${t==="answered"?"border-primary-500 text-primary-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:"Answered"})]}),r.jsxs("div",{className:"grid gap-4",children:[n==null?void 0:n.map(b=>r.jsx(D,{glass:!0,className:"border border-light-border dark:border-dark-border",children:r.jsx(O,{className:"p-4 md:p-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start gap-4",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[r.jsx(G,{variant:"outline",className:"text-xs",children:ot(b.createdAt,{addSuffix:!0})}),r.jsxs("span",{className:"text-xs text-light-muted",children:["by ",b.userName]}),b.isPublic?r.jsx(Dx,{className:"w-3 h-3 text-green-500"}):r.jsx(Ye,{className:"w-3 h-3 text-gray-400"})]}),r.jsx("h3",{className:"font-semibold text-base md:text-lg text-light-text dark:text-dark-text leading-snug",children:b.questionText}),r.jsxs("div",{className:"text-xs md:text-sm text-light-muted bg-gray-50 dark:bg-white/5 p-3 rounded-lg inline-block w-full",children:[r.jsx("span",{className:"font-bold block mb-1",children:"Context:"}),' "',b.postContent,'"']}),b.isAnswered&&r.jsxs("div",{className:"mt-4 p-4 bg-primary-50 dark:bg-primary-900/10 rounded-lg border border-primary-100 dark:border-primary-900/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Kt,{className:"w-4 h-4 text-primary-500 shrink-0"}),r.jsxs("span",{className:"text-xs font-bold text-primary-700 dark:text-primary-400",children:["Answered by ",b.adminName||"Admin"]})]}),r.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:b.answerText})]})]}),r.jsxs("div",{className:"flex md:flex-col gap-2 w-full md:w-auto pt-2 md:pt-0 border-t md:border-t-0 border-light-border/50 dark:border-dark-border/50",children:[b.isAnswered?!b.isPublic&&r.jsx(M,{size:"sm",variant:"outline",onClick:()=>p(b._id),className:"border-green-500 text-green-600 hover:bg-green-50 flex-1 md:flex-none",children:"Make Public"}):r.jsx(M,{size:"sm",onClick:()=>{d(b),u("")},className:"bg-primary-500 hover:bg-primary-600 text-white flex-1 md:flex-none",children:"Answer"}),r.jsx(M,{size:"sm",variant:"ghost",onClick:()=>y(b._id),className:"text-red-500 hover:text-red-600 hover:bg-red-50 flex-none",children:r.jsx(Dr,{className:"w-4 h-4"})})]})]})})},b._id)),(n==null?void 0:n.length)===0&&r.jsx("div",{className:"text-center py-12 text-light-muted dark:text-dark-muted",children:"No questions found in this category."})]}),r.jsx(re,{children:l&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-[#1A1A1A] rounded-2xl shadow-xl max-w-lg w-full p-6 relative border border-gray-100 dark:border-gray-800",children:[r.jsx("button",{onClick:()=>d(null),className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/5",children:r.jsx(Ae,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Answer Question"}),r.jsxs("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-white/5 rounded-xl",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium",children:"Question:"}),r.jsx("p",{className:"text-lg text-gray-900 dark:text-white mt-1",children:l.questionText})]}),r.jsxs("form",{onSubmit:v,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Your Answer"}),r.jsx("textarea",{value:c,onChange:b=>u(b.target.value),className:"w-full p-3 rounded-xl bg-gray-50 dark:bg-[#222] border-transparent focus:border-primary-500 focus:ring-0 min-h-[150px]",placeholder:"Type your answer here...",required:!0})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"makePublic",checked:m,onChange:b=>h(b.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsx("label",{htmlFor:"makePublic",className:"text-sm text-gray-700 dark:text-gray-300",children:"Make this question and answer Public immediately"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:()=>d(null),children:"Cancel"}),r.jsx(M,{type:"submit",disabled:x,children:x?"Submitting...":"Submit Answer"})]})]})]})})})]})}function OD(){const{user:e}=Z(),[t,s]=f.useState(""),n=U(S.users.getAllUsers,e!=null&&e._id?{adminId:e._id}:"skip"),a=U(S.posts.getPosts,{category:"Ancient Culture",limit:50}),i=U(S.tags.getAllActiveTags,e!=null&&e._id?{adminId:e._id}:"skip"),o=V(S.tags.tagUserForQuestions),l=V(S.tags.tagUserForPrayer),d=V(S.tags.revokeTag),[c,u]=f.useState(null),[m,h]=f.useState("question"),[x,g]=f.useState(""),[v,y]=f.useState(!1);if(n===void 0||i===void 0)return r.jsx(Pp,{});const p=n==null?void 0:n.filter(k=>k.name.toLowerCase().includes(t.toLowerCase())||k.email.toLowerCase().includes(t.toLowerCase())),b=async()=>{if(!(!e||!c)){y(!0);try{if(m==="question"){if(!x){alert("Please select a teaching post"),y(!1);return}await o({adminId:e._id,userId:c._id,postId:x})}else await l({adminId:e._id,userId:c._id});alert("Tag granted successfully!"),u(null),g("")}catch(k){alert(k.message||"Failed to grant tag")}finally{y(!1)}}},w=async k=>{if(!(!e||!confirm("Revoke this tag?")))try{await d({adminId:e._id,tagId:k})}catch{alert("Failed to revoke tag")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"User Tag Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Grant or revoke specialized posting permissions (Questions, Prayers)"})]}),r.jsx(D,{glass:!0,className:"border border-light-border dark:border-dark-border",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("h3",{className:"font-bold text-lg mb-4",children:["Active Tags (",(i==null?void 0:i.length)||0,")"]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:(i==null?void 0:i.length)===0?r.jsx("p",{className:"text-sm text-light-muted",children:"No active tags."}):i==null?void 0:i.map(k=>r.jsxs(G,{variant:"outline",className:"flex items-center gap-2 pr-1",children:[r.jsx("span",{className:k.tagType==="question"?"text-purple-500":"text-orange-500",children:k.tagType==="question"?"Question":"Prayer"}),r.jsx("span",{className:"text-light-text dark:text-dark-text border-l border-gray-200 dark:border-gray-700 pl-2",children:k.userName}),r.jsx("button",{onClick:()=>w(k._id),className:"p-1 hover:bg-red-100 rounded-full text-red-500 transition-colors ml-1",children:r.jsx(Ae,{className:"w-3 h-3"})})]},k._id))})]})}),r.jsxs("div",{className:"relative",children:[r.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-light-muted"}),r.jsx("input",{type:"text",value:t,onChange:k=>s(k.target.value),placeholder:"Search users to tag...",className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white dark:bg-[#1A1A1A] border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 focus:outline-none transition-all"})]}),r.jsx("div",{className:"grid gap-4",children:p==null?void 0:p.slice(0,10).map(k=>r.jsx(D,{glass:!0,className:"border border-light-border dark:border-dark-border",children:r.jsxs(O,{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-gray-700 flex items-center justify-center overflow-hidden",children:k.avatarUrl?r.jsx("img",{src:k.avatarUrl,alt:k.name,className:"w-full h-full object-cover"}):r.jsx(yt,{className:"w-5 h-5 text-gray-400"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-light-text dark:text-dark-text",children:k.name}),r.jsx("p",{className:"text-xs text-light-muted",children:k.role})]})]}),r.jsxs(M,{size:"sm",onClick:()=>u(k),children:[r.jsx(Iw,{className:"w-4 h-4 mr-2"})," Grant Tag"]})]})},k._id))}),r.jsx(re,{children:c&&r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white dark:bg-[#1A1A1A] rounded-2xl shadow-xl max-w-md w-full p-6 relative border border-gray-100 dark:border-gray-800",children:[r.jsx("button",{onClick:()=>u(null),className:"absolute top-4 right-4 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-white/5",children:r.jsx(Ae,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-xl font-bold mb-4",children:"Grant Permission"}),r.jsxs("p",{className:"text-sm text-light-muted mb-6",children:["Allow ",r.jsx("span",{className:"font-bold text-primary-500",children:c.name})," to post special content."]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Tag Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>h("question"),className:`p-3 rounded-lg border text-sm font-medium transition-all ${m==="question"?"border-primary-500 bg-primary-50 text-primary-700 dark:bg-primary-900/20 dark:text-primary-400":"border-gray-200 dark:border-gray-700"}`,children:"Question Tag"}),r.jsx("button",{onClick:()=>h("prayer"),className:`p-3 rounded-lg border text-sm font-medium transition-all ${m==="prayer"?"border-orange-500 bg-orange-50 text-orange-700 dark:bg-orange-900/20 dark:text-orange-400":"border-gray-200 dark:border-gray-700"}`,children:"Prayer Tag"})]})]}),m==="question"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Teaching (Context)"}),r.jsxs("select",{value:x,onChange:k=>g(k.target.value),className:"w-full p-3 rounded-lg bg-gray-50 dark:bg-[#222] border border-gray-200 dark:border-gray-700 focus:border-primary-500 focus:outline-none text-sm",children:[r.jsx("option",{value:"",children:"Select a teaching..."}),a==null?void 0:a.map(k=>r.jsxs("option",{value:k._id,children:[k.content.substring(0,40),"..."]},k._id))]}),r.jsx("p",{className:"text-xs text-light-muted mt-1",children:"user can only ask questions on this specific post."})]}),r.jsx(M,{className:"w-full mt-4",onClick:b,disabled:v,children:v?"Granting...":"Grant Permission"})]})]})})})]})}function FD(){const e=U(S.masterPool.getMasterPool);if(e===void 0)return r.jsx(oD,{});const t=s=>new Intl.NumberFormat("en-US").format(s);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Master Pool Overview"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Track total reward distribution and financial health"})]}),r.jsxs("div",{className:"grid sm:grid-cols-3 gap-6",children:[r.jsx(D,{glass:!0,className:"border-l-4 border-l-blue-500",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-light-muted",children:"Total Distributed"}),r.jsx("h3",{className:"text-2xl font-bold text-light-text dark:text-dark-text mt-1",children:t((e==null?void 0:e.totalDistributed)||0)})]}),r.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/20 rounded-lg text-blue-600",children:r.jsx(Sw,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Total rubies ever earned by users"})]})}),r.jsx(D,{glass:!0,className:"border-l-4 border-l-green-500",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-light-muted",children:"Total Withdrawn"}),r.jsx("h3",{className:"text-2xl font-bold text-light-text dark:text-dark-text mt-1",children:t((e==null?void 0:e.totalWithdrawn)||0)})]}),r.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/20 rounded-lg text-green-600",children:r.jsx(TC,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Rubies converted to cash"})]})}),r.jsx(D,{glass:!0,className:"border-l-4 border-l-purple-500",children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-light-muted",children:"Initial Pool Size"}),r.jsx("h3",{className:"text-2xl font-bold text-light-text dark:text-dark-text mt-1",children:t((e==null?void 0:e.totalInitial)||1e6)})]}),r.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/20 rounded-lg text-purple-600",children:r.jsx(Tw,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Starting liquidity"})]})})]}),r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text mt-8 mb-4",children:"Distribution by Pool"}),r.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-cyan-100 text-cyan-600 rounded-lg",children:r.jsx(Ln,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Diamond"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.diamondDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Quizzes & Monthly"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-yellow-100 text-yellow-600 rounded-lg",children:r.jsx(Ln,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Gold"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.goldDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Top Comments"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-slate-100 text-slate-600 rounded-lg",children:r.jsx(Ln,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Silver"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.silverDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Weekly Games"})]})}),r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"p-2 bg-orange-100 text-orange-600 rounded-lg",children:r.jsx(Ln,{className:"w-5 h-5"})}),r.jsx("h4",{className:"font-bold",children:"Bronze"})]}),r.jsx("p",{className:"text-2xl font-bold mb-1",children:t((e==null?void 0:e.bronzeDistributed)||0)}),r.jsx("p",{className:"text-xs text-light-muted",children:"Reactions & Activity"})]})})]})]})}const UD=[{value:200,label:"200",description:"Default rate  1 Ruby = 200"},{value:100,label:"100",description:"1 Ruby = 100"},{value:50,label:"50",description:"1 Ruby = 50"},{value:20,label:"20",description:"1 Ruby = 20"},{value:10,label:"10",description:"1 Ruby = 10"}];function BD(){const{user:e}=Z(),[t,s]=f.useState(!1),[n,a]=f.useState(!1),i=U(S.settings.getUserPostCreationEnabled),o=U(S.settings.getCommentsEnabled),l=U(S.settings.getQuestionsOnPostsEnabled),d=U(S.settings.getChatEnabled),c=U(S.settings.getActiveRubyRate),u=V(S.settings.toggleUserPostCreation),m=V(S.settings.toggleCommentsEnabled),h=V(S.settings.toggleQuestionsOnPostsEnabled),x=V(S.settings.toggleChatEnabled),g=V(S.settings.setRubyRate),v=async(p,b,w)=>{if(!(!e||b===void 0)){s(!0);try{await p({adminId:e._id,enabled:!b})}catch(k){console.error(`Failed to update ${w}:`,k),alert("Failed to update setting. Please try again.")}finally{s(!1)}}},y=async p=>{if(e){s(!0);try{await g({adminId:e._id,rate:p}),a(!0),setTimeout(()=>a(!1),2500)}catch(b){alert(b.message||"Failed to update rate.")}finally{s(!1)}}};return e?r.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl pt-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"p-3 rounded-xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10",children:r.jsx(Mw,{className:"w-6 h-6 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-light-text dark:text-dark-text font-display",children:"System Settings"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Manage global permissions and system configurations"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass rounded-2xl p-6 shadow-lg border border-amber-500/20",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx(Lx,{className:"w-5 h-5 text-amber-500"}),r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:"Ruby  Naira Exchange Rate"})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-5",children:"Set how much Naira () each Ruby is worth. This affects what users see on the Banking page in real time. Ruby balances are never changed  only the display value updates."}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-5",children:[r.jsx("span",{className:"text-xs uppercase tracking-widest font-semibold text-light-muted dark:text-dark-muted",children:"Current active rate:"}),r.jsxs("span",{className:"px-3 py-1 rounded-full bg-amber-500/15 text-amber-600 dark:text-amber-400 font-bold text-sm",children:["1 Ruby = ",c??""]}),r.jsx(re,{children:n&&r.jsxs(T.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0},className:"flex items-center gap-1 text-green-600 dark:text-green-400 text-xs font-semibold",children:[r.jsx(et,{className:"w-4 h-4"})," Updated!"]},"ok")})]}),r.jsx("div",{className:"grid grid-cols-5 gap-2 sm:gap-3",children:UD.map(p=>{const b=c===p.value;return r.jsxs("button",{id:`rate-btn-${p.value}`,onClick:()=>y(p.value),disabled:t||b,className:`relative flex flex-col items-center justify-center aspect-square rounded-xl border-2 transition-all duration-200 min-w-0
                                            ${b?"border-amber-500 bg-amber-500/15 shadow-lg shadow-amber-500/20 scale-105":"border-light-border dark:border-dark-border hover:border-amber-400 hover:bg-amber-500/5"} disabled:cursor-not-allowed`,children:[b&&r.jsx("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-amber-500 rounded-full flex items-center justify-center",children:r.jsx(et,{className:"w-3.5 h-3.5 text-white"})}),r.jsx("span",{className:`text-sm sm:text-base font-display font-bold leading-tight text-center ${b?"text-amber-600 dark:text-amber-400":"text-light-text dark:text-dark-text"}`,children:p.label}),r.jsx("span",{className:"text-[9px] sm:text-[10px] text-light-muted dark:text-dark-muted mt-0.5 text-center leading-tight",children:"per Ruby"})]},p.value)})}),r.jsx("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[r.jsx("strong",{children:"Example at current rate:"})," ","24 Rubies (minimum withdrawal) = ",(24*(c??200)).toLocaleString(),"."," ","5 Rubies (winner window) = ",(5*(c??200)).toLocaleString(),"."]})})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"glass rounded-2xl p-6 shadow-lg space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(ke,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"}),r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:"Global Controls"})]}),[{label:"Allow Users to Create Posts",desc:"Enable regular users to create posts. If disabled, only admins and tagged users can post.",value:i,mutation:u,key:"postCreation",icon:null},{label:"Enable Comments Globally",desc:"Allow users to comment on posts. Turning this off hides the comment section on all posts.",value:o,mutation:m,key:"comments",icon:null},{label:'Enable "Ask Question" on Posts',desc:"Allow users to ask questions directly on teaching posts.",value:l,mutation:h,key:"questionsOnPosts",icon:null},{label:"Enable Chat System",desc:"Allow users to chat with each other and admins.",value:d,mutation:x,key:"chat",icon:r.jsx(lt,{className:"w-5 h-5 text-primary-500"})}].map(p=>r.jsx("div",{className:"border border-light-border dark:border-dark-border rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[p.icon,r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text",children:p.label})]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:p.desc})]}),r.jsxs("div",{className:"flex flex-col items-end gap-2",children:[r.jsx("button",{id:`toggle-${p.key}`,onClick:()=>v(p.mutation,p.value,p.key),disabled:t,className:`relative inline-flex h-8 w-14 items-center rounded-full transition-colors ${p.value?"bg-green-500":"bg-gray-300 dark:bg-gray-600"}`,children:r.jsx("span",{className:`inline-block h-6 w-6 transform rounded-full bg-white transition-transform ${p.value?"translate-x-7":"translate-x-1"}`})}),r.jsx("span",{className:"text-xs font-medium text-light-muted dark:text-dark-muted",children:p.value?"ON":"OFF"})]})]})},p.key))]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass rounded-2xl p-6 shadow-lg border-l-4 border-primary-500",children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text mb-2",children:" How it works"}),r.jsx("ul",{className:"space-y-2 text-sm text-light-muted dark:text-dark-muted",children:[["Ruby Rate","Changing the rate only affects Naira display values. All Ruby balances and Talent conversions stay the same."],["Global ON","Every user (even new signups) can immediately create question and prayer posts."],["Global OFF","Users need to be individually tagged by you before they can create posts."],["Admins","Always have permission to create posts, regardless of settings."],["Chat System","Controls whether users can initiate chats. Admins can always chat."]].map(([p,b])=>r.jsxs("li",{className:"flex items-start gap-2",children:[r.jsx("span",{className:"text-primary-500 mt-1",children:""}),r.jsxs("span",{children:[r.jsxs("strong",{children:[p,":"]})," ",b]})]},p))})]})]})]})}):null}const Fo=$r.forwardRef(({className:e,label:t,error:s,...n},a)=>r.jsxs("div",{className:"w-full",children:[t&&r.jsx("label",{className:"block text-sm font-medium mb-1.5 text-light-text dark:text-dark-text",children:t}),r.jsx("textarea",{ref:a,className:J("w-full px-4 py-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-light-text dark:text-dark-text outline-none transition-all duration-200","focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:opacity-50 disabled:cursor-not-allowed","resize-y min-h-[100px]",s&&"border-red-500 focus:ring-red-500",e),...n}),s&&r.jsx("p",{className:"mt-1 text-sm text-red-500 font-medium animate-in slide-in-from-top-1",children:s})]}));Fo.displayName="Textarea";function VD(){const{user:e}=Z(),t=U(S.announcements.getAllAnnouncements,e?{adminId:e._id}:"skip"),s=V(S.announcements.createAnnouncement),n=V(S.announcements.updateAnnouncement),a=V(S.announcements.deleteAnnouncement),[i,o]=f.useState(!1),[l,d]=f.useState(null),[c,u]=f.useState(1),[m,h]=f.useState(null),[x,g]=f.useState({isOpen:!1,id:null}),v=(R,W)=>{h({type:R,message:W}),setTimeout(()=>h(null),5e3)},[y,p]=f.useState({title:"",description:"",imageUrl:"",category:"General",isActive:!0}),b=3,w=()=>{p({title:"",description:"",imageUrl:"",category:"General",isActive:!0}),u(1)},k=()=>{d(null),w(),o(!0)},j=R=>{d(R._id);const W=["General","Ancient Culture","Wisdom of The Now","Ads","Product","Event","Update"].includes(R.category)?R.category:"General";p({title:R.title,description:R.description,imageUrl:R.imageUrl,category:W,isActive:R.isActive}),u(1),o(!0)},N=()=>u(R=>Math.min(R+1,b)),_=()=>u(R=>Math.max(R-1,1)),A=async()=>{if(e)try{l?(await n({adminId:e._id,announcementId:l,...y,category:y.category}),console.log("Announcement updated")):(await s({adminId:e._id,...y,category:y.category}),console.log("Announcement created")),o(!1),w()}catch(R){console.error(R),alert(l?"Failed to update":"Failed to create")}},L=async()=>{if(!(!x.id||!e))try{await a({adminId:e._id,announcementId:x.id}),v("success","Announcement deleted"),g({isOpen:!1,id:null})}catch{v("error","Failed to delete")}},C=async R=>{if(e)try{await n({adminId:e._id,announcementId:R._id,isActive:!R.isActive}),v("success",R.isActive?"Deactivated":"Activated")}catch{v("error","Failed to toggle status")}};if(t===void 0)return r.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[r.jsx("div",{className:"flex justify-between items-center flex-wrap gap-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"h-10 w-64 bg-light-muted/20 dark:bg-dark-muted/20 rounded mb-2 animate-pulse"}),r.jsx("div",{className:"h-4 w-96 bg-light-muted/20 dark:bg-dark-muted/20 rounded animate-pulse"})]})}),r.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3,4,5,6].map(R=>r.jsx(tD,{},R))})]});const P=()=>{switch(c){case 1:return r.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Title"}),r.jsx(me,{placeholder:"Enter announcement title",value:y.title,onChange:R=>p({...y,title:R.target.value}),autoFocus:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Category"}),r.jsx(Hr,{value:y.category,onChange:R=>p({...y,category:R}),options:[{value:"General",label:"General"},{value:"Ancient Culture",label:"Ancient Culture"},{value:"Wisdom of The Now",label:"Wisdom of The Now"},{value:"Ads",label:"Ads"},{value:"Product",label:"Product"},{value:"Event",label:"Event"},{value:"Update",label:"Update"}]})]}),r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:y.isActive,onChange:R=>p({...y,isActive:R.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),r.jsxs("label",{htmlFor:"isActive",className:"text-sm font-medium cursor-pointer flex-1",children:["Active immediately",r.jsx("span",{className:"block text-xs text-light-muted dark:text-dark-muted font-normal",children:"If unchecked, the announcement will be hidden from users until you activate it."})]})]})]});case 2:return r.jsx("div",{className:"space-y-4 animate-in fade-in slide-in-from-right-4 duration-300",children:r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-1 block",children:"Description"}),r.jsx(Fo,{placeholder:"Enter full description...",value:y.description,onChange:R=>p({...y,description:R.target.value}),className:"min-h-[200px] text-base leading-relaxed"}),r.jsxs("p",{className:"text-xs text-right text-light-muted mt-1",children:[y.description.length," characters"]})]})});case 3:return r.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Cover Image"}),r.jsx(GN,{onUploadComplete:R=>p(W=>({...W,imageUrl:R})),currentMedia:y.imageUrl?{url:y.imageUrl,type:"image"}:void 0,allowVideo:!1})]}),y.title&&r.jsxs("div",{className:"p-4 rounded-xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsx("h4",{className:"font-bold text-sm text-light-muted mb-2 uppercase tracking-wider",children:"Preview Summary"}),r.jsxs("div",{className:"flex gap-3",children:[y.imageUrl&&r.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 bg-gray-100 dark:bg-gray-800",children:r.jsx("img",{src:y.imageUrl,alt:"Preview",className:"w-full h-full object-cover"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold truncate",children:y.title}),r.jsx(G,{variant:"outline",className:"text-[10px] mt-1",children:y.category})]})]})]})]});default:return null}};return r.jsxs("div",{className:"space-y-6 pb-20 md:pb-0",children:[r.jsx(cs,{isOpen:x.isOpen,onClose:()=>g({isOpen:!1,id:null}),onConfirm:L,title:"Delete Announcement",description:"Are you sure you want to delete this announcement? This action cannot be undone.",variant:"danger",confirmText:"Delete"}),r.jsx(re,{children:m&&r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:J("fixed top-4 right-4 z-[100] px-6 py-4 rounded-xl shadow-2xl flex items-center gap-3 border backdrop-blur-md",m.type==="success"?"bg-emerald-500 text-white border-emerald-400":"bg-red-500 text-white border-red-400"),children:[m.type==="success"?r.jsx(et,{className:"w-5 h-5"}):r.jsx(ps,{className:"w-5 h-5"}),r.jsx("p",{className:"font-bold",children:m.message})]})}),r.jsxs("div",{className:"flex justify-between items-center flex-wrap gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold font-display text-gradient",children:"Announcements"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Manage community announcements and ads"})]}),r.jsxs(M,{onClick:k,className:"w-full md:w-auto",children:[r.jsx(jc,{className:"w-4 h-4 mr-2"})," New Announcement"]})]}),r.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[t.map(R=>r.jsxs(D,{glass:!0,className:"relative group overflow-hidden flex flex-col h-full",children:[r.jsxs("div",{className:"aspect-video bg-gray-100 dark:bg-gray-800 relative overflow-hidden",children:[R.imageUrl?r.jsx("img",{src:R.imageUrl,alt:R.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:r.jsx(tn,{className:"w-10 h-10"})}),r.jsxs("div",{className:"absolute top-2 right-2 flex gap-2",children:[r.jsx(G,{variant:R.isActive?"success":"secondary",children:R.isActive?"Active":"Hidden"}),r.jsx(G,{variant:"outline",className:"bg-black/50 backdrop-blur-sm text-white border-none",children:R.category})]})]}),r.jsxs(O,{className:"flex-1 flex flex-col p-4",children:[r.jsx("h3",{className:"font-bold text-lg mb-2 line-clamp-1",children:R.title}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted line-clamp-3 mb-4 flex-1",children:R.description}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{size:"sm",variant:"outline",onClick:()=>C(R),title:R.isActive?"Hide":"Show",children:R.isActive?r.jsx(qo,{className:"w-4 h-4"}):r.jsx(Tt,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"outline",onClick:()=>j(R),children:r.jsx(Rd,{className:"w-4 h-4"})})]}),r.jsx(M,{size:"sm",variant:"danger",onClick:()=>g({isOpen:!0,id:R._id}),children:r.jsx(Dr,{className:"w-4 h-4"})})]})]})]},R._id)),t.length===0&&r.jsxs("div",{className:"col-span-full text-center py-12 bg-light-card/30 dark:bg-dark-card/30 rounded-2xl border border-dashed border-light-border dark:border-dark-border",children:[r.jsx(Io,{className:"w-12 h-12 text-light-muted mx-auto mb-4"}),r.jsx("p",{className:"text-lg font-semibold text-light-muted",children:"No announcements yet"}),r.jsx(M,{variant:"outline",className:"mt-4",onClick:k,children:"Create First Announcement"})]})]}),r.jsx(ht,{isOpen:i,onClose:()=>o(!1),title:l?"Edit Announcement":"Create Announcement",className:"max-w-lg",children:r.jsxs("div",{className:"flex flex-col h-full",children:[r.jsx("div",{className:"flex items-center justify-between mb-6 px-1",children:[1,2,3].map(R=>r.jsxs("div",{className:"flex flex-col items-center gap-1 w-1/3 relative z-10",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold transition-all duration-300 ${c>=R?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-light-muted"}`,children:c>R?r.jsx(nt,{className:"w-4 h-4"}):R}),r.jsx("span",{className:`text-[10px] uppercase tracking-wider font-bold mt-1 ${c>=R?"text-primary-500":"text-light-muted"}`,children:R===1?"Details":R===2?"Content":"Media"}),R!==3&&r.jsx("div",{className:`absolute top-4 left-1/2 w-full h-0.5 -z-10 ${c>R?"bg-primary-500":"bg-light-border dark:bg-dark-border"}`})]},R))}),r.jsx("div",{className:"flex-1 overflow-y-auto px-1 py-2 min-h-[300px]",children:P()}),r.jsxs("div",{className:"flex items-center justify-between pt-6 mt-2 border-t border-light-border dark:border-dark-border",children:[r.jsx(M,{variant:"outline",onClick:c===1?()=>o(!1):_,className:"w-[100px]",children:c===1?"Cancel":r.jsxs(r.Fragment,{children:[r.jsx(Zn,{className:"w-4 h-4 mr-1"})," Back"]})}),r.jsx("div",{className:"flex gap-2",children:c<b?r.jsxs(M,{onClick:N,className:"w-[100px]",children:["Next ",r.jsx(_o,{className:"w-4 h-4 ml-1"})]}):r.jsxs(M,{onClick:A,className:"w-[120px] bg-green-500 hover:bg-green-600 border-none shadow-lg shadow-green-500/20",children:[l?"Update":"Create"," ",r.jsx(nt,{className:"w-4 h-4 ml-2"})]})})]})]})})]})}function $D(){const{user:e}=Z(),t=U(S.polls.getAdminPolls,{limit:20}),s=V(S.polls.createPoll),n=V(S.polls.closePoll),a=V(S.polls.deletePoll),[i,o]=f.useState(""),[l,d]=f.useState(["","","",""]),[c,u]=f.useState(0),[m,h]=f.useState(48),[x,g]=f.useState(!1),[v,y]=f.useState(!1),[p,b]=f.useState(null),[w,k]=f.useState(null),[j,N]=f.useState(null),_=(P,R)=>{const W=[...l];W[P]=R,d(W)},A=async P=>{if(P.preventDefault(),N(null),!(!e||x)){if(!i.trim()){N("Question is required");return}if(l.some(R=>!R.trim())){N("All options are required");return}g(!0);try{await s({question:i,options:l,correctOptionIndex:c,durationHours:m,adminId:e._id}),y(!0),setTimeout(()=>y(!1),5e3),o(""),d(["","","",""]),u(0)}catch(R){console.error(R),N(R.message||"Failed to create poll")}finally{g(!1)}}},L=async()=>{if(!(!p||!e))try{await n({pollId:p,adminId:e._id}),b(null)}catch(P){N(P.message||"Failed to close poll")}},C=async()=>{if(!(!w||!e))try{await a({pollId:w,adminId:e._id}),k(null),y(!0),setTimeout(()=>y(!1),3e3)}catch(P){N(P.message||"Failed to delete poll")}};return t===void 0?r.jsx("div",{className:"p-8",children:"Loading polls..."}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-display font-bold text-light-text dark:text-dark-text mb-2",children:"Weekly Poll Management"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Create and manage wisdom polls for the Silver Pool game."})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsx(ge,{children:"Create New Poll"})}),r.jsx(O,{children:r.jsxs("form",{onSubmit:A,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Question"}),r.jsx(me,{value:i,onChange:P=>o(P.target.value),placeholder:"Enter wisdom question...",required:!0})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium",children:"Options"}),l.map((P,R)=>r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("div",{className:`w-6 h-6 rounded-full border flex items-center justify-center cursor-pointer transition-colors ${c===R?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-primary-500"}`,onClick:()=>u(R),title:"Mark as correct answer",children:c===R&&r.jsx(nt,{className:"w-4 h-4"})}),r.jsx(me,{value:P,onChange:W=>_(R,W.target.value),placeholder:`Option ${R+1}`,required:!0})]},R)),r.jsx("p",{className:"text-xs text-light-muted",children:"Click the circle to mark the correct answer."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:"Duration (Hours)"}),r.jsx(me,{type:"number",value:m,onChange:P=>h(Number(P.target.value)),min:1,max:168})]}),r.jsxs(re,{children:[v&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-green-500/10 border border-green-500/20 rounded-2xl flex items-center gap-3 text-green-600 dark:text-green-400 mb-4",children:[r.jsx(et,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:"Poll created and broadcasted successfully!"})]}),j&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-4 bg-red-500/10 border border-red-500/20 rounded-2xl flex items-center gap-3 text-red-600 dark:text-red-400 mb-4",children:[r.jsx(ln,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:j})]})]}),r.jsx(M,{type:"submit",isLoading:x,className:"w-full h-12 rounded-2xl font-bold tracking-wide",children:"Create Poll"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-xl font-bold",children:"Recent Polls"}),t.length===0?r.jsx("p",{className:"text-light-muted",children:"No polls found."}):t.map(P=>{var W,Y;const R=P.status==="active"&&Date.now()<P.expiresAt;return r.jsx(D,{className:"border border-light-border dark:border-dark-border group overflow-hidden",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase transition-colors ${R?"bg-emerald-500/10 text-emerald-500 border border-emerald-500/20":"bg-gray-500/10 text-gray-500 border border-gray-500/20"}`,children:R?"Active":"Closed"}),r.jsx("button",{onClick:()=>k(P._id),className:"p-1.5 text-light-muted hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",title:"Delete Poll",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M3 6h18"}),r.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),r.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"}),r.jsx("line",{x1:"10",x2:"10",y1:"11",y2:"17"}),r.jsx("line",{x1:"14",x2:"14",y1:"11",y2:"17"})]})})]}),r.jsx("span",{className:"text-[10px] text-light-muted font-mono uppercase tracking-widest",children:new Date(P.createdAt).toLocaleDateString()})]}),r.jsx("h4",{className:"font-bold mb-2 line-clamp-2 text-sm leading-relaxed",children:P.question}),r.jsxs("div",{className:"flex justify-between items-center text-sm text-light-muted mb-2",children:[r.jsxs("span",{className:"text-xs font-medium",children:[P.totalVotes," Members Voted"]}),R&&r.jsx(M,{size:"sm",variant:"danger",className:"h-8 rounded-xl text-[10px] font-bold tracking-widest",onClick:()=>b(P._id),children:"CLOSE POLL"})]}),P.totalVotes>0&&r.jsxs("div",{className:"flex gap-4 text-[10px] pt-3 mt-1 border-t border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-1.5 text-emerald-600 dark:text-emerald-400 font-bold uppercase tracking-wider",children:[r.jsx(nt,{className:"w-3 h-3"}),((W=P.options.find(se=>se.id===P.correctOptionId))==null?void 0:W.voteCount)||0," Correct"]}),r.jsxs("div",{className:"flex items-center gap-1.5 text-red-500 font-bold uppercase tracking-wider",children:[r.jsx(ln,{className:"w-3 h-3"}),P.totalVotes-(((Y=P.options.find(se=>se.id===P.correctOptionId))==null?void 0:Y.voteCount)||0)," Incorrect"]})]})]})},P._id)})]})]}),r.jsx(cs,{isOpen:!!p,onClose:()=>b(null),onConfirm:L,title:"Close Poll",description:"Are you sure you want to end this poll early? No more votes will be accepted.",confirmText:"Close Poll",variant:"danger"}),r.jsx(cs,{isOpen:!!w,onClose:()=>k(null),onConfirm:C,title:"Delete Poll",description:"Are you sure you want to permanently delete this poll and all its associated votes? This action cannot be undone.",confirmText:"Delete Permanently",variant:"danger"})]})}function zD({isEmbedded:e=!1}){const{user:t,isLoading:s}=Z(),n=U(S.contacts.getContacts,t?{adminId:t._id}:"skip"),a=V(S.contacts.markContactAsRead),i=V(S.contacts.deleteContact),[o,l]=f.useState(null);if(s)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl",children:[r.jsx(Xt,{}),r.jsx(aa,{count:3})]})});if(!t)return r.jsx(Ee,{to:"/login",replace:!0});if(t.role!=="admin"&&t.role!=="super_admin")return r.jsx(Ee,{to:"/feed",replace:!0});const d=async u=>{try{await a({adminId:t._id,contactId:u})}catch(m){console.error("Failed to mark as read:",m)}},c=async u=>{if(confirm("Are you sure you want to delete this message?")){l(u);try{await i({adminId:t._id,contactId:u})}catch(m){console.error("Failed to delete contact:",m)}finally{l(null)}}};return r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[!e&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary-600 dark:text-primary-400 mb-2",children:"Contact Messages"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:[(n==null?void 0:n.length)||0," total messages"]})]}),r.jsx(zr,{className:"w-12 h-12 text-primary-500"})]}),n?r.jsxs("div",{className:"space-y-4",children:[e&&r.jsxs("p",{className:"text-light-muted dark:text-dark-muted mb-4 font-bold text-sm",children:[n.length||0," total messages"]}),n.length===0?r.jsxs("div",{className:"glass rounded-xl p-12 text-center",children:[r.jsx(zr,{className:"w-16 h-16 mx-auto mb-4 text-light-muted dark:text-dark-muted opacity-50"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted text-lg",children:"No contact messages yet"})]}):r.jsx("div",{className:"space-y-4",children:n.map(u=>r.jsxs(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:`glass rounded-xl p-6 border ${u.read?"border-light-border dark:border-dark-border":"border-primary-500/50 bg-primary-50/30 dark:bg-primary-900/10"}`,children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("h3",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:u.subject}),!u.read&&r.jsx("span",{className:"px-2 py-0.5 rounded-full bg-primary-500 text-white text-xs font-bold",children:"NEW"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-sm text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-semibold",children:u.name}),r.jsx("span",{children:""}),r.jsx("a",{href:`mailto:${u.email}`,className:"hover:text-primary-500 transition-colors",children:u.email}),r.jsx("span",{children:""}),r.jsx("span",{children:ot(u.createdAt,{addSuffix:!0})})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>d(u._id),disabled:u.read,className:`p-2 rounded-lg transition-all ${u.read?"text-light-muted dark:text-dark-muted cursor-not-allowed":"text-primary-500 hover:bg-primary-100 dark:hover:bg-primary-900/20"}`,title:u.read?"Already read":"Mark as read",children:u.read?r.jsx(qo,{className:"w-5 h-5"}):r.jsx(Tt,{className:"w-5 h-5"})}),r.jsx("button",{onClick:()=>c(u._id),disabled:o===u._id,className:"p-2 rounded-lg text-red-500 hover:bg-red-100 dark:hover:bg-red-900/20 transition-all disabled:opacity-50",title:"Delete message",children:r.jsx(Dr,{className:"w-5 h-5"})})]})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text whitespace-pre-wrap",children:u.message})]},u._id))})]}):r.jsx(aa,{count:3})]})}function KN({isEmbedded:e=!1}){var Fp,Up,Bp,Vp;const{user:t}=Z(),s=de(),[n,a]=f.useState("direct"),[i,o]=f.useState(null),[l,d]=f.useState(""),[c,u]=f.useState(""),[m,h]=f.useState(""),[x,g]=f.useState(!1),[v,y]=f.useState(null),[p,b]=f.useState(null),[w,k]=f.useState(null),[j,N]=f.useState(null),[_,A]=f.useState(""),[L,C]=f.useState(null),[P,R]=f.useState(null),[W,Y]=f.useState(null),[se,Q]=f.useState(null),[pe,$]=f.useState(!1),I=U(S.chat.getConversations,t?{userId:t._id}:"skip"),F=U(S.chat.getMessages,i&&t?{conversationId:i,userId:t._id}:"skip"),q=U(S.users.getChatContacts,t?{userId:t._id}:"skip"),ce=U(S.settings.getGlobalChatWallpaper),ae=U(S.chat.getCommunityGroup),H=U(S.chat.getGroupMessages,ae?{groupId:ae._id}:"skip"),le=V(S.chat.sendMessage),ue=V(S.chat.markAsRead),xr=V(S.chat.editMessage),pi=V(S.chat.deleteMessage),vn=V(S.chat.toggleReaction),Ns=V(S.users.updateChatWallpaper),tr=V(S.chat.getOrCreateCommunityGroup),nl=V(S.chat.sendGroupMessage),zc=V(S.chat.editGroupMessage),al=V(S.chat.deleteGroupMessage),Wc=V(S.chat.toggleGroupReaction),qc=V(S.chat.toggleGroupLock),Hc=V(S.chat.recordGroupMessageView),[wn,kn]=f.useState(null),Ss=U(S.chat.getGroupMessageViews,wn?{messageId:wn}:"skip"),pr=f.useRef(null),fr=f.useRef(null),Cs=f.useRef(null),Ts=f.useRef(null),fi=f.useRef(null),[jn,xe]=f.useState(null),rr=U(S.chat.getReactionDetails,jn?{messageId:jn.id,isGroup:jn.isGroup}:"skip"),[Gc,il]=f.useState(0);f.useEffect(()=>{const E=window.visualViewport;if(!E)return;const X=()=>{const Te=Math.max(0,window.innerHeight-E.height-E.offsetTop);il(Te),Te>0&&setTimeout(()=>{var Me,zt;(Me=pr.current)==null||Me.scrollTo({top:pr.current.scrollHeight,behavior:"smooth"}),(zt=fr.current)==null||zt.scrollTo({top:fr.current.scrollHeight,behavior:"smooth"})},100)};return E.addEventListener("resize",X),E.addEventListener("scroll",X),()=>{E.removeEventListener("resize",X),E.removeEventListener("scroll",X)}},[]);const gi=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="super_admin";f.useEffect(()=>{t&&ae===null&&tr({userId:t._id}).catch(console.error)},[ae,t]),f.useEffect(()=>{pr.current&&(pr.current.scrollTop=pr.current.scrollHeight)},[F,i,v]),f.useEffect(()=>{fr.current&&(fr.current.scrollTop=fr.current.scrollHeight)},[H,n]),f.useEffect(()=>{if(!H||!t||n!=="group")return;const E=new IntersectionObserver(Te=>{Te.forEach(Me=>{if(Me.isIntersecting){const zt=Me.target.dataset.msgid,xt=Me.target.dataset.senderid;zt&&xt&&xt!==t._id&&Hc({messageId:zt,userId:t._id}).catch(()=>{})}})},{threshold:.5});return document.querySelectorAll("[data-groupmsg]").forEach(Te=>E.observe(Te)),()=>E.disconnect()},[H,t,n]),f.useEffect(()=>{Cs.current&&(Cs.current.style.height="auto",Cs.current.style.height=`${Math.min(Cs.current.scrollHeight,120)}px`)},[l]),f.useEffect(()=>{Ts.current&&(Ts.current.style.height="auto",Ts.current.style.height=`${Math.min(Ts.current.scrollHeight,120)}px`)},[_]);const ZN=V(S.chat.markGroupAsRead);f.useEffect(()=>{i&&t&&ue({conversationId:i,userId:t._id})},[i,F,t]),f.useEffect(()=>{n==="group"&&t&&ZN({userId:t._id})},[n,H,t]);const e1=async E=>{var Te;const X=(Te=E.target.files)==null?void 0:Te[0];if(!(!X||!t)){$(!0);try{const Me=await Bc(X,"announcements");await Ns({userId:t._id,wallpaperUrl:Me})}catch{alert("Failed to update wallpaper")}finally{$(!1)}}},Mp=async E=>{if(!(!l.trim()||!i||!t))try{if(p)await xr({messageId:p._id,userId:t._id,newText:l}),b(null);else{const X=I==null?void 0:I.find(Me=>Me._id===i),Te=(X==null?void 0:X.participantOne)===t._id?X.participantTwo:X==null?void 0:X.participantOne;if(!Te)return;await le({senderId:t._id,recipientId:Te,text:l,replyToId:v==null?void 0:v._id}),y(null)}d("")}catch(X){console.error("Failed to send message:",X),alert(X.message||"Failed to send message")}},t1=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),Mp())},r1=async E=>{if(t)try{const X=await le({senderId:t._id,recipientId:E,text:"Hi!"});o(X),g(!1),h("")}catch(X){console.error("Failed to start conversation:",X),alert(X.message||"Failed to start conversation")}},Rp=async E=>{if(!(!_.trim()||!ae||!t))try{P?(await zc({messageId:P._id,userId:t._id,newText:_}),R(null)):(await nl({groupId:ae._id,senderId:t._id,text:_,replyToId:L==null?void 0:L._id}),C(null)),A("")}catch(X){console.error("Failed to send group message:",X),alert(X.message||"Failed to send group message")}},s1=E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),Rp())},n1=async()=>{!ae||!t||!gi||await qc({groupId:ae._id,adminId:t._id,locked:!ae.isLocked})},ol=f.useRef(null),Lp=f.useRef(!1),Dp=(E,X=!1)=>{Lp.current=!1,ol.current=setTimeout(()=>{Lp.current=!0,X?Q(E):N(E)},500)},Op=()=>{ol.current&&(clearTimeout(ol.current),ol.current=null)},a1=()=>{x?g(!1):i&&o(null)},ha=I==null?void 0:I.filter(E=>{var X;return(X=E.otherUser)==null?void 0:X.name.toLowerCase().includes(c.toLowerCase())}),xa=q==null?void 0:q.filter(E=>E._id!==(t==null?void 0:t._id)&&E.name.toLowerCase().includes(m.toLowerCase())),bi=I==null?void 0:I.find(E=>E._id===i);if(!t)return s("/login"),null;const i1=E=>{var zt;const X=E.senderId===t._id;if(E.isDeleted)return r.jsx("div",{className:`flex ${X?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:"px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-xs text-gray-500 italic flex items-center gap-2",children:[r.jsx(Dr,{className:"w-3 h-3"})," This message was deleted"]})},E._id);const Me=E.senderRole==="super_admin"?"text-amber-500":E.senderRole==="admin"?"text-primary-500":"text-gray-500";return r.jsxs("div",{className:`group relative flex ${X?"justify-end":"justify-start"} mb-3`,onMouseEnter:()=>Y(E._id),onMouseLeave:()=>Y(null),"data-groupmsg":"true","data-msgid":E._id,"data-senderid":E.senderId,children:[!X&&r.jsx("div",{className:"flex-shrink-0 mr-2 mt-1",children:r.jsx("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white text-xs font-bold overflow-hidden",children:E.senderAvatar?r.jsx("img",{src:E.senderAvatar,alt:E.senderName,className:"w-full h-full object-cover"}):(zt=E.senderName)==null?void 0:zt[0]})}),r.jsxs(T.div,{drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(xt,yi)=>{yi.offset.x<-50&&C(E)},whileDrag:{scale:1.02},className:"relative max-w-[78%] md:max-w-[65%]",onTouchStart:()=>Dp(E,!0),onTouchEnd:Op,children:[W===E._id&&r.jsx("div",{className:`absolute top-0 ${X?"-left-8":"-right-8"} z-20`,children:r.jsx("button",{className:"p-1 rounded-full bg-gray-200 dark:bg-gray-700 shadow-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",onClick:xt=>{xt.stopPropagation(),Q(E)},children:r.jsx(Ke,{className:"w-3 h-3 text-gray-600 dark:text-gray-300"})})}),r.jsxs("div",{className:`flex flex-col ${X?"items-end":"items-start"}`,children:[!X&&r.jsxs("span",{className:`text-[10px] font-bold mb-0.5 flex items-center gap-1 ${Me}`,children:[E.senderRole==="super_admin"&&r.jsx(Cw,{className:"w-3 h-3"}),E.senderRole==="admin"&&r.jsx(We,{className:"w-3 h-3"}),E.senderName]}),E.replyTo&&r.jsxs("div",{className:`mb-1 text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border-l-2 border-primary-500 w-full opacity-80 ${E.replyTo.isDeleted?"italic":""}`,children:[r.jsx("span",{className:"font-bold block text-primary-500",children:E.replyTo.senderName}),E.replyTo.isDeleted?"Message deleted":E.replyTo.text.length>50?E.replyTo.text.substring(0,50)+"...":E.replyTo.text]}),r.jsxs("div",{className:`px-4 py-2 rounded-2xl text-sm whitespace-pre-wrap break-words shadow-sm ${X?"bg-primary-500 text-white rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-none"}`,style:{wordBreak:"break-word",overflowWrap:"break-word"},children:[E.text,r.jsxs("div",{className:`text-[10px] mt-1 flex items-center justify-end gap-1.5 ${X?"text-white/70":"text-gray-400"}`,children:[E.isEdited&&r.jsx("span",{className:"opacity-70",children:"(edited)"}),r.jsx("span",{className:"opacity-70",children:ot(E.createdAt,{addSuffix:!1})}),X&&r.jsxs("button",{onClick:xt=>{xt.stopPropagation(),kn(wn===E._id?null:E._id)},className:"flex items-center gap-0.5 opacity-75 hover:opacity-100 transition-opacity ml-0.5",title:"See who viewed this",children:[r.jsx(Tt,{className:"w-3 h-3"}),E._viewCount!=null&&E._viewCount>0&&r.jsx("span",{className:"text-[9px] font-semibold",children:E._viewCount})]})]})]}),E.reactions&&E.reactions.length>0&&r.jsx(T.div,{initial:{scale:0},animate:{scale:1},className:`flex -mt-2 ${X?"mr-2":"ml-2"} z-10 cursor-pointer`,children:E.reactions.map((xt,yi)=>r.jsx("button",{onClick:Qc=>{Qc.stopPropagation(),xe({id:E._id,isGroup:!0})},className:"text-xs bg-white dark:bg-gray-800 rounded-full shadow border border-gray-100 dark:border-gray-700 w-5 h-5 flex items-center justify-center hover:scale-110 transition-transform",children:xt.emoji},yi))})]})]})]},E._id)},o1=wn?r.jsx(re,{children:r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[200] flex items-end sm:items-center justify-center",onClick:()=>kn(null),children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{y:60,opacity:0},animate:{y:0,opacity:1},exit:{y:60,opacity:0},transition:{type:"spring",damping:22},className:"relative z-10 w-full max-w-sm mx-4 mb-4 sm:mb-0 bg-white dark:bg-gray-900 rounded-2xl shadow-2xl overflow-hidden",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100 dark:border-gray-800",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-200",children:[r.jsx(Tt,{className:"w-4 h-4 text-primary-500"}),r.jsx("h2",{className:"text-sm font-bold",children:"Seen by"}),Ss&&r.jsx("span",{className:"text-xs bg-primary-100 dark:bg-primary-900/40 text-primary-600 dark:text-primary-400 rounded-full px-2 py-0.5 font-semibold",children:Ss.length})]}),r.jsx("button",{onClick:()=>kn(null),className:"p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r.jsx(Ae,{className:"w-4 h-4 text-gray-500"})})]}),r.jsx("div",{className:"max-h-72 overflow-y-auto custom-thin-scrollbar",children:Ss?Ss.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-gray-400 dark:text-gray-600",children:[r.jsx(Tt,{className:"w-10 h-10 mb-2 opacity-30"}),r.jsx("p",{className:"text-sm",children:"No views yet"})]}):r.jsx("ul",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:Ss.map((E,X)=>{var Te;return r.jsxs(T.li,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:X*.04},className:"flex items-center gap-3 px-5 py-3",children:[r.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-primary-400 to-secondary-400 flex items-center justify-center text-white text-sm font-bold overflow-hidden flex-shrink-0",children:E.avatarUrl?r.jsx("img",{src:E.avatarUrl,alt:E.name,className:"w-full h-full object-cover"}):(Te=E.name)==null?void 0:Te[0]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100 truncate",children:E.name}),r.jsxs("p",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:["Seen ",ot(E.seenAt,{addSuffix:!0})]})]}),r.jsx(Tt,{className:"w-3.5 h-3.5 text-primary-400 flex-shrink-0"})]},E.userId)})}):r.jsx("div",{className:"flex items-center justify-center h-20",children:r.jsx(Wn,{className:"w-5 h-5 animate-spin text-primary-400"})})})]})]},"seenby-backdrop")}):null,l1=jn?r.jsx(re,{children:r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[300] flex items-end sm:items-center justify-center p-4",onClick:()=>xe(null),children:[r.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},exit:{y:100,opacity:0},className:"relative z-10 w-full max-w-sm bg-white dark:bg-gray-900 rounded-3xl shadow-2xl overflow-hidden",onClick:E=>E.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-100 dark:border-gray-800",children:[r.jsx("h3",{className:"font-bold text-gray-900 dark:text-gray-100 italic",children:"Reactions"}),r.jsx("button",{onClick:()=>xe(null),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:r.jsx(Ae,{className:"w-5 h-5 text-gray-500"})})]}),r.jsx("div",{className:"max-h-[60vh] overflow-y-auto custom-thin-scrollbar",children:rr?rr.length===0?r.jsx("div",{className:"py-12 text-center text-gray-500 italic",children:"No reactions yet"}):r.jsx("div",{className:"divide-y divide-gray-50 dark:divide-gray-800",children:rr.map((E,X)=>r.jsxs("div",{className:"flex items-center gap-3 px-6 py-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors",children:[r.jsxs("div",{className:"relative",children:[r.jsx(dt,{src:E.avatarUrl,alt:E.name,className:"w-10 h-10 border-2 border-primary-500/20"}),r.jsx("span",{className:"absolute -bottom-1 -right-1 bg-white dark:bg-gray-800 rounded-full shadow-sm text-xs w-5 h-5 flex items-center justify-center border border-gray-100 dark:border-gray-700",children:E.emoji})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-gray-900 dark:text-gray-100",children:E.name}),r.jsx("p",{className:"text-[10px] text-primary-500 font-medium",children:ot(E.createdAt,{addSuffix:!0})})]})]},X))}):r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx(Wn,{className:"w-8 h-8 animate-spin text-primary-500"})})})]})]},"reaction-backdrop")}):null;return r.jsxs("div",{className:`${e?"relative w-full h-full":"fixed inset-0 z-[100]"} bg-light-bg dark:bg-dark-bg flex flex-col`,style:{paddingBottom:Gc},children:[o1,l1,r.jsx("input",{type:"file",ref:fi,onChange:e1,className:"hidden",accept:"image/*"}),r.jsx("style",{children:`
                .custom-thin-scrollbar::-webkit-scrollbar { width: 4px; }
                .custom-thin-scrollbar::-webkit-scrollbar-track { background: transparent; }
                .custom-thin-scrollbar::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 10px; }
                .dark .custom-thin-scrollbar::-webkit-scrollbar-thumb { background: #4b5563; }
                /* Prevent body scroll bounce when mobile keyboard opens */
                body { overscroll-behavior: none; }
                /* Hide scrollbar on textareas */
                .scrollbar-none::-webkit-scrollbar { display: none; }
                .scrollbar-none { -ms-overflow-style: none; scrollbar-width: none; }
            `}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:`${i&&n==="direct"?"hidden md:flex":"flex"} md:w-[380px] flex-col border-r border-light-border dark:border-dark-border bg-white dark:bg-dark-card flex-shrink-0 w-full relative`,children:[r.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border bg-white dark:bg-dark-card flex-shrink-0",children:[r.jsx("div",{className:"flex items-center justify-between mb-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>s("/feed"),className:"md:hidden p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 -ml-2",children:r.jsx(ur,{className:"w-5 h-5"})}),r.jsx("h1",{className:"text-xl md:text-2xl font-bold text-light-text dark:text-dark-text",children:"Messages"})]})}),r.jsx("div",{className:"flex gap-1 p-1 bg-gray-100 dark:bg-gray-800 rounded-xl",children:(()=>{const E=(I==null?void 0:I.reduce((Te,Me)=>Te+(Me.unreadCount||0),0))||0;let X=0;if(ae&&H&&t){const Te=t.lastViewedCommunityChatAt??0,Me=H.reduce((xt,yi)=>{var $p;const Qc=(($p=yi.reactions)==null?void 0:$p.filter(zp=>zp.userId!==t._id&&zp.createdAt>Te).length)||0;return xt+Qc},0);X=H.filter(xt=>xt.senderId!==t._id&&xt.createdAt>Te).length+Me}return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>a("direct"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-bold transition-all relative ${n==="direct"?"bg-white dark:bg-gray-700 text-primary-500 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[r.jsx(lt,{className:"w-4 h-4"})," Direct",E>0&&r.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-primary-500 text-white text-[9px] flex items-center justify-center rounded-full border border-white dark:border-gray-800 font-bold shadow-sm animate-bounce",children:E>9?"9+":E})]}),r.jsxs("button",{onClick:()=>{a("group"),!ae&&t&&tr({userId:t._id})},className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-xs font-bold transition-all relative ${n==="group"?"bg-white dark:bg-gray-700 text-primary-500 shadow-sm":"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[r.jsx(ke,{className:"w-4 h-4"})," Community",X>0&&r.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] px-1 bg-green-500 text-white text-[9px] flex items-center justify-center rounded-full border border-white dark:border-gray-800 font-bold shadow-sm animate-bounce",children:X>9?"9+":X}),(ae==null?void 0:ae.isLocked)&&r.jsx(Ye,{className:"w-3 h-3 text-amber-500"})]})]})})()})]}),n==="direct"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"p-3 border-b border-light-border dark:border-dark-border flex-shrink-0 bg-white dark:bg-dark-card",children:r.jsxs("div",{className:"relative",children:[r.jsx(mt,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search conversations...",value:c,onChange:E=>u(E.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 border-none text-sm focus:ring-2 focus:ring-primary-500"})]})}),x&&r.jsxs("div",{className:"absolute inset-x-0 top-0 bottom-[60px] z-20 bg-white dark:bg-dark-card flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex-shrink-0 bg-white dark:bg-dark-card",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("button",{onClick:()=>g(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(ur,{className:"w-5 h-5"})}),r.jsx("h2",{className:"text-lg font-bold",children:"New Message"})]}),!gi&&r.jsxs("p",{className:"text-xs text-gray-500 mb-3 bg-gray-50 dark:bg-gray-800 px-3 py-2 rounded-lg",children:[" You can message ",r.jsx("strong",{children:"admins"})," and ",r.jsx("strong",{children:"members you follow"}),"."]}),r.jsxs("div",{className:"relative",children:[r.jsx(mt,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search contacts...",value:m,onChange:E=>h(E.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 border-none text-sm focus:ring-2 focus:ring-primary-500",autoFocus:!0})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-thin-scrollbar",children:q?(xa==null?void 0:xa.length)===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-8 text-center text-gray-500 text-sm",children:[r.jsx(Ot,{className:"w-12 h-12 mb-3 text-gray-300"}),r.jsx("p",{children:"No contacts found."}),!gi&&r.jsx("p",{className:"text-xs mt-2",children:"Follow other members to chat with them."})]}):xa==null?void 0:xa.map(E=>r.jsxs("div",{onClick:()=>r1(E._id),className:"flex items-center gap-3 p-4 hover:bg-gray-50 dark:hover:bg-gray-800 cursor-pointer transition-colors border-b border-light-border/50 dark:border-dark-border/50",children:[r.jsx(dt,{src:E.avatarUrl,alt:E.name,className:"w-12 h-12"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:E.name}),(E.role==="admin"||E.role==="super_admin")&&r.jsx("span",{className:"text-[9px] font-bold px-1.5 py-0.5 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-600 uppercase",children:E.role==="super_admin"?"Super Admin":"Admin"})]}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:E.email})]})]},E._id)):r.jsx("div",{className:"p-4",children:r.jsx(_b,{count:8})})})]}),r.jsx("div",{className:"flex-1 overflow-y-auto custom-thin-scrollbar",children:I?(ha==null?void 0:ha.length)===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[r.jsx(Ot,{className:"w-16 h-16 text-gray-300 dark:text-gray-700 mb-4"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"No conversations yet"}),r.jsx("button",{onClick:()=>g(!0),className:"mt-4 px-4 py-2 bg-primary-500 text-white rounded-xl text-sm font-semibold hover:bg-primary-600 transition-colors",children:"Start a conversation"})]}):ha==null?void 0:ha.map(E=>{var X,Te,Me;return r.jsxs("div",{onClick:()=>o(E._id),className:`flex items-center gap-3 p-4 cursor-pointer transition-colors border-b border-light-border/50 dark:border-dark-border/50 ${i===E._id?"bg-primary-50 dark:bg-primary-900/20":"hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[r.jsx(dt,{src:(X=E.otherUser)==null?void 0:X.avatarUrl,alt:((Te=E.otherUser)==null?void 0:Te.name)||"User",className:"w-12 h-12"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[r.jsx("h4",{className:"font-semibold text-sm text-gray-900 dark:text-gray-100 truncate",children:(Me=E.otherUser)==null?void 0:Me.name}),r.jsx("span",{className:"text-[10px] text-gray-500 ml-2 flex-shrink-0",children:ot(E.updatedAt,{addSuffix:!1})})]}),r.jsxs("p",{className:`text-xs truncate ${(E.unreadCount||0)>0?"font-bold text-gray-900 dark:text-gray-100":"text-gray-500"}`,children:[E.lastMessageSenderId===(t==null?void 0:t._id)?"You: ":"",E.lastMessageText||"Start a conversation"]})]}),(E.unreadCount||0)>0&&r.jsx("div",{className:"min-w-[20px] h-5 px-1.5 bg-primary-500 rounded-full flex items-center justify-center text-[10px] text-white font-bold animate-pulse",children:E.unreadCount})]},E._id)}):r.jsx("div",{className:"p-4",children:r.jsx(_b,{count:6})})}),r.jsxs("div",{className:"flex-shrink-0 bg-white dark:bg-dark-card border-t border-light-border dark:border-dark-border py-2 px-6 flex justify-center gap-10 md:gap-16 items-center",children:[r.jsxs("button",{onClick:a1,className:`flex flex-col items-center gap-1 ${x?"text-light-muted dark:text-dark-muted hover:text-primary-500":"text-primary-500"}`,children:[r.jsx(lt,{className:"w-6 h-6 md:w-7 md:h-7 fill-current"}),r.jsx("span",{className:"text-[10px] font-bold",children:"Chats"})]}),r.jsxs("button",{onClick:()=>g(!0),className:`flex flex-col items-center gap-1 -mt-6 ${x?"text-primary-500":"text-light-muted dark:text-dark-muted hover:text-primary-500"}`,children:[r.jsx("div",{className:`w-12 h-12 md:w-14 md:h-14 rounded-full flex items-center justify-center text-white shadow-lg ${x?"bg-primary-600 ring-4 ring-primary-100":"bg-primary-500 shadow-primary-500/30"}`,children:r.jsx(Ot,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("span",{className:"text-[10px] font-bold mt-1",children:"New Chat"})]}),r.jsxs(te,{to:"/feed",className:"flex flex-col items-center gap-1 text-light-muted dark:text-dark-muted hover:text-primary-500",children:[r.jsx(Gr,{className:"w-6 h-6 md:w-7 md:h-7"}),r.jsx("span",{className:"text-[10px] font-bold",children:"Feed"})]})]})]}),n==="group"&&r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"p-3 border-b border-light-border dark:border-dark-border bg-white dark:bg-dark-card flex items-center gap-3 flex-shrink-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold text-lg flex-shrink-0",children:r.jsx(ke,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-sm text-gray-900 dark:text-gray-100",children:(ae==null?void 0:ae.name)||"Community"}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:(ae==null?void 0:ae.description)||"All members"})]}),gi&&ae&&r.jsx("button",{onClick:n1,className:`p-2 rounded-lg transition-all text-sm font-bold flex items-center gap-1 ${ae.isLocked?"bg-amber-100 dark:bg-amber-900/30 text-amber-600 hover:bg-amber-200":"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"}`,title:ae.isLocked?"Unlock group (allow all to message)":"Lock group (admins only)",children:ae.isLocked?r.jsx(Ye,{className:"w-4 h-4"}):r.jsx(Lw,{className:"w-4 h-4"})})]}),(ae==null?void 0:ae.isLocked)&&r.jsxs("div",{className:"px-4 py-2 bg-amber-50 dark:bg-amber-900/20 border-b border-amber-200 dark:border-amber-800 flex items-center gap-2 text-xs text-amber-700 dark:text-amber-400 font-medium",children:[r.jsx(Ye,{className:"w-3 h-3"}),"Group is locked  only admins can send messages"]}),r.jsxs("div",{ref:fr,className:"flex-1 p-4 overflow-y-auto custom-thin-scrollbar overflow-x-hidden relative",style:{backgroundImage:ce?`url(${ce})`:void 0,backgroundSize:"cover",backgroundPosition:"center"},children:[ce&&r.jsx("div",{className:"absolute inset-0 bg-white/70 dark:bg-black/60 pointer-events-none z-0"}),r.jsx("div",{className:"relative z-10 space-y-1",children:H?H.length===0?r.jsx("div",{className:"flex items-center justify-center h-full pt-20",children:r.jsxs("div",{className:"text-center text-gray-500 text-sm",children:[r.jsx(ke,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{children:"No messages yet. Say hi to the community! "})]})}):H.map(i1):r.jsx(Tb,{})})]}),r.jsxs("div",{className:"p-3 bg-white/90 dark:bg-dark-card/90 backdrop-blur-md border-t border-light-border dark:border-dark-border flex-shrink-0",children:[r.jsx(re,{children:(L||P)&&r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex items-center justify-between px-3 py-2 mb-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm border-l-4 border-primary-500",children:[r.jsxs("div",{className:"flex flex-col justify-center text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-bold text-xs text-primary-500",children:P?"Editing message":`Replying to ${L.senderName}`}),r.jsx("span",{className:"text-xs truncate max-w-[200px] opacity-70",children:P?P.text:L.text})]}),r.jsx("button",{onClick:()=>{C(null),R(null),A("")},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:r.jsx(Ae,{className:"w-4 h-4"})})]})}),ae!=null&&ae.isLocked&&!gi?r.jsxs("div",{className:"flex items-center justify-center gap-2 py-3 text-amber-600 dark:text-amber-400 text-sm font-medium",children:[r.jsx(Ye,{className:"w-4 h-4"}),"Group is locked. Only admins can send messages."]}):r.jsxs("div",{className:"flex gap-2 items-end",children:[r.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-2xl border-none focus-within:ring-2 focus-within:ring-primary-500 transition-all min-h-[44px]",children:r.jsx("textarea",{ref:Ts,value:_,onChange:E=>A(E.target.value),onKeyDown:s1,onFocus:()=>{setTimeout(()=>{var E;(E=fr.current)==null||E.scrollTo({top:fr.current.scrollHeight,behavior:"smooth"})},300)},placeholder:P?"Edit your message...":"Message the community...",className:"w-full px-4 py-3 bg-transparent border-none focus:ring-0 resize-none overflow-hidden text-sm text-gray-900 dark:text-gray-100 scrollbar-none",style:{minHeight:"44px"},rows:1})}),r.jsx(M,{onClick:()=>Rp(),size:"icon",disabled:!_.trim(),className:"rounded-full w-12 h-12 flex-shrink-0 mb-[1px]",children:r.jsx(ta,{className:"w-5 h-5"})})]})]}),r.jsx(re,{children:se&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 z-[110]",onClick:()=>Q(null)}),r.jsxs(T.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"absolute bottom-4 left-4 right-4 bg-white dark:bg-[#222] rounded-2xl p-2 shadow-2xl z-[120] flex flex-col gap-1",children:[r.jsx("div",{className:"flex items-center justify-around p-2 border-b border-gray-100 dark:border-gray-800 pb-2",children:["","","","","",""].map(E=>r.jsx("button",{onClick:()=>{Wc({messageId:se._id,userId:t._id,emoji:E}),Q(null)},className:"text-xl hover:scale-125 transition-transform",children:E},E))}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{C(se),Q(null)},children:[r.jsx(Cg,{className:"w-4 h-4"})," Reply"]}),se.senderId===t._id&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{R(se),A(se.text),Q(null)},children:[r.jsx(Rd,{className:"w-4 h-4"})," Edit"]}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-primary-50 dark:hover:bg-primary-900/20 text-primary-600 dark:text-primary-400 flex items-center gap-3 text-sm font-medium",onClick:()=>{kn(se._id),Q(null)},children:[r.jsx(Tt,{className:"w-4 h-4"})," Seen by"]}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 flex items-center gap-3 text-sm font-medium",onClick:()=>{al({messageId:se._id,userId:t._id}),Q(null)},children:[r.jsx(Dr,{className:"w-4 h-4"})," Delete"]})]})]})]})})]})]}),n==="direct"&&r.jsxs("div",{className:`${i?"flex":"hidden md:flex"} flex-1 flex-col bg-gray-50 dark:bg-gray-900 ${i?"fixed inset-0 md:relative z-[200] md:z-auto":""} relative overflow-hidden`,style:i?{bottom:Gc}:void 0,children:[((t==null?void 0:t.chatWallpaperUrl)||ce)&&r.jsx("div",{className:"absolute inset-0 z-0 bg-cover bg-center opacity-30 dark:opacity-20 pointer-events-none",style:{backgroundImage:`url(${(t==null?void 0:t.chatWallpaperUrl)||ce})`,filter:"blur(3px)"}}),i&&bi?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-white/90 dark:bg-dark-card/90 backdrop-blur-md border-b border-light-border dark:border-dark-border flex items-center gap-3 flex-shrink-0 z-10",children:[r.jsx("button",{onClick:()=>o(null),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 -ml-2",children:r.jsx(ur,{className:"w-5 h-5"})}),r.jsx(dt,{src:(Fp=bi.otherUser)==null?void 0:Fp.avatarUrl,alt:((Up=bi.otherUser)==null?void 0:Up.name)||"User",className:"w-10 h-10"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:(Bp=bi.otherUser)==null?void 0:Bp.name}),r.jsx("p",{className:"text-xs text-gray-500",children:((Vp=bi.otherUser)==null?void 0:Vp.role)||"Member"})]}),r.jsx("button",{onClick:()=>{var E;return(E=fi.current)==null?void 0:E.click()},disabled:pe,className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-500 transition-colors",title:"Change Chat Wallpaper",children:pe?r.jsx(Wn,{className:"w-5 h-5 animate-spin"}):r.jsx(tn,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"flex-1 p-4 overflow-y-auto custom-thin-scrollbar overflow-x-hidden relative z-10",ref:pr,children:F?F.length===0?r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsx("div",{className:"text-center text-gray-500 text-sm",children:"No messages yet. Say hi!"})}):r.jsx("div",{className:"space-y-4 pb-2",children:F.map(E=>{const X=E.senderId===(t==null?void 0:t._id);return E.isDeleted?r.jsx("div",{className:`flex ${X?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:"px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-800 text-xs text-gray-500 italic flex items-center gap-2",children:[r.jsx(Dr,{className:"w-3 h-3"})," This message was deleted"]})},E._id):r.jsx("div",{className:`group relative flex ${X?"justify-end":"justify-start"} mb-2`,onMouseEnter:()=>k(E._id),onMouseLeave:()=>k(null),children:r.jsxs(T.div,{drag:"x",dragConstraints:{left:0,right:0},onDragEnd:(Me,zt)=>{zt.offset.x<-50&&y(E)},whileDrag:{scale:1.02},className:"relative max-w-[85%] md:max-w-[70%]",onTouchStart:()=>Dp(E),onTouchEnd:Op,children:[w===E._id&&r.jsx("div",{className:`absolute top-0 ${X?"-left-8":"-right-8"} z-20 flex flex-col`,children:r.jsx("button",{className:"p-1 rounded-full bg-gray-200 dark:bg-gray-700 shadow-sm hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",onClick:Me=>{Me.stopPropagation(),N(E)},children:r.jsx(Ke,{className:"w-4 h-4 text-gray-600 dark:text-gray-300"})})}),r.jsxs("div",{className:`flex flex-col ${X?"items-end":"items-start"}`,children:[E.replyTo&&r.jsxs("div",{className:`mb-1 text-xs px-2 py-1 rounded bg-gray-200 dark:bg-gray-800 border-l-2 border-primary-500 w-full opacity-80 ${E.replyTo.isDeleted?"italic":""}`,children:[r.jsx("span",{className:"font-bold block text-primary-500",children:E.replyTo.senderName}),E.replyTo.isDeleted?"Message deleted":E.replyTo.text.length>50?E.replyTo.text.substring(0,50)+"...":E.replyTo.text]}),r.jsxs("div",{className:`px-4 py-2 rounded-2xl text-sm whitespace-pre-wrap break-words shadow-sm ${X?"bg-primary-500 text-white rounded-br-none":"bg-white dark:bg-gray-800 text-gray-800 dark:text-gray-200 rounded-bl-none shadow-sm"}`,style:{wordBreak:"break-word",overflowWrap:"break-word"},children:[E.text,r.jsxs("div",{className:`text-[10px] mt-1 flex items-center justify-end gap-1 opacity-70 ${X?"text-white/80":"text-gray-500"}`,children:[E.isEdited&&r.jsx("span",{children:"(edited)"}),ot(E.createdAt,{addSuffix:!1})]})]}),E.reactions&&E.reactions.length>0&&r.jsx(T.div,{initial:{scale:0},animate:{scale:1},className:`flex -mt-2 ${X?"mr-2":"ml-2"} z-10 cursor-pointer`,children:E.reactions.map((Me,zt)=>r.jsx("button",{onClick:xt=>{xt.stopPropagation(),xe({id:E._id,isGroup:!1})},className:"text-xs bg-white dark:bg-gray-800 rounded-full shadow border border-gray-100 dark:border-gray-700 w-5 h-5 flex items-center justify-center hover:scale-110 transition-transform",children:Me.emoji},zt))})]})]})},E._id)})}):r.jsx(Tb,{})}),r.jsxs("div",{className:"p-3 md:p-4 bg-white/90 dark:bg-dark-card/90 backdrop-blur-md border-t border-light-border dark:border-dark-border flex-shrink-0 w-full z-10",children:[r.jsx(re,{children:(v||p)&&r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"flex items-center justify-between px-3 py-2 mb-2 bg-gray-100 dark:bg-gray-800 rounded-lg text-sm border-l-4 border-primary-500",children:[r.jsxs("div",{className:"flex flex-col justify-center text-gray-600 dark:text-gray-300",children:[r.jsx("span",{className:"font-bold text-xs text-primary-500",children:p?"Editing Message":`Replying to ${v.senderId===(t==null?void 0:t._id)?"yourself":"them"}`}),r.jsx("span",{className:"text-xs truncate max-w-[200px] opacity-70",children:p?p.text:v.text})]}),r.jsx("button",{onClick:()=>{y(null),b(null),d("")},className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full",children:r.jsx(Ae,{className:"w-4 h-4"})})]})}),r.jsxs("div",{className:"flex gap-2 items-end",children:[r.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-2xl border-none focus-within:ring-2 focus-within:ring-primary-500 transition-all min-h-[44px]",children:r.jsx("textarea",{ref:Cs,value:l,onChange:E=>d(E.target.value),onKeyDown:t1,onFocus:()=>{setTimeout(()=>{var E;(E=pr.current)==null||E.scrollTo({top:pr.current.scrollHeight,behavior:"smooth"})},300)},placeholder:p?"Edit your message...":"Type a message...",className:"w-full px-4 py-3 bg-transparent border-none focus:ring-0 resize-none overflow-hidden text-sm text-gray-900 dark:text-gray-100 scrollbar-none",style:{minHeight:"44px"},rows:1})}),r.jsx(M,{onClick:()=>Mp(),size:"icon",disabled:!l.trim(),className:"rounded-full w-12 h-12 flex-shrink-0 mb-[1px]",children:r.jsx(ta,{className:"w-5 h-5"})})]})]}),r.jsx(re,{children:j&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 z-[110]",onClick:()=>N(null)}),r.jsxs(T.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"absolute bottom-4 left-4 right-4 md:left-auto md:right-auto md:w-[300px] md:bottom-20 bg-white dark:bg-[#222] rounded-2xl p-2 shadow-2xl z-[120] flex flex-col gap-1 md:left-1/2 md:-translate-x-1/2",children:[r.jsx("div",{className:"flex items-center justify-around p-2 border-b border-gray-100 dark:border-gray-800 pb-2",children:["","","","","",""].map(E=>r.jsx("button",{onClick:()=>{vn({messageId:j._id,userId:t._id,emoji:E}),N(null)},className:"text-xl hover:scale-125 transition-transform",children:E},E))}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{y(j),N(null)},children:[r.jsx(Cg,{className:"w-4 h-4"})," Reply"]}),j.senderId===(t==null?void 0:t._id)&&r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-3 text-sm font-medium",onClick:()=>{b(j),d(j.text),N(null)},children:[r.jsx(Rd,{className:"w-4 h-4"})," Edit"]}),r.jsxs("button",{className:"w-full text-left p-3 rounded-xl hover:bg-red-50 dark:hover:bg-red-900/20 text-red-500 flex items-center gap-3 text-sm font-medium",onClick:()=>{pi({messageId:j._id,userId:t._id}),N(null)},children:[r.jsx(Dr,{className:"w-4 h-4"})," Delete"]})]})]})]})})]}):r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ot,{className:"w-24 h-24 text-gray-300 dark:text-gray-700 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-400 mb-2",children:"Select a conversation"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Choose from your existing conversations or start a new one"})]})})]}),n==="group"&&r.jsx("div",{className:"hidden md:flex flex-1 items-center justify-center bg-gray-50 dark:bg-gray-900",children:r.jsxs("div",{className:"text-center text-gray-400 dark:text-gray-600",children:[r.jsx(ke,{className:"w-20 h-20 mx-auto mb-4 opacity-40"}),r.jsx("p",{className:"font-medium",children:"Join the conversation on the left"})]})})]})]})}function WD(){const[e,t]=f.useState("contacts");return r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"h-[calc(100vh-theme(spacing.24))] flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex-shrink-0 mb-4 px-1",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-primary-600 dark:text-primary-400",children:"Communications"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Manage contact requests and live chat interactions"})]})}),r.jsxs("div",{className:"flex gap-2 p-1 bg-light-card dark:bg-dark-card rounded-xl border border-light-border dark:border-dark-border w-fit",children:[r.jsxs("button",{onClick:()=>t("contacts"),className:`
                            flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all
                            ${e==="contacts"?"bg-primary-500 text-white shadow-md":"text-light-muted dark:text-dark-muted hover:bg-gray-100 dark:hover:bg-gray-800"}
                        `,children:[r.jsx(zr,{className:"w-4 h-4"}),"Contact Requests"]}),r.jsxs("button",{onClick:()=>t("live-chat"),className:`
                             flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-bold transition-all
                            ${e==="live-chat"?"bg-primary-500 text-white shadow-md":"text-light-muted dark:text-dark-muted hover:bg-gray-100 dark:hover:bg-gray-800"}
                        `,children:[r.jsx(lt,{className:"w-4 h-4"}),"Live Chat"]})]})]}),r.jsx("div",{className:"flex-1 overflow-hidden relative rounded-2xl border border-light-border dark:border-dark-border bg-white dark:bg-dark-card shadow-sm",children:r.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e==="contacts"?r.jsx("div",{className:"h-full overflow-y-auto p-6 custom-thin-scrollbar",children:r.jsx(zD,{})}):r.jsx("div",{className:"h-full w-full",children:r.jsx(KN,{isEmbedded:!0})})})})]})}function qD(){const{user:e,isLoading:t}=Z(),s=U(S.responses.getMyResponses,e!=null&&e._id?{userId:e._id}:"skip");return t?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):e?r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs("div",{className:"mb-6 md:mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gradient font-display mb-2",children:"My Responses"}),r.jsx("p",{className:"text-sm md:text-base text-light-muted dark:text-dark-muted",children:"View all your responses and grades"})]}),s&&s.length>0&&r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4 mb-6 md:mb-8",children:[r.jsx(D,{glass:!0,children:r.jsx(O,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total"}),r.jsx("p",{className:"text-2xl font-bold text-light-text dark:text-dark-text",children:s.length})]}),r.jsx(Ot,{className:"w-8 h-8 text-primary-500 opacity-20"})]})})}),r.jsx(D,{glass:!0,children:r.jsx(O,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Graded"}),r.jsx("p",{className:"text-2xl font-bold text-green-500",children:s.filter(n=>n.grade!==void 0).length})]}),r.jsx(Ln,{className:"w-8 h-8 text-green-500 opacity-20"})]})})}),r.jsx(D,{glass:!0,children:r.jsx(O,{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Avg Grade"}),r.jsx("p",{className:"text-2xl font-bold text-accent-500",children:s.filter(n=>n.grade!==void 0).length>0?Math.round(s.filter(n=>n.grade!==void 0).reduce((n,a)=>n+(a.grade||0),0)/s.filter(n=>n.grade!==void 0).length):0})]}),r.jsx(ve,{className:"w-8 h-8 text-accent-500 opacity-20"})]})})})]}),r.jsx("div",{className:"space-y-4",children:s&&s.length>0?s.map(n=>{const a=n.grade?n.grade>=80?"text-green-500":n.grade>=50?"text-yellow-500":"text-red-500":"text-light-muted dark:text-dark-muted";return r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(ge,{className:"text-lg mb-2",children:n.postTitle}),r.jsxs("div",{className:"flex items-center gap-3 text-sm text-light-muted dark:text-dark-muted",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(kt,{className:"w-4 h-4"}),new Date(n.createdAt).toLocaleDateString()]}),r.jsx(G,{variant:"default",children:n.category})]})]}),n.grade!==void 0&&r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:`text-3xl font-bold ${a}`,children:n.grade}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:"/ 100"})]})]})}),r.jsx(O,{children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-light-text dark:text-dark-text mb-2",children:"Your Response"}),r.jsx("div",{className:"bg-light-bg dark:bg-dark-bg p-4 rounded-lg text-sm text-light-text dark:text-dark-text",children:n.content})]}),n.feedback&&r.jsxs("div",{className:"border-t border-light-border dark:border-dark-border pt-4",children:[r.jsxs("h4",{className:"text-sm font-semibold text-light-text dark:text-dark-text mb-2 flex items-center gap-2",children:[r.jsx(Yt,{className:"w-4 h-4 text-accent-500"}),"Admin Feedback"]}),r.jsxs("div",{className:"bg-accent-50 dark:bg-accent-900/20 p-3 rounded-lg text-sm text-light-text dark:text-dark-text italic border-l-4 border-accent-500",children:['"',n.feedback,'"']})]}),n.grade===void 0&&r.jsx("div",{className:"text-center p-3 rounded-lg bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800",children:r.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-400",children:" Waiting for admin to grade"})}),n.rewardStatus==="paid"&&r.jsxs(T.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:"text-center p-4 rounded-xl bg-gradient-to-r from-green-500/10 via-green-500/20 to-green-500/10 border border-green-500/30 shadow-lg shadow-green-500/10",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400 font-bold uppercase tracking-tight",children:[r.jsx(ve,{className:"w-5 h-5 animate-bounce"}),r.jsx("span",{children:"Official Reward Paid!"}),r.jsx(ve,{className:"w-5 h-5 animate-bounce"})]}),r.jsx("p",{className:"text-xs text-green-600/70 dark:text-green-400/70 mt-1",children:"Check your bank account/wallet for the transfer."})]})]})})]},n._id)}):r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-12 text-center text-light-muted",children:[r.jsx(Ot,{className:"w-16 h-16 mx-auto mb-4 opacity-20"}),r.jsx("p",{className:"mb-2",children:"You haven't submitted any responses yet"}),r.jsx("p",{className:"text-sm",children:'Look for admin posts with "Official Response" enabled and submit your answers!'})]})})})]})}):r.jsx(Ee,{to:"/login",replace:!0})}const HD=`
  .premium-scrollbar::-webkit-scrollbar {
    height: 5px;
    width: 5px;
  }
  .premium-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.5);
  }
`,Ib=[{key:"gold",label:"Comments",icon:Ot,color:"from-yellow-500 to-amber-600"},{key:"silver",label:"Games",icon:_w,color:"from-gray-400 to-gray-600"},{key:"diamond",label:"Challenge",icon:Nr,color:"from-emerald-500 to-teal-600"}];function GD(){const[e,t]=f.useState("gold"),s=de(),n=U(S.wallets.getLeaderboard,e!=="diamond"?{poolType:e,limit:50}:"skip"),a=U(S.wordUnderPressure.getDiamondLeaderboard,e==="diamond"?{limit:50}:"skip"),i=e==="diamond"?a:n,o=Ib.find(l=>l.key===e);return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg",children:[r.jsx("style",{children:HD}),r.jsx("div",{className:"gradient-primary text-white py-8 px-4 md:px-8",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsxs("button",{onClick:()=>s("/feed"),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors",children:[r.jsx(ur,{className:"w-5 h-5"}),"Back to Feed"]}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-14 h-14 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center",children:r.jsx(ve,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl md:text-4xl font-display font-bold",children:"Leaderboard"}),r.jsx("p",{className:"text-white/80",children:"Top performers across all categories"}),e==="diamond"&&r.jsxs("button",{onClick:()=>s("/diamond-challenge"),className:"mt-4 px-6 py-2 bg-emerald-500 text-white rounded-full font-bold text-sm hover:bg-emerald-400 transition-colors shadow-lg flex items-center gap-2 border-2 border-emerald-400/50",children:[r.jsx(Nr,{className:"w-4 h-4"}),"Play Challenge"]})]})]}),r.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 premium-scrollbar",children:Ib.map(l=>{const d=l.icon,c=e===l.key;return r.jsxs("button",{onClick:()=>t(l.key),className:J("flex items-center gap-2 px-6 py-3 rounded-xl font-semibold transition-all whitespace-nowrap",c?"bg-white text-primary-500":"bg-white/10 text-white/70 hover:bg-white/20"),children:[r.jsx(d,{className:"w-5 h-5"}),l.label]},l.key)})})]})}),r.jsx("div",{className:"max-w-5xl mx-auto px-4 md:px-8 py-8",children:i?i.length===0?r.jsx(D,{glass:!0,children:r.jsxs(O,{className:"p-8 text-center",children:[r.jsx(ve,{className:"w-16 h-16 text-primary-300 mx-auto mb-4"}),r.jsx("p",{className:"text-lg text-light-muted dark:text-dark-muted",children:"No entries yet for this category."}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted mt-2",children:["Be the first to earn Rubies in the ",o.label," pool!"]})]})}):r.jsx("div",{className:"space-y-4",children:i.map((l,d)=>r.jsx(QD,{entry:l,rank:l.rank,tabColor:o.color,activeTab:e},l.userId))}):r.jsx("div",{className:"text-center text-light-muted dark:text-dark-muted py-12",children:"Loading leaderboard..."})})]})}function QD({entry:e,rank:t,tabColor:s,activeTab:n}){let a=null,i="bg-light-card dark:bg-dark-card border-light-border dark:border-dark-border";return t===1?(a=r.jsx(ve,{className:"w-7 h-7 text-yellow-500"}),i="bg-gradient-to-br from-yellow-50 to-amber-50 dark:from-yellow-900/20 dark:to-amber-900/20 border-2 border-yellow-400 dark:border-yellow-600 shadow-lg shadow-yellow-500/20"):t===2?(a=r.jsx(Yl,{className:"w-7 h-7 text-gray-400"}),i="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900/20 dark:to-gray-800/20 border-2 border-gray-300 dark:border-gray-600 shadow-md shadow-gray-500/10"):t===3&&(a=r.jsx(Yl,{className:"w-7 h-7 text-orange-500"}),i="bg-gradient-to-br from-orange-50 to-amber-50 dark:from-orange-900/20 dark:to-amber-900/20 border-2 border-orange-400 dark:border-orange-600 shadow-md shadow-orange-500/10"),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},className:J("flex items-center gap-3 sm:gap-4 p-3 sm:p-5 rounded-2xl border transition-all hover:scale-[1.02]",i),children:[r.jsx("div",{className:"hidden md:flex flex-shrink-0 w-14 text-center font-bold text-2xl items-center justify-center",children:a||r.jsxs("span",{className:"text-light-muted dark:text-dark-muted",children:["#",t]})}),r.jsxs(te,{to:`/profile/${e.userId}`,className:"relative flex-shrink-0 hover:opacity-80 transition-opacity",children:[r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full overflow-hidden bg-gradient-to-br from-primary-400 to-primary-600 ring-2 ring-white dark:ring-dark-border",children:e.userAvatar?r.jsx("img",{src:e.userAvatar,alt:e.userName,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-white font-bold text-xl",children:e.userName[0]})}),r.jsx("div",{className:"absolute -top-1 -left-1 md:hidden w-6 h-6 rounded-full bg-white dark:bg-dark-card border border-light-border dark:border-dark-border flex items-center justify-center shadow-sm z-10 text-xs font-bold",children:t<=3?t===1?r.jsx(ve,{className:"w-3.5 h-3.5 text-yellow-500"}):r.jsx(Yl,{className:J("w-3.5 h-3.5",t===2?"text-gray-400":"text-orange-500")}):`#${t}`})]}),r.jsxs("div",{className:"flex-1 min-w-0 pr-1",children:[r.jsx(te,{to:`/profile/${e.userId}`,className:"font-bold text-base sm:text-xl text-light-text dark:text-dark-text truncate hover:text-primary-500 transition-colors block leading-tight",children:e.userName}),r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center gap-0.5 sm:gap-4 mt-0.5 sm:mt-1 text-xs sm:text-sm text-light-muted dark:text-dark-muted",children:n==="diamond"?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"truncate font-medium text-emerald-500 dark:text-emerald-400",children:[e.totalWins," Correct"]}),r.jsxs("span",{className:"flex items-center gap-1 truncate text-light-muted dark:text-dark-muted",children:["Attempts: ",e.currentStreak]})]}):e.totalWins!==void 0?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"truncate font-medium text-blue-500 dark:text-blue-400",children:[e.totalWins," Wins"]}),r.jsxs("span",{className:"flex items-center gap-1 truncate text-light-muted dark:text-dark-muted",children:["Streak: ",e.currentStreak]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"truncate",children:[e.earnedRubies," Rubies"]}),e.badgeCount>0&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ve,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.badgeCount," badge",e.badgeCount!==1?"s":""]})]})})]}),r.jsxs("div",{className:"flex flex-col items-end gap-0.5 sm:gap-1 pl-1 shrink-0",children:[r.jsx("div",{className:J("text-lg sm:text-3xl font-bold bg-gradient-to-r bg-clip-text text-transparent truncate max-w-[80px] sm:max-w-none text-right",s),children:e.currentBalance}),r.jsx("div",{className:"text-[9px] sm:text-xs text-light-muted dark:text-dark-muted uppercase tracking-wider font-medium",children:n==="diamond"?"Best Time":"Balance"}),r.jsx("button",{onClick:o=>{o.preventDefault()},className:"mt-0.5 sm:mt-1 p-1 sm:p-1.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-400 hover:text-red-500 transition-colors",children:r.jsx(gn,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})]})}function KD(){var i,o,l;const{postId:e}=la(),t=U(S.posts.getPost,{postId:e}),s=U(S.responses.getPostResponses,{postId:e});if(!t||!s)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});const n=s.slice(0,5),a=s.slice(5,10);return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[r.jsx(Xe,{}),r.jsxs("div",{className:"mb-8 p-6 glass rounded-2xl border border-primary-500/20 bg-gradient-to-br from-primary-500/5 to-transparent",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(dt,{src:(i=t.author)==null?void 0:i.avatarUrl,alt:((o=t.author)==null?void 0:o.name)||"Admin",size:"sm"}),r.jsxs("div",{children:[r.jsx("h2",{className:"font-bold text-light-text dark:text-dark-text",children:(l=t.author)==null?void 0:l.name}),r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted flex items-center gap-1",children:[r.jsx(kt,{className:"w-3 h-3"}),ot(t.createdAt,{addSuffix:!0})]})]})]}),r.jsxs("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base whitespace-pre-wrap italic opacity-80",children:['"',t.content,'"']})]}),r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("h1",{className:"text-2xl font-bold text-gradient flex items-center gap-2",children:[r.jsx(Ot,{className:"w-6 h-6 text-primary-500"}),"Official Responses"]}),r.jsxs(G,{variant:"primary",className:"px-3 py-1",children:[s.length," Total"]})]}),r.jsxs("div",{className:"space-y-8",children:[n.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-primary-600 dark:text-primary-400 font-bold uppercase tracking-wider text-xs",children:[r.jsx(ve,{className:"w-4 h-4"}),"Top Tier Responders (1-5)"]}),r.jsx("div",{className:"grid gap-4",children:n.map((d,c)=>r.jsx(Pb,{response:d,rank:c+1,tier:"gold"},d._id))})]}),a.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-secondary-600 dark:text-secondary-400 font-bold uppercase tracking-wider text-xs",children:[r.jsx(Yl,{className:"w-4 h-4"}),"Second Tier Responders (6-10)"]}),r.jsx("div",{className:"grid gap-4",children:a.map((d,c)=>r.jsx(Pb,{response:d,rank:c+6,tier:"silver"},d._id))})]}),s.length===0&&r.jsxs("div",{className:"text-center py-12 glass rounded-xl border-dashed border-2 border-light-border dark:border-dark-border",children:[r.jsx(Ot,{className:"w-12 h-12 text-light-muted mx-auto mb-4 opacity-30"}),r.jsx("p",{className:"text-light-muted",children:"No responses yet for this post."})]})]})]})})}function Pb({response:e,rank:t,tier:s}){const n=s==="gold";return r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:t*.05},className:`flex flex-col md:flex-row gap-4 p-5 rounded-2xl border transition-all ${n?"bg-primary-500/5 border-primary-500/30":"bg-light-bg dark:bg-dark-bg border-light-border dark:border-dark-border"}`,children:r.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[r.jsx(dt,{src:e.userAvatar,alt:e.userName,size:"md"}),r.jsxs("div",{className:`absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center text-[10px] font-bold text-white shadow-lg ${n?"bg-primary-500":"bg-secondary-500"}`,children:["#",t]})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text",children:e.userName}),r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted",children:ot(e.createdAt,{addSuffix:!0})})]}),r.jsx("p",{className:"text-sm text-light-text dark:text-dark-text leading-relaxed",children:e.content}),e.grade!==void 0&&r.jsxs("div",{className:"pt-3 flex flex-wrap gap-2 items-center",children:[r.jsxs(G,{variant:e.grade>=70?"success":"primary",className:"text-[10px] font-bold uppercase transition-all hover:scale-105",children:["Score: ",e.grade,"/100"]}),e.rewardStatus==="paid"&&r.jsxs(G,{variant:"warning",className:"text-[10px] flex items-center gap-1 animate-pulse",children:[r.jsx(ve,{className:"w-3 h-3"}),"Awarded"]}),e.feedback&&r.jsxs("div",{className:"w-full mt-2 p-3 rounded-lg bg-light-bg dark:bg-dark-bg/50 border border-light-border dark:border-dark-border/50 italic text-xs text-light-muted",children:['Admin feedback: "',e.feedback,'"']})]})]})]})})}function Ga(){return r.jsxs("div",{className:"flex gap-3 animate-pulse",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-light-border dark:bg-dark-border"}),r.jsxs("div",{className:"flex-1 bg-light-card dark:bg-dark-card rounded-lg p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"h-4 w-24 bg-light-border dark:bg-dark-border rounded"}),r.jsx("div",{className:"h-3 w-16 bg-light-border dark:bg-dark-border rounded"})]}),r.jsx("div",{className:"h-3 w-full bg-light-border dark:bg-dark-border rounded"}),r.jsx("div",{className:"h-3 w-3/4 bg-light-border dark:bg-dark-border rounded"})]})]})}function Ab({postId:e,isPrayer:t=!1,isAdminPost:s=!1}){const{user:n}=Z(),[a,i]=f.useState(""),[o,l]=f.useState(""),[d,c]=f.useState(!1),[u,m]=f.useState(null),h=U(S.comments.getComments,{postId:e}),x=U(S.comments.getCommentSettings,{}),g=U(S.comments.hasUserCommented,n!=null&&n._id&&s?{postId:e,userId:n._id}:"skip"),v=V(S.comments.createComment),y=async j=>{if(j.preventDefault(),!(!n||!a.trim()||d)&&!(s&&g)){c(!0);try{await v({postId:e,authorId:n._id,content:a.trim()}),i("")}catch(N){console.error("Failed to create comment:",N),alert(N instanceof Error?N.message:"Failed to post comment")}finally{c(!1)}}},p=async(j,N)=>{if(j.preventDefault(),!(!n||!o.trim()||d)){c(!0);try{await v({postId:e,authorId:n._id,content:o.trim(),parentId:N}),l(""),m(null)}catch(_){console.error("Failed to post reply:",_),alert(_ instanceof Error?_.message:"Failed to post reply")}finally{c(!1)}}},w=(()=>{if(!h)return[];const j=new Map;h.forEach(_=>j.set(_._id,{..._,replies:[]}));const N=[];return h.forEach(_=>{if(_.parentId){const A=j.get(_.parentId);A&&A.replies.push(j.get(_._id))}else N.push(j.get(_._id))}),N})();function k({comment:j,isReply:N=!1}){var C,P,R,W,Y,se;const _=((C=j.author)==null?void 0:C.name)||"U",A=_.charAt(0).toUpperCase(),L=(P=j.author)==null?void 0:P.avatarUrl;return r.jsxs("div",{className:`flex gap-2 md:gap-3 ${N?"ml-8 md:ml-12 mt-2":""} group`,children:[r.jsx(te,{to:`/profile/${(R=j.author)==null?void 0:R._id}`,className:"shrink-0 mt-1",children:L?r.jsx(dt,{src:L,alt:_,size:N?"xs":"sm"}):r.jsx("div",{className:`flex items-center justify-center rounded-full bg-primary-500/20 text-primary-600 dark:text-primary-400 font-bold flex-shrink-0 ${N?"w-6 h-6 text-[10px]":"w-8 h-8 text-sm"}`,children:A})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col items-start",children:[r.jsxs("div",{className:"bg-light-card dark:bg-dark-card rounded-2xl px-3 py-2 md:px-4 md:py-2.5 inline-block max-w-full shadow-sm border border-light-border/50 dark:border-dark-border/50",children:[r.jsxs(te,{to:`/profile/${(W=j.author)==null?void 0:W._id}`,className:"font-bold text-sm text-light-text dark:text-dark-text hover:underline block mb-0.5 truncate",children:[_,((Y=j.author)==null?void 0:Y.role)==="admin"&&r.jsx(We,{className:"w-3 h-3 inline-block ml-1 text-primary-500"})]}),r.jsx("p",{className:"text-sm text-light-text dark:text-dark-text break-words leading-relaxed whitespace-pre-wrap",children:j.content})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-1 ml-2",children:[r.jsx("span",{className:"text-[11px] md:text-xs text-light-muted dark:text-dark-muted font-medium",children:ot(j.createdAt,{addSuffix:!0})}),!N&&n&&r.jsx("button",{onClick:()=>{m(u===j._id?null:j._id),l("")},className:"text-[11px] md:text-xs font-bold text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:"Reply"})]})]}),r.jsx(re,{children:u===j._id&&r.jsxs(T.form,{initial:{opacity:0,y:-8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},onSubmit:Q=>p(Q,j._id),className:"mt-3 flex gap-2",children:[r.jsx(dt,{src:n==null?void 0:n.avatarUrl,size:"xs",className:"hidden md:block shrink-0 mt-1"}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",value:o,onChange:Q=>l(Q.target.value),placeholder:`Reply to ${_}...`,className:"w-full pl-3 pr-10 py-2 text-sm rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg focus:ring-1 focus:ring-primary-500 outline-none",autoFocus:!0}),r.jsx("button",{type:"submit",disabled:!o.trim()||d,className:"absolute right-1 top-1/2 -translate-y-1/2 p-1.5 text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg disabled:opacity-50",children:r.jsx(ta,{className:"w-4 h-4"})})]})]},"reply-form")}),((se=j.replies)==null?void 0:se.length)>0&&r.jsx("div",{className:"space-y-3 mt-3 relative before:absolute before:left-[-1.5rem] before:top-2 before:bottom-4 before:w-px before:bg-light-border/50 dark:before:bg-dark-border/50 md:before:hidden",children:j.replies.map(Q=>r.jsx(k,{comment:Q,isReply:!0},Q._id))})]})]})}return x===!1?r.jsx("div",{className:"mt-4 p-4 rounded-lg bg-light-card dark:bg-dark-card text-center",children:r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Comments are currently disabled"})}):r.jsxs("div",{className:"mt-4 pt-4 border-t border-light-border dark:border-dark-border space-y-4",children:[n&&r.jsx(re,{mode:"wait",children:g&&s?r.jsxs(T.div,{initial:{opacity:0,y:-6},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex items-center gap-3 px-4 py-3 rounded-2xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/15 flex items-center justify-center flex-shrink-0",children:r.jsx(et,{className:"w-4 h-4 text-green-500"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:"You've already commented "}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Each user can only comment once per admin post to keep things fair. You can still reply to others below."})]}),r.jsx(FC,{className:"w-5 h-5 text-light-muted dark:text-dark-muted flex-shrink-0"})]},"locked"):r.jsxs(T.form,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onSubmit:y,className:"flex items-start gap-2 md:gap-3",children:[r.jsx("div",{className:"mt-1 flex-shrink-0",children:r.jsx(dt,{src:n.avatarUrl,alt:n.name,size:"sm"})}),r.jsxs("div",{className:"flex-1 min-w-0 relative",children:[r.jsx("textarea",{value:a,onChange:j=>i(j.target.value),placeholder:t?"Join us in praying this prayer...":s?"Write a comment... (once per post)":"Write a comment...",className:`w-full px-4 py-2.5 pr-12 rounded-2xl border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:border-transparent resize-none overflow-hidden min-h-[44px] max-h-32 text-sm md:text-base transition-all ${t?"border-purple-200 dark:border-purple-900/30 focus:ring-purple-500 placeholder:text-purple-400/70":"border-light-border dark:border-dark-border focus:ring-primary-500"}`,disabled:d,rows:1,onInput:j=>{const N=j.target;N.style.height="auto",N.style.height=`${N.scrollHeight}px`}}),r.jsx("button",{type:"submit",disabled:!a.trim()||d,className:"absolute right-1.5 bottom-1.5 p-2 rounded-xl bg-primary-500 hover:bg-primary-600 text-white transition-all disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center shadow-lg shadow-primary-500/20 active:scale-95",children:t?r.jsx(Ox,{className:"w-4 h-4 md:w-5 md:h-5"}):r.jsx(ta,{className:"w-4 h-4 md:w-5 md:h-5"})})]})]},"input")}),h?w.length>0?r.jsx("div",{className:"space-y-4",children:w.map(j=>r.jsx(k,{comment:j},j._id))}):r.jsx("div",{className:"text-center py-8 text-light-muted dark:text-dark-muted",children:r.jsx("p",{children:t?"No prayers yet. Be the first to join in prayer!":"No comments yet. Be the first to share your thoughts!"})}):r.jsxs("div",{className:"space-y-4",children:[r.jsx(Ga,{}),r.jsx(Ga,{}),r.jsx(Ga,{})]})]})}function YD({postId:e}){const{user:t}=Z(),[s,n]=f.useState(""),[a,i]=f.useState(!1),o=U(S.questions.getQuestionsByPost,{postId:e,publicOnly:!0}),l=U(S.questions.getUserQuestionsOnPost,t!=null&&t._id?{userId:t._id,postId:e}:"skip"),d=V(S.questions.submitQuestion),c=[...o||[]];l&&l.forEach(m=>{c.some(h=>h._id===m._id)||c.push({...m,userName:(t==null?void 0:t.name)||"Me",userAvatar:t==null?void 0:t.avatarUrl,adminName:void 0,adminAvatar:void 0})}),c.sort((m,h)=>h.createdAt-m.createdAt);const u=async m=>{if(m.preventDefault(),!(!t||!s.trim())){i(!0);try{await d({userId:t._id,postId:e,questionText:s.trim()}),n("")}catch(h){console.error("Failed to submit question:",h),alert("Failed to submit question. Please try again.")}finally{i(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[t&&(!l||l.length===0)&&r.jsxs("form",{onSubmit:u,className:"relative",children:[r.jsx("textarea",{value:s,onChange:m=>n(m.target.value),placeholder:"Ask a question about this teaching...",className:"w-full min-h-[100px] p-4 pr-12 rounded-xl bg-gray-50 dark:bg-[#222] border-transparent focus:border-primary-500 focus:ring-0 text-sm resize-none"}),r.jsx(M,{type:"submit",disabled:!s.trim()||a,size:"sm",className:"absolute bottom-3 right-3",children:a?"Sending...":r.jsx(ta,{className:"w-4 h-4"})})]}),t&&l&&l.length>0&&r.jsxs("div",{className:"text-center py-4 text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/10 rounded-xl border border-green-100 dark:border-green-900/30",children:[r.jsx(Kt,{className:"w-5 h-5 mx-auto mb-2"}),r.jsx("p",{className:"font-medium",children:"Question Submitted"}),r.jsx("p",{className:"text-xs opacity-80",children:"You can only ask one question per post."})]}),!t&&r.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400",children:"Please log in to ask a question"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text flex items-center gap-2",children:["Questions (",c.length,")"]}),c.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No questions yet. Be the first to ask!"}):r.jsx("div",{className:"space-y-4",children:c.map(m=>r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl border border-gray-100 dark:border-gray-800 bg-white dark:bg-[#1A1A1A] shadow-sm",children:[r.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(dt,{src:m.userAvatar,alt:m.userName||"User",size:"sm"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-light-text dark:text-dark-text",children:m.userName}),r.jsx("p",{className:"text-[10px] text-light-muted",children:ot(m.createdAt,{addSuffix:!0})})]})]}),m.isPublic?r.jsx("div",{title:"Public",className:"text-green-500",children:r.jsx(Dx,{className:"w-3.5 h-3.5"})}):r.jsx("div",{title:"Private",className:"text-gray-400",children:r.jsx(Ye,{className:"w-3.5 h-3.5"})})]}),r.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-3 pl-10",children:m.questionText}),m.isAnswered?r.jsxs("div",{className:"ml-10 mt-3 p-3 rounded-lg bg-primary-50 dark:bg-primary-900/10 border border-primary-100 dark:border-primary-900/30",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(dt,{src:m.adminAvatar,alt:m.adminName||"Admin",size:"xs",className:"w-5 h-5"}),r.jsx("span",{className:"text-xs font-bold text-primary-700 dark:text-primary-400",children:m.adminName||"Admin Response"})]}),r.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-200",children:m.answerText})]}):r.jsxs("div",{className:"ml-10 mt-2 flex items-center gap-1.5 text-xs text-orange-500 bg-orange-50 dark:bg-orange-900/10 px-2 py-1 rounded-md w-fit",children:[r.jsx(Tr,{className:"w-3 h-3"}),"Waiting for response"]})]},m._id))})]})]})}function JD(){var w,k,j,N,_,A,L,C,P;const{postId:e}=la(),[t,s]=Px(),n=t.get("tab")||"comments",{user:a}=Z(),i=U(S.posts.getPost,{postId:e}),o=V(S.posts.likePost),[l,d]=f.useState(!1),[c,u]=f.useState(!1),[m,h]=f.useState(0),[x,g]=f.useState(0);if(f.useEffect(()=>{i&&(h(i.likeCount),g(0))},[i==null?void 0:i._id,i==null?void 0:i.likeCount]),!i)return r.jsxs("div",{className:"min-h-screen pb-20 md:pb-8",children:[r.jsx("div",{className:"container mx-auto px-4 pt-4 mb-4",children:r.jsx("div",{className:"w-24 h-8 bg-gray-200 dark:bg-gray-700 rounded animate-pulse"})}),r.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsx("div",{className:"aspect-[4/5] bg-gray-200 dark:bg-gray-700 rounded-2xl animate-pulse"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(Oe,{}),r.jsxs("div",{className:"p-6 glass rounded-2xl border border-light-border dark:border-dark-border space-y-4",children:[r.jsx(Ga,{}),r.jsx(Ga,{}),r.jsx(Ga,{})]})]})]})})]});const v=((w=i.author)==null?void 0:w.role)==="admin"||((k=i.author)==null?void 0:k.role)==="super_admin",y=async()=>{if(!a||l||v&&c)return;const R=!c;u(R),h(W=>R?W+1:W-1),d(!0);try{await o({userId:a._id,postId:i._id})}catch(W){(W instanceof Error?W.message:"").includes("already liked")||(u(!R),h(se=>R?se-1:se+1)),console.error("Failed to like post:",W)}finally{d(!1)}},p=i.content.length>250,b=i.content.length>1200;return r.jsxs("div",{className:"min-h-screen pb-20 md:pb-8",children:[r.jsx("div",{className:"container mx-auto px-4 pt-4 mb-4",children:r.jsx(Xe,{})}),r.jsx("div",{className:"container mx-auto px-4 max-w-6xl",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[r.jsxs("div",{className:"lg:sticky lg:top-24 space-y-4",children:[i.imageUrl?r.jsx(T.div,{layoutId:`post-image-${i._id}`,className:"rounded-2xl overflow-hidden glass border border-light-border dark:border-dark-border shadow-2xl",children:r.jsx("img",{src:i.imageUrl,alt:"Post",className:"w-full h-auto max-h-[70vh] object-contain bg-black/5"})}):i.videoUrl?r.jsx("div",{className:"rounded-2xl overflow-hidden bg-black shadow-2xl",children:r.jsx("video",{src:i.videoUrl,controls:!0,className:"w-full max-h-[70vh]"})}):r.jsx("div",{className:"aspect-square flex items-center justify-center glass rounded-2xl border border-dashed border-light-border dark:border-dark-border opacity-50",children:r.jsx("p",{className:"text-light-muted",children:"No visual media"})}),r.jsxs("div",{className:"hidden lg:block p-6 glass rounded-2xl border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("button",{onClick:y,className:`flex items-center gap-2 transition-all duration-300 ${c?"text-red-500":"text-light-text dark:text-dark-text hover:text-red-500"}`,children:[r.jsx(gn,{className:`w-6 h-6 transition-all duration-300 ${c?"fill-red-500 text-red-500 scale-110":""}`}),r.jsxs("span",{className:"font-bold",children:[m," Likes"]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-light-muted",children:[r.jsx(lt,{className:"w-6 h-6"}),r.jsxs("span",{className:"font-bold",children:[i.commentCount," Comments"]})]})]}),r.jsx("button",{className:"p-2 rounded-full hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:r.jsx(mi,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"h-px bg-light-border dark:bg-dark-border mb-4"}),r.jsxs("p",{className:"text-xs text-light-muted flex items-center gap-2",children:[r.jsx(kt,{className:"w-3 h-3"}),"Posted on ",new Date(i.createdAt).toLocaleDateString(void 0,{dateStyle:"long"})," at ",new Date(i.createdAt).toLocaleTimeString(void 0,{timeStyle:"short"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-2xl border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(dt,{src:(j=i.author)==null?void 0:j.avatarUrl,alt:((N=i.author)==null?void 0:N.name)||"User",size:"md"}),r.jsxs("div",{children:[r.jsxs("h2",{className:"font-bold text-lg text-light-text dark:text-dark-text flex items-center gap-2",children:[(_=i.author)==null?void 0:_.name,((A=i.author)==null?void 0:A.role)==="admin"&&r.jsx(We,{className:"w-4 h-4 text-primary-500"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(G,{variant:"outline",className:"text-[10px]",children:i.category}),r.jsx("span",{className:"text-xs text-light-muted",children:ot(i.createdAt,{addSuffix:!0})})]})]})]}),((L=i.author)==null?void 0:L.role)==="admin"?r.jsx(G,{variant:"primary",className:"hidden sm:flex",children:"Official"}):r.jsx(G,{variant:"default",className:"hidden sm:flex",children:"Member"})]}),r.jsxs("div",{className:"p-6 glass rounded-2xl border border-light-border dark:border-dark-border relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10",children:r.jsx(yt,{className:"w-20 h-20"})}),r.jsx(re,{initial:!1,children:r.jsx(T.p,{initial:{opacity:0},animate:{opacity:1},className:`text-light-text dark:text-dark-text leading-relaxed text-base md:text-lg break-words cursor-pointer ${x===0?"line-clamp-[6]":x===1?"line-clamp-[20]":""}`,onClick:()=>{p&&(b?x===0?g(1):x===1&&g(2):g(x===0?2:0))},children:i.content},x)}),p&&r.jsx("button",{onClick:()=>{g(b?x===0?1:x===1?2:0:x===0?2:0)},className:"mt-4 flex items-center gap-1 text-primary-500 font-bold hover:underline transition-all",children:x===2?r.jsxs(r.Fragment,{children:["Show Less ",r.jsx(zn,{className:"w-4 h-4"})]}):x===1?r.jsxs(r.Fragment,{children:["Read Full Message ",r.jsx(Ke,{className:"w-4 h-4"})]}):r.jsxs(r.Fragment,{children:["Read More ",r.jsx(Ke,{className:"w-4 h-4"})]})})]})]}),r.jsx("div",{className:"p-4 md:p-6 glass rounded-2xl border border-light-border dark:border-dark-border min-h-[400px]",children:((C=i.author)==null?void 0:C.role)==="admin"||((P=i.author)==null?void 0:P.role)==="super_admin"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center gap-6 border-b border-light-border dark:border-dark-border mb-6",children:[r.jsx("button",{onClick:()=>s({tab:"comments"}),className:`pb-3 font-semibold text-sm transition-colors border-b-2 ${n==="comments"?"border-primary-500 text-primary-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(lt,{className:"w-4 h-4"}),"Comments (",i.commentCount,")"]})}),r.jsx("button",{onClick:()=>s({tab:"questions"}),className:`pb-3 font-semibold text-sm transition-colors border-b-2 ${n==="questions"?"border-purple-500 text-purple-500":"border-transparent text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"}`,children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(We,{className:"w-4 h-4"}),"Questions (",i.questionCount||0,")"]})})]}),n==="comments"?r.jsx(Ab,{postId:i._id,isPrayer:i.postType==="prayer",isAdminPost:v}):r.jsx(YD,{postId:i._id})]}):r.jsxs(r.Fragment,{children:[r.jsx("h3",{className:"text-xl font-bold text-gradient mb-6 flex items-center gap-2",children:i.postType==="prayer"?r.jsxs(r.Fragment,{children:[r.jsx(Ox,{className:"w-6 h-6 text-purple-500"}),"Community Prayers"]}):r.jsxs(r.Fragment,{children:[r.jsx(lt,{className:"w-6 h-6 text-primary-500"}),"Community Discussion"]})}),r.jsx(Ab,{postId:i._id,isPrayer:i.postType==="prayer",isAdminPost:v})]})})]})})]})}function XD(){const{user:e,isLoading:t}=Z(),s=de(),[n,a]=f.useState(""),i=V(S.follows.toggleFollow),[o,l]=f.useState(null),d=U(S.users.searchMembers,n.trim().length>0?{query:n}:"skip");return t?r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xt,{}),r.jsx(aa,{count:3})]})}):e?r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-6 md:mb-8",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-primary-600 dark:text-primary-400 mb-2",children:"Search Members"}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base",children:"Find and connect with community members"})]}),r.jsx("div",{className:"mb-6 md:mb-8",children:r.jsxs("div",{className:"relative flex items-center",children:[r.jsx("button",{onClick:()=>s(-1),className:"mr-2 p-2 text-primary-500 md:hidden","aria-label":"Go back",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"m12 19-7-7 7-7"}),r.jsx("path",{d:"M19 12H5"})]})}),r.jsxs("div",{className:"relative flex-1",children:[r.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",value:n,onChange:c=>a(c.target.value),placeholder:"Search by name...",className:`
                                w-full
                                pl-10 pr-10 py-2.5
                                rounded-lg
                                border border-light-border dark:border-dark-border
                                bg-light-card dark:bg-dark-card
                                text-sm text-light-text dark:text-dark-text
                                placeholder-light-muted dark:placeholder-dark-muted
                                focus:ring-2 focus:ring-primary-500 focus:border-transparent
                                outline-none transition-all
                                `}),n&&r.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text","aria-label":"Clear search",children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})]})}),n.trim().length===0?r.jsxs("div",{className:"text-center py-12 glass rounded-xl",children:[r.jsx(yt,{className:"w-12 h-12 mx-auto mb-4 text-light-muted dark:text-dark-muted"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Start typing to search for members"})]}):d===void 0?r.jsx(aa,{count:3}):d.length===0?r.jsxs("div",{className:"text-center py-12 glass rounded-xl",children:[r.jsx(yt,{className:"w-12 h-12 mx-auto mb-4 text-light-muted dark:text-dark-muted"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted",children:['No members found matching "',n,'"']})]}):r.jsx("div",{className:"space-y-3",children:d.map(c=>r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},onClick:()=>s(`/profile/${c._id}`),className:"glass rounded-lg p-4 hover:shadow-lg transition-all cursor-pointer group",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(dt,{src:c.avatarUrl,alt:c.name,size:"md"}),r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text group-hover:text-primary-500 transition-colors",children:c.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx(G,{variant:c.role==="admin"||c.role==="super_admin"?"primary":"default",className:"text-[10px]",children:c.role==="super_admin"?"Super Admin":c.role==="admin"?"Admin":"Member"}),r.jsxs("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:[c.followerCount||0," followers"]})]})]}),e._id!==c._id&&r.jsx("button",{onClick:u=>{u.stopPropagation(),!o&&(l(c._id),i({followerId:e._id,followingId:c._id}).finally(()=>l(null)))},className:"p-2 rounded-full hover:bg-primary-50 dark:hover:bg-primary-900/20 text-primary-500 transition-colors",children:r.jsx(yt,{className:"w-5 h-5"})}),c.latestPost&&r.jsxs("div",{className:"w-full mt-2 p-2 bg-light-card/50 dark:bg-dark-card/50 rounded-lg border border-light-border/50 dark:border-dark-border/50 text-xs text-light-muted dark:text-dark-muted",children:[r.jsx("span",{className:"font-semibold text-primary-500",children:"Latest: "}),r.jsx("span",{className:"line-clamp-1 break-all",children:c.latestPost.content})]})]})})]})},c._id))})]})}):r.jsx(Ee,{to:"/login",replace:!0})}function ZD(){const{userId:e}=la(),{user:t,isLoading:s}=Z(),[n,a]=f.useState(""),i=U(S.users.getUserProfile,e?{userId:e}:"skip"),o=U(S.posts.getPosts,e?{authorId:e,userId:t==null?void 0:t._id}:"skip"),l=(o==null?void 0:o.filter(v=>v.content.toLowerCase().includes(n.toLowerCase())))||[],d=U(S.follows.isFollowing,t&&e?{followerId:t._id,followingId:e}:"skip"),c=V(S.follows.toggleFollow),[u,m]=f.useState(!1),h=async()=>{if(!(!t||!e||u)){m(!0);try{await c({followerId:t._id,followingId:e})}catch(v){console.error("Failed to toggle follow:",v)}finally{m(!1)}}};if(s)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsx(Xt,{}),r.jsx("div",{className:"glass rounded-xl h-64 animate-pulse mb-6"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})});if(!t)return r.jsx(Ee,{to:"/login",replace:!0});if(i===void 0)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsx(Xt,{}),r.jsx("div",{className:"glass rounded-xl h-64 animate-pulse mb-6"}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})});if(i===null)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsx("div",{className:"text-center py-12 glass rounded-xl mt-6",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Member not found"})})]})});const x=i.role==="admin"||i.role==="super_admin",g=i.role==="super_admin";return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"glass rounded-xl overflow-hidden",children:[r.jsx("div",{className:"h-32 md:h-48 bg-gray-100 dark:bg-gray-800 relative",children:i.coverImageUrl?r.jsx("img",{src:i.coverImageUrl,className:"w-full h-full object-cover",alt:"Cover"}):r.jsx("div",{className:"w-full h-full bg-gradient-to-r from-primary-500/20 to-secondary-500/20"})}),r.jsxs("div",{className:"px-4 pb-4 md:px-8 md:pb-8 relative",children:[r.jsx("div",{className:"relative -mt-10 md:-mt-16 mb-3 md:mb-4 flex flex-col items-center md:items-start",children:r.jsx(dt,{src:i.avatarUrl,alt:i.name,size:"xl",className:`
                                        ring-4 ring-light-bg dark:ring-dark-bg 
                                        ${g?"ring-yellow-500":x?"ring-primary-500":""}
                                        w-20 h-20 md:w-32 md:h-32 shadow-lg
                                    `})}),r.jsxs("div",{className:"flex flex-col md:flex-row md:items-start md:justify-between gap-4 text-center md:text-left",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-center gap-2 mb-1",children:[r.jsx("h1",{className:"text-xl md:text-3xl font-bold text-light-text dark:text-dark-text truncate max-w-full",children:i.name}),g?r.jsxs(G,{variant:"primary",className:"bg-gradient-to-r from-yellow-500 to-amber-600 border-yellow-300 text-[10px] h-5",children:[r.jsx(We,{className:"w-3 h-3 mr-1"})," Super Admin"]}):x?r.jsxs(G,{variant:"primary",className:"bg-gradient-to-r from-primary-500 to-primary-600 text-[10px] h-5",children:[r.jsx(We,{className:"w-3 h-3 mr-1"})," Admin"]}):null]}),r.jsx("div",{className:"flex items-center justify-center md:justify-start gap-4 text-sm text-light-muted dark:text-dark-muted mb-4",children:r.jsxs("span",{children:["Joined ",ot(i.createdAt,{addSuffix:!0})]})}),r.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-6 mb-4 md:mb-0",children:[r.jsxs(te,{to:`/profile/${e}/followers`,className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:i.stats.followerCount||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Followers"})]}),r.jsxs(te,{to:`/profile/${e}/following`,className:"flex flex-col items-center md:items-start hover:opacity-80 transition-opacity",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:i.stats.followingCount||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Following"})]}),r.jsxs("div",{className:"flex flex-col items-center md:items-start",children:[r.jsx("span",{className:"text-lg font-bold text-light-text dark:text-dark-text leading-none",children:i.stats.likesReceived||0}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted",children:"Likes"})]})]})]}),t._id!==e&&r.jsx("div",{className:"shrink-0 flex justify-center md:justify-start",children:r.jsx(M,{variant:d?"outline":"primary",onClick:h,isLoading:u,className:"min-w-[120px] rounded-lg h-9 text-sm",children:d?r.jsxs(r.Fragment,{children:[r.jsx(Dw,{className:"w-4 h-4 mr-2"})," Unfollow"]}):r.jsxs(r.Fragment,{children:[r.jsx(Od,{className:"w-4 h-4 mr-2"})," Follow"]})})})]})]})]}),r.jsxs("div",{className:"space-y-6 pt-6 border-t border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text",children:"Posts"}),r.jsxs("div",{className:"relative w-full md:w-64",children:[r.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",placeholder:"Search posts...",value:n,onChange:v=>a(v.target.value),className:"w-full pl-9 pr-4 py-2 rounded-lg bg-light-card/50 dark:bg-dark-card/50 border border-light-border dark:border-dark-border focus:ring-2 focus:ring-primary-500 outline-none text-sm"})]})]}),o===void 0?r.jsx("div",{className:"grid gap-6",children:[1,2].map(v=>r.jsx("div",{className:"glass rounded-2xl p-6 h-40 animate-pulse"},v))}):o.length===0?r.jsx("div",{className:"text-center py-12 glass rounded-2xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No posts yet"})}):l.length===0?r.jsx("div",{className:"text-center py-12 glass rounded-2xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"No posts match your search"})}):r.jsx("div",{className:"grid gap-6",children:l.map(v=>r.jsx(Ip,{post:v,onCommentClick:()=>window.location.href=`/post/${v._id}`,hasUserLiked:v.hasLiked},v._id))})]})]})]})})}function eO(){return r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 md:mt-6 space-y-6 md:space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"About Baptizo"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text max-w-2xl mx-auto",children:"A community dedicated to spiritual growth through ancient wisdom and modern insights"})]}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},className:"glass rounded-xl p-6 border border-primary-500/20",children:[r.jsx(KC,{className:"w-12 h-12 text-primary-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Purpose"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"To create a space where believers can deepen their understanding of both Old and New Testament teachings, fostering spiritual growth and community."})]}),r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},className:"glass rounded-xl p-6 border border-secondary-500/20",children:[r.jsx(gn,{className:"w-12 h-12 text-secondary-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Values"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Authenticity, spiritual depth, community support, and continuous learning guide everything we do."})]}),r.jsxs(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"glass rounded-xl p-6 border border-accent-500/20",children:[r.jsx(ke,{className:"w-12 h-12 text-accent-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Community"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"A diverse group of believers united by a shared desire to grow in faith and understanding."})]}),r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"glass rounded-xl p-6 border border-primary-500/20",children:[r.jsx(Gr,{className:"w-12 h-12 text-primary-500 mb-4"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Our Approach"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"Combining ancient prophetic wisdom with contemporary spiritual insights for holistic faith development."})]})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"glass rounded-xl p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-4",children:"Our Story"}),r.jsxs("div",{className:"space-y-4 text-light-muted dark:text-dark-muted",children:[r.jsx("p",{children:"Baptizo was founded with a vision to bridge the gap between ancient biblical wisdom and modern spiritual understanding. We believe that both the teachings of the Old Testament and the revelations of the New Testament hold profound truths for today's believers."}),r.jsx("p",{children:"Through our platform, we provide curated teachings, community discussions, and opportunities for spiritual engagement. Our admin team carefully crafts content that helps members explore Ancient Culture (Old Testament wisdom) and Wisdom of The Now (New Testament insights)."}),r.jsx("p",{children:"Whether you're seeking to deepen your understanding of prophetic systems, explore spiritual identity, or connect with like-minded believers, Baptizo offers a supportive community for your journey."})]})]})]})]})})}function tO(){return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Privacy Policy"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Last updated: December 2024"})]}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(We,{className:"w-8 h-8 text-primary-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"Protected Data"})]}),r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(Ye,{className:"w-8 h-8 text-secondary-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"Secure Storage"})]}),r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(Tt,{className:"w-8 h-8 text-accent-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"Transparent Use"})]}),r.jsxs("div",{className:"glass rounded-lg p-4 text-center",children:[r.jsx(Dd,{className:"w-8 h-8 text-primary-500 mx-auto mb-2"}),r.jsx("p",{className:"text-xs font-semibold text-light-text dark:text-dark-text",children:"User Control"})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(ba,{title:"Information We Collect",content:["Account Information: Name, email address, and profile picture","Content: Posts, responses, comments, and interactions within the community","Usage Data: How you interact with our platform to improve user experience","Device Information: Browser type, IP address for security purposes"]}),r.jsx(ba,{title:"How We Use Your Information",content:["Provide and maintain our services","Notify you about changes and updates","Allow participation in community features","Provide customer support","Monitor and analyze usage patterns","Detect and prevent fraudulent activity"]}),r.jsx(ba,{title:"Data Sharing",content:["We do NOT sell your personal information to third parties","Your profile and public content are visible to other community members","We may share data with service providers who assist in operating our platform","We may disclose information if required by law or to protect our rights"]}),r.jsx(ba,{title:"Your Rights",content:["Access your personal data","Correct inaccurate information","Request deletion of your account and data","Opt-out of marketing communications","Export your data"]}),r.jsx(ba,{title:"Data Security",content:["We implement industry-standard security measures","All data is encrypted in transit and at rest","Regular security audits and updates","Access controls and authentication requirements"]}),r.jsx(ba,{title:"Contact Us",content:["If you have questions about this Privacy Policy, please contact us through our Contact page or email us at privacy@baptizo.com"]})]})]})]})})}function ba({title:e,content:t}){return r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-4",children:e}),r.jsx("ul",{className:"space-y-2",children:t.map((s,n)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-primary-500 mt-1",children:""}),r.jsx("span",{children:s})]},n))})]})}function rO(){return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx(Yt,{className:"w-16 h-16 text-primary-500 mx-auto mb-4"}),r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Terms of Service"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Last updated: December 2024"})]}),r.jsx("div",{className:"glass rounded-xl p-6 bg-primary-50/50 dark:bg-primary-900/10 border border-primary-500/20",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(ln,{className:"w-6 h-6 text-primary-500 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text mb-2",children:"Agreement to Terms"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"By accessing Baptizo, you agree to be bound by these Terms of Service and all applicable laws and regulations. If you do not agree, please discontinue use of our platform."})]})]})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ar,{title:"1. User Accounts",content:["You must be at least 13 years old to create an account","Provide accurate and complete information during registration","Maintain the security of your account credentials","You are responsible for all activities under your account","Notify us immediately of any unauthorized access"]}),r.jsx(Ar,{title:"2. User Conduct",content:["Be respectful and courteous to all community members","Do not post hateful, abusive, or harassing content","Do not spam or post irrelevant content","Respect intellectual property rights","Do not impersonate others or misrepresent affiliations","Follow our Community Guidelines at all times"]}),r.jsx(Ar,{title:"3. Content Ownership",content:["You retain ownership of content you post","By posting, you grant Baptizo a license to use, display, and distribute your content","Admin-created content remains property of Baptizo","You may not use our content without permission"]}),r.jsx(Ar,{title:"4. Rewards & Recognition",content:["Rewards are granted at admin discretion for quality contributions","Rewards may have specific terms and conditions","We reserve the right to modify or discontinue reward programs","Fraudulent activity may result in reward forfeiture and account termination"]}),r.jsx(Ar,{title:"5. Prohibited Activities",content:["Attempting to hack or compromise platform security","Using automated tools or bots without permission","Selling or transferring your account","Posting illegal, harmful, or inappropriate content","Violating any applicable laws or regulations"]}),r.jsx(Ar,{title:"6. Termination",content:["We may suspend or terminate accounts that violate these terms","You may delete your account at any time","Upon termination, your right to use Baptizo ceases immediately","We may retain certain data as required by law"]}),r.jsx(Ar,{title:"7. Disclaimers",content:["Baptizo is provided 'as is' without warranties of any kind","We do not guarantee uninterrupted or error-free service","Content is for informational purposes and not professional advice","We are not responsible for user-generated content"]}),r.jsx(Ar,{title:"8. Limitation of Liability",content:["Baptizo shall not be liable for indirect, incidental, or consequential damages","Our liability is limited to the amount you paid, if any","Some jurisdictions do not allow these limitations"]}),r.jsx(Ar,{title:"9. Changes to Terms",content:["We may update these terms from time to time","Continued use after changes constitutes acceptance","Material changes will be announced to users"]}),r.jsx(Ar,{title:"10. Contact Information",content:["For questions about these Terms, contact us at terms@baptizo.com or through our Contact page"]})]}),r.jsx("div",{className:"glass rounded-xl p-6 border border-secondary-500/20",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx(et,{className:"w-6 h-6 text-secondary-500 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-light-text dark:text-dark-text mb-2",children:"Acceptance"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"By using Baptizo, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."})]})]})})]})]})})}function Ar({title:e,content:t}){return r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text mb-4",children:e}),r.jsx("ul",{className:"space-y-2",children:t.map((s,n)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-primary-500 mt-1",children:""}),r.jsx("span",{children:s})]},n))})]})}function sO(){const[e,t]=f.useState({name:"",email:"",subject:"",message:""}),[s,n]=f.useState(!1),[a,i]=f.useState(!1),o=V(S.contacts.submitContact),l=async d=>{d.preventDefault(),i(!0);try{await o(e),n(!0),t({name:"",email:"",subject:"",message:""}),setTimeout(()=>n(!1),3e3)}catch(c){console.error("Failed to submit contact:",c)}finally{i(!1)}};return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Contact Us"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text",children:"We'd love to hear from you"})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-4 mb-8",children:[r.jsxs("div",{className:"glass rounded-xl p-6 text-center hover:shadow-lg transition-shadow",children:[r.jsx(zr,{className:"w-10 h-10 text-primary-500 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text mb-2",children:"Email"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"support@baptizo.com"})]}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center hover:shadow-lg transition-shadow",children:[r.jsx(Ot,{className:"w-10 h-10 text-secondary-500 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text mb-2",children:"Community"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Ask in the Feed"})]}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center hover:shadow-lg transition-shadow",children:[r.jsx(Md,{className:"w-10 h-10 text-accent-500 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-light-text dark:text-dark-text mb-2",children:"FAQ"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Check our FAQ page"})]})]}),r.jsxs("div",{className:"glass rounded-xl p-6 md:p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-6",children:"Send us a message"}),s?r.jsxs("div",{className:"glass rounded-lg p-6 bg-secondary-50/50 dark:bg-secondary-900/10 border border-secondary-500/20 text-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-secondary-600 dark:text-secondary-400 mb-2",children:"Message Sent!"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"We'll get back to you as soon as possible."})]}):r.jsxs("form",{onSubmit:l,className:"space-y-4",children:[r.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Name"}),r.jsx("input",{type:"text",required:!0,value:e.name,onChange:d=>t({...e,name:d.target.value}),className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",placeholder:"Your name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Email"}),r.jsx("input",{type:"email",required:!0,value:e.email,onChange:d=>t({...e,email:d.target.value}),className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",placeholder:"your@email.com"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Subject"}),r.jsx("input",{type:"text",required:!0,value:e.subject,onChange:d=>t({...e,subject:d.target.value}),className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none",placeholder:"What's this about?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-light-text dark:text-dark-text mb-2",children:"Message"}),r.jsx("textarea",{required:!0,value:e.message,onChange:d=>t({...e,message:d.target.value}),rows:6,className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none resize-none",placeholder:"Tell us more..."})]}),r.jsx("button",{type:"submit",disabled:a,className:"w-full md:w-auto px-8 py-3 rounded-lg bg-primary-500 hover:bg-primary-600 disabled:bg-primary-300 text-white font-semibold transition-colors shadow-lg shadow-primary-500/20",children:a?"Sending...":"Send Message"})]})]})]})]})})}const nO=[{category:"Getting Started",questions:[{q:"What is Baptizo?",a:"Baptizo is a faith-based community platform focused on spiritual growth through Ancient Culture (Old Testament wisdom) and Wisdom of The Now (New Testament insights)."},{q:"How do I create an account?",a:"Click the 'Get Started' button on the homepage, fill in your details, and verify your email address. You'll gain immediate access to the community."},{q:"Is Baptizo free to use?",a:"Yes! Baptizo is completely free for all members. We believe spiritual growth should be accessible to everyone."}]},{category:"Using the Platform",questions:[{q:"What's the difference between Ancient Culture and Wisdom of The Now?",a:"Ancient Culture focuses on Old Testament teachings, prophetic wisdom, and ancient systems. Wisdom of The Now explores New Testament insights, spiritual identity, and contemporary applications of faith."},{q:"Who can create posts?",a:"Admin-created posts appear in Ancient Culture and Wisdom sections. All members can engage through responses, comments, and the community feed."},{q:"How do I submit a response to a post?",a:"When you see an official admin post, look for the 'Submit Official Response' button. Click it to share your thoughts and insights."}]},{category:"Rewards & Recognition",questions:[{q:"How does the reward system work?",a:"Admins review responses to official posts and assign rewards based on quality, depth, and insight. Top responses are featured and may receive recognition or benefits."},{q:"What happens after I submit a response?",a:"Your response is reviewed by admins who may grade it and provide feedback. Exceptional responses are featured and rewarded."}]},{category:"Community Guidelines",questions:[{q:"What content is allowed?",a:"We welcome respectful, faith-based discussions. Content should be relevant, thoughtful, and align with our values of spiritual growth and community support."},{q:"What should I do if I see inappropriate content?",a:"Use the report function or contact admins directly. We take community standards seriously and review all reports promptly."}]},{category:"Account & Privacy",questions:[{q:"How do I update my profile?",a:"Navigate to your Profile page and click the edit button. You can update your name, avatar, and other personal information."},{q:"Is my data safe?",a:"Yes! We use industry-standard encryption and security measures. Read our Privacy Policy for full details on how we protect your information."},{q:"Can I delete my account?",a:"Yes, you can delete your account anytime from your profile settings. Note that this action is permanent and cannot be undone."}]}];function aO(){return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Frequently Asked Questions"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text",children:"Find answers to common questions about Baptizo"})]}),r.jsx("div",{className:"space-y-8",children:nO.map((e,t)=>r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-light-text dark:text-dark-text mb-4",children:e.category}),r.jsx("div",{className:"space-y-3",children:e.questions.map((s,n)=>r.jsx(iO,{question:s.q,answer:s.a},n))})]},t))}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Still have questions?"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-4",children:"Can't find what you're looking for? Reach out to our support team."}),r.jsx("a",{href:"/contact",className:"inline-block px-6 py-3 rounded-lg bg-primary-500 hover:bg-primary-600 text-white font-semibold transition-colors shadow-lg shadow-primary-500/20",children:"Contact Support"})]})]})]})})}function iO({question:e,answer:t}){const[s,n]=f.useState(!1);return r.jsxs(T.div,{initial:!1,className:"glass rounded-lg overflow-hidden border border-light-border dark:border-dark-border",children:[r.jsxs("button",{onClick:()=>n(!s),className:"w-full px-6 py-4 flex items-center justify-between text-left hover:bg-light-bg dark:hover:bg-dark-bg transition-colors",children:[r.jsx("span",{className:"font-semibold text-light-text dark:text-dark-text pr-4",children:e}),s?r.jsx(zn,{className:"w-5 h-5 text-primary-500 flex-shrink-0"}):r.jsx(Ke,{className:"w-5 h-5 text-light-muted dark:text-dark-muted flex-shrink-0"})]}),r.jsx(T.div,{initial:!1,animate:{height:s?"auto":0},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:r.jsx("div",{className:"px-6 pb-4 text-light-muted dark:text-dark-muted",children:t})})]})}function oO(){const e=[{icon:gn,title:"Be Respectful",description:"Treat all community members with kindness and respect. No harassment, hate speech, or discriminatory language.",color:"text-red-500"},{icon:lt,title:"Stay On Topic",description:"Keep discussions relevant to faith, spiritual growth, and biblical teachings. Avoid spam or irrelevant content.",color:"text-primary-500"},{icon:ke,title:"Support Others",description:"Encourage fellow members in their faith journey. Offer constructive feedback and genuine support.",color:"text-secondary-500"},{icon:We,title:"Protect Privacy",description:"Don't share personal information about yourself or others. Respect everyone's privacy and confidentiality.",color:"text-accent-500"}],t=["Engage thoughtfully with posts and responses","Cite scriptures and sources when appropriate","Ask genuine questions and seek understanding","Celebrate others' insights and growth","Report concerning content to admins","Use appropriate language and tone"],s=["Post hateful, abusive, or harassing content","Spam or post repetitive content","Share misleading or false information","Impersonate others or misrepresent yourself","Promote non-faith-related products or services","Engage in heated arguments or flame wars"];return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xe,{}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6 space-y-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-primary-600 dark:text-primary-400 mb-4",children:"Community Guidelines"}),r.jsx("p",{className:"text-lg text-light-text dark:text-dark-text max-w-2xl mx-auto",children:"Our guidelines help maintain a welcoming, respectful community for spiritual growth"})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:e.map((n,a)=>{const i=n.icon;return r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},className:"glass rounded-xl p-6 border border-light-border dark:border-dark-border hover:shadow-lg transition-shadow",children:[r.jsx(i,{className:`w-10 h-10 ${n.color} mb-4`}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:n.title}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted text-sm",children:n.description})]},a)})}),r.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Kt,{className:"w-6 h-6 text-green-500"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text",children:"Do"})]}),r.jsx("ul",{className:"space-y-2",children:t.map((n,a)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-green-500 mt-1 flex-shrink-0",children:""}),r.jsx("span",{children:n})]},a))})]}),r.jsxs("div",{className:"glass rounded-xl p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(Tr,{className:"w-6 h-6 text-red-500"}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text",children:"Don't"})]}),r.jsx("ul",{className:"space-y-2",children:s.map((n,a)=>r.jsxs("li",{className:"flex items-start gap-2 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("span",{className:"text-red-500 mt-1 flex-shrink-0",children:""}),r.jsx("span",{children:n})]},a))})]})]}),r.jsxs("div",{className:"glass rounded-xl p-6 bg-primary-50/50 dark:bg-primary-900/10 border border-primary-500/20",children:[r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-4",children:"Enforcement"}),r.jsxs("div",{className:"space-y-3 text-light-muted dark:text-dark-muted text-sm",children:[r.jsx("p",{children:"Violations of these guidelines may result in:"}),r.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[r.jsx("li",{children:"Warning from moderators"}),r.jsx("li",{children:"Temporary suspension of posting privileges"}),r.jsx("li",{children:"Permanent account termination for severe or repeated violations"})]}),r.jsx("p",{className:"mt-4",children:"We're committed to maintaining a positive community. If you see content that violates these guidelines, please report it to our admin team."})]})]}),r.jsxs("div",{className:"glass rounded-xl p-6 text-center",children:[r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-3",children:"Questions about our guidelines?"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-4",children:"Reach out to our team for clarification."}),r.jsx("a",{href:"/contact",className:"inline-block px-6 py-3 rounded-lg bg-primary-500 hover:bg-primary-600 text-white font-semibold transition-colors shadow-lg shadow-primary-500/20",children:"Contact Us"})]})]})]})})}function lO(){const{user:e,isLoading:t}=Z(),s=de(),n=U(S.users.getAllUsers,e?{adminId:e._id}:"skip"),a=V(S.users.updateUserRole),i=V(S.finance.assignFinancialManager),[o,l]=f.useState(""),[d,c]=f.useState(!1),[u,m]=f.useState(!1),[h,x]=f.useState(null),[g,v]=f.useState(null),[y,p]=f.useState(1),b=10;f.useEffect(()=>{p(1)},[o]);const w=(n==null?void 0:n.filter(C=>C.name.toLowerCase().includes(o.toLowerCase())||C.email.toLowerCase().includes(o.toLowerCase())))||[],k=y*b,j=k-b,N=w.slice(j,k),_=Math.ceil(w.length/b),A=(C,P,R,W,Y)=>{let se="",Q="",pe=We,$="text-primary-500";W==="admin"?R==="admin"?Y==="board_member"?(se="revert this user from Admin to Board Member",Q="board_member",pe=ke,$="text-blue-500"):(se="demote this user from Admin to Member",Q="member",pe=ke,$="text-gray-500"):(se="promote this user to Admin",Q="admin",pe=qC,$="text-primary-500"):W==="board"&&(R==="board_member"?(se="remove this user from Board Members",Q="member",pe=ke,$="text-gray-500"):(se="add this user to Board Members",Q="board_member",pe=Dd,$="text-blue-500")),v({id:C,name:P,action:se,newRole:Q,icon:pe,color:$}),c(!0)},L=async()=>{if(!(!g||!e))try{await a({adminId:e._id,userId:g.id,newRole:g.newRole}),c(!1),v(null)}catch(C){console.error("Failed to update role",C)}};return t?r.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):!e||e.role!=="admin"&&e.role!=="super_admin"?r.jsx(Ee,{to:"/feed",replace:!0}):r.jsxs("div",{className:"space-y-8 pb-12",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gradient font-display mb-1",children:"Role Management"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Assign and manage administrative privileges for community members"})]}),r.jsx("div",{className:"w-full md:w-80",children:r.jsx(me,{placeholder:"Search by name or email...",value:o,onChange:C=>l(C.target.value),icon:r.jsx(mt,{className:"w-5 h-5 text-light-muted"}),className:"bg-white/50 dark:bg-dark-card/50 backdrop-blur-sm border-light-border dark:border-dark-border"})})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(D,{glass:!0,className:"border-primary-500/20",children:r.jsxs(O,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-primary-500/10 flex items-center justify-center",children:r.jsx(We,{className:"w-6 h-6 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Admins"}),r.jsx("p",{className:"text-2xl font-bold",children:(n==null?void 0:n.filter(C=>C.role==="admin"||C.role==="super_admin").length)||0})]})]})}),r.jsx(D,{glass:!0,className:"border-blue-500/20",children:r.jsxs(O,{className:"p-4 flex items-center gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-blue-500/10 flex items-center justify-center",children:r.jsx(Dd,{className:"w-6 h-6 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Board Members"}),r.jsx("p",{className:"text-2xl font-bold",children:(n==null?void 0:n.filter(C=>C.role==="board_member").length)||0})]})]})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:r.jsx(re,{mode:"popLayout",children:n===void 0?Array.from({length:6}).map((C,P)=>r.jsx("div",{children:r.jsx(rD,{})},P)):N.length>0?N.map(C=>r.jsx(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:r.jsxs(D,{glass:!0,className:`h-full group hover:border-primary-500/30 transition-all duration-300 overflow-hidden relative ${C.role==="admin"||C.role==="super_admin"?"border-primary-500/50":C.role==="board_member"?"border-blue-500/50":""}`,children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-primary-500/5 to-transparent rounded-bl-full pointer-events-none"}),r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{onClick:()=>s(`/admin/user/${C._id}`),className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-light-bg to-light-card dark:from-dark-bg dark:to-dark-card border border-light-border dark:border-dark-border flex items-center justify-center text-xl font-bold text-gradient overflow-hidden shadow-sm cursor-pointer hover:scale-105 transition-transform duration-200",children:C.avatarUrl?r.jsx("img",{src:C.avatarUrl,alt:C.name,className:"w-full h-full object-cover"}):C.name[0]}),r.jsx(G,{variant:C.role==="admin"||C.role==="super_admin"?"primary":C.role==="board_member"?"secondary":"default",className:"px-3 py-1",children:C.role.replace("_"," ")})]}),r.jsxs("div",{className:"space-y-1 mb-6",children:[r.jsx("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text truncate",children:C.name}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-light-muted dark:text-dark-muted",children:[r.jsx(zr,{className:"w-3.5 h-3.5"}),r.jsx("span",{className:"truncate",children:C.email})]}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-light-muted dark:text-dark-muted",children:[r.jsx(kc,{className:"w-3.5 h-3.5"}),r.jsx("span",{children:C.phone||"No phone"})]})]}),e.role==="super_admin"&&C.role!=="super_admin"&&r.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-4 border-t border-light-border/50 dark:border-dark-border/50",children:[r.jsx(M,{variant:C.role==="admin"?"outline":"primary",size:"sm",className:"w-full text-[10px] font-bold h-9",onClick:()=>A(C._id,C.name,C.role,"admin",C.previousRole),children:C.role==="admin"?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ke,{className:"w-3 h-3"}),"Demote"]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(We,{className:"w-3 h-3"}),"Make Admin"]})}),r.jsx(M,{variant:C.role==="board_member"?"outline":"secondary",size:"sm",className:`w-full text-[10px] font-bold h-9 ${C.role==="board_member"?"border-blue-500 text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/10":""}`,onClick:()=>A(C._id,C.name,C.role,"board"),children:C.role==="board_member"?r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Od,{className:"w-3 h-3"}),"Remove Board"]}):r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Od,{className:"w-3 h-3"}),"Add Board"]})})]}),e.role==="super_admin"&&C.role==="board_member"&&r.jsx("div",{className:"pt-3",children:r.jsx(M,{variant:C.isFinancialManager?"primary":"outline",size:"sm",className:"w-full text-[10px] font-bold h-9",onClick:()=>{x({id:C._id,name:C.name,isCurrentlyManager:C.isFinancialManager||!1}),m(!0)},children:r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(_r,{className:"w-3 h-3"}),C.isFinancialManager?"Remove Finance Role":"Make Finance Manager"]})})})]})]})},C._id)):r.jsxs("div",{className:"col-span-full py-12 text-center text-light-muted",children:[r.jsx(ke,{className:"w-16 h-16 mx-auto mb-4 opacity-10"}),r.jsx("p",{className:"text-lg",children:"No users found matching your search"})]})})}),_>1&&r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-12 bg-light-card/30 dark:bg-dark-card/30 p-4 rounded-3xl border border-light-border/20 dark:border-dark-border/20 max-w-fit mx-auto",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>p(C=>Math.max(1,C-1)),disabled:y===1,className:"rounded-xl h-10 w-10 p-0",children:r.jsx(Zn,{className:"w-5 h-5"})}),r.jsx("div",{className:"flex items-center gap-1.5 px-2",children:Array.from({length:_},(C,P)=>P+1).map(C=>r.jsx("button",{onClick:()=>p(C),className:`
                                    w-10 h-10 rounded-xl text-sm font-bold transition-all
                                    ${y===C?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-light-muted hover:bg-light-card dark:hover:bg-dark-card hover:text-primary-500"}
                                `,children:C},C))}),r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>p(C=>Math.min(_,C+1)),disabled:y===_,className:"rounded-xl h-10 w-10 p-0",children:r.jsx(_o,{className:"w-5 h-5"})})]}),r.jsx(ht,{isOpen:d,onClose:()=>c(!1),title:"Confirm Role Change",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[r.jsx("div",{className:`w-20 h-20 rounded-3xl bg-gradient-to-br from-light-bg to-light-card dark:from-dark-bg dark:to-dark-card border border-light-border dark:border-dark-border flex items-center justify-center mb-4 shadow-xl ${g==null?void 0:g.color}`,children:g&&r.jsx(g.icon,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:"Confirm Action"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs",children:["Are you sure you want to ",g==null?void 0:g.action," ",r.jsx("strong",{children:g==null?void 0:g.name}),"?"]})]}),r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-amber-500/5 border border-amber-500/20",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center shrink-0",children:r.jsx(ln,{className:"w-6 h-6 text-amber-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-amber-700 dark:text-amber-500 mb-1",children:"Important Security Note"}),r.jsx("p",{className:"text-xs text-amber-700/70 dark:text-amber-500/70",children:"This user will gain or lose access to administrative tools and sensitive data. This action is logged."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(M,{variant:"ghost",className:"w-full rounded-2xl h-12",onClick:()=>c(!1),children:"Cancel"}),r.jsx(M,{variant:"primary",className:"w-full rounded-2xl h-12 shadow-lg shadow-primary-500/20",onClick:L,children:"Yes, Update Role"})]})]})}),r.jsx(ht,{isOpen:u,onClose:()=>m(!1),title:"Financial Manager Assignment",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-emerald-500/10 to-emerald-500/5 border border-emerald-500/20 flex items-center justify-center mb-4 shadow-xl",children:r.jsx(_r,{className:"w-10 h-10 text-emerald-500"})}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:"Confirm Action"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs",children:h!=null&&h.isCurrentlyManager?`Remove ${h==null?void 0:h.name} from Financial Manager role?`:`Assign ${h==null?void 0:h.name} as Financial Manager?`})]}),r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-blue-500/5 border border-blue-500/20",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/10 flex items-center justify-center shrink-0",children:r.jsx(ln,{className:"w-6 h-6 text-blue-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-blue-700 dark:text-blue-500 mb-1",children:"Financial Manager Permissions"}),r.jsx("p",{className:"text-xs text-blue-700/70 dark:text-blue-500/70",children:h!=null&&h.isCurrentlyManager?"This user will lose access to add/reverse financial transactions.":"This user will be able to add and reverse financial transactions (within 24 hours) but cannot create meetings."})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(M,{variant:"ghost",className:"w-full rounded-2xl h-12",onClick:()=>m(!1),children:"Cancel"}),r.jsxs(M,{variant:"primary",className:"w-full rounded-2xl h-12 shadow-lg shadow-primary-500/20",onClick:async()=>{h&&(await i({adminId:e._id,userId:h.id,assign:!h.isCurrentlyManager}),m(!1),x(null))},children:["Yes, ",h!=null&&h.isCurrentlyManager?"Remove":"Assign"]})]})]})})]})}function dO(){const{userId:e}=la(),t=de(),{user:s}=Z(),[n,a]=f.useState(null),i=U(S.users.getUser,{userId:e}),o=U(S.users.getUserStats,{userId:e}),l=(d,c)=>{navigator.clipboard.writeText(d),a(c),setTimeout(()=>a(null),2e3)};return i===void 0?r.jsx("div",{className:"py-8",children:r.jsx(iD,{})}):i?r.jsxs("div",{className:"max-w-5xl mx-auto pb-20",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors group",children:[r.jsx("div",{className:"p-2 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border group-hover:border-primary-500/50 transition-all",children:r.jsx(Zn,{className:"w-5 h-5"})}),r.jsx("span",{className:"font-bold text-sm uppercase tracking-widest italic text-[10px]",children:"Back to Directory"})]}),r.jsxs(G,{variant:"outline",className:"px-4 py-1.5 border-primary-500/30 text-primary-500 font-bold",children:["USER_ID: ",i._id]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs(D,{glass:!0,className:"overflow-hidden border-primary-500/10",children:[r.jsx("div",{className:"h-24 bg-gradient-to-br from-primary-500/20 to-secondary-500/20 relative"}),r.jsx(O,{className:"px-6 pb-8 -mt-12 relative",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:"w-24 h-24 rounded-[32px] bg-gradient-to-br from-primary-500 to-secondary-500 p-1 shadow-2xl shadow-primary-500/20 mb-4 bg-white dark:bg-dark-card border-4 border-light-bg dark:border-dark-bg",children:r.jsx("div",{className:"w-full h-full rounded-[28px] overflow-hidden flex items-center justify-center font-black text-3xl text-gradient",children:i.avatarUrl?r.jsx("img",{src:i.avatarUrl,alt:i.name,className:"w-full h-full object-cover"}):i.name[0]})}),r.jsx("h2",{className:"text-2xl font-black text-center text-light-text dark:text-dark-text",children:i.name}),r.jsx("p",{className:"text-primary-500 font-bold uppercase tracking-widest text-[10px] mt-1",children:i.role.replace("_"," ")}),r.jsxs("div",{className:"mt-8 w-full grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-3 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30 text-center",children:[r.jsx("p",{className:"text-lg font-black",children:(o==null?void 0:o.totalPosts)||0}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-tighter italic",children:"Total Posts"})]}),r.jsxs("div",{className:"p-3 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30 text-center",children:[r.jsx("p",{className:"text-lg font-black text-emerald-500",children:(o==null?void 0:o.totalRewards)||0}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-tighter italic",children:"Rewards"})]})]})]})})]}),r.jsxs(D,{glass:!0,className:"p-6 border-emerald-500/10",children:[r.jsxs(ge,{className:"text-[10px] font-black uppercase tracking-[0.2em] text-light-muted mb-6 flex items-center gap-2",children:[r.jsx(CC,{className:"w-3 h-3 text-emerald-500"})," Community Activity"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-light-muted",children:"Followers"}),r.jsx("span",{className:"text-sm font-bold",children:(o==null?void 0:o.followerCount)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-light-muted",children:"Following"}),r.jsx("span",{className:"text-sm font-bold",children:(o==null?void 0:o.followingCount)||0})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-medium text-light-muted",children:"Member Since"}),r.jsxs("span",{className:"text-sm font-bold flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3.5 h-3.5"}),new Date(i._creationTime).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]})]})]})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs(D,{glass:!0,className:"overflow-hidden border-light-border/20 dark:border-dark-border/20",children:[r.jsx(fe,{className:"bg-light-card/30 dark:bg-dark-card/30 border-b border-light-border/20 dark:border-dark-border/20",children:r.jsxs(ge,{className:"text-xs font-black uppercase tracking-widest flex items-center gap-2",children:[r.jsx(yt,{className:"w-4 h-4 text-primary-500"})," Identity Information"]})}),r.jsxs(O,{className:"p-8 grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(zr,{className:"w-3 h-3"})," Email Address"]}),r.jsx("p",{className:"font-bold text-base truncate",children:i.email})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(kc,{className:"w-3 h-3"})," Phone Number"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:"font-bold text-base",children:i.phone||"N/A"}),i.network&&r.jsx(G,{variant:"secondary",className:"text-[9px] px-1.5 italic h-5",children:i.network})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(Rx,{className:"w-3 h-3"})," Profession / Field"]}),r.jsx("p",{className:"font-bold text-base capitalize",children:i.profession||"Community Member"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1.5 flex items-center gap-2",children:[r.jsx(et,{className:"w-3 h-3 text-emerald-500"})," Verification"]}),r.jsx("p",{className:"font-bold text-sm",children:i.whatsappVerified?r.jsxs("span",{className:"text-emerald-500 flex items-center gap-1.5",children:["WhatsApp Verified ",r.jsx(We,{className:"w-3 h-3"})]}):r.jsx("span",{className:"text-rose-500",children:"Unverified Account"})})]})]})]})]}),r.jsxs(D,{glass:!0,className:"overflow-hidden border-amber-500/10",children:[r.jsx(fe,{className:"bg-amber-500/5 border-b border-amber-500/10",children:r.jsxs(ge,{className:"text-xs font-black uppercase tracking-widest flex items-center gap-2",children:[r.jsx(ea,{className:"w-4 h-4 text-amber-500"})," Payment & Bank Details"]})}),r.jsx(O,{className:"p-8",children:i.bankDetails?r.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"md:col-span-2 p-5 rounded-2xl bg-amber-500/5 border border-amber-500/10 relative group",children:[r.jsx("label",{className:"text-[10px] font-black text-amber-600/60 uppercase tracking-widest mb-1 block",children:"Account Full Name"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-xl font-black text-light-text dark:text-dark-text tracking-tight uppercase",children:i.bankDetails.accountName}),r.jsx("button",{onClick:()=>l(i.bankDetails.accountName,"accName"),className:"p-2 rounded-xl bg-amber-500/10 text-amber-600 hover:bg-amber-500/20 transition-all",children:n==="accName"?r.jsx(nt,{className:"w-4 h-4"}):r.jsx(ah,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"p-5 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30",children:[r.jsx("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1 block italic",children:"Financial Institution"}),r.jsx("p",{className:"text-lg font-bold",children:i.bankDetails.bankName})]}),r.jsxs("div",{className:"p-5 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border/30 dark:border-dark-border/30 relative group",children:[r.jsx("label",{className:"text-[10px] font-black text-light-muted uppercase tracking-widest mb-1 block italic",children:"Account Identifier"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-lg font-mono font-black tracking-[0.2em]",children:i.bankDetails.accountNumber}),r.jsx("button",{onClick:()=>l(i.bankDetails.accountNumber,"accNum"),className:"p-2 rounded-xl hover:bg-light-card dark:hover:bg-dark-card transition-all",children:n==="accNum"?r.jsx(nt,{className:"w-4 h-4 text-emerald-500"}):r.jsx(ah,{className:"w-4 h-4 text-light-muted"})})]})]})]}):r.jsxs("div",{className:"text-center py-10 opacity-60",children:[r.jsx(ea,{className:"w-12 h-12 text-light-muted mx-auto mb-4 stroke-1"}),r.jsx("p",{className:"font-bold text-light-muted",children:"No banking information provided yet."}),r.jsx("p",{className:"text-xs italic",children:"User needs to update their profile settings."})]})})]})]})]})]}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx("h2",{className:"text-2xl font-bold mb-4",children:"User not found"}),r.jsx(M,{onClick:()=>t(-1),children:"Go Back"})]})}function cO(){var n;const{id:e}=la(),t=de(),s=U(S.announcements.getAnnouncementById,e?{id:e}:"skip");return s===void 0?r.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[r.jsx(Xt,{}),r.jsx("div",{className:"h-64 bg-light-card dark:dark-card rounded-3xl animate-pulse mt-8"})]}):s?r.jsx("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg py-8",children:r.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[r.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors mb-8 group",children:[r.jsx("div",{className:"p-2 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border group-hover:border-primary-500/50",children:r.jsx(Zn,{className:"w-5 h-5"})}),r.jsx("span",{className:"font-bold text-sm uppercase tracking-widest",children:"Back"})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[s.imageUrl&&r.jsxs("div",{className:"w-full h-80 md:h-[400px] rounded-[40px] overflow-hidden border border-light-border/20 dark:border-dark-border/20 shadow-2xl relative",children:[r.jsx("img",{src:s.imageUrl,alt:s.title,className:"w-full h-full object-cover"}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),r.jsxs("div",{className:"absolute bottom-8 left-8 right-8",children:[r.jsx(G,{variant:"primary",className:"mb-4",children:"Official Announcement"}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-white font-display leading-tight",children:s.title})]})]}),!s.imageUrl&&r.jsxs("div",{className:"mb-4",children:[r.jsx(G,{variant:"primary",className:"mb-4",children:"Official Announcement"}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-light-text dark:text-dark-text font-display leading-tight",children:s.title})]}),r.jsx(D,{glass:!0,className:"border-primary-500/10",children:r.jsx(O,{className:"p-6",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-6",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-500/10 flex items-center justify-center text-primary-500",children:r.jsx(yt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider leading-none mb-1",children:"Posted By"}),r.jsx("p",{className:"font-bold text-sm capitalize",children:((n=s.creatorRole)==null?void 0:n.replace("_"," "))||"Community Admin"})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500/10 flex items-center justify-center text-emerald-500",children:r.jsx(kt,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider leading-none mb-1",children:"Date Published"}),r.jsx("p",{className:"font-bold text-sm",children:new Date(s._creationTime).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-orange-500/10 flex items-center justify-center text-orange-500",children:r.jsx(Io,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-wider leading-none mb-1",children:"Category"}),r.jsx("p",{className:"font-bold text-sm",children:"General Update"})]})]})]})})}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"prose prose-lg dark:prose-invert max-w-none",children:r.jsx("p",{className:"text-light-text dark:text-dark-text text-xl md:text-2xl leading-relaxed font-medium",children:s.description})}),r.jsx("div",{className:"pt-12 flex items-center justify-center",children:r.jsx(M,{variant:"primary",size:"lg",onClick:()=>t("/feed"),className:"px-12 rounded-2xl shadow-xl shadow-primary-500/20",children:"Return to Feed"})})]})]})]})}):r.jsxs("div",{className:"container mx-auto px-4 py-32 text-center",children:[r.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Announcement not found"}),r.jsx(M,{onClick:()=>t("/feed"),children:"Back to Feed"})]})}function uO(){const{user:e,isLoading:t}=Z(),s=de(),n=U(S.governance.getMeetings),a=U(S.finance.getTransactions,{limit:5}),i=U(S.finance.getMyContributions,e?{userId:e._id,year:new Date().getFullYear()}:"skip"),o=U(S.governance.getUserAttendance,e?{userId:e._id}:"skip"),l=U(S.finance.getCurrentBalance);if(t||n===void 0||a===void 0||i===void 0||o===void 0)return r.jsxs("div",{className:"space-y-8 p-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-8",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("div",{className:"h-4 w-48 bg-light-muted/10 animate-pulse rounded"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(x=>r.jsx(Ft,{},x))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx(Oe,{}),r.jsx(Oe,{}),r.jsx(Oe,{})]})]});if(!e)return r.jsx(Ee,{to:"/login",replace:!0});if(e.role!=="board_member"&&e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Ee,{to:"/feed",replace:!0});const d=o!=null&&o.length?Math.round(o.filter(x=>x.status==="present"||x.status==="late"||x.status==="excused").length/o.length*100):100,c=(i==null?void 0:i.reduce((x,g)=>x+g.totalPaid,0))||0,u=i&&i.length>0?i[0]:null,m=x=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(x),h=[{label:"Attendance Rate",value:`${d}%`,icon:kt,color:"text-primary-500",bg:"bg-primary-500/10",path:"/board/attendance"},{label:"Community Balance",value:m(l||0),icon:We,color:"text-amber-500",bg:"bg-amber-500/10",path:"/board/finance"},{label:"Yearly Contributions",value:m(c),icon:_r,color:"text-emerald-500",bg:"bg-emerald-500/10",path:"/board/contributions"},{label:"Current Status",value:u?u.status.charAt(0).toUpperCase()+u.status.slice(1):"Cleared",icon:et,color:(u==null?void 0:u.status)==="owing"?"text-rose-500":"text-emerald-500",bg:(u==null?void 0:u.status)==="owing"?"bg-rose-500/10":"bg-emerald-500/10",path:"/board/contributions"}];return r.jsxs("div",{className:"space-y-8 pb-20",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Board Hub Dashboard"})]}),r.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:["Shalom, ",e.name.split(" ")[0]]}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Centralized overview of governance, finance, and your contributions."})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:h.map((x,g)=>r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},children:r.jsx(D,{className:"cursor-pointer hover:border-primary-500/30 transition-all group",onClick:()=>s(x.path),children:r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:`p-3 rounded-2xl ${x.bg} ${x.color}`,children:r.jsx(x.icon,{className:"w-6 h-6"})}),r.jsx("div",{className:`text-xl font-black ${x.color}`,children:x.value})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted",children:x.label})]})})},x.label))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs(D,{className:"lg:col-span-1",children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ke,{className:"w-5 h-5 text-primary-500"}),"Meeting Records"]}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:()=>s("/board/attendance"),children:r.jsx(_t,{className:"w-4 h-4"})})]})}),r.jsxs(O,{className:"space-y-4",children:[n&&n.slice(0,4).map(x=>r.jsxs("div",{className:"p-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg/30 dark:bg-dark-bg/30",children:[r.jsx("p",{className:"font-bold text-sm truncate",children:x.title}),r.jsxs("div",{className:"flex items-center justify-between mt-1",children:[r.jsx("span",{className:"text-[10px] text-light-muted font-medium",children:new Date(x.date).toLocaleDateString()}),r.jsx(G,{className:`${x.status==="active"?"bg-emerald-500 animate-pulse":x.status==="ended"?"bg-light-muted/20 text-light-muted":"bg-primary-500/50"}`,children:x.status})]})]},x._id)),(!n||n.length===0)&&r.jsx("div",{className:"text-center py-6 text-xs text-light-muted italic",children:"No meeting records yet"})]})]}),r.jsxs(D,{className:"lg:col-span-1 border-emerald-500/20",children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fx,{className:"w-5 h-5 text-emerald-500"}),"Financial History"]}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 px-2 text-emerald-500 hover:text-emerald-600",onClick:()=>s("/board/finance"),children:r.jsx(_t,{className:"w-4 h-4"})})]})}),r.jsx(O,{className:"space-y-4",children:a&&a.map(x=>r.jsxs("div",{className:"p-3 rounded-xl border border-emerald-500/10 bg-emerald-500/5",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("p",{className:"text-xs font-bold truncate max-w-[120px]",children:x.description}),r.jsxs("p",{className:`text-xs font-black ${x.type==="deposit"?"text-emerald-500":"text-rose-500"}`,children:[x.type==="deposit"?"+":"-",m(x.amount)]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-[9px] text-light-muted",children:new Date(x.createdAt).toLocaleDateString()}),r.jsx("span",{className:"text-[9px] text-light-muted uppercase font-black",children:x.memberName||"System"})]})]},x._id))})]}),r.jsxs(D,{className:"lg:col-span-1 border-primary-500/20",children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ea,{className:"w-5 h-5 text-primary-500"}),"My Stake"]}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-8 px-2",onClick:()=>s("/board/contributions"),children:r.jsx(_t,{className:"w-4 h-4"})})]})}),r.jsxs(O,{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[r.jsxs("div",{className:"p-3 rounded-xl bg-primary-500/5 text-center border border-primary-500/10",children:[r.jsx("p",{className:"text-[9px] font-black text-light-muted uppercase",children:"Paid this Year"}),r.jsx("p",{className:"text-sm font-black text-primary-500",children:m(c)})]}),r.jsxs("div",{className:"p-3 rounded-xl bg-primary-500/5 text-center border border-primary-500/10",children:[r.jsx("p",{className:"text-[9px] font-black text-light-muted uppercase",children:"Monthly Due"}),r.jsx("p",{className:"text-sm font-black text-primary-500",children:"1,000"})]})]}),r.jsx("div",{className:"space-y-2",children:i&&i.slice(0,3).map((x,g)=>r.jsxs("div",{className:"flex items-center justify-between p-2.5 rounded-lg bg-light-bg/50 dark:bg-dark-bg/50 text-xs",children:[r.jsx("span",{className:"font-bold",children:new Date(2024,x.month-1).toLocaleDateString("en-US",{month:"short"})}),r.jsx("span",{className:"font-medium",children:m(x.totalPaid)}),r.jsx(G,{className:x.status==="cleared"?"bg-emerald-500":"bg-rose-500",children:x.status})]},g))})]})]})]})]})}function mO(){const{user:e,isLoading:t}=Z(),[s,n]=f.useState("all"),a=U(S.boardTasks.getTasks,e&&(e.role==="board_member"||e.role==="admin"||e.role==="super_admin")?{userId:e._id}:"skip"),i=V(S.boardTasks.updateTaskStatus);if(t)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl",children:[r.jsx(Xt,{}),r.jsx(zN,{}),r.jsx(aa,{count:4})]})});if(!e)return r.jsx(Ee,{to:"/login",replace:!0});if(e.role!=="board_member"&&e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Ee,{to:"/feed",replace:!0});const[o,l]=f.useState("my_tasks"),d=(a==null?void 0:a.filter(u=>o==="my_tasks"&&u.assignedTo!==e._id?!1:s==="all"?!0:u.status===s))||[],c=async(u,m)=>{if(e)try{await i({userId:e._id,taskId:u,status:m})}catch(h){console.error("Failed to update task status:",h)}};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Service & Operations"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Mission Control"})]}),r.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 justify-between items-start lg:items-center mb-10",children:[r.jsx("div",{className:"flex bg-light-card/50 dark:bg-dark-card/50 p-1.5 rounded-2xl border border-light-border dark:border-dark-border overflow-x-auto no-scrollbar max-w-full",children:[{key:"all",label:"All Directives",count:(a==null?void 0:a.length)||0},{key:"todo",label:"Pending",count:(a==null?void 0:a.filter(u=>u.status==="todo").length)||0},{key:"in_progress",label:"Active",count:(a==null?void 0:a.filter(u=>u.status==="in_progress").length)||0},{key:"completed",label:"Fulfilled",count:(a==null?void 0:a.filter(u=>u.status==="completed").length)||0}].map(u=>r.jsxs("button",{onClick:()=>n(u.key),className:`px-6 py-2.5 rounded-xl font-black uppercase tracking-widest text-[10px] transition-all whitespace-nowrap ${s===u.key?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:[u.label," ",r.jsx("span",{className:`ml-1 opacity-60 ${s===u.key?"text-white":""}`,children:u.count})]},u.key))}),r.jsxs("div",{className:"flex bg-light-bg dark:bg-dark-bg p-1 rounded-xl border border-light-border dark:border-dark-border self-end lg:self-auto",children:[r.jsx("button",{onClick:()=>l("my_tasks"),className:`px-4 py-2 rounded-lg text-xs font-black uppercase tracking-tighter transition-all ${o==="my_tasks"?"bg-primary-500 text-white shadow-sm":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Personal"}),r.jsx("button",{onClick:()=>l("all_tasks"),className:`px-4 py-2 rounded-lg text-xs font-black uppercase tracking-tighter transition-all ${o==="all_tasks"?"bg-primary-500 text-white shadow-sm":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Collective"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-20",children:r.jsx(re,{mode:"popLayout",children:d.length===0?r.jsx("div",{className:"col-span-full",children:r.jsx(D,{glass:!0,className:"border-dashed border-light-border dark:border-dark-border",children:r.jsxs(O,{className:"p-20 text-center",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-light-muted/5 dark:bg-dark-muted/5 flex items-center justify-center mx-auto mb-4 border border-light-border/20",children:r.jsx(ve,{className:"w-8 h-8 text-light-muted opacity-30"})}),r.jsx("p",{className:"text-sm font-bold text-light-muted dark:text-dark-muted tracking-widest uppercase",children:"No directivies in this sector"})]})})}):d.map(u=>{var m;return r.jsx(T.div,{layout:!0,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"h-full",children:r.jsxs(D,{glass:!0,className:`h-full border-primary-500/10 hover:border-primary-500/40 transition-all duration-300 relative group overflow-hidden ${u.status==="completed"?"opacity-70 grayscale-[0.5]":""}`,children:[r.jsx("div",{className:`absolute top-0 right-0 w-32 h-32 opacity-[0.03] pointer-events-none rounded-bl-full ${u.priority==="urgent"?"bg-rose-500":"bg-primary-500"}`}),r.jsxs(O,{className:"p-6 flex flex-col h-full",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2.5 rounded-xl border ${u.status==="completed"?"bg-emerald-500/10 border-emerald-500/20 text-emerald-500":u.status==="in_progress"?"bg-amber-500/10 border-amber-500/20 text-amber-500":"bg-primary-500/10 border-primary-500/20 text-primary-500"}`,children:u.status==="completed"?r.jsx(et,{className:"w-5 h-5"}):u.status==="in_progress"?r.jsx(Ze,{className:"w-5 h-5"}):r.jsx(Ed,{className:"w-5 h-5"})}),r.jsxs("div",{children:[r.jsxs(G,{variant:"outline",className:`text-[8px] font-black uppercase h-5 mb-1 ${u.priority==="urgent"?"text-rose-500 border-rose-500":u.priority==="high"?"text-amber-500 border-amber-500":"text-primary-500 border-primary-500"}`,children:[u.priority," Priority"]}),r.jsx("h3",{className:"text-lg font-black text-light-text dark:text-dark-text leading-tight tracking-tight",children:u.title})]})]})}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-6 leading-relaxed flex-grow",children:u.description}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-light-border/30 dark:border-dark-border/30",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-light-muted/10 flex items-center justify-center border border-light-border/20",children:r.jsx(yt,{className:"w-4 h-4 text-light-muted"})}),r.jsxs("div",{className:"text-[10px] font-bold uppercase tracking-tighter",children:[r.jsx("p",{className:"text-light-muted/60 leading-none mb-0.5",children:"Assigned To"}),r.jsx("p",{className:"text-light-text dark:text-dark-text",children:((m=u.assignee)==null?void 0:m.name)||"Unassigned"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-light-muted/10 flex items-center justify-center border border-light-border/20",children:r.jsx(kt,{className:"w-4 h-4 text-light-muted"})}),r.jsxs("div",{className:"text-[10px] font-bold uppercase tracking-tighter",children:[r.jsx("p",{className:"text-light-muted/60 leading-none mb-0.5",children:"Deadline"}),r.jsx("p",{className:`${u.dueDate&&u.dueDate<Date.now()&&u.status!=="completed"?"text-rose-500 font-bold":"text-light-text dark:text-dark-text"}`,children:u.dueDate?new Date(u.dueDate).toLocaleDateString():"OPEN"})]})]})]}),u.assignedTo===e._id&&u.status!=="completed"&&r.jsxs("div",{className:"flex gap-2 w-full",children:[u.status==="todo"&&r.jsxs(M,{className:"flex-1 rounded-xl bg-primary-500 hover:bg-primary-600 text-white font-black text-[10px] uppercase tracking-widest h-10 shadow-lg shadow-primary-500/20",onClick:()=>c(u._id,"in_progress"),children:["Initiate Task ",r.jsx(_t,{className:"w-4 h-4 ml-2"})]}),u.status==="in_progress"&&r.jsxs(M,{className:"flex-1 rounded-xl bg-emerald-500 hover:bg-emerald-600 text-white font-black text-[10px] uppercase tracking-widest h-10 shadow-lg shadow-emerald-500/20",onClick:()=>c(u._id,"completed"),children:["Verify Completion ",r.jsx(et,{className:"w-4 h-4 ml-2"})]})]})]})]})]})},u._id)})})})]})}function hO(){var v;const{user:e,isLoading:t}=Z(),[s,n]=f.useState(null),[a,i]=f.useState(void 0),o=U(S.training.getModules,{category:a}),l=U(S.training.getProgress,e?{userId:e._id}:"skip"),d=U(S.training.getTrainingStats,e?{userId:e._id}:"skip"),c=V(S.training.startModule),u=V(S.training.completeModule);if(t)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-7xl",children:[r.jsx(Xt,{}),r.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-8",children:[r.jsx(Ft,{}),r.jsx(Ft,{}),r.jsx(Ft,{}),r.jsx(Ft,{})]})]})});if(!e)return r.jsx(Ee,{to:"/login",replace:!0});if(e.role!=="board_member"&&e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Ee,{to:"/feed",replace:!0});const m=y=>l==null?void 0:l.find(p=>{var b;return((b=p.module)==null?void 0:b._id)===y}),h=async y=>{try{await c({userId:e._id,moduleId:y})}catch(p){console.error("Failed to start module:",p)}},x=async y=>{try{await u({userId:e._id,moduleId:y}),n(null)}catch(p){console.error("Failed to complete module:",p)}},g=["Leadership","Ministry Skills","Spiritual Growth","Technical Skills","Team Building"];return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-secondary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-secondary-500",children:"Wisdom Hub"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Training Center"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Elevating your capacity for leadership and service."})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-emerald-500/10 hover:border-emerald-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-emerald-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-emerald-500/10 text-emerald-500",children:r.jsx(et,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-right text-3xl font-black font-display text-emerald-500",children:(d==null?void 0:d.completed)||0})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Fulfilled"}),r.jsx("p",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-tighter",children:"Modules Mastered"})]})]}),r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-amber-500/10 hover:border-amber-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-amber-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-amber-500/10 text-amber-500",children:r.jsx(Ze,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-right text-3xl font-black font-display text-amber-500",children:(d==null?void 0:d.inProgress)||0})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"In Transit"}),r.jsx("p",{className:"text-[10px] font-bold text-amber-500 uppercase tracking-tighter",children:"Currently Active"})]})]}),r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-primary-500/10 hover:border-primary-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-primary-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-primary-500/10 text-primary-500",children:r.jsx(da,{className:"w-6 h-6"})}),r.jsx("div",{className:"text-right text-3xl font-black font-display text-primary-500",children:(d==null?void 0:d.totalModules)||0})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Wisdom Repository"}),r.jsx("p",{className:"text-[10px] font-bold text-primary-500 uppercase tracking-tighter",children:"Total Curated content"})]})]}),r.jsxs(D,{glass:!0,className:"relative overflow-hidden group border-secondary-500/10 hover:border-secondary-500/30 transition-all duration-500",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-secondary-500/5 rounded-bl-full -mr-8 -mt-8 group-hover:scale-110 transition-transform"}),r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-secondary-500/10 text-secondary-500",children:r.jsx(Ln,{className:"w-6 h-6"})}),r.jsxs("div",{className:"text-right text-3xl font-black font-display text-secondary-500",children:[(d==null?void 0:d.completionPercentage)||0,"%"]})]}),r.jsx("h3",{className:"text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Proficiency"}),r.jsx("div",{className:"h-1.5 w-full bg-light-muted/10 dark:bg-dark-muted/10 rounded-full overflow-hidden mt-2",children:r.jsx("div",{className:"h-full bg-secondary-500 transition-all duration-1000",style:{width:`${(d==null?void 0:d.completionPercentage)||0}%`}})})]})]})]}),r.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:r.jsxs("div",{className:"flex bg-light-card/50 dark:bg-dark-card/50 p-1.5 rounded-2xl border border-light-border dark:border-dark-border overflow-x-auto no-scrollbar max-w-full",children:[r.jsx("button",{onClick:()=>i(void 0),className:`px-6 py-2.5 rounded-xl font-black uppercase tracking-widest text-[10px] transition-all whitespace-nowrap ${a===void 0?"bg-primary-500 text-white shadow-lg shadow-primary-500/30":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"All Sectors"}),g.map(y=>r.jsx("button",{onClick:()=>i(y),className:`px-6 py-2.5 rounded-xl font-black uppercase tracking-widest text-[10px] transition-all whitespace-nowrap ${a===y?"bg-secondary-500 text-white shadow-lg shadow-secondary-500/30":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:y},y))]})}),r.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:o==null?void 0:o.map(y=>{const p=m(y._id);return r.jsx(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},whileHover:{y:-8},className:"h-full",children:r.jsx(D,{glass:!0,className:`h-full border-secondary-500/10 hover:border-secondary-500/40 transition-all duration-300 relative group overflow-hidden ${(p==null?void 0:p.status)==="completed"?"opacity-80":""}`,children:r.jsxs(O,{className:"p-8 flex flex-col h-full",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx(G,{variant:"outline",className:"text-[8px] font-black uppercase h-5 text-secondary-500 border-secondary-500/30",children:y.category}),p&&r.jsx(G,{className:`text-[8px] font-black uppercase h-5 ${p.status==="completed"?"bg-emerald-500":"bg-primary-500"}`,children:p.status==="completed"?"Fulfilled":"In Transit"})]}),r.jsx("h3",{className:"font-black text-xl text-light-text dark:text-dark-text mb-3 leading-tight tracking-tight group-hover:text-secondary-500 transition-colors",children:y.title}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-8 line-clamp-3 leading-relaxed flex-grow",children:y.description}),r.jsxs("div",{className:"flex items-center gap-6 mb-8 text-[10px] font-black uppercase tracking-widest text-light-muted/60",children:[y.videoUrl&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx($C,{className:"w-3.5 h-3.5 text-secondary-500"}),"Video"]}),y.documentUrl&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"w-3.5 h-3.5 text-secondary-500"}),"Text"]}),y.duration&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ze,{className:"w-3.5 h-3.5 text-secondary-500"}),y.duration," MIN"]})]}),r.jsx(M,{variant:(p==null?void 0:p.status)==="completed"?"ghost":"secondary",className:`w-full rounded-2xl h-12 font-black text-[10px] uppercase tracking-[0.2em] transition-all duration-300 ${(p==null?void 0:p.status)==="completed"?"border-2 border-secondary-500/20 hover:bg-secondary-500 hover:text-white":"shadow-xl shadow-secondary-500/20"}`,onClick:()=>{n(y),p||h(y._id)},children:(p==null?void 0:p.status)==="completed"?"Review Directive":p?"Resume Mission":"Commence Training"})]})})},y._id)})}),s&&r.jsx(ht,{isOpen:!!s,onClose:()=>n(null),title:s.title,children:r.jsxs("div",{className:"space-y-4",children:[r.jsx(G,{variant:"secondary",children:s.category}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:s.description}),s.videoUrl&&r.jsx("div",{className:"aspect-video rounded-lg overflow-hidden bg-black",children:r.jsx("iframe",{width:"100%",height:"100%",src:s.videoUrl,title:s.title,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),s.content&&r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.jsx("div",{dangerouslySetInnerHTML:{__html:s.content}})}),s.documentUrl&&r.jsxs("a",{href:s.documentUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-primary-500 hover:text-primary-600",children:[r.jsx(Yt,{className:"w-4 h-4"}),"Download Course Material"]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx(M,{variant:"ghost",onClick:()=>n(null),children:"Close"}),((v=m(s._id))==null?void 0:v.status)!=="completed"&&r.jsx(M,{variant:"primary",onClick:()=>x(s._id),children:"Mark as Complete"})]})]})})]})}function xO({isOpen:e,onClose:t,userId:s}){const[n,a]=f.useState(""),[i,o]=f.useState(""),[l,d]=f.useState(""),[c,u]=f.useState("60"),[m,h]=f.useState(!1),x=V(S.governance.createMeeting),{showToast:g}=yn(),v=async y=>{y.preventDefault(),h(!0);try{await x({adminId:s,title:n,date:new Date(i).getTime(),startTime:l,durationMinutes:parseInt(c)}),a(""),o(""),d(""),u("60"),t(),g("success",`Meeting "${n}" created successfully!`)}catch(p){console.error("Failed to create meeting:",p),g("error","Failed to create meeting. Please try again.")}finally{h(!1)}};return r.jsx(ht,{isOpen:e,onClose:t,title:"Create Board Meeting",children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(Yt,{className:"w-4 h-4"}),"Meeting Title"]}),r.jsx(me,{value:n,onChange:y=>a(y.target.value),placeholder:"e.g., Monthly Board Meeting",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(kt,{className:"w-4 h-4"}),"Date"]}),r.jsx(me,{type:"date",value:i,onChange:y=>o(y.target.value),required:!0,className:"w-full"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(Ze,{className:"w-4 h-4"}),"Start Time"]}),r.jsx(me,{type:"time",value:l,onChange:y=>d(y.target.value),required:!0,className:"w-full"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Duration (minutes)"}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:[30,60,90,120].map(y=>r.jsxs("button",{type:"button",onClick:()=>u(y.toString()),className:`px-4 py-2 rounded-lg border-2 transition-all ${c===y.toString()?"border-primary-500 bg-primary-500/10 text-primary-500":"border-light-border dark:border-dark-border hover:border-primary-500/50"}`,children:[y,"m"]},y))}),r.jsx(me,{type:"number",value:c,onChange:y=>u(y.target.value),placeholder:"Custom duration",min:"15",max:"480",className:"mt-2"})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,className:"flex-1",disabled:m,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:m,children:m?"Creating...":"Create Meeting"})]})]})})}function pO({isOpen:e,onClose:t,userId:s}){const[n,a]=f.useState(""),[i,o]=f.useState(!1),l=V(S.governance.clockIn),{showToast:d}=yn(),c=async u=>{u.preventDefault(),o(!0);try{await l({userId:s,code:n}),a(""),t(),d("success"," Successfully clocked in to the meeting!")}catch(m){console.error("Failed to clock in:",m),d("error",m.message||"Failed to clock in. Please check the code and try again.")}finally{o(!1)}};return r.jsx(ht,{isOpen:e,onClose:t,title:"Clock In to Meeting",children:r.jsxs("form",{onSubmit:c,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Meeting Code"}),r.jsx(me,{value:n,onChange:u=>a(u.target.value.toUpperCase()),placeholder:"Enter 6-digit code",maxLength:6,className:"text-center text-2xl font-mono tracking-widest",required:!0}),r.jsx("p",{className:"text-xs text-light-muted mt-2",children:"Enter the 6-digit code provided by the admin"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,className:"flex-1",disabled:i,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:i||n.length!==6,children:i?"Clocking In...":"Clock In"})]})]})})}function fO({isOpen:e,onClose:t,userId:s}){const[n,a]=f.useState(""),[i,o]=f.useState(""),[l,d]=f.useState(""),[c,u]=f.useState(!1),m=U(S.governance.getMeetings),h=V(S.governance.submitExcuse),{showToast:x}=yn(),g=(m==null?void 0:m.map(y=>({value:y._id,label:`${y.title} - ${new Date(y.date).toLocaleDateString()}`})))||[],v=async y=>{y.preventDefault(),u(!0);try{await h({userId:s,meetingId:n,reason:i,proofUrl:l||void 0}),a(""),o(""),d(""),t(),x("success","Excuse submitted successfully! Awaiting admin review.")}catch(p){console.error("Failed to submit excuse:",p),x("error","Failed to submit excuse. Please try again.")}finally{u(!1)}};return r.jsx(ht,{isOpen:e,onClose:t,title:"Submit Excuse",children:r.jsxs("form",{onSubmit:v,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Select Meeting"}),r.jsx(Hr,{options:g,value:n,onChange:a,placeholder:"Choose a meeting..."})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Reason for Absence"}),r.jsx("textarea",{value:i,onChange:y=>o(y.target.value),placeholder:"Please explain why you couldn't attend...",className:"w-full px-4 py-2 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg min-h-[100px]",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Proof URL (Optional)"}),r.jsx(me,{type:"url",value:l,onChange:y=>d(y.target.value),placeholder:"https://example.com/proof.jpg"}),r.jsx("p",{className:"text-xs text-light-muted mt-2",children:"Upload proof to ImageKit or another service and paste the URL here"})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx(M,{type:"button",variant:"ghost",onClick:t,className:"flex-1",disabled:c,children:"Cancel"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-1",disabled:c,children:c?"Submitting...":"Submit Excuse"})]})]})})}function gO({isOpen:e,onClose:t,meeting:s}){const[n,a]=f.useState(!0),i=U(S.governance.getMeetingAttendance,s?{meetingId:s._id}:"skip"),o=m=>{switch(m){case"present":return r.jsx(G,{className:"bg-emerald-500 text-white",children:"Present"});case"late":return r.jsx(G,{className:"bg-amber-500 text-white",children:"Late"});case"absent":return r.jsx(G,{className:"bg-rose-500 text-white",children:"Absent"});case"excused":return r.jsx(G,{className:"bg-blue-500 text-white",children:"Excused"});default:return r.jsx(G,{variant:"outline",children:"Unknown"})}},l=m=>{switch(m){case"present":return r.jsx(Kt,{className:"w-5 h-5 text-emerald-500"});case"late":return r.jsx(Ze,{className:"w-5 h-5 text-amber-500"});case"absent":return r.jsx(ps,{className:"w-5 h-5 text-rose-500"});case"excused":return r.jsx(Kt,{className:"w-5 h-5 text-blue-500"});default:return r.jsx(ps,{className:"w-5 h-5 text-light-muted"})}},d={present:(i==null?void 0:i.filter(m=>m.status==="present").length)||0,late:(i==null?void 0:i.filter(m=>m.status==="late").length)||0,absent:(i==null?void 0:i.filter(m=>m.status==="absent").length)||0,excused:(i==null?void 0:i.filter(m=>m.status==="excused").length)||0},c=(i==null?void 0:i.length)||0,u=i===void 0;return r.jsx(ht,{isOpen:e,onClose:t,title:"Meeting Attendance",className:"max-w-2xl",children:s&&r.jsxs("div",{className:"space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"p-3 md:p-4 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",children:[r.jsx("h3",{className:"font-bold text-base md:text-lg mb-2",children:s.title}),r.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-4 text-xs md:text-sm text-light-muted",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(kt,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsx("span",{className:"text-xs md:text-sm",children:new Date(s.date).toLocaleDateString()})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsx("span",{className:"text-xs md:text-sm",children:s.startTime})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ke,{className:"w-3 h-3 md:w-4 md:h-4"}),r.jsxs("span",{className:"text-xs md:text-sm",children:[c," Total"]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between px-1",children:[r.jsx("h4",{className:"text-xs font-black uppercase tracking-widest text-light-muted",children:"Attendance Summary"}),r.jsx(M,{variant:"ghost",size:"sm",className:"h-7 text-[10px] font-bold gap-1",onClick:()=>a(!n),children:n?r.jsxs(r.Fragment,{children:[r.jsx(zn,{className:"w-3 h-3"})," Hide Stats"]}):r.jsxs(r.Fragment,{children:[r.jsx(Ke,{className:"w-3 h-3"})," Show Stats"]})})]}),r.jsx(re,{children:n&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-3",children:[r.jsx(D,{className:"border-emerald-500/20 bg-emerald-500/5",children:r.jsxs(O,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-emerald-500",children:d.present}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Present"})]})}),r.jsx(D,{className:"border-amber-500/20 bg-amber-500/5",children:r.jsxs(O,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-amber-500",children:d.late}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Late"})]})}),r.jsx(D,{className:"border-rose-500/20 bg-rose-500/5",children:r.jsxs(O,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-rose-500",children:d.absent}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Absent"})]})}),r.jsx(D,{className:"border-blue-500/20 bg-blue-500/5",children:r.jsxs(O,{className:"p-3 md:p-4 text-center",children:[r.jsx("div",{className:"text-xl md:text-2xl font-black text-blue-500",children:d.excused}),r.jsx("div",{className:"text-[9px] md:text-xs font-bold text-light-muted uppercase tracking-tighter",children:"Excused"})]})})]})})}),r.jsxs("div",{className:"border-t border-light-border dark:border-dark-border pt-4",children:[r.jsxs("h4",{className:"font-bold text-sm md:text-base mb-3 flex items-center gap-2",children:[r.jsx(ke,{className:"w-4 h-4 text-primary-500"}),"Board Member Roster"]}),r.jsx("div",{className:"space-y-2 max-h-[40vh] md:max-h-96 overflow-y-auto pr-2 thin-scrollbar",children:u?[1,2,3,4].map(m=>r.jsx("div",{className:"h-16 w-full bg-light-muted/10 animate-pulse rounded-xl border border-light-border/50 dark:border-dark-border/50"},m)):i&&i.length>0?i.map(m=>r.jsxs("div",{className:"flex items-center justify-between p-2 md:p-3 rounded-lg border border-light-border dark:border-dark-border hover:border-primary-500/30 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[l(m.status),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-bold text-sm md:text-base truncate",children:m.userName}),m.joinTime&&r.jsxs("p",{className:"text-[10px] md:text-xs text-light-muted",children:["Clocked in at ",new Date(m.joinTime).toLocaleTimeString()]})]})]}),r.jsx("div",{className:"flex-shrink-0",children:o(m.status)})]},m._id)):r.jsxs("div",{className:"text-center py-8 text-light-muted",children:[r.jsx(ke,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),r.jsx("p",{className:"text-sm",children:"No attendance records yet"})]})})]})]})})}function bO({isOpen:e,onClose:t,meeting:s,userId:n}){const[a,i]=f.useState(!1),o=V(S.governance.endMeeting),{showToast:l}=yn(),d=async()=>{i(!0);try{await o({adminId:n,meetingId:s._id}),t(),l("success","Meeting ended successfully! Attendance has been processed.")}catch(c){console.error("Failed to end meeting:",c),l("error",c.message||"Failed to end meeting. Please try again.")}finally{i(!1)}};return s?r.jsx(ht,{isOpen:e,onClose:t,title:"End Meeting",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center text-center p-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-rose-500/10 to-rose-500/5 border border-rose-500/20 flex items-center justify-center mb-4 shadow-xl",children:r.jsx(Rw,{className:"w-10 h-10 text-rose-500"})}),r.jsx("h3",{className:"text-xl font-bold text-light-text dark:text-dark-text mb-2",children:"End This Meeting?"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs",children:['Are you sure you want to end "',s.title,'"?']})]}),r.jsxs("div",{className:"flex items-start gap-4 p-4 rounded-2xl bg-amber-500/5 border border-amber-500/20",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/10 flex items-center justify-center shrink-0",children:r.jsx(ln,{className:"w-6 h-6 text-amber-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-amber-700 dark:text-amber-500 mb-1",children:"What Happens Next"}),r.jsxs("ul",{className:"text-xs text-amber-700/70 dark:text-amber-500/70 space-y-1",children:[r.jsx("li",{children:" Meeting will be marked as ended"}),r.jsx("li",{children:" Attendance will be automatically processed"}),r.jsx("li",{children:" Members who didn't clock in will be marked absent"}),r.jsx("li",{children:" Notifications will be sent to all board members"})]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-xl bg-light-bg dark:bg-dark-bg",children:[r.jsx(ke,{className:"w-4 h-4 text-light-muted"}),r.jsxs("p",{className:"text-xs text-light-muted",children:["Started: ",new Date(s.date).toLocaleDateString()," at ",s.startTime]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(M,{variant:"ghost",className:"w-full rounded-2xl h-12",onClick:t,disabled:a,children:"Cancel"}),r.jsx(M,{variant:"danger",className:"w-full rounded-2xl h-12 shadow-lg shadow-rose-500/20",onClick:d,disabled:a,children:a?"Ending...":"Yes, End Meeting"})]})]})}):null}function YN({user:e}){const[t,s]=f.useState(!1),[n,a]=f.useState(!1),[i,o]=f.useState(!1),[l,d]=f.useState(!1),[c,u]=f.useState(!1),[m,h]=f.useState(null),x=U(S.governance.getMeetings),g=U(S.governance.getActiveMeeting),v=U(S.governance.getPendingExcuses),y=U(S.governance.getUserAttendance,e?{userId:e._id}:"skip"),p=V(S.governance.reviewExcuse);if(x===void 0||y===void 0)return r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(j=>r.jsx(Ft,{},j))}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(j=>r.jsx(Oe,{},j))})]});const w=(e==null?void 0:e.role)==="super_admin"||(e==null?void 0:e.role)==="admin",k=j=>{switch(j){case"present":return r.jsx(G,{className:"bg-emerald-500 text-white",children:"Present"});case"late":return r.jsx(G,{className:"bg-amber-500 text-white",children:"Late"});case"absent":return r.jsx(G,{className:"bg-rose-500 text-white",children:"Absent"});case"excused":return r.jsx(G,{className:"bg-blue-500 text-white",children:"Excused"});default:return r.jsx(G,{variant:"outline",children:"Unknown"})}};return r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6",children:[r.jsx(D,{className:"border-primary-500/20",children:r.jsxs(O,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-primary-500/10 text-primary-500",children:r.jsx(kt,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-primary-500",children:(x==null?void 0:x.length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Total Meetings"})]})}),r.jsx(D,{className:"border-emerald-500/20",children:r.jsxs(O,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-emerald-500/10 text-emerald-500",children:r.jsx(Kt,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-emerald-500",children:(y==null?void 0:y.filter(j=>j.status==="present").length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Present"})]})}),r.jsx(D,{className:"border-amber-500/20",children:r.jsxs(O,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-amber-500/10 text-amber-500",children:r.jsx(Ze,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-amber-500",children:(y==null?void 0:y.filter(j=>j.status==="late").length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Late"})]})}),r.jsx(D,{className:"border-rose-500/20",children:r.jsxs(O,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-rose-500/10 text-rose-500",children:r.jsx(ps,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-2xl md:text-3xl font-black text-rose-500",children:(y==null?void 0:y.filter(j=>j.status==="absent").length)||0})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Absent"})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[g&&r.jsx(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:r.jsxs(D,{className:"border-primary-500 bg-primary-500/5 relative overflow-hidden group",children:[r.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 group-hover:scale-110 transition-transform",children:r.jsx(Ld,{className:"w-32 h-32 text-primary-500"})}),r.jsxs(fe,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(G,{className:"bg-primary-500 text-white animate-pulse",children:"Meeting In Progress"}),r.jsxs("div",{className:"flex items-center gap-2 text-xs font-bold text-primary-500",children:[r.jsx(Ze,{className:"w-4 h-4"}),r.jsxs("span",{children:["Started ",ot(g.createdAt)," ago"]})]})]}),r.jsx(ge,{className:"text-2xl font-black",children:g.title})]}),r.jsxs(O,{className:"space-y-4 md:space-y-6",children:[r.jsxs("div",{className:"p-3 md:p-4 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"text-[10px] md:text-xs font-bold text-light-muted uppercase tracking-wider",children:"Attendance Code"}),w&&r.jsxs(M,{variant:"ghost",size:"sm",className:"h-6 gap-1 text-[10px] px-2",onClick:()=>{navigator.clipboard.writeText(g.code)},children:[r.jsx(ah,{className:"w-3 h-3"}),"Copy"]})]}),r.jsx("div",{className:"text-2xl md:text-4xl font-black tracking-[0.3em] md:tracking-[0.5em] text-center text-primary-500 font-mono",children:w?g.code:""})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 md:gap-3",children:[!w&&r.jsx(r.Fragment,{children:y!=null&&y.some(j=>j.meetingId===g._id)?r.jsxs("div",{className:"flex-1 flex items-center justify-center gap-2 p-2.5 md:p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 font-bold text-xs md:text-sm",children:[r.jsx(Kt,{className:"w-4 h-4 md:w-5 md:h-5"}),"You are clocked in"]}):r.jsxs(M,{className:"flex-1 bg-primary-500 hover:bg-primary-600 text-white rounded-xl h-11 md:h-12 text-sm md:text-base font-bold shadow-lg shadow-primary-500/20",onClick:()=>a(!0),children:[r.jsx(Ld,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Clock In Now"]})}),w&&r.jsxs(M,{variant:"danger",className:"flex-1 rounded-xl h-11 md:h-12 text-sm md:text-base font-bold shadow-lg shadow-rose-500/20",onClick:()=>u(!0),children:[r.jsx(Rw,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"End Meeting"]}),r.jsxs(M,{variant:"outline",className:"flex-1 rounded-xl h-11 md:h-12 text-sm md:text-base font-bold border-2",onClick:()=>{h(g),d(!0)},children:[r.jsx(ke,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"View Attendees"]})]})]})]})}),!g&&w&&r.jsxs(D,{className:"border-dashed border-2 flex flex-col items-center justify-center p-8 text-center bg-light-bg/30 dark:bg-dark-bg/30",children:[r.jsx("div",{className:"p-4 rounded-full bg-primary-500/10 text-primary-500 mb-4",children:r.jsx(jc,{className:"w-10 h-10"})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"No Active Meeting"}),r.jsx("p",{className:"text-light-muted mb-6 max-w-xs",children:"Ready to start the next session? Setup a meeting and generate an attendance code."}),r.jsx(M,{className:"bg-primary-500 hover:bg-primary-600 text-white rounded-xl h-12 px-8 font-bold shadow-lg shadow-primary-500/20",onClick:()=>s(!0),children:"Create Meeting"})]}),!g&&!w&&r.jsx(D,{className:"p-8 bg-gradient-to-br from-primary-500/5 to-transparent border-primary-500/20",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"p-3 rounded-2xl bg-primary-500/10 text-primary-500",children:r.jsx(kt,{className:"w-8 h-8"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-lg",children:"Next Meeting"}),r.jsx("p",{className:"text-light-muted",children:"No meetings currently in progress. Stay tuned for announcements."})]})]})}),w&&v&&v.length>0&&r.jsxs(D,{className:"border-amber-500/50 bg-amber-500/5",children:[r.jsxs(fe,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[r.jsxs(ge,{className:"text-base font-bold flex items-center gap-2",children:[r.jsx(Tr,{className:"w-5 h-5 text-amber-500"}),"Pending Excuses"]}),r.jsx(G,{variant:"outline",className:"text-amber-500 border-amber-500",children:v.length})]}),r.jsx(O,{children:r.jsx("div",{className:"space-y-4",children:v.map(j=>r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/50 dark:bg-black/20 border border-amber-500/20",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-sm",children:j.userName}),r.jsx("p",{className:"text-xs text-light-muted",children:j.meetingTitle})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-rose-500 hover:bg-rose-500/10",onClick:()=>p({adminId:e._id,excuseId:j._id,approved:!1}),children:r.jsx(Ae,{className:"w-4 h-4"})}),r.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0 text-emerald-500 hover:bg-emerald-500/10",onClick:()=>p({adminId:e._id,excuseId:j._id,approved:!0}),children:r.jsx(nt,{className:"w-4 h-4"})})]})]},j._id))})})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("h2",{className:"text-xl md:text-2xl font-black flex items-center gap-2",children:[r.jsx(Yt,{className:"w-5 h-5 md:w-6 md:h-6 text-primary-500"}),"Meeting History"]})}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:x==null?void 0:x.map(j=>{const N=y==null?void 0:y.find(_=>_.meetingId===j._id);return r.jsxs(D,{className:"hover:border-primary-500/30 transition-all group",children:[r.jsxs(fe,{className:"pb-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(G,{variant:"outline",className:"text-[10px] font-bold",children:new Date(j.date).toLocaleDateString()}),N?k(N.status):j.status==="ended"?r.jsx(G,{className:"bg-rose-500 text-white",children:"Absent"}):r.jsx(G,{variant:"secondary",children:"Scheduled"})]}),r.jsx(ge,{className:"text-lg font-bold group-hover:text-primary-500 transition-colors",children:j.title})]}),r.jsxs(O,{children:[r.jsxs("div",{className:"flex items-center gap-4 text-xs text-light-muted mb-6",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3 h-3"}),j.startTime]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ke,{className:"w-3 h-3"}),j.durationMinutes," mins"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(M,{variant:"outline",className:"flex-1 text-[10px] h-9 rounded-lg font-bold",onClick:()=>{h(j),d(!0)},children:[r.jsx(Tt,{className:"w-3.5 h-3.5 mr-1.5"}),"Attendance"]}),!N&&j.status==="ended"&&r.jsx(M,{variant:"secondary",className:"flex-1 text-[10px] h-9 rounded-lg font-bold text-amber-500",onClick:()=>{h(j),o(!0)},children:"Submit Excuse"})]}),(N==null?void 0:N.joinTime)&&r.jsxs("p",{className:"text-[10px] md:text-xs text-light-muted mt-2",children:["Clocked in at ",new Date(N.joinTime).toLocaleTimeString()]})]})]},j._id)})})]}),r.jsx(xO,{isOpen:t,onClose:()=>s(!1),userId:e==null?void 0:e._id}),g&&r.jsx(pO,{isOpen:n,onClose:()=>a(!1),userId:e==null?void 0:e._id}),r.jsx(bO,{isOpen:c,onClose:()=>u(!1),meeting:g,userId:e==null?void 0:e._id}),r.jsx(fO,{isOpen:i,onClose:()=>o(!1),userId:e==null?void 0:e._id}),r.jsx(gO,{isOpen:l,onClose:()=>d(!1),meeting:m})]})}function yO({isOpen:e,onClose:t,userId:s}){const[n,a]=f.useState(1),[i,o]=f.useState("deposit"),[l,d]=f.useState(""),[c,u]=f.useState(""),[m,h]=f.useState(""),[x,g]=f.useState(""),[v,y]=f.useState(null),[p,b]=f.useState(""),[w,k]=f.useState(!1),[j,N]=f.useState(!1),_=V(S.files.generateUploadUrl),A=U(S.users.getAllUsers,{adminId:s}),L=V(S.finance.addTransaction),{showToast:C}=yn(),P=(A==null?void 0:A.filter(I=>I.role==="board_member"))||[],R=[{value:"",label:"Not linked to a member"},...P.length>0?[{value:"__board_header__",label:"--- Board Members (Monthly Dues) ---",disabled:!0},...P.map(I=>({value:I._id,label:I.name}))]:[],{value:"__other_header__",label:"--- Other Members ---",disabled:!0},{value:"__other__",label:"+ Add Other Person (Non-Board)"}],W=async I=>{var q;const F=(q=I.target.files)==null?void 0:q[0];if(F){if(!F.type.startsWith("image/")){C("error","Please upload an image file");return}if(F.size>5*1024*1024){C("error","File size must be less than 5MB");return}y(F)}},Y=async()=>{N(!0);try{let I=p;if(v){k(!0);try{const F=await _(),q=await fetch(F,{method:"POST",headers:{"Content-Type":v.type},body:v}),{storageId:ce}=await q.json();I=(await fetch(`${window.location.origin}/api/storage/${ce}`)).url}catch(F){console.error("Upload failed:",F),C("error","Failed to upload proof image"),k(!1),N(!1);return}finally{k(!1)}}await L({userId:s,type:i,amount:parseFloat(l),description:c,memberId:m&&m!=="__other__"?m:void 0,memberName:m==="__other__"?x:void 0,proofUrl:I||void 0}),a(1),o("deposit"),d(""),u(""),h(""),g(""),y(null),b(""),t(),C("success",`${i==="deposit"?"Deposit":"Withdrawal"} of ${parseFloat(l).toLocaleString()} added successfully!`)}catch(I){console.error("Failed to add transaction:",I),C("error","Failed to add transaction. Please try again.")}finally{N(!1)}},se=()=>{a(1),o("deposit"),d(""),u(""),h(""),b(""),t()},Q=i!==null,pe=l&&parseFloat(l)>0,$=c.trim().length>0;return r.jsx(ht,{isOpen:e,onClose:se,title:"Add Financial Transaction",children:r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-6",children:[1,2,3,4].map(I=>r.jsxs("div",{className:"flex items-center flex-1",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm transition-all ${I===n?"bg-primary-500 text-white scale-110":I<n?"bg-emerald-500 text-white":"bg-light-muted/20 text-light-muted"}`,children:I<n?"":I}),I<4&&r.jsx("div",{className:`flex-1 h-1 mx-2 rounded-full transition-all ${I<n?"bg-emerald-500":"bg-light-muted/20"}`})]},I))}),n===1&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Select Transaction Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("button",{type:"button",onClick:()=>o("deposit"),className:`p-6 rounded-2xl border-2 transition-all ${i==="deposit"?"border-emerald-500 bg-emerald-500/10 scale-105":"border-light-border dark:border-dark-border hover:border-emerald-500/50"}`,children:[r.jsx(dn,{className:"w-12 h-12 mx-auto mb-3 text-emerald-500"}),r.jsx("div",{className:"font-bold text-lg",children:"Deposit"}),r.jsx("div",{className:"text-xs text-light-muted mt-1",children:"Money In"})]}),r.jsxs("button",{type:"button",onClick:()=>o("withdrawal"),className:`p-6 rounded-2xl border-2 transition-all ${i==="withdrawal"?"border-rose-500 bg-rose-500/10 scale-105":"border-light-border dark:border-dark-border hover:border-rose-500/50"}`,children:[r.jsx(ih,{className:"w-12 h-12 mx-auto mb-3 text-rose-500"}),r.jsx("div",{className:"font-bold text-lg",children:"Withdrawal"}),r.jsx("div",{className:"text-xs text-light-muted mt-1",children:"Money Out"})]})]})]}),n===2&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Enter Amount"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-2xl font-bold text-light-muted",children:""}),r.jsx(me,{type:"number",value:l,onChange:I=>d(I.target.value),placeholder:"0.00",step:"0.01",min:"0",className:"text-3xl font-bold pl-12 py-6 text-center",autoFocus:!0})]}),r.jsx("p",{className:"text-sm text-light-muted text-center",children:l&&parseFloat(l)>0?r.jsx("span",{className:"font-bold text-primary-500",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(parseFloat(l))}):"Enter the transaction amount"})]}),n===3&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[r.jsx(Yt,{className:"w-5 h-5"}),"Transaction Details"]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Description"}),r.jsx("textarea",{value:c,onChange:I=>u(I.target.value),placeholder:"e.g., Monthly dues collection, Office supplies purchase...",className:"w-full px-4 py-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg min-h-[120px]",autoFocus:!0})]})]}),n===4&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-bold mb-4",children:"Additional Information (Optional)"}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(yt,{className:"w-4 h-4"}),"Link to Member"]}),r.jsx(Hr,{options:R.filter(I=>!I.disabled),value:m,onChange:h,placeholder:"Select a member..."}),r.jsx("p",{className:"text-xs text-light-muted mt-2",children:'Board members pay monthly dues. Select "Other" for non-board members.'})]}),m==="__other__"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2",children:"Person's Name"}),r.jsx(me,{value:x,onChange:I=>g(I.target.value),placeholder:"Enter name of person...",required:!0})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-bold mb-2 flex items-center gap-2",children:[r.jsx(tn,{className:"w-4 h-4"}),"Proof/Receipt Image"]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:W,className:"hidden",id:"proof-upload"}),r.jsxs("label",{htmlFor:"proof-upload",className:"flex items-center justify-center gap-2 px-4 py-3 rounded-xl border-2 border-dashed border-light-border dark:border-dark-border hover:border-primary-500 cursor-pointer transition-colors bg-light-bg dark:bg-dark-bg",children:[r.jsx(tn,{className:"w-5 h-5 text-light-muted"}),r.jsx("span",{className:"text-sm font-medium",children:v?v.name:"Choose Image"})]}),v&&r.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-emerald-500/10 border border-emerald-500/30",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded bg-emerald-500/20 flex items-center justify-center",children:r.jsx(tn,{className:"w-4 h-4 text-emerald-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400",children:v.name}),r.jsxs("p",{className:"text-xs text-light-muted",children:[(v.size/1024).toFixed(1)," KB"]})]})]}),r.jsx("button",{type:"button",onClick:()=>y(null),className:"text-rose-500 hover:text-rose-600",children:r.jsx(Ae,{className:"w-5 h-5"})})]}),r.jsx("p",{className:"text-xs text-light-muted",children:"Upload a screenshot or photo of the receipt/proof (Max 5MB)"})]})]})]}),r.jsxs("div",{className:"flex gap-4 pt-4",children:[n>1&&r.jsxs(M,{type:"button",variant:"ghost",onClick:()=>a(n-1),className:"flex-1",disabled:j,children:[r.jsx(ur,{className:"w-4 h-4 mr-2"}),"Back"]}),n<4?r.jsxs(M,{type:"button",variant:"primary",onClick:()=>a(n+1),className:"flex-1",disabled:n===1&&!Q||n===2&&!pe||n===3&&!$,children:["Next",r.jsx(_t,{className:"w-4 h-4 ml-2"})]}):r.jsx(M,{type:"button",variant:"primary",onClick:Y,className:"flex-1",disabled:j||w,children:w?"Uploading...":j?"Adding...":"Complete Transaction"})]})]})})}function JN({isOpen:e,onClose:t,imageUrl:s,title:n}){return f.useEffect(()=>{const a=i=>{i.key==="Escape"&&t()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[t]),f.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),r.jsx(re,{children:e&&r.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8",children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"absolute inset-0 bg-black/90 backdrop-blur-sm"}),r.jsxs(T.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"relative max-w-5xl w-full max-h-full flex flex-col bg-light-bg dark:bg-dark-bg rounded-2xl md:rounded-3xl overflow-hidden shadow-2xl",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between p-4 md:p-6 border-b border-light-border dark:border-dark-border bg-light-bg/80 dark:bg-dark-bg/80 backdrop-blur-md",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-primary-500/10 text-primary-500",children:r.jsx(DC,{className:"w-5 h-5"})}),r.jsx("h3",{className:"font-display font-bold text-light-text dark:text-dark-text truncate max-w-[200px] md:max-w-md",children:n||"View Proof"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("a",{href:s,download:!0,target:"_blank",rel:"noopener noreferrer",className:"p-2.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-light-muted hover:text-primary-500 transition-colors",title:"Download Image",children:r.jsx(Wo,{className:"w-5 h-5"})}),r.jsx("button",{onClick:t,className:"p-2.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-light-muted hover:text-rose-500 transition-colors",children:r.jsx(Ae,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex-1 overflow-auto p-2 md:p-4 bg-black/5 dark:bg-white/5 flex items-center justify-center min-h-[300px]",children:r.jsx("img",{src:s,alt:n||"Proof",className:"max-w-full max-h-[70vh] object-contain rounded-lg shadow-lg"})}),r.jsx("div",{className:"p-4 md:p-6 bg-light-bg/80 dark:bg-dark-bg/80 backdrop-blur-md border-t border-light-border dark:border-dark-border flex justify-center",children:r.jsx(vO,{onClick:t,variant:"outline",className:"px-8 rounded-xl border-light-border dark:border-dark-border",children:"Close Preview"})})]})]})})}function vO({children:e,onClick:t,variant:s="primary",className:n=""}){const a="px-4 py-2 rounded-lg font-bold transition-all flex items-center justify-center",i={primary:"bg-primary-500 text-white hover:bg-primary-600 shadow-lg shadow-primary-500/20",outline:"border border-light-border dark:border-dark-border text-light-text dark:text-dark-text hover:bg-light-card dark:hover:bg-dark-card",secondary:"bg-light-card dark:bg-dark-card text-light-text dark:text-dark-text hover:bg-light-border dark:hover:bg-dark-border"};return r.jsx("button",{onClick:t,className:`${a} ${i[s]} ${n}`,children:e})}function wO({user:e}){const[t,s]=f.useState(null),n=U(S.finance.getPendingSubmissions),a=V(S.finance.approvePaymentSubmission),i=V(S.finance.rejectPaymentSubmission),[o,l]=f.useState(null),{showToast:d}=yn();if(n===void 0)return r.jsxs(D,{className:"animate-pulse",children:[r.jsx(fe,{children:r.jsx("div",{className:"h-6 w-48 bg-light-muted/10 rounded"})}),r.jsx(O,{children:r.jsx("div",{className:"space-y-4",children:[1,2].map(x=>r.jsx("div",{className:"h-40 bg-light-muted/10 rounded-2xl"},x))})})]});const c=x=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(x),u=x=>new Date(2024,x-1).toLocaleDateString("en-US",{month:"long"}),m=async x=>{if(confirm("Approve this payment? It will increase the total balance and update member dues.")){s(x);try{await a({adminId:e._id,submissionId:x}),d("success","Payment approved successfully!")}catch(g){console.error("Failed to approve:",g),d("error",g.message||"Failed to approve")}finally{s(null)}}},h=async x=>{const g=prompt("Please enter rejection reason:");if(g!==null){s(x);try{await i({adminId:e._id,submissionId:x,reason:g||"Information provided is incomplete/incorrect"}),d("success","Payment rejected.")}catch(v){console.error("Failed to reject:",v),d("error",v.message||"Failed to reject")}finally{s(null)}}};return r.jsxs(D,{children:[r.jsx(fe,{className:"py-4 px-4 md:px-6",children:r.jsxs(ge,{className:"flex items-center gap-2 text-lg md:text-xl",children:[r.jsx(Ze,{className:"w-5 h-5 text-primary-500"}),"Pending Payment Submissions",n&&n.length>0&&r.jsx(G,{className:"ml-2 bg-primary-500 text-[10px] h-5 min-w-5 flex items-center justify-center",children:n.length})]})}),r.jsx(O,{children:r.jsx("div",{className:"space-y-4",children:n&&n.length>0?n.map(x=>r.jsxs("div",{className:"p-4 rounded-2xl border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50 flex flex-col md:flex-row gap-6",children:[r.jsxs("div",{className:"flex-1 space-y-3 md:space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-9 h-9 md:w-10 md:h-10 rounded-full bg-primary-500/10 flex items-center justify-center flex-shrink-0",children:r.jsx(yt,{className:"w-4 h-4 md:w-5 md:h-5 text-primary-500"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-black truncate",children:x.userName}),r.jsxs("p",{className:"text-[10px] md:text-xs text-light-muted",children:["Submitted ",new Date(x.createdAt).toLocaleDateString()]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 md:gap-4",children:[r.jsxs("div",{className:"p-2 md:p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-light-muted uppercase mb-0.5 md:mb-1",children:"Amount"}),r.jsx("p",{className:"text-base md:text-lg font-black text-emerald-500 truncate",children:c(x.amount)})]}),r.jsxs("div",{className:"p-2 md:p-3 rounded-xl bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border",children:[r.jsx("p",{className:"text-[9px] md:text-[10px] font-bold text-light-muted uppercase mb-0.5 md:mb-1",children:"Period"}),r.jsxs("p",{className:"font-bold text-xs md:text-sm truncate",children:[u(x.month)," ",x.year]})]})]})]}),r.jsx("div",{className:"md:w-48 shrink-0",children:r.jsxs("div",{className:"relative group rounded-xl overflow-hidden border border-light-border dark:border-dark-border aspect-video md:aspect-square bg-black/5",children:[x.proofUrl?r.jsx("img",{src:x.proofUrl,alt:"Proof",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx(Tr,{className:"w-6 h-6 text-light-muted"})}),r.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx("button",{onClick:()=>l({url:x.proofUrl,title:`Proof - ${x.userName}`}),className:"p-2 rounded-full bg-white/20 backdrop-blur-md text-white border border-white/20 hover:scale-110 transition-transform",children:r.jsx(Tt,{className:"w-5 h-5"})})})]})}),r.jsxs("div",{className:"md:w-40 shrink-0 flex flex-row md:flex-col gap-2",children:[r.jsxs(M,{onClick:()=>m(x._id),className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white font-bold h-11 md:h-12 text-xs md:text-sm",disabled:t!==null,children:[r.jsx(nt,{className:"w-3.5 h-3.5 md:w-4 md:h-4 mr-1 md:mr-2"}),"Approve"]}),r.jsxs(M,{onClick:()=>h(x._id),variant:"outline",className:"flex-1 border-rose-500/30 text-rose-500 hover:bg-rose-500/10 font-bold h-11 md:h-12 text-xs md:text-sm",disabled:t!==null,children:[r.jsx(Ae,{className:"w-3.5 h-3.5 md:w-4 md:h-4 mr-1 md:mr-2"}),"Reject"]})]})]},x._id)):r.jsxs("div",{className:"text-center py-12 text-light-muted flex flex-col items-center gap-2",children:[r.jsx(Kt,{className:"w-8 h-8 text-emerald-500/50"}),r.jsx("p",{children:"No pending submissions to review"})]})})}),r.jsx(JN,{isOpen:!!o,onClose:()=>l(null),imageUrl:(o==null?void 0:o.url)||"",title:o==null?void 0:o.title})]})}function kO({isOpen:e,onClose:t,report:s,isLoading:n,month:a,year:i}){const o=new Intl.DateTimeFormat("en-US",{month:"long"}).format(new Date(i,a-1));return r.jsx(ht,{isOpen:e,onClose:t,title:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Gr,{className:"w-5 h-5 text-primary-500"}),r.jsx("span",{children:"AI Financial Insights"})]}),maxWidth:"3xl",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"p-6 rounded-3xl bg-gradient-to-br from-primary-500 to-indigo-600 text-white relative overflow-hidden shadow-xl shadow-primary-500/20",children:[r.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-10 pointer-events-none",children:r.jsx(Sg,{size:120})}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Eb,{className:"bg-white/20 hover:bg-white/30 text-white border-white/20 backdrop-blur-md",children:"Gemini 2.0 Flash"}),r.jsx(Eb,{className:"bg-emerald-500/20 text-emerald-100 border-emerald-500/20 backdrop-blur-md",children:"Financial Analysis"})]}),r.jsxs("h2",{className:"text-2xl md:text-3xl font-black mb-1",children:[o," ",i," Report"]}),r.jsx("p",{className:"text-sm text-primary-100 max-w-md font-medium",children:"Automated deep-dive into community liquidity, transaction trends, and sustainability metrics."})]})]}),r.jsx("div",{className:"relative min-h-[400px] max-h-[60vh] overflow-y-auto premium-scrollbar px-1",children:r.jsx(re,{mode:"wait",children:n?r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 flex flex-col items-center justify-center p-12 text-center",children:[r.jsxs("div",{className:"relative w-20 h-20 mb-6",children:[r.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-primary-500/20"}),r.jsx("div",{className:"absolute inset-0 rounded-full border-t-4 border-primary-500 animate-spin"}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary-500",children:r.jsx(Sg,{className:"w-8 h-8 animate-pulse"})})]}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Analyzing Data..."}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted max-w-xs mx-auto",children:"Gemini is processing your transactions and calculating growth metrics."})]},"loading"):s?r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"prose prose-sm dark:prose-invert max-w-none ai-report-content pb-8",children:r.jsx("div",{className:"p-4 md:p-6 rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border",dangerouslySetInnerHTML:{__html:jO(s)}})},"content"):r.jsxs("div",{className:"flex flex-col items-center justify-center h-full p-12 text-center",children:[r.jsx(Yt,{className:"w-12 h-12 text-light-muted mb-4 opacity-50"}),r.jsx("p",{className:"text-light-muted",children:"No report data found."})]})})}),r.jsxs("div",{className:"pt-4 flex flex-col sm:flex-row gap-3",children:[r.jsx(M,{variant:"ghost",className:"flex-1 rounded-2xl h-12 border border-light-border dark:border-dark-border",onClick:t,children:"Close Analysis"}),!n&&s&&r.jsxs(M,{className:"flex-1 rounded-2xl h-12 bg-primary-500 hover:bg-primary-600 shadow-lg shadow-primary-500/20 gap-2",onClick:()=>window.print(),children:[r.jsx(Wo,{className:"w-4 h-4"}),"Export PDF"]})]})]})})}function Eb({children:e,className:t}){return r.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-black uppercase tracking-wider border ${t}`,children:e})}function jO(e){let t=e.replace(/```html|```/g,"");return!t.includes("<strong")&&!t.includes("<span")&&(t=t.replace(/\*\*(.*?)\*\*/g,'<strong class="text-primary-600 dark:text-primary-400">$1</strong>'),t=t.replace(/^\s*\*\s+(.*)$/gm,'<li class="ml-4 mb-2">$1</li>'),t=t.replace(/^\s*#\s+(.*)$/gm,'<h3 class="text-lg font-bold mt-6 mb-3">$1</h3>'),t=t.replace(/^\s*##\s+(.*)$/gm,'<h4 class="text-base font-bold mt-4 mb-2">$1</h4>')),t}function XN({user:e}){const[t,s]=f.useState("overview"),[n,a]=f.useState(!1),[i,o]=f.useState(new Date().getMonth()+1),[l,d]=f.useState(new Date().getFullYear()),c=U(S.finance.getCurrentBalance),u=U(S.finance.getTransactions,{limit:50}),m=U(S.finance.getMonthlySummary,{month:i,year:l}),h=V(S.finance.reverseTransaction),x=oC(S.finance.generateAIReport),[g,v]=f.useState(!1),[y,p]=f.useState(null),[b,w]=f.useState(!1),{showToast:k}=yn(),j=(e==null?void 0:e.role)==="super_admin",N=(e==null?void 0:e.isFinancialManager)===!0,_=j||N,A=C=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(C);return c===void 0||u===void 0?r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(C=>r.jsx(Ft,{},C))}),r.jsx("div",{className:"space-y-4",children:[1,2,3].map(C=>r.jsx(Oe,{},C))})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[r.jsx(D,{className:"md:col-span-1 border-primary-500/20 bg-gradient-to-br from-primary-500/10 to-transparent",children:r.jsxs(O,{className:"p-4 md:p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-primary-500/20 text-primary-500",children:r.jsx(_r,{className:"w-6 h-6 md:w-8 md:h-8"})})}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1 md:mb-2 text-balance",children:"Current Balance"}),r.jsx("p",{className:"text-2xl md:text-4xl font-black text-primary-500 truncate",children:A(c||0)})]})}),r.jsx(D,{className:"border-emerald-500/20",children:r.jsxs(O,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-emerald-500/10 text-emerald-500",children:r.jsx(dn,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-xl md:text-2xl font-black text-emerald-500 truncate ml-2",children:A((m==null?void 0:m.totalDeposits)||0)})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Monthly Deposits"}),r.jsxs("p",{className:"text-[10px] text-light-muted",children:[i,"/",l]})]})}),r.jsx(D,{className:"border-rose-500/20",children:r.jsxs(O,{className:"p-4 md:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3 md:mb-4",children:[r.jsx("div",{className:"p-2 md:p-3 rounded-2xl bg-rose-500/10 text-rose-500",children:r.jsx(ih,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsx("div",{className:"text-right text-xl md:text-2xl font-black text-rose-500 truncate ml-2",children:A((m==null?void 0:m.totalWithdrawals)||0)})]}),r.jsx("h3",{className:"text-[10px] md:text-xs font-black uppercase tracking-widest text-light-muted mb-1",children:"Monthly Withdrawals"}),r.jsxs("p",{className:"text-[10px] text-light-muted",children:[i,"/",l]})]})})]}),r.jsxs("div",{className:"flex items-center gap-1 p-1 rounded-xl md:rounded-2xl bg-light-bg/50 dark:bg-dark-bg/50 border border-light-border dark:border-dark-border w-fit max-w-full overflow-x-auto hide-scrollbar",children:[r.jsx("button",{onClick:()=>s("overview"),className:`px-4 md:px-6 py-2 md:py-2.5 rounded-lg md:rounded-xl text-xs md:text-sm font-bold transition-all whitespace-nowrap ${t==="overview"?"bg-primary-500 text-white shadow-lg shadow-primary-500/20":"text-light-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Overview"}),_&&r.jsx("button",{onClick:()=>s("pending"),className:`px-4 md:px-6 py-2 md:py-2.5 rounded-lg md:rounded-xl text-xs md:text-sm font-bold transition-all whitespace-nowrap ${t==="pending"?"bg-primary-500 text-white shadow-lg shadow-primary-500/20":"text-light-muted hover:text-light-text dark:hover:text-dark-text"}`,children:"Pending Submissions"})]}),t==="overview"&&r.jsxs(r.Fragment,{children:[_&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 md:gap-4",children:[r.jsxs(M,{onClick:()=>a(!0),className:"bg-primary-500 hover:bg-primary-600 w-full sm:w-auto",children:[r.jsx(jc,{className:"w-4 h-4 mr-2"}),"Add Transaction"]}),r.jsxs(M,{variant:"outline",className:"w-full sm:w-auto border-light-border dark:border-dark-border mb-4 sm:mb-0 hover:border-primary-500 hover:text-primary-500 transition-colors",disabled:b,onClick:async()=>{const C=m;if(C!=null&&C.aiReportText){p(C.aiReportText),v(!0);return}w(!0),v(!0),p(null);try{const P=await x({userId:e._id,month:i,year:l});P.success&&(p(P.aiReportText),k("success","Financial analysis complete!"))}catch(P){console.error("Report generation failed:",P),k("error","Failed to generate financial analysis"),v(!1)}finally{w(!1)}},children:[r.jsx(Gr,{className:`w-4 h-4 mr-2 ${b?"animate-spin":"text-primary-500"}`}),b?"Analyzing...":"Generate Report"]})]}),r.jsxs(D,{children:[r.jsx(fe,{className:"py-4 px-4 md:px-6",children:r.jsxs(ge,{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Yt,{className:"w-5 h-5 text-primary-500"}),r.jsx("span",{className:"text-lg md:text-xl",children:"Transaction History"})]}),r.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[r.jsx("select",{value:i,onChange:C=>o(Number(C.target.value)),className:"flex-1 sm:flex-none px-2 py-1 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-xs md:text-sm outline-none focus:ring-1 focus:ring-primary-500",children:Array.from({length:12},(C,P)=>r.jsx("option",{value:P+1,children:new Date(2024,P).toLocaleDateString("en-US",{month:"short"})},P+1))}),r.jsx("select",{value:l,onChange:C=>d(Number(C.target.value)),className:"flex-1 sm:flex-none px-2 py-1 rounded-lg border border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg text-xs md:text-sm outline-none focus:ring-1 focus:ring-primary-500",children:Array.from({length:5},(C,P)=>r.jsx("option",{value:2024+P,children:2024+P},2024+P))})]})]})}),r.jsx(O,{children:r.jsx("div",{className:"space-y-3",children:u&&u.length>0?u.map(C=>{const P=Date.now()-C.createdAt<864e5,R=_&&P&&!C.isReversed;return r.jsx("div",{className:`p-4 rounded-lg border transition-colors ${C.isReversed?"border-light-border/50 dark:border-dark-border/50 opacity-50":"border-light-border dark:border-dark-border hover:border-primary-500/30"}`,children:r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex items-start md:items-center gap-4 flex-1",children:[r.jsx("div",{className:`p-3 rounded-xl shrink-0 ${C.type==="deposit"?"bg-emerald-500/10 text-emerald-500":"bg-rose-500/10 text-rose-500"}`,children:C.type==="deposit"?r.jsx(dn,{className:"w-5 h-5 md:w-6 md:h-6"}):r.jsx(ih,{className:"w-5 h-5 md:w-6 md:h-6"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[r.jsx("h4",{className:"font-bold text-sm md:text-base truncate",children:C.description}),C.isReversed&&r.jsx(G,{variant:"outline",className:"text-[10px] h-4",children:"Reversed"}),C.reversedFrom&&r.jsx(G,{className:"bg-amber-500 text-[10px] h-4",children:"Reversal"})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-[10px] md:text-xs text-light-muted",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(yt,{className:"w-3 h-3"}),C.recordedByName]}),C.memberName&&r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(ke,{className:"w-3 h-3"}),C.memberName]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Ze,{className:"w-3 h-3"}),ot(C.createdAt,{addSuffix:!0})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-between md:justify-end gap-4 pl-14 md:pl-0",children:[r.jsx("div",{className:"text-left md:text-right",children:r.jsxs("p",{className:`text-lg md:text-xl font-black ${C.type==="deposit"?"text-emerald-500":"text-rose-500"}`,children:[C.type==="deposit"?"+":"-",A(C.amount)]})}),r.jsxs("div",{className:"flex gap-2",children:[C.proofStorageId&&r.jsx(M,{size:"sm",variant:"ghost",className:"h-8 w-8 p-0",children:r.jsx(Tt,{className:"w-4 h-4"})}),R&&r.jsxs(M,{size:"sm",variant:"outline",onClick:async()=>{confirm("Are you sure you want to reverse this transaction?")&&await h({userId:e._id,transactionId:C._id})},className:"h-8 px-2 text-amber-500 border-amber-500/30 hover:bg-amber-500/10 text-xs gap-1",children:[r.jsx(WC,{className:"w-3 h-3"}),r.jsx("span",{className:"hidden sm:inline",children:"Reverse"})]})]})]})]})},C._id)}):r.jsx("div",{className:"text-center py-12 text-light-muted",children:"No transactions yet"})})})]})]}),t==="pending"&&r.jsx(wO,{user:e}),r.jsx(yO,{isOpen:n,onClose:()=>a(!1),userId:e._id}),r.jsx(kO,{isOpen:g,onClose:()=>v(!1),report:y,isLoading:b,month:i,year:l})]})}function NO(){const{user:e}=Z(),[t,s]=f.useState("attendance");return!e||e.role!=="super_admin"&&e.role!=="board_member"?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsxs(D,{className:"p-8 text-center",children:[r.jsx(We,{className:"w-16 h-16 mx-auto mb-4 text-rose-500"}),r.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:"You don't have permission to access this page."})]})}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Governance System"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Board Governance"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Professional attendance tracking and financial management system"})]}),r.jsxs("div",{className:"flex gap-4 border-b border-light-border dark:border-dark-border",children:[r.jsxs("button",{onClick:()=>s("attendance"),className:`px-6 py-3 font-bold text-sm transition-all relative ${t==="attendance"?"text-primary-500":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"w-4 h-4"}),"Attendance"]}),t==="attendance"&&r.jsx(T.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-500"})]}),r.jsxs("button",{onClick:()=>s("finance"),className:`px-6 py-3 font-bold text-sm transition-all relative ${t==="finance"?"text-primary-500":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"}`,children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_r,{className:"w-4 h-4"}),"Finance"]}),t==="finance"&&r.jsx(T.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary-500"})]})]}),r.jsx(re,{mode:"wait",children:r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.2},children:t==="attendance"?r.jsx(YN,{user:e}):r.jsx(XN,{user:e})},t)})]})}function SO(){const{user:e}=Z();return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Attendance System"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Meeting Attendance"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Track your meeting participation and submit excuses"})]}),r.jsx(YN,{user:e})]})}function CO(){const{user:e}=Z();return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-emerald-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-emerald-500",children:"Financial Management"})]}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Community Finance"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Overview of community funds and financial transactions"})]}),r.jsx(XN,{user:e})]})}function Mb({label:e,options:t,value:s,onChange:n}){var d;const[a,i]=f.useState(!1),o=f.useRef(null),l=((d=t.find(c=>c.value===s))==null?void 0:d.label)??"";return f.useEffect(()=>{const c=u=>{o.current&&!o.current.contains(u.target)&&i(!1)};return document.addEventListener("mousedown",c),()=>document.removeEventListener("mousedown",c)},[]),r.jsxs("div",{ref:o,className:"relative",children:[r.jsx("label",{className:"block text-sm font-bold mb-2 uppercase tracking-wide text-light-muted",children:e}),r.jsxs("button",{type:"button",onClick:()=>i(c=>!c),className:`
                    w-full flex items-center justify-between gap-2
                    px-4 py-3 rounded-xl border text-sm font-bold
                    bg-light-bg dark:bg-dark-bg
                    text-light-text dark:text-dark-text
                    transition-all duration-200
                    ${a?"border-primary-500 ring-2 ring-primary-500/20":"border-light-border dark:border-dark-border hover:border-primary-400"}
                `,children:[r.jsx("span",{children:l}),r.jsx(Ke,{className:`w-4 h-4 text-light-muted transition-transform duration-300 ${a?"rotate-180":""}`})]}),r.jsx(re,{children:a&&r.jsx(T.div,{initial:{opacity:0,y:-6,scale:.97},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-6,scale:.97},transition:{duration:.15,ease:"easeOut"},className:`\r
                            absolute z-50 left-0 right-0 mt-1\r
                            bg-white dark:bg-dark-card\r
                            border border-light-border dark:border-dark-border\r
                            rounded-xl shadow-xl shadow-black/10\r
                            overflow-hidden\r
                        `,children:r.jsx("div",{className:"max-h-48 overflow-y-auto premium-scrollbar py-1",children:t.map(c=>{const u=c.value===s;return r.jsxs("button",{type:"button",onClick:()=>{n(c.value),i(!1)},className:`
                                            w-full flex items-center justify-between
                                            px-4 py-2.5 text-sm font-semibold text-left
                                            transition-colors duration-150
                                            ${u?"bg-primary-500/10 text-primary-600 dark:text-primary-400":"text-light-text dark:text-dark-text hover:bg-light-bg dark:hover:bg-dark-bg"}
                                        `,children:[c.label,u&&r.jsx(nt,{className:"w-4 h-4 shrink-0 text-primary-500"})]},c.value)})})})})]})}const TO=Array.from({length:12},(e,t)=>({value:t+1,label:new Date(2024,t).toLocaleDateString("en-US",{month:"long"})})),_O=[2024,2025,2026,2027].map(e=>({value:e,label:String(e)}));function IO({isOpen:e,onClose:t,user:s}){const[n,a]=f.useState("1000"),[i,o]=f.useState(new Date().getMonth()+1),[l,d]=f.useState(new Date().getFullYear()),[c,u]=f.useState(null),[m,h]=f.useState(!1),[x,g]=f.useState(!1),v=V(S.files.generateUploadUrl),y=V(S.finance.submitPaymentSubmission),{showToast:p}=yn(),b=N=>{var A;const _=(A=N.target.files)==null?void 0:A[0];if(_){if(!_.type.startsWith("image/")){p("error","Please upload an image file");return}if(_.size>5*1024*1024){p("error","File size must be less than 5MB");return}u(_)}},w=async()=>{if(!c){p("error","Please upload a proof of payment");return}g(!0);try{h(!0);const N=await v(),_=await fetch(N,{method:"POST",headers:{"Content-Type":c.type},body:c}),{storageId:A}=await _.json();h(!1),await y({userId:s._id,amount:parseFloat(n),month:i,year:l,proofStorageId:A}),p("success","Payment submission sent for approval!"),k()}catch(N){console.error("Failed to submit payment:",N),p("error",N.message||"Failed to submit payment")}finally{h(!1),g(!1)}},k=()=>{a("1000"),o(new Date().getMonth()+1),d(new Date().getFullYear()),u(null),t()},j=new Date(l,i-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});return r.jsx(ht,{isOpen:e,onClose:k,title:"Submit Board Due Payment",children:r.jsxs("div",{className:"space-y-5",children:[r.jsxs("div",{className:"p-4 rounded-2xl bg-primary-500/5 border border-primary-500/10 flex items-center gap-4",children:[r.jsx("div",{className:"w-11 h-11 rounded-full bg-primary-500/10 flex items-center justify-center shrink-0",children:r.jsx(kt,{className:"w-5 h-5 text-primary-500"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-bold text-light-muted uppercase tracking-widest",children:"Paying For"}),r.jsx("p",{className:"font-bold text-light-text dark:text-dark-text",children:j})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2 uppercase tracking-wide text-light-muted",children:"Amount ()"}),r.jsx(me,{type:"number",value:n,onChange:N=>a(N.target.value),placeholder:"1000",className:"font-bold text-lg"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(Mb,{label:"Month",options:TO,value:i,onChange:o}),r.jsx(Mb,{label:"Year",options:_O,value:l,onChange:d})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold mb-2 uppercase tracking-wide text-light-muted",children:"Payment Proof (Screenshot)"}),c?r.jsxs("div",{className:"relative group rounded-2xl overflow-hidden border border-light-border dark:border-dark-border bg-black/5",children:[r.jsx("img",{src:URL.createObjectURL(c),alt:"Proof Preview",className:"w-full h-44 object-contain"}),r.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:r.jsx("button",{onClick:()=>u(null),className:"p-3 rounded-full bg-rose-500 text-white shadow-lg hover:scale-110 transition-transform",children:r.jsx(Ae,{className:"w-5 h-5"})})}),r.jsxs("div",{className:"p-3 bg-light-bg dark:bg-dark-bg border-t border-light-border dark:border-dark-border flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(tn,{className:"w-4 h-4 text-light-muted"}),r.jsx("span",{className:"text-xs font-bold truncate max-w-[150px]",children:c.name})]}),r.jsxs("span",{className:"text-[10px] text-light-muted",children:[(c.size/1024/1024).toFixed(2)," MB"]})]})]}):r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-36 border-2 border-dashed border-light-border dark:border-dark-border rounded-2xl hover:border-primary-500 cursor-pointer bg-light-bg/30 dark:bg-dark-bg/30 transition-all group",children:[r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"p-3 rounded-full bg-primary-500/10 text-primary-500 group-hover:bg-primary-500/20 transition-colors",children:r.jsx(oh,{className:"w-5 h-5"})}),r.jsx("p",{className:"text-sm font-bold text-light-text dark:text-dark-text",children:"Click to upload proof"}),r.jsx("p",{className:"text-xs text-light-muted",children:"PNG or JPG (Max 5MB)"})]}),r.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:b})]})]}),r.jsxs("div",{className:"pt-2 flex gap-3",children:[r.jsx(M,{variant:"ghost",className:"flex-1 rounded-2xl h-12",onClick:k,disabled:x,children:"Cancel"}),r.jsx(M,{className:"flex-1 rounded-2xl h-12 bg-primary-500 hover:bg-primary-600 shadow-lg shadow-primary-500/20",onClick:w,disabled:x||m||!c,children:m?"Uploading":x?"Submitting":"Submit Payment"})]})]})})}function PO({admin:e}){const[t,s]=f.useState(null),[n,a]=f.useState(new Date().getFullYear()),[i,o]=f.useState(""),l=U(S.users.getBoardMembers),d=l==null?void 0:l.find(y=>y._id===t),c=U(S.finance.getMemberContributions,t?{adminId:e._id,targetUserId:t,year:n}:"skip"),u=l==null?void 0:l.filter(y=>y.name.toLowerCase().includes(i.toLowerCase())),m=y=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(y),h=y=>new Date(2024,y-1).toLocaleDateString("en-US",{month:"long"});if(!t)return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h2",{className:"text-xl md:text-2xl font-black text-gradient truncate",children:"Member Ledger"}),r.jsx("p",{className:"text-light-muted text-[10px] md:text-sm font-medium",children:"Select a member to view records."})]}),r.jsxs("div",{className:"relative w-full md:w-72",children:[r.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted"}),r.jsx("input",{type:"text",placeholder:"Search board members...",value:i,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-4 py-2.5 rounded-xl bg-light-bg/50 border border-light-border focus:border-primary-500/50 outline-none text-xs md:text-sm transition-all"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u==null?void 0:u.map(y=>r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{y:-4},children:r.jsx(D,{className:"cursor-pointer hover:border-primary-500/30 transition-all border-light-border/50 bg-light-card/40",onClick:()=>s(y._id),children:r.jsxs(O,{className:"p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-primary-500/10 flex items-center justify-center text-primary-500 font-bold shrink-0",children:y.name.charAt(0)}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-bold text-sm truncate",children:y.name}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-black tracking-widest",children:y.role.replace("_"," ")})]})]}),r.jsx(_o,{className:"w-4 h-4 text-light-muted"})]})})},y._id)),(u==null?void 0:u.length)===0&&r.jsxs("div",{className:"col-span-full py-12 text-center text-light-muted bg-light-bg/20 rounded-2xl border-2 border-dashed border-light-border",children:[r.jsx(ke,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),r.jsx("p",{className:"text-sm",children:"No members found matching your search"})]})]})]});const x=(c==null?void 0:c.reduce((y,p)=>y+p.totalPaid,0))||0,g=(c==null?void 0:c.reduce((y,p)=>y+p.outstanding,0))||0,v=(c==null?void 0:c.reduce((y,p)=>y+p.surplus,0))||0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-3 md:gap-4 min-w-0",children:[r.jsx(M,{variant:"ghost",size:"sm",onClick:()=>s(null),className:"rounded-xl h-10 w-10 p-0 flex-shrink-0",children:r.jsx(ur,{className:"w-5 h-5"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("h2",{className:"text-lg md:text-2xl font-black text-gradient truncate",children:["Ledger: ",d==null?void 0:d.name]}),r.jsx("div",{className:"flex items-center gap-2 mt-0.5",children:r.jsx("select",{value:n,onChange:y=>a(Number(y.target.value)),className:"bg-transparent text-[10px] md:text-xs font-black text-primary-500 border-none outline-none cursor-pointer",children:[2024,2025,2026].map(y=>r.jsxs("option",{value:y,children:[y," Fiscal Year"]},y))})})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[r.jsx(D,{className:"bg-emerald-500/5 border-emerald-500/20",children:r.jsxs(O,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(_r,{className:"w-4 h-4 md:w-5 md:h-5 text-emerald-500"}),r.jsx(G,{className:"bg-emerald-500 text-[10px]",children:"Total Paid"})]}),r.jsx("p",{className:"text-xl md:text-2xl font-black text-emerald-500",children:m(x)})]})}),r.jsx(D,{className:"bg-rose-500/5 border-rose-500/20",children:r.jsxs(O,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(kt,{className:"w-4 h-4 md:w-5 md:h-5 text-rose-500"}),r.jsx(G,{className:"bg-rose-500 text-[10px]",children:"Outstanding"})]}),r.jsx("p",{className:"text-xl md:text-2xl font-black text-rose-500",children:m(g)})]})}),r.jsx(D,{className:"bg-primary-500/5 border-primary-500/20",children:r.jsxs(O,{className:"p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx(AO,{className:"w-4 h-4 md:w-5 md:h-5 text-primary-500"}),r.jsx(G,{className:"bg-primary-500 text-[10px]",children:"Surplus"})]}),r.jsx("p",{className:"text-xl md:text-2xl font-black text-primary-500",children:m(v)})]})})]}),r.jsxs(D,{className:"border-light-border/50",children:[r.jsx(fe,{className:"pb-2",children:r.jsx(ge,{className:"text-sm font-black uppercase tracking-widest text-light-muted",children:"Monthly Breakdown"})}),r.jsx(O,{className:"px-1 md:px-6",children:r.jsx("div",{className:"overflow-x-auto hide-scrollbar",children:r.jsxs("table",{className:"w-full text-left min-w-[600px] md:min-w-0",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-light-border text-[9px] md:text-[10px] font-black uppercase tracking-wider text-light-muted",children:[r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Month"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Required"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Paid"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Surplus"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Outstanding"}),r.jsx("th",{className:"py-3 px-3 md:px-4",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-light-border/50",children:c==null?void 0:c.map(y=>r.jsxs("tr",{className:"text-[10px] md:text-xs hover:bg-light-bg/30 transition-colors",children:[r.jsx("td",{className:"py-3 px-3 md:px-4 font-bold",children:h(y.month)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-medium",children:m(y.requiredAmount)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-black text-emerald-500",children:m(y.totalPaid)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-black text-primary-500",children:m(y.surplus)}),r.jsx("td",{className:"py-3 px-3 md:px-4 font-black text-rose-500",children:m(y.outstanding)}),r.jsx("td",{className:"py-3 px-3 md:px-4 text-[9px] md:text-[10px] font-black uppercase italic text-light-muted",children:r.jsx(G,{className:`text-[9px] h-5 min-w-[50px] flex items-center justify-center ${y.status==="cleared"?"bg-emerald-500/20 text-emerald-500 hover:bg-emerald-500/30":y.status==="partial"?"bg-amber-500/20 text-amber-500 hover:bg-amber-500/30":"bg-rose-500/20 text-rose-500 hover:bg-rose-500/30"}`,children:y.status})})]},y.month))})]})})})]})]})}function AO(e){return r.jsxs("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),r.jsx("polyline",{points:"17 6 23 6 23 12"})]})}function EO({user:e}){const[t,s]=f.useState("personal"),[n,a]=f.useState(!1),[i,o]=f.useState(null),[l]=f.useState(new Date().getFullYear()),d=(e==null?void 0:e.role)==="super_admin",c=U(S.finance.getMyContributions,{userId:e._id,year:l}),u=U(S.finance.getMyPaymentSubmissions,{userId:e._id}),m=p=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(p),h=p=>{switch(p){case"cleared":return r.jsx(G,{className:"bg-emerald-500",children:"Cleared"});case"partial":return r.jsx(G,{className:"bg-amber-500",children:"Partial"});case"owing":return r.jsx(G,{className:"bg-rose-500",children:"Owing"});default:return r.jsx(G,{variant:"outline",children:p})}},x=p=>new Date(2024,p-1).toLocaleDateString("en-US",{month:"long"});if(c===void 0||u===void 0)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[1,2,3].map(p=>r.jsx(Ft,{},p))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(Oe,{})}),r.jsx("div",{className:"lg:col-span-1 border rounded-xl p-4 space-y-4",children:[1,2,3].map(p=>r.jsx("div",{className:"h-20 bg-light-muted/10 animate-pulse rounded-xl"},p))})]})]});if(t==="ledger"&&d)return r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex justify-end mb-4",children:r.jsxs("div",{className:"flex bg-light-bg/50 dark:bg-dark-bg/50 p-1 rounded-xl border border-light-border dark:border-dark-border",children:[r.jsx("button",{onClick:()=>s("personal"),className:"px-4 py-1.5 rounded-lg text-xs font-bold transition-all text-light-muted hover:text-light-text",children:"Personal"}),r.jsx("button",{onClick:()=>s("ledger"),className:"px-4 py-1.5 rounded-lg text-xs font-bold transition-all bg-white dark:bg-dark-card shadow-sm text-primary-500",children:"Member Ledger"})]})}),e&&r.jsx(PO,{admin:e})]});const v=(c==null?void 0:c.reduce((p,b)=>p+b.totalPaid,0))||0,y=(c==null?void 0:c.reduce((p,b)=>p+b.surplus,0))||0;return r.jsxs("div",{className:"space-y-6",children:[d&&r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center bg-primary-500/5 p-3 md:p-4 rounded-2xl border border-primary-500/10 gap-4",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-xs md:text-sm font-black text-primary-500 uppercase tracking-wider truncate",children:"Contribution Management"}),r.jsx("p",{className:"text-[9px] md:text-[10px] text-light-muted font-bold leading-tight",children:"Switch between personal and board records."})]}),r.jsxs("div",{className:"grid grid-cols-2 bg-light-bg/50 dark:bg-dark-bg/50 p-1 rounded-xl border border-light-border dark:border-dark-border w-full sm:w-auto sm:flex shrink-0",children:[r.jsx("button",{onClick:()=>s("personal"),className:`px-2 md:px-4 py-2 sm:py-1.5 rounded-lg text-[10px] md:text-xs font-bold transition-all whitespace-nowrap ${t==="personal"?"bg-white dark:bg-dark-card shadow-sm text-primary-500":"text-light-muted hover:text-light-text"}`,children:"Personal"}),r.jsx("button",{onClick:()=>s("ledger"),className:`px-2 md:px-4 py-2 sm:py-1.5 rounded-lg text-[10px] md:text-xs font-bold transition-all whitespace-nowrap ${t==="ledger"?"bg-white dark:bg-dark-card shadow-sm text-primary-500":"text-light-muted hover:text-light-text"}`,children:"Member Ledger"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 md:gap-4",children:[r.jsx(D,{className:"bg-gradient-to-br from-primary-500/5 to-transparent border-primary-500/10",children:r.jsxs(O,{className:"p-3 md:p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-1 md:mb-2",children:[r.jsx("div",{className:"p-1.5 rounded-lg bg-primary-500/10 text-primary-500 shrink-0",children:r.jsx(dn,{className:"w-4 h-4 md:w-5 h-5"})}),r.jsxs("span",{className:"text-[10px] md:text-xs font-bold text-light-muted uppercase whitespace-nowrap",children:["Total Paid ",l]})]}),r.jsx("p",{className:"text-lg md:text-2xl font-black text-primary-500",children:m(v)})]})}),r.jsx(D,{className:"bg-gradient-to-br from-emerald-500/5 to-transparent border-emerald-500/10",children:r.jsxs(O,{className:"p-3 md:p-4",children:[r.jsxs("div",{className:"flex items-center gap-2 md:gap-3 mb-1 md:mb-2",children:[r.jsx("div",{className:"p-1.5 rounded-lg bg-emerald-500/10 text-emerald-500 shrink-0",children:r.jsx(jc,{className:"w-4 h-4 md:w-5 h-5"})}),r.jsx("span",{className:"text-[10px] md:text-xs font-bold text-light-muted uppercase whitespace-nowrap",children:"Total Surplus"})]}),r.jsx("p",{className:"text-lg md:text-2xl font-black text-emerald-500",children:m(y)})]})}),r.jsx(D,{className:"sm:col-span-2 md:col-span-1",children:r.jsx(O,{className:"p-3 md:p-4 flex flex-col justify-center",children:r.jsxs(M,{onClick:()=>a(!0),className:"w-full bg-primary-500 hover:bg-primary-600 h-11 md:h-full py-2 text-sm font-bold shadow-lg shadow-primary-500/10",children:[r.jsx(ea,{className:"w-4 h-4 mr-2"}),"Pay Monthly Due"]})})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs(D,{className:"lg:col-span-2",children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center gap-2",children:[r.jsx(kt,{className:"w-5 h-5"}),"Monthly Contribution Ledger (",l,")"]})}),r.jsx(O,{className:"px-1 md:px-6",children:r.jsx("div",{className:"overflow-x-auto hide-scrollbar",children:r.jsxs("table",{className:"w-full text-left min-w-[500px] md:min-w-0",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-light-border dark:border-dark-border",children:[r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Month"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Required"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Paid"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted",children:"Status"}),r.jsx("th",{className:"pb-3 px-3 font-bold text-[10px] md:text-xs uppercase tracking-wider text-light-muted text-right",children:"Surplus"})]})}),r.jsx("tbody",{children:c==null?void 0:c.map((p,b)=>r.jsxs("tr",{className:"border-b border-light-border/50 dark:border-dark-border/50 last:border-0 hover:bg-light-bg/30 dark:hover:bg-dark-bg/30 transition-colors",children:[r.jsx("td",{className:"py-4 px-3",children:r.jsx("span",{className:"font-bold text-sm md:text-base",children:x(p.month)})}),r.jsxs("td",{className:"py-4 px-3 text-xs md:text-sm font-medium",children:["",p.requiredAmount]}),r.jsxs("td",{className:"py-4 px-3",children:[r.jsx("div",{className:"text-xs md:text-sm font-bold",children:m(p.totalPaid)}),p.outstanding>0&&r.jsxs("div",{className:"text-[9px] md:text-[10px] text-rose-500 font-bold",children:["Outstanding: ",m(p.outstanding)]})]}),r.jsx("td",{className:"py-4 px-3",children:h(p.status)}),r.jsx("td",{className:"py-4 px-3 text-right",children:p.surplus>0?r.jsxs("div",{className:"text-xs md:text-sm font-bold text-emerald-500",children:["+",m(p.surplus)]}):r.jsx("span",{className:"text-light-muted",children:"--"})})]},b))})]})})})]}),r.jsxs(D,{className:"lg:col-span-1",children:[r.jsx(fe,{children:r.jsxs(ge,{className:"flex items-center gap-2",children:[r.jsx(Fx,{className:"w-5 h-5"}),"Recent Submissions"]})}),r.jsx(O,{className:"p-3 md:p-6",children:r.jsx("div",{className:"space-y-4",children:u&&u.length>0?u.map(p=>r.jsxs("div",{className:"p-3 rounded-xl border border-light-border dark:border-dark-border bg-light-bg/50 dark:bg-dark-bg/50",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-bold text-sm",children:[x(p.month)," ",p.year]}),r.jsx("p",{className:"text-lg font-black text-primary-500",children:m(p.amount)})]}),r.jsx(G,{className:p.status==="approved"?"bg-emerald-500":p.status==="rejected"?"bg-rose-500":"bg-amber-500",children:p.status.charAt(0).toUpperCase()+p.status.slice(1)})]}),r.jsxs("div",{className:"flex items-center justify-between text-[10px] text-light-muted",children:[r.jsx("span",{children:new Date(p.createdAt).toLocaleDateString()}),p.proofUrl&&r.jsxs("button",{onClick:()=>o({url:p.proofUrl,title:`Proof - ${x(p.month)} ${p.year}`}),className:"flex items-center gap-1 text-primary-500 hover:text-primary-600 font-bold",children:[r.jsx(Tt,{className:"w-3 h-3"})," View Proof"]})]}),p.rejectionReason&&r.jsxs("div",{className:"mt-2 p-2 rounded bg-rose-500/10 text-rose-500 text-[10px]",children:[r.jsx("strong",{children:"Reason:"})," ",p.rejectionReason]})]},p._id)):r.jsx("div",{className:"text-center py-8 text-light-muted text-sm",children:"No payment submissions yet"})})})]})]}),r.jsx(IO,{isOpen:n,onClose:()=>a(!1),user:e}),r.jsx(JN,{isOpen:!!i,onClose:()=>o(null),imageUrl:(i==null?void 0:i.url)||"",title:i==null?void 0:i.title})]})}function MO(){const{user:e}=Z();return r.jsxs("div",{className:"space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Personal Contributions"})]}),r.jsx("h1",{className:"text-3xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"My Contributions"}),r.jsx("p",{className:"text-xs md:text-base text-light-muted dark:text-dark-muted font-medium max-w-xl",children:"Manage your monthly dues and track surplus payments"})]}),r.jsx(EO,{user:e})]})}const Rb=["Access Bank","GTBank","First Bank","UBA","Zenith Bank","Kuda Bank","Opay","PalmPay","Moniepoint","Stanbic IBTC","Fidelity Bank","Union Bank","FCMB","Sterling Bank","Wema Bank","Other"];function RO(){var j;const{user:e,isLoading:t}=Z(),s=V(S.users.updateProfile),n=jt(),a=de(),i=((j=n.state)==null?void 0:j.isNew)||new URLSearchParams(n.search).get("new")==="true";if(t)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});if(!e)return r.jsx(Ee,{to:"/login",state:{from:n},replace:!0});const[o,l]=f.useState(1),[d,c]=f.useState(!1),[u,m]=f.useState({phone:"",network:"",whatsappVerified:!1,profession:"",bankName:"",accountNumber:"",accountName:"",customBankName:"",sameAsPhone:!1});f.useEffect(()=>{e&&m(N=>{var _,A,L,C,P;return{...N,phone:e.phone||"",network:e.network||"",whatsappVerified:e.whatsappVerified||!1,profession:e.profession||"",bankName:((_=e.bankDetails)==null?void 0:_.bankName)||"",accountNumber:((A=e.bankDetails)==null?void 0:A.accountNumber)||"",accountName:((L=e.bankDetails)==null?void 0:L.accountName)||e.name||"",customBankName:Rb.includes(((C=e.bankDetails)==null?void 0:C.bankName)||"")?"":((P=e.bankDetails)==null?void 0:P.bankName)||""}})},[e]);const h=N=>{const _=EN(N);m(A=>({...A,phone:N,network:_,accountNumber:A.sameAsPhone?N:A.accountNumber}))},x=N=>{m(_=>({..._,sameAsPhone:N,accountNumber:N?_.phone:_.accountNumber}))},[g,v]=f.useState(!1),y=N=>{if(N.preventDefault(),o===1){if(!u.phone||!u.profession)return;l(2)}},p=()=>{l(1)},b=async N=>{N.preventDefault(),c(!0);try{const _=u.bankName==="Other"?u.customBankName:u.bankName;await s({userId:e._id,phone:u.phone,network:u.network,whatsappVerified:u.whatsappVerified,profession:u.profession,bankDetails:{bankName:_,accountNumber:u.accountNumber,accountName:u.accountName}}),v(!0)}catch(_){console.error("Failed to update profile",_)}finally{c(!1)}},w=()=>{MN(),setTimeout(()=>{var _,A;const N=((A=(_=n.state)==null?void 0:_.from)==null?void 0:A.pathname)||"/feed";a(N,{replace:!0})},1e3)},k={enter:N=>({x:N>0?50:-50,opacity:0}),center:{zIndex:1,x:0,opacity:1},exit:N=>({zIndex:0,x:N<0?50:-50,opacity:0})};return r.jsx("div",{className:"min-h-screen py-8 px-4 sm:px-6",children:r.jsxs("div",{className:"max-w-xl mx-auto",children:[r.jsx("div",{className:"flex items-center justify-between mb-8",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(Xe,{}),r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gradient",children:i?"Complete Registration":"Member Details"})]})}),r.jsxs(D,{glass:!0,className:"overflow-hidden",children:[r.jsxs(fe,{className:"pb-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider text-primary-500",children:["Step ",o," of 2"]}),r.jsxs("div",{className:"flex gap-1.5",children:[r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${o>=1?"w-8 bg-primary-500":"w-4 bg-gray-200 dark:bg-gray-800"}`}),r.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${o>=2?"w-8 bg-primary-500":"w-4 bg-gray-200 dark:bg-gray-800"}`})]})]}),r.jsx(ge,{className:"text-xl sm:text-2xl",children:o===1?"Basic Information":"Financial Details"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:o===1?"Let's start with your contact and professional details.":"Almost there! Provide your bank details for rewards and withdrawals."})]}),r.jsx(O,{className:"mt-4",children:r.jsx("form",{onSubmit:o===1?y:b,className:"space-y-6",children:r.jsx(re,{mode:"wait",custom:o,children:o===1?r.jsxs(T.div,{custom:1,variants:k,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center",children:r.jsx(kc,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),r.jsx("h3",{className:"font-semibold",children:"Contact Details"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx(me,{label:"Phone Number",value:u.phone,onChange:N=>h(N.target.value),placeholder:"08012345678",required:!0}),u.network&&u.network!=="Unknown"&&r.jsx("div",{className:"mt-1",children:r.jsx(G,{variant:"primary",className:"text-[10px] px-2 py-0",children:u.network})})]}),r.jsxs("label",{className:"flex items-center gap-3 p-4 rounded-2xl border border-light-border dark:border-dark-border cursor-pointer hover:bg-light-bg dark:hover:bg-dark-bg/50 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:u.whatsappVerified,onChange:N=>m({...u,whatsappVerified:N.target.checked}),className:"w-5 h-5 rounded-lg border-primary-500 text-primary-500 focus:ring-primary-500 cursor-pointer"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium",children:"WhatsApp Confirmation"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:"This is my active WhatsApp number"})]})]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-secondary-100 dark:bg-secondary-900/30 flex items-center justify-center",children:r.jsx(Rx,{className:"w-4 h-4 text-secondary-600 dark:text-secondary-400"})}),r.jsx("h3",{className:"font-semibold",children:"Professional Info"})]}),r.jsx(me,{label:"Profession / Occupation",value:u.profession,onChange:N=>m({...u,profession:N.target.value}),placeholder:"e.g. Software Engineer, Student",required:!0})]}),r.jsx(M,{type:"submit",variant:"primary",className:"w-full h-12",children:"Next Step"})]},"step1"):r.jsxs(T.div,{custom:2,variants:k,initial:"enter",animate:"center",exit:"exit",transition:{duration:.3},className:"space-y-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-accent-100 dark:bg-accent-900/30 flex items-center justify-center",children:r.jsx(ea,{className:"w-4 h-4 text-accent-600 dark:text-accent-400"})}),r.jsx("h3",{className:"font-semibold",children:"Bank Details"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Hr,{label:"Bank Name",value:u.bankName,onChange:N=>m({...u,bankName:N}),options:Rb.map(N=>({value:N,label:N}))}),u.bankName==="Other"&&r.jsx(me,{label:"Enter Bank Name",value:u.customBankName,onChange:N=>m({...u,customBankName:N.target.value}),placeholder:"Bank Name",required:!0}),r.jsxs("div",{className:"space-y-2",children:[r.jsx(me,{label:"Account Number",value:u.accountNumber,onChange:N=>m({...u,accountNumber:N.target.value}),placeholder:"0123456789",required:!0}),r.jsxs("label",{className:"flex items-center gap-2 px-1 cursor-pointer group",children:[r.jsx("input",{type:"checkbox",checked:u.sameAsPhone,onChange:N=>x(N.target.checked),className:"w-4 h-4 rounded border-primary-500 cursor-pointer"}),r.jsx("span",{className:"text-xs text-light-muted dark:text-dark-muted group-hover:text-primary-500 transition-colors",children:"Use my phone number as account number"})]})]}),r.jsx(me,{label:"Account Name",value:u.accountName,onChange:N=>m({...u,accountName:N.target.value}),placeholder:"Account Holder Name",required:!0})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx(M,{type:"button",variant:"ghost",className:"flex-1 h-12",onClick:p,children:"Back"}),r.jsx(M,{type:"submit",variant:"primary",className:"flex-[2] h-12",isLoading:d,children:i?"Complete Registration":"Save Details"})]})]},"step2")})})})]}),r.jsx(ht,{isOpen:g,onClose:()=>v(!1),title:i?"Welcome to the Family!":"Profile Updated!",children:r.jsx("div",{className:"text-center p-2 sm:p-4",children:i?r.jsxs("div",{className:"space-y-6",children:[r.jsx(T.div,{initial:{scale:0,rotate:-20},animate:{scale:1,rotate:0},className:"w-20 h-20 mx-auto rounded-3xl bg-gradient-to-br from-primary-500 to-primary-700 flex items-center justify-center shadow-lg shadow-primary-500/30",children:r.jsx(nt,{className:"w-10 h-10 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Registration Complete!"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted mb-6 leading-relaxed",children:"Your details have been saved. Your journey with Baptizo Community begins now."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"relative group overflow-hidden bg-emerald-50/50 dark:bg-emerald-900/10 p-5 rounded-2xl border border-emerald-100 dark:border-emerald-900/30 text-left",children:[r.jsxs("h3",{className:"font-bold text-emerald-800 dark:text-emerald-400 mb-1 flex items-center gap-2",children:[r.jsxs("span",{className:"relative flex h-2 w-2",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-emerald-500"})]}),"Join our WhatsApp Group"]}),r.jsx("p",{className:"text-xs text-emerald-700/80 dark:text-emerald-300/70",children:"Connect with other members and get real-time updates."})]}),r.jsxs(M,{onClick:w,className:"w-full h-14 text-lg font-semibold bg-[#25D366] hover:bg-[#128C7E] text-white rounded-2xl shadow-xl shadow-green-500/20 flex items-center justify-center gap-3",children:[r.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg",alt:"",className:"w-6 h-6 contrast-125"}),"Join WhatsApp Now"]}),r.jsx("button",{onClick:()=>a("/feed"),className:"w-full py-2 text-sm font-medium text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors",children:"Skip & Go to Feed"})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(nt,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-6",children:"Thank you for updating your member details."}),r.jsx(M,{variant:"primary",className:"w-full",onClick:()=>{var _,A;v(!1);const N=((A=(_=n.state)==null?void 0:_.from)==null?void 0:A.pathname)||"/feed";a(N,{replace:!0})},children:"Close"})]})})})]})})}function LO(){var b,w,k;const{postId:e}=la(),t=de(),{user:s}=Z(),n=U(S.posts.getPost,e?{postId:e}:"skip"),a=V(S.responses.submitResponse),[i,o]=f.useState(""),[l,d]=f.useState(!1),[c,u]=f.useState(""),[m,h]=f.useState(0);f.useEffect(()=>{const j=i.trim().split(/\s+/).filter(N=>N.length>0);h(j.length)},[i]);const x=async j=>{if(j.preventDefault(),!(!s||!i.trim()||!e)){d(!0),u("");try{await a({userId:s._id,postId:e,content:i.trim()}),t(-1)}catch(N){console.error("Failed to submit response:",N),N.message.includes("Vacancy Filled")?u("Sorry, the response slots for this post are full."):N.message.includes("already responded")?u("You have already responded to this post."):u("Failed to submit response. Please try again.")}finally{d(!1)}}},[g,v]=f.useState(!1),y=()=>{i.trim()?v(!0):t(-1)},p=()=>{v(!1),t(-1)};return n?r.jsxs("div",{className:"min-h-screen bg-[#f8f9fa] dark:bg-[#0a0a0a] pb-20",children:[r.jsx("header",{className:"sticky top-0 z-50 bg-white/80 dark:bg-black/80 backdrop-blur-md border-b border-gray-200 dark:border-gray-800",children:r.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:y,className:"p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/10 text-gray-500 hover:text-red-500 transition-colors",title:"Cancel & Exit",children:r.jsx(Ae,{className:"w-5 h-5"})}),r.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 hidden sm:block",children:"Official Response"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"px-3 py-1 bg-gray-100 dark:bg-gray-800 rounded-full text-xs font-medium text-gray-500",children:[m," words"]}),r.jsxs(M,{variant:"primary",size:"sm",disabled:!i.trim()||l,onClick:x,className:"flex items-center gap-2",children:[r.jsx(ta,{className:"w-4 h-4"}),l?"Submitting...":"Submit"]})]})]})}),r.jsx("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:r.jsxs("div",{className:"grid gap-8 md:grid-cols-[1fr,1.5fr]",children:[r.jsx(T.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"space-y-4",children:r.jsxs("div",{className:"bg-white dark:bg-[#151515] p-6 rounded-2xl border border-gray-200 dark:border-gray-800 shadow-sm sticky top-24",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[r.jsx(Yt,{className:"w-4 h-4"}),"Responding To"]}),r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.jsxs("p",{className:"text-lg font-medium leading-relaxed text-gray-800 dark:text-gray-200",children:['"',n.content,'"']})}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-gray-800 flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-primary-600 dark:text-primary-400 font-bold text-xs",children:(w=(b=n.author)==null?void 0:b.name)==null?void 0:w.charAt(0)}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:(k=n.author)==null?void 0:k.name}),r.jsx("p",{className:"text-xs text-gray-500",children:"Admin Post"})]})]})]})}),r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"relative",children:[c&&r.jsxs("div",{className:"mb-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 p-4 rounded-xl flex items-center gap-2 text-sm border border-red-100 dark:border-red-900/30",children:[r.jsx(Tr,{className:"w-4 h-4 flex-shrink-0"}),c]}),r.jsxs("div",{className:"bg-[#fff9e6] dark:bg-[#1a1a1a] min-h-[60vh] rounded-xl shadow-lg border border-gray-200 dark:border-gray-700 relative overflow-hidden",style:{backgroundImage:"linear-gradient(#e5e7eb 1px, transparent 1px)",backgroundSize:"100% 2rem",backgroundPosition:"0 1.5rem"},children:[r.jsx("div",{className:"absolute left-12 top-0 bottom-0 w-px bg-red-300/50 dark:bg-red-500/20 h-full pointer-events-none"}),r.jsx("div",{className:"p-0",children:r.jsx("textarea",{className:"w-full h-[60vh] bg-transparent border-0 focus:ring-0 resize-none p-6 pl-16 text-lg leading-[2rem] text-gray-800 dark:text-gray-200 placeholder:text-gray-400/50 dark:placeholder:text-gray-600",placeholder:"Start writing your thoughts here...",value:i,onChange:j=>o(j.target.value),autoFocus:!0,style:{lineHeight:"2rem"}})})]}),r.jsx("div",{className:"mt-4 flex justify-between items-center text-sm text-gray-500",children:r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(VC,{className:"w-3 h-3"}),"Express yourself freely"]})})]})]})}),r.jsx(ht,{isOpen:g,onClose:()=>v(!1),title:"Discard Changes?",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"You have unsaved text. Are you sure you want to discard your response?"}),r.jsxs("div",{className:"flex justify-end gap-3",children:[r.jsx(M,{variant:"ghost",onClick:()=>v(!1),children:"Keep Editing"}),r.jsx(M,{variant:"danger",onClick:p,children:"Discard & Leave"})]})]})})]}):r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})})}const Lb=`
  .premium-scrollbar::-webkit-scrollbar {
    width: 4px;
  }
  .premium-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 10px;
  }
  .premium-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.2);
  }
  .dark .premium-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.05);
  }
  .dark .premium-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.1);
  }
`;function DO({isOpen:e,onClose:t}){const s=jt(),n=de(),{user:a}=Z(),{theme:i,toggleTheme:o}=vc(),[l,d]=f.useState(["Board Hub"]),c=f.useRef({}),u=f.useRef(null);f.useEffect(()=>{s.pathname.startsWith("/board")&&d(b=>b.includes("Board Hub")?b:[...b,"Board Hub"])},[s.pathname]);const m=p=>{const b=!l.includes(p);d(w=>w.includes(p)?w.filter(k=>k!==p):[...w,p]),setTimeout(b?()=>{const w=c.current[p],k=u.current;if(w&&k){const N=w.offsetTop+w.offsetHeight,A=k.scrollTop+k.clientHeight;N>A-16&&k.scrollTo({top:N-k.clientHeight+24,behavior:"smooth"})}}:()=>{const w=c.current[p],k=u.current;if(w&&k){const j=w.offsetTop;k.scrollTop>j-8&&k.scrollTo({top:Math.max(0,j-8),behavior:"smooth"})}},50)},h=U(S.stats.getAdminBadgeCounts,{adminId:a==null?void 0:a._id}),x=p=>{if(!h)return 0;const b=(a==null?void 0:a.role)==="super_admin"||(a==null?void 0:a.role)==="admin",w=(a==null?void 0:a.isFinancialManager)===!0;return p==="Questions"?b?h.questions:0:p==="Messages"?b?h.contacts:0:p==="Banking System"?b?h.withdrawals:0:p==="Finance Hub"&&(b||w)?h.pendingPaymentSubmissions:0},v=[{path:"/admin",label:"Dashboard",icon:rn,roles:["admin","super_admin"]},{path:"/admin/master-pool",label:"Master Pool",icon:Tw,roles:["admin","super_admin"]},{path:"/admin/announcements",label:"Announcements",icon:Io,roles:["admin","super_admin"]},{label:"Banking System",icon:ea,roles:["admin","super_admin"],children:[{path:"/admin/banking?tab=overview",label:"Overview",icon:rn},{path:"/admin/banking?tab=withdrawals",label:"Withdrawals",icon:_r},{path:"/admin/banking?tab=wallets",label:"User Wallets",icon:ke},{path:"/admin/banking?tab=rewards",label:"Reward Activity",icon:ve}]},{path:"/admin/polls",label:"Weekly Polls",icon:Iw,roles:["admin","super_admin"]},{path:"/admin/diamond-challenge",label:"Challenge Manager",icon:Nr,roles:["admin","super_admin"]},{path:"/admin/questions",label:"Questions",icon:Md,roles:["admin","super_admin"]},{path:"/admin/user-tags",label:"User Tags",icon:QC,roles:["admin","super_admin"]},{path:"/admin/contacts",label:"Messages",icon:zr,roles:["admin","super_admin"]},{path:"/admin/roles",label:"User Roles",icon:We,roles:["admin","super_admin"]},{path:"/admin/settings",label:"Settings",icon:Mw,roles:["admin","super_admin"]},{label:"Board Hub",icon:We,roles:["board_member","admin","super_admin"],children:[{path:"/board",label:"Dashboard",icon:rn},{path:"/board/attendance",label:"Attendance",icon:Dd},{path:"/board/finance",label:"Finance Hub",icon:_r},{path:"/board/contributions",label:"My Contributions",icon:ea}]}].filter(p=>p.roles?p.roles.includes(a==null?void 0:a.role):!0),y=r.jsxs("div",{className:"flex flex-col h-full bg-slate-50 dark:bg-[#0d0d0f] border-r border-light-border dark:border-dark-border py-6 px-4",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-10 px-2 flex-shrink-0",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Logo",className:"w-10 h-10 object-contain"}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-gradient font-display",children:(a==null?void 0:a.role)==="board_member"?"Board Hub":"Admin"}),r.jsx("p",{className:"text-[10px] font-bold text-light-muted dark:text-dark-muted uppercase tracking-widest",children:"Baptizo Community"})]}),r.jsx("button",{onClick:t,className:"lg:hidden ml-auto p-2 text-light-muted",children:r.jsx(Ae,{className:"w-6 h-6"})})]}),r.jsx("nav",{ref:u,className:"flex-1 space-y-1 overflow-y-auto premium-scrollbar pr-1 min-h-0",children:v.map(p=>{const b=p.icon,w=p.children&&p.children.length>0,k=l.includes(p.label),j=w&&p.children.some(_=>s.pathname===_.path),N=s.pathname===p.path||j;return w?r.jsxs("div",{className:"space-y-1",ref:_=>{c.current[p.label]=_},children:[r.jsxs("button",{onClick:()=>m(p.label),className:`
                                        w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                        ${j?"bg-primary-500/10 text-primary-500 font-bold border border-primary-500/20":"text-light-text dark:text-dark-text hover:bg-light-card/80 dark:hover:bg-dark-card/80"}
                                    `,children:[r.jsx(b,{className:`w-5 h-5 transition-transform duration-300 ${j?"scale-110":"group-hover:scale-110"}`}),r.jsx("span",{className:"text-sm font-medium",children:p.label}),r.jsx(Ke,{className:`ml-auto w-4 h-4 transition-transform duration-300 ${k?"rotate-180":""}`})]}),r.jsx(re,{initial:!1,children:k&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.25,ease:"easeInOut"},className:"overflow-hidden pl-4 space-y-1",children:p.children.map(_=>{const A=_.icon,L=s.pathname===_.path;return r.jsxs(te,{to:_.path,onClick:()=>{window.innerWidth<1024&&t()},className:`
                                                            flex items-center gap-3 px-4 py-2.5 rounded-xl transition-all duration-200 group
                                                            ${L?"text-primary-500 font-bold bg-primary-500/5":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text hover:bg-light-card/50 dark:hover:bg-dark-card/50"}
                                                        `,children:[r.jsx(A,{className:`w-4 h-4 transition-transform ${L?"scale-110":"group-hover:scale-110"}`}),r.jsx("span",{className:"text-xs font-medium",children:_.label}),x(_.label)>0&&r.jsx("span",{className:`
                                                                ml-auto px-1.5 py-0.5 rounded-full text-[8px] font-bold
                                                                ${L?"bg-primary-500 text-white":"bg-primary-500/20 text-primary-500"}
                                                            `,children:x(_.label)}),L&&!x(_.label)&&r.jsx(T.div,{layoutId:"activeIndicator",className:"ml-auto w-1 h-1 rounded-full bg-primary-500 shadow-[0_0_8px_rgba(59,130,246,0.5)]"})]},_.path)})})})]},p.label):r.jsxs(te,{to:p.path,onClick:()=>{window.innerWidth<1024&&t()},className:`
                                flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-200 group
                                ${N?"bg-primary-500 text-white shadow-lg shadow-primary-500/30 font-bold":"text-light-text dark:text-dark-text hover:bg-light-card/80 dark:hover:bg-dark-card/80"}
                            `,children:[r.jsx(b,{className:`w-5 h-5 transition-transform duration-300 ${N?"scale-110":"group-hover:scale-110"}`}),r.jsx("span",{className:"text-sm font-medium",children:p.label}),x(p.label)>0&&r.jsx("span",{className:`
                                    ml-auto px-2 py-0.5 rounded-full text-[10px] font-bold
                                    ${N?"bg-white text-primary-500":"bg-primary-500 text-white shadow-sm shadow-primary-500/20"}
                                `,children:x(p.label)}),N&&!x(p.label)&&r.jsx(T.div,{layoutId:"activeIndicatorMain",className:"ml-auto w-1.5 h-1.5 rounded-full bg-white shadow-[0_0_8px_white]"})]},p.path)})}),r.jsxs("div",{className:"mt-4 flex-shrink-0 space-y-4 px-2",children:[r.jsx("div",{className:"p-4 rounded-xl glass border border-light-border/50 dark:border-dark-border/50",children:r.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center text-white font-bold overflow-hidden",children:a!=null&&a.avatarUrl?r.jsx("img",{src:a.avatarUrl,alt:a.name,className:"w-full h-full object-cover"}):a==null?void 0:a.name[0]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-bold truncate",children:a==null?void 0:a.name}),r.jsx("p",{className:"text-[10px] text-primary-500 font-bold uppercase tracking-wider",children:a==null?void 0:a.role.replace("_"," ")})]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 lg:hidden",children:[r.jsxs("button",{onClick:()=>{n("/search"),t()},className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm font-bold text-light-text dark:text-dark-text",children:[r.jsx(mt,{className:"w-4 h-4"}),"Search"]}),r.jsx("button",{onClick:o,className:"flex items-center justify-center gap-2 py-3 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm font-bold text-light-text dark:text-dark-text",children:i==="dark"?r.jsxs(r.Fragment,{children:[r.jsx(Nc,{className:"w-4 h-4 text-yellow-500"}),"Light"]}):r.jsxs(r.Fragment,{children:[r.jsx(wc,{className:"w-4 h-4 text-slate-700"}),"Dark"]})})]}),r.jsxs(te,{to:"/feed",className:"flex items-center justify-center gap-2 w-full py-3 rounded-xl border border-light-border dark:border-dark-border hover:bg-light-card dark:hover:bg-dark-card transition-all text-sm font-bold text-light-muted dark:text-dark-muted hover:text-primary-500",children:[r.jsx(Zn,{className:"w-4 h-4"}),"Back to Feed"]})]})]});return r.jsxs(r.Fragment,{children:[r.jsxs("aside",{className:"hidden lg:block fixed inset-y-0 left-0 w-64 z-50",children:[r.jsx("style",{children:Lb}),y]}),r.jsx(re,{children:e&&r.jsxs(r.Fragment,{children:[r.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t,className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60] lg:hidden"}),r.jsxs(T.aside,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed inset-y-0 left-0 w-64 z-[70] lg:hidden",children:[r.jsx("style",{children:Lb}),y]})]})})]})}function Db({children:e}){var c;const{user:t,isLoading:s}=Z(),{theme:n,toggleTheme:a}=vc(),i=de(),[o,l]=f.useState(!1),d=jt();return f.useEffect(()=>{l(!1)},[d.pathname]),s?r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}):!t||t.role!=="admin"&&t.role!=="super_admin"&&t.role!=="board_member"?r.jsx(Ee,{to:"/feed",replace:!0}):r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg transition-colors duration-300",children:[r.jsx(DO,{isOpen:o,onClose:()=>l(!1)}),r.jsxs("div",{className:"lg:ml-64 flex flex-col min-h-screen",children:[r.jsx("header",{className:"sticky top-0 z-40 bg-white/80 dark:bg-dark-bg/80 backdrop-blur-md border-b border-light-border dark:border-dark-border px-4 md:px-8 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>l(!0),className:"lg:hidden p-2 hover:bg-light-card dark:hover:bg-dark-card rounded-lg",children:r.jsx(OC,{className:"w-6 h-6"})}),r.jsx("div",{className:"hidden md:block",children:r.jsx("h2",{className:"text-xl font-bold text-light-text dark:text-dark-text capitalize",children:((c=d.pathname.split("/").pop())==null?void 0:c.replace("-"," "))||"Dashboard"})})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[r.jsx("button",{onClick:()=>i("/search"),className:"hidden md:flex p-2.5 text-light-muted dark:text-dark-muted hover:bg-light-card dark:hover:bg-dark-card rounded-xl transition-all",children:r.jsx(mt,{className:"w-5 h-5"})}),r.jsx("button",{onClick:a,className:"hidden md:flex p-2.5 text-light-muted dark:text-dark-muted hover:bg-light-card dark:hover:bg-dark-card rounded-xl transition-all",children:n==="dark"?r.jsx(Nc,{className:"w-5 h-5 text-yellow-500"}):r.jsx(wc,{className:"w-5 h-5 text-slate-700"})}),r.jsxs("button",{onClick:()=>i("/notifications"),className:"p-2.5 text-light-muted dark:text-dark-muted hover:bg-light-card dark:hover:bg-dark-card rounded-xl transition-all relative",children:[r.jsx(Ji,{className:"w-5 h-5"}),r.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-primary-500 rounded-full border-2 border-white dark:border-dark-bg"})]}),r.jsxs("div",{className:"hidden md:flex ml-2 pl-4 border-l border-light-border dark:border-dark-border items-center gap-3",children:[r.jsxs("div",{className:"hidden sm:block text-right",children:[r.jsx("p",{className:"text-xs font-bold truncate",children:t==null?void 0:t.name}),r.jsx("p",{className:"text-[10px] text-light-muted uppercase font-medium",children:t==null?void 0:t.role})]}),r.jsx("div",{className:"w-9 h-9 rounded-xl bg-primary-500/10 dark:bg-primary-500/20 flex items-center justify-center text-primary-500 font-bold border border-primary-500/20 overflow-hidden",children:t!=null&&t.avatarUrl?r.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full object-cover rounded-xl"}):t==null?void 0:t.name[0]})]})]})]})}),r.jsx("main",{className:"flex-1 p-4 md:p-8",children:r.jsx(re,{mode:"wait",children:r.jsx(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:e},d.pathname)})})]})]})}const OO=["Access Bank","Citibank","Ecobank Nigeria","Fairmoney","Fidelity Bank","First Bank of Nigeria","First City Monument Bank (FCMB)","Globus Bank","Guaranty Trust Bank (GTBank)","Heritage Bank","Keystone Bank","Kuda Bank","Moniepoint","OPay","PalmPay","Polaris Bank","Providus Bank","Stanbic IBTC Bank","Standard Chartered","Sterling Bank","SunTrust Bank","Union Bank of Nigeria","United Bank for Africa (UBA)","Unity Bank","Wema Bank","Zenith Bank"].sort();function FO({poolType:e,amount:t,talents:s,nairaAmount:n,exchangeRate:a,onSubmit:i,onCancel:o}){const[l,d]=f.useState(1),[c,u]=f.useState(""),[m,h]=f.useState(""),[x,g]=f.useState(""),[v,y]=f.useState(""),[p,b]=f.useState(!1),[w,k]=f.useState(""),j=f.useMemo(()=>OO.filter(P=>P.toLowerCase().includes(w.toLowerCase())),[w]),N=()=>{if(l===2){if(!c){y("Please select a bank");return}if(!m||m.length!==10){y("Account number must be exactly 10 digits");return}if(!x||x.trim().length<3){y("Please enter a valid account name");return}}y(""),d(l+1)},_=()=>{d(l-1),y("")},A=()=>{i({bankName:c,accountNumber:m,accountName:x.trim()})},L={diamond:"",gold:"",silver:"",bronze:"",big_pull:""},C={diamond:"Diamond",gold:"Gold",silver:"Silver",bronze:"Bronze",big_pull:"Big Pull"};return r.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-light-bg dark:bg-dark-bg rounded-2xl shadow-2xl max-w-md w-full relative overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"p-4 md:p-6 pb-2 md:pb-4 border-b border-light-border dark:border-dark-border flex justify-between items-center bg-light-bg dark:bg-dark-bg sticky top-0 z-10",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsxs("h2",{className:"text-lg md:text-xl font-bold text-light-text dark:text-dark-text flex items-center gap-2 truncate",children:[L[e]," Withdraw ",C[e]]}),r.jsx("div",{className:"flex gap-1 mt-2",children:[1,2,3].map(P=>r.jsx("div",{className:`h-1 w-6 md:w-8 rounded-full transition-colors duration-300 ${l>=P?"bg-primary-500":"bg-light-border dark:bg-dark-border"}`},P))})]}),r.jsx("button",{onClick:o,className:"p-1.5 md:p-2 rounded-lg hover:bg-light-card dark:hover:bg-dark-card transition-colors flex-shrink-0",children:r.jsx(Ae,{className:"w-4 h-4 md:w-5 md:h-5 text-light-muted dark:text-dark-muted"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[r.jsxs(re,{mode:"wait",children:[l===1&&r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-dark-text",children:"Review Earnings"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:["You are about to withdraw your earnings from the ",C[e]," pool."]})]}),r.jsx("div",{className:"p-4 md:p-6 rounded-2xl bg-gradient-to-br from-primary-500/10 to-secondary-500/10 border border-primary-500/20",children:r.jsxs("div",{className:"flex flex-col items-center gap-4 md:gap-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-2xl md:text-4xl font-display font-bold text-light-text dark:text-dark-text mb-1",children:t.toFixed(2)}),r.jsx("p",{className:"text-[10px] md:text-sm font-medium text-light-muted dark:text-dark-muted uppercase tracking-wider",children:"Rubies"})]}),r.jsx("div",{className:"w-full h-px bg-primary-500/20"}),r.jsxs("div",{className:"flex justify-between w-full gap-2 md:gap-4",children:[r.jsxs("div",{className:"text-center flex-1",children:[r.jsx("p",{className:"text-lg md:text-xl font-bold text-amber-500 mb-0.5 md:mb-1",children:s.toFixed(2)}),r.jsx("p",{className:"text-[10px] md:text-xs font-medium text-light-muted dark:text-dark-muted uppercase tracking-wider",children:"Talents"})]}),r.jsx("div",{className:"w-px h-8 md:h-10 bg-primary-500/20"}),r.jsxs("div",{className:"text-center flex-1",children:[r.jsxs("p",{className:"text-lg md:text-xl font-bold text-green-500 mb-0.5 md:mb-1",children:["",n.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]}),r.jsx("p",{className:"text-[10px] md:text-xs font-medium text-light-muted dark:text-dark-muted uppercase tracking-wider",children:"Naira"})]})]})]})}),r.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-xl text-xs text-center text-blue-600 dark:text-blue-400 font-medium",children:["Current Exchange Rate: 1 Ruby = ",a]})]},"step1"),l===2&&r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-dark-text",children:"Bank Details"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Enter your bank information to receive payments."})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-light-muted dark:text-dark-muted ml-1",children:"Bank Name"}),r.jsxs("button",{onClick:()=>b(!0),className:"w-full px-3 md:px-4 py-2.5 md:py-3.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-left flex items-center justify-between hover:border-primary-500 transition-colors group",children:[r.jsx("span",{className:`text-sm md:text-base ${c?"text-light-text dark:text-dark-text":"text-light-muted/70 dark:text-dark-muted/70"}`,children:c||"Select Bank"}),r.jsx(_o,{className:"w-4 h-4 text-light-muted group-hover:text-primary-500 transition-colors"})]})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-light-muted dark:text-dark-muted ml-1",children:"Account Number"}),r.jsx("input",{type:"text",value:m,onChange:P=>h(P.target.value.replace(/\D/g,"").slice(0,10)),className:"w-full px-3 md:px-4 py-2.5 md:py-3.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm md:text-base text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none font-mono tracking-wider transition-shadow placeholder:text-light-muted/50 dark:placeholder:text-dark-muted/50",placeholder:"0123456789"}),r.jsxs("p",{className:"text-[10px] text-right text-light-muted dark:text-dark-muted pr-1",children:[m.length,"/10 digits"]})]}),r.jsxs("div",{className:"space-y-1.5",children:[r.jsx("label",{className:"text-[10px] md:text-xs font-semibold uppercase tracking-wider text-light-muted dark:text-dark-muted ml-1",children:"Account Name"}),r.jsx("input",{type:"text",value:x,onChange:P=>g(P.target.value),className:"w-full px-3 md:px-4 py-2.5 md:py-3.5 rounded-xl bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border text-sm md:text-base text-light-text dark:text-dark-text focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-shadow placeholder:text-light-muted/50 dark:placeholder:text-dark-muted/50",placeholder:"John Doe"})]}),r.jsx(re,{children:v&&r.jsxs(T.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-sm text-red-600 dark:text-red-400 flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),v]})})]})]},"step2"),l===3&&r.jsxs(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},className:"space-y-6",children:[r.jsxs("div",{className:"text-center space-y-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-light-text dark:text-dark-text",children:"Confirm Pay Out"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Please review your details before confirming."})]}),r.jsxs("div",{className:"bg-light-card dark:bg-dark-card rounded-2xl p-5 border border-light-border dark:border-dark-border space-y-4 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center pb-4 border-b border-light-border/50 dark:border-dark-border/50",children:[r.jsx("span",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Total Amount"}),r.jsxs("span",{className:"font-bold text-xl text-green-500",children:["",n.toLocaleString()]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Bank Name"}),r.jsx("span",{className:"font-medium text-light-text dark:text-dark-text text-right",children:c})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Account Number"}),r.jsx("span",{className:"font-mono text-light-text dark:text-dark-text",children:m})]}),r.jsxs("div",{className:"flex justify-between items-center text-sm",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Account Name"}),r.jsx("span",{className:"font-medium text-light-text dark:text-dark-text text-right",children:x})]})]})]}),r.jsxs("div",{className:"flex gap-4 p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:[r.jsx(et,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),r.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400/90 leading-relaxed",children:"Your withdrawal request will be reviewed by an admin. Once approved, the Naira amount will be transferred to your account within 1-3 business days."})]})]},"step3")]}),r.jsx(re,{children:p&&r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-light-bg dark:bg-dark-bg z-20 flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-light-border dark:border-dark-border flex gap-3 items-center bg-light-card dark:bg-dark-card sticky top-0",children:[r.jsx("button",{onClick:()=>b(!1),className:"p-2 -ml-2 rounded-lg hover:bg-light-border dark:hover:bg-dark-border transition-colors",children:r.jsx(Zn,{className:"w-5 h-5 text-light-text dark:text-dark-text"})}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted"}),r.jsx("input",{type:"text",placeholder:"Search banks...",autoFocus:!0,value:w,onChange:P=>k(P.target.value),className:"w-full pl-9 pr-4 py-2 rounded-lg bg-light-bg dark:bg-dark-bg border border-light-border dark:border-dark-border text-sm outline-none focus:ring-2 focus:ring-primary-500"})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-2",children:r.jsx("div",{className:"space-y-1",children:j.length>0?j.map(P=>r.jsxs("button",{onClick:()=>{u(P),b(!1),k("")},className:`w-full text-left px-4 py-3 rounded-xl flex items-center justify-between transition-colors ${c===P?"bg-primary-500/10 text-primary-500":"hover:bg-light-card dark:hover:bg-dark-card text-light-text dark:text-dark-text"}`,children:[r.jsxs("span",{className:"flex items-center gap-3",children:[r.jsx(PC,{className:`w-4 h-4 ${c===P?"text-primary-500":"text-light-muted"}`}),P]}),c===P&&r.jsx(et,{className:"w-4 h-4 text-primary-500"})]},P)):r.jsx("div",{className:"text-center py-8 text-light-muted dark:text-dark-muted",children:r.jsxs("p",{children:['No banks found matching "',w,'"']})})})})]})})]}),r.jsx("div",{className:"p-4 md:p-6 pt-2 bg-light-bg dark:bg-dark-bg sticky bottom-0 z-10 border-t border-light-border/50 dark:border-dark-border/50",children:r.jsxs("div",{className:"flex gap-3 md:gap-4",children:[l>1&&r.jsxs(M,{variant:"outline",onClick:_,className:"flex-1 py-4 md:py-6 rounded-xl hover:bg-light-card dark:hover:bg-dark-card border-light-border dark:border-dark-border text-sm",children:[r.jsx(Zn,{className:"w-4 h-4 mr-1"})," Back"]}),r.jsx(M,{variant:"primary",onClick:l===3?A:N,className:`flex-[2] py-4 md:py-6 rounded-xl bg-gradient-to-r from-primary-500 to-secondary-500 shadow-lg shadow-primary-500/20 hover:shadow-primary-500/30 transition-all text-sm ${l===1?"w-full":""}`,children:l===3?"Confirm & Withdraw":r.jsxs("span",{className:"flex items-center",children:["Next Step ",r.jsx(_o,{className:"w-4 h-4 ml-1"})]})})]})})]})})}const UO=[{icon:"",label:"Reaction on Admin Post",reward:"+0.02 Rubies",cap:"0.5/day"},{icon:"",label:"Comment on Admin Post",reward:"+0.05 Rubies",cap:"1.0/day"},{icon:"",label:"Mini Game / Weekly Poll",reward:"+0.1 Rubies",cap:"0.4/day"},{icon:"",label:"Quiz Participation",reward:"+0.5 Rubies",cap:"per quiz"},{icon:"",label:"Quiz Winner",reward:"+5.05 Rubies",cap:"5 withdrawable now!"}];function BO(){const{user:e}=Z(),t=de(),[s,n]=f.useState(!1),[a,i]=f.useState(!1),[o,l]=f.useState(null),[d,c]=f.useState(null),u=U(S.wallets.getWallet,e!=null&&e._id?{userId:e._id}:"skip"),m=U(S.wallets.getWithdrawals,e!=null&&e._id?{userId:e._id}:"skip"),h=U(S.wallets.getUserBadges,e!=null&&e._id?{userId:e._id}:"skip"),x=V(S.wallets.initializeWallet),g=V(S.wallets.requestWithdrawal);if(f.useEffect(()=>{e&&u===null&&x({userId:e._id})},[e,u,x]),!e)return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-light-bg dark:bg-dark-bg",children:r.jsx(D,{className:"max-w-md w-full mx-4",children:r.jsxs(O,{className:"pt-6",children:[r.jsx("p",{className:"text-center text-light-muted dark:text-dark-muted",children:"Please log in to view your banking details"}),r.jsx(M,{onClick:()=>t("/login"),className:"w-full mt-4",children:"Log In"})]})})});if(u===void 0)return r.jsx(lD,{});const v=(u==null?void 0:u.totalRubiesDisplay)??0,y=(u==null?void 0:u.totalTalentsDisplay)??0,p=(u==null?void 0:u.nairaEquivalent)??0,b=(u==null?void 0:u.activeRate)??200,w=(u==null?void 0:u.canWithdrawNormal)??!1,k=(u==null?void 0:u.canWithdrawWinner)??!1,j=(u==null?void 0:u.withdrawableDisplay)??0,N=(u==null?void 0:u.minWithdrawalRubies)??24,_=Math.min(v/N*100,100),A=async P=>{if(!(!d||!e))try{const R=await g({userId:e._id,mode:d,bankDetails:P});alert(` Withdrawal request submitted!
${R.amountRubies} Rubies  ${R.nairaAmount.toLocaleString()}
We'll process it shortly.`),c(null)}catch(R){alert(R.message||"Withdrawal failed. Please try again.")}},L=d==="winner"?j:N,C=L*b;return r.jsxs("div",{className:"min-h-screen bg-light-bg dark:bg-dark-bg",children:[r.jsx("div",{className:"gradient-primary text-white py-6 md:py-8 px-4",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsxs("button",{onClick:()=>t("/feed"),className:"flex items-center gap-2 text-white/80 hover:text-white mb-4 transition-colors text-sm",children:[r.jsx(ur,{className:"w-4 h-4"})," Back to Feed"]}),r.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-full bg-white/20 backdrop-blur-md flex items-center justify-center flex-shrink-0",children:r.jsx(Ho,{className:"w-6 h-6 md:w-8 md:h-8"})}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("h1",{className:"text-2xl md:text-4xl font-display font-bold truncate",children:"Banking"}),r.jsx("p",{className:"text-white/80 text-xs md:text-base truncate",children:"Manage your Rubies & withdrawals"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass p-4 md:p-6 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(Lx,{className:"w-4 h-4 text-amber-300"}),r.jsx("p",{className:"text-xs md:text-sm text-white/60",children:"Total Rubies"})]}),r.jsx("p",{className:"text-3xl md:text-4xl font-display font-bold",children:v.toFixed(2)}),r.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:["= ",y.toFixed(4)," Talents"]})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass p-4 md:p-6 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(dn,{className:"w-4 h-4 text-green-300"}),r.jsx("p",{className:"text-xs md:text-sm text-white/60",children:"Naira Value"})]}),r.jsxs("p",{className:"text-3xl md:text-4xl font-display font-bold",children:["",p.toLocaleString()]}),r.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:["@ ",b," per Ruby (live rate)"]})]}),r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass p-4 md:p-6 rounded-2xl",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx(ve,{className:"w-4 h-4 text-amber-300"}),r.jsx("p",{className:"text-xs md:text-sm text-white/60",children:"Talents"})]}),r.jsx("p",{className:"text-3xl md:text-4xl font-display font-bold",children:y.toFixed(4)}),r.jsxs("p",{className:"text-[10px] text-white/40 mt-1",children:["1 Talent = 100 Rubies = ",(100*b).toLocaleString()]})]})]})]})}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 md:px-8 py-6 md:py-8 space-y-6",children:[r.jsx(re,{children:k&&r.jsx(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"p-5 bg-gradient-to-r from-amber-500/20 to-yellow-500/20 border-2 border-amber-500/60 rounded-2xl",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-500/20 flex items-center justify-center flex-shrink-0 text-2xl",children:""}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-bold text-lg text-light-text dark:text-dark-text",children:"Winner Window Open!"}),r.jsxs("p",{className:"text-sm text-light-muted dark:text-dark-muted mt-1",children:["You won the quiz and have"," ",r.jsxs("strong",{className:"text-amber-600 dark:text-amber-400",children:[j," Rubies ( ",(j*b).toLocaleString(),")"]})," ","available to withdraw right now  no 24-ruby minimum needed!"]}),r.jsxs(M,{id:"winner-withdraw-btn",onClick:()=>c("winner"),variant:"primary",className:"mt-3 bg-amber-500 hover:bg-amber-600 border-0",size:"sm",children:[r.jsx(ZC,{className:"w-4 h-4 mr-1"}),"Withdraw ",j," Rubies Now"]})]})]})},"winner-alert")}),r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:r.jsxs(D,{glass:!0,className:"overflow-hidden",children:[r.jsx("div",{className:"h-1.5 bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500"}),r.jsxs(O,{className:"p-6",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-500/20 to-secondary-500/20 flex items-center justify-center",children:w?r.jsx(Lw,{className:"w-6 h-6 text-green-500"}):r.jsx(Ye,{className:"w-6 h-6 text-light-muted dark:text-dark-muted"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-light-text dark:text-dark-text",children:"Standard Withdrawal"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:"Withdraw exactly 24 Rubies at a time"})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-xs text-light-muted dark:text-dark-muted mb-1.5",children:[r.jsxs("span",{children:[v.toFixed(2)," Rubies"]}),r.jsxs("span",{children:["Goal: ",N," Rubies"]})]}),r.jsx("div",{className:"h-3 bg-light-border dark:bg-dark-border rounded-full overflow-hidden",children:r.jsx(T.div,{initial:{width:0},animate:{width:`${_}%`},transition:{duration:1},className:"h-full bg-gradient-to-r from-primary-500 to-secondary-500 rounded-full"})}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-1.5 text-right",children:w?" Ready to withdraw!":`${(N-v).toFixed(2)} more Rubies needed`})]}),r.jsx("div",{className:"grid grid-cols-3 gap-3 mb-5",children:[{label:"Your Rubies",value:v.toFixed(2),unit:""},{label:"Withdraw Amount",value:`${N}`,unit:""},{label:"Naira You Get",value:`${(N*b).toLocaleString()}`,unit:""}].map(P=>r.jsxs("div",{className:"text-center p-3 rounded-xl bg-light-card dark:bg-dark-card",children:[r.jsx("p",{className:"text-xl mb-1",children:P.unit}),r.jsx("p",{className:"font-bold text-light-text dark:text-dark-text text-sm",children:P.value}),r.jsx("p",{className:"text-[10px] text-light-muted dark:text-dark-muted",children:P.label})]},P.label))}),r.jsx(M,{id:"normal-withdraw-btn",onClick:()=>c("normal"),disabled:!w,variant:"primary",className:"w-full",children:w?`Withdraw 24 Rubies  ${(N*b).toLocaleString()}`:`Need ${N} Rubies to Withdraw`}),!w&&r.jsx("p",{className:"text-xs text-center text-light-muted dark:text-dark-muted mt-2",children:"Keep earning through quizzes, comments, reactions & mini-games!"})]})]})}),r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsxs("button",{onClick:()=>i(!a),className:"w-full flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(GC,{className:"w-5 h-5 text-primary-500"}),r.jsx(ge,{children:"How to Earn Rubies"})]}),r.jsx(Ke,{className:`w-5 h-5 transition-transform ${a?"rotate-180":""}`})]})}),r.jsx(re,{children:a&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:r.jsxs(O,{children:[r.jsx("div",{className:"space-y-3",children:UO.map(P=>r.jsxs("div",{className:"overflow-hidden border border-light-border dark:border-dark-border rounded-xl",children:[r.jsxs("button",{onClick:()=>l(o===P.label?null:P.label),className:"w-full flex items-center gap-3 p-4 bg-light-card dark:bg-dark-card hover:bg-light-bg/50 dark:hover:bg-dark-bg/50 transition-colors",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-light-bg dark:bg-dark-bg flex items-center justify-center text-xl shadow-sm flex-shrink-0",children:P.icon}),r.jsxs("div",{className:"flex-1 text-left min-w-0",children:[r.jsx("p",{className:"text-sm sm:text-base font-bold text-light-text dark:text-dark-text leading-tight truncate sm:whitespace-normal",children:P.label}),r.jsxs("div",{className:"flex items-center gap-2 mt-0.5 sm:hidden",children:[r.jsx("span",{className:"text-[10px] font-bold text-green-600 dark:text-green-400 bg-green-500/10 px-1.5 py-0.5 rounded",children:P.reward}),r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted italic",children:P.cap})]})]}),r.jsxs("div",{className:"hidden sm:flex flex-col items-end gap-1 px-4 border-r border-light-border dark:border-dark-border flex-shrink-0",children:[r.jsx("span",{className:"text-xs font-bold text-green-600 dark:text-green-400 whitespace-nowrap",children:P.reward}),r.jsxs("span",{className:"text-[10px] text-light-muted dark:text-dark-muted whitespace-nowrap",children:["Cap: ",P.cap]})]}),r.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-500/10 flex items-center justify-center flex-shrink-0",children:o===P.label?r.jsx(T.span,{initial:{rotate:90},animate:{rotate:0},className:"text-primary-500 font-bold text-lg",children:""}):r.jsx(T.span,{initial:{rotate:-90},animate:{rotate:0},className:"text-primary-500 font-bold text-lg",children:"+"})})]}),r.jsx(re,{children:o===P.label&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-light-bg/30 dark:bg-dark-bg/30 border-t border-light-border dark:border-dark-border",children:r.jsxs("div",{className:"p-4 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Daily Limit"}),r.jsx("span",{className:"text-light-text dark:text-dark-text font-bold",children:P.cap})]}),r.jsxs("div",{className:"flex items-center justify-between text-xs",children:[r.jsx("span",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Reward Rate"}),r.jsx("span",{className:"text-green-600 dark:text-green-400 font-bold",children:P.reward})]}),r.jsxs("p",{className:"text-[11px] text-light-muted dark:text-dark-muted pt-2 border-t border-light-border/50 dark:border-dark-border/50 leading-relaxed italic",children:[P.label==="Reaction on Admin Post"&&"Support teaching sessions by reacting to official posts from the admin team.",P.label==="Comment on Admin Post"&&"Contribute to the lesson by dropping thoughtful comments on admin-led teaching posts.",P.label==="Mini Game / Weekly Poll"&&"Engage with the community by participating in fun mini-games and voting in weekly polls.",P.label==="Quiz Participation"&&"Test your knowledge! Get rewarded for every quiz you participate in during the sessions.",P.label==="Quiz Winner"&&"The ultimate reward for top scholars. If you win the quiz, you can withdraw your first 5 rubies immediately!"]})]})})})]},P.label))}),r.jsx("div",{className:"mt-4 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:r.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:[r.jsx("strong",{children:"Withdrawal rules:"})," Standard withdrawals require a minimum of 24 Rubies and deduct exactly 24 Rubies. Quiz winners can withdraw 5 Rubies immediately. After any withdrawal the button locks again until you reach 24 Rubies."]})})]})})})]}),r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsxs("button",{onClick:()=>n(!s),className:"w-full flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fx,{className:"w-5 h-5 text-primary-500"}),r.jsx(ge,{children:"Withdrawal History"})]}),r.jsx(Ke,{className:`w-5 h-5 transition-transform ${s?"rotate-180":""}`})]})}),r.jsx(re,{children:s&&r.jsx(T.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},children:r.jsx(O,{children:m&&m.length>0?r.jsx("div",{className:"space-y-3",children:m.map(P=>r.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-light-card dark:bg-dark-card border border-light-border dark:border-dark-border",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"font-semibold text-light-text dark:text-dark-text capitalize",children:[P.type==="big_pull"?"Standard":P.type==="diamond"?"Winner":P.type," Withdrawal"]}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:new Date(P.createdAt).toLocaleDateString()})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-bold text-light-text dark:text-dark-text",children:[P.amountRubies," Rubies"]}),r.jsxs("p",{className:"text-xs text-light-muted dark:text-dark-muted",children:["",(P.nairaAmount||0).toLocaleString()]}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P.status==="paid"?"bg-green-500/20 text-green-600":P.status==="pending"?"bg-yellow-500/20 text-yellow-600":"bg-gray-500/20 text-gray-600"}`,children:P.status})]})]},P._id))}):r.jsx("p",{className:"text-center text-light-muted dark:text-dark-muted py-8",children:"No withdrawal history yet"})})})})]}),h&&h.length>0&&r.jsxs(D,{glass:!0,children:[r.jsx(fe,{children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ve,{className:"w-5 h-5 text-amber-500"}),r.jsx(ge,{children:"Your Badges"})]})}),r.jsx(O,{children:r.jsx("div",{className:"flex flex-wrap gap-3",children:h.map(P=>r.jsxs("div",{className:"px-4 py-2 rounded-full glass border border-primary-500/30 flex items-center gap-2",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("span",{className:"text-sm font-semibold text-light-text dark:text-dark-text capitalize",children:P.type.replace(/_/g," ")})]},P._id))})})]})]}),d&&u&&r.jsx(FO,{poolType:d==="winner"?"diamond":"big_pull",amount:L,talents:L/100,nairaAmount:C,exchangeRate:b,onSubmit:A,onCancel:()=>c(null)})]})}function VO(){const e=V(S.passwordReset.requestReset),[t,s]=f.useState(""),[n,a]=f.useState(!1),[i,o]=f.useState(!1),[l,d]=f.useState(""),[c,u]=f.useState(""),m=async h=>{h.preventDefault(),d(""),a(!0);try{const x=await e({email:t.toLowerCase().trim()});if(x.success&&(o(!0),x.token)){const g=`${window.location.origin}/reset-password?token=${x.token}`;u(g),console.log("Reset Link:",g)}}catch(x){d(x.message||"Failed to request reset")}finally{a(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,children:[r.jsxs(fe,{className:"pt-8 pt-6",children:[r.jsxs(te,{to:"/login",className:"flex items-center gap-2 text-sm text-light-muted dark:text-dark-muted hover:text-primary-500 transition-colors mb-4 w-fit",children:[r.jsx(ur,{className:"w-4 h-4"}),"Back to Login"]}),r.jsx(ge,{className:"text-2xl font-bold",children:"Forgot Password?"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mt-2",children:"Enter your email and we'll send you a link to reset your password."})]}),r.jsx(O,{className:"pb-8",children:r.jsx(re,{mode:"wait",children:i?r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(et,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Check your inbox"}),r.jsxs("p",{className:"text-light-muted dark:text-dark-muted mb-6",children:["We've sent a password reset link to ",r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:t}),"."]}),c&&r.jsxs("div",{className:"p-4 bg-primary-50 dark:bg-primary-900/10 border border-primary-100 dark:border-primary-900/30 rounded-2xl mb-6",children:[r.jsx("p",{className:"text-xs font-semibold text-primary-600 dark:text-primary-400 uppercase tracking-wider mb-2",children:"Developer Preview Link (No Email Provider Configured)"}),r.jsx(te,{to:c.replace(window.location.origin,""),className:"text-sm font-medium text-primary-500 break-all underline",children:c})]}),r.jsx(M,{variant:"outline",className:"w-full",onClick:()=>o(!1),children:"Didn't receive it? Try again"})]},"success"):r.jsxs(T.form,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onSubmit:m,className:"space-y-4",children:[l&&r.jsx("div",{className:"p-3 rounded-lg bg-red-50 dark:bg-red-950 border border-red-200 dark:border-red-800 text-sm text-red-600 dark:text-red-400",children:l}),r.jsx(me,{label:"Email Address",type:"email",value:t,onChange:h=>s(h.target.value),icon:r.jsx(zr,{className:"w-5 h-5"}),placeholder:"your@email.com",required:!0,autoFocus:!0}),r.jsxs(M,{type:"submit",variant:"primary",className:"w-full h-12",isLoading:n,children:[r.jsx(ta,{className:"w-4 h-4 mr-2"}),"Send Reset Link"]})]},"form")})})]})})})}function $O(){const e=de(),[t]=Px(),s=t.get("token"),n=V(S.passwordReset.resetPassword),[a,i]=f.useState(""),[o,l]=f.useState(""),[d,c]=f.useState(!1),[u,m]=f.useState(!1),[h,x]=f.useState("");f.useEffect(()=>{s||x("Missing reset token. Please use the link from your email.")},[s]);const g=async v=>{if(v.preventDefault(),x(""),!!s){if(a.length<6){x("Password must be at least 6 characters");return}if(a!==o){x("Passwords do not match");return}c(!0);try{await n({token:s,newPassword:a}),m(!0),setTimeout(()=>{e("/login")},3e3)}catch(y){x(y.message||"Failed to reset password")}finally{c(!1)}}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsx(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-md mx-auto",children:r.jsxs(D,{glass:!0,children:[r.jsxs(fe,{className:"pt-8 pt-6",children:[r.jsx(ge,{className:"text-2xl font-bold",children:"Reset Password"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mt-2",children:"Enter your new password below."})]}),r.jsx(O,{className:"pb-8",children:r.jsx(re,{mode:"wait",children:u?r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-4",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/30 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(et,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),r.jsx("h3",{className:"text-xl font-bold mb-2",children:"Password Updated!"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted mb-6",children:"Your password has been successfully reset. Redirecting you to login..."}),r.jsx(M,{variant:"primary",className:"w-full",onClick:()=>e("/login"),children:"Go to Login Now"})]},"success"):r.jsxs(T.form,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onSubmit:g,className:"space-y-4",children:[h&&r.jsxs("div",{className:"p-3 rounded-xl bg-red-50 dark:bg-red-950/30 border border-red-200 dark:border-red-800 text-sm text-red-600 dark:text-red-400 flex items-start gap-3",children:[r.jsx(Tr,{className:"w-5 h-5 flex-shrink-0"}),h]}),r.jsx(me,{label:"New Password",type:"password",value:a,onChange:v=>i(v.target.value),icon:r.jsx(Ye,{className:"w-5 h-5"}),placeholder:"",required:!0,autoFocus:!0,disabled:!s}),r.jsx(me,{label:"Confirm New Password",type:"password",value:o,onChange:v=>l(v.target.value),icon:r.jsx(Ye,{className:"w-5 h-5"}),placeholder:"",required:!0,disabled:!s}),r.jsx(M,{type:"submit",variant:"primary",className:"w-full h-12 mt-2",isLoading:d,disabled:!s,children:"Update Password"}),!s&&r.jsx(te,{to:"/forgot-password",className:"block text-center text-primary-500 hover:underline",children:"Request a new link"})]},"form")})})]})})})}const Ob="BGwc3-C9heX7WHfc8hJwJ08smI0rWbqoyoOXN1IoaHN33auBdJ7GIr82XZKUdl5MW9XZyElzyxIuMQA_J-xWhEE";function zO(){const{user:e}=Z(),t=V(S.users.updateFcmToken),[s,n]=f.useState(typeof window<"u"?Notification.permission:"default");return f.useEffect(()=>{if(!e||!sm||!Ob)return;(async()=>{try{const o=await Notification.requestPermission();if(n(o),o==="granted"){const l=await dM(sm,{vapidKey:Ob});l&&(console.log("FCM Token:",l),await t({userId:e._id,fcmToken:l}))}}catch(o){console.error("Error setting up notifications:",o)}})();const i=cM(sm,o=>{console.log("Foreground message received:",o),o.notification&&new Notification(o.notification.title||"New Notification",{body:o.notification.body,icon:o.notification.image||"/logo192.png"})});return()=>i()},[e,t]),{permissionStatus:s}}function WO(){const[e,t]=f.useState(null),[s,n]=f.useState(!1);f.useEffect(()=>{const o=l=>{l.preventDefault(),t(l),localStorage.getItem("pwa_dismissed")||n(!0)};return window.addEventListener("beforeinstallprompt",o),()=>{window.removeEventListener("beforeinstallprompt",o)}},[]);const a=async()=>{if(!e)return;n(!1),e.prompt();const{outcome:o}=await e.userChoice;console.log(`User response to the install prompt: ${o}`),t(null)},i=()=>{n(!1),localStorage.setItem("pwa_dismissed","true")};return s?r.jsx(re,{children:r.jsx(T.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-0 left-0 right-0 z-[100] p-4 md:p-6 flex justify-center pointer-events-none",children:r.jsxs("div",{className:"bg-white/90 dark:bg-gray-900/95 backdrop-blur-xl border border-light-border dark:border-dark-border shadow-2xl rounded-2xl p-4 w-[95%] max-w-sm pointer-events-auto relative overflow-hidden mx-auto mb-4 md:mb-6",children:[r.jsx("div",{className:"absolute -top-10 -right-10 w-24 h-24 bg-primary-500/20 rounded-full blur-2xl pointer-events-none"}),r.jsx("div",{className:"absolute -bottom-10 -left-10 w-24 h-24 bg-secondary-500/20 rounded-full blur-2xl pointer-events-none"}),r.jsx("button",{onClick:i,className:"absolute top-2 right-2 p-1 rounded-full hover:bg-black/5 dark:hover:bg-white/5 transition-colors z-10",children:r.jsx(Ae,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("img",{src:"https://ik.imagekit.io/h3qzmviwv/baptizo/posts/images/premium-logo.png",alt:"Baptizo",className:"w-12 h-12 rounded-xl shadow-md mb-2"}),r.jsx("h3",{className:"text-base md:text-lg font-bold text-gray-900 dark:text-white mb-1",children:"Install Baptizo Application"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-4 max-w-[90%]",children:"Get the best experience with offline access and real-time updates."}),r.jsxs("div",{className:"flex gap-2 w-full",children:[r.jsx(M,{variant:"outline",className:"flex-1 h-9 text-xs",onClick:i,children:"Not Now"}),r.jsxs(M,{className:"flex-1 bg-primary-600 hover:bg-primary-700 text-white shadow-lg shadow-primary-500/25 h-9 text-xs",onClick:a,children:[r.jsx(Wo,{className:"w-3 h-3 mr-1.5"}),"Install App"]})]})]})]})})}):null}function qO({users:e,selectedUserId:t,onSelect:s,label:n="Assign To"}){const[a,i]=f.useState(!1),[o,l]=f.useState(""),d=f.useRef(null),c=e.find(m=>m._id===t),u=e.filter(m=>m.name.toLowerCase().includes(o.toLowerCase())||m.role.toLowerCase().includes(o.toLowerCase()));return f.useEffect(()=>{const m=h=>{d.current&&!d.current.contains(h.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]),r.jsxs("div",{className:"w-full relative",ref:d,children:[n&&r.jsx("label",{className:"block text-sm font-medium mb-1.5 text-light-text dark:text-dark-text",children:n}),r.jsxs("button",{type:"button",onClick:()=>i(!a),className:`w-full flex items-center justify-between p-3 rounded-xl border transition-all ${a?"border-primary-500 ring-2 ring-primary-500/20 bg-light-card/80 dark:bg-dark-card/80":"border-light-border dark:border-dark-border bg-light-bg dark:bg-dark-bg hover:border-primary-500/50"}`,children:[c?r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 p-0.5",children:r.jsx("div",{className:"w-full h-full rounded-lg bg-light-bg dark:bg-dark-bg flex items-center justify-center overflow-hidden",children:c.avatarUrl?r.jsx("img",{src:c.avatarUrl,alt:c.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-xs font-bold",children:c.name[0]})})}),r.jsxs("div",{className:"flex flex-col items-start leading-none",children:[r.jsx("span",{className:"font-semibold text-sm",children:c.name}),r.jsx("span",{className:"text-[10px] text-light-muted dark:text-dark-muted font-bold uppercase tracking-wider mt-0.5",children:c.role.replace("_"," ")})]})]}):r.jsx("span",{className:"text-light-muted dark:text-dark-muted",children:"Select a member..."}),r.jsx(Ke,{className:`w-5 h-5 text-light-muted dark:text-dark-muted transition-transform ${a?"rotate-180":""}`})]}),r.jsx(re,{children:a&&r.jsxs(T.div,{initial:{opacity:0,y:5,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:"absolute top-full left-0 right-0 mt-2 z-50 bg-light-card/95 dark:bg-dark-card/95 backdrop-blur-xl border border-light-border/20 dark:border-dark-border/20 rounded-xl shadow-2xl overflow-hidden",children:[r.jsx("div",{className:"p-2 border-b border-light-border/10 dark:border-dark-border/10",children:r.jsxs("div",{className:"relative",children:[r.jsx(mt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-light-muted dark:text-dark-muted"}),r.jsx("input",{type:"text",placeholder:"Search members...",value:o,onChange:m=>l(m.target.value),className:"w-full pl-9 pr-3 py-2 bg-light-bg/50 dark:bg-dark-bg/50 rounded-lg text-sm border-none focus:ring-1 focus:ring-primary-500 outline-none",autoFocus:!0})]})}),r.jsx("div",{className:"max-h-[250px] overflow-y-auto thin-scrollbar p-1",children:u.length>0?u.map(m=>r.jsxs("button",{onClick:()=>{s(m._id),i(!1)},className:`w-full flex items-center justify-between p-2 rounded-lg transition-colors ${t===m._id?"bg-primary-500/10 text-primary-500":"hover:bg-light-bg/80 dark:hover:bg-dark-bg/80"}`,children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-primary-500 to-secondary-500 p-0.5",children:r.jsx("div",{className:"w-full h-full rounded-lg bg-light-bg dark:bg-dark-bg flex items-center justify-center overflow-hidden",children:m.avatarUrl?r.jsx("img",{src:m.avatarUrl,alt:m.name,className:"w-full h-full object-cover"}):r.jsx("span",{className:"text-xs font-bold",children:m.name[0]})})}),r.jsxs("div",{className:"flex flex-col items-start leading-none",children:[r.jsx("span",{className:"font-semibold text-sm",children:m.name}),r.jsx("span",{className:"text-[10px] opacity-70 font-bold uppercase tracking-wider mt-0.5",children:m.role.replace("_"," ")})]})]}),t===m._id&&r.jsx(nt,{className:"w-4 h-4"})]},m._id)):r.jsx("div",{className:"p-4 text-center text-sm text-light-muted dark:text-dark-muted",children:"No members found"})})]})})]})}function HO(){const{user:e,isLoading:t}=Z(),s=de(),n=V(S.boardTasks.createTask),[a,i]=f.useState(""),[o,l]=f.useState(""),[d,c]=f.useState("Ministry Assignment"),[u,m]=f.useState("medium"),[h,x]=f.useState(""),[g,v]=f.useState(""),[y,p]=f.useState(!1),b=U(S.users.getAllUsers,e&&(e.role==="admin"||e.role==="super_admin")?{adminId:e._id}:"skip"),w=(b==null?void 0:b.filter(j=>j.role==="board_member"||j.role==="admin"||j.role==="super_admin"))||[];if(t)return r.jsx("div",{className:"min-h-screen py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-3xl",children:[r.jsx(Xt,{}),r.jsx(aa,{count:4})]})});if(!e)return r.jsx(Ee,{to:"/login",replace:!0});if(e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Ee,{to:"/board",replace:!0});const k=async()=>{if(!(!a||!o||!h)){p(!0);try{await n({adminId:e._id,title:a,description:o,type:d,priority:u,assignedTo:h,dueDate:g?new Date(g).getTime():void 0}),s("/board/admin")}catch(j){console.error("Failed to create task:",j)}finally{p(!1)}}};return r.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-primary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-primary-500",children:"Operation Command"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Issue Directive"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Formulate and deploy a new mission objective."})]}),r.jsxs(D,{glass:!0,className:"overflow-hidden border-primary-500/20",children:[r.jsx("div",{className:"h-2 bg-gradient-to-r from-primary-500 via-secondary-500 to-primary-500"}),r.jsxs(O,{className:"p-8 md:p-12 space-y-10",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx(me,{label:"Directive Title",value:a,onChange:j=>i(j.target.value),placeholder:"State the core objective...",className:"text-lg font-bold h-14 rounded-2xl border-2 focus:border-primary-500 transition-all"}),r.jsx(Fo,{label:"Operational Details",value:o,onChange:j=>l(j.target.value),rows:6,placeholder:"Elucidate the mission requirements and expected outcomes...",className:"rounded-[24px] border-2 focus:border-primary-500 transition-all p-6 text-base italic"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx(Hr,{label:"Mission Classification",value:d,onChange:c,options:[{value:"Ministry Assignment",label:"Ministry Assignment"},{value:"Administrative",label:"Administrative"},{value:"Training",label:"Training"},{value:"Personal Development",label:"Personal Development"},{value:"Team Project",label:"Team Project"}]}),r.jsx(Hr,{label:"Intensity Priority",value:u,onChange:m,options:[{value:"low",label:"Low Priority"},{value:"medium",label:"Standard Priority"},{value:"high",label:"High Priority"},{value:"urgent",label:"Immediate Attention"}]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx("div",{className:"relative z-40",children:r.jsx(qO,{users:w,selectedUserId:h,onSelect:x,label:"Assigned Personnel"})}),r.jsx(me,{type:"date",label:"Deadline Alignment",value:g,onChange:j=>v(j.target.value),className:"h-14 rounded-2xl border-2 focus:border-primary-500"})]}),r.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-4 pt-8",children:[r.jsx(M,{variant:"ghost",onClick:()=>s(-1),className:"h-14 px-8 rounded-2xl font-black text-[10px] uppercase tracking-widest border-2 hover:bg-light-muted/10",children:"Abort"}),r.jsx(M,{variant:"primary",onClick:k,disabled:y,className:"h-14 px-12 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] shadow-2xl shadow-primary-500/40",children:y?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Deploying..."})]}):"Deploy Directive"})]})]})]})]})}function GO(){const{user:e,isLoading:t}=Z(),s=de(),n=V(S.training.createModule),a=U(S.training.getTrainingStats,e?{userId:e._id}:"skip"),[i,o]=f.useState(""),[l,d]=f.useState(""),[c,u]=f.useState("Leadership"),[m,h]=f.useState(""),[x,g]=f.useState(""),[v,y]=f.useState(""),[p,b]=f.useState(""),[w,k]=f.useState(!1);if(t)return r.jsx("div",{className:"flex justify-center p-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})});if(!e)return r.jsx(Ee,{to:"/login",replace:!0});if(e.role!=="admin"&&e.role!=="super_admin")return r.jsx(Ee,{to:"/board",replace:!0});const j=async()=>{if(!(!i||!l)){k(!0);try{const N=(a==null?void 0:a.totalModules)||0;await n({adminId:e._id,title:i,description:l,category:c,content:m,videoUrl:x||void 0,documentUrl:v||void 0,duration:p?parseInt(p):void 0,order:N+1}),s("/board/admin")}catch(N){console.error("Failed to create module:",N)}finally{k(!1)}}};return r.jsxs("div",{className:"max-w-3xl mx-auto space-y-8",children:[r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-10 text-center",children:[r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx("div",{className:"w-8 h-1 bg-secondary-500 rounded-full"}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-secondary-500",children:"Wisdom Forge"})]}),r.jsx("h1",{className:"text-4xl md:text-5xl font-black text-gradient font-display mb-2 tracking-tight",children:"Author Wisdom"}),r.jsx("p",{className:"text-light-muted dark:text-dark-muted font-medium",children:"Create a transformative learning experience for the board."})]}),r.jsxs(D,{glass:!0,className:"overflow-hidden border-secondary-500/20",children:[r.jsx("div",{className:"h-2 bg-gradient-to-r from-secondary-500 via-primary-500 to-secondary-500"}),r.jsxs(O,{className:"p-8 md:p-12 space-y-10",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsx(me,{label:"Module Title",value:i,onChange:N=>o(N.target.value),placeholder:"Enter a compelling title...",className:"text-lg font-bold h-14 rounded-2xl border-2 focus:border-secondary-500 transition-all"}),r.jsx(Fo,{label:"Executive Summary",value:l,onChange:N=>d(N.target.value),rows:2,placeholder:"What is the core essence of this wisdom?",className:"rounded-[24px] border-2 focus:border-secondary-500 transition-all p-6 text-base italic"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx(Hr,{label:"Sector Category",value:c,onChange:u,options:[{value:"Leadership",label:"Leadership"},{value:"Ministry Skills",label:"Ministry Skills"},{value:"Spiritual Growth",label:"Spiritual Growth"},{value:"Technical Skills",label:"Technical Skills"},{value:"Team Building",label:"Team Building"}]}),r.jsx(me,{label:"Estimated Duration (MIN)",type:"number",value:p,onChange:N=>b(N.target.value),placeholder:"e.g., 30",className:"h-14 rounded-2xl border-2 focus:border-secondary-500"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("label",{className:"text-[10px] font-black uppercase tracking-widest text-light-muted/60 ml-1",children:"Deep Content (Markdown/HTML Compatible)"}),r.jsx(Fo,{value:m,onChange:N=>h(N.target.value),rows:10,placeholder:"<h2>Core Principles</h2><p>Synthesize the wisdom here...</p>",className:"rounded-[32px] border-2 focus:border-secondary-500 transition-all p-8 text-base font-mono bg-light-muted/5"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[r.jsx(me,{label:"Visual Transmission (Video URL)",value:x,onChange:N=>g(N.target.value),placeholder:"Embed URL (YT/Vimeo)...",className:"h-14 rounded-2xl border-2 focus:border-secondary-500"}),r.jsx(me,{label:"Resource Reference (Document URL)",value:v,onChange:N=>y(N.target.value),placeholder:"Cloud Link (Drive/Dropbox)...",className:"h-14 rounded-2xl border-2 focus:border-secondary-500"})]}),r.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end gap-4 pt-8 border-t border-light-border dark:border-dark-border",children:[r.jsx(M,{variant:"ghost",onClick:()=>s(-1),className:"h-14 px-8 rounded-2xl font-black text-[10px] uppercase tracking-widest border-2 hover:bg-light-muted/10 transition-all",children:"Discard Draft"}),r.jsx(M,{variant:"primary",onClick:j,disabled:w,className:"h-14 px-12 rounded-2xl font-black text-[10px] uppercase tracking-[0.2em] bg-secondary-500 hover:bg-secondary-600 shadow-2xl shadow-secondary-500/40 border-none",children:w?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),r.jsx("span",{children:"Forging Module..."})]}):"Authorize Wisdom"})]})]})]})]})}function QO(){const{user:e,isLoading:t}=Z(),s=de(),[n,a]=f.useState(()=>{const b=localStorage.getItem("teachings_activeTab");return b==="ancient"||b==="wisdom"?b:"wisdom"}),[i,o]=f.useState(0),[l,d]=f.useState(0),[c,u]=f.useState(()=>{const b=localStorage.getItem("ancientCulture_postsVisible");return b!==null?JSON.parse(b):!0}),[m,h]=f.useState(()=>{const b=localStorage.getItem("wisdomNow_postsVisible");return b!==null?JSON.parse(b):!0});if(f.useEffect(()=>{localStorage.setItem("teachings_activeTab",n)},[n]),f.useEffect(()=>{localStorage.setItem("ancientCulture_postsVisible",JSON.stringify(c))},[c]),f.useEffect(()=>{localStorage.setItem("wisdomNow_postsVisible",JSON.stringify(m))},[m]),t)return r.jsx("div",{className:"min-h-screen py-4 md:py-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsx(Xt,{}),r.jsx(zN,{}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(Oe,{}),r.jsx(Oe,{})]})]})});if(!e)return r.jsx(Ee,{to:"/login",replace:!0});const x=n==="ancient"?"Ancient Culture":"Wisdom of The Now",g=n==="ancient"?c:m,v=n==="ancient"?u:h,y=n==="ancient"?i:l,p=()=>{n==="ancient"?o(b=>b+1):d(b=>b+1)};return r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl",children:[r.jsxs(T.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:J("mb-6 md:mb-8 p-6 md:p-8 rounded-2xl border transition-all duration-300",n==="ancient"?"bg-gradient-to-br from-primary-500/10 via-primary-500/5 to-primary-600/10 border-primary-500/20":"bg-gradient-to-br from-secondary-500/10 via-secondary-500/5 to-secondary-600/10 border-secondary-500/20"),children:[r.jsxs("div",{className:"flex items-start gap-4 justify-between mb-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[r.jsx(T.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:J("w-12 h-12 md:w-16 md:h-16 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0 transition-colors duration-300",n==="ancient"?"bg-primary-500 shadow-primary-500/30":"bg-secondary-500 shadow-secondary-500/30"),children:n==="ancient"?r.jsx(da,{className:"w-6 h-6 md:w-8 md:h-8 text-white"}):r.jsx(Gr,{className:"w-6 h-6 md:w-8 md:h-8 text-white"})},n),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h1",{className:J("text-2xl md:text-4xl font-bold font-display transition-colors duration-300",n==="ancient"?"text-primary-600 dark:text-primary-400":"text-secondary-600 dark:text-secondary-400"),children:n==="ancient"?"Ancient Culture":"Wisdom of The Now"}),r.jsx(Ep,{title:n==="ancient"?"Ancient Culture":"Wisdom of The Now",content:n==="ancient"?"This section features teachings based on prophetic wisdom and systems from the Old Testament. Admin-created posts appear here for community learning and discussion.":"This section features teachings based on spiritual identity and insights from the New Testament. Engage with admin posts to deepen your understanding."})]}),r.jsx("p",{className:"text-light-text dark:text-dark-text text-sm md:text-base leading-relaxed",children:n==="ancient"?"Prophetic wisdom and systems from the Old Testament":"Spiritual identity and insights from the New Testament"})]})]}),r.jsx(T.button,{whileTap:{scale:.95},onClick:async()=>{const b=`${window.location.origin}/teachings`;navigator.share?await navigator.share({title:"Teachings - Baptizo",url:b}):(await navigator.clipboard.writeText(b),alert("Link copied to clipboard!"))},className:J("p-2 rounded-lg transition-all flex-shrink-0",n==="ancient"?"hover:bg-primary-100 dark:hover:bg-primary-900/20 text-primary-500":"hover:bg-secondary-100 dark:hover:bg-secondary-900/20 text-secondary-500"),title:"Share this page",children:r.jsx(mi,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex p-1 bg-light-bg/50 dark:bg-dark-bg/50 backdrop-blur-sm rounded-xl border border-light-border dark:border-dark-border mt-6 relative",children:[r.jsx(T.div,{layout:!0,className:J("absolute top-1 bottom-1 rounded-lg bg-white dark:bg-dark-card shadow-sm z-0",n==="ancient"?"left-1 right-1/2":"left-1/2 right-1"),initial:!1,transition:{type:"spring",bounce:.2,duration:.6}}),r.jsx("button",{onClick:()=>a("wisdom"),className:J("flex-1 py-2 text-sm md:text-base font-bold rounded-lg relative z-10 transition-colors duration-300",n==="wisdom"?"text-secondary-600 dark:text-secondary-400":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"),children:"Wisdom of The Now"}),r.jsx("button",{onClick:()=>a("ancient"),className:J("flex-1 py-2 text-sm md:text-base font-bold rounded-lg relative z-10 transition-colors duration-300",n==="ancient"?"text-primary-600 dark:text-primary-400":"text-light-muted dark:text-dark-muted hover:text-light-text dark:hover:text-dark-text"),children:"Ancient Culture"})]})]}),r.jsxs("div",{className:"space-y-8",children:[r.jsx("div",{className:"hidden md:block",children:r.jsx($c,{onSuccess:p,defaultCategory:x})}),r.jsx("div",{className:"flex justify-end",children:r.jsx(Ap,{isVisible:g,onToggle:()=>v(!g),category:x})}),g?r.jsxs("div",{children:[" ",r.jsx(Vc,{category:x,onlyOfficial:!0,onCommentClick:b=>s(`/post/${b._id}`)},`${n}-${y}`)]},n):r.jsx("div",{className:"text-center py-12 glass rounded-xl",children:r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:'Posts are hidden. Click "Show Posts" to view them.'})})]})]})})}function KO(){const{user:e,isLoading:t}=Z(),s=de(),[n,a]=f.useState(null),i=U(S.settings.canUserCreatePosts,e!=null&&e._id?{userId:e._id}:"skip");if(t)return r.jsx("div",{className:"flex items-center justify-center min-h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})});if(!e)return r.jsx(Ee,{to:"/login",replace:!0});const o=e.role==="admin"||e.role==="super_admin",l=()=>{s(o?"/teachings":"/feed")},d=()=>n==="question"?"question":n==="prayer"?"prayer":"general",c=()=>{if(n==="Ancient Culture"||n==="Wisdom of The Now")return n};return r.jsx("div",{className:"min-h-screen py-4 md:py-8 pb-20 md:pb-8",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 max-w-2xl",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6 md:mb-8",children:[r.jsx("button",{onClick:()=>n?a(null):s(-1),className:"p-2 -ml-2 rounded-full hover:bg-light-card dark:hover:bg-dark-card transition-colors",children:r.jsx(ur,{className:"w-6 h-6 text-light-text dark:text-dark-text"})}),r.jsx("h1",{className:"text-2xl font-bold font-display text-light-text dark:text-dark-text",children:n?"Create Post":"Choose Category"})]}),r.jsx("div",{className:"space-y-6",children:n?r.jsx(T.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"bg-light-bg dark:bg-dark-bg",children:r.jsx($c,{defaultCategory:c(),postType:d(),onSuccess:l,variant:"default"})}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"text-light-muted dark:text-dark-muted",children:o?"Select the category where you want to share your thoughts.":"What would you like to share today?"}),r.jsxs("div",{className:"grid gap-4",children:[(()=>{const u=o||(i==null?void 0:i.canCreate)||!1;return r.jsxs(T.button,{whileHover:u?{scale:1.02}:{},whileTap:u?{scale:.98}:{},onClick:()=>u&&a("Wisdom of The Now"),disabled:!u,className:`w-full p-6 rounded-2xl border ${u?"border-secondary-500/20 bg-gradient-to-br from-secondary-500/5 to-secondary-500/10 hover:shadow-lg hover:shadow-secondary-500/10 cursor-pointer":"border-gray-300/20 bg-gray-50 dark:bg-gray-900/20 opacity-60 cursor-not-allowed"} transition-all text-left flex items-start gap-4`,children:[r.jsx("div",{className:`p-3 rounded-xl ${u?"bg-secondary-500/10 text-secondary-500":"bg-gray-300/10 text-gray-400"}`,children:u?r.jsx(Gr,{className:"w-8 h-8"}):r.jsx(Ye,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`text-xl font-bold font-display mb-1 ${u?"text-secondary-600 dark:text-secondary-400":"text-gray-500 dark:text-gray-400"}`,children:"Wisdom of The Now"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:u?"Share spiritual insights and identity from the New Testament":(i==null?void 0:i.reason)||"No permission to create posts"})]})]})})(),(()=>{const u=o||(i==null?void 0:i.canCreate)||!1;return r.jsxs(T.button,{whileHover:u?{scale:1.02}:{},whileTap:u?{scale:.98}:{},onClick:()=>u&&a("Ancient Culture"),disabled:!u,className:`w-full p-6 rounded-2xl border ${u?"border-primary-500/20 bg-gradient-to-br from-primary-500/5 to-primary-500/10 hover:shadow-lg hover:shadow-primary-500/10 cursor-pointer":"border-gray-300/20 bg-gray-50 dark:bg-gray-900/20 opacity-60 cursor-not-allowed"} transition-all text-left flex items-start gap-4`,children:[r.jsx("div",{className:`p-3 rounded-xl ${u?"bg-primary-500/10 text-primary-500":"bg-gray-300/10 text-gray-400"}`,children:u?r.jsx(da,{className:"w-8 h-8"}):r.jsx(Ye,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`text-xl font-bold font-display mb-1 ${u?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"}`,children:"Ancient Culture"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:u?"Discuss prophetic wisdom from the Old Testament":(i==null?void 0:i.reason)||"No permission to create posts"})]})]})})(),(()=>{const u=o||(i==null?void 0:i.canCreate)||!1;return r.jsxs(T.button,{whileHover:u?{scale:1.02}:{},whileTap:u?{scale:.98}:{},onClick:()=>u&&a("question"),disabled:!u,className:`w-full p-6 rounded-2xl border ${u?"border-blue-500/20 bg-gradient-to-br from-blue-500/5 to-blue-500/10 hover:shadow-lg hover:shadow-blue-500/10 cursor-pointer":"border-gray-300/20 bg-gray-50 dark:bg-gray-900/20 opacity-60 cursor-not-allowed"} transition-all text-left flex items-start gap-4`,children:[r.jsx("div",{className:`p-3 rounded-xl ${u?"bg-blue-500/10 text-blue-500":"bg-gray-300/10 text-gray-400"}`,children:u?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),r.jsx("path",{d:"M12 17h.01"})]}):r.jsx(Ye,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`text-xl font-bold font-display mb-1 ${u?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:"Ask a Question"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:u?"Submit a question about a teaching or topic":(i==null?void 0:i.reason)||"No permission to create posts"})]})]})})(),(()=>{const u=o||(i==null?void 0:i.canCreate)||!1;return r.jsxs(T.button,{whileHover:u?{scale:1.02}:{},whileTap:u?{scale:.98}:{},onClick:()=>u&&a("prayer"),disabled:!u,className:`w-full p-6 rounded-2xl border ${u?"border-purple-500/20 bg-gradient-to-br from-purple-500/5 to-purple-500/10 hover:shadow-lg hover:shadow-purple-500/10 cursor-pointer":"border-gray-300/20 bg-gray-50 dark:bg-gray-900/20 opacity-60 cursor-not-allowed"} transition-all text-left flex items-start gap-4`,children:[r.jsx("div",{className:`p-3 rounded-xl ${u?"bg-purple-500/10 text-purple-500":"bg-gray-300/10 text-gray-400"}`,children:u?r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[r.jsx("path",{d:"M19 14c1.49-1.28 3.6-1.28 5.09 0 1.49 1.28 1.49 3.36 0 4.63-1.49 1.28-3.6 1.28-5.09 0-1.49-1.28-1.49-3.36 0-4.63z"}),r.jsx("path",{d:"M24 6h-6a2 2 0 0 0-2 2v10.17a3 3 0 0 1-.5 1.7l-2 2.83"}),r.jsx("path",{d:"M13 14c1.49-1.28 3.6-1.28 5.09 0 1.49 1.28 1.49 3.36 0 4.63-1.49 1.28-3.6 1.28-5.09 0-1.49-1.28-1.49-3.36 0-4.63z"}),r.jsx("path",{d:"M7 6h6a2 2 0 0 1 2 2v10.17a3 3 0 0 0 .5 1.7l2 2.83"})]}):r.jsx(Ye,{className:"w-8 h-8"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:`text-xl font-bold font-display mb-1 ${u?"text-purple-600 dark:text-purple-400":"text-gray-500 dark:text-gray-400"}`,children:"Prayer Point"}),r.jsx("p",{className:"text-sm text-light-muted dark:text-dark-muted",children:u?"Share a prayer request with the community":(i==null?void 0:i.reason)||"No permission to create posts"})]})]})})()]}),!o&&(i==null?void 0:i.canCreate)===!1&&r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-6 p-4 rounded-xl bg-orange-500/5 border border-orange-500/20 flex items-start gap-3",children:[r.jsx("div",{className:"p-2 bg-orange-500/10 rounded-lg",children:r.jsx(Ye,{className:"w-4 h-4 text-orange-500"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-orange-600 dark:text-orange-400 font-display",children:"Post Creation Paused"}),r.jsx("p",{className:"text-xs text-light-muted dark:text-dark-muted mt-0.5 leading-relaxed",children:"This feature is currently inactive. It will be available once an administrator enables post creation permissions."})]})]})]})})]})})}function YO(){const{user:e}=Z(),t=de(),s=U(S.wordUnderPressure.getActivePassageStatus,e?{userId:e._id}:"skip"),n=V(S.wordUnderPressure.startAttempt),a=V(S.wordUnderPressure.getQuestion),i=V(S.wordUnderPressure.submitAnswer),[o,l]=f.useState("loading"),[d,c]=f.useState(""),[u,m]=f.useState(""),h=f.useRef(""),[x,g]=f.useState(20),[v,y]=f.useState(0),[p,b]=f.useState([]),[w,k]=f.useState(""),[j,N]=f.useState([]),[_,A]=f.useState(null),[L,C]=f.useState(null),[P,R]=f.useState(null),W=f.useRef(null),[Y,se]=f.useState(!0),Q=f.useRef(!1);f.useEffect(()=>{s!==void 0&&Y&&(l("landing"),se(!1))},[s,Y]),f.useEffect(()=>{const H=()=>{document.hidden&&(o==="viewing"||o==="answering")&&pe("Focus lost. Challenge failed.")};return document.addEventListener("visibilitychange",H),()=>{document.removeEventListener("visibilitychange",H)}},[o]);const pe=async H=>{if(!Q.current&&(Q.current=!0,l("error"),c(H),W.current&&clearInterval(W.current),P))try{await i({attemptId:P,selectedOptionId:"failed_focus_lost",userId:e==null?void 0:e._id})}catch(le){console.error("Failed to report failure",le)}},$=async()=>{if(!(!(s!=null&&s.hasActivePassage)||!e)){W.current&&clearInterval(W.current),Q.current=!1;try{const H=await n({userId:e._id});R(H.attemptId),b(H.textLines),y(H.displayTime),l("viewing"),W.current=setInterval(()=>{y(le=>le<=1?(clearInterval(W.current),I(H.attemptId),0):le-1)},1e3)}catch(H){c(H.message||"Failed to start"),l("error")}}},I=async H=>{W.current&&clearInterval(W.current),b([]);try{l("loading"),await new Promise(ue=>setTimeout(ue,800));const le=await a({attemptId:H,userId:e==null?void 0:e._id});k(le.question),N(le.options),y(le.timeLimit),l("answering"),Q.current=!1,W.current=setInterval(()=>{y(ue=>ue<=1?(clearInterval(W.current),F(H),0):ue-1)},1e3)}catch(le){c(le.message||"Failed to fetch question"),l("error")}},F=async H=>{if(!(Q.current||o!=="answering")){Q.current=!0,W.current&&clearInterval(W.current),l("error"),c("Time expired.");try{await i({attemptId:H,selectedOptionId:"timeout",userId:e==null?void 0:e._id})}catch{}}},q=async H=>{if(!(Q.current||o!=="answering")){Q.current=!0,A(H),W.current&&clearInterval(W.current);try{const le=await i({attemptId:P,selectedOptionId:H,userId:e==null?void 0:e._id});if(C({isCorrect:le.isCorrect||!1,participationRuby:le.participationRuby||0}),le.skipExplanation){l("result");return}l("explaining"),g(20),W.current&&clearInterval(W.current),W.current=setInterval(()=>{g(ue=>ue<=1?(clearInterval(W.current),ae(),0):ue-1)},1e3)}catch(le){c(le.message||"Failed to submit answer"),l("error")}}},ce=V(S.wordUnderPressure.submitExplanation),ae=async H=>{if(W.current&&clearInterval(W.current),o==="result")return;const le=h.current;try{await ce({attemptId:P,explanation:le,userId:e==null?void 0:e._id}),l("result")}catch(ue){console.error(ue),l("result")}};return s===void 0?r.jsx("div",{className:"min-h-screen bg-black/95 flex items-center justify-center text-white",children:"Loading..."}):r.jsx("div",{className:"min-h-screen bg-black text-white font-sans selection:bg-none",children:r.jsxs("div",{className:"max-w-md mx-auto min-h-screen flex flex-col p-6 items-center justify-center relative",children:[r.jsxs("div",{className:"absolute top-6 left-0 w-full flex justify-between px-6 opacity-40",children:[r.jsx("span",{className:"text-[10px] tracking-[0.3em] font-medium uppercase text-emerald-500",children:"Word Under Pressure"}),r.jsxs("div",{className:"flex items-center gap-1.5",children:[r.jsx(ve,{className:"w-3 h-3 text-emerald-400"}),r.jsx("span",{className:"text-[10px] font-mono font-medium text-emerald-200/50",children:s!=null&&s.rewardClaimed?"PRACTICE MODE":"MONTHLY CHALLENGE"})]})]}),o==="landing"&&r.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center w-full",children:[r.jsx("div",{className:"w-20 h-20 rounded-full border border-emerald-500/20 flex items-center justify-center mx-auto mb-8 bg-emerald-950/20 shadow-[0_0_40px_rgba(16,185,129,0.05)]",children:r.jsx(Nr,{className:"w-8 h-8 text-emerald-400"})}),r.jsx("h1",{className:"text-4xl font-display font-light mb-2 tracking-tight",children:"Focus."}),r.jsx("p",{className:"text-emerald-200/40 text-sm mb-10 font-light",children:"Memorize the Word accurately."}),s!=null&&s.hasActivePassage?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-center gap-3 text-[10px] text-emerald-500/60 mb-10 font-mono tracking-[0.2em]",children:[r.jsx("span",{className:"bg-emerald-500/10 px-2 py-0.5 rounded",children:"FREE ENTRY"}),r.jsx("span",{className:"opacity-30",children:""}),r.jsx("span",{className:"bg-emerald-500/10 px-2 py-0.5 rounded",children:s.rewardClaimed?"PRACTICE ONLY":"WINNER: 11.5 RUBIES"})]}),s.hasAttempted&&r.jsxs("div",{className:"bg-emerald-950/40 border border-emerald-500/10 text-emerald-200/60 text-[10px] p-4 rounded-xl mb-6 font-mono leading-relaxed",children:[s.rewardClaimed?r.jsx("span",{className:"text-emerald-400",children:"Monthly reward claimed. "}):r.jsx("span",{children:"Participated. "}),"Improve your time to win the month! ",r.jsx("br",{}),s.bestTime?r.jsxs("span",{className:"text-emerald-400 mt-1 block",children:["Your Best: ",s.bestTime,"ms"]}):""]}),r.jsx(M,{className:"w-full h-16 bg-emerald-600 hover:bg-emerald-500 text-white tracking-[0.3em] text-xs font-bold shadow-[0_10px_30px_rgba(5,150,105,0.2)] transition-all active:scale-[0.98] rounded-2xl",onClick:$,children:s.hasAttempted?"RETRY CHALLENGE":"BEGIN CHALLENGE"}),r.jsxs("p",{className:"text-[10px] text-emerald-200/20 max-w-[220px] mx-auto leading-relaxed uppercase tracking-widest font-medium",children:["No interruptions. No screenshots.",r.jsx("br",{}),s.memoTime,"s study  ",s.recallTime,"s recall."]})]}):r.jsx(D,{className:"bg-emerald-950/20 border-emerald-500/10 backdrop-blur-xl",children:r.jsxs(O,{className:"p-8 text-center",children:[r.jsx(Nr,{className:"w-12 h-12 text-emerald-500/10 mx-auto mb-4"}),r.jsx("h3",{className:"text-emerald-100 text-lg font-light mb-2",children:"No Active Challenge"}),r.jsx("p",{className:"text-emerald-200/30 text-xs mb-8 leading-relaxed",children:"The scribes are preparing the next monthly portion. Check back soon."}),r.jsx(M,{variant:"ghost",className:"w-full text-emerald-400/50 hover:text-emerald-300 hover:bg-emerald-500/5 text-xs tracking-widest uppercase font-bold",onClick:()=>t("/leaderboard"),children:"View Leaderboard"})]})})]}),o==="viewing"&&r.jsxs("div",{className:"w-full h-full flex flex-col justify-center select-none",onContextMenu:H=>H.preventDefault(),children:[r.jsx("div",{className:"mb-12 flex justify-center",children:r.jsxs("div",{className:"relative w-20 h-20 rounded-full border border-emerald-500/10 flex items-center justify-center bg-emerald-950/20",children:[r.jsx("span",{className:"font-mono text-3xl font-light text-emerald-400",children:v}),r.jsxs("svg",{className:"absolute w-full h-full -rotate-90",children:[r.jsx("circle",{cx:"40",cy:"40",r:"38",fill:"none",stroke:"currentColor",strokeWidth:"1",className:"text-emerald-500/10"}),r.jsx("circle",{cx:"40",cy:"40",r:"38",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"238.7",strokeDashoffset:238.7-238.7*v/((s==null?void 0:s.memoTime)||20),className:"text-emerald-500 transition-all duration-1000 ease-linear shadow-[0_0_10px_rgba(16,185,129,0.5)]"})]})]})}),r.jsxs(T.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-8 text-center",children:[r.jsx("div",{className:"space-y-4",children:p.map((H,le)=>r.jsx("p",{className:"text-xl md:text-2xl font-serif text-emerald-50/90 leading-relaxed tracking-wide italic",children:H},le))}),r.jsxs("div",{className:"pt-8 opacity-20",children:[r.jsx("div",{className:"h-px w-12 bg-emerald-500 mx-auto mb-4"}),r.jsx("p",{className:"text-[10px] uppercase tracking-[0.4em] text-emerald-200 font-medium",children:"Internalize"})]})]})]}),o==="answering"&&r.jsxs("div",{className:"w-full max-w-sm",children:[r.jsxs("div",{className:"mb-12 text-center",children:[r.jsxs("div",{className:"inline-flex items-center gap-4 px-4 py-2 bg-emerald-500/10 rounded-full border border-emerald-500/20 mb-8",children:[r.jsx(Ze,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("span",{className:"font-mono text-lg font-medium text-emerald-400",children:[v,"s"]})]}),r.jsx("h2",{className:"text-2xl font-light leading-snug text-emerald-50 px-4",children:w})]}),r.jsx("div",{className:"grid grid-cols-1 gap-4",children:j.map(H=>r.jsxs(M,{variant:"outline",className:J("h-16 justify-start px-6 text-sm font-light tracking-wide rounded-2xl transition-all border-emerald-500/10 bg-emerald-950/10 hover:bg-emerald-500/10 hover:border-emerald-500/30",_===H.id?"bg-emerald-500/20 border-emerald-500":"text-emerald-200/80"),onClick:()=>q(H.id),children:[r.jsx("span",{className:"w-6 text-[10px] font-mono text-emerald-500/50 uppercase",children:H.id}),r.jsx("span",{className:"flex-1 text-left",children:H.text})]},H.id))})]}),o==="explaining"&&r.jsxs(T.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-sm",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsxs("div",{className:"inline-flex items-center gap-4 px-4 py-2 bg-emerald-500/10 rounded-full border border-emerald-500/20 mb-8",children:[r.jsx(Ze,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("span",{className:"font-mono text-lg font-medium text-emerald-400",children:[x,"s"]})]}),r.jsx("h2",{className:"text-2xl font-light mb-2 text-emerald-50",children:"Reasoning."}),r.jsx("p",{className:"text-emerald-200/40 text-sm",children:"Why did you choose this answer? Explain in less than 250 words."})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsx("textarea",{className:"w-full h-40 p-4 rounded-2xl bg-emerald-950/20 border border-emerald-500/10 text-emerald-50 text-sm font-light leading-relaxed focus:outline-none focus:border-emerald-500/30 transition-all resize-none",placeholder:"Explain your logic...",value:u,onChange:H=>{(H.target.value.trim().split(/\s+/).filter(ue=>ue!=="").length<=250||H.target.value.length<u.length)&&(m(H.target.value),h.current=H.target.value)},onPaste:H=>{H.preventDefault()}}),r.jsxs("div",{className:"flex justify-between items-center px-1",children:[r.jsxs("span",{className:J("text-[10px] font-mono tracking-widest",u.trim().split(/\s+/).filter(H=>H!=="").length>240?"text-amber-500":"text-emerald-500/40"),children:[u.trim().split(/\s+/).filter(H=>H!=="").length," / 250 WORDS"]}),r.jsx(M,{className:"bg-emerald-600 hover:bg-emerald-500 text-white px-8 rounded-xl h-10 text-[10px] tracking-widest uppercase font-bold",onClick:()=>ae(),disabled:u.trim().length<5,children:"SUBMIT"})]})]})]}),o==="result"&&L&&r.jsxs(T.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center w-full",children:[L.isCorrect?r.jsxs("div",{className:"mb-10",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-500/20 flex items-center justify-center mx-auto mb-6",children:r.jsx(ve,{className:"w-10 h-10 text-emerald-400"})}),r.jsx("h2",{className:"text-3xl font-display font-light mb-2",children:"Well Done."}),r.jsx("p",{className:"text-emerald-200/50 text-sm mb-10",children:"Focus rewarded."}),L.participationRuby>0?r.jsxs("div",{className:"inline-flex flex-col items-center p-6 bg-emerald-500/10 rounded-3xl border border-emerald-500/20 shadow-[0_10px_40px_rgba(16,185,129,0.1)]",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(Lx,{className:"w-4 h-4 text-emerald-400"}),r.jsxs("span",{className:"text-4xl font-mono text-emerald-400",children:["+",L.participationRuby]})]}),r.jsx("span",{className:"text-[10px] uppercase tracking-[0.2em] text-emerald-500/60 font-bold",children:"Rubies Earned"})]}):r.jsxs("div",{className:"inline-flex flex-col items-center p-6 bg-emerald-950/40 rounded-3xl border border-white/5",children:[r.jsx("span",{className:"text-xs uppercase tracking-[0.2em] text-white/30 font-bold mb-1",children:"Practice Complete"}),r.jsx("p",{className:"text-[10px] text-emerald-500/40",children:"Monthly reward already claimed."})]})]}):r.jsxs("div",{className:"mb-10",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:r.jsx(Nr,{className:"w-10 h-10 text-red-400"})}),r.jsx("h2",{className:"text-3xl font-display font-light mb-2 text-red-200",children:"Refocus."}),r.jsx("p",{className:"text-red-200/40 text-sm mb-10",children:"Try again to improve your standing."})]}),r.jsxs("div",{className:"flex flex-col gap-4 w-full max-w-[240px] mx-auto",children:[r.jsx(M,{className:"w-full h-14 bg-white text-emerald-950 hover:bg-emerald-50 rounded-2xl font-bold tracking-widest text-[10px] uppercase",onClick:()=>l("landing"),children:"Play Again"}),r.jsx(M,{variant:"outline",className:"w-full h-14 border-emerald-500/20 text-emerald-400 hover:bg-emerald-500/5 rounded-2xl font-bold tracking-widest text-[10px] uppercase",onClick:()=>t("/leaderboard"),children:"Leaderboard"})]})]}),o==="error"&&r.jsxs("div",{className:"text-center w-full",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-6",children:r.jsx(Ze,{className:"w-8 h-8 text-red-500"})}),r.jsx("h2",{className:"text-2xl font-light mb-4",children:"Interrupted."}),r.jsx("p",{className:"text-red-200/40 text-sm mb-10 bg-red-500/5 p-4 rounded-xl border border-red-500/10",children:d}),r.jsx(M,{className:"bg-emerald-600 hover:bg-emerald-500 text-white rounded-2xl px-8 h-12",onClick:()=>l("landing"),children:"Return to Start"})]})]})})}const JO=new aC("https://lovely-falcon-994.convex.cloud");function XO(){const e=jt(),[t,s]=$r.useState(!0);if(zO(),$r.useEffect(()=>{const d=setTimeout(()=>s(!1),2e3);return()=>clearTimeout(d)},[]),t)return r.jsx(QN,{});const n=e.pathname.startsWith("/admin")||e.pathname.startsWith("/board"),a=e.pathname==="/",o=!n&&["/feed","/ancient-culture","/wisdom-now","/teachings","/profile","/admin","/board","/notifications","/tasks","/leaderboard","/admin/reward-responses","/my-responses","/admin/responses","/post","/search","/banking","/chat"].some(d=>e.pathname.startsWith(d))&&e.pathname!=="/chat";return r.jsxs("div",{className:"flex flex-col min-h-screen",children:[!n&&e.pathname!=="/chat"&&r.jsx(JP,{}),!1,r.jsx("main",{className:`flex-1 ${!n&&e.pathname!=="/chat"?"pt-14 md:pt-20":""} ${o?"pb-20 md:pb-0":""}`,children:r.jsxs(ku,{children:[r.jsx(ee,{path:"/",element:r.jsx(eA,{})}),r.jsx(ee,{path:"/login",element:r.jsx(c8,{})}),r.jsx(ee,{path:"/forgot-password",element:r.jsx(VO,{})}),r.jsx(ee,{path:"/reset-password",element:r.jsx($O,{})}),r.jsx(ee,{path:"/register",element:r.jsx(x8,{})}),r.jsx(ee,{path:"/feed",element:r.jsx(hD,{})}),r.jsx(ee,{path:"/ancient-culture",element:r.jsx(pD,{})}),r.jsx(ee,{path:"/wisdom-now",element:r.jsx(fD,{})}),r.jsx(ee,{path:"/profile",element:r.jsx(SD,{})}),r.jsx(ee,{path:"/profile/followers",element:r.jsx(Ll,{})}),r.jsx(ee,{path:"/profile/following",element:r.jsx(Ll,{})}),r.jsx(ee,{path:"/profile/:userId/followers",element:r.jsx(Ll,{})}),r.jsx(ee,{path:"/profile/:userId/following",element:r.jsx(Ll,{})}),r.jsx(ee,{path:"/saved-posts",element:r.jsx(xD,{})}),r.jsx(ee,{path:"/admin/*",element:r.jsx(Db,{children:r.jsxs(ku,{children:[r.jsx(ee,{index:!0,element:r.jsx(CD,{})}),r.jsx(ee,{path:"banking",element:r.jsx(PD,{})}),r.jsx(ee,{path:"master-pool",element:r.jsx(FD,{})}),r.jsx(ee,{path:"announcements",element:r.jsx(VD,{})}),r.jsx(ee,{path:"polls",element:r.jsx($D,{})}),r.jsx(ee,{path:"diamond-challenge",element:r.jsx(LD,{})}),r.jsx(ee,{path:"questions",element:r.jsx(DD,{})}),r.jsx(ee,{path:"user-tags",element:r.jsx(OD,{})}),r.jsx(ee,{path:"contacts",element:r.jsx(WD,{})}),r.jsx(ee,{path:"settings",element:r.jsx(BD,{})}),r.jsx(ee,{path:"roles",element:r.jsx(lO,{})}),r.jsx(ee,{path:"user/:userId",element:r.jsx(dO,{})})]})})}),r.jsx(ee,{path:"/my-responses",element:r.jsx(qD,{})}),r.jsx(ee,{path:"/banking",element:r.jsx(BO,{})}),r.jsx(ee,{path:"/tasks",element:r.jsx(_D,{})}),r.jsx(ee,{path:"/leaderboard",element:r.jsx(GD,{})}),r.jsx(ee,{path:"/notifications",element:r.jsx(TD,{})}),r.jsx(ee,{path:"/setup",element:r.jsx(ID,{})}),r.jsx(ee,{path:"/search",element:r.jsx(XD,{})}),r.jsx(ee,{path:"/member-onboarding",element:r.jsx(RO,{})}),r.jsx(ee,{path:"/board/*",element:r.jsx(Db,{children:r.jsxs(ku,{children:[r.jsx(ee,{index:!0,element:r.jsx(uO,{})}),r.jsx(ee,{path:"tasks",element:r.jsx(mO,{})}),r.jsx(ee,{path:"task/new",element:r.jsx(HO,{})}),r.jsx(ee,{path:"training",element:r.jsx(hO,{})}),r.jsx(ee,{path:"training/new",element:r.jsx(GO,{})}),r.jsx(ee,{path:"attendance",element:r.jsx(SO,{})}),r.jsx(ee,{path:"finance",element:r.jsx(CO,{})}),r.jsx(ee,{path:"contributions",element:r.jsx(MO,{})}),r.jsx(ee,{path:"admin",element:r.jsx(NO,{})})]})})}),r.jsx(ee,{path:"/profile/:userId",element:r.jsx(ZD,{})}),r.jsx(ee,{path:"/about",element:r.jsx(eO,{})}),r.jsx(ee,{path:"/privacy",element:r.jsx(tO,{})}),r.jsx(ee,{path:"/terms",element:r.jsx(rO,{})}),r.jsx(ee,{path:"/contact",element:r.jsx(sO,{})}),r.jsx(ee,{path:"/faq",element:r.jsx(aO,{})}),r.jsx(ee,{path:"/guidelines",element:r.jsx(oO,{})}),r.jsx(ee,{path:"/post/:postId/responses",element:r.jsx(KD,{})}),r.jsx(ee,{path:"/post/:postId",element:r.jsx(JD,{})}),r.jsx(ee,{path:"/official-response/:postId",element:r.jsx(LO,{})}),r.jsx(ee,{path:"/teachings",element:r.jsx(QO,{})}),r.jsx(ee,{path:"/create-post",element:r.jsx(KO,{})}),r.jsx(ee,{path:"/announcement/:id",element:r.jsx(cO,{})}),r.jsx(ee,{path:"/chat",element:r.jsx(KN,{})}),r.jsx(ee,{path:"/diamond-challenge",element:r.jsx(YO,{})})]})}),a&&r.jsx(XP,{}),o&&r.jsx(ZP,{})]})}function ZO(){return r.jsx(iC,{client:JO,children:r.jsx(vC,{children:r.jsx(kC,{children:r.jsx(fP,{children:r.jsxs(LS,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[r.jsx(WO,{}),r.jsx(XO,{})]})})})})})}am.createRoot(document.getElementById("root")).render(r.jsx($r.StrictMode,{children:r.jsx(ZO,{})}));
//# sourceMappingURL=index-HpuAdd0C.js.map
